import{S as ca,i as la,s as fa,k as xi,q as wo,l as Mi,m as to,r as Co,h as Dr,n as er,b as io,G as jr,I as ko,J as Oh,B as Vo,K as H_,o as Cd,L as Nh,M as fy,C as dy,D as hy,E as py,F as my,f as Gs,t as ks,a as Ro,c as Io,u as Uh,N as W_,O as vs,P as ws,Q as Uc,R as Gc,w as ea,T as _y,x as ta,p as kc,y as na,U as Hc,z as ra}from"../../chunks/index-b9b514d9.js";var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ou(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var i=Function.bind.apply(e,r);return new i}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(n){var r=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return o[n]}})}),t}var Sd={},Ul={},Mc={};class Bd{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;return n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t),this}removeEventListener(e,t){if(this._listeners===void 0)return this;const n=this._listeners[e];if(n!==void 0){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}return this}dispatchEvent(e){if(this._listeners===void 0)return this;const t=this._listeners[e.type];if(t!==void 0){const n=t.slice(0);for(let r=0,i=n.length;r<i;r++)n[r].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}let Ga=class extends Bd{constructor(e,t,n,r={}){if(super(),this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=t,this._child=n,this._attributes=r,!t.isOnGraph(n))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._disposed=!0,this.dispatchEvent({type:"dispose",target:this}),super.dispose())}isDisposed(){return this._disposed}},V_=class extends Bd{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){return this.listParentEdges(e).map(t=>t.getParent())}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){return this.listChildEdges(e).map(t=>t.getChild())}disconnectParents(e,t){let n=this.listParentEdges(e);return t&&(n=n.filter(r=>t(r.getParent()))),n.forEach(r=>r.dispose()),this}createEdge(e,t,n,r){return this._registerEdge(new Ga(e,t,n,r))}_registerEdge(e){this._edges.add(e);const t=e.getParent();this._parentEdges.has(t)||this._parentEdges.set(t,new Set),this._parentEdges.get(t).add(e);const n=e.getChild();return this._childEdges.has(n)||this._childEdges.set(n,new Set),this._childEdges.get(n).add(e),e.addEventListener("dispose",()=>this._removeEdge(e)),e}_removeEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}};function lc(){return lc=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},lc.apply(this,arguments)}function td(o){return o instanceof Ga}function ic(o){return Array.isArray(o)&&o[0]instanceof Ga}function oc(o){return!!(o&&typeof o=="object"&&Object.values(o)[0]instanceof Ga)}const Ki=Symbol("attributes"),Au=Symbol("immutableKeys");let j_=class extends Bd{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[Ki]=void 0,this[Au]=void 0,this.graph=e,this[Au]=new Set,this[Ki]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),t={};for(const n in e){const r=e[n];if(r instanceof j_){const i=this.graph.createEdge(n,this,r);i.addEventListener("dispose",()=>r.dispose()),this[Au].add(n),t[n]=i}else t[n]=r}return t}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,t){for(const n in this[Ki]){const r=this[Ki][n];if(td(r)){const i=r;i.getChild()===e&&this.setRef(n,t,i.getAttributes())}else if(ic(r)){const i=r.find(s=>s.getChild()===e);if(i){const s=i.getAttributes();this.removeRef(n,e).addRef(n,t,s)}}else if(oc(r)){const i=r;for(const s in i){const a=i[s];a.getChild()===e&&this.setRefMap(n,s,t,a.getAttributes())}}}return this}get(e){return this[Ki][e]}set(e,t){return this[Ki][e]=t,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const t=this[Ki][e];return t?t.getChild():null}setRef(e,t,n){if(this[Au].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[Ki][e];if(r&&r.dispose(),!t)return this;const i=this.graph.createEdge(e,this,t,n);return i.addEventListener("dispose",()=>{delete this[Ki][e],this.dispatchEvent({type:"change",attribute:e})}),this[Ki][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this[Ki][e].map(t=>t.getChild())}addRef(e,t,n){const r=this.graph.createEdge(e,this,t,n),i=this[Ki][e];return i.push(r),r.addEventListener("dispose",()=>{const s=i.filter(a=>a!==r);i.length=0;for(const a of s)i.push(a);this.dispatchEvent({type:"change",attribute:e})}),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,t){return this[Ki][e].filter(n=>n.getChild()===t).forEach(n=>n.dispose()),this}listRefMapKeys(e){return Object.keys(this[Ki][e])}listRefMapValues(e){return Object.values(this[Ki][e]).map(t=>t.getChild())}getRefMap(e,t){const n=this[Ki][e];return n[t]?n[t].getChild():null}setRefMap(e,t,n,r){const i=this[Ki][e],s=i[t];if(s&&s.dispose(),!n)return this;r=Object.assign(r||{},{key:t});const a=this.graph.createEdge(e,this,n,lc({},r,{key:t}));return a.addEventListener("dispose",()=>{delete i[t],this.dispatchEvent({type:"change",attribute:e,key:t})}),i[t]=a,this.dispatchEvent({type:"change",attribute:e,key:t})}dispatchEvent(e){return super.dispatchEvent(lc({},e,{target:this})),this.graph.dispatchEvent(lc({},e,{target:this,type:`node:${e.type}`})),this}};var gy=1e-6,Bs=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var o=0,e=arguments.length;e--;)o+=arguments[e]*arguments[e];return Math.sqrt(o)});function Dc(){var o=new Bs(3);return Bs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function bl(o){var e=o[0],t=o[1],n=o[2];return Math.hypot(e,t,n)}function Gh(o,e,t){var n=new Bs(3);return n[0]=o,n[1]=e,n[2]=t,n}function nd(o,e,t){return o[0]=Math.min(e[0],t[0]),o[1]=Math.min(e[1],t[1]),o[2]=Math.min(e[2],t[2]),o}function rd(o,e,t){return o[0]=Math.max(e[0],t[0]),o[1]=Math.max(e[1],t[1]),o[2]=Math.max(e[2],t[2]),o}function kh(o,e,t){return o[0]=e[0]*t,o[1]=e[1]*t,o[2]=e[2]*t,o}function Gl(o,e){var t=e[0],n=e[1],r=e[2],i=t*t+n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),o[0]=e[0]*i,o[1]=e[1]*i,o[2]=e[2]*i,o}function yy(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]}function af(o,e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],u=t[2];return o[0]=r*u-i*a,o[1]=i*s-n*u,o[2]=n*a-r*s,o}function xd(o,e,t){var n=e[0],r=e[1],i=e[2],s=t[3]*n+t[7]*r+t[11]*i+t[15];return s=s||1,o[0]=(t[0]*n+t[4]*r+t[8]*i+t[12])/s,o[1]=(t[1]*n+t[5]*r+t[9]*i+t[13])/s,o[2]=(t[2]*n+t[6]*r+t[10]*i+t[14])/s,o}function vy(o,e,t){var n=e[0],r=e[1],i=e[2];return o[0]=n*t[0]+r*t[3]+i*t[6],o[1]=n*t[1]+r*t[4]+i*t[7],o[2]=n*t[2]+r*t[5]+i*t[8],o}var Ay=bl;(function(){var o=Dc();return function(e,t,n,r,i,s){var a,u;for(t||(t=3),n||(n=0),r?u=Math.min(r*t+n,e.length):u=e.length,a=n;a<u;a+=t)o[0]=e[a],o[1]=e[a+1],o[2]=e[a+2],i(o,o,s),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2];return e}})();function by(o,e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=e[9],d=e[10],_=e[11],A=e[12],E=e[13],v=e[14],T=e[15],P=t*a-n*s,I=t*u-r*s,k=t*f-i*s,K=n*u-r*a,ee=n*f-i*a,me=r*f-i*u,Z=l*E-p*A,re=l*v-d*A,de=l*T-_*A,Ie=p*v-d*E,Pe=p*T-_*E,we=d*T-_*v,Te=P*we-I*Pe+k*Ie+K*de-ee*re+me*Z;return Te?(Te=1/Te,o[0]=(a*we-u*Pe+f*Ie)*Te,o[1]=(r*Pe-n*we-i*Ie)*Te,o[2]=(E*me-v*ee+T*K)*Te,o[3]=(d*ee-p*me-_*K)*Te,o[4]=(u*de-s*we-f*re)*Te,o[5]=(t*we-r*de+i*re)*Te,o[6]=(v*k-A*me-T*I)*Te,o[7]=(l*me-d*k+_*I)*Te,o[8]=(s*Pe-a*de+f*Z)*Te,o[9]=(n*de-t*Pe-i*Z)*Te,o[10]=(A*ee-E*k+T*P)*Te,o[11]=(p*k-l*ee-_*P)*Te,o[12]=(a*re-s*Ie-u*Z)*Te,o[13]=(t*Ie-n*re+r*Z)*Te,o[14]=(E*I-A*K-v*P)*Te,o[15]=(l*K-p*I+d*P)*Te,o):null}function Ey(o){var e=o[0],t=o[1],n=o[2],r=o[3],i=o[4],s=o[5],a=o[6],u=o[7],f=o[8],l=o[9],p=o[10],d=o[11],_=o[12],A=o[13],E=o[14],v=o[15],T=e*s-t*i,P=e*a-n*i,I=e*u-r*i,k=t*a-n*s,K=t*u-r*s,ee=n*u-r*a,me=f*A-l*_,Z=f*E-p*_,re=f*v-d*_,de=l*E-p*A,Ie=l*v-d*A,Pe=p*v-d*E;return T*Pe-P*Ie+I*de+k*re-K*Z+ee*me}function Md(o,e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],u=e[5],f=e[6],l=e[7],p=e[8],d=e[9],_=e[10],A=e[11],E=e[12],v=e[13],T=e[14],P=e[15],I=t[0],k=t[1],K=t[2],ee=t[3];return o[0]=I*n+k*a+K*p+ee*E,o[1]=I*r+k*u+K*d+ee*v,o[2]=I*i+k*f+K*_+ee*T,o[3]=I*s+k*l+K*A+ee*P,I=t[4],k=t[5],K=t[6],ee=t[7],o[4]=I*n+k*a+K*p+ee*E,o[5]=I*r+k*u+K*d+ee*v,o[6]=I*i+k*f+K*_+ee*T,o[7]=I*s+k*l+K*A+ee*P,I=t[8],k=t[9],K=t[10],ee=t[11],o[8]=I*n+k*a+K*p+ee*E,o[9]=I*r+k*u+K*d+ee*v,o[10]=I*i+k*f+K*_+ee*T,o[11]=I*s+k*l+K*A+ee*P,I=t[12],k=t[13],K=t[14],ee=t[15],o[12]=I*n+k*a+K*p+ee*E,o[13]=I*r+k*u+K*d+ee*v,o[14]=I*i+k*f+K*_+ee*T,o[15]=I*s+k*l+K*A+ee*P,o}function Ty(o,e){return o[0]=e[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function wy(o,e){var t=e[0],n=e[1],r=e[2],i=e[4],s=e[5],a=e[6],u=e[8],f=e[9],l=e[10];return o[0]=Math.hypot(t,n,r),o[1]=Math.hypot(i,s,a),o[2]=Math.hypot(u,f,l),o}function Cy(o,e){var t=new Bs(3);wy(t,e);var n=1/t[0],r=1/t[1],i=1/t[2],s=e[0]*n,a=e[1]*r,u=e[2]*i,f=e[4]*n,l=e[5]*r,p=e[6]*i,d=e[8]*n,_=e[9]*r,A=e[10]*i,E=s+l+A,v=0;return E>0?(v=Math.sqrt(E+1)*2,o[3]=.25*v,o[0]=(p-_)/v,o[1]=(d-u)/v,o[2]=(a-f)/v):s>l&&s>A?(v=Math.sqrt(1+s-l-A)*2,o[3]=(p-_)/v,o[0]=.25*v,o[1]=(a+f)/v,o[2]=(d+u)/v):l>A?(v=Math.sqrt(1+l-s-A)*2,o[3]=(d-u)/v,o[0]=(a+f)/v,o[1]=.25*v,o[2]=(p+_)/v):(v=Math.sqrt(1+A-s-l)*2,o[3]=(a-f)/v,o[0]=(d+u)/v,o[1]=(p+_)/v,o[2]=.25*v),o}function Sy(o,e,t,n){var r=e[0],i=e[1],s=e[2],a=e[3],u=r+r,f=i+i,l=s+s,p=r*u,d=r*f,_=r*l,A=i*f,E=i*l,v=s*l,T=a*u,P=a*f,I=a*l,k=n[0],K=n[1],ee=n[2];return o[0]=(1-(A+v))*k,o[1]=(d+I)*k,o[2]=(_-P)*k,o[3]=0,o[4]=(d-I)*K,o[5]=(1-(p+v))*K,o[6]=(E+T)*K,o[7]=0,o[8]=(_+P)*ee,o[9]=(E-T)*ee,o[10]=(1-(p+A))*ee,o[11]=0,o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=1,o}const By="v2.5.1",Dd="@glb.bin";var ct,yc,ms,ho,Jo,Dl;function Rc(o){const e={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]},t=o.propertyType===ct.NODE?[o]:o.listChildren();for(const n of t)n.traverse(r=>{const i=r.getMesh();if(!i)return;const s=xy(i,r.getWorldMatrix());id(s.min,e),id(s.max,e)});return e}function xy(o,e){const t={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]};for(const n of o.listPrimitives()){const r=n.getAttribute("POSITION");if(!r)continue;let i=[0,0,0],s=[0,0,0];for(let a=0;a<r.getCount();a++)i=r.getElement(a,i),s=xd(s,i,e),id(s,t)}return t}function id(o,e){for(let t=0;t<3;t++)e.min[t]=Math.min(o[t],e.min[t]),e.max[t]=Math.max(o[t],e.max[t])}(function(o){o.ACCESSOR="Accessor",o.ANIMATION="Animation",o.ANIMATION_CHANNEL="AnimationChannel",o.ANIMATION_SAMPLER="AnimationSampler",o.BUFFER="Buffer",o.CAMERA="Camera",o.MATERIAL="Material",o.MESH="Mesh",o.PRIMITIVE="Primitive",o.PRIMITIVE_TARGET="PrimitiveTarget",o.NODE="Node",o.ROOT="Root",o.SCENE="Scene",o.SKIN="Skin",o.TEXTURE="Texture",o.TEXTURE_INFO="TextureInfo"})(ct||(ct={})),function(o){o.INTERLEAVED="interleaved",o.SEPARATE="separate"}(yc||(yc={})),function(o){o.ARRAY_BUFFER="ARRAY_BUFFER",o.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",o.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",o.OTHER="OTHER"}(ms||(ms={})),function(o){o[o.R=4096]="R",o[o.G=256]="G",o[o.B=16]="B",o[o.A=1]="A"}(ho||(ho={})),function(o){o.GLTF="GLTF",o.GLB="GLB"}(Jo||(Jo={}));class ii{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const t=atob(e.split(",")[1]),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}{const t=e.split(",")[1],n=e.indexOf("base64")>=0;return Buffer.from(t,n?"base64":"utf8")}}static encodeText(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Buffer.from(e)}static decodeText(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}static concat(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}static pad(e,t=0){const n=this.padNumber(e.byteLength);if(n===e.byteLength)return e;const r=new Uint8Array(n);if(r.set(e),t!==0)for(let i=e.byteLength;i<n;i++)r[i]=t;return r}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;let n=e.byteLength;for(;n--;)if(e[n]!==t[n])return!1;return!0}static toView(e,t=0,n=1/0){return new Uint8Array(e.buffer,e.byteOffset+t,Math.min(e.byteLength,n))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}let Wo=class{static hexToFactor(e,t){e=Math.floor(e);const n=t;return n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[n,r,i]=this.convertLinearToSRGB(e,t);return 255*n<<16^255*r<<8^255*i<<0}static convertSRGBToLinear(e,t){const n=e,r=t;for(let i=0;i<3;i++)r[i]=n[i]<.04045?.0773993808*n[i]:Math.pow(.9478672986*n[i]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const n=e,r=t;for(let i=0;i<3;i++)r[i]=n[i]<.0031308?12.92*n[i]:1.055*Math.pow(n[i],.41666)-.055;return t}},Rd=class{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const t=new DataView(e.buffer,e.byteOffset);return ii.decodeText(e.slice(12,16))===Rd.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}};Rd.PNG_FRIED_CHUNK_NAME="CgBI";let as=class{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let n=0;const r=this.getSize(e,t);if(!r)return null;for(;r[0]>1||r[1]>1;)n+=r[0]*r[1]*4,r[0]=Math.max(Math.floor(r[0]/2),1),r[1]=Math.max(Math.floor(r[1]/2),1);return n+=4,n}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":`image/${e}`}};function My(o,e){if(e>o.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(o.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return o}as.impls={"image/jpeg":new class{match(o){return o.length>=3&&o[0]===255&&o[1]===216&&o[2]===255}getSize(o){let e,t,n=new DataView(o.buffer,o.byteOffset+4);for(;n.byteLength;){if(e=n.getUint16(0,!1),My(n,e),t=n.getUint8(e+1),t===192||t===193||t===194)return[n.getUint16(e+7,!1),n.getUint16(e+5,!1)];n=new DataView(o.buffer,n.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(o){return 3}},"image/png":new Rd};let Vs=class{static basename(e){const t=e.split(/[\\/]/).pop();return t.substring(0,t.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const t=e.match(/data:(image\/\w+)/)[1];return as.mimeTypeToExtension(t)}return e.startsWith("data:model/gltf+json")?"gltf":e.startsWith("data:model/gltf-binary")?"glb":e.startsWith("data:application/")?"bin":e.split(/[\\/]/).pop().split(/[.]/).pop()}};function Hh(o){return Object.prototype.toString.call(o)==="[object Object]"}function Da(o){if(Hh(o)===!1)return!1;const e=o.constructor;if(e===void 0)return!0;const t=e.prototype;return Hh(t)!==!1&&Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")!==!1}(function(o){o[o.SILENT=4]="SILENT",o[o.ERROR=3]="ERROR",o[o.WARN=2]="WARN",o[o.INFO=1]="INFO",o[o.DEBUG=0]="DEBUG"})(Dl||(Dl={}));let $o=class{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=$o.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=$o.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=$o.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=$o.Verbosity.ERROR&&console.error(e)}};$o.Verbosity=Dl,$o.DEFAULT_INSTANCE=new $o($o.Verbosity.INFO);let bi=class{static identity(e){return e}static eq(e,t,n=1e-5){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>n)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,n,r){let i=bl([e[0],e[1],e[2]]);const s=bl([e[4],e[5],e[6]]),a=bl([e[8],e[9],e[10]]);Ey(e)<0&&(i=-i),t[0]=e[12],t[1]=e[13],t[2]=e[14];const u=e.slice(),f=1/i,l=1/s,p=1/a;u[0]*=f,u[1]*=f,u[2]*=f,u[4]*=l,u[5]*=l,u[6]*=l,u[8]*=p,u[9]*=p,u[10]*=p,Cy(n,u),r[0]=i,r[1]=s,r[2]=a}static compose(e,t,n,r){const i=r,s=t[0],a=t[1],u=t[2],f=t[3],l=s+s,p=a+a,d=u+u,_=s*l,A=s*p,E=s*d,v=a*p,T=a*d,P=u*d,I=f*l,k=f*p,K=f*d,ee=n[0],me=n[1],Z=n[2];return i[0]=(1-(v+P))*ee,i[1]=(A+K)*ee,i[2]=(E-k)*ee,i[3]=0,i[4]=(A-K)*me,i[5]=(1-(_+P))*me,i[6]=(T+I)*me,i[7]=0,i[8]=(E+k)*Z,i[9]=(T-I)*Z,i[10]=(1-(_+v))*Z,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}};function Dy(o,e){if(!!o!=!!e)return!1;const t=o.getChild(),n=e.getChild();return t===n||t.equals(n)}function Ry(o,e){if(!!o!=!!e||o.length!==e.length)return!1;for(let t=0;t<o.length;t++){const n=o[t],r=e[t];if(n.getChild()!==r.getChild()&&!n.getChild().equals(r.getChild()))return!1}return!0}function Iy(o,e){if(!!o!=!!e)return!1;const t=Object.keys(o),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r in o){const i=o[r],s=e[r];if(!!i!=!!s)return!1;const a=i.getChild(),u=s.getChild();if(a!==u&&!a.equals(u))return!1}return!0}function z_(o,e){if(o===e)return!0;if(!!o!=!!e||!o||!e||o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(o[t]!==e[t])return!1;return!0}function K_(o,e){if(o===e)return!0;if(!!o!=!!e)return!1;if(!Da(o)||!Da(e))return o===e;const t=o,n=e;let r,i=0,s=0;for(r in t)i++;for(r in n)s++;if(i!==s)return!1;for(r in t){const a=t[r],u=n[r];if(Rl(a)&&Rl(u)){if(!z_(a,u))return!1}else if(Da(a)&&Da(u)){if(!K_(a,u))return!1}else if(a!==u)return!1}return!0}function Rl(o){return Array.isArray(o)||ArrayBuffer.isView(o)}const Wh="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",Vh=new Set,Py=function(){let o="";for(let e=0;e<6;e++)o+=Wh.charAt(Math.floor(Math.random()*Wh.length));return o},fc=function(){for(let o=0;o<999;o++){const e=Py();if(!Vh.has(e))return Vh.add(e),e}return""};let So=class{static dirname(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substring(0,t+1)}static basename(e){return Vs.basename(new URL(e,"https://null.example").pathname)}static extension(e){return Vs.extension(new URL(e,"https://null.example").pathname)}static resolve(e,t){if(!this.isRelativePath(t))return t;const n=e.split("/"),r=t.split("/");n.pop();for(let i=0;i<r.length;i++)r[i]!=="."&&(r[i]===".."?n.pop():n.push(r[i]));return n.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}};So.DEFAULT_INIT={},So.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const xs=o=>o,Fy=new Set;let kl=class extends j_{constructor(e,t=""){super(e),this[Ki].name=t,this.init(),this.dispatchEvent({type:"create"})}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){return new this.constructor(this.graph).copy(this,xs)}copy(e,t=xs){for(const n in this[Ki]){const r=this[Ki][n];if(r instanceof Ga)this[Au].has(n)||r.dispose();else if(ic(r))for(const i of r)i.dispose();else if(oc(r))for(const i in r)r[i].dispose()}for(const n in e[Ki]){const r=this[Ki][n],i=e[Ki][n];if(i instanceof Ga)this[Au].has(n)?r.getChild().copy(t(i.getChild()),t):this.setRef(n,t(i.getChild()),i.getAttributes());else if(ic(i))for(const s of i)this.addRef(n,t(s.getChild()),s.getAttributes());else if(oc(i))for(const s in i){const a=i[s];this.setRefMap(n,s,t(a.getChild()),a.getAttributes())}else this[Ki][n]=Da(i)?JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.slice():i}return this}equals(e,t=Fy){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const n in this[Ki]){if(t.has(n))continue;const r=this[Ki][n],i=e[Ki][n];if(td(r)||td(i)){if(!Dy(r,i))return!1}else if(ic(r)||ic(i)){if(!Ry(r,i))return!1}else if(oc(r)||oc(i)){if(!Iy(r,i))return!1}else if(Da(r)||Da(i)){if(!K_(r,i))return!1}else if(Rl(r)||Rl(i)){if(!z_(r,i))return!1}else if(r!==i)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}},Fo=class extends kl{getDefaults(){return Object.assign(super.getDefaults(),{extensions:{}})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,t){return t&&t.t(this),this.setRefMap("extensions",e,t)}listExtensions(){return this.listRefMapValues("extensions")}},Cn=class extends Fo{constructor(...e){super(...e),this.i=bi.identity,this.o=bi.identity}init(){this.propertyType=ct.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:Cn.Type.SCALAR,componentType:Cn.ComponentType.FLOAT,normalized:!1,buffer:null})}copy(e,t=xs){return super.copy(e,t),this.i=e.i,this.o=e.o,this}static getElementSize(e){switch(e){case Cn.Type.SCALAR:return 1;case Cn.Type.VEC2:return 2;case Cn.Type.VEC3:return 3;case Cn.Type.VEC4:case Cn.Type.MAT2:return 4;case Cn.Type.MAT3:return 9;case Cn.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case Cn.ComponentType.BYTE:case Cn.ComponentType.UNSIGNED_BYTE:return 1;case Cn.ComponentType.SHORT:case Cn.ComponentType.UNSIGNED_SHORT:return 2;case Cn.ComponentType.UNSIGNED_INT:case Cn.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let n=0;n<t;n++)e[n]=this.o(e[n]);return e}getMin(e){const t=this.get("array"),n=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=1/0;for(let i=0;i<n*r;i+=r)for(let s=0;s<r;s++){const a=t[i+s];Number.isFinite(a)&&(e[s]=Math.min(e[s],a))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let n=0;n<t;n++)e[n]=this.o(e[n]);return e}getMax(e){const t=this.get("array"),n=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=-1/0;for(let i=0;i<n*r;i+=r)for(let s=0;s<r;s++){const a=t[i+s];Number.isFinite(a)&&(e[s]=Math.max(e[s],a))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return Cn.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e),e?(this.o=t=>bi.denormalize(t,this.get("componentType")),this.i=t=>bi.normalize(t,this.get("componentType"))):(this.o=bi.identity,this.i=bi.identity),this}getScalar(e){const t=this.getElementSize();return this.o(this.get("array")[e*t])}setScalar(e,t){return this.get("array")[e*this.getElementSize()]=this.i(t),this}getElement(e,t){const n=this.getElementSize(),r=this.get("array");for(let i=0;i<n;i++)t[i]=this.o(r[e*n+i]);return t}setElement(e,t){const n=this.getElementSize(),r=this.get("array");for(let i=0;i<n;i++)r[e*n+i]=this.i(t[i]);return this}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?function(t){switch(t.constructor){case Float32Array:return Cn.ComponentType.FLOAT;case Uint32Array:return Cn.ComponentType.UNSIGNED_INT;case Uint16Array:return Cn.ComponentType.UNSIGNED_SHORT;case Uint8Array:return Cn.ComponentType.UNSIGNED_BYTE;case Int16Array:return Cn.ComponentType.SHORT;case Int8Array:return Cn.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):Cn.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}};Cn.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},Cn.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};let Id=class extends Fo{init(){this.propertyType=ct.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:[],samplers:[]})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}},da=class extends Fo{init(){this.propertyType=ct.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}};da.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};let Xa=class extends Fo{init(){this.propertyType=ct.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:Xa.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:ms.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:ms.OTHER})}};Xa.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};let Pd=class extends Fo{init(){this.propertyType=ct.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}},ka=class extends Fo{init(){this.propertyType=ct.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:ka.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:2*Math.PI*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}};ka.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};let uo=class extends kl{t(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}};uo.EXTENSION_NAME=void 0;let Qi=class extends Fo{init(){this.propertyType=ct.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Qi.WrapMode.REPEAT,wrapT:Qi.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}};Qi.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Qi.MagFilter={NEAREST:9728,LINEAR:9729},Qi.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Wc,G:Vc,B:jc,A:Ly}=ho;let Ks=class extends Fo{init(){this.propertyType=ct.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:Ks.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Qi(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Qi(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Qi(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Qi(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Qi(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const t=this.get("baseColorFactor").slice();return t[3]=e,this.set("baseColorFactor",t)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorHex(){return Wo.factorToHex(this.get("baseColorFactor"))}setBaseColorHex(e){const t=this.get("baseColorFactor").slice();return this.set("baseColorFactor",Wo.hexToFactor(e,t))}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Wc|Vc|jc|Ly})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveHex(){return Wo.factorToHex(this.get("emissiveFactor"))}setEmissiveHex(e){const t=this.get("emissiveFactor").slice();return this.set("emissiveFactor",Wo.hexToFactor(e,t))}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Wc|Vc|jc})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Wc|Vc|jc})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Wc})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Vc|jc})}};Ks.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};let Fd=class extends Fo{init(){this.propertyType=ct.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:[]})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}},Nu=class extends Fo{constructor(...e){super(...e),this.u=null}init(){this.propertyType=ct.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:[]})}copy(e,t=xs){if(t===xs)throw new Error("Node cannot be copied.");return super.copy(e,t)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return bi.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const t=this.get("translation").slice(),n=this.get("rotation").slice(),r=this.get("scale").slice();return bi.decompose(e,t,n,r),this.set("translation",t).set("rotation",n).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return bi.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return bi.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return bi.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r instanceof Nu;r=r.u)e.push(r);let t;const n=e.pop().getMatrix();for(;t=e.pop();)Md(n,n,t.getMatrix());return n}addChild(e){e.u&&e.u.removeChild(e),this.addRef("children",e),e.u=this;const t=this[Ki].children;return t[t.length-1].addEventListener("dispose",()=>e.u=null),this}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParent(){return this.u}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}},ao=class extends Fo{init(){this.propertyType=ct.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:ao.Mode.TRIANGLES,material:null,indices:null,attributes:{},targets:[]})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:ms.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:ms.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}};ao.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};let Ld=class extends kl{init(){this.propertyType=ct.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:ms.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}};function Ko(){return(Ko=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}).apply(this,arguments)}let Hl=class extends Fo{init(){this.propertyType=ct.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:[]})}copy(e,t=xs){if(t===xs)throw new Error("Scene cannot be copied.");return super.copy(e,t)}addChild(e){e.u&&e.u.removeChild(e),this.addRef("children",e),e.u=this;const t=this[Ki].children;return t[t.length-1].addEventListener("dispose",()=>e.u=null),this}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}},Od=class extends Fo{init(){this.propertyType=ct.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:[]})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:ms.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}},Ha=class extends Fo{init(){this.propertyType=ct.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||as.extensionToMimeType(Vs.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e),this.set("mimeType",as.extensionToMimeType(Vs.extension(e))),this}getImage(){return this.get("image")}setImage(e){return this.set("image",ii.assertView(e))}getSize(){const e=this.get("image");return e?as.getSize(e,this.getMimeType()):null}},Wa=class extends Fo{init(){this.propertyType=ct.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:"glTF-Transform v2.5.1",version:"2.0"},defaultScene:null,accessors:[],animations:[],buffers:[],cameras:[],materials:[],meshes:[],nodes:[],scenes:[],skins:[],textures:[]})}constructor(e){super(e),this.h=new Set,e.addEventListener("node:create",t=>{this.l(t.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=xs){if(t===xs)throw new Error("Root cannot be copied.");this.set("asset",Ko({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ko({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?t(e.getDefaultScene()):null);for(const n of e.listRefMapKeys("extensions")){const r=e.getExtension(n);this.setExtension(n,t(r))}return this}l(e){return e instanceof Hl?this.addRef("scenes",e):e instanceof Nu?this.addRef("nodes",e):e instanceof ka?this.addRef("cameras",e):e instanceof Od?this.addRef("skins",e):e instanceof Fd?this.addRef("meshes",e):e instanceof Ks?this.addRef("materials",e):e instanceof Ha?this.addRef("textures",e):e instanceof Id?this.addRef("animations",e):e instanceof Cn?this.addRef("accessors",e):e instanceof Pd&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this.h)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}g(e){return this.h.add(e),this}p(e){return this.h.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}},Nd=class{constructor(){this.m=new V_,this.v=new Wa(this.m),this.T=$o.DEFAULT_INSTANCE}getRoot(){return this.v}getGraph(){return this.m}getLogger(){return this.T}setLogger(e){return this.T=e,this}clone(){return new Nd().setLogger(this.T).merge(this)}merge(e){for(const i of e.getRoot().listExtensionsUsed()){const s=this.createExtension(i.constructor);i.isRequired()&&s.setRequired(!0)}const t=new Set,n=new Map;t.add(e.v),n.set(e.v,this.v);for(const i of e.m.listEdges())for(const s of[i.getParent(),i.getChild()]){if(t.has(s))continue;let a;a=s.propertyType===ct.TEXTURE_INFO?s:new s.constructor(this.m),n.set(s,a),t.add(s)}const r=i=>{const s=n.get(i);if(!s)throw new Error("Could resolve property.");return s};for(const i of t){const s=n.get(i);if(!s)throw new Error("Could resolve property.");s.propertyType!==ct.TEXTURE_INFO&&s.copy(i,r)}return this}async transform(...e){const t=e.map(n=>n.name);for(const n of e)await n(this,{stack:t});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(n=>n.extensionName===t)||new e(this)}createScene(e=""){return new Hl(this.m,e)}createNode(e=""){return new Nu(this.m,e)}createCamera(e=""){return new ka(this.m,e)}createSkin(e=""){return new Od(this.m,e)}createMesh(e=""){return new Fd(this.m,e)}createPrimitive(){return new ao(this.m)}createPrimitiveTarget(e=""){return new Ld(this.m,e)}createMaterial(e=""){return new Ks(this.m,e)}createTexture(e=""){return new Ha(this.m,e)}createAnimation(e=""){return new Id(this.m,e)}createAnimationChannel(e=""){return new da(this.m,e)}createAnimationSampler(e=""){return new Xa(this.m,e)}createAccessor(e="",t=null){return t||(t=this.getRoot().listBuffers()[0]),new Cn(this.m,e).setBuffer(t)}createBuffer(e=""){return new Pd(this.m,e)}},co=class{constructor(e){this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.document=void 0,this.required=!1,this.properties=new Set,this.S=void 0,this.document=e,e.getRoot().g(this),this.S=n=>{const r=n,i=r.target;i instanceof uo&&i.extensionName===this.extensionName&&(r.type==="node:create"&&this.M(i),r.type==="node:dispose"&&this.I(i))};const t=e.getGraph();t.addEventListener("node:create",this.S),t.addEventListener("node:dispose",this.S)}dispose(){this.document.getRoot().p(this);const e=this.document.getGraph();e.removeEventListener("node:create",this.S),e.removeEventListener("node:dispose",this.S);for(const t of this.properties)t.dispose()}static register(){}isRequired(){return this.required}setRequired(e){return this.required=e,this}listProperties(){return Array.from(this.properties)}M(e){return this.properties.add(e),this}I(e){return this.properties.delete(e),this}install(e,t){return this}preread(e,t){return this}prewrite(e,t){return this}};co.EXTENSION_NAME=void 0;let J_=class{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),t.texCoord!==void 0&&e.setTexCoord(t.texCoord),t.extras!==void 0&&e.setExtras(t.extras);const n=this.jsonDoc.json.textures[t.index];if(n.sampler===void 0)return;const r=this.jsonDoc.json.samplers[n.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}};const od={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jh={logger:$o.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function zc(o,e){const t=e.bufferViews[o.bufferView],n=e.jsonDoc.json.bufferViews[o.bufferView],r=od[o.componentType],i=Cn.getElementSize(o.type),s=r.BYTES_PER_ELEMENT;if(n.byteStride!==void 0&&n.byteStride!==i*s)return function(u,f){const l=f.bufferViews[u.bufferView],p=f.jsonDoc.json.bufferViews[u.bufferView],d=od[u.componentType],_=Cn.getElementSize(u.type),A=d.BYTES_PER_ELEMENT,E=u.byteOffset||0,v=new d(u.count*_),T=new DataView(l.buffer,l.byteOffset,l.byteLength),P=p.byteStride;for(let I=0;I<u.count;I++)for(let k=0;k<_;k++){const K=E+I*P+k*A;let ee;switch(u.componentType){case Cn.ComponentType.FLOAT:ee=T.getFloat32(K,!0);break;case Cn.ComponentType.UNSIGNED_INT:ee=T.getUint32(K,!0);break;case Cn.ComponentType.UNSIGNED_SHORT:ee=T.getUint16(K,!0);break;case Cn.ComponentType.UNSIGNED_BYTE:ee=T.getUint8(K);break;case Cn.ComponentType.SHORT:ee=T.getInt16(K,!0);break;case Cn.ComponentType.BYTE:ee=T.getInt8(K);break;default:throw new Error(`Unexpected componentType "${u.componentType}".`)}v[I*_+k]=ee}return v}(o,e);const a=t.byteOffset+(o.byteOffset||0);return new r(t.buffer.slice(a,a+o.count*i*s))}var dc;(function(o){o[o.ARRAY_BUFFER=34962]="ARRAY_BUFFER",o[o.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(dc||(dc={}));let us=class{constructor(e,t,n){this.N=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.O=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.N=e,this.jsonDoc=t,this.options=n;const r=e.getRoot(),i=r.listBuffers().length,s=r.listTextures().length;this.bufferURIGenerator=new zh(i>1,()=>n.basename||"buffer"),this.imageURIGenerator=new zh(s>1,a=>function(u,f){const l=u.getGraph().listParentEdges(f).find(p=>p.getParent()!==u.getRoot());return l?l.getName().replace(/texture$/i,""):""}(e,a)||n.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,t){const n={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},r=JSON.stringify(n);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(n));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},s=JSON.stringify(i);this.textureDefIndexMap.has(s)||(this.textureDefIndexMap.set(s,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(s)};return t.getTexCoord()!==0&&(a.texCoord=t.getTexCoord()),Object.keys(t.getExtras()).length>0&&(a.extras=t.getExtras()),this.textureInfoDefMap.set(t,a),a}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.N.getGraph().listParentEdges(e).some(n=>n.getName()==="attributes"&&n.getAttributes().key==="POSITION"||n.getName()==="input")&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,n){if(this.options.format===Jo.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const r=as.mimeTypeToExtension(n.getMimeType());e.uri=this.imageURIGenerator.createURI(n,r),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.O.get(e);if(t)return t;for(const n of this.N.getGraph().listParentEdges(e)){const{usage:r}=n.getAttributes();if(r)return r;n.getParent().propertyType!==ct.ROOT&&this.N.getLogger().warn(`Missing attribute ".usage" on edge, "${n.getName()}".`)}return us.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const n=this.O.get(e);if(n&&n!==t)throw new Error(`Accessor with usage "${n}" cannot be reused as "${t}".`);return this.O.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,n]of Array.from(this.O.entries()))e[n]=e[n]||[],e[n].push(t);return e}};us.BufferViewTarget=dc,us.BufferViewUsage=ms,us.USAGE_TO_TARGET={[ms.ARRAY_BUFFER]:dc.ARRAY_BUFFER,[ms.ELEMENT_ARRAY_BUFFER]:dc.ELEMENT_ARRAY_BUFFER};let zh=class{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=t}createURI(e,t){if(e.getURI())return e.getURI();if(this.multiple){const n=this.basename(e);return this.counter[n]=this.counter[n]||1,`${n}_${this.counter[n]++}.${t}`}return`${this.basename(e)}.${t}`}};const{BufferViewUsage:uf}=us;var Il;(function(o){o[o.JSON=1313821514]="JSON",o[o.BIN=5130562]="BIN"})(Il||(Il={}));let Wl=class{constructor(){this.T=$o.DEFAULT_INSTANCE,this.h=new Set,this.C={},this.F=yc.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this.T=e,this}registerExtensions(e){for(const t of e)this.h.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.C,e),this}setVertexLayout(e){return this.F=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||this.detectFormat(e)===Jo.GLB?this.P(e):this.U(e)}async readJSON(e){return e=this.j(e),this.L(e),class{static read(t,n=jh){const r=Ko({},jh,n),{json:i}=t,s=new Nd;this.validate(t,r);const a=new J_(t),u=i.asset,f=s.getRoot().getAsset();u.copyright&&(f.copyright=u.copyright),u.extras&&(f.extras=u.extras),i.extras!==void 0&&s.getRoot().setExtras(Ko({},i.extras));const l=i.extensionsUsed||[],p=i.extensionsRequired||[];for(const P of r.extensions)if(l.includes(P.EXTENSION_NAME)){const I=s.createExtension(P).setRequired(p.includes(P.EXTENSION_NAME));for(const k of I.readDependencies)I.install(k,r.dependencies[k])}const d=i.buffers||[];s.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(ct.BUFFER)).forEach(P=>P.preread(a,ct.BUFFER)),a.buffers=d.map(P=>{const I=s.createBuffer(P.name);return P.extras&&I.setExtras(P.extras),P.uri&&P.uri.indexOf("__")!==0&&I.setURI(P.uri),I}),a.bufferViewBuffers=(i.bufferViews||[]).map((P,I)=>{if(!a.bufferViews[I]){const k=t.json.buffers[P.buffer];a.bufferViews[I]=ii.toView(k.uri?t.resources[k.uri]:t.resources["@glb.bin"],P.byteOffset||0,P.byteLength)}return a.buffers[P.buffer]}),a.accessors=(i.accessors||[]).map(P=>{const I=s.createAccessor(P.name,a.bufferViewBuffers[P.bufferView]).setType(P.type);if(P.extras&&I.setExtras(P.extras),P.normalized!==void 0&&I.setNormalized(P.normalized),P.bufferView===void 0&&!P.sparse)return I;let k;return k=P.sparse!==void 0?function(K,ee){const me=od[K.componentType],Z=Cn.getElementSize(K.type);let re;re=K.bufferView!==void 0?zc(K,ee):new me(K.count*Z);const de=K.sparse,Ie=de.count,Pe=Ko({},K,de.indices,{count:Ie,type:"SCALAR"}),we=Ko({},K,de.values,{count:Ie}),Te=zc(Pe,ee),Se=zc(we,ee);for(let Oe=0;Oe<Pe.count;Oe++)for(let He=0;He<Z;He++)re[Te[Oe]*Z+He]=Se[Oe*Z+He];return re}(P,a):zc(P,a),I.setArray(k),I});const _=i.images||[],A=i.textures||[];s.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(ct.TEXTURE)).forEach(P=>P.preread(a,ct.TEXTURE)),a.textures=_.map(P=>{const I=s.createTexture(P.name);if(P.extras&&I.setExtras(P.extras),P.bufferView!==void 0){const k=i.bufferViews[P.bufferView],K=t.json.buffers[k.buffer],ee=k.byteOffset||0,me=(K.uri?t.resources[K.uri]:t.resources["@glb.bin"]).slice(ee,ee+k.byteLength);I.setImage(me)}else P.uri!==void 0&&(I.setImage(t.resources[P.uri]),P.uri.indexOf("__")!==0&&I.setURI(P.uri));if(P.mimeType!==void 0)I.setMimeType(P.mimeType);else if(P.uri){const k=Vs.extension(P.uri);I.setMimeType(as.extensionToMimeType(k))}return I}),a.materials=(i.materials||[]).map(P=>{const I=s.createMaterial(P.name);P.extras&&I.setExtras(P.extras),P.alphaMode!==void 0&&I.setAlphaMode(P.alphaMode),P.alphaCutoff!==void 0&&I.setAlphaCutoff(P.alphaCutoff),P.doubleSided!==void 0&&I.setDoubleSided(P.doubleSided);const k=P.pbrMetallicRoughness||{};if(k.baseColorFactor!==void 0&&I.setBaseColorFactor(k.baseColorFactor),P.emissiveFactor!==void 0&&I.setEmissiveFactor(P.emissiveFactor),k.metallicFactor!==void 0&&I.setMetallicFactor(k.metallicFactor),k.roughnessFactor!==void 0&&I.setRoughnessFactor(k.roughnessFactor),k.baseColorTexture!==void 0){const K=k.baseColorTexture;I.setBaseColorTexture(a.textures[A[K.index].source]),a.setTextureInfo(I.getBaseColorTextureInfo(),K)}if(P.emissiveTexture!==void 0){const K=P.emissiveTexture;I.setEmissiveTexture(a.textures[A[K.index].source]),a.setTextureInfo(I.getEmissiveTextureInfo(),K)}if(P.normalTexture!==void 0){const K=P.normalTexture;I.setNormalTexture(a.textures[A[K.index].source]),a.setTextureInfo(I.getNormalTextureInfo(),K),P.normalTexture.scale!==void 0&&I.setNormalScale(P.normalTexture.scale)}if(P.occlusionTexture!==void 0){const K=P.occlusionTexture;I.setOcclusionTexture(a.textures[A[K.index].source]),a.setTextureInfo(I.getOcclusionTextureInfo(),K),P.occlusionTexture.strength!==void 0&&I.setOcclusionStrength(P.occlusionTexture.strength)}if(k.metallicRoughnessTexture!==void 0){const K=k.metallicRoughnessTexture;I.setMetallicRoughnessTexture(a.textures[A[K.index].source]),a.setTextureInfo(I.getMetallicRoughnessTextureInfo(),K)}return I});const E=i.meshes||[];s.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(ct.PRIMITIVE)).forEach(P=>P.preread(a,ct.PRIMITIVE)),a.meshes=E.map(P=>{const I=s.createMesh(P.name);return P.extras&&I.setExtras(P.extras),P.weights!==void 0&&I.setWeights(P.weights),(P.primitives||[]).forEach(k=>{const K=s.createPrimitive();k.extras&&K.setExtras(k.extras),k.material!==void 0&&K.setMaterial(a.materials[k.material]),k.mode!==void 0&&K.setMode(k.mode);for(const[me,Z]of Object.entries(k.attributes||{}))K.setAttribute(me,a.accessors[Z]);k.indices!==void 0&&K.setIndices(a.accessors[k.indices]);const ee=P.extras&&P.extras.targetNames||[];(k.targets||[]).forEach((me,Z)=>{const re=ee[Z]||Z.toString(),de=s.createPrimitiveTarget(re);for(const[Ie,Pe]of Object.entries(me))de.setAttribute(Ie,a.accessors[Pe]);K.addTarget(de)}),I.addPrimitive(K)}),I}),a.cameras=(i.cameras||[]).map(P=>{const I=s.createCamera(P.name).setType(P.type);if(P.extras&&I.setExtras(P.extras),P.type===ka.Type.PERSPECTIVE){const k=P.perspective;I.setYFov(k.yfov),I.setZNear(k.znear),k.zfar!==void 0&&I.setZFar(k.zfar),k.aspectRatio!==void 0&&I.setAspectRatio(k.aspectRatio)}else{const k=P.orthographic;I.setZNear(k.znear).setZFar(k.zfar).setXMag(k.xmag).setYMag(k.ymag)}return I});const v=i.nodes||[];s.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(ct.NODE)).forEach(P=>P.preread(a,ct.NODE)),a.nodes=v.map(P=>{const I=s.createNode(P.name);if(P.extras&&I.setExtras(P.extras),P.translation!==void 0&&I.setTranslation(P.translation),P.rotation!==void 0&&I.setRotation(P.rotation),P.scale!==void 0&&I.setScale(P.scale),P.matrix!==void 0){const k=[0,0,0],K=[0,0,0,1],ee=[1,1,1];bi.decompose(P.matrix,k,K,ee),I.setTranslation(k),I.setRotation(K),I.setScale(ee)}return P.weights!==void 0&&I.setWeights(P.weights),I}),a.skins=(i.skins||[]).map(P=>{const I=s.createSkin(P.name);P.extras&&I.setExtras(P.extras),P.inverseBindMatrices!==void 0&&I.setInverseBindMatrices(a.accessors[P.inverseBindMatrices]),P.skeleton!==void 0&&I.setSkeleton(a.nodes[P.skeleton]);for(const k of P.joints)I.addJoint(a.nodes[k]);return I}),v.map((P,I)=>{const k=a.nodes[I];(P.children||[]).forEach(K=>k.addChild(a.nodes[K])),P.mesh!==void 0&&k.setMesh(a.meshes[P.mesh]),P.camera!==void 0&&k.setCamera(a.cameras[P.camera]),P.skin!==void 0&&k.setSkin(a.skins[P.skin])}),a.animations=(i.animations||[]).map(P=>{const I=s.createAnimation(P.name);P.extras&&I.setExtras(P.extras);const k=(P.samplers||[]).map(K=>{const ee=s.createAnimationSampler().setInput(a.accessors[K.input]).setOutput(a.accessors[K.output]).setInterpolation(K.interpolation||Xa.Interpolation.LINEAR);return K.extras&&ee.setExtras(K.extras),I.addSampler(ee),ee});return(P.channels||[]).forEach(K=>{const ee=s.createAnimationChannel().setSampler(k[K.sampler]).setTargetPath(K.target.path);K.target.node!==void 0&&ee.setTargetNode(a.nodes[K.target.node]),K.extras&&ee.setExtras(K.extras),I.addChannel(ee)}),I});const T=i.scenes||[];return s.getRoot().listExtensionsUsed().filter(P=>P.prereadTypes.includes(ct.SCENE)).forEach(P=>P.preread(a,ct.SCENE)),a.scenes=T.map(P=>{const I=s.createScene(P.name);return P.extras&&I.setExtras(P.extras),(P.nodes||[]).map(k=>a.nodes[k]).forEach(k=>I.addChild(k)),I}),i.scene!==void 0&&s.getRoot().setDefaultScene(a.scenes[i.scene]),s.getRoot().listExtensionsUsed().forEach(P=>P.read(a)),s}static validate(t,n){const r=t.json;if(r.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${r.asset.version}".`);if(r.extensionsRequired){for(const i of r.extensionsRequired)if(!n.extensions.find(s=>s.EXTENSION_NAME===i))throw new Error(`Missing required extension, "${i}".`)}if(r.extensionsUsed)for(const i of r.extensionsUsed)n.extensions.find(s=>s.EXTENSION_NAME===i)||n.logger.warn(`Missing optional extension, "${i}".`)}}.read(e,{extensions:Array.from(this.h),dependencies:this.C,logger:this.T})}async binaryToJSON(e){const t=this._(ii.assertView(e));this.L(t);const n=t.json;if(n.buffers&&n.buffers.some(r=>function(i,s){return s.uri!==void 0&&!(s.uri in i.resources)}(t,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(n.images&&n.images.some(r=>function(i,s){return s.uri!==void 0&&!(s.uri in i.resources)&&s.bufferView===void 0}(t,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return t}async readBinary(e){return this.readJSON(await this.binaryToJSON(ii.assertView(e)))}async writeJSON(e,t={}){if(t.format===Jo.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return class{static write(n,r){const i=n.getRoot(),s={asset:Ko({generator:"glTF-Transform v2.5.1"},i.getAsset()),extras:Ko({},i.getExtras())},a={json:s,resources:{}},u=new us(n,a,r),f=r.logger||$o.DEFAULT_INSTANCE,l=new Set(r.extensions.map(T=>T.EXTENSION_NAME)),p=n.getRoot().listExtensionsUsed().filter(T=>l.has(T.extensionName)),d=n.getRoot().listExtensionsRequired().filter(T=>l.has(T.extensionName));p.length<n.getRoot().listExtensionsUsed().length&&f.warn("Some extensions were not registered for I/O, and will not be written.");for(const T of p)for(const P of T.writeDependencies)T.install(P,r.dependencies[P]);function _(T,P,I,k){const K=[];let ee=0;for(const Z of T){const re=u.createAccessorDef(Z);re.bufferView=s.bufferViews.length;const de=Z.getArray(),Ie=ii.pad(ii.toView(de));re.byteOffset=ee,ee+=Ie.byteLength,K.push(Ie),u.accessorIndexMap.set(Z,s.accessors.length),s.accessors.push(re)}const me={buffer:P,byteOffset:I,byteLength:ii.concat(K).byteLength};return k&&(me.target=k),s.bufferViews.push(me),{buffers:K,byteLength:ee}}function A(T,P,I){const k=T[0].getCount();let K=0;for(const re of T){const de=u.createAccessorDef(re);de.bufferView=s.bufferViews.length,de.byteOffset=K;const Ie=re.getElementSize(),Pe=re.getComponentSize();K+=ii.padNumber(Ie*Pe),u.accessorIndexMap.set(re,s.accessors.length),s.accessors.push(de)}const ee=k*K,me=new ArrayBuffer(ee),Z=new DataView(me);for(let re=0;re<k;re++){let de=0;for(const Ie of T){const Pe=Ie.getElementSize(),we=Ie.getComponentSize(),Te=Ie.getComponentType(),Se=Ie.getArray();for(let Oe=0;Oe<Pe;Oe++){const He=re*K+de+Oe*we,j=Se[re*Pe+Oe];switch(Te){case Cn.ComponentType.FLOAT:Z.setFloat32(He,j,!0);break;case Cn.ComponentType.BYTE:Z.setInt8(He,j);break;case Cn.ComponentType.SHORT:Z.setInt16(He,j,!0);break;case Cn.ComponentType.UNSIGNED_BYTE:Z.setUint8(He,j);break;case Cn.ComponentType.UNSIGNED_SHORT:Z.setUint16(He,j,!0);break;case Cn.ComponentType.UNSIGNED_INT:Z.setUint32(He,j,!0);break;default:throw new Error("Unexpected component type: "+Te)}}de+=ii.padNumber(Pe*we)}}return s.bufferViews.push({buffer:P,byteOffset:I,byteLength:ee,byteStride:K,target:us.BufferViewTarget.ARRAY_BUFFER}),{byteLength:ee,buffers:[new Uint8Array(me)]}}const E=new Map;for(const T of n.getGraph().listEdges()){if(T.getParent()===i)continue;const P=T.getChild();if(P instanceof Cn){const I=E.get(P)||[];I.push(T),E.set(P,I)}}if(s.accessors=[],s.bufferViews=[],s.samplers=[],s.textures=[],s.images=i.listTextures().map((T,P)=>{const I=u.createPropertyDef(T);T.getMimeType()&&(I.mimeType=T.getMimeType());const k=T.getImage();return k&&u.createImageData(I,k,T),u.imageIndexMap.set(T,P),I}),p.filter(T=>T.prewriteTypes.includes(ct.ACCESSOR)).forEach(T=>T.prewrite(u,ct.ACCESSOR)),i.listAccessors().forEach(T=>{const P=u.accessorUsageGroupedByParent,I=u.accessorParents;if(u.accessorIndexMap.has(T))return;const k=E.get(T)||[],K=u.getAccessorUsage(T);if(u.addAccessorToUsageGroup(T,K),P.has(K)){const ee=k[0].getParent(),me=I.get(ee)||new Set;me.add(T),I.set(ee,me)}}),p.filter(T=>T.prewriteTypes.includes(ct.BUFFER)).forEach(T=>T.prewrite(u,ct.BUFFER)),(i.listAccessors().length>0||i.listTextures().length>0||u.otherBufferViews.size>0)&&i.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");s.buffers=[],i.listBuffers().forEach((T,P)=>{const I=u.createPropertyDef(T),k=u.accessorUsageGroupedByParent,K=u.accessorParents,ee=T.listParents().filter(Pe=>Pe instanceof Cn),me=new Set(ee),Z=[],re=s.buffers.length;let de=0;const Ie=u.listAccessorUsageGroups();for(const Pe in Ie)if(k.has(Pe))for(const we of Array.from(K.values())){const Te=Array.from(we).filter(Se=>me.has(Se)).filter(Se=>u.getAccessorUsage(Se)===Pe);if(Te.length)if(Pe!==uf.ARRAY_BUFFER||r.vertexLayout===yc.INTERLEAVED){const Se=Pe===uf.ARRAY_BUFFER?A(Te,re,de):_(Te,re,de);de+=Se.byteLength,Z.push(...Se.buffers)}else for(const Se of Te){const Oe=A([Se],re,de);de+=Oe.byteLength,Z.push(...Oe.buffers)}}else{const we=Ie[Pe].filter(Se=>me.has(Se));if(!we.length)continue;const Te=_(we,re,de,Pe===uf.ELEMENT_ARRAY_BUFFER?us.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);de+=Te.byteLength,Z.push(...Te.buffers)}if(u.imageBufferViews.length&&P===0){for(let Pe=0;Pe<u.imageBufferViews.length;Pe++)if(s.bufferViews[s.images[Pe].bufferView].byteOffset=de,de+=u.imageBufferViews[Pe].byteLength,Z.push(u.imageBufferViews[Pe]),de%8){const we=8-de%8;de+=we,Z.push(new Uint8Array(we))}}if(u.otherBufferViews.has(T))for(const Pe of u.otherBufferViews.get(T))s.bufferViews.push({buffer:re,byteOffset:de,byteLength:Pe.byteLength}),u.otherBufferViewsIndexMap.set(Pe,s.bufferViews.length-1),de+=Pe.byteLength,Z.push(Pe);if(de){let Pe;r.format===Jo.GLB?Pe="@glb.bin":(Pe=u.bufferURIGenerator.createURI(T,"bin"),I.uri=Pe),I.byteLength=de,a.resources[Pe]=ii.concat(Z)}s.buffers.push(I),u.bufferIndexMap.set(T,P)}),i.listAccessors().find(T=>!T.getBuffer())&&f.warn("Skipped writing one or more Accessors: no Buffer assigned."),s.materials=i.listMaterials().map((T,P)=>{const I=u.createPropertyDef(T);if(T.getAlphaMode()!==Ks.AlphaMode.OPAQUE&&(I.alphaMode=T.getAlphaMode()),T.getAlphaMode()===Ks.AlphaMode.MASK&&(I.alphaCutoff=T.getAlphaCutoff()),T.getDoubleSided()&&(I.doubleSided=!0),I.pbrMetallicRoughness={},bi.eq(T.getBaseColorFactor(),[1,1,1,1])||(I.pbrMetallicRoughness.baseColorFactor=T.getBaseColorFactor()),bi.eq(T.getEmissiveFactor(),[0,0,0])||(I.emissiveFactor=T.getEmissiveFactor()),T.getRoughnessFactor()!==1&&(I.pbrMetallicRoughness.roughnessFactor=T.getRoughnessFactor()),T.getMetallicFactor()!==1&&(I.pbrMetallicRoughness.metallicFactor=T.getMetallicFactor()),T.getBaseColorTexture()){const k=T.getBaseColorTexture(),K=T.getBaseColorTextureInfo();I.pbrMetallicRoughness.baseColorTexture=u.createTextureInfoDef(k,K)}if(T.getEmissiveTexture()){const k=T.getEmissiveTexture(),K=T.getEmissiveTextureInfo();I.emissiveTexture=u.createTextureInfoDef(k,K)}if(T.getNormalTexture()){const k=T.getNormalTexture(),K=T.getNormalTextureInfo(),ee=u.createTextureInfoDef(k,K);T.getNormalScale()!==1&&(ee.scale=T.getNormalScale()),I.normalTexture=ee}if(T.getOcclusionTexture()){const k=T.getOcclusionTexture(),K=T.getOcclusionTextureInfo(),ee=u.createTextureInfoDef(k,K);T.getOcclusionStrength()!==1&&(ee.strength=T.getOcclusionStrength()),I.occlusionTexture=ee}if(T.getMetallicRoughnessTexture()){const k=T.getMetallicRoughnessTexture(),K=T.getMetallicRoughnessTextureInfo();I.pbrMetallicRoughness.metallicRoughnessTexture=u.createTextureInfoDef(k,K)}return u.materialIndexMap.set(T,P),I}),s.meshes=i.listMeshes().map((T,P)=>{const I=u.createPropertyDef(T);let k=null;return I.primitives=T.listPrimitives().map(K=>{const ee={attributes:{}};ee.mode=K.getMode();const me=K.getMaterial();me&&(ee.material=u.materialIndexMap.get(me)),Object.keys(K.getExtras()).length&&(ee.extras=K.getExtras());const Z=K.getIndices();Z&&(ee.indices=u.accessorIndexMap.get(Z));for(const re of K.listSemantics())ee.attributes[re]=u.accessorIndexMap.get(K.getAttribute(re));for(const re of K.listTargets()){const de={};for(const Ie of re.listSemantics())de[Ie]=u.accessorIndexMap.get(re.getAttribute(Ie));ee.targets=ee.targets||[],ee.targets.push(de)}return K.listTargets().length&&!k&&(k=K.listTargets().map(re=>re.getName())),ee}),T.getWeights().length&&(I.weights=T.getWeights()),k&&(I.extras=I.extras||{},I.extras.targetNames=k),u.meshIndexMap.set(T,P),I}),s.cameras=i.listCameras().map((T,P)=>{const I=u.createPropertyDef(T);if(I.type=T.getType(),I.type===ka.Type.PERSPECTIVE){I.perspective={znear:T.getZNear(),zfar:T.getZFar(),yfov:T.getYFov()};const k=T.getAspectRatio();k!==null&&(I.perspective.aspectRatio=k)}else I.orthographic={znear:T.getZNear(),zfar:T.getZFar(),xmag:T.getXMag(),ymag:T.getYMag()};return u.cameraIndexMap.set(T,P),I}),s.nodes=i.listNodes().map((T,P)=>{const I=u.createPropertyDef(T);return bi.eq(T.getTranslation(),[0,0,0])||(I.translation=T.getTranslation()),bi.eq(T.getRotation(),[0,0,0,1])||(I.rotation=T.getRotation()),bi.eq(T.getScale(),[1,1,1])||(I.scale=T.getScale()),T.getWeights().length&&(I.weights=T.getWeights()),u.nodeIndexMap.set(T,P),I}),s.skins=i.listSkins().map((T,P)=>{const I=u.createPropertyDef(T),k=T.getInverseBindMatrices();k&&(I.inverseBindMatrices=u.accessorIndexMap.get(k));const K=T.getSkeleton();return K&&(I.skeleton=u.nodeIndexMap.get(K)),I.joints=T.listJoints().map(ee=>u.nodeIndexMap.get(ee)),u.skinIndexMap.set(T,P),I}),i.listNodes().forEach((T,P)=>{const I=s.nodes[P],k=T.getMesh();k&&(I.mesh=u.meshIndexMap.get(k));const K=T.getCamera();K&&(I.camera=u.cameraIndexMap.get(K));const ee=T.getSkin();ee&&(I.skin=u.skinIndexMap.get(ee)),T.listChildren().length>0&&(I.children=T.listChildren().map(me=>u.nodeIndexMap.get(me)))}),s.animations=i.listAnimations().map((T,P)=>{const I=u.createPropertyDef(T),k=new Map;return I.samplers=T.listSamplers().map((K,ee)=>{const me=u.createPropertyDef(K);return me.input=u.accessorIndexMap.get(K.getInput()),me.output=u.accessorIndexMap.get(K.getOutput()),me.interpolation=K.getInterpolation(),k.set(K,ee),me}),I.channels=T.listChannels().map(K=>{const ee=u.createPropertyDef(K);return ee.sampler=k.get(K.getSampler()),ee.target={node:u.nodeIndexMap.get(K.getTargetNode()),path:K.getTargetPath()},ee}),u.animationIndexMap.set(T,P),I}),s.scenes=i.listScenes().map((T,P)=>{const I=u.createPropertyDef(T);return I.nodes=T.listChildren().map(k=>u.nodeIndexMap.get(k)),u.sceneIndexMap.set(T,P),I});const v=i.getDefaultScene();return v&&(s.scene=i.listScenes().indexOf(v)),s.extensionsUsed=p.map(T=>T.extensionName),s.extensionsRequired=d.map(T=>T.extensionName),p.forEach(T=>T.write(u)),function(T){const P=[];for(const I in T){const k=T[I];(Array.isArray(k)&&k.length===0||k===null||k===""||k&&typeof k=="object"&&Object.keys(k).length===0)&&P.push(I)}for(const I of P)delete T[I]}(s),a}}.write(e,{format:t.format||Jo.GLTF,basename:t.basename||"",logger:this.T,vertexLayout:this.F,dependencies:Ko({},this.C),extensions:Array.from(this.h)})}async writeBinary(e){const{json:t,resources:n}=await this.writeJSON(e,{format:Jo.GLB}),r=new Uint32Array([1179937895,2,12]),i=JSON.stringify(t),s=ii.pad(ii.encodeText(i),32),a=ii.toView(new Uint32Array([s.byteLength,1313821514])),u=ii.concat([a,s]);r[r.length-1]+=u.byteLength;const f=Object.values(n)[0];if(!f||!f.byteLength)return ii.concat([ii.toView(r),u]);const l=ii.pad(f,0),p=ii.toView(new Uint32Array([l.byteLength,5130562])),d=ii.concat([p,l]);return r[r.length-1]+=d.byteLength,ii.concat([ii.toView(r),u,d])}detectFormat(e){return(So.isAbsoluteURL(e)?So.extension(e):Vs.extension(e))==="glb"?Jo.GLB:Jo.GLTF}async U(e){this.lastReadBytes=0;const t=await this.readURI(e,"text");this.lastReadBytes+=t.length;const n={json:JSON.parse(t),resources:{}};return await this.D(n,this.dirname(e)),this.L(n),n}async P(e){const t=await this.readURI(e,"view");this.lastReadBytes=t.byteLength;const n=this._(t);return await this.D(n,this.dirname(e)),this.L(n),n}async D(e,t){var n=this;const r=[...e.json.images||[],...e.json.buffers||[]].map(async function(i){const s=i.uri;if(!s||s.match(/data:/))return Promise.resolve();e.resources[s]=await n.readURI(n.resolve(t,s),"view"),n.lastReadBytes+=e.resources[s].byteLength});await Promise.all(r)}L(e){function t(n){if(n.uri){if(n.uri in e.resources)ii.assertView(e.resources[n.uri]);else if(n.uri.match(/data:/)){const r=`__${fc()}.${Vs.extension(n.uri)}`;e.resources[r]=ii.createBufferFromDataURI(n.uri),n.uri=r}}}(e.json.images||[]).forEach(n=>{if(n.bufferView===void 0&&n.uri===void 0)throw new Error("Missing resource URI or buffer view.");t(n)}),(e.json.buffers||[]).forEach(t)}j(e){const{images:t,buffers:n}=e.json;return e={json:Ko({},e.json),resources:Ko({},e.resources)},t&&(e.json.images=t.map(r=>Ko({},r))),n&&(e.json.buffers=n.map(r=>Ko({},r))),e}_(e){const t=new Uint32Array(e.buffer,e.byteOffset,3);if(t[0]!==1179937895)throw new Error("Invalid glTF asset.");if(t[1]!==2)throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==Il.JSON)throw new Error("Missing required GLB JSON chunk.");const r=n[0],i=ii.decodeText(ii.toView(e,20,r)),s=JSON.parse(i),a=20+r;if(e.byteLength<=a)return{json:s,resources:{}};const u=new Uint32Array(e.buffer,e.byteOffset+a,2);if(u[1]!==Il.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:s,resources:{"@glb.bin":ii.toView(e,a+8,u[0])}}}},Oy=class extends Wl{constructor(e=null,t=So.DEFAULT_INIT){super(),this.k=void 0,this.J=void 0,this.$=void 0,this.V=void 0,this.q=!1,this.k=require("fs").promises,this.J=require("path"),this.$=e,this.V=t}setAllowHTTP(e){if(e&&!this.$)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this.q=e,this}async readURI(e,t){if(So.isAbsoluteURL(e)){if(!this.q||!this.$)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");const n=await this.$(e,this.V);switch(t){case"view":return new Uint8Array(await n.arrayBuffer());case"text":return n.text()}}else switch(t){case"view":return this.k.readFile(e);case"text":return this.k.readFile(e,"utf8")}}resolve(e,t){return So.isAbsoluteURL(e)||So.isAbsoluteURL(t)?So.resolve(e,t):this.J.resolve(e,t)}dirname(e){return So.isAbsoluteURL(e)?So.dirname(e):this.J.dirname(e)}async write(e,t){await(!!e.match(/\.glb$/)?this.W(e,t):this.H(e,t))}async H(e,t){var n=this;this.lastWriteBytes=0;const{json:r,resources:i}=await this.writeJSON(t,{format:Jo.GLTF,basename:Vs.basename(e)}),{k:s,J:a}=this,u=a.dirname(e),f=JSON.stringify(r,null,2);this.lastWriteBytes+=f.length,await s.writeFile(e,f);const l=Object.keys(i).map(async function(p){if(So.isAbsoluteURL(p)){if(So.extension(p)==="bin")throw new Error(`Cannot write buffer to path "${p}".`);return}const d=Buffer.from(i[p]);await s.writeFile(a.join(u,p),d),n.lastWriteBytes+=d.byteLength});await Promise.all(l)}async W(e,t){const n=Buffer.from(await this.writeBinary(t));await this.k.writeFile(e,n),this.lastWriteBytes=n.byteLength}},Ny=class extends Wl{constructor(e){super(),this.J=void 0,this.J=e}async readURI(e,t){switch(t){case"view":return Deno.readFile(e);case"text":return Deno.readTextFile(e)}}resolve(e,t){return this.J.resolve(e,t)}dirname(e){return this.J.dirname(e)}},Uy=class extends Wl{constructor(e=So.DEFAULT_INIT){super(),this.V=void 0,this.V=e}async readURI(e,t){const n=await fetch(e,this.V);switch(t){case"view":return new Uint8Array(await n.arrayBuffer());case"text":return n.text()}}resolve(e,t){return So.resolve(e,t)}dirname(e){return So.dirname(e)}detectFormat(e){return So.extension(e)==="glb"?Jo.GLB:Jo.GLTF}};const Gy=Object.freeze(Object.defineProperty({__proto__:null,Accessor:Cn,Animation:Id,AnimationChannel:da,AnimationSampler:Xa,Buffer:Pd,BufferUtils:ii,COPY_IDENTITY:xs,Camera:ka,ColorUtils:Wo,DenoIO:Ny,Document:Nd,ExtensibleProperty:Fo,Extension:co,ExtensionProperty:uo,FileUtils:Vs,get Format(){return Jo},GLB_BUFFER:Dd,Graph:V_,GraphEdge:Ga,ImageUtils:as,Logger:$o,Material:Ks,MathUtils:bi,Mesh:Fd,Node:Nu,NodeIO:Oy,PlatformIO:Wl,Primitive:ao,PrimitiveTarget:Ld,Property:kl,get PropertyType(){return ct},ReaderContext:J_,Root:Wa,Scene:Hl,Skin:Od,Texture:Ha,get TextureChannel(){return ho},TextureInfo:Qi,VERSION:By,get Verbosity(){return Dl},get VertexLayout(){return yc},WebIO:Uy,WriterContext:us,bounds:Rc,uuid:fc},Symbol.toStringTag,{value:"Module"})),ky=0,Hy=0,Wy=0,Vy=2,jy=0,q_=163,X_=166,zy=0,Ky=2,Jy=1,qy=64,Xy=0;class Yy{constructor(){this.vkFormat=Xy,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=ky,this.levels=[],this.dataFormatDescriptor=[{vendorId:Wy,descriptorType:Hy,descriptorBlockSize:0,versionNumber:Vy,colorModel:jy,colorPrimaries:Jy,transferFunction:Ky,flags:zy,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Vu{constructor(e,t,n,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),n=e+2**32*t;return this._offset+=8,n}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const Lo=[171,75,84,88,32,50,48,187,13,10,26,10];function Kh(o){return typeof TextDecoder<"u"?new TextDecoder().decode(o):Buffer.from(o).toString("utf8")}function El(o){const e=new Uint8Array(o.buffer,o.byteOffset,Lo.length);if(e[0]!==Lo[0]||e[1]!==Lo[1]||e[2]!==Lo[2]||e[3]!==Lo[3]||e[4]!==Lo[4]||e[5]!==Lo[5]||e[6]!==Lo[6]||e[7]!==Lo[7]||e[8]!==Lo[8]||e[9]!==Lo[9]||e[10]!==Lo[10]||e[11]!==Lo[11])throw new Error("Missing KTX 2.0 identifier.");const t=new Yy,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new Vu(o,Lo.length,n,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const i=r._nextUint32();t.supercompressionScheme=r._nextUint32();const s=r._nextUint32(),a=r._nextUint32(),u=r._nextUint32(),f=r._nextUint32(),l=r._nextUint64(),p=r._nextUint64(),d=i*3*8,_=new Vu(o,Lo.length+n,d,!0);for(let Qe=0;Qe<i;Qe++)t.levels.push({levelData:new Uint8Array(o.buffer,o.byteOffset+_._nextUint64(),_._nextUint64()),uncompressedByteLength:_._nextUint64()});const A=new Vu(o,s,a,!0),E={vendorId:A._skip(4)._nextUint16(),descriptorType:A._nextUint16(),versionNumber:A._nextUint16(),descriptorBlockSize:A._nextUint16(),colorModel:A._nextUint8(),colorPrimaries:A._nextUint8(),transferFunction:A._nextUint8(),flags:A._nextUint8(),texelBlockDimension:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],bytesPlane:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],samples:[]},v=6,T=4,P=(E.descriptorBlockSize/4-v)/T;for(let Qe=0;Qe<P;Qe++){const Je={bitOffset:A._nextUint16(),bitLength:A._nextUint8(),channelType:A._nextUint8(),samplePosition:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Je.channelType&qy?(Je.sampleLower=A._nextInt32(),Je.sampleUpper=A._nextInt32()):(Je.sampleLower=A._nextUint32(),Je.sampleUpper=A._nextUint32()),E.samples[Qe]=Je}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(E);const I=new Vu(o,u,f,!0);for(;I._offset<f;){const Qe=I._nextUint32(),Je=I._scan(Qe),ze=Kh(Je),ut=I._scan(Qe-Je.byteLength);t.keyValue[ze]=ze.match(/^ktx/i)?Kh(ut):ut,I._offset%4&&I._skip(4-I._offset%4)}if(p<=0)return t;const k=new Vu(o,l,p,!0),K=k._nextUint16(),ee=k._nextUint16(),me=k._nextUint32(),Z=k._nextUint32(),re=k._nextUint32(),de=k._nextUint32(),Ie=[];for(let Qe=0;Qe<i;Qe++)Ie.push({imageFlags:k._nextUint32(),rgbSliceByteOffset:k._nextUint32(),rgbSliceByteLength:k._nextUint32(),alphaSliceByteOffset:k._nextUint32(),alphaSliceByteLength:k._nextUint32()});const Pe=l+k._offset,we=Pe+me,Te=we+Z,Se=Te+re,Oe=new Uint8Array(o.buffer,o.byteOffset+Pe,me),He=new Uint8Array(o.buffer,o.byteOffset+we,Z),j=new Uint8Array(o.buffer,o.byteOffset+Te,re),ht=new Uint8Array(o.buffer,o.byteOffset+Se,de);return t.globalData={endpointCount:K,selectorCount:ee,imageDescs:Ie,endpointsData:Oe,selectorsData:He,tablesData:j,extendedData:ht},t}const $y="INSTANCE_ATTRIBUTE";class Ud extends uo{init(){this.extensionName="EXT_mesh_gpu_instancing",this.propertyType="InstancedMesh",this.parentTypes=[ct.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:"INSTANCE_ATTRIBUTE"})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}Ud.EXTENSION_NAME="EXT_mesh_gpu_instancing";const _a="EXT_mesh_gpu_instancing";class Vl extends co{constructor(...e){super(...e),this.extensionName=_a,this.provideTypes=[ct.NODE],this.prewriteTypes=[ct.ACCESSOR]}createInstancedMesh(){return new Ud(this.document.getGraph())}read(e){return(e.jsonDoc.json.nodes||[]).forEach((t,n)=>{if(!t.extensions||!t.extensions[_a])return;const r=t.extensions[_a],i=this.createInstancedMesh();for(const s in r.attributes)i.setAttribute(s,e.accessors[r.attributes[s]]);e.nodes[n].setExtension(_a,i)}),this}prewrite(e){e.accessorUsageGroupedByParent.add("INSTANCE_ATTRIBUTE");for(const t of this.properties)for(const n of t.listAttributes())e.addAccessorToUsageGroup(n,"INSTANCE_ATTRIBUTE");return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listNodes().forEach(n=>{const r=n.getExtension(_a);if(r){const i=e.nodeIndexMap.get(n),s=t.json.nodes[i],a={attributes:{}};r.listSemantics().forEach(u=>{const f=r.getAttribute(u);a.attributes[u]=e.accessorIndexMap.get(f)}),s.extensions=s.extensions||{},s.extensions[_a]=a}}),this}}function sa(){return(sa=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}).apply(this,arguments)}var vc,Eu,fo;Vl.EXTENSION_NAME=_a,function(o){o.QUANTIZE="quantize",o.FILTER="filter"}(vc||(vc={})),function(o){o.ATTRIBUTES="ATTRIBUTES",o.TRIANGLES="TRIANGLES",o.INDICES="INDICES"}(Eu||(Eu={})),function(o){o.NONE="NONE",o.OCTAHEDRAL="OCTAHEDRAL",o.QUATERNION="QUATERNION",o.EXPONENTIAL="EXPONENTIAL"}(fo||(fo={}));const{BYTE:Zy,SHORT:Jh,FLOAT:Qy}=Cn.ComponentType,{normalize:qh,denormalize:cf}=bi;function ev(o,e,t,n){const{filter:r,bits:i}=n,s={array:o.getArray(),byteStride:o.getElementSize()*o.getComponentSize(),componentType:o.getComponentType(),normalized:o.getNormalized()};if(t!==Eu.ATTRIBUTES)return s;if(r!==fo.NONE){let a=o.getNormalized()?function(u){const f=u.getComponentType(),l=u.getArray(),p=new Float32Array(l.length);for(let d=0;d<l.length;d++)p[d]=cf(l[d],f);return p}(o):new Float32Array(s.array);switch(r){case fo.EXPONENTIAL:s.byteStride=4*o.getElementSize(),s.componentType=Qy,s.normalized=!1,s.array=e.encodeFilterExp(a,o.getCount(),s.byteStride,i);break;case fo.OCTAHEDRAL:s.byteStride=i>8?8:4,s.componentType=i>8?Jh:Zy,s.normalized=!0,a=o.getElementSize()===3?function(u){const f=new Float32Array(4*u.length/3);for(let l=0,p=u.length/3;l<p;l++)f[4*l]=u[3*l],f[4*l+1]=u[3*l+1],f[4*l+2]=u[3*l+2];return f}(a):a,s.array=e.encodeFilterOct(a,o.getCount(),s.byteStride,i);break;case fo.QUATERNION:s.byteStride=8,s.componentType=Jh,s.normalized=!0,s.array=e.encodeFilterQuat(a,o.getCount(),s.byteStride,i);break;default:throw new Error("Invalid filter.")}s.min=o.getMin([]),s.max=o.getMax([]),o.getNormalized()&&(s.min=s.min.map(u=>cf(u,o.getComponentType())),s.max=s.max.map(u=>cf(u,o.getComponentType()))),s.normalized&&(s.min=s.min.map(u=>qh(u,s.componentType)),s.max=s.max.map(u=>qh(u,s.componentType)))}else s.byteStride%4&&(s.array=function(a,u){const f=ii.padNumber(a.BYTES_PER_ELEMENT*u)/a.BYTES_PER_ELEMENT,l=new a.constructor(a.length/u*f);for(let p=0;p*u<a.length;p++)for(let d=0;d<u;d++)l[p*f+d]=a[p*u+d];return l}(s.array,o.getElementSize()),s.byteStride=s.array.byteLength/o.getCount());return s}function tv(o,e){return e===us.BufferViewUsage.ELEMENT_ARRAY_BUFFER?o.listParents().some(t=>t instanceof ao&&t.getMode()===ao.Mode.TRIANGLES)?Eu.TRIANGLES:Eu.INDICES:Eu.ATTRIBUTES}function nv(o,e){const t=e.getGraph().listParentEdges(o).filter(n=>!(n.getParent()instanceof Wa));for(const n of t){const r=n.getName(),i=n.getAttributes().key||"";if(r==="indices")return{filter:fo.NONE};if(r==="attributes"){if(i==="POSITION")return{filter:fo.NONE};if(i==="TEXCOORD_0")return{filter:fo.NONE};if(i==="NORMAL")return{filter:fo.OCTAHEDRAL,bits:8};if(i==="TANGENT")return{filter:fo.OCTAHEDRAL,bits:8};if(i.startsWith("JOINTS_"))return{filter:fo.NONE};if(i.startsWith("WEIGHTS_"))return{filter:fo.NONE}}if(r==="output"){const s=Y_(o);return s==="rotation"?{filter:fo.QUATERNION,bits:16}:s==="translation"||s==="scale"?{filter:fo.EXPONENTIAL,bits:12}:{filter:fo.NONE}}if(r==="input")return{filter:fo.NONE};if(r==="inverseBindMatrices")return{filter:fo.NONE}}return{filter:fo.NONE}}function Y_(o){for(const e of o.listParents())if(e instanceof Xa){for(const t of e.listParents())if(t instanceof da)return t.getTargetPath()}return null}const Uo="EXT_meshopt_compression",Xh={method:vc.QUANTIZE};class Fa extends co{constructor(...e){super(...e),this.extensionName=Uo,this.prereadTypes=[ct.BUFFER,ct.PRIMITIVE],this.prewriteTypes=[ct.BUFFER,ct.ACCESSOR],this.readDependencies=["meshopt.decoder"],this.writeDependencies=["meshopt.encoder"],this._decoder=null,this._decoderFallbackBufferMap=new Map,this._encoder=null,this._encoderOptions=Xh,this._encoderFallbackBuffer=null,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={}}install(e,t){return e==="meshopt.decoder"&&(this._decoder=t),e==="meshopt.encoder"&&(this._encoder=t),this}setEncoderOptions(e){return this._encoderOptions=sa({},Xh,e),this}preread(e,t){if(!this._decoder){if(!this.isRequired())return this;throw new Error(`[${Uo}] Please install extension dependency, "meshopt.decoder".`)}if(!this._decoder.supported){if(!this.isRequired())return this;throw new Error(`[${Uo}]: Missing WASM support.`)}return t===ct.BUFFER?this._prereadBuffers(e):t===ct.PRIMITIVE&&this._prereadPrimitives(e),this}_prereadBuffers(e){const t=e.jsonDoc;(t.json.bufferViews||[]).forEach((n,r)=>{if(!n.extensions||!n.extensions[Uo])return;const i=n.extensions[Uo],s=i.byteOffset||0,a=i.byteLength||0,u=i.count,f=i.byteStride,l=new Uint8Array(u*f),p=t.json.buffers[i.buffer],d=ii.toView(p.uri?t.resources[p.uri]:t.resources[Dd],s,a);this._decoder.decodeGltfBuffer(l,u,f,d,i.mode,i.filter),e.bufferViews[r]=l})}_prereadPrimitives(e){const t=e.jsonDoc;(t.json.bufferViews||[]).forEach(n=>{var r;n.extensions&&n.extensions[Uo]&&(r=t.json.buffers[n.buffer]).extensions&&r.extensions.EXT_meshopt_compression&&r.extensions.EXT_meshopt_compression.fallback&&this._decoderFallbackBufferMap.set(e.buffers[n.buffer],e.buffers[n.extensions[Uo].buffer])})}read(e){if(!this.isRequired())return this;for(const[t,n]of this._decoderFallbackBufferMap){for(const r of t.listParents())r instanceof Cn&&r.swap(t,n);t.dispose()}return this}prewrite(e,t){return t===ct.ACCESSOR?this._prewriteAccessors(e):t===ct.BUFFER&&this._prewriteBuffers(e),this}_prewriteAccessors(e){const t=e.jsonDoc.json,n=this._encoder,r=this._encoderOptions,i=this.document.createBuffer(),s=this.document.getRoot().listBuffers().indexOf(i);this._encoderFallbackBuffer=i,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={};for(const a of this.document.getRoot().listAccessors()){if(Y_(a)==="weights")continue;const u=e.getAccessorUsage(a),f=tv(a,u),l=r.method===vc.FILTER?nv(a,this.document):{filter:fo.NONE},p=ev(a,n,f,l),{array:d,byteStride:_}=p,A=a.getBuffer();if(!A)throw new Error(`${Uo}: Missing buffer for accessor.`);const E=this.document.getRoot().listBuffers().indexOf(A),v=[u,f,l.filter,_,E].join(":");let T=this._encoderBufferViews[v],P=this._encoderBufferViewData[v],I=this._encoderBufferViewAccessors[v];T&&P||(I=this._encoderBufferViewAccessors[v]=[],P=this._encoderBufferViewData[v]=[],T=this._encoderBufferViews[v]={buffer:s,target:us.USAGE_TO_TARGET[u],byteOffset:0,byteLength:0,byteStride:u===us.BufferViewUsage.ARRAY_BUFFER?_:void 0,extensions:{[Uo]:{buffer:E,byteOffset:0,byteLength:0,mode:f,filter:l.filter!==fo.NONE?l.filter:void 0,byteStride:_,count:0}}});const k=e.createAccessorDef(a);k.componentType=p.componentType,k.normalized=p.normalized,k.byteOffset=T.byteLength,k.min&&p.min&&(k.min=p.min),k.max&&p.max&&(k.max=p.max),e.accessorIndexMap.set(a,t.accessors.length),t.accessors.push(k),I.push(k),P.push(new Uint8Array(d.buffer,d.byteOffset,d.byteLength)),T.byteLength+=d.byteLength,T.extensions.EXT_meshopt_compression.count+=a.getCount()}}_prewriteBuffers(e){const t=this._encoder;for(const n in this._encoderBufferViews){const r=this._encoderBufferViews[n],i=this._encoderBufferViewData[n],s=this.document.getRoot().listBuffers()[r.extensions[Uo].buffer],a=e.otherBufferViews.get(s)||[],{count:u,byteStride:f,mode:l}=r.extensions[Uo],p=ii.concat(i),d=t.encodeGltfBuffer(p,u,f,l),_=ii.pad(d);r.extensions[Uo].byteLength=d.byteLength,i.length=0,i.push(_),a.push(_),e.otherBufferViews.set(s,a)}}write(e){let t=0;for(const s in this._encoderBufferViews){const a=this._encoderBufferViews[s],u=e.otherBufferViewsIndexMap.get(this._encoderBufferViewData[s][0]),f=this._encoderBufferViewAccessors[s];for(const d of f)d.bufferView=u;const l=e.jsonDoc.json.bufferViews[u],p=l.byteOffset||0;Object.assign(l,a),l.byteOffset=t,l.extensions[Uo].byteOffset=p,t+=ii.padNumber(a.byteLength)}const n=this._encoderFallbackBuffer,r=e.bufferIndexMap.get(n),i=e.jsonDoc.json.buffers[r];return i.byteLength=t,i.extensions={[Uo]:{fallback:!0}},n.dispose(),this}}Fa.EXTENSION_NAME=Uo,Fa.EncoderMethod=vc;const sc="EXT_texture_webp";class rv{match(e){return e.length>=12&&e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80}getSize(e){const t=ii.decodeText(e.slice(0,4)),n=ii.decodeText(e.slice(8,12));if(t!=="RIFF"||n!=="WEBP")return null;const r=new DataView(e.buffer,e.byteOffset);let i=12;for(;i<r.byteLength;){const s=ii.decodeText(new Uint8Array([r.getUint8(i),r.getUint8(i+1),r.getUint8(i+2),r.getUint8(i+3)])),a=r.getUint32(i+4,!0);if(s==="VP8 ")return[16383&r.getInt16(i+14,!0),16383&r.getInt16(i+16,!0)];if(s==="VP8L"){const u=r.getUint8(i+9),f=r.getUint8(i+10),l=r.getUint8(i+11);return[1+((63&f)<<8|u),1+((15&r.getUint8(i+12))<<10|l<<2|(192&f)>>6)]}i+=8+a+a%2}return null}getChannels(e){return 4}}class jl extends co{constructor(...e){super(...e),this.extensionName=sc,this.prereadTypes=[ct.TEXTURE]}static register(){as.registerFormat("image/webp",new rv)}preread(e){return(e.jsonDoc.json.textures||[]).forEach(t=>{t.extensions&&t.extensions[sc]&&(t.source=t.extensions[sc].source)}),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach(n=>{if(n.getMimeType()==="image/webp"){const r=e.imageIndexMap.get(n);(t.json.textures||[]).forEach(i=>{i.source===r&&(i.extensions=i.extensions||{},i.extensions[sc]={source:i.source},delete i.source)})}}),this}}jl.EXTENSION_NAME=sc;const Yh="KHR_draco_mesh_compression";let yo,$_,Z_,zo;function iv(o,e){const t=new yo.DecoderBuffer;try{if(t.Init(e,e.length),o.GetEncodedGeometryType(t)!==yo.TRIANGULAR_MESH)throw new Error(`[${Yh}] Unknown geometry type.`);const n=new yo.Mesh;if(!o.DecodeBufferToMesh(t,n).ok()||n.ptr===0)throw new Error(`[${Yh}] Decoding failure.`);return n}finally{yo.destroy(t)}}function ov(o,e){const t=3*e.num_faces();let n,r;if(e.num_points()<=65534){const i=t*Uint16Array.BYTES_PER_ELEMENT;n=yo._malloc(i),o.GetTrianglesUInt16Array(e,i,n),r=new Uint16Array(yo.HEAPU16.buffer,n,t).slice()}else{const i=t*Uint32Array.BYTES_PER_ELEMENT;n=yo._malloc(i),o.GetTrianglesUInt32Array(e,i,n),r=new Uint32Array(yo.HEAPU32.buffer,n,t).slice()}return yo._free(n),r}function sv(o,e,t,n){const r=Z_[n.componentType],i=$_[n.componentType],s=t.num_components(),a=e.num_points()*s,u=a*i.BYTES_PER_ELEMENT,f=yo._malloc(u);o.GetAttributeDataArrayForAllPoints(e,t,r,u,f);const l=new i(yo.HEAPF32.buffer,f,a).slice();return yo._free(f),l}var Ac,rs;(function(o){o[o.EDGEBREAKER=1]="EDGEBREAKER",o[o.SEQUENTIAL=0]="SEQUENTIAL"})(Ac||(Ac={})),function(o){o.POSITION="POSITION",o.NORMAL="NORMAL",o.COLOR="COLOR",o.TEX_COORD="TEX_COORD",o.GENERIC="GENERIC"}(rs||(rs={}));const Q_={[rs.POSITION]:14,[rs.NORMAL]:10,[rs.COLOR]:8,[rs.TEX_COORD]:12,[rs.GENERIC]:12},$h={decodeSpeed:5,encodeSpeed:5,method:Ac.EDGEBREAKER,quantizationBits:Q_,quantizationVolume:"mesh"};function av(o,e=$h){const t=sa({},$h,e);t.quantizationBits=sa({},Q_,e.quantizationBits);const n=new zo.Encoder,r=new zo.MeshBuilder,i=new zo.Mesh,s={},a=new zo.DracoInt8Array;for(const A of o.listSemantics()){const E=o.getAttribute(A),v=uv(A),T=cv(r,E.getComponentType(),i,zo[v],E.getCount(),E.getElementSize(),E.getArray());if(T===-1)throw new Error(`Error compressing "${A}" attribute.`);if(s[A]=T,t.quantizationVolume==="mesh"||A!=="POSITION")n.SetAttributeQuantization(zo[v],t.quantizationBits[v]);else{if(typeof t.quantizationVolume!="object")throw new Error("Invalid quantization volume state.");{const{quantizationVolume:P}=t,I=Math.max(P.max[0]-P.min[0],P.max[1]-P.min[1],P.max[2]-P.min[2]);n.SetAttributeExplicitQuantization(zo[v],t.quantizationBits[v],E.getElementSize(),P.min,I)}}}const u=o.getIndices();if(!u)throw new Tl("Primitive must have indices.");r.AddFacesToMesh(i,u.getCount()/3,u.getArray()),n.SetSpeedOptions(t.encodeSpeed,t.decodeSpeed),n.SetTrackEncodedProperties(!0),t.method===Ac.SEQUENTIAL||o.listTargets().length>0?n.SetEncodingMethod(zo.MESH_SEQUENTIAL_ENCODING):n.SetEncodingMethod(zo.MESH_EDGEBREAKER_ENCODING);const f=n.EncodeMeshToDracoBuffer(i,a);if(f<=0)throw new Tl("Error applying Draco compression.");const l=new Uint8Array(f);for(let A=0;A<f;++A)l[A]=a.GetValue(A);const p=o.getAttribute("POSITION").getCount(),d=n.GetNumberOfEncodedPoints(),_=3*n.GetNumberOfEncodedFaces();if(o.listTargets().length>0&&d!==p)throw new Tl('Compression reduced vertex count unexpectedly, corrupting morph targets. Applying the "weld" function before compression may resolve the issue.');return zo.destroy(a),zo.destroy(i),zo.destroy(r),zo.destroy(n),{numVertices:d,numIndices:_,data:l,attributeIDs:s}}function uv(o){return o==="POSITION"?rs.POSITION:o==="NORMAL"?rs.NORMAL:o.startsWith("COLOR_")?rs.COLOR:o.startsWith("TEXCOORD_")?rs.TEX_COORD:rs.GENERIC}function cv(o,e,t,n,r,i,s){switch(e){case Cn.ComponentType.UNSIGNED_BYTE:return o.AddUInt8Attribute(t,n,r,i,s);case Cn.ComponentType.BYTE:return o.AddInt8Attribute(t,n,r,i,s);case Cn.ComponentType.UNSIGNED_SHORT:return o.AddUInt16Attribute(t,n,r,i,s);case Cn.ComponentType.SHORT:return o.AddInt16Attribute(t,n,r,i,s);case Cn.ComponentType.UNSIGNED_INT:return o.AddUInt32Attribute(t,n,r,i,s);case Cn.ComponentType.FLOAT:return o.AddFloatAttribute(t,n,r,i,s);default:throw new Error(`Unexpected component type, "${e}".`)}}let Tl=class extends Error{};const lo="KHR_draco_mesh_compression";let La=class extends co{constructor(...e){super(...e),this.extensionName=lo,this.prereadTypes=[ct.PRIMITIVE],this.prewriteTypes=[ct.ACCESSOR],this.readDependencies=["draco3d.decoder"],this.writeDependencies=["draco3d.encoder"],this._decoderModule=null,this._encoderModule=null,this._encoderOptions={}}install(e,t){return e==="draco3d.decoder"&&(this._decoderModule=t,yo=this._decoderModule,$_={[Cn.ComponentType.FLOAT]:Float32Array,[Cn.ComponentType.UNSIGNED_INT]:Uint32Array,[Cn.ComponentType.UNSIGNED_SHORT]:Uint16Array,[Cn.ComponentType.UNSIGNED_BYTE]:Uint8Array,[Cn.ComponentType.SHORT]:Int16Array,[Cn.ComponentType.BYTE]:Int8Array},Z_={[Cn.ComponentType.FLOAT]:yo.DT_FLOAT32,[Cn.ComponentType.UNSIGNED_INT]:yo.DT_UINT32,[Cn.ComponentType.UNSIGNED_SHORT]:yo.DT_UINT16,[Cn.ComponentType.UNSIGNED_BYTE]:yo.DT_UINT8,[Cn.ComponentType.SHORT]:yo.DT_INT16,[Cn.ComponentType.BYTE]:yo.DT_INT8}),e==="draco3d.encoder"&&(this._encoderModule=t,zo=this._encoderModule),this}setEncoderOptions(e){return this._encoderOptions=e,this}preread(e){if(!this._decoderModule)throw new Error(`[${lo}] Please install extension dependency, "draco3d.decoder".`);const t=this.document.getLogger(),n=e.jsonDoc,r=new Map;try{const i=n.json.meshes||[];for(const s of i)for(const a of s.primitives){if(!a.extensions||!a.extensions[lo])continue;const u=a.extensions[lo];let[f,l]=r.get(u.bufferView)||[];if(!l||!f){const p=n.json.bufferViews[u.bufferView],d=n.json.buffers[p.buffer],_=ii.toView(d.uri?n.resources[d.uri]:n.resources[Dd],p.byteOffset||0,p.byteLength);f=new this._decoderModule.Decoder,l=iv(f,_),r.set(u.bufferView,[f,l]),t.debug(`[${lo}] Decompressed ${_.byteLength} bytes.`)}for(const p in a.attributes){const d=e.jsonDoc.json.accessors[a.attributes[p]],_=f.GetAttributeByUniqueId(l,u.attributes[p]),A=sv(f,l,_,d);e.accessors[a.attributes[p]].setArray(A)}a.indices!==void 0&&e.accessors[a.indices].setArray(ov(f,l))}}finally{for(const[i,s]of Array.from(r.values()))this._decoderModule.destroy(i),this._decoderModule.destroy(s)}return this}read(e){return this}prewrite(e,t){if(!this._encoderModule)throw new Error(`[${lo}] Please install extension dependency, "draco3d.encoder".`);const n=this.document.getLogger();n.debug(`[${lo}] Compression options: ${JSON.stringify(this._encoderOptions)}`);const r=function(a){const u=a.getLogger(),f=new Set,l=new Set;for(const v of a.getRoot().listMeshes())for(const T of v.listPrimitives())T.getIndices()?T.getMode()!==ao.Mode.TRIANGLES?(l.add(T),u.warn(`[${lo}] Skipping Draco compression on non-TRIANGLES primitive.`)):f.add(T):(l.add(T),u.warn(`[${lo}] Skipping Draco compression on non-indexed primitive.`));const p=a.getRoot().listAccessors(),d=new Map;for(let v=0;v<p.length;v++)d.set(p[v],v);const _=new Map,A=new Set,E=new Map;for(const v of Array.from(f)){let T=Zh(v,d);if(A.has(T))E.set(v,T);else{if(_.has(v.getIndices())){const P=v.getIndices(),I=P.clone();d.set(I,a.getRoot().listAccessors().length-1),v.swap(P,I)}for(const P of v.listAttributes())if(_.has(P)){const I=P.clone();d.set(I,a.getRoot().listAccessors().length-1),v.swap(P,I)}T=Zh(v,d),A.add(T),E.set(v,T),_.set(v.getIndices(),T);for(const P of v.listAttributes())_.set(P,T)}}for(const v of Array.from(_.keys())){const T=new Set(v.listParents().map(P=>P.propertyType));if(T.size!==2||!T.has(ct.PRIMITIVE)||!T.has(ct.ROOT))throw new Error(`[${lo}] Compressed accessors must only be used as indices or vertex attributes.`)}for(const v of Array.from(f)){const T=E.get(v),P=v.getIndices();if(_.get(P)!==T||v.listAttributes().some(I=>_.get(I)!==T))throw new Error(`[${lo}] Draco primitives must share all, or no, accessors.`)}for(const v of Array.from(l)){const T=v.getIndices();if(_.has(T)||v.listAttributes().some(P=>_.has(P)))throw new Error(`[${lo}] Accessor cannot be shared by compressed and uncompressed primitives.`)}return E}(this.document),i=new Map;let s="mesh";this._encoderOptions.quantizationVolume==="scene"&&(this.document.getRoot().listScenes().length!==1?n.warn(`[${lo}]: quantizationVolume=scene requires exactly 1 scene.`):s=Rc(this.document.getRoot().listScenes().pop()));for(const a of Array.from(r.keys())){const u=r.get(a);if(!u)throw new Error("Unexpected primitive.");if(i.has(u)){i.set(u,i.get(u));continue}const f=a.getIndices(),l=e.jsonDoc.json.accessors;let p;try{p=av(a,sa({},this._encoderOptions,{quantizationVolume:s}))}catch(A){if(A instanceof Tl){n.warn(`[${lo}]: ${A.message} Skipping primitive compression.`);continue}throw A}i.set(u,p);const d=e.createAccessorDef(f);d.count=p.numIndices,e.accessorIndexMap.set(f,l.length),l.push(d);for(const A of a.listSemantics()){const E=a.getAttribute(A),v=e.createAccessorDef(E);v.count=p.numVertices,e.accessorIndexMap.set(E,l.length),l.push(v)}const _=a.getAttribute("POSITION").getBuffer()||this.document.getRoot().listBuffers()[0];e.otherBufferViews.has(_)||e.otherBufferViews.set(_,[]),e.otherBufferViews.get(_).push(p.data)}return n.debug(`[${lo}] Compressed ${r.size} primitives.`),e.extensionData[lo]={primitiveHashMap:r,primitiveEncodingMap:i},this}write(e){const t=e.extensionData[lo];for(const n of this.document.getRoot().listMeshes()){const r=e.jsonDoc.json.meshes[e.meshIndexMap.get(n)];for(let i=0;i<n.listPrimitives().length;i++){const s=n.listPrimitives()[i],a=r.primitives[i],u=t.primitiveHashMap.get(s);if(!u)continue;const f=t.primitiveEncodingMap.get(u);f&&(a.extensions=a.extensions||{},a.extensions[lo]={bufferView:e.otherBufferViewsIndexMap.get(f.data),attributes:f.attributeIDs})}}if(!t.primitiveHashMap.size){const n=e.jsonDoc.json;n.extensionsUsed=(n.extensionsUsed||[]).filter(r=>r!==lo),n.extensionsRequired=(n.extensionsRequired||[]).filter(r=>r!==lo)}return this}};function Zh(o,e){const t=[],n=o.getIndices();t.push(e.get(n));for(const r of o.listAttributes())t.push(e.get(r));return t.sort().join("|")}La.EXTENSION_NAME=lo,La.EncoderMethod=Ac;let Bu=class extends uo{init(){this.extensionName="KHR_lights_punctual",this.propertyType="Light",this.parentTypes=[ct.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{color:[1,1,1],intensity:1,type:Bu.Type.POINT,range:null,innerConeAngle:0,outerConeAngle:Math.PI/4})}getColor(){return this.get("color")}setColor(e){return this.set("color",e)}getColorHex(){return Wo.factorToHex(this.getColor())}setColorHex(e){const t=this.getColor().slice();return Wo.hexToFactor(e,t),this.setColor(t)}getIntensity(){return this.get("intensity")}setIntensity(e){return this.set("intensity",e)}getType(){return this.get("type")}setType(e){return this.set("type",e)}getRange(){return this.get("range")}setRange(e){return this.set("range",e)}getInnerConeAngle(){return this.get("innerConeAngle")}setInnerConeAngle(e){return this.set("innerConeAngle",e)}getOuterConeAngle(){return this.get("outerConeAngle")}setOuterConeAngle(e){return this.set("outerConeAngle",e)}};Bu.EXTENSION_NAME="KHR_lights_punctual",Bu.Type={POINT:"point",SPOT:"spot",DIRECTIONAL:"directional"};const As="KHR_lights_punctual";let Gd=class extends co{constructor(...e){super(...e),this.extensionName=As}createLight(e=""){return new Bu(this.document.getGraph(),e)}read(e){const t=e.jsonDoc;if(!t.json.extensions||!t.json.extensions[As])return this;const n=(t.json.extensions[As].lights||[]).map(r=>{var i,s;const a=this.createLight().setName(r.name||"").setType(r.type);return r.color!==void 0&&a.setColor(r.color),r.intensity!==void 0&&a.setIntensity(r.intensity),r.range!==void 0&&a.setRange(r.range),((i=r.spot)==null?void 0:i.innerConeAngle)!==void 0&&a.setInnerConeAngle(r.spot.innerConeAngle),((s=r.spot)==null?void 0:s.outerConeAngle)!==void 0&&a.setOuterConeAngle(r.spot.outerConeAngle),a});return t.json.nodes.forEach((r,i)=>{r.extensions&&r.extensions[As]&&e.nodes[i].setExtension(As,n[r.extensions[As].light])}),this}write(e){const t=e.jsonDoc;if(this.properties.size===0)return this;const n=[],r=new Map;for(const i of this.properties){const s=i,a={type:s.getType()};bi.eq(s.getColor(),[1,1,1])||(a.color=s.getColor()),s.getIntensity()!==1&&(a.intensity=s.getIntensity()),s.getRange()!=null&&(a.range=s.getRange()),s.getName()&&(a.name=s.getName()),s.getType()===Bu.Type.SPOT&&(a.spot={innerConeAngle:s.getInnerConeAngle(),outerConeAngle:s.getOuterConeAngle()}),n.push(a),r.set(s,n.length-1)}return this.document.getRoot().listNodes().forEach(i=>{const s=i.getExtension(As);if(s){const a=e.nodeIndexMap.get(i),u=t.json.nodes[a];u.extensions=u.extensions||{},u.extensions[As]={light:r.get(s)}}}),t.json.extensions=t.json.extensions||{},t.json.extensions[As]={lights:n},this}};Gd.EXTENSION_NAME=As;const{R:Qh,G:ep,B:lv}=ho;let kd=class extends uo{init(){this.extensionName="KHR_materials_clearcoat",this.propertyType="Clearcoat",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{clearcoatFactor:0,clearcoatTexture:null,clearcoatTextureInfo:new Qi(this.graph,"clearcoatTextureInfo"),clearcoatRoughnessFactor:0,clearcoatRoughnessTexture:null,clearcoatRoughnessTextureInfo:new Qi(this.graph,"clearcoatRoughnessTextureInfo"),clearcoatNormalScale:1,clearcoatNormalTexture:null,clearcoatNormalTextureInfo:new Qi(this.graph,"clearcoatNormalTextureInfo")})}getClearcoatFactor(){return this.get("clearcoatFactor")}setClearcoatFactor(e){return this.set("clearcoatFactor",e)}getClearcoatTexture(){return this.getRef("clearcoatTexture")}getClearcoatTextureInfo(){return this.getRef("clearcoatTexture")?this.getRef("clearcoatTextureInfo"):null}setClearcoatTexture(e){return this.setRef("clearcoatTexture",e,{channels:Qh})}getClearcoatRoughnessFactor(){return this.get("clearcoatRoughnessFactor")}setClearcoatRoughnessFactor(e){return this.set("clearcoatRoughnessFactor",e)}getClearcoatRoughnessTexture(){return this.getRef("clearcoatRoughnessTexture")}getClearcoatRoughnessTextureInfo(){return this.getRef("clearcoatRoughnessTexture")?this.getRef("clearcoatRoughnessTextureInfo"):null}setClearcoatRoughnessTexture(e){return this.setRef("clearcoatRoughnessTexture",e,{channels:ep})}getClearcoatNormalScale(){return this.get("clearcoatNormalScale")}setClearcoatNormalScale(e){return this.set("clearcoatNormalScale",e)}getClearcoatNormalTexture(){return this.getRef("clearcoatNormalTexture")}getClearcoatNormalTextureInfo(){return this.getRef("clearcoatNormalTexture")?this.getRef("clearcoatNormalTextureInfo"):null}setClearcoatNormalTexture(e){return this.setRef("clearcoatNormalTexture",e,{channels:Qh|ep|lv})}};kd.EXTENSION_NAME="KHR_materials_clearcoat";const ga="KHR_materials_clearcoat";let Hd=class extends co{constructor(...e){super(...e),this.extensionName=ga}createClearcoat(){return new kd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[ga]){const s=this.createClearcoat();e.materials[i].setExtension(ga,s);const a=r.extensions[ga];if(a.clearcoatFactor!==void 0&&s.setClearcoatFactor(a.clearcoatFactor),a.clearcoatRoughnessFactor!==void 0&&s.setClearcoatRoughnessFactor(a.clearcoatRoughnessFactor),a.clearcoatTexture!==void 0){const u=a.clearcoatTexture;s.setClearcoatTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getClearcoatTextureInfo(),u)}if(a.clearcoatRoughnessTexture!==void 0){const u=a.clearcoatRoughnessTexture;s.setClearcoatRoughnessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getClearcoatRoughnessTextureInfo(),u)}if(a.clearcoatNormalTexture!==void 0){const u=a.clearcoatNormalTexture;s.setClearcoatNormalTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getClearcoatNormalTextureInfo(),u),u.scale!==void 0&&s.setClearcoatNormalScale(u.scale)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(ga);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[ga]={clearcoatFactor:r.getClearcoatFactor(),clearcoatRoughnessFactor:r.getClearcoatRoughnessFactor()};if(r.getClearcoatTexture()){const u=r.getClearcoatTexture(),f=r.getClearcoatTextureInfo();a.clearcoatTexture=e.createTextureInfoDef(u,f)}if(r.getClearcoatRoughnessTexture()){const u=r.getClearcoatRoughnessTexture(),f=r.getClearcoatRoughnessTextureInfo();a.clearcoatRoughnessTexture=e.createTextureInfoDef(u,f)}if(r.getClearcoatNormalTexture()){const u=r.getClearcoatNormalTexture(),f=r.getClearcoatNormalTextureInfo();a.clearcoatNormalTexture=e.createTextureInfoDef(u,f),r.getClearcoatNormalScale()!==1&&(a.clearcoatNormalTexture.scale=r.getClearcoatNormalScale())}}}),this}};Hd.EXTENSION_NAME=ga;let Wd=class extends uo{init(){this.extensionName="KHR_materials_emissive_strength",this.propertyType="EmissiveStrength",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{emissiveStrength:1})}getEmissiveStrength(){return this.get("emissiveStrength")}setEmissiveStrength(e){return this.set("emissiveStrength",e)}};Wd.EXTENSION_NAME="KHR_materials_emissive_strength";const ya="KHR_materials_emissive_strength";let Vd=class extends co{constructor(...e){super(...e),this.extensionName=ya}createEmissiveStrength(){return new Wd(this.document.getGraph())}read(e){return(e.jsonDoc.json.materials||[]).forEach((t,n)=>{if(t.extensions&&t.extensions[ya]){const r=this.createEmissiveStrength();e.materials[n].setExtension(ya,r);const i=t.extensions[ya];i.emissiveStrength!==void 0&&r.setEmissiveStrength(i.emissiveStrength)}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(ya);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[ya]={emissiveStrength:r.getEmissiveStrength()}}}),this}};Vd.EXTENSION_NAME=ya;let jd=class extends uo{init(){this.extensionName="KHR_materials_ior",this.propertyType="IOR",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{ior:0})}getIOR(){return this.get("ior")}setIOR(e){return this.set("ior",e)}};jd.EXTENSION_NAME="KHR_materials_ior";const va="KHR_materials_ior";let zl=class extends co{constructor(...e){super(...e),this.extensionName=va}createIOR(){return new jd(this.document.getGraph())}read(e){return(e.jsonDoc.json.materials||[]).forEach((t,n)=>{if(t.extensions&&t.extensions[va]){const r=this.createIOR();e.materials[n].setExtension(va,r);const i=t.extensions[va];i.ior!==void 0&&r.setIOR(i.ior)}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(va);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[va]={ior:r.getIOR()}}}),this}};zl.EXTENSION_NAME=va;const{R:fv,G:dv}=ho;let zd=class extends uo{init(){this.extensionName="KHR_materials_iridescence",this.propertyType="Iridescence",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{iridescenceFactor:0,iridescenceTexture:null,iridescenceTextureInfo:new Qi(this.graph,"iridescenceTextureInfo"),iridescenceIOR:1.3,iridescenceThicknessMinimum:100,iridescenceThicknessMaximum:400,iridescenceThicknessTexture:null,iridescenceThicknessTextureInfo:new Qi(this.graph,"iridescenceThicknessTextureInfo")})}getIridescenceFactor(){return this.get("iridescenceFactor")}setIridescenceFactor(e){return this.set("iridescenceFactor",e)}getIridescenceTexture(){return this.getRef("iridescenceTexture")}getIridescenceTextureInfo(){return this.getRef("iridescenceTexture")?this.getRef("iridescenceTextureInfo"):null}setIridescenceTexture(e){return this.setRef("iridescenceTexture",e,{channels:fv})}getIridescenceIOR(){return this.get("iridescenceIOR")}setIridescenceIOR(e){return this.set("iridescenceIOR",e)}getIridescenceThicknessMinimum(){return this.get("iridescenceThicknessMinimum")}setIridescenceThicknessMinimum(e){return this.set("iridescenceThicknessMinimum",e)}getIridescenceThicknessMaximum(){return this.get("iridescenceThicknessMaximum")}setIridescenceThicknessMaximum(e){return this.set("iridescenceThicknessMaximum",e)}getIridescenceThicknessTexture(){return this.getRef("iridescenceThicknessTexture")}getIridescenceThicknessTextureInfo(){return this.getRef("iridescenceThicknessTexture")?this.getRef("iridescenceThicknessTextureInfo"):null}setIridescenceThicknessTexture(e){return this.setRef("iridescenceThicknessTexture",e,{channels:dv})}};zd.EXTENSION_NAME="KHR_materials_iridescence";const Aa="KHR_materials_iridescence";let Kd=class extends co{constructor(...e){super(...e),this.extensionName=Aa}createIridescence(){return new zd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Aa]){const s=this.createIridescence();e.materials[i].setExtension(Aa,s);const a=r.extensions[Aa];if(a.iridescenceFactor!==void 0&&s.setIridescenceFactor(a.iridescenceFactor),a.iridescenceIor!==void 0&&s.setIridescenceIOR(a.iridescenceIor),a.iridescenceThicknessMinimum!==void 0&&s.setIridescenceThicknessMinimum(a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&s.setIridescenceThicknessMaximum(a.iridescenceThicknessMaximum),a.iridescenceTexture!==void 0){const u=a.iridescenceTexture;s.setIridescenceTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getIridescenceTextureInfo(),u)}if(a.iridescenceThicknessTexture!==void 0){const u=a.iridescenceThicknessTexture;s.setIridescenceThicknessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getIridescenceThicknessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Aa);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Aa]={};if(r.getIridescenceFactor()>0&&(a.iridescenceFactor=r.getIridescenceFactor()),r.getIridescenceIOR()!==1.3&&(a.iridescenceIor=r.getIridescenceIOR()),r.getIridescenceThicknessMinimum()!==100&&(a.iridescenceThicknessMinimum=r.getIridescenceThicknessMinimum()),r.getIridescenceThicknessMaximum()!==400&&(a.iridescenceThicknessMaximum=r.getIridescenceThicknessMaximum()),r.getIridescenceTexture()){const u=r.getIridescenceTexture(),f=r.getIridescenceTextureInfo();a.iridescenceTexture=e.createTextureInfoDef(u,f)}if(r.getIridescenceThicknessTexture()){const u=r.getIridescenceThicknessTexture(),f=r.getIridescenceThicknessTextureInfo();a.iridescenceThicknessTexture=e.createTextureInfoDef(u,f)}}}),this}};Kd.EXTENSION_NAME=Aa;const{R:tp,G:np,B:rp,A:ip}=ho;let Jd=class extends uo{init(){this.extensionName="KHR_materials_pbrSpecularGlossiness",this.propertyType="PBRSpecularGlossiness",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseFactor:[1,1,1,1],diffuseTexture:null,diffuseTextureInfo:new Qi(this.graph,"diffuseTextureInfo"),specularFactor:[1,1,1],glossinessFactor:1,specularGlossinessTexture:null,specularGlossinessTextureInfo:new Qi(this.graph,"specularGlossinessTextureInfo")})}getDiffuseFactor(){return this.get("diffuseFactor")}setDiffuseFactor(e){return this.set("diffuseFactor",e)}getDiffuseHex(){return Wo.factorToHex(this.getDiffuseFactor())}setDiffuseHex(e){const t=this.getDiffuseFactor().slice();return this.setDiffuseFactor(Wo.hexToFactor(e,t))}getDiffuseTexture(){return this.getRef("diffuseTexture")}getDiffuseTextureInfo(){return this.getRef("diffuseTexture")?this.getRef("diffuseTextureInfo"):null}setDiffuseTexture(e){return this.setRef("diffuseTexture",e,{channels:tp|np|rp|ip})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getGlossinessFactor(){return this.get("glossinessFactor")}setGlossinessFactor(e){return this.set("glossinessFactor",e)}getSpecularGlossinessTexture(){return this.getRef("specularGlossinessTexture")}getSpecularGlossinessTextureInfo(){return this.getRef("specularGlossinessTexture")?this.getRef("specularGlossinessTextureInfo"):null}setSpecularGlossinessTexture(e){return this.setRef("specularGlossinessTexture",e,{channels:tp|np|rp|ip})}};Jd.EXTENSION_NAME="KHR_materials_pbrSpecularGlossiness";const ba="KHR_materials_pbrSpecularGlossiness";let Kl=class extends co{constructor(...e){super(...e),this.extensionName=ba}createPBRSpecularGlossiness(){return new Jd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[ba]){const s=this.createPBRSpecularGlossiness();e.materials[i].setExtension(ba,s);const a=r.extensions[ba];if(a.diffuseFactor!==void 0&&s.setDiffuseFactor(a.diffuseFactor),a.specularFactor!==void 0&&s.setSpecularFactor(a.specularFactor),a.glossinessFactor!==void 0&&s.setGlossinessFactor(a.glossinessFactor),a.diffuseTexture!==void 0){const u=a.diffuseTexture;s.setDiffuseTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getDiffuseTextureInfo(),u)}if(a.specularGlossinessTexture!==void 0){const u=a.specularGlossinessTexture;s.setSpecularGlossinessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSpecularGlossinessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(ba);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[ba]={diffuseFactor:r.getDiffuseFactor(),specularFactor:r.getSpecularFactor(),glossinessFactor:r.getGlossinessFactor()};if(r.getDiffuseTexture()){const u=r.getDiffuseTexture(),f=r.getDiffuseTextureInfo();a.diffuseTexture=e.createTextureInfoDef(u,f)}if(r.getSpecularGlossinessTexture()){const u=r.getSpecularGlossinessTexture(),f=r.getSpecularGlossinessTextureInfo();a.specularGlossinessTexture=e.createTextureInfoDef(u,f)}}}),this}};Kl.EXTENSION_NAME=ba;const{R:hv,G:pv,B:mv,A:_v}=ho;let qd=class extends uo{init(){this.extensionName="KHR_materials_sheen",this.propertyType="Sheen",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{sheenColorFactor:[0,0,0],sheenColorTexture:null,sheenColorTextureInfo:new Qi(this.graph,"sheenColorTextureInfo"),sheenRoughnessFactor:0,sheenRoughnessTexture:null,sheenRoughnessTextureInfo:new Qi(this.graph,"sheenRoughnessTextureInfo")})}getSheenColorFactor(){return this.get("sheenColorFactor")}getSheenColorHex(){return Wo.factorToHex(this.getSheenColorFactor())}setSheenColorFactor(e){return this.set("sheenColorFactor",e)}setSheenColorHex(e){const t=this.getSheenColorFactor().slice();return this.set("sheenColorFactor",Wo.hexToFactor(e,t))}getSheenColorTexture(){return this.getRef("sheenColorTexture")}getSheenColorTextureInfo(){return this.getRef("sheenColorTexture")?this.getRef("sheenColorTextureInfo"):null}setSheenColorTexture(e){return this.setRef("sheenColorTexture",e,{channels:hv|pv|mv})}getSheenRoughnessFactor(){return this.get("sheenRoughnessFactor")}setSheenRoughnessFactor(e){return this.set("sheenRoughnessFactor",e)}getSheenRoughnessTexture(){return this.getRef("sheenRoughnessTexture")}getSheenRoughnessTextureInfo(){return this.getRef("sheenRoughnessTexture")?this.getRef("sheenRoughnessTextureInfo"):null}setSheenRoughnessTexture(e){return this.setRef("sheenRoughnessTexture",e,{channels:_v})}};qd.EXTENSION_NAME="KHR_materials_sheen";const Ea="KHR_materials_sheen";let Xd=class extends co{constructor(...e){super(...e),this.extensionName=Ea}createSheen(){return new qd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Ea]){const s=this.createSheen();e.materials[i].setExtension(Ea,s);const a=r.extensions[Ea];if(a.sheenColorFactor!==void 0&&s.setSheenColorFactor(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&s.setSheenRoughnessFactor(a.sheenRoughnessFactor),a.sheenColorTexture!==void 0){const u=a.sheenColorTexture;s.setSheenColorTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSheenColorTextureInfo(),u)}if(a.sheenRoughnessTexture!==void 0){const u=a.sheenRoughnessTexture;s.setSheenRoughnessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSheenRoughnessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Ea);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Ea]={sheenColorFactor:r.getSheenColorFactor(),sheenRoughnessFactor:r.getSheenRoughnessFactor()};if(r.getSheenColorTexture()){const u=r.getSheenColorTexture(),f=r.getSheenColorTextureInfo();a.sheenColorTexture=e.createTextureInfoDef(u,f)}if(r.getSheenRoughnessTexture()){const u=r.getSheenRoughnessTexture(),f=r.getSheenRoughnessTextureInfo();a.sheenRoughnessTexture=e.createTextureInfoDef(u,f)}}}),this}};Xd.EXTENSION_NAME=Ea;const{R:gv,G:yv,B:vv,A:Av}=ho;let Yd=class extends uo{init(){this.extensionName="KHR_materials_specular",this.propertyType="Specular",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{specularFactor:1,specularTexture:null,specularTextureInfo:new Qi(this.graph,"specularTextureInfo"),specularColorFactor:[1,1,1],specularColorTexture:null,specularColorTextureInfo:new Qi(this.graph,"specularColorTextureInfo")})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getSpecularColorFactor(){return this.get("specularColorFactor")}setSpecularColorFactor(e){return this.set("specularColorFactor",e)}getSpecularColorHex(){return Wo.factorToHex(this.getSpecularColorFactor())}setSpecularColorHex(e){const t=this.getSpecularColorFactor().slice();return this.set("specularColorFactor",Wo.hexToFactor(e,t))}getSpecularTexture(){return this.getRef("specularTexture")}getSpecularTextureInfo(){return this.getRef("specularTexture")?this.getRef("specularTextureInfo"):null}setSpecularTexture(e){return this.setRef("specularTexture",e,{channels:Av})}getSpecularColorTexture(){return this.getRef("specularColorTexture")}getSpecularColorTextureInfo(){return this.getRef("specularColorTexture")?this.getRef("specularColorTextureInfo"):null}setSpecularColorTexture(e){return this.setRef("specularColorTexture",e,{channels:gv|yv|vv})}};Yd.EXTENSION_NAME="KHR_materials_specular";const Ta="KHR_materials_specular";let Jl=class extends co{constructor(...e){super(...e),this.extensionName=Ta}createSpecular(){return new Yd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Ta]){const s=this.createSpecular();e.materials[i].setExtension(Ta,s);const a=r.extensions[Ta];if(a.specularFactor!==void 0&&s.setSpecularFactor(a.specularFactor),a.specularColorFactor!==void 0&&s.setSpecularColorFactor(a.specularColorFactor),a.specularTexture!==void 0){const u=a.specularTexture;s.setSpecularTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSpecularTextureInfo(),u)}if(a.specularColorTexture!==void 0){const u=a.specularColorTexture;s.setSpecularColorTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSpecularColorTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Ta);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Ta]={};if(r.getSpecularFactor()!==1&&(a.specularFactor=r.getSpecularFactor()),bi.eq(r.getSpecularColorFactor(),[1,1,1])||(a.specularColorFactor=r.getSpecularColorFactor()),r.getSpecularTexture()){const u=r.getSpecularTexture(),f=r.getSpecularTextureInfo();a.specularTexture=e.createTextureInfoDef(u,f)}if(r.getSpecularColorTexture()){const u=r.getSpecularColorTexture(),f=r.getSpecularColorTextureInfo();a.specularColorTexture=e.createTextureInfoDef(u,f)}}}),this}};Jl.EXTENSION_NAME=Ta;const{R:bv}=ho;let $d=class extends uo{init(){this.extensionName="KHR_materials_transmission",this.propertyType="Transmission",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{transmissionFactor:0,transmissionTexture:null,transmissionTextureInfo:new Qi(this.graph,"transmissionTextureInfo")})}getTransmissionFactor(){return this.get("transmissionFactor")}setTransmissionFactor(e){return this.set("transmissionFactor",e)}getTransmissionTexture(){return this.getRef("transmissionTexture")}getTransmissionTextureInfo(){return this.getRef("transmissionTexture")?this.getRef("transmissionTextureInfo"):null}setTransmissionTexture(e){return this.setRef("transmissionTexture",e,{channels:bv})}};$d.EXTENSION_NAME="KHR_materials_transmission";const wa="KHR_materials_transmission";let Zd=class extends co{constructor(...e){super(...e),this.extensionName=wa}createTransmission(){return new $d(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[wa]){const s=this.createTransmission();e.materials[i].setExtension(wa,s);const a=r.extensions[wa];if(a.transmissionFactor!==void 0&&s.setTransmissionFactor(a.transmissionFactor),a.transmissionTexture!==void 0){const u=a.transmissionTexture;s.setTransmissionTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getTransmissionTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(wa);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[wa]={transmissionFactor:r.getTransmissionFactor()};if(r.getTransmissionTexture()){const u=r.getTransmissionTexture(),f=r.getTransmissionTextureInfo();a.transmissionTexture=e.createTextureInfoDef(u,f)}}}),this}};Zd.EXTENSION_NAME=wa;let Qd=class extends uo{init(){this.extensionName="KHR_materials_unlit",this.propertyType="Unlit",this.parentTypes=[ct.MATERIAL]}};Qd.EXTENSION_NAME="KHR_materials_unlit";const gu="KHR_materials_unlit";let ql=class extends co{constructor(...e){super(...e),this.extensionName=gu}createUnlit(){return new Qd(this.document.getGraph())}read(e){return(e.jsonDoc.json.materials||[]).forEach((t,n)=>{t.extensions&&t.extensions[gu]&&e.materials[n].setExtension(gu,this.createUnlit())}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{if(n.getExtension(gu)){const r=e.materialIndexMap.get(n),i=t.json.materials[r];i.extensions=i.extensions||{},i.extensions[gu]={}}}),this}};ql.EXTENSION_NAME=gu;let eh=class extends uo{init(){this.extensionName="KHR_materials_variants",this.propertyType="Mapping",this.parentTypes=["MappingList"]}getDefaults(){return Object.assign(super.getDefaults(),{material:null,variants:[]})}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}addVariant(e){return this.addRef("variants",e)}removeVariant(e){return this.removeRef("variants",e)}listVariants(){return this.listRefs("variants")}};eh.EXTENSION_NAME="KHR_materials_variants";let th=class extends uo{init(){this.extensionName="KHR_materials_variants",this.propertyType="MappingList",this.parentTypes=[ct.PRIMITIVE]}getDefaults(){return Object.assign(super.getDefaults(),{mappings:[]})}addMapping(e){return this.addRef("mappings",e)}removeMapping(e){return this.removeRef("mappings",e)}listMappings(){return this.listRefs("mappings")}};th.EXTENSION_NAME="KHR_materials_variants";let Pl=class extends uo{init(){this.extensionName="KHR_materials_variants",this.propertyType="Variant",this.parentTypes=["MappingList"]}};Pl.EXTENSION_NAME="KHR_materials_variants";const bs="KHR_materials_variants";let nh=class extends co{constructor(...e){super(...e),this.extensionName=bs}createMappingList(){return new th(this.document.getGraph())}createVariant(e=""){return new Pl(this.document.getGraph(),e)}createMapping(){return new eh(this.document.getGraph())}listVariants(){return Array.from(this.properties).filter(e=>e instanceof Pl)}read(e){const t=e.jsonDoc;if(!t.json.extensions||!t.json.extensions[bs])return this;const n=(t.json.extensions[bs].variants||[]).map(r=>this.createVariant().setName(r.name||""));return(t.json.meshes||[]).forEach((r,i)=>{const s=e.meshes[i];(r.primitives||[]).forEach((a,u)=>{if(!a.extensions||!a.extensions[bs])return;const f=this.createMappingList(),l=a.extensions[bs];for(const p of l.mappings){const d=this.createMapping();p.material!==void 0&&d.setMaterial(e.materials[p.material]);for(const _ of p.variants||[])d.addVariant(n[_]);f.addMapping(d)}s.listPrimitives()[u].setExtension(bs,f)})}),this}write(e){const t=e.jsonDoc,n=this.listVariants();if(!n.length)return this;const r=[],i=new Map;for(const s of n)i.set(s,r.length),r.push(e.createPropertyDef(s));for(const s of this.document.getRoot().listMeshes()){const a=e.meshIndexMap.get(s);s.listPrimitives().forEach((u,f)=>{const l=u.getExtension(bs);if(!l)return;const p=e.jsonDoc.json.meshes[a].primitives[f],d=l.listMappings().map(_=>{const A=e.createPropertyDef(_),E=_.getMaterial();return E&&(A.material=e.materialIndexMap.get(E)),A.variants=_.listVariants().map(v=>i.get(v)),A});p.extensions=p.extensions||{},p.extensions[bs]={mappings:d}})}return t.json.extensions=t.json.extensions||{},t.json.extensions[bs]={variants:r},this}};nh.EXTENSION_NAME=bs;const{G:Ev}=ho;let rh=class extends uo{init(){this.extensionName="KHR_materials_volume",this.propertyType="Volume",this.parentTypes=[ct.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{thicknessFactor:0,thicknessTexture:null,thicknessTextureInfo:new Qi(this.graph,"thicknessTexture"),attenuationDistance:1/0,attenuationColor:[1,1,1]})}getThicknessFactor(){return this.get("thicknessFactor")}setThicknessFactor(e){return this.set("thicknessFactor",e)}getThicknessTexture(){return this.getRef("thicknessTexture")}getThicknessTextureInfo(){return this.getRef("thicknessTexture")?this.getRef("thicknessTextureInfo"):null}setThicknessTexture(e){return this.setRef("thicknessTexture",e,{channels:Ev})}getAttenuationDistance(){return this.get("attenuationDistance")}setAttenuationDistance(e){return this.set("attenuationDistance",e)}getAttenuationColor(){return this.get("attenuationColor")}setAttenuationColor(e){return this.set("attenuationColor",e)}getAttenuationColorHex(){return Wo.factorToHex(this.getAttenuationColor())}setAttenuationColorHex(e){const t=this.getAttenuationColor().slice();return this.set("attenuationColor",Wo.hexToFactor(e,t))}};rh.EXTENSION_NAME="KHR_materials_volume";const Ca="KHR_materials_volume";let ih=class extends co{constructor(...e){super(...e),this.extensionName=Ca}createVolume(){return new rh(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Ca]){const s=this.createVolume();e.materials[i].setExtension(Ca,s);const a=r.extensions[Ca];if(a.thicknessFactor!==void 0&&s.setThicknessFactor(a.thicknessFactor),a.attenuationDistance!==void 0&&s.setAttenuationDistance(a.attenuationDistance),a.attenuationColor!==void 0&&s.setAttenuationColor(a.attenuationColor),a.thicknessTexture!==void 0){const u=a.thicknessTexture;s.setThicknessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getThicknessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Ca);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Ca]={};if(r.getThicknessFactor()>0&&(a.thicknessFactor=r.getThicknessFactor()),Number.isFinite(r.getAttenuationDistance())&&(a.attenuationDistance=r.getAttenuationDistance()),bi.eq(r.getAttenuationColor(),[1,1,1])||(a.attenuationColor=r.getAttenuationColor()),r.getThicknessTexture()){const u=r.getThicknessTexture(),f=r.getThicknessTextureInfo();a.thicknessTexture=e.createTextureInfoDef(u,f)}}}),this}};ih.EXTENSION_NAME=Ca;const eg="KHR_mesh_quantization";let Ic=class extends co{constructor(...e){super(...e),this.extensionName=eg}read(e){return this}write(e){return this}};Ic.EXTENSION_NAME=eg;const ac="KHR_texture_basisu";let Tv=class{match(e){return e[0]===171&&e[1]===75&&e[2]===84&&e[3]===88&&e[4]===32&&e[5]===50&&e[6]===48&&e[7]===187&&e[8]===13&&e[9]===10&&e[10]===26&&e[11]===10}getSize(e){const t=El(e);return[t.pixelWidth,t.pixelHeight]}getChannels(e){const t=El(e).dataFormatDescriptor[0];if(t.colorModel===q_)return t.samples.length===2&&(15&t.samples[1].channelType)==15?4:3;if(t.colorModel===X_)return(15&t.samples[0].channelType)==3?4:3;throw new Error(`Unexpected KTX2 colorModel, "${t.colorModel}".`)}getGPUByteLength(e){const t=El(e),n=this.getChannels(e)>3;let r=0;for(let i=0;i<t.levels.length;i++){const s=t.levels[i];r+=s.uncompressedByteLength?s.uncompressedByteLength:Math.max(1,Math.floor(t.pixelWidth/Math.pow(2,i)))/4*(Math.max(1,Math.floor(t.pixelHeight/Math.pow(2,i)))/4)*(n?16:8)}return r}},oh=class extends co{constructor(...e){super(...e),this.extensionName=ac,this.prereadTypes=[ct.TEXTURE]}static register(){as.registerFormat("image/ktx2",new Tv)}preread(e){return e.jsonDoc.json.textures.forEach(t=>{t.extensions&&t.extensions[ac]&&(t.source=t.extensions[ac].source)}),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach(n=>{if(n.getMimeType()==="image/ktx2"){const r=e.imageIndexMap.get(n);t.json.textures.forEach(i=>{i.source===r&&(i.extensions=i.extensions||{},i.extensions[ac]={source:i.source},delete i.source)})}}),this}};oh.EXTENSION_NAME=ac;let sh=class extends uo{init(){this.extensionName="KHR_texture_transform",this.propertyType="Transform",this.parentTypes=[ct.TEXTURE_INFO]}getDefaults(){return Object.assign(super.getDefaults(),{offset:[0,0],rotation:0,scale:[1,1],texCoord:null})}getOffset(){return this.get("offset")}setOffset(e){return this.set("offset",e)}getRotation(){return this.get("rotation")}setRotation(e){return this.set("rotation",e)}getScale(){return this.get("scale")}setScale(e){return this.set("scale",e)}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}};sh.EXTENSION_NAME="KHR_texture_transform";const Sa="KHR_texture_transform";let ah=class extends co{constructor(...e){super(...e),this.extensionName=Sa}createTransform(){return new sh(this.document.getGraph())}read(e){for(const[t,n]of Array.from(e.textureInfos.entries())){if(!n.extensions||!n.extensions[Sa])continue;const r=this.createTransform(),i=n.extensions[Sa];i.offset!==void 0&&r.setOffset(i.offset),i.rotation!==void 0&&r.setRotation(i.rotation),i.scale!==void 0&&r.setScale(i.scale),i.texCoord!==void 0&&r.setTexCoord(i.texCoord),t.setExtension(Sa,r)}return this}write(e){const t=Array.from(e.textureInfoDefMap.entries());for(const[n,r]of t){const i=n.getExtension(Sa);if(!i)continue;r.extensions=r.extensions||{};const s={},a=bi.eq;a(i.getOffset(),[0,0])||(s.offset=i.getOffset()),i.getRotation()!==0&&(s.rotation=i.getRotation()),a(i.getScale(),[1,1])||(s.scale=i.getScale()),i.getTexCoord()!=null&&(s.texCoord=i.getTexCoord()),r.extensions[Sa]=s}return this}};ah.EXTENSION_NAME=Sa;const wv=[ct.ROOT,ct.SCENE,ct.NODE,ct.MESH,ct.MATERIAL,ct.TEXTURE,ct.ANIMATION];let uh=class extends uo{init(){this.extensionName="KHR_xmp_json_ld",this.propertyType="Packet",this.parentTypes=wv}getDefaults(){return Object.assign(super.getDefaults(),{context:{},properties:{}})}getContext(){return this.get("context")}setContext(e){return this.set("context",sa({},e))}listProperties(){return Object.keys(this.get("properties"))}getProperty(e){const t=this.get("properties");return e in t?t[e]:null}setProperty(e,t){this._assertContext(e);const n=sa({},this.get("properties"));return t?n[e]=t:delete n[e],this.set("properties",n)}toJSONLD(){return sa({"@context":lf(this.get("context"))},lf(this.get("properties")))}fromJSONLD(e){const t=(e=lf(e))["@context"];return t&&this.set("context",t),delete e["@context"],this.set("properties",e)}_assertContext(e){if(!(e.split(":")[0]in this.get("context")))throw new Error(`KHR_xmp_json_ld: Missing context for term, "${e}".`)}};function lf(o){return JSON.parse(JSON.stringify(o))}uh.EXTENSION_NAME="KHR_xmp_json_ld";const Us="KHR_xmp_json_ld";let ch=class extends co{constructor(...e){super(...e),this.extensionName=Us}createPacket(){return new uh(this.document.getGraph())}listPackets(){return Array.from(this.properties)}read(e){var t;const n=(t=e.jsonDoc.json.extensions)==null?void 0:t[Us];if(!n||!n.packets)return this;const r=e.jsonDoc.json,i=this.document.getRoot(),s=n.packets.map(f=>this.createPacket().fromJSONLD(f)),a=[[r.asset],r.scenes,r.nodes,r.meshes,r.materials,r.images,r.animations],u=[[i],i.listScenes(),i.listNodes(),i.listMeshes(),i.listMaterials(),i.listTextures(),i.listAnimations()];for(let f=0;f<a.length;f++){const l=a[f]||[];for(let p=0;p<l.length;p++){const d=l[p];d.extensions&&d.extensions[Us]&&u[f][p].setExtension(Us,s[d.extensions[Us].packet])}}return this}write(e){const{json:t}=e.jsonDoc,n=[];for(const r of this.properties){n.push(r.toJSONLD());for(const i of r.listParents()){let s;switch(i.propertyType){case ct.ROOT:s=t.asset;break;case ct.SCENE:s=t.scenes[e.sceneIndexMap.get(i)];break;case ct.NODE:s=t.nodes[e.nodeIndexMap.get(i)];break;case ct.MESH:s=t.meshes[e.meshIndexMap.get(i)];break;case ct.MATERIAL:s=t.materials[e.materialIndexMap.get(i)];break;case ct.TEXTURE:s=t.images[e.imageIndexMap.get(i)];break;case ct.ANIMATION:s=t.animations[e.animationIndexMap.get(i)];break;default:s=null,this.document.getLogger().warn(`[${Us}]: Unsupported parent property, "${i.propertyType}"`)}s&&(s.extensions=s.extensions||{},s.extensions[Us]={packet:n.length-1})}}return n.length>0&&(t.extensions=t.extensions||{},t.extensions[Us]={packets:n}),this}};ch.EXTENSION_NAME=Us;const tg=[La,Gd,Hd,Vd,zl,Kd,Kl,Jl,Xd,Zd,ql,nh,ih,Ic,oh,ah,ch],Cv=[Vl,Fa,jl,...tg],Sv=Object.freeze(Object.defineProperty({__proto__:null,ALL_EXTENSIONS:Cv,Clearcoat:kd,DracoMeshCompression:La,EmissiveStrength:Wd,INSTANCE_ATTRIBUTE:$y,IOR:jd,InstancedMesh:Ud,Iridescence:zd,KHRONOS_EXTENSIONS:tg,Light:Bu,LightsPunctual:Gd,Mapping:eh,MappingList:th,MaterialsClearcoat:Hd,MaterialsEmissiveStrength:Vd,MaterialsIOR:zl,MaterialsIridescence:Kd,MaterialsPBRSpecularGlossiness:Kl,MaterialsSheen:Xd,MaterialsSpecular:Jl,MaterialsTransmission:Zd,MaterialsUnlit:ql,MaterialsVariants:nh,MaterialsVolume:ih,MeshGPUInstancing:Vl,MeshQuantization:Ic,MeshoptCompression:Fa,PBRSpecularGlossiness:Jd,Packet:uh,Sheen:qd,Specular:Yd,TextureBasisu:oh,TextureTransform:ah,TextureWebP:jl,Transform:sh,Transmission:$d,Unlit:Qd,Variant:Pl,Volume:rh,XMP:ch},Symbol.toStringTag,{value:"Module"})),lh=Ou(Sv);var go={};Object.defineProperty(go,"__esModule",{value:!0});go.TEXTURE_RESIZE_FILTER=go.TEXTURE_RESIZE_RESOLUTION=go.SIMPLIFY_ERROR=go.SIMPLIFY_RATIO=go.SIMPLIFY=go.WELD_TOLERANCE=go.DRACO_METHOD=go.EMISSIVE_STRENGTH=void 0;go.EMISSIVE_STRENGTH=1;go.DRACO_METHOD="edgebreaker";go.WELD_TOLERANCE=1e-4;go.SIMPLIFY=!0;go.SIMPLIFY_RATIO=.75;go.SIMPLIFY_ERROR=.01;go.TEXTURE_RESIZE_RESOLUTION=1024;go.TEXTURE_RESIZE_FILTER="LANCZOS3";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.setEmissiveStrength=void 0;var op=lh,Bv=go;function xv(o,e){e===void 0&&(e=Bv.EMISSIVE_STRENGTH);var t=o.createExtension(op.MaterialsEmissiveStrength),n=t.createEmissiveStrength().setEmissiveStrength(e);o.createExtension(op.TextureWebP).setRequired(!0),o.getRoot().listMaterials().forEach(function(r){r.setExtension("KHR_materials_emissive_strength",n)})}Mc.setEmissiveStrength=xv;var Xl={},sd={},Mv={get exports(){return sd},set exports(o){sd=o}};const Dv={},Rv=Object.freeze(Object.defineProperty({__proto__:null,default:Dv},Symbol.toStringTag,{value:"Module"})),gi=Ou(Rv);(function(o,e){var t=t||{};t.scope={},t.arrayIteratorImpl=function(r){var i=0;return function(){return i<r.length?{done:!1,value:r[i++]}:{done:!0}}},t.arrayIterator=function(r){return{next:t.arrayIteratorImpl(r)}},t.makeIterator=function(r){var i=typeof Symbol<"u"&&Symbol.iterator&&r[Symbol.iterator];return i?i.call(r):t.arrayIterator(r)},t.ASSUME_ES5=!1,t.ASSUME_NO_NATIVE_MAP=!1,t.ASSUME_NO_NATIVE_SET=!1,t.SIMPLE_FROUND_POLYFILL=!1,t.ISOLATE_POLYFILLS=!1,t.FORCE_POLYFILL_PROMISE=!1,t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,t.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof vi=="object"&&vi];for(var i=0;i<r.length;++i){var s=r[i];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},t.global=t.getGlobal(vi),t.defineProperty=t.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,i,s){return r==Array.prototype||r==Object.prototype||(r[i]=s.value),r},t.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",t.TRUST_ES6_POLYFILLS=!t.ISOLATE_POLYFILLS||t.IS_SYMBOL_NATIVE,t.polyfills={},t.propertyToPolyfillSymbol={},t.POLYFILL_PREFIX="$jscp$",t.polyfill=function(r,i,s,a){i&&(t.ISOLATE_POLYFILLS?t.polyfillIsolated(r,i,s,a):t.polyfillUnisolated(r,i,s,a))},t.polyfillUnisolated=function(r,i,s,a){for(s=t.global,r=r.split("."),a=0;a<r.length-1;a++){var u=r[a];if(!(u in s))return;s=s[u]}r=r[r.length-1],a=s[r],i=i(a),i!=a&&i!=null&&t.defineProperty(s,r,{configurable:!0,writable:!0,value:i})},t.polyfillIsolated=function(r,i,s,a){var u=r.split(".");r=u.length===1,a=u[0],a=!r&&a in t.polyfills?t.polyfills:t.global;for(var f=0;f<u.length-1;f++){var l=u[f];if(!(l in a))return;a=a[l]}u=u[u.length-1],s=t.IS_SYMBOL_NATIVE&&s==="es6"?a[u]:null,i=i(s),i!=null&&(r?t.defineProperty(t.polyfills,u,{configurable:!0,writable:!0,value:i}):i!==s&&(t.propertyToPolyfillSymbol[u]===void 0&&(s=1e9*Math.random()>>>0,t.propertyToPolyfillSymbol[u]=t.IS_SYMBOL_NATIVE?t.global.Symbol(u):t.POLYFILL_PREFIX+s+"$"+u),t.defineProperty(a,t.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:i})))},t.polyfill("Promise",function(r){function i(){this.batch_=null}function s(l){return l instanceof u?l:new u(function(p,d){p(l)})}if(r&&(!(t.FORCE_POLYFILL_PROMISE||t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&typeof t.global.PromiseRejectionEvent>"u")||!t.global.Promise||t.global.Promise.toString().indexOf("[native code]")===-1))return r;i.prototype.asyncExecute=function(l){if(this.batch_==null){this.batch_=[];var p=this;this.asyncExecuteFunction(function(){p.executeBatch_()})}this.batch_.push(l)};var a=t.global.setTimeout;i.prototype.asyncExecuteFunction=function(l){a(l,0)},i.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var l=this.batch_;this.batch_=[];for(var p=0;p<l.length;++p){var d=l[p];l[p]=null;try{d()}catch(_){this.asyncThrow_(_)}}}this.batch_=null},i.prototype.asyncThrow_=function(l){this.asyncExecuteFunction(function(){throw l})};var u=function(l){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var p=this.createResolveAndReject_();try{l(p.resolve,p.reject)}catch(d){p.reject(d)}};u.prototype.createResolveAndReject_=function(){function l(_){return function(A){d||(d=!0,_.call(p,A))}}var p=this,d=!1;return{resolve:l(this.resolveTo_),reject:l(this.reject_)}},u.prototype.resolveTo_=function(l){if(l===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(l instanceof u)this.settleSameAsPromise_(l);else{e:switch(typeof l){case"object":var p=l!=null;break e;case"function":p=!0;break e;default:p=!1}p?this.resolveToNonPromiseObj_(l):this.fulfill_(l)}},u.prototype.resolveToNonPromiseObj_=function(l){var p=void 0;try{p=l.then}catch(d){this.reject_(d);return}typeof p=="function"?this.settleSameAsThenable_(p,l):this.fulfill_(l)},u.prototype.reject_=function(l){this.settle_(2,l)},u.prototype.fulfill_=function(l){this.settle_(1,l)},u.prototype.settle_=function(l,p){if(this.state_!=0)throw Error("Cannot settle("+l+", "+p+"): Promise already settled in state"+this.state_);this.state_=l,this.result_=p,this.state_===2&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},u.prototype.scheduleUnhandledRejectionCheck_=function(){var l=this;a(function(){if(l.notifyUnhandledRejection_()){var p=t.global.console;typeof p<"u"&&p.error(l.result_)}},1)},u.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var l=t.global.CustomEvent,p=t.global.Event,d=t.global.dispatchEvent;return typeof d>"u"?!0:(typeof l=="function"?l=new l("unhandledrejection",{cancelable:!0}):typeof p=="function"?l=new p("unhandledrejection",{cancelable:!0}):(l=t.global.document.createEvent("CustomEvent"),l.initCustomEvent("unhandledrejection",!1,!0,l)),l.promise=this,l.reason=this.result_,d(l))},u.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var l=0;l<this.onSettledCallbacks_.length;++l)f.asyncExecute(this.onSettledCallbacks_[l]);this.onSettledCallbacks_=null}};var f=new i;return u.prototype.settleSameAsPromise_=function(l){var p=this.createResolveAndReject_();l.callWhenSettled_(p.resolve,p.reject)},u.prototype.settleSameAsThenable_=function(l,p){var d=this.createResolveAndReject_();try{l.call(p,d.resolve,d.reject)}catch(_){d.reject(_)}},u.prototype.then=function(l,p){function d(v,T){return typeof v=="function"?function(P){try{_(v(P))}catch(I){A(I)}}:T}var _,A,E=new u(function(v,T){_=v,A=T});return this.callWhenSettled_(d(l,_),d(p,A)),E},u.prototype.catch=function(l){return this.then(void 0,l)},u.prototype.callWhenSettled_=function(l,p){function d(){switch(_.state_){case 1:l(_.result_);break;case 2:p(_.result_);break;default:throw Error("Unexpected state: "+_.state_)}}var _=this;this.onSettledCallbacks_==null?f.asyncExecute(d):this.onSettledCallbacks_.push(d),this.isRejectionHandled_=!0},u.resolve=s,u.reject=function(l){return new u(function(p,d){d(l)})},u.race=function(l){return new u(function(p,d){for(var _=t.makeIterator(l),A=_.next();!A.done;A=_.next())s(A.value).callWhenSettled_(p,d)})},u.all=function(l){var p=t.makeIterator(l),d=p.next();return d.done?s([]):new u(function(_,A){function E(P){return function(I){v[P]=I,T--,T==0&&_(v)}}var v=[],T=0;do v.push(void 0),T++,s(d.value).callWhenSettled_(E(v.length-1),A),d=p.next();while(!d.done)})},u},"es6","es3"),t.owns=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.assign=t.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(r,i){for(var s=1;s<arguments.length;s++){var a=arguments[s];if(a)for(var u in a)t.owns(a,u)&&(r[u]=a[u])}return r},t.polyfill("Object.assign",function(r){return r||t.assign},"es6","es3"),t.checkStringArgs=function(r,i,s){if(r==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return r+""},t.polyfill("String.prototype.startsWith",function(r){return r||function(i,s){var a=t.checkStringArgs(this,i,"startsWith");i+="";var u=a.length,f=i.length;s=Math.max(0,Math.min(s|0,a.length));for(var l=0;l<f&&s<u;)if(a[s++]!=i[l++])return!1;return l>=f}},"es6","es3"),t.polyfill("Array.prototype.copyWithin",function(r){function i(s){return s=Number(s),s===1/0||s===-1/0?s:s|0}return r||function(s,a,u){var f=this.length;if(s=i(s),a=i(a),u=u===void 0?f:i(u),s=0>s?Math.max(f+s,0):Math.min(s,f),a=0>a?Math.max(f+a,0):Math.min(a,f),u=0>u?Math.max(f+u,0):Math.min(u,f),s<a)for(;a<u;)a in this?this[s++]=this[a++]:(delete this[s++],a++);else for(u=Math.min(u,f+a-s),s+=u-a;u>a;)--u in this?this[--s]=this[u]:delete this[--s];return this}},"es6","es3"),t.typedArrayCopyWithin=function(r){return r||Array.prototype.copyWithin},t.polyfill("Int8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8ClampedArray.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float64Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5");var n=function(){var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){function s(Q){return j.locateFile?j.locateFile(Q,In):In+Q}function a(){var Q=Qr.buffer;j.HEAP8=oi=new Int8Array(Q),j.HEAP16=xn=new Int16Array(Q),j.HEAP32=ei=new Int32Array(Q),j.HEAPU8=qr=new Uint8Array(Q),j.HEAPU16=new Uint16Array(Q),j.HEAPU32=ir=new Uint32Array(Q),j.HEAPF32=Ae=new Float32Array(Q),j.HEAPF64=new Float64Array(Q)}function u(Q){throw j.onAbort&&j.onAbort(Q),Q="Aborted("+Q+")",yn(Q),Ai=!0,Q=new WebAssembly.RuntimeError(Q+". Build with -sASSERTIONS for more info."),Qe(Q),Q}function f(Q){try{if(Q==Ee&&Cr)return new Uint8Array(Cr);if(dn)return dn(Q);throw"both async and sync fetching of the wasm failed"}catch(ne){u(ne)}}function l(){if(!Cr&&(ke||L)){if(typeof fetch=="function"&&!Ee.startsWith("file://"))return fetch(Ee,{credentials:"same-origin"}).then(function(Q){if(!Q.ok)throw"failed to load wasm binary file at '"+Ee+"'";return Q.arrayBuffer()}).catch(function(){return f(Ee)});if(Yt)return new Promise(function(Q,ne){Yt(Ee,function(ye){Q(new Uint8Array(ye))},ne)})}return Promise.resolve().then(function(){return f(Ee)})}function p(Q){for(;0<Q.length;)Q.shift()(j)}function d(Q){this.excPtr=Q,this.ptr=Q-24,this.set_type=function(ne){ir[this.ptr+4>>2]=ne},this.get_type=function(){return ir[this.ptr+4>>2]},this.set_destructor=function(ne){ir[this.ptr+8>>2]=ne},this.get_destructor=function(){return ir[this.ptr+8>>2]},this.set_refcount=function(ne){ei[this.ptr>>2]=ne},this.set_caught=function(ne){oi[this.ptr+12>>0]=ne?1:0},this.get_caught=function(){return oi[this.ptr+12>>0]!=0},this.set_rethrown=function(ne){oi[this.ptr+13>>0]=ne?1:0},this.get_rethrown=function(){return oi[this.ptr+13>>0]!=0},this.init=function(ne,ye){this.set_adjusted_ptr(0),this.set_type(ne),this.set_destructor(ye),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){ei[this.ptr>>2]+=1},this.release_ref=function(){var ne=ei[this.ptr>>2];return ei[this.ptr>>2]=ne-1,ne===1},this.set_adjusted_ptr=function(ne){ir[this.ptr+16>>2]=ne},this.get_adjusted_ptr=function(){return ir[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Dn(this.get_type()))return ir[this.excPtr>>2];var ne=this.get_adjusted_ptr();return ne!==0?ne:this.excPtr}}function _(){function Q(){if(!sr&&(sr=!0,j.calledRun=!0,!Ai)){if(Et=!0,p(ot),ht(j),j.onRuntimeInitialized&&j.onRuntimeInitialized(),j.postRun)for(typeof j.postRun=="function"&&(j.postRun=[j.postRun]);j.postRun.length;)wt.unshift(j.postRun.shift());p(wt)}}if(!(0<Lt)){if(j.preRun)for(typeof j.preRun=="function"&&(j.preRun=[j.preRun]);j.preRun.length;)fe.unshift(j.preRun.shift());p(fe),0<Lt||(j.setStatus?(j.setStatus("Running..."),setTimeout(function(){setTimeout(function(){j.setStatus("")},1),Q()},1)):Q())}}function A(){}function E(Q){return(Q||A).__cache__}function v(Q,ne){var ye=E(ne),Me=ye[Q];return Me||(Me=Object.create((ne||A).prototype),Me.ptr=Q,ye[Q]=Me)}function T(Q){if(typeof Q=="string"){for(var ne=0,ye=0;ye<Q.length;++ye){var Me=Q.charCodeAt(ye);127>=Me?ne++:2047>=Me?ne+=2:55296<=Me&&57343>=Me?(ne+=4,++ye):ne+=3}if(ne=Array(ne+1),ye=0,Me=ne.length,0<Me){Me=ye+Me-1;for(var De=0;De<Q.length;++De){var yt=Q.charCodeAt(De);if(55296<=yt&&57343>=yt){var Xr=Q.charCodeAt(++De);yt=65536+((yt&1023)<<10)|Xr&1023}if(127>=yt){if(ye>=Me)break;ne[ye++]=yt}else{if(2047>=yt){if(ye+1>=Me)break;ne[ye++]=192|yt>>6}else{if(65535>=yt){if(ye+2>=Me)break;ne[ye++]=224|yt>>12}else{if(ye+3>=Me)break;ne[ye++]=240|yt>>18,ne[ye++]=128|yt>>12&63}ne[ye++]=128|yt>>6&63}ne[ye++]=128|yt&63}}ne[ye]=0}return Q=Dt.alloc(ne,oi),Dt.copy(ne,oi,Q),Q}return Q}function P(Q){if(typeof Q=="object"){var ne=Dt.alloc(Q,oi);return Dt.copy(Q,oi,ne),ne}return Q}function I(Q){if(typeof Q=="object"){var ne=Dt.alloc(Q,xn);return Dt.copy(Q,xn,ne),ne}return Q}function k(Q){if(typeof Q=="object"){var ne=Dt.alloc(Q,ei);return Dt.copy(Q,ei,ne),ne}return Q}function K(Q){if(typeof Q=="object"){var ne=Dt.alloc(Q,Ae);return Dt.copy(Q,Ae,ne),ne}return Q}function ee(){throw"cannot construct a VoidPtr, no constructor in IDL"}function me(){this.ptr=Zt(),E(me)[this.ptr]=this}function Z(){this.ptr=Ut(),E(Z)[this.ptr]=this}function re(){this.ptr=Kr(),E(re)[this.ptr]=this}function de(){this.ptr=li(),E(de)[this.ptr]=this}function Ie(){this.ptr=no(),E(Ie)[this.ptr]=this}function Pe(){this.ptr=qe(),E(Pe)[this.ptr]=this}function we(){this.ptr=Mn(),E(we)[this.ptr]=this}function Te(){this.ptr=_r(),E(Te)[this.ptr]=this}function Se(){this.ptr=Kt(),E(Se)[this.ptr]=this}function Oe(){this.ptr=Sr(),E(Oe)[this.ptr]=this}function He(Q){Q&&typeof Q=="object"&&(Q=Q.ptr),this.ptr=hi(Q),E(He)[this.ptr]=this}i=i===void 0?{}:i;var j=typeof i<"u"?i:{},ht,Qe;j.ready=new Promise(function(Q,ne){ht=Q,Qe=ne});var Je=!1,ze=!1;j.onRuntimeInitialized=function(){Je=!0,ze&&typeof j.onModuleLoaded=="function"&&j.onModuleLoaded(j)},j.onModuleParsed=function(){ze=!0,Je&&typeof j.onModuleLoaded=="function"&&j.onModuleLoaded(j)},j.isVersionSupported=function(Q){return typeof Q!="string"?!1:(Q=Q.split("."),2>Q.length||3<Q.length?!1:Q[0]==1&&0<=Q[1]&&5>=Q[1]?!0:!(Q[0]!=0||10<Q[1]))};var ut=Object.assign({},j),ke=typeof window=="object",L=typeof importScripts=="function",nt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",In="";if(nt){var Xt=gi,Pn=gi;In=L?Pn.dirname(In)+"/":__dirname+"/";var vt=function(Q,ne){return Q=Q.startsWith("file://")?new URL(Q):Pn.normalize(Q),Xt.readFileSync(Q,ne?void 0:"utf8")},dn=function(Q){return Q=vt(Q,!0),Q.buffer||(Q=new Uint8Array(Q)),Q},Yt=function(Q,ne,ye){Q=Q.startsWith("file://")?new URL(Q):Pn.normalize(Q),Xt.readFile(Q,function(Me,De){Me?ye(Me):ne(De.buffer)})};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),j.inspect=function(){return"[Emscripten Module object]"}}else(ke||L)&&(L?In=self.location.href:typeof document<"u"&&document.currentScript&&(In=document.currentScript.src),r&&(In=r),In=In.indexOf("blob:")!==0?In.substr(0,In.replace(/[?#].*/,"").lastIndexOf("/")+1):"",vt=function(Q){var ne=new XMLHttpRequest;return ne.open("GET",Q,!1),ne.send(null),ne.responseText},L&&(dn=function(Q){var ne=new XMLHttpRequest;return ne.open("GET",Q,!1),ne.responseType="arraybuffer",ne.send(null),new Uint8Array(ne.response)}),Yt=function(Q,ne,ye){var Me=new XMLHttpRequest;Me.open("GET",Q,!0),Me.responseType="arraybuffer",Me.onload=function(){Me.status==200||Me.status==0&&Me.response?ne(Me.response):ye()},Me.onerror=ye,Me.send(null)});j.print||console.log.bind(console);var yn=j.printErr||console.warn.bind(console);Object.assign(j,ut),ut=null;var Cr;j.wasmBinary&&(Cr=j.wasmBinary),typeof WebAssembly!="object"&&u("no native wasm support detected");var Qr,Ai=!1,oi,qr,xn,ei,ir,Ae,fe=[],ot=[],wt=[],Et=!1,Lt=0,bn=null,Ee="draco_encoder.wasm";Ee.startsWith("data:application/octet-stream;base64,")||(Ee=s(Ee));var Ve={b:function(Q,ne,ye){throw new d(Q).init(ne,ye),Q},a:function(){u("")},d:function(Q,ne,ye){qr.copyWithin(Q,ne,ne+ye)},c:function(Q){var ne=qr.length;if(Q>>>=0,2147483648<Q)return!1;for(var ye=1;4>=ye;ye*=2){var Me=ne*(1+.2/ye);Me=Math.min(Me,Q+100663296);var De=Math;Me=Math.max(Q,Me),De=De.min.call(De,2147483648,Me+(65536-Me%65536)%65536);e:{Me=Qr.buffer;try{Qr.grow(De-Me.byteLength+65535>>>16),a();var yt=1;break e}catch{}yt=void 0}if(yt)return!0}return!1}};(function(){function Q(De,yt){j.asm=De.exports,Qr=j.asm.e,a(),ot.unshift(j.asm.f),Lt--,j.monitorRunDependencies&&j.monitorRunDependencies(Lt),Lt==0&&bn&&(De=bn,bn=null,De())}function ne(De){Q(De.instance)}function ye(De){return l().then(function(yt){return WebAssembly.instantiate(yt,Me)}).then(function(yt){return yt}).then(De,function(yt){yn("failed to asynchronously prepare wasm: "+yt),u(yt)})}var Me={a:Ve};if(Lt++,j.monitorRunDependencies&&j.monitorRunDependencies(Lt),j.instantiateWasm)try{return j.instantiateWasm(Me,Q)}catch(De){yn("Module.instantiateWasm callback failed with error: "+De),Qe(De)}return function(){return Cr||typeof WebAssembly.instantiateStreaming!="function"||Ee.startsWith("data:application/octet-stream;base64,")||Ee.startsWith("file://")||nt||typeof fetch!="function"?ye(ne):fetch(Ee,{credentials:"same-origin"}).then(function(De){return WebAssembly.instantiateStreaming(De,Me).then(ne,function(yt){return yn("wasm streaming compile failed: "+yt),yn("falling back to ArrayBuffer instantiation"),ye(ne)})})}().catch(Qe),{}})();var jt=j._emscripten_bind_VoidPtr___destroy___0=function(){return(jt=j._emscripten_bind_VoidPtr___destroy___0=j.asm.h).apply(null,arguments)},Zt=j._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(Zt=j._emscripten_bind_GeometryAttribute_GeometryAttribute_0=j.asm.i).apply(null,arguments)},St=j._emscripten_bind_GeometryAttribute___destroy___0=function(){return(St=j._emscripten_bind_GeometryAttribute___destroy___0=j.asm.j).apply(null,arguments)},Ut=j._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(Ut=j._emscripten_bind_PointAttribute_PointAttribute_0=j.asm.k).apply(null,arguments)},sn=j._emscripten_bind_PointAttribute_size_0=function(){return(sn=j._emscripten_bind_PointAttribute_size_0=j.asm.l).apply(null,arguments)},Fn=j._emscripten_bind_PointAttribute_attribute_type_0=function(){return(Fn=j._emscripten_bind_PointAttribute_attribute_type_0=j.asm.m).apply(null,arguments)},or=j._emscripten_bind_PointAttribute_data_type_0=function(){return(or=j._emscripten_bind_PointAttribute_data_type_0=j.asm.n).apply(null,arguments)},zr=j._emscripten_bind_PointAttribute_num_components_0=function(){return(zr=j._emscripten_bind_PointAttribute_num_components_0=j.asm.o).apply(null,arguments)},Fe=j._emscripten_bind_PointAttribute_normalized_0=function(){return(Fe=j._emscripten_bind_PointAttribute_normalized_0=j.asm.p).apply(null,arguments)},rt=j._emscripten_bind_PointAttribute_byte_stride_0=function(){return(rt=j._emscripten_bind_PointAttribute_byte_stride_0=j.asm.q).apply(null,arguments)},Tt=j._emscripten_bind_PointAttribute_byte_offset_0=function(){return(Tt=j._emscripten_bind_PointAttribute_byte_offset_0=j.asm.r).apply(null,arguments)},Qt=j._emscripten_bind_PointAttribute_unique_id_0=function(){return(Qt=j._emscripten_bind_PointAttribute_unique_id_0=j.asm.s).apply(null,arguments)},En=j._emscripten_bind_PointAttribute___destroy___0=function(){return(En=j._emscripten_bind_PointAttribute___destroy___0=j.asm.t).apply(null,arguments)},Kr=j._emscripten_bind_PointCloud_PointCloud_0=function(){return(Kr=j._emscripten_bind_PointCloud_PointCloud_0=j.asm.u).apply(null,arguments)},ki=j._emscripten_bind_PointCloud_num_attributes_0=function(){return(ki=j._emscripten_bind_PointCloud_num_attributes_0=j.asm.v).apply(null,arguments)},Hi=j._emscripten_bind_PointCloud_num_points_0=function(){return(Hi=j._emscripten_bind_PointCloud_num_points_0=j.asm.w).apply(null,arguments)},$i=j._emscripten_bind_PointCloud___destroy___0=function(){return($i=j._emscripten_bind_PointCloud___destroy___0=j.asm.x).apply(null,arguments)},li=j._emscripten_bind_Mesh_Mesh_0=function(){return(li=j._emscripten_bind_Mesh_Mesh_0=j.asm.y).apply(null,arguments)},so=j._emscripten_bind_Mesh_num_faces_0=function(){return(so=j._emscripten_bind_Mesh_num_faces_0=j.asm.z).apply(null,arguments)},ji=j._emscripten_bind_Mesh_num_attributes_0=function(){return(ji=j._emscripten_bind_Mesh_num_attributes_0=j.asm.A).apply(null,arguments)},mo=j._emscripten_bind_Mesh_num_points_0=function(){return(mo=j._emscripten_bind_Mesh_num_points_0=j.asm.B).apply(null,arguments)},en=j._emscripten_bind_Mesh_set_num_points_1=function(){return(en=j._emscripten_bind_Mesh_set_num_points_1=j.asm.C).apply(null,arguments)},Mo=j._emscripten_bind_Mesh___destroy___0=function(){return(Mo=j._emscripten_bind_Mesh___destroy___0=j.asm.D).apply(null,arguments)},no=j._emscripten_bind_Metadata_Metadata_0=function(){return(no=j._emscripten_bind_Metadata_Metadata_0=j.asm.E).apply(null,arguments)},ge=j._emscripten_bind_Metadata___destroy___0=function(){return(ge=j._emscripten_bind_Metadata___destroy___0=j.asm.F).apply(null,arguments)},qe=j._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(qe=j._emscripten_bind_DracoInt8Array_DracoInt8Array_0=j.asm.G).apply(null,arguments)},at=j._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(at=j._emscripten_bind_DracoInt8Array_GetValue_1=j.asm.H).apply(null,arguments)},Ne=j._emscripten_bind_DracoInt8Array_size_0=function(){return(Ne=j._emscripten_bind_DracoInt8Array_size_0=j.asm.I).apply(null,arguments)},ft=j._emscripten_bind_DracoInt8Array___destroy___0=function(){return(ft=j._emscripten_bind_DracoInt8Array___destroy___0=j.asm.J).apply(null,arguments)},Mn=j._emscripten_bind_MetadataBuilder_MetadataBuilder_0=function(){return(Mn=j._emscripten_bind_MetadataBuilder_MetadataBuilder_0=j.asm.K).apply(null,arguments)},Bn=j._emscripten_bind_MetadataBuilder_AddStringEntry_3=function(){return(Bn=j._emscripten_bind_MetadataBuilder_AddStringEntry_3=j.asm.L).apply(null,arguments)},mr=j._emscripten_bind_MetadataBuilder_AddIntEntry_3=function(){return(mr=j._emscripten_bind_MetadataBuilder_AddIntEntry_3=j.asm.M).apply(null,arguments)},gr=j._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=function(){return(gr=j._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=j.asm.N).apply(null,arguments)},Gr=j._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=function(){return(Gr=j._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=j.asm.O).apply(null,arguments)},yr=j._emscripten_bind_MetadataBuilder___destroy___0=function(){return(yr=j._emscripten_bind_MetadataBuilder___destroy___0=j.asm.P).apply(null,arguments)},_r=j._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=function(){return(_r=j._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=j.asm.Q).apply(null,arguments)},ti=j._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=function(){return(ti=j._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=j.asm.R).apply(null,arguments)},Wi=j._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=function(){return(Wi=j._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=j.asm.S).apply(null,arguments)},zi=j._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=function(){return(zi=j._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=j.asm.T).apply(null,arguments)},Zi=j._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=function(){return(Zi=j._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=j.asm.U).apply(null,arguments)},Ue=j._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=function(){return(Ue=j._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=j.asm.V).apply(null,arguments)},c=j._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=function(){return(c=j._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=j.asm.W).apply(null,arguments)},Xe=j._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=function(){return(Xe=j._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=j.asm.X).apply(null,arguments)},et=j._emscripten_bind_PointCloudBuilder_AddMetadata_2=function(){return(et=j._emscripten_bind_PointCloudBuilder_AddMetadata_2=j.asm.Y).apply(null,arguments)},it=j._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=function(){return(it=j._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=j.asm.Z).apply(null,arguments)},je=j._emscripten_bind_PointCloudBuilder___destroy___0=function(){return(je=j._emscripten_bind_PointCloudBuilder___destroy___0=j.asm._).apply(null,arguments)},Kt=j._emscripten_bind_MeshBuilder_MeshBuilder_0=function(){return(Kt=j._emscripten_bind_MeshBuilder_MeshBuilder_0=j.asm.$).apply(null,arguments)},Mt=j._emscripten_bind_MeshBuilder_AddFacesToMesh_3=function(){return(Mt=j._emscripten_bind_MeshBuilder_AddFacesToMesh_3=j.asm.aa).apply(null,arguments)},xt=j._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=function(){return(xt=j._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=j.asm.ba).apply(null,arguments)},Jt=j._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=function(){return(Jt=j._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=j.asm.ca).apply(null,arguments)},hn=j._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=function(){return(hn=j._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=j.asm.da).apply(null,arguments)},tn=j._emscripten_bind_MeshBuilder_AddFloatAttribute_5=function(){return(tn=j._emscripten_bind_MeshBuilder_AddFloatAttribute_5=j.asm.ea).apply(null,arguments)},vn=j._emscripten_bind_MeshBuilder_AddInt8Attribute_5=function(){return(vn=j._emscripten_bind_MeshBuilder_AddInt8Attribute_5=j.asm.fa).apply(null,arguments)},pn=j._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=function(){return(pn=j._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=j.asm.ga).apply(null,arguments)},Ot=j._emscripten_bind_MeshBuilder_AddInt16Attribute_5=function(){return(Ot=j._emscripten_bind_MeshBuilder_AddInt16Attribute_5=j.asm.ha).apply(null,arguments)},Gt=j._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=function(){return(Gt=j._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=j.asm.ia).apply(null,arguments)},rn=j._emscripten_bind_MeshBuilder_AddInt32Attribute_5=function(){return(rn=j._emscripten_bind_MeshBuilder_AddInt32Attribute_5=j.asm.ja).apply(null,arguments)},fr=j._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=function(){return(fr=j._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=j.asm.ka).apply(null,arguments)},Ir=j._emscripten_bind_MeshBuilder_AddMetadata_2=function(){return(Ir=j._emscripten_bind_MeshBuilder_AddMetadata_2=j.asm.la).apply(null,arguments)},Tn=j._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=function(){return(Tn=j._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=j.asm.ma).apply(null,arguments)},Jr=j._emscripten_bind_MeshBuilder___destroy___0=function(){return(Jr=j._emscripten_bind_MeshBuilder___destroy___0=j.asm.na).apply(null,arguments)},Sr=j._emscripten_bind_Encoder_Encoder_0=function(){return(Sr=j._emscripten_bind_Encoder_Encoder_0=j.asm.oa).apply(null,arguments)},kr=j._emscripten_bind_Encoder_SetEncodingMethod_1=function(){return(kr=j._emscripten_bind_Encoder_SetEncodingMethod_1=j.asm.pa).apply(null,arguments)},si=j._emscripten_bind_Encoder_SetAttributeQuantization_2=function(){return(si=j._emscripten_bind_Encoder_SetAttributeQuantization_2=j.asm.qa).apply(null,arguments)},ni=j._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=function(){return(ni=j._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=j.asm.ra).apply(null,arguments)},Di=j._emscripten_bind_Encoder_SetSpeedOptions_2=function(){return(Di=j._emscripten_bind_Encoder_SetSpeedOptions_2=j.asm.sa).apply(null,arguments)},Ti=j._emscripten_bind_Encoder_SetTrackEncodedProperties_1=function(){return(Ti=j._emscripten_bind_Encoder_SetTrackEncodedProperties_1=j.asm.ta).apply(null,arguments)},Ri=j._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=function(){return(Ri=j._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=j.asm.ua).apply(null,arguments)},Ii=j._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=function(){return(Ii=j._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=j.asm.va).apply(null,arguments)},Pi=j._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=function(){return(Pi=j._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=j.asm.wa).apply(null,arguments)},fi=j._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=function(){return(fi=j._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=j.asm.xa).apply(null,arguments)},di=j._emscripten_bind_Encoder___destroy___0=function(){return(di=j._emscripten_bind_Encoder___destroy___0=j.asm.ya).apply(null,arguments)},hi=j._emscripten_bind_ExpertEncoder_ExpertEncoder_1=function(){return(hi=j._emscripten_bind_ExpertEncoder_ExpertEncoder_1=j.asm.za).apply(null,arguments)},mn=j._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=function(){return(mn=j._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=j.asm.Aa).apply(null,arguments)},Ln=j._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=function(){return(Ln=j._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=j.asm.Ba).apply(null,arguments)},_t=j._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=function(){return(_t=j._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=j.asm.Ca).apply(null,arguments)},cn=j._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=function(){return(cn=j._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=j.asm.Da).apply(null,arguments)},Wt=j._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=function(){return(Wt=j._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=j.asm.Ea).apply(null,arguments)},Ke=j._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=function(){return(Ke=j._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=j.asm.Fa).apply(null,arguments)},pt=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=function(){return(pt=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=j.asm.Ga).apply(null,arguments)},Zn=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=function(){return(Zn=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=j.asm.Ha).apply(null,arguments)},mt=j._emscripten_bind_ExpertEncoder___destroy___0=function(){return(mt=j._emscripten_bind_ExpertEncoder___destroy___0=j.asm.Ia).apply(null,arguments)},Rt=j._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(Rt=j._emscripten_enum_draco_GeometryAttribute_Type_INVALID=j.asm.Ja).apply(null,arguments)},an=j._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(an=j._emscripten_enum_draco_GeometryAttribute_Type_POSITION=j.asm.Ka).apply(null,arguments)},Hr=j._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(Hr=j._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=j.asm.La).apply(null,arguments)},Wr=j._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(Wr=j._emscripten_enum_draco_GeometryAttribute_Type_COLOR=j.asm.Ma).apply(null,arguments)},On=j._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(On=j._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=j.asm.Na).apply(null,arguments)},Pr=j._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Pr=j._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=j.asm.Oa).apply(null,arguments)},ai=j._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(ai=j._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=j.asm.Pa).apply(null,arguments)},pi=j._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(pi=j._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=j.asm.Qa).apply(null,arguments)},wi=j._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(wi=j._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=j.asm.Ra).apply(null,arguments)},Fr=j._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=function(){return(Fr=j._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=j.asm.Sa).apply(null,arguments)},$r=j._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=function(){return($r=j._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=j.asm.Ta).apply(null,arguments)};j._malloc=function(){return(j._malloc=j.asm.Ua).apply(null,arguments)},j._free=function(){return(j._free=j.asm.Va).apply(null,arguments)};var Dn=function(){return(Dn=j.asm.Wa).apply(null,arguments)};j.___start_em_js=19116,j.___stop_em_js=19214;var sr;if(bn=function Q(){sr||_(),sr||(bn=Q)},j.preInit)for(typeof j.preInit=="function"&&(j.preInit=[j.preInit]);0<j.preInit.length;)j.preInit.pop()();_(),A.prototype=Object.create(A.prototype),A.prototype.constructor=A,A.prototype.__class__=A,A.__cache__={},j.WrapperObject=A,j.getCache=E,j.wrapPointer=v,j.castObject=function(Q,ne){return v(Q.ptr,ne)},j.NULL=v(0),j.destroy=function(Q){if(!Q.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";Q.__destroy__(),delete E(Q.__class__)[Q.ptr]},j.compare=function(Q,ne){return Q.ptr===ne.ptr},j.getPointer=function(Q){return Q.ptr},j.getClass=function(Q){return Q.__class__};var Dt={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Dt.needed){for(var Q=0;Q<Dt.temps.length;Q++)j._free(Dt.temps[Q]);Dt.temps.length=0,j._free(Dt.buffer),Dt.buffer=0,Dt.size+=Dt.needed,Dt.needed=0}Dt.buffer||(Dt.size+=128,Dt.buffer=j._malloc(Dt.size),Dt.buffer||u(void 0)),Dt.pos=0},alloc:function(Q,ne){return Dt.buffer||u(void 0),Q=Q.length*ne.BYTES_PER_ELEMENT,Q=Q+7&-8,Dt.pos+Q>=Dt.size?(0<Q||u(void 0),Dt.needed+=Q,ne=j._malloc(Q),Dt.temps.push(ne)):(ne=Dt.buffer+Dt.pos,Dt.pos+=Q),ne},copy:function(Q,ne,ye){switch(ye>>>=0,ne.BYTES_PER_ELEMENT){case 2:ye>>>=1;break;case 4:ye>>>=2;break;case 8:ye>>>=3}for(var Me=0;Me<Q.length;Me++)ne[ye+Me]=Q[Me]}};return ee.prototype=Object.create(A.prototype),ee.prototype.constructor=ee,ee.prototype.__class__=ee,ee.__cache__={},j.VoidPtr=ee,ee.prototype.__destroy__=ee.prototype.__destroy__=function(){jt(this.ptr)},me.prototype=Object.create(A.prototype),me.prototype.constructor=me,me.prototype.__class__=me,me.__cache__={},j.GeometryAttribute=me,me.prototype.__destroy__=me.prototype.__destroy__=function(){St(this.ptr)},Z.prototype=Object.create(A.prototype),Z.prototype.constructor=Z,Z.prototype.__class__=Z,Z.__cache__={},j.PointAttribute=Z,Z.prototype.size=Z.prototype.size=function(){return sn(this.ptr)},Z.prototype.attribute_type=Z.prototype.attribute_type=function(){return Fn(this.ptr)},Z.prototype.data_type=Z.prototype.data_type=function(){return or(this.ptr)},Z.prototype.num_components=Z.prototype.num_components=function(){return zr(this.ptr)},Z.prototype.normalized=Z.prototype.normalized=function(){return!!Fe(this.ptr)},Z.prototype.byte_stride=Z.prototype.byte_stride=function(){return rt(this.ptr)},Z.prototype.byte_offset=Z.prototype.byte_offset=function(){return Tt(this.ptr)},Z.prototype.unique_id=Z.prototype.unique_id=function(){return Qt(this.ptr)},Z.prototype.__destroy__=Z.prototype.__destroy__=function(){En(this.ptr)},re.prototype=Object.create(A.prototype),re.prototype.constructor=re,re.prototype.__class__=re,re.__cache__={},j.PointCloud=re,re.prototype.num_attributes=re.prototype.num_attributes=function(){return ki(this.ptr)},re.prototype.num_points=re.prototype.num_points=function(){return Hi(this.ptr)},re.prototype.__destroy__=re.prototype.__destroy__=function(){$i(this.ptr)},de.prototype=Object.create(A.prototype),de.prototype.constructor=de,de.prototype.__class__=de,de.__cache__={},j.Mesh=de,de.prototype.num_faces=de.prototype.num_faces=function(){return so(this.ptr)},de.prototype.num_attributes=de.prototype.num_attributes=function(){return ji(this.ptr)},de.prototype.num_points=de.prototype.num_points=function(){return mo(this.ptr)},de.prototype.set_num_points=de.prototype.set_num_points=function(Q){var ne=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),en(ne,Q)},de.prototype.__destroy__=de.prototype.__destroy__=function(){Mo(this.ptr)},Ie.prototype=Object.create(A.prototype),Ie.prototype.constructor=Ie,Ie.prototype.__class__=Ie,Ie.__cache__={},j.Metadata=Ie,Ie.prototype.__destroy__=Ie.prototype.__destroy__=function(){ge(this.ptr)},Pe.prototype=Object.create(A.prototype),Pe.prototype.constructor=Pe,Pe.prototype.__class__=Pe,Pe.__cache__={},j.DracoInt8Array=Pe,Pe.prototype.GetValue=Pe.prototype.GetValue=function(Q){var ne=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),at(ne,Q)},Pe.prototype.size=Pe.prototype.size=function(){return Ne(this.ptr)},Pe.prototype.__destroy__=Pe.prototype.__destroy__=function(){ft(this.ptr)},we.prototype=Object.create(A.prototype),we.prototype.constructor=we,we.prototype.__class__=we,we.__cache__={},j.MetadataBuilder=we,we.prototype.AddStringEntry=we.prototype.AddStringEntry=function(Q,ne,ye){var Me=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne=ne&&typeof ne=="object"?ne.ptr:T(ne),ye=ye&&typeof ye=="object"?ye.ptr:T(ye),!!Bn(Me,Q,ne,ye)},we.prototype.AddIntEntry=we.prototype.AddIntEntry=function(Q,ne,ye){var Me=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne=ne&&typeof ne=="object"?ne.ptr:T(ne),ye&&typeof ye=="object"&&(ye=ye.ptr),!!mr(Me,Q,ne,ye)},we.prototype.AddIntEntryArray=we.prototype.AddIntEntryArray=function(Q,ne,ye,Me){var De=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne=ne&&typeof ne=="object"?ne.ptr:T(ne),typeof ye=="object"&&(ye=k(ye)),Me&&typeof Me=="object"&&(Me=Me.ptr),!!gr(De,Q,ne,ye,Me)},we.prototype.AddDoubleEntry=we.prototype.AddDoubleEntry=function(Q,ne,ye){var Me=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne=ne&&typeof ne=="object"?ne.ptr:T(ne),ye&&typeof ye=="object"&&(ye=ye.ptr),!!Gr(Me,Q,ne,ye)},we.prototype.__destroy__=we.prototype.__destroy__=function(){yr(this.ptr)},Te.prototype=Object.create(A.prototype),Te.prototype.constructor=Te,Te.prototype.__class__=Te,Te.__cache__={},j.PointCloudBuilder=Te,Te.prototype.AddFloatAttribute=Te.prototype.AddFloatAttribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=K(De)),ti(yt,Q,ne,ye,Me,De)},Te.prototype.AddInt8Attribute=Te.prototype.AddInt8Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=P(De)),Wi(yt,Q,ne,ye,Me,De)},Te.prototype.AddUInt8Attribute=Te.prototype.AddUInt8Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=P(De)),zi(yt,Q,ne,ye,Me,De)},Te.prototype.AddInt16Attribute=Te.prototype.AddInt16Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=I(De)),Zi(yt,Q,ne,ye,Me,De)},Te.prototype.AddUInt16Attribute=Te.prototype.AddUInt16Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=I(De)),Ue(yt,Q,ne,ye,Me,De)},Te.prototype.AddInt32Attribute=Te.prototype.AddInt32Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=k(De)),c(yt,Q,ne,ye,Me,De)},Te.prototype.AddUInt32Attribute=Te.prototype.AddUInt32Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=k(De)),Xe(yt,Q,ne,ye,Me,De)},Te.prototype.AddMetadata=Te.prototype.AddMetadata=function(Q,ne){var ye=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),!!et(ye,Q,ne)},Te.prototype.SetMetadataForAttribute=Te.prototype.SetMetadataForAttribute=function(Q,ne,ye){var Me=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),!!it(Me,Q,ne,ye)},Te.prototype.__destroy__=Te.prototype.__destroy__=function(){je(this.ptr)},Se.prototype=Object.create(A.prototype),Se.prototype.constructor=Se,Se.prototype.__class__=Se,Se.__cache__={},j.MeshBuilder=Se,Se.prototype.AddFacesToMesh=Se.prototype.AddFacesToMesh=function(Q,ne,ye){var Me=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),typeof ye=="object"&&(ye=k(ye)),!!Mt(Me,Q,ne,ye)},Se.prototype.AddFloatAttributeToMesh=Se.prototype.AddFloatAttributeToMesh=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=K(De)),xt(yt,Q,ne,ye,Me,De)},Se.prototype.AddInt32AttributeToMesh=Se.prototype.AddInt32AttributeToMesh=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=k(De)),Jt(yt,Q,ne,ye,Me,De)},Se.prototype.AddMetadataToMesh=Se.prototype.AddMetadataToMesh=function(Q,ne){var ye=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),!!hn(ye,Q,ne)},Se.prototype.AddFloatAttribute=Se.prototype.AddFloatAttribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=K(De)),tn(yt,Q,ne,ye,Me,De)},Se.prototype.AddInt8Attribute=Se.prototype.AddInt8Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=P(De)),vn(yt,Q,ne,ye,Me,De)},Se.prototype.AddUInt8Attribute=Se.prototype.AddUInt8Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=P(De)),pn(yt,Q,ne,ye,Me,De)},Se.prototype.AddInt16Attribute=Se.prototype.AddInt16Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=I(De)),Ot(yt,Q,ne,ye,Me,De)},Se.prototype.AddUInt16Attribute=Se.prototype.AddUInt16Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=I(De)),Gt(yt,Q,ne,ye,Me,De)},Se.prototype.AddInt32Attribute=Se.prototype.AddInt32Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=k(De)),rn(yt,Q,ne,ye,Me,De)},Se.prototype.AddUInt32Attribute=Se.prototype.AddUInt32Attribute=function(Q,ne,ye,Me,De){var yt=this.ptr;return Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof De=="object"&&(De=k(De)),fr(yt,Q,ne,ye,Me,De)},Se.prototype.AddMetadata=Se.prototype.AddMetadata=function(Q,ne){var ye=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),!!Ir(ye,Q,ne)},Se.prototype.SetMetadataForAttribute=Se.prototype.SetMetadataForAttribute=function(Q,ne,ye){var Me=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),!!Tn(Me,Q,ne,ye)},Se.prototype.__destroy__=Se.prototype.__destroy__=function(){Jr(this.ptr)},Oe.prototype=Object.create(A.prototype),Oe.prototype.constructor=Oe,Oe.prototype.__class__=Oe,Oe.__cache__={},j.Encoder=Oe,Oe.prototype.SetEncodingMethod=Oe.prototype.SetEncodingMethod=function(Q){var ne=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),kr(ne,Q)},Oe.prototype.SetAttributeQuantization=Oe.prototype.SetAttributeQuantization=function(Q,ne){var ye=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),si(ye,Q,ne)},Oe.prototype.SetAttributeExplicitQuantization=Oe.prototype.SetAttributeExplicitQuantization=function(Q,ne,ye,Me,De){var yt=this.ptr;Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),typeof Me=="object"&&(Me=K(Me)),De&&typeof De=="object"&&(De=De.ptr),ni(yt,Q,ne,ye,Me,De)},Oe.prototype.SetSpeedOptions=Oe.prototype.SetSpeedOptions=function(Q,ne){var ye=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),Di(ye,Q,ne)},Oe.prototype.SetTrackEncodedProperties=Oe.prototype.SetTrackEncodedProperties=function(Q){var ne=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),Ti(ne,Q)},Oe.prototype.EncodeMeshToDracoBuffer=Oe.prototype.EncodeMeshToDracoBuffer=function(Q,ne){var ye=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),Ri(ye,Q,ne)},Oe.prototype.EncodePointCloudToDracoBuffer=Oe.prototype.EncodePointCloudToDracoBuffer=function(Q,ne,ye){var Me=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),Ii(Me,Q,ne,ye)},Oe.prototype.GetNumberOfEncodedPoints=Oe.prototype.GetNumberOfEncodedPoints=function(){return Pi(this.ptr)},Oe.prototype.GetNumberOfEncodedFaces=Oe.prototype.GetNumberOfEncodedFaces=function(){return fi(this.ptr)},Oe.prototype.__destroy__=Oe.prototype.__destroy__=function(){di(this.ptr)},He.prototype=Object.create(A.prototype),He.prototype.constructor=He,He.prototype.__class__=He,He.__cache__={},j.ExpertEncoder=He,He.prototype.SetEncodingMethod=He.prototype.SetEncodingMethod=function(Q){var ne=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),mn(ne,Q)},He.prototype.SetAttributeQuantization=He.prototype.SetAttributeQuantization=function(Q,ne){var ye=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),Ln(ye,Q,ne)},He.prototype.SetAttributeExplicitQuantization=He.prototype.SetAttributeExplicitQuantization=function(Q,ne,ye,Me,De){var yt=this.ptr;Dt.prepare(),Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),ye&&typeof ye=="object"&&(ye=ye.ptr),typeof Me=="object"&&(Me=K(Me)),De&&typeof De=="object"&&(De=De.ptr),_t(yt,Q,ne,ye,Me,De)},He.prototype.SetSpeedOptions=He.prototype.SetSpeedOptions=function(Q,ne){var ye=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),cn(ye,Q,ne)},He.prototype.SetTrackEncodedProperties=He.prototype.SetTrackEncodedProperties=function(Q){var ne=this.ptr;Q&&typeof Q=="object"&&(Q=Q.ptr),Wt(ne,Q)},He.prototype.EncodeToDracoBuffer=He.prototype.EncodeToDracoBuffer=function(Q,ne){var ye=this.ptr;return Q&&typeof Q=="object"&&(Q=Q.ptr),ne&&typeof ne=="object"&&(ne=ne.ptr),Ke(ye,Q,ne)},He.prototype.GetNumberOfEncodedPoints=He.prototype.GetNumberOfEncodedPoints=function(){return pt(this.ptr)},He.prototype.GetNumberOfEncodedFaces=He.prototype.GetNumberOfEncodedFaces=function(){return Zn(this.ptr)},He.prototype.__destroy__=He.prototype.__destroy__=function(){mt(this.ptr)},function(){function Q(){j.INVALID=Rt(),j.POSITION=an(),j.NORMAL=Hr(),j.COLOR=Wr(),j.TEX_COORD=On(),j.GENERIC=Pr(),j.INVALID_GEOMETRY_TYPE=ai(),j.POINT_CLOUD=pi(),j.TRIANGULAR_MESH=wi(),j.MESH_SEQUENTIAL_ENCODING=Fr(),j.MESH_EDGEBREAKER_ENCODING=$r()}Et?Q():ot.unshift(Q)}(),typeof j.onModuleParsed=="function"&&j.onModuleParsed(),i.ready}}();o.exports=n})(Mv);var ad={},Iv={get exports(){return ad},set exports(o){ad=o}};(function(o,e){var t=t||{};t.scope={},t.arrayIteratorImpl=function(r){var i=0;return function(){return i<r.length?{done:!1,value:r[i++]}:{done:!0}}},t.arrayIterator=function(r){return{next:t.arrayIteratorImpl(r)}},t.makeIterator=function(r){var i=typeof Symbol<"u"&&Symbol.iterator&&r[Symbol.iterator];return i?i.call(r):t.arrayIterator(r)},t.ASSUME_ES5=!1,t.ASSUME_NO_NATIVE_MAP=!1,t.ASSUME_NO_NATIVE_SET=!1,t.SIMPLE_FROUND_POLYFILL=!1,t.ISOLATE_POLYFILLS=!1,t.FORCE_POLYFILL_PROMISE=!1,t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,t.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof vi=="object"&&vi];for(var i=0;i<r.length;++i){var s=r[i];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},t.global=t.getGlobal(vi),t.defineProperty=t.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,i,s){return r==Array.prototype||r==Object.prototype||(r[i]=s.value),r},t.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",t.TRUST_ES6_POLYFILLS=!t.ISOLATE_POLYFILLS||t.IS_SYMBOL_NATIVE,t.polyfills={},t.propertyToPolyfillSymbol={},t.POLYFILL_PREFIX="$jscp$",t.polyfill=function(r,i,s,a){i&&(t.ISOLATE_POLYFILLS?t.polyfillIsolated(r,i,s,a):t.polyfillUnisolated(r,i,s,a))},t.polyfillUnisolated=function(r,i,s,a){for(s=t.global,r=r.split("."),a=0;a<r.length-1;a++){var u=r[a];if(!(u in s))return;s=s[u]}r=r[r.length-1],a=s[r],i=i(a),i!=a&&i!=null&&t.defineProperty(s,r,{configurable:!0,writable:!0,value:i})},t.polyfillIsolated=function(r,i,s,a){var u=r.split(".");r=u.length===1,a=u[0],a=!r&&a in t.polyfills?t.polyfills:t.global;for(var f=0;f<u.length-1;f++){var l=u[f];if(!(l in a))return;a=a[l]}u=u[u.length-1],s=t.IS_SYMBOL_NATIVE&&s==="es6"?a[u]:null,i=i(s),i!=null&&(r?t.defineProperty(t.polyfills,u,{configurable:!0,writable:!0,value:i}):i!==s&&(t.propertyToPolyfillSymbol[u]===void 0&&(s=1e9*Math.random()>>>0,t.propertyToPolyfillSymbol[u]=t.IS_SYMBOL_NATIVE?t.global.Symbol(u):t.POLYFILL_PREFIX+s+"$"+u),t.defineProperty(a,t.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:i})))},t.polyfill("Promise",function(r){function i(){this.batch_=null}function s(l){return l instanceof u?l:new u(function(p,d){p(l)})}if(r&&(!(t.FORCE_POLYFILL_PROMISE||t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&typeof t.global.PromiseRejectionEvent>"u")||!t.global.Promise||t.global.Promise.toString().indexOf("[native code]")===-1))return r;i.prototype.asyncExecute=function(l){if(this.batch_==null){this.batch_=[];var p=this;this.asyncExecuteFunction(function(){p.executeBatch_()})}this.batch_.push(l)};var a=t.global.setTimeout;i.prototype.asyncExecuteFunction=function(l){a(l,0)},i.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var l=this.batch_;this.batch_=[];for(var p=0;p<l.length;++p){var d=l[p];l[p]=null;try{d()}catch(_){this.asyncThrow_(_)}}}this.batch_=null},i.prototype.asyncThrow_=function(l){this.asyncExecuteFunction(function(){throw l})};var u=function(l){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var p=this.createResolveAndReject_();try{l(p.resolve,p.reject)}catch(d){p.reject(d)}};u.prototype.createResolveAndReject_=function(){function l(_){return function(A){d||(d=!0,_.call(p,A))}}var p=this,d=!1;return{resolve:l(this.resolveTo_),reject:l(this.reject_)}},u.prototype.resolveTo_=function(l){if(l===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(l instanceof u)this.settleSameAsPromise_(l);else{e:switch(typeof l){case"object":var p=l!=null;break e;case"function":p=!0;break e;default:p=!1}p?this.resolveToNonPromiseObj_(l):this.fulfill_(l)}},u.prototype.resolveToNonPromiseObj_=function(l){var p=void 0;try{p=l.then}catch(d){this.reject_(d);return}typeof p=="function"?this.settleSameAsThenable_(p,l):this.fulfill_(l)},u.prototype.reject_=function(l){this.settle_(2,l)},u.prototype.fulfill_=function(l){this.settle_(1,l)},u.prototype.settle_=function(l,p){if(this.state_!=0)throw Error("Cannot settle("+l+", "+p+"): Promise already settled in state"+this.state_);this.state_=l,this.result_=p,this.state_===2&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},u.prototype.scheduleUnhandledRejectionCheck_=function(){var l=this;a(function(){if(l.notifyUnhandledRejection_()){var p=t.global.console;typeof p<"u"&&p.error(l.result_)}},1)},u.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var l=t.global.CustomEvent,p=t.global.Event,d=t.global.dispatchEvent;return typeof d>"u"?!0:(typeof l=="function"?l=new l("unhandledrejection",{cancelable:!0}):typeof p=="function"?l=new p("unhandledrejection",{cancelable:!0}):(l=t.global.document.createEvent("CustomEvent"),l.initCustomEvent("unhandledrejection",!1,!0,l)),l.promise=this,l.reason=this.result_,d(l))},u.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var l=0;l<this.onSettledCallbacks_.length;++l)f.asyncExecute(this.onSettledCallbacks_[l]);this.onSettledCallbacks_=null}};var f=new i;return u.prototype.settleSameAsPromise_=function(l){var p=this.createResolveAndReject_();l.callWhenSettled_(p.resolve,p.reject)},u.prototype.settleSameAsThenable_=function(l,p){var d=this.createResolveAndReject_();try{l.call(p,d.resolve,d.reject)}catch(_){d.reject(_)}},u.prototype.then=function(l,p){function d(v,T){return typeof v=="function"?function(P){try{_(v(P))}catch(I){A(I)}}:T}var _,A,E=new u(function(v,T){_=v,A=T});return this.callWhenSettled_(d(l,_),d(p,A)),E},u.prototype.catch=function(l){return this.then(void 0,l)},u.prototype.callWhenSettled_=function(l,p){function d(){switch(_.state_){case 1:l(_.result_);break;case 2:p(_.result_);break;default:throw Error("Unexpected state: "+_.state_)}}var _=this;this.onSettledCallbacks_==null?f.asyncExecute(d):this.onSettledCallbacks_.push(d),this.isRejectionHandled_=!0},u.resolve=s,u.reject=function(l){return new u(function(p,d){d(l)})},u.race=function(l){return new u(function(p,d){for(var _=t.makeIterator(l),A=_.next();!A.done;A=_.next())s(A.value).callWhenSettled_(p,d)})},u.all=function(l){var p=t.makeIterator(l),d=p.next();return d.done?s([]):new u(function(_,A){function E(P){return function(I){v[P]=I,T--,T==0&&_(v)}}var v=[],T=0;do v.push(void 0),T++,s(d.value).callWhenSettled_(E(v.length-1),A),d=p.next();while(!d.done)})},u},"es6","es3"),t.owns=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.assign=t.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(r,i){for(var s=1;s<arguments.length;s++){var a=arguments[s];if(a)for(var u in a)t.owns(a,u)&&(r[u]=a[u])}return r},t.polyfill("Object.assign",function(r){return r||t.assign},"es6","es3"),t.checkStringArgs=function(r,i,s){if(r==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return r+""},t.polyfill("String.prototype.startsWith",function(r){return r||function(i,s){var a=t.checkStringArgs(this,i,"startsWith");i+="";var u=a.length,f=i.length;s=Math.max(0,Math.min(s|0,a.length));for(var l=0;l<f&&s<u;)if(a[s++]!=i[l++])return!1;return l>=f}},"es6","es3"),t.polyfill("Array.prototype.copyWithin",function(r){function i(s){return s=Number(s),s===1/0||s===-1/0?s:s|0}return r||function(s,a,u){var f=this.length;if(s=i(s),a=i(a),u=u===void 0?f:i(u),s=0>s?Math.max(f+s,0):Math.min(s,f),a=0>a?Math.max(f+a,0):Math.min(a,f),u=0>u?Math.max(f+u,0):Math.min(u,f),s<a)for(;a<u;)a in this?this[s++]=this[a++]:(delete this[s++],a++);else for(u=Math.min(u,f+a-s),s+=u-a;u>a;)--u in this?this[--s]=this[u]:delete this[--s];return this}},"es6","es3"),t.typedArrayCopyWithin=function(r){return r||Array.prototype.copyWithin},t.polyfill("Int8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8ClampedArray.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float64Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5");var n=function(){var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){function s(D){return L.locateFile?L.locateFile(D,Cr):Cr+D}function a(D,J,ue){var be=J+ue;for(ue=J;D[ue]&&!(ue>=be);)++ue;if(16<ue-J&&D.buffer&&wt)return wt.decode(D.subarray(J,ue));for(be="";J<ue;){var Re=D[J++];if(Re&128){var Ze=D[J++]&63;if((Re&224)==192)be+=String.fromCharCode((Re&31)<<6|Ze);else{var Nt=D[J++]&63;Re=(Re&240)==224?(Re&15)<<12|Ze<<6|Nt:(Re&7)<<18|Ze<<12|Nt<<6|D[J++]&63,65536>Re?be+=String.fromCharCode(Re):(Re-=65536,be+=String.fromCharCode(55296|Re>>10,56320|Re&1023))}}else be+=String.fromCharCode(Re)}return be}function u(D,J){return D?a(Lt,D,J):""}function f(){var D=fe.buffer;L.HEAP8=Et=new Int8Array(D),L.HEAP16=new Int16Array(D),L.HEAP32=bn=new Int32Array(D),L.HEAPU8=Lt=new Uint8Array(D),L.HEAPU16=new Uint16Array(D),L.HEAPU32=Ee=new Uint32Array(D),L.HEAPF32=new Float32Array(D),L.HEAPF64=new Float64Array(D)}function l(D){throw L.onAbort&&L.onAbort(D),D="Aborted("+D+")",ir(D),ot=!0,D=new WebAssembly.RuntimeError(D+". Build with -sASSERTIONS for more info."),In(D),D}function p(D){try{if(D==Fn&&Ae)return new Uint8Array(Ae);if(qr)return qr(D);throw"both async and sync fetching of the wasm failed"}catch(J){l(J)}}function d(){if(!Ae&&(dn||Yt)){if(typeof fetch=="function"&&!Fn.startsWith("file://"))return fetch(Fn,{credentials:"same-origin"}).then(function(D){if(!D.ok)throw"failed to load wasm binary file at '"+Fn+"'";return D.arrayBuffer()}).catch(function(){return p(Fn)});if(xn)return new Promise(function(D,J){xn(Fn,function(ue){D(new Uint8Array(ue))},J)})}return Promise.resolve().then(function(){return p(Fn)})}function _(D){for(;0<D.length;)D.shift()(L)}function A(D){this.excPtr=D,this.ptr=D-24,this.set_type=function(J){Ee[this.ptr+4>>2]=J},this.get_type=function(){return Ee[this.ptr+4>>2]},this.set_destructor=function(J){Ee[this.ptr+8>>2]=J},this.get_destructor=function(){return Ee[this.ptr+8>>2]},this.set_refcount=function(J){bn[this.ptr>>2]=J},this.set_caught=function(J){Et[this.ptr+12>>0]=J?1:0},this.get_caught=function(){return Et[this.ptr+12>>0]!=0},this.set_rethrown=function(J){Et[this.ptr+13>>0]=J?1:0},this.get_rethrown=function(){return Et[this.ptr+13>>0]!=0},this.init=function(J,ue){this.set_adjusted_ptr(0),this.set_type(J),this.set_destructor(ue),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){bn[this.ptr>>2]+=1},this.release_ref=function(){var J=bn[this.ptr>>2];return bn[this.ptr>>2]=J-1,J===1},this.set_adjusted_ptr=function(J){Ee[this.ptr+16>>2]=J},this.get_adjusted_ptr=function(){return Ee[this.ptr+16>>2]},this.get_exception_ptr=function(){if(b(this.get_type()))return Ee[this.excPtr>>2];var J=this.get_adjusted_ptr();return J!==0?J:this.excPtr}}function E(){function D(){if(!H&&(H=!0,L.calledRun=!0,!ot)){if(St=!0,_(jt),nt(L),L.onRuntimeInitialized&&L.onRuntimeInitialized(),L.postRun)for(typeof L.postRun=="function"&&(L.postRun=[L.postRun]);L.postRun.length;)Zt.unshift(L.postRun.shift());_(Zt)}}if(!(0<Ut)){if(L.preRun)for(typeof L.preRun=="function"&&(L.preRun=[L.preRun]);L.preRun.length;)Ve.unshift(L.preRun.shift());_(Ve),0<Ut||(L.setStatus?(L.setStatus("Running..."),setTimeout(function(){setTimeout(function(){L.setStatus("")},1),D()},1)):D())}}function v(){}function T(D){return(D||v).__cache__}function P(D,J){var ue=T(J),be=ue[D];return be||(be=Object.create((J||v).prototype),be.ptr=D,ue[D]=be)}function I(D){if(typeof D=="string"){for(var J=0,ue=0;ue<D.length;++ue){var be=D.charCodeAt(ue);127>=be?J++:2047>=be?J+=2:55296<=be&&57343>=be?(J+=4,++ue):J+=3}if(J=Array(J+1),ue=0,be=J.length,0<be){be=ue+be-1;for(var Re=0;Re<D.length;++Re){var Ze=D.charCodeAt(Re);if(55296<=Ze&&57343>=Ze){var Nt=D.charCodeAt(++Re);Ze=65536+((Ze&1023)<<10)|Nt&1023}if(127>=Ze){if(ue>=be)break;J[ue++]=Ze}else{if(2047>=Ze){if(ue+1>=be)break;J[ue++]=192|Ze>>6}else{if(65535>=Ze){if(ue+2>=be)break;J[ue++]=224|Ze>>12}else{if(ue+3>=be)break;J[ue++]=240|Ze>>18,J[ue++]=128|Ze>>12&63}J[ue++]=128|Ze>>6&63}J[ue++]=128|Ze&63}}J[ue]=0}return D=ie.alloc(J,Et),ie.copy(J,Et,D),D}return D}function k(D){if(typeof D=="object"){var J=ie.alloc(D,Et);return ie.copy(D,Et,J),J}return D}function K(){throw"cannot construct a VoidPtr, no constructor in IDL"}function ee(){this.ptr=rt(),T(ee)[this.ptr]=this}function me(){this.ptr=En(),T(me)[this.ptr]=this}function Z(){this.ptr=Hi(),T(Z)[this.ptr]=this}function re(){this.ptr=li(),T(re)[this.ptr]=this}function de(){this.ptr=ft(),T(de)[this.ptr]=this}function Ie(){this.ptr=yr(),T(Ie)[this.ptr]=this}function Pe(){this.ptr=zi(),T(Pe)[this.ptr]=this}function we(){this.ptr=Xe(),T(we)[this.ptr]=this}function Te(){this.ptr=Mt(),T(Te)[this.ptr]=this}function Se(){throw"cannot construct a Status, no constructor in IDL"}function Oe(){this.ptr=pn(),T(Oe)[this.ptr]=this}function He(){this.ptr=fr(),T(He)[this.ptr]=this}function j(){this.ptr=Sr(),T(j)[this.ptr]=this}function ht(){this.ptr=Di(),T(ht)[this.ptr]=this}function Qe(){this.ptr=Pi(),T(Qe)[this.ptr]=this}function Je(){this.ptr=mn(),T(Je)[this.ptr]=this}function ze(){this.ptr=Wt(),T(ze)[this.ptr]=this}function ut(){this.ptr=mt(),T(ut)[this.ptr]=this}function ke(){this.ptr=wi(),T(ke)[this.ptr]=this}i=i===void 0?{}:i;var L=typeof i<"u"?i:{},nt,In;L.ready=new Promise(function(D,J){nt=D,In=J});var Xt=!1,Pn=!1;L.onRuntimeInitialized=function(){Xt=!0,Pn&&typeof L.onModuleLoaded=="function"&&L.onModuleLoaded(L)},L.onModuleParsed=function(){Pn=!0,Xt&&typeof L.onModuleLoaded=="function"&&L.onModuleLoaded(L)},L.isVersionSupported=function(D){return typeof D!="string"?!1:(D=D.split("."),2>D.length||3<D.length?!1:D[0]==1&&0<=D[1]&&5>=D[1]?!0:!(D[0]!=0||10<D[1]))};var vt=Object.assign({},L),dn=typeof window=="object",Yt=typeof importScripts=="function",yn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Cr="";if(yn){var Qr=gi,Ai=gi;Cr=Yt?Ai.dirname(Cr)+"/":__dirname+"/";var oi=function(D,J){return D=D.startsWith("file://")?new URL(D):Ai.normalize(D),Qr.readFileSync(D,J?void 0:"utf8")},qr=function(D){return D=oi(D,!0),D.buffer||(D=new Uint8Array(D)),D},xn=function(D,J,ue){D=D.startsWith("file://")?new URL(D):Ai.normalize(D),Qr.readFile(D,function(be,Re){be?ue(be):J(Re.buffer)})};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),L.inspect=function(){return"[Emscripten Module object]"}}else(dn||Yt)&&(Yt?Cr=self.location.href:typeof document<"u"&&document.currentScript&&(Cr=document.currentScript.src),r&&(Cr=r),Cr=Cr.indexOf("blob:")!==0?Cr.substr(0,Cr.replace(/[?#].*/,"").lastIndexOf("/")+1):"",oi=function(D){var J=new XMLHttpRequest;return J.open("GET",D,!1),J.send(null),J.responseText},Yt&&(qr=function(D){var J=new XMLHttpRequest;return J.open("GET",D,!1),J.responseType="arraybuffer",J.send(null),new Uint8Array(J.response)}),xn=function(D,J,ue){var be=new XMLHttpRequest;be.open("GET",D,!0),be.responseType="arraybuffer",be.onload=function(){be.status==200||be.status==0&&be.response?J(be.response):ue()},be.onerror=ue,be.send(null)});var ei=L.print||console.log.bind(console),ir=L.printErr||console.warn.bind(console);Object.assign(L,vt),vt=null;var Ae;L.wasmBinary&&(Ae=L.wasmBinary),typeof WebAssembly!="object"&&l("no native wasm support detected");var fe,ot=!1,wt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Et,Lt,bn,Ee,Ve=[],jt=[],Zt=[],St=!1,Ut=0,sn=null,Fn="draco_decoder.wasm";Fn.startsWith("data:application/octet-stream;base64,")||(Fn=s(Fn));var or=[null,[],[]],zr={b:function(D,J,ue){throw new A(D).init(J,ue),D},a:function(){l("")},g:function(D,J,ue){Lt.copyWithin(D,J,J+ue)},e:function(D){var J=Lt.length;if(D>>>=0,2147483648<D)return!1;for(var ue=1;4>=ue;ue*=2){var be=J*(1+.2/ue);be=Math.min(be,D+100663296);var Re=Math;be=Math.max(D,be),Re=Re.min.call(Re,2147483648,be+(65536-be%65536)%65536);e:{be=fe.buffer;try{fe.grow(Re-be.byteLength+65535>>>16),f();var Ze=1;break e}catch{}Ze=void 0}if(Ze)return!0}return!1},f:function(D){return 52},d:function(D,J,ue,be,Re){return 70},c:function(D,J,ue,be){for(var Re=0,Ze=0;Ze<ue;Ze++){var Nt=Ee[J>>2],qt=Ee[J+4>>2];J+=8;for(var $t=0;$t<qt;$t++){var At=Lt[Nt+$t],Ht=or[D];At===0||At===10?((D===1?ei:ir)(a(Ht,0)),Ht.length=0):Ht.push(At)}Re+=qt}return Ee[be>>2]=Re,0}};(function(){function D(Re,Ze){L.asm=Re.exports,fe=L.asm.h,f(),jt.unshift(L.asm.i),Ut--,L.monitorRunDependencies&&L.monitorRunDependencies(Ut),Ut==0&&sn&&(Re=sn,sn=null,Re())}function J(Re){D(Re.instance)}function ue(Re){return d().then(function(Ze){return WebAssembly.instantiate(Ze,be)}).then(function(Ze){return Ze}).then(Re,function(Ze){ir("failed to asynchronously prepare wasm: "+Ze),l(Ze)})}var be={a:zr};if(Ut++,L.monitorRunDependencies&&L.monitorRunDependencies(Ut),L.instantiateWasm)try{return L.instantiateWasm(be,D)}catch(Re){ir("Module.instantiateWasm callback failed with error: "+Re),In(Re)}return function(){return Ae||typeof WebAssembly.instantiateStreaming!="function"||Fn.startsWith("data:application/octet-stream;base64,")||Fn.startsWith("file://")||yn||typeof fetch!="function"?ue(J):fetch(Fn,{credentials:"same-origin"}).then(function(Re){return WebAssembly.instantiateStreaming(Re,be).then(J,function(Ze){return ir("wasm streaming compile failed: "+Ze),ir("falling back to ArrayBuffer instantiation"),ue(J)})})}().catch(In),{}})();var Fe=L._emscripten_bind_VoidPtr___destroy___0=function(){return(Fe=L._emscripten_bind_VoidPtr___destroy___0=L.asm.k).apply(null,arguments)},rt=L._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(rt=L._emscripten_bind_DecoderBuffer_DecoderBuffer_0=L.asm.l).apply(null,arguments)},Tt=L._emscripten_bind_DecoderBuffer_Init_2=function(){return(Tt=L._emscripten_bind_DecoderBuffer_Init_2=L.asm.m).apply(null,arguments)},Qt=L._emscripten_bind_DecoderBuffer___destroy___0=function(){return(Qt=L._emscripten_bind_DecoderBuffer___destroy___0=L.asm.n).apply(null,arguments)},En=L._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(En=L._emscripten_bind_AttributeTransformData_AttributeTransformData_0=L.asm.o).apply(null,arguments)},Kr=L._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(Kr=L._emscripten_bind_AttributeTransformData_transform_type_0=L.asm.p).apply(null,arguments)},ki=L._emscripten_bind_AttributeTransformData___destroy___0=function(){return(ki=L._emscripten_bind_AttributeTransformData___destroy___0=L.asm.q).apply(null,arguments)},Hi=L._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(Hi=L._emscripten_bind_GeometryAttribute_GeometryAttribute_0=L.asm.r).apply(null,arguments)},$i=L._emscripten_bind_GeometryAttribute___destroy___0=function(){return($i=L._emscripten_bind_GeometryAttribute___destroy___0=L.asm.s).apply(null,arguments)},li=L._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(li=L._emscripten_bind_PointAttribute_PointAttribute_0=L.asm.t).apply(null,arguments)},so=L._emscripten_bind_PointAttribute_size_0=function(){return(so=L._emscripten_bind_PointAttribute_size_0=L.asm.u).apply(null,arguments)},ji=L._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(ji=L._emscripten_bind_PointAttribute_GetAttributeTransformData_0=L.asm.v).apply(null,arguments)},mo=L._emscripten_bind_PointAttribute_attribute_type_0=function(){return(mo=L._emscripten_bind_PointAttribute_attribute_type_0=L.asm.w).apply(null,arguments)},en=L._emscripten_bind_PointAttribute_data_type_0=function(){return(en=L._emscripten_bind_PointAttribute_data_type_0=L.asm.x).apply(null,arguments)},Mo=L._emscripten_bind_PointAttribute_num_components_0=function(){return(Mo=L._emscripten_bind_PointAttribute_num_components_0=L.asm.y).apply(null,arguments)},no=L._emscripten_bind_PointAttribute_normalized_0=function(){return(no=L._emscripten_bind_PointAttribute_normalized_0=L.asm.z).apply(null,arguments)},ge=L._emscripten_bind_PointAttribute_byte_stride_0=function(){return(ge=L._emscripten_bind_PointAttribute_byte_stride_0=L.asm.A).apply(null,arguments)},qe=L._emscripten_bind_PointAttribute_byte_offset_0=function(){return(qe=L._emscripten_bind_PointAttribute_byte_offset_0=L.asm.B).apply(null,arguments)},at=L._emscripten_bind_PointAttribute_unique_id_0=function(){return(at=L._emscripten_bind_PointAttribute_unique_id_0=L.asm.C).apply(null,arguments)},Ne=L._emscripten_bind_PointAttribute___destroy___0=function(){return(Ne=L._emscripten_bind_PointAttribute___destroy___0=L.asm.D).apply(null,arguments)},ft=L._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(ft=L._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=L.asm.E).apply(null,arguments)},Mn=L._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(Mn=L._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=L.asm.F).apply(null,arguments)},Bn=L._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(Bn=L._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=L.asm.G).apply(null,arguments)},mr=L._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(mr=L._emscripten_bind_AttributeQuantizationTransform_min_value_1=L.asm.H).apply(null,arguments)},gr=L._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(gr=L._emscripten_bind_AttributeQuantizationTransform_range_0=L.asm.I).apply(null,arguments)},Gr=L._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(Gr=L._emscripten_bind_AttributeQuantizationTransform___destroy___0=L.asm.J).apply(null,arguments)},yr=L._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(yr=L._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=L.asm.K).apply(null,arguments)},_r=L._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(_r=L._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=L.asm.L).apply(null,arguments)},ti=L._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(ti=L._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=L.asm.M).apply(null,arguments)},Wi=L._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(Wi=L._emscripten_bind_AttributeOctahedronTransform___destroy___0=L.asm.N).apply(null,arguments)},zi=L._emscripten_bind_PointCloud_PointCloud_0=function(){return(zi=L._emscripten_bind_PointCloud_PointCloud_0=L.asm.O).apply(null,arguments)},Zi=L._emscripten_bind_PointCloud_num_attributes_0=function(){return(Zi=L._emscripten_bind_PointCloud_num_attributes_0=L.asm.P).apply(null,arguments)},Ue=L._emscripten_bind_PointCloud_num_points_0=function(){return(Ue=L._emscripten_bind_PointCloud_num_points_0=L.asm.Q).apply(null,arguments)},c=L._emscripten_bind_PointCloud___destroy___0=function(){return(c=L._emscripten_bind_PointCloud___destroy___0=L.asm.R).apply(null,arguments)},Xe=L._emscripten_bind_Mesh_Mesh_0=function(){return(Xe=L._emscripten_bind_Mesh_Mesh_0=L.asm.S).apply(null,arguments)},et=L._emscripten_bind_Mesh_num_faces_0=function(){return(et=L._emscripten_bind_Mesh_num_faces_0=L.asm.T).apply(null,arguments)},it=L._emscripten_bind_Mesh_num_attributes_0=function(){return(it=L._emscripten_bind_Mesh_num_attributes_0=L.asm.U).apply(null,arguments)},je=L._emscripten_bind_Mesh_num_points_0=function(){return(je=L._emscripten_bind_Mesh_num_points_0=L.asm.V).apply(null,arguments)},Kt=L._emscripten_bind_Mesh___destroy___0=function(){return(Kt=L._emscripten_bind_Mesh___destroy___0=L.asm.W).apply(null,arguments)},Mt=L._emscripten_bind_Metadata_Metadata_0=function(){return(Mt=L._emscripten_bind_Metadata_Metadata_0=L.asm.X).apply(null,arguments)},xt=L._emscripten_bind_Metadata___destroy___0=function(){return(xt=L._emscripten_bind_Metadata___destroy___0=L.asm.Y).apply(null,arguments)},Jt=L._emscripten_bind_Status_code_0=function(){return(Jt=L._emscripten_bind_Status_code_0=L.asm.Z).apply(null,arguments)},hn=L._emscripten_bind_Status_ok_0=function(){return(hn=L._emscripten_bind_Status_ok_0=L.asm._).apply(null,arguments)},tn=L._emscripten_bind_Status_error_msg_0=function(){return(tn=L._emscripten_bind_Status_error_msg_0=L.asm.$).apply(null,arguments)},vn=L._emscripten_bind_Status___destroy___0=function(){return(vn=L._emscripten_bind_Status___destroy___0=L.asm.aa).apply(null,arguments)},pn=L._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(pn=L._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=L.asm.ba).apply(null,arguments)},Ot=L._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(Ot=L._emscripten_bind_DracoFloat32Array_GetValue_1=L.asm.ca).apply(null,arguments)},Gt=L._emscripten_bind_DracoFloat32Array_size_0=function(){return(Gt=L._emscripten_bind_DracoFloat32Array_size_0=L.asm.da).apply(null,arguments)},rn=L._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(rn=L._emscripten_bind_DracoFloat32Array___destroy___0=L.asm.ea).apply(null,arguments)},fr=L._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(fr=L._emscripten_bind_DracoInt8Array_DracoInt8Array_0=L.asm.fa).apply(null,arguments)},Ir=L._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(Ir=L._emscripten_bind_DracoInt8Array_GetValue_1=L.asm.ga).apply(null,arguments)},Tn=L._emscripten_bind_DracoInt8Array_size_0=function(){return(Tn=L._emscripten_bind_DracoInt8Array_size_0=L.asm.ha).apply(null,arguments)},Jr=L._emscripten_bind_DracoInt8Array___destroy___0=function(){return(Jr=L._emscripten_bind_DracoInt8Array___destroy___0=L.asm.ia).apply(null,arguments)},Sr=L._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(Sr=L._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=L.asm.ja).apply(null,arguments)},kr=L._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(kr=L._emscripten_bind_DracoUInt8Array_GetValue_1=L.asm.ka).apply(null,arguments)},si=L._emscripten_bind_DracoUInt8Array_size_0=function(){return(si=L._emscripten_bind_DracoUInt8Array_size_0=L.asm.la).apply(null,arguments)},ni=L._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(ni=L._emscripten_bind_DracoUInt8Array___destroy___0=L.asm.ma).apply(null,arguments)},Di=L._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(Di=L._emscripten_bind_DracoInt16Array_DracoInt16Array_0=L.asm.na).apply(null,arguments)},Ti=L._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(Ti=L._emscripten_bind_DracoInt16Array_GetValue_1=L.asm.oa).apply(null,arguments)},Ri=L._emscripten_bind_DracoInt16Array_size_0=function(){return(Ri=L._emscripten_bind_DracoInt16Array_size_0=L.asm.pa).apply(null,arguments)},Ii=L._emscripten_bind_DracoInt16Array___destroy___0=function(){return(Ii=L._emscripten_bind_DracoInt16Array___destroy___0=L.asm.qa).apply(null,arguments)},Pi=L._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(Pi=L._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=L.asm.ra).apply(null,arguments)},fi=L._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(fi=L._emscripten_bind_DracoUInt16Array_GetValue_1=L.asm.sa).apply(null,arguments)},di=L._emscripten_bind_DracoUInt16Array_size_0=function(){return(di=L._emscripten_bind_DracoUInt16Array_size_0=L.asm.ta).apply(null,arguments)},hi=L._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(hi=L._emscripten_bind_DracoUInt16Array___destroy___0=L.asm.ua).apply(null,arguments)},mn=L._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(mn=L._emscripten_bind_DracoInt32Array_DracoInt32Array_0=L.asm.va).apply(null,arguments)},Ln=L._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(Ln=L._emscripten_bind_DracoInt32Array_GetValue_1=L.asm.wa).apply(null,arguments)},_t=L._emscripten_bind_DracoInt32Array_size_0=function(){return(_t=L._emscripten_bind_DracoInt32Array_size_0=L.asm.xa).apply(null,arguments)},cn=L._emscripten_bind_DracoInt32Array___destroy___0=function(){return(cn=L._emscripten_bind_DracoInt32Array___destroy___0=L.asm.ya).apply(null,arguments)},Wt=L._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(Wt=L._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=L.asm.za).apply(null,arguments)},Ke=L._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(Ke=L._emscripten_bind_DracoUInt32Array_GetValue_1=L.asm.Aa).apply(null,arguments)},pt=L._emscripten_bind_DracoUInt32Array_size_0=function(){return(pt=L._emscripten_bind_DracoUInt32Array_size_0=L.asm.Ba).apply(null,arguments)},Zn=L._emscripten_bind_DracoUInt32Array___destroy___0=function(){return(Zn=L._emscripten_bind_DracoUInt32Array___destroy___0=L.asm.Ca).apply(null,arguments)},mt=L._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(mt=L._emscripten_bind_MetadataQuerier_MetadataQuerier_0=L.asm.Da).apply(null,arguments)},Rt=L._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(Rt=L._emscripten_bind_MetadataQuerier_HasEntry_2=L.asm.Ea).apply(null,arguments)},an=L._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(an=L._emscripten_bind_MetadataQuerier_GetIntEntry_2=L.asm.Fa).apply(null,arguments)},Hr=L._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Hr=L._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=L.asm.Ga).apply(null,arguments)},Wr=L._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(Wr=L._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=L.asm.Ha).apply(null,arguments)},On=L._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(On=L._emscripten_bind_MetadataQuerier_GetStringEntry_2=L.asm.Ia).apply(null,arguments)},Pr=L._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(Pr=L._emscripten_bind_MetadataQuerier_NumEntries_1=L.asm.Ja).apply(null,arguments)},ai=L._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(ai=L._emscripten_bind_MetadataQuerier_GetEntryName_2=L.asm.Ka).apply(null,arguments)},pi=L._emscripten_bind_MetadataQuerier___destroy___0=function(){return(pi=L._emscripten_bind_MetadataQuerier___destroy___0=L.asm.La).apply(null,arguments)},wi=L._emscripten_bind_Decoder_Decoder_0=function(){return(wi=L._emscripten_bind_Decoder_Decoder_0=L.asm.Ma).apply(null,arguments)},Fr=L._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(Fr=L._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=L.asm.Na).apply(null,arguments)},$r=L._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return($r=L._emscripten_bind_Decoder_DecodeArrayToMesh_3=L.asm.Oa).apply(null,arguments)},Dn=L._emscripten_bind_Decoder_GetAttributeId_2=function(){return(Dn=L._emscripten_bind_Decoder_GetAttributeId_2=L.asm.Pa).apply(null,arguments)},sr=L._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return(sr=L._emscripten_bind_Decoder_GetAttributeIdByName_2=L.asm.Qa).apply(null,arguments)},Dt=L._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(Dt=L._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=L.asm.Ra).apply(null,arguments)},Q=L._emscripten_bind_Decoder_GetAttribute_2=function(){return(Q=L._emscripten_bind_Decoder_GetAttribute_2=L.asm.Sa).apply(null,arguments)},ne=L._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return(ne=L._emscripten_bind_Decoder_GetAttributeByUniqueId_2=L.asm.Ta).apply(null,arguments)},ye=L._emscripten_bind_Decoder_GetMetadata_1=function(){return(ye=L._emscripten_bind_Decoder_GetMetadata_1=L.asm.Ua).apply(null,arguments)},Me=L._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return(Me=L._emscripten_bind_Decoder_GetAttributeMetadata_2=L.asm.Va).apply(null,arguments)},De=L._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(De=L._emscripten_bind_Decoder_GetFaceFromMesh_3=L.asm.Wa).apply(null,arguments)},yt=L._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(yt=L._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=L.asm.Xa).apply(null,arguments)},Xr=L._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(Xr=L._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=L.asm.Ya).apply(null,arguments)},wn=L._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(wn=L._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=L.asm.Za).apply(null,arguments)},Nn=L._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(Nn=L._emscripten_bind_Decoder_GetAttributeFloat_3=L.asm._a).apply(null,arguments)},dr=L._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return(dr=L._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=L.asm.$a).apply(null,arguments)},Wn=L._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(Wn=L._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=L.asm.ab).apply(null,arguments)},ri=L._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(ri=L._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=L.asm.bb).apply(null,arguments)},cr=L._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(cr=L._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=L.asm.cb).apply(null,arguments)},Br=L._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(Br=L._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=L.asm.db).apply(null,arguments)},Rr=L._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(Rr=L._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=L.asm.eb).apply(null,arguments)},br=L._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(br=L._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=L.asm.fb).apply(null,arguments)},hr=L._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(hr=L._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=L.asm.gb).apply(null,arguments)},lr=L._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(lr=L._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=L.asm.hb).apply(null,arguments)},Vt=L._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(Vt=L._emscripten_bind_Decoder_SkipAttributeTransform_1=L.asm.ib).apply(null,arguments)},ln=L._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(ln=L._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=L.asm.jb).apply(null,arguments)},Un=L._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(Un=L._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=L.asm.kb).apply(null,arguments)},_n=L._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(_n=L._emscripten_bind_Decoder_DecodeBufferToMesh_2=L.asm.lb).apply(null,arguments)},It=L._emscripten_bind_Decoder___destroy___0=function(){return(It=L._emscripten_bind_Decoder___destroy___0=L.asm.mb).apply(null,arguments)},Jn=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(Jn=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=L.asm.nb).apply(null,arguments)},vr=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(vr=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=L.asm.ob).apply(null,arguments)},Sn=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(Sn=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=L.asm.pb).apply(null,arguments)},qn=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(qn=L._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=L.asm.qb).apply(null,arguments)},nr=L._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(nr=L._emscripten_enum_draco_GeometryAttribute_Type_INVALID=L.asm.rb).apply(null,arguments)},Bt=L._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(Bt=L._emscripten_enum_draco_GeometryAttribute_Type_POSITION=L.asm.sb).apply(null,arguments)},Vn=L._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(Vn=L._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=L.asm.tb).apply(null,arguments)},gn=L._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(gn=L._emscripten_enum_draco_GeometryAttribute_Type_COLOR=L.asm.ub).apply(null,arguments)},Rn=L._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Rn=L._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=L.asm.vb).apply(null,arguments)},Gn=L._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Gn=L._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=L.asm.wb).apply(null,arguments)},rr=L._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(rr=L._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=L.asm.xb).apply(null,arguments)},xr=L._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(xr=L._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=L.asm.yb).apply(null,arguments)},fn=L._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(fn=L._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=L.asm.zb).apply(null,arguments)},Xn=L._emscripten_enum_draco_DataType_DT_INVALID=function(){return(Xn=L._emscripten_enum_draco_DataType_DT_INVALID=L.asm.Ab).apply(null,arguments)},kn=L._emscripten_enum_draco_DataType_DT_INT8=function(){return(kn=L._emscripten_enum_draco_DataType_DT_INT8=L.asm.Bb).apply(null,arguments)},Pt=L._emscripten_enum_draco_DataType_DT_UINT8=function(){return(Pt=L._emscripten_enum_draco_DataType_DT_UINT8=L.asm.Cb).apply(null,arguments)},ar=L._emscripten_enum_draco_DataType_DT_INT16=function(){return(ar=L._emscripten_enum_draco_DataType_DT_INT16=L.asm.Db).apply(null,arguments)},Lr=L._emscripten_enum_draco_DataType_DT_UINT16=function(){return(Lr=L._emscripten_enum_draco_DataType_DT_UINT16=L.asm.Eb).apply(null,arguments)},An=L._emscripten_enum_draco_DataType_DT_INT32=function(){return(An=L._emscripten_enum_draco_DataType_DT_INT32=L.asm.Fb).apply(null,arguments)},Er=L._emscripten_enum_draco_DataType_DT_UINT32=function(){return(Er=L._emscripten_enum_draco_DataType_DT_UINT32=L.asm.Gb).apply(null,arguments)},jn=L._emscripten_enum_draco_DataType_DT_INT64=function(){return(jn=L._emscripten_enum_draco_DataType_DT_INT64=L.asm.Hb).apply(null,arguments)},Or=L._emscripten_enum_draco_DataType_DT_UINT64=function(){return(Or=L._emscripten_enum_draco_DataType_DT_UINT64=L.asm.Ib).apply(null,arguments)},mi=L._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(mi=L._emscripten_enum_draco_DataType_DT_FLOAT32=L.asm.Jb).apply(null,arguments)},Nr=L._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(Nr=L._emscripten_enum_draco_DataType_DT_FLOAT64=L.asm.Kb).apply(null,arguments)},Mr=L._emscripten_enum_draco_DataType_DT_BOOL=function(){return(Mr=L._emscripten_enum_draco_DataType_DT_BOOL=L.asm.Lb).apply(null,arguments)},ui=L._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(ui=L._emscripten_enum_draco_DataType_DT_TYPES_COUNT=L.asm.Mb).apply(null,arguments)},Oi=L._emscripten_enum_draco_StatusCode_OK=function(){return(Oi=L._emscripten_enum_draco_StatusCode_OK=L.asm.Nb).apply(null,arguments)},ci=L._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(ci=L._emscripten_enum_draco_StatusCode_DRACO_ERROR=L.asm.Ob).apply(null,arguments)},Fi=L._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(Fi=L._emscripten_enum_draco_StatusCode_IO_ERROR=L.asm.Pb).apply(null,arguments)},Ci=L._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(Ci=L._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=L.asm.Qb).apply(null,arguments)},Ni=L._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(Ni=L._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=L.asm.Rb).apply(null,arguments)},Si=L._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(Si=L._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=L.asm.Sb).apply(null,arguments)};L._malloc=function(){return(L._malloc=L.asm.Tb).apply(null,arguments)},L._free=function(){return(L._free=L.asm.Ub).apply(null,arguments)};var b=function(){return(b=L.asm.Vb).apply(null,arguments)};L.___start_em_js=15856,L.___stop_em_js=15954;var H;if(sn=function D(){H||E(),H||(sn=D)},L.preInit)for(typeof L.preInit=="function"&&(L.preInit=[L.preInit]);0<L.preInit.length;)L.preInit.pop()();E(),v.prototype=Object.create(v.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},L.WrapperObject=v,L.getCache=T,L.wrapPointer=P,L.castObject=function(D,J){return P(D.ptr,J)},L.NULL=P(0),L.destroy=function(D){if(!D.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";D.__destroy__(),delete T(D.__class__)[D.ptr]},L.compare=function(D,J){return D.ptr===J.ptr},L.getPointer=function(D){return D.ptr},L.getClass=function(D){return D.__class__};var ie={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(ie.needed){for(var D=0;D<ie.temps.length;D++)L._free(ie.temps[D]);ie.temps.length=0,L._free(ie.buffer),ie.buffer=0,ie.size+=ie.needed,ie.needed=0}ie.buffer||(ie.size+=128,ie.buffer=L._malloc(ie.size),ie.buffer||l(void 0)),ie.pos=0},alloc:function(D,J){return ie.buffer||l(void 0),D=D.length*J.BYTES_PER_ELEMENT,D=D+7&-8,ie.pos+D>=ie.size?(0<D||l(void 0),ie.needed+=D,J=L._malloc(D),ie.temps.push(J)):(J=ie.buffer+ie.pos,ie.pos+=D),J},copy:function(D,J,ue){switch(ue>>>=0,J.BYTES_PER_ELEMENT){case 2:ue>>>=1;break;case 4:ue>>>=2;break;case 8:ue>>>=3}for(var be=0;be<D.length;be++)J[ue+be]=D[be]}};return K.prototype=Object.create(v.prototype),K.prototype.constructor=K,K.prototype.__class__=K,K.__cache__={},L.VoidPtr=K,K.prototype.__destroy__=K.prototype.__destroy__=function(){Fe(this.ptr)},ee.prototype=Object.create(v.prototype),ee.prototype.constructor=ee,ee.prototype.__class__=ee,ee.__cache__={},L.DecoderBuffer=ee,ee.prototype.Init=ee.prototype.Init=function(D,J){var ue=this.ptr;ie.prepare(),typeof D=="object"&&(D=k(D)),J&&typeof J=="object"&&(J=J.ptr),Tt(ue,D,J)},ee.prototype.__destroy__=ee.prototype.__destroy__=function(){Qt(this.ptr)},me.prototype=Object.create(v.prototype),me.prototype.constructor=me,me.prototype.__class__=me,me.__cache__={},L.AttributeTransformData=me,me.prototype.transform_type=me.prototype.transform_type=function(){return Kr(this.ptr)},me.prototype.__destroy__=me.prototype.__destroy__=function(){ki(this.ptr)},Z.prototype=Object.create(v.prototype),Z.prototype.constructor=Z,Z.prototype.__class__=Z,Z.__cache__={},L.GeometryAttribute=Z,Z.prototype.__destroy__=Z.prototype.__destroy__=function(){$i(this.ptr)},re.prototype=Object.create(v.prototype),re.prototype.constructor=re,re.prototype.__class__=re,re.__cache__={},L.PointAttribute=re,re.prototype.size=re.prototype.size=function(){return so(this.ptr)},re.prototype.GetAttributeTransformData=re.prototype.GetAttributeTransformData=function(){return P(ji(this.ptr),me)},re.prototype.attribute_type=re.prototype.attribute_type=function(){return mo(this.ptr)},re.prototype.data_type=re.prototype.data_type=function(){return en(this.ptr)},re.prototype.num_components=re.prototype.num_components=function(){return Mo(this.ptr)},re.prototype.normalized=re.prototype.normalized=function(){return!!no(this.ptr)},re.prototype.byte_stride=re.prototype.byte_stride=function(){return ge(this.ptr)},re.prototype.byte_offset=re.prototype.byte_offset=function(){return qe(this.ptr)},re.prototype.unique_id=re.prototype.unique_id=function(){return at(this.ptr)},re.prototype.__destroy__=re.prototype.__destroy__=function(){Ne(this.ptr)},de.prototype=Object.create(v.prototype),de.prototype.constructor=de,de.prototype.__class__=de,de.__cache__={},L.AttributeQuantizationTransform=de,de.prototype.InitFromAttribute=de.prototype.InitFromAttribute=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),!!Mn(J,D)},de.prototype.quantization_bits=de.prototype.quantization_bits=function(){return Bn(this.ptr)},de.prototype.min_value=de.prototype.min_value=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),mr(J,D)},de.prototype.range=de.prototype.range=function(){return gr(this.ptr)},de.prototype.__destroy__=de.prototype.__destroy__=function(){Gr(this.ptr)},Ie.prototype=Object.create(v.prototype),Ie.prototype.constructor=Ie,Ie.prototype.__class__=Ie,Ie.__cache__={},L.AttributeOctahedronTransform=Ie,Ie.prototype.InitFromAttribute=Ie.prototype.InitFromAttribute=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),!!_r(J,D)},Ie.prototype.quantization_bits=Ie.prototype.quantization_bits=function(){return ti(this.ptr)},Ie.prototype.__destroy__=Ie.prototype.__destroy__=function(){Wi(this.ptr)},Pe.prototype=Object.create(v.prototype),Pe.prototype.constructor=Pe,Pe.prototype.__class__=Pe,Pe.__cache__={},L.PointCloud=Pe,Pe.prototype.num_attributes=Pe.prototype.num_attributes=function(){return Zi(this.ptr)},Pe.prototype.num_points=Pe.prototype.num_points=function(){return Ue(this.ptr)},Pe.prototype.__destroy__=Pe.prototype.__destroy__=function(){c(this.ptr)},we.prototype=Object.create(v.prototype),we.prototype.constructor=we,we.prototype.__class__=we,we.__cache__={},L.Mesh=we,we.prototype.num_faces=we.prototype.num_faces=function(){return et(this.ptr)},we.prototype.num_attributes=we.prototype.num_attributes=function(){return it(this.ptr)},we.prototype.num_points=we.prototype.num_points=function(){return je(this.ptr)},we.prototype.__destroy__=we.prototype.__destroy__=function(){Kt(this.ptr)},Te.prototype=Object.create(v.prototype),Te.prototype.constructor=Te,Te.prototype.__class__=Te,Te.__cache__={},L.Metadata=Te,Te.prototype.__destroy__=Te.prototype.__destroy__=function(){xt(this.ptr)},Se.prototype=Object.create(v.prototype),Se.prototype.constructor=Se,Se.prototype.__class__=Se,Se.__cache__={},L.Status=Se,Se.prototype.code=Se.prototype.code=function(){return Jt(this.ptr)},Se.prototype.ok=Se.prototype.ok=function(){return!!hn(this.ptr)},Se.prototype.error_msg=Se.prototype.error_msg=function(){return u(tn(this.ptr))},Se.prototype.__destroy__=Se.prototype.__destroy__=function(){vn(this.ptr)},Oe.prototype=Object.create(v.prototype),Oe.prototype.constructor=Oe,Oe.prototype.__class__=Oe,Oe.__cache__={},L.DracoFloat32Array=Oe,Oe.prototype.GetValue=Oe.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),Ot(J,D)},Oe.prototype.size=Oe.prototype.size=function(){return Gt(this.ptr)},Oe.prototype.__destroy__=Oe.prototype.__destroy__=function(){rn(this.ptr)},He.prototype=Object.create(v.prototype),He.prototype.constructor=He,He.prototype.__class__=He,He.__cache__={},L.DracoInt8Array=He,He.prototype.GetValue=He.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),Ir(J,D)},He.prototype.size=He.prototype.size=function(){return Tn(this.ptr)},He.prototype.__destroy__=He.prototype.__destroy__=function(){Jr(this.ptr)},j.prototype=Object.create(v.prototype),j.prototype.constructor=j,j.prototype.__class__=j,j.__cache__={},L.DracoUInt8Array=j,j.prototype.GetValue=j.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),kr(J,D)},j.prototype.size=j.prototype.size=function(){return si(this.ptr)},j.prototype.__destroy__=j.prototype.__destroy__=function(){ni(this.ptr)},ht.prototype=Object.create(v.prototype),ht.prototype.constructor=ht,ht.prototype.__class__=ht,ht.__cache__={},L.DracoInt16Array=ht,ht.prototype.GetValue=ht.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),Ti(J,D)},ht.prototype.size=ht.prototype.size=function(){return Ri(this.ptr)},ht.prototype.__destroy__=ht.prototype.__destroy__=function(){Ii(this.ptr)},Qe.prototype=Object.create(v.prototype),Qe.prototype.constructor=Qe,Qe.prototype.__class__=Qe,Qe.__cache__={},L.DracoUInt16Array=Qe,Qe.prototype.GetValue=Qe.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),fi(J,D)},Qe.prototype.size=Qe.prototype.size=function(){return di(this.ptr)},Qe.prototype.__destroy__=Qe.prototype.__destroy__=function(){hi(this.ptr)},Je.prototype=Object.create(v.prototype),Je.prototype.constructor=Je,Je.prototype.__class__=Je,Je.__cache__={},L.DracoInt32Array=Je,Je.prototype.GetValue=Je.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),Ln(J,D)},Je.prototype.size=Je.prototype.size=function(){return _t(this.ptr)},Je.prototype.__destroy__=Je.prototype.__destroy__=function(){cn(this.ptr)},ze.prototype=Object.create(v.prototype),ze.prototype.constructor=ze,ze.prototype.__class__=ze,ze.__cache__={},L.DracoUInt32Array=ze,ze.prototype.GetValue=ze.prototype.GetValue=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),Ke(J,D)},ze.prototype.size=ze.prototype.size=function(){return pt(this.ptr)},ze.prototype.__destroy__=ze.prototype.__destroy__=function(){Zn(this.ptr)},ut.prototype=Object.create(v.prototype),ut.prototype.constructor=ut,ut.prototype.__class__=ut,ut.__cache__={},L.MetadataQuerier=ut,ut.prototype.HasEntry=ut.prototype.HasEntry=function(D,J){var ue=this.ptr;return ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),!!Rt(ue,D,J)},ut.prototype.GetIntEntry=ut.prototype.GetIntEntry=function(D,J){var ue=this.ptr;return ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),an(ue,D,J)},ut.prototype.GetIntEntryArray=ut.prototype.GetIntEntryArray=function(D,J,ue){var be=this.ptr;ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),ue&&typeof ue=="object"&&(ue=ue.ptr),Hr(be,D,J,ue)},ut.prototype.GetDoubleEntry=ut.prototype.GetDoubleEntry=function(D,J){var ue=this.ptr;return ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),Wr(ue,D,J)},ut.prototype.GetStringEntry=ut.prototype.GetStringEntry=function(D,J){var ue=this.ptr;return ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),u(On(ue,D,J))},ut.prototype.NumEntries=ut.prototype.NumEntries=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),Pr(J,D)},ut.prototype.GetEntryName=ut.prototype.GetEntryName=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),u(ai(ue,D,J))},ut.prototype.__destroy__=ut.prototype.__destroy__=function(){pi(this.ptr)},ke.prototype=Object.create(v.prototype),ke.prototype.constructor=ke,ke.prototype.__class__=ke,ke.__cache__={},L.Decoder=ke,ke.prototype.DecodeArrayToPointCloud=ke.prototype.DecodeArrayToPointCloud=function(D,J,ue){var be=this.ptr;return ie.prepare(),typeof D=="object"&&(D=k(D)),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),P(Fr(be,D,J,ue),Se)},ke.prototype.DecodeArrayToMesh=ke.prototype.DecodeArrayToMesh=function(D,J,ue){var be=this.ptr;return ie.prepare(),typeof D=="object"&&(D=k(D)),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),P($r(be,D,J,ue),Se)},ke.prototype.GetAttributeId=ke.prototype.GetAttributeId=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),Dn(ue,D,J)},ke.prototype.GetAttributeIdByName=ke.prototype.GetAttributeIdByName=function(D,J){var ue=this.ptr;return ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),sr(ue,D,J)},ke.prototype.GetAttributeIdByMetadataEntry=ke.prototype.GetAttributeIdByMetadataEntry=function(D,J,ue){var be=this.ptr;return ie.prepare(),D&&typeof D=="object"&&(D=D.ptr),J=J&&typeof J=="object"?J.ptr:I(J),ue=ue&&typeof ue=="object"?ue.ptr:I(ue),Dt(be,D,J,ue)},ke.prototype.GetAttribute=ke.prototype.GetAttribute=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),P(Q(ue,D,J),re)},ke.prototype.GetAttributeByUniqueId=ke.prototype.GetAttributeByUniqueId=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),P(ne(ue,D,J),re)},ke.prototype.GetMetadata=ke.prototype.GetMetadata=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),P(ye(J,D),Te)},ke.prototype.GetAttributeMetadata=ke.prototype.GetAttributeMetadata=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),P(Me(ue,D,J),Te)},ke.prototype.GetFaceFromMesh=ke.prototype.GetFaceFromMesh=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!De(be,D,J,ue)},ke.prototype.GetTriangleStripsFromMesh=ke.prototype.GetTriangleStripsFromMesh=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),yt(ue,D,J)},ke.prototype.GetTrianglesUInt16Array=ke.prototype.GetTrianglesUInt16Array=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Xr(be,D,J,ue)},ke.prototype.GetTrianglesUInt32Array=ke.prototype.GetTrianglesUInt32Array=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!wn(be,D,J,ue)},ke.prototype.GetAttributeFloat=ke.prototype.GetAttributeFloat=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Nn(be,D,J,ue)},ke.prototype.GetAttributeFloatForAllPoints=ke.prototype.GetAttributeFloatForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!dr(be,D,J,ue)},ke.prototype.GetAttributeIntForAllPoints=ke.prototype.GetAttributeIntForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Wn(be,D,J,ue)},ke.prototype.GetAttributeInt8ForAllPoints=ke.prototype.GetAttributeInt8ForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!ri(be,D,J,ue)},ke.prototype.GetAttributeUInt8ForAllPoints=ke.prototype.GetAttributeUInt8ForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!cr(be,D,J,ue)},ke.prototype.GetAttributeInt16ForAllPoints=ke.prototype.GetAttributeInt16ForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Br(be,D,J,ue)},ke.prototype.GetAttributeUInt16ForAllPoints=ke.prototype.GetAttributeUInt16ForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Rr(be,D,J,ue)},ke.prototype.GetAttributeInt32ForAllPoints=ke.prototype.GetAttributeInt32ForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!br(be,D,J,ue)},ke.prototype.GetAttributeUInt32ForAllPoints=ke.prototype.GetAttributeUInt32ForAllPoints=function(D,J,ue){var be=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!hr(be,D,J,ue)},ke.prototype.GetAttributeDataArrayForAllPoints=ke.prototype.GetAttributeDataArrayForAllPoints=function(D,J,ue,be,Re){var Ze=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),be&&typeof be=="object"&&(be=be.ptr),Re&&typeof Re=="object"&&(Re=Re.ptr),!!lr(Ze,D,J,ue,be,Re)},ke.prototype.SkipAttributeTransform=ke.prototype.SkipAttributeTransform=function(D){var J=this.ptr;D&&typeof D=="object"&&(D=D.ptr),Vt(J,D)},ke.prototype.GetEncodedGeometryType_Deprecated=ke.prototype.GetEncodedGeometryType_Deprecated=function(D){var J=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),ln(J,D)},ke.prototype.DecodeBufferToPointCloud=ke.prototype.DecodeBufferToPointCloud=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),P(Un(ue,D,J),Se)},ke.prototype.DecodeBufferToMesh=ke.prototype.DecodeBufferToMesh=function(D,J){var ue=this.ptr;return D&&typeof D=="object"&&(D=D.ptr),J&&typeof J=="object"&&(J=J.ptr),P(_n(ue,D,J),Se)},ke.prototype.__destroy__=ke.prototype.__destroy__=function(){It(this.ptr)},function(){function D(){L.ATTRIBUTE_INVALID_TRANSFORM=Jn(),L.ATTRIBUTE_NO_TRANSFORM=vr(),L.ATTRIBUTE_QUANTIZATION_TRANSFORM=Sn(),L.ATTRIBUTE_OCTAHEDRON_TRANSFORM=qn(),L.INVALID=nr(),L.POSITION=Bt(),L.NORMAL=Vn(),L.COLOR=gn(),L.TEX_COORD=Rn(),L.GENERIC=Gn(),L.INVALID_GEOMETRY_TYPE=rr(),L.POINT_CLOUD=xr(),L.TRIANGULAR_MESH=fn(),L.DT_INVALID=Xn(),L.DT_INT8=kn(),L.DT_UINT8=Pt(),L.DT_INT16=ar(),L.DT_UINT16=Lr(),L.DT_INT32=An(),L.DT_UINT32=Er(),L.DT_INT64=jn(),L.DT_UINT64=Or(),L.DT_FLOAT32=mi(),L.DT_FLOAT64=Nr(),L.DT_BOOL=Mr(),L.DT_TYPES_COUNT=ui(),L.OK=Oi(),L.DRACO_ERROR=ci(),L.IO_ERROR=Fi(),L.INVALID_PARAMETER=Ci(),L.UNSUPPORTED_VERSION=Ni(),L.UNKNOWN_VERSION=Si()}St?D():jt.unshift(D)}(),typeof L.onModuleParsed=="function"&&L.onModuleParsed(),L.Decoder.prototype.GetEncodedGeometryType=function(D){if(D.__class__&&D.__class__===L.DecoderBuffer)return L.Decoder.prototype.GetEncodedGeometryType_Deprecated(D);if(8>D.byteLength)return L.INVALID_GEOMETRY_TYPE;switch(D[7]){case 0:return L.POINT_CLOUD;case 1:return L.TRIANGULAR_MESH;default:return L.INVALID_GEOMETRY_TYPE}},i.ready}}();o.exports=n})(Iv);var Pv=sd,Fv=ad,ng={createEncoderModule:Pv,createDecoderModule:Fv};const fh=Ou(Gy);var Lv=function(){var o="B9h79tEBBBENQ9gEUEU9gEUB9gBB9gVUUUUUEU9gDUUEU9gLUUUUEU9gVUUUUUB9gLUUUUB9gIUUUEU9gD99UE99I8ayDILEVLEVLOOOOORRVBWWBEdddLVE9wEIIVIEBEOWEUEC+g/KEKR/QIhO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwvBE8f9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwv9C9v919u9kBDe9tw79o9v9wT9fw9u9j9v9kw9WwvTw949Wwv79p9v9uBIy9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwvBL8e9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwv9C9v919u9kBV8a9tw79o9v9wT9fw9u9j9v9kw69u9kw949Wwv79p9v9uBOe9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jwBRA9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jw9C9v919u9kBWl9tw79o9v9wT9fw9u9j9v9kws9p2Twv9P9jTBdk9tw79o9v9wT9fw9u9j9v9kws9p2Twv9R919hTBQl9tw79o9v9wT9fw9u9j9v9kws9p2Twvt949wBKe9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9owBpA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9ow9TTv9p9wBSA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBZL79iv9rBhdWEBCEKDxcQ+1tyDBK/hKEyU8jJJJJBCJO9rGV8kJJJJBCBHODNALCEFAE0MBABCBrB+Q+KJJBC+gEv86BBAVCJDFCBCJDZ+TJJJB8aDNAItMBAVCJDFADALZmJJJB8aKABAEFHRABCEFHWAVALFCBCBCJDAL9rALCfE0eZ+TJJJB8aAVAVCJDFALZmJJJBHdCJ/ABAL9uHEDNDNALtMBAEC/wfBgGECJDAECJD6eHQCBHKINAKAI9PMEAdCJLFCBCJDZ+TJJJB8aAQAIAK9rAKAQFAI6eGXCSFGECL4CIFCD4HMADAKAL2FHpDNDNDNDNDNAEC9wgGStMBCBHZCEHhApHoAWHaXEKDNAXtMBCBHaCEHhApHcINAdAaFrBBHxAcHECBHOINAdCJLFAOFAErBBGqAx9rGxCETAxCkTCk91CR4786BBAEALFHEAqHxAOCEFGOAX9HMBKARAW9rAM6MIAWCBAMZ+TJJJBGEtMIAEAMFHWAcCEFHcAaCEFGaAL6HhAaAL9HMBXVKKARAW9rAM6MOAWCBAMZ+TJJJB8aCEHEINAWGxAMFHWALAEGOsMLDNARAW9rAM6MBAOCEFHEAWCBAMZ+TJJJB8aAxMEKKCBHWAOAL6MOXIKINDNAXtMBAdAZFrBBHxCBHEAoHOINAdCJLFAEFAOrBBGqAx9rGxCETAxCkTCk91CR4786BBAOALFHOAqHxAECEFGEAX9HMBKKARAa9rAM6MEARAaCBAMZ+TJJJBGlAMFGW9rCk6MDCBHkAdCJLFHcINAdCJLFAkFHyCWH8aCZHaCEHqINDNDNAqCE9HMBCUHOAyrBBMECBHODNINAOGECSsMEAECEFHOAcAEFCEFrBBtMBKKCUCBAECS6eHOXEKAqCETC/+fffEgHOCUAqTCU7CfEgHxCBHEINAOAxAcAEFrBB9NFHOAECEFGECZ9HMBKKAOAaAOAa6GEeHaAqA8aAEeH8aAqCETGqCW6MBKDNDNDNDNA8aCUFpDIEBKAlAkCO4FGEAErBBCDCIA8aCLseAkCI4COgTv86BBA8aCW9HMEAWAy8pBB83BBAWCWFAyCWF8pBB83BBAWCZFHWXDKAlAkCO4FGEAErBBCEAkCI4COgTv86BBKDNCWA8a9tGeMBINAWCB86BBAWCEFHWXBKKCUA8aTCU7HqCBH3AcH5INA5HEAeHxCBHOINAErBBGaAqAaAqCfEgGy6eAOCfEgA8aTvHOAECEFHEAxCUFGxMBKAWAO86BBA5AeFH5AWCEFHWA3AeFG3CZ6MBKCBHEINDNAcAEFrBBGOAy6MBAWAO86BBAWCEFHWKAECEFGECZ9HMBKKDNAkCZFGkAS9PMBAcCZFHcARAW9rCl0MEKKAkAS6MEAWtMEAoCEFHoAZCEFGZAL6HhAWHaAZALsMIXBKKCBHWAhCEgtMEXLKCBHWAhCEgMIKAdApAXCUFAL2FALZmJJJB8aAXAKFHKAWMBKCBHOXDKCBHOARAW9rCAALALCA6e6MEDNALC8f0MBAWCBCAAL9rGEZ+TJJJBAEFHWKAWAdCJDFALZmJJJBALFAB9rHOXEKCBHOKAVCJOF8kJJJJBAOK9HEEUAECAAECA0eABCJ/ABAE9uC/wfBgGDCJDADCJD6eGDFCUFAD9uAE2ADCL4CIFCD4ADv2FCEFKMBCBABbD+Q+KJJBK/YSE3U8jJJJJBC/AE9rGL8kJJJJBCBHVDNAICI9uGOChFAE0MBABCBYDn+KJJBGVC/gEv86BBALC/ABFCfECJEZ+TJJJB8aALCuFGR9CU83IBALC8wFGW9CU83IBALCYFGd9CU83IBALCAFGQ9CU83IBALCkFGK9CU83IBALCZFGX9CU83IBAL9CU83IWAL9CU83IBABAEFC9wFHMABCEFGpAOFHEDNAItMBCMCSAVCB9KGSeHZAVCE9IHhCBHoCBHaCBHcCBHxCBHqINDNAEAM9NMBCBHVXIKAqCUFHVADAcCDTFGOYDBHlAOCWFYDBHkAOCLFYDBHyCBH8aDNDNINALC/ABFAVCSgCITFGOYDLHeDNDNDNAOYDBGOAl9HMBAeAysMEKDNAOAy9HMBAeAk9HMBA8aCEFH8aXEKAOAk9HMEAeAl9HMEA8aCDFH8aKA8aC870MDAxCUFHVADA8aCIgCX2GOC+Y1JJBFYDBAcFCDTFYDBHeADAOCn1JJBFYDBAcFCDTFYDBHkADAOC+Q1JJBFYDBAcFCDTFYDBHlCBHODNINDNALAVCSgCDTFYDBAe9HMBAOHyXDKCUHyAVCUFHVAOCEFGOCZ9HMBKKAyCB9KAyAZ9IgGVCU7AeAosGOgH3DNDNDNDNDNAyCBCSAOeAVeGVCS9HMBAhMBAeAeAaAeCEFAasGVeGaCEFsMECMCSAVeHVKApAVA8aCDTC/wEgv86BBAVCS9HMEAeAa9rGVCETAVC8f917HVINAEAVCfB0CRTAVCfBgv86BBAECEFHEAVCJE6HOAVCR4HVAOtMBKAeHaXDKCpHVApA8aCDTCpv86BBAeHaKAVtMBAVAZ9IMEKALAxCDTFAebDBAxCEFCSgHxKAoA3FHoALC/ABFAqCITFGVAkbDLAVAebDBALC/ABFAqCEFCSgGVCITFGOAebDLAOAlbDBAVCEFHOXIKAVCUFHVA8aCLFG8aC/AB9HMBKKDNADCEAkAosCETAyAoseCX2GVC+Q1JJBFYDBAcFCDTFYDBGltADAVCn1JJBFYDBAcFCDTFYDBG8aCEsgADAVC+Y1JJBFYDBAcFCDTFYDBGyCDsgAoCB9HgASgG5CE9HMBAR9CU83IBAW9CU83IBAd9CU83IBAQ9CU83IBAK9CU83IBAX9CU83IBAL9CU83IWAL9CU83IBCBHoKCBHeAxCUFGVHODNINDNALAOCSgCDTFYDBA8a9HMBAeHkXDKCUHkAOCUFHOAeCEFGeCZ9HMBKKCBHODNINDNALAVCSgCDTFYDBAy9HMBAOHeXDKCUHeAVCUFHVAOCEFGOCZ9HMBKKAoAlAosG8eFH3DNDNAkCM0MBAkCEFHkXEKCBCSA8aA3sGVeHkA3AVFH3KDNDNAeCM0MBAeCEFHeXEKCBCSAyA3sGVeHeA3AVFH3KC9+CUA8eeH8fAeAkCLTvHOCBHVDNDNDNINAVCJ1JJBFrBBAOCfEgsMEAVCEFGVCZ9HMBXDKKAlAo9HAVCM0vA5vMBApAVC/wEv86BBXEKApA8f86BBAEAO86BBAECEFHEKDNA8eMBAlAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKAlHaKDNAkCS9HMBA8aAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKA8aHaKDNAeCS9HMBAyAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKAyHaKALAxCDTFAlbDBAxCEFCSgHVDNDNAkpZBEEEEEEEEEEEEEEBEKALAVCDTFA8abDBAxCDFCSgHVKDNDNAepZBEEEEEEEEEEEEEEBEKALAVCDTFAybDBAVCEFCSgHVKALC/ABFAqCITFGOAlbDLAOA8abDBALC/ABFAqCEFCSgCITFGOA8abDLAOAybDBALC/ABFAqCDFCSgCITFGOAybDLAOAlbDBAqCIFHOAVHxA3HoKApCEFHpAOCSgHqAcCIFGcAI6MBKKCBHVAEAM0MBCBHVINAEAVFAVCJ1JJBFrBB86BBAVCEFGVCZ9HMBKAEAB9rAVFHVKALC/AEF8kJJJJBAVKzEEUCBHDDNINADCEFGDC8f0MECEADTAE6MBKKADCRFCfEgCR9uCI2CDFABCI9u2ChFKMBCBABbDn+KJJBK+cDEWU8jJJJJBCZ9rHLCBHVDNAICVFAE0MBCBHOABCBrBn+KJJBC/QEv86BBAL9CB83IWABCEFHRABAEFC98FHWDNAItMBCBHdINDNARAW6MBCBSKADAdCDTFYDBGQALCWFAOAQALCWFAOCDTFYDB9rGEAEC8f91GEFAE7C507GOCDTFGKYDB9rGEC8e91C9+gAECDT7AOvHEINARAECfB0GVCRTAECfBgv86BBAECR4HEARCEFHRAVMBKAKAQbDBAdCEFGdAI9HMBKKCBHVARAW0MBARCBbBBARAB9rCLFHVKAVKbEEUCBHDDNINADCEFGDC8f0MECEADTAE6MBKKADCWFCfEgCR9uAB2CVFK+DVLI99DUI99LUDNAEtMBCUADCETCUFTCU7+yHVDNDNCUAICUFTCU7+yGOjBBBzmGR+LjBBB9P9dtMBAR+oHWXEKCJJJJ94HWKCBHICBHdINALCLFiDBGRjBBBBjBBJzALiDBGQ+LAR+LmALCWFiDBGK+LmGR+VARjBBBB9beGRnHXAQARnHRALCXFiDBHQDNDNAKjBBBB9gtMBAXHKXEKjBBJzAR+L+TGKAK+MAXjBBBB9geHKjBBJzAX+L+TGXAX+MARjBBBB9geHRKDNDNAQjBBJ+/AQjBBJ+/9geGXjBBJzAXjBBJz9feAVnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHMXEKCJJJJ94HMKDNDNAKjBBJ+/AKjBBJ+/9geGQjBBJzAQjBBJz9feAOnjBBBzjBBB+/AKjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHpXEKCJJJJ94HpKDNDNARjBBJ+/ARjBBJ+/9geGQjBBJzAQjBBJz9feAOnjBBBzjBBB+/ARjBBBB9gemGR+LjBBB9P9dtMBAR+oHSXEKCJJJJ94HSKDNDNADCL9HMBABAdFGZAS86BBAZCIFAM86BBAZCDFAW86BBAZCEFAp86BBXEKABAIFGZAS87EBAZCOFAM87EBAZCLFAW87EBAZCDFAp87EBKALCZFHLAICWFHIAdCLFHdAECUFGEMBKKK/KLLD99EUD99EUDNAEtMBDNDNCUAICUFTCU7+yGVjBBBzmGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKAIC/8fIgHRINABCOFCICDALCLFiDB+LALiDB+L9eGIALCWFiDB+LALAICDTFiDB+L9eeGIALCXFiDB+LALAICDTFiDB+L9eeGIARv87EBDNDNALAICEFCIgCDTFiDBj/zL+1znjBBJ+/jBBJzALAICDTFiDBjBBBB9deGOnGWjBBJ+/AWjBBJ+/9geGdjBBJzAdjBBJz9feAVnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHQXEKCJJJJ94HQKABAQ87EBDNDNAOALAICDFCIgCDTFiDBj/zL+1znnGWjBBJ+/AWjBBJ+/9geGdjBBJzAdjBBJz9feAVnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHQXEKCJJJJ94HQKABCDFAQ87EBDNDNAOALAICUFCIgCDTFiDBj/zL+1znnGOjBBJ+/AOjBBJ+/9geGWjBBJzAWjBBJz9feAVnjBBBzjBBB+/AOjBBBB9gemGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKABCLFAI87EBABCWFHBALCZFHLAECUFGEMBKKK+7DDWUE998jJJJJBCZ9rGV8kJJJJBDNAEtMBADCL6MBCEAI9rHOADCD4GDCEADCE0eHRADCDTHWCBHdINC+cUHDALHIARHQINAIiDBAVCXFZ+XJJJB8aAVYDXGKADADAK9IeHDAICLFHIAQCUFGQMBKAOADFGICkTHKCBHDCBAI9rHXARHIINDNDNALADFiDBGMAXZ+WJJJBjBBBzjBBB+/AMjBBBB9gemGM+LjBBB9P9dtMBAM+oHQXEKCJJJJ94HQKABADFAQCfffRgAKvbDBADCLFHDAICUFGIMBKABAWFHBALAWFHLAdCEFGdAE9HMBKKAVCZF8kJJJJBK/tKDcUI998jJJJJBC+QD9rGV8kJJJJBAVC+oEFCBC/kBZ+TJJJB8aCBHODNADtMBCBHOAItMBDNABAE9HMBAVCUADCDTGOADCffffI0eCBYD1+KJJBhJJJJBBGEbD+oEAVCEbD1DAEABAOZmJJJB8aKAVC+YEFCWFCBbDBAV9CB83I+YEAVC+YEFAEADAIAVC+oEFZ+NJJJBCUAICDTGRAICffffI0eGWCBYD1+KJJBhJJJJBBHOAVC+oEFAVYD1DGdCDTFAObDBAVAdCEFGQbD1DAOAVYD+YEGKARZmJJJBHXAVC+oEFAQCDTFADCI9uGMCBYD1+KJJBhJJJJBBGObDBAVAdCDFGRbD1DAOCBAMZ+TJJJBHpAVC+oEFARCDTFAWCBYD1+KJJBhJJJJBBGSbDBAVAdCIFGQbD1DAXHOASHRINARALiDBALAOYDBGWCWAWCW6eCDTFC/EBFiDBmuDBAOCLFHOARCLFHRAICUFGIMBKAVC+oEFAQCDTFCUAMCDTADCffff970eCBYD1+KJJBhJJJJBBGQbDBAVAdCLFbD1DDNADCI6MBAMCEAMCE0eHIAEHOAQHRINARASAOYDBCDTFiDBASAOCLFYDBCDTFiDBmASAOCWFYDBCDTFiDBmuDBAOCXFHOARCLFHRAICUFGIMBKKAVC/MBFHZAVYD+cEHhAVYD+gEHoAVHOCBHWCBHRCBHaCEHcINAOHxCIHqAEARCI2GlCDTFGOCWFYDBHkAOYDBHDABAaCX2FGICLFAOCLFYDBGdbDBAIADbDBAICWFAkbDBApARFCE86BBAZAkbDWAZAdbDLAZADbDBAQARCDTFCBbDBDNAWtMBCIHqAxHIINDNAIYDBGOADsMBAOAdsMBAOAksMBAZAqCDTFAObDBAqCEFHqKAICLFHIAWCUFGWMBKKAaCEFHaAXADCDTFGOAOYDBCUFbDBAXAdCDTFGOAOYDBCUFbDBAXAkCDTFGOAOYDBCUFbDBCBHWINAoAhAEAWAlFCDTFYDBCDTGIFYDBCDTFGkHOAKAIFGdYDBGDHIDNADtMBDNINAOYDBARsMEAOCLFHOAICUFGItMDXBKKAOADCDTAkFC98FYDBbDBAdAdYDBCUFbDBKAWCEFGWCI9HMBKDNDNDNAqtMBCUHRjBBBBHyCBHOINASAZAOCDTFYDBCDTGIFGWiDBH8aAWALCBAOCEFGdAOCS0eCDTFiDBALAXAIFYDBGOCWAOCW6eCDTFC/EBFiDBmGeuDBDNAKAIFYDBGWtMBAeA8a+THeAoAhAIFYDBCDTFHOAWCDTHIINAQAOYDBGWCDTFGDAeADiDBmG8auDBA8aAyAyA8a9dGDeHyAWARADeHRAOCLFHOAIC98FGIMBKKAdHOAdAq9HMBKARCU9HMEKAcAM9PMEINDNApAcFrBBMBAcHRXDKAMAcCEFGc9HMBXDKKAqCZAqCZ6eHWAZHOAxHZARCU9HMEKKAVYD1DHOKAOCDTAVC+oEFFC98FHRDNINAOtMEARYDBCBYD+E+KJJBh+BJJJBBARC98FHRAOCUFHOXBKKAVC+QDF8kJJJJBK/uLEVUCUAICDTGVAICffffI0eGOCBYD1+KJJBhJJJJBBHRALALYD9gGWCDTFARbDBALAWCEFbD9gABARbDBAOCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDLCUADCDTADCffffI0eCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDWABYDBCBAVZ+TJJJB8aADCI9uHWDNADtMBABYDBHOAEHLADHRINAOALYDBCDTFGVAVYDBCEFbDBALCLFHLARCUFGRMBKKDNAItMBABYDBHLABYDLHRCBHVAIHOINARAVbDBARCLFHRALYDBAVFHVALCLFHLAOCUFGOMBKKDNADCI6MBAWCEAWCE0eHdABYDLHRABYDWHVCBHLINAECWFYDBHOAECLFYDBHDARAEYDBCDTFGWAWYDBGWCEFbDBAVAWCDTFALbDBARADCDTFGDADYDBGDCEFbDBAVADCDTFALbDBARAOCDTFGOAOYDBGOCEFbDBAVAOCDTFALbDBAECXFHEAdALCEFGL9HMBKKDNAItMBABYDLHEABYDBHLINAEAEYDBALYDB9rbDBALCLFHLAECLFHEAICUFGIMBKKKqBABAEADAIC+01JJBZ+MJJJBKqBABAEADAIC+c+JJJBZ+MJJJBK9dEEUABCfEAICDTZ+TJJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD+M+KJJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD+M+KJJBFGDbD+M+KJJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKKXBABAEZ+YJJJBK+BEEIUDNAB+8GDCl4GICfEgGLCfEsMBDNALMBDNABjBBBB9cMBAECBbDBABSKABjBBJ9fnAEZ+XJJJBHBAEAEYDBCNFbDBABSKAEAICfEgC+CUFbDBADCfff+D94gCJJJ/4Iv++HBKABK+gEBDNDNAECJE9IMBABjBBBUnHBDNAECfE9PMBAEC+BUFHEXDKABjBBBUnHBAECPDAECPD6eC+C9+FHEXEKAEC+BU9KMBABjBBJXnHBDNAEC+b9+9NMBAEC/mBFHEXEKABjBBJXnHBAEC+299AEC+2990eC/MEFHEKABAEClTCJJJ/8IF++nKK+eDDBCJWK+EDB4+H9W9n94+p+Gw+J9o+YE9pBBBBBBEBBBDBBBEBBBDBBBBBBBDBBBBBBBEBBBBBBB+L29Hz/69+9Kz/n/76z/RG97z/Z/O9Xz8j/b85z/+/U9Yz/B/K9hz+2/z9dz9E+L9Mz59a8kz+R/t3z+a+Zyz79ohz/J4++8++y+d9v8+BBBB9S+49+z8r+Hbz9m9m/m8+l/Z/O8+/8+pg89Q/X+j878r+Hq8++m+b/E87BBBBBBJzBBJzBBJz+e/v/n8++y+dSz9I/h/68+XD/r8+/H0838+/w+nOzBBBB+wv9o8+UF888+9I/h/68+9C9g/l89/N/M9M89/d8kO8+BBBBF+8Tz9M836zs+2azl/Zpzz818ez9E+LXz/u98f8+819e/68+BC+EQKXEBBBDBBBAwBB",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var t,n=WebAssembly.instantiate(r(o),{}).then(function(d){t=d.instance,t.exports.__wasm_call_ctors(),t.exports.meshopt_encodeVertexVersion(0),t.exports.meshopt_encodeIndexVersion(1)});function r(d){for(var _=new Uint8Array(d.length),A=0;A<d.length;++A){var E=d.charCodeAt(A);_[A]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}for(var v=0,A=0;A<d.length;++A)_[v++]=_[A]<60?e[_[A]]:(_[A]-60)*64+_[++A];return _.buffer.slice(0,v)}function i(d){if(!d)throw new Error("Assertion failed")}function s(d){return new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}function a(d,_,A){var E=t.exports.sbrk,v=E(d.length*4),T=E(_*4),P=new Uint8Array(t.exports.memory.buffer),I=s(d);P.set(I,v),A&&A(v,v,d.length,_);var k=t.exports.meshopt_optimizeVertexFetchRemap(T,v,d.length,_);P=new Uint8Array(t.exports.memory.buffer);var K=new Uint32Array(_);new Uint8Array(K.buffer).set(P.subarray(T,T+_*4)),I.set(P.subarray(v,v+d.length*4)),E(v-E(0));for(var ee=0;ee<d.length;++ee)d[ee]=K[d[ee]];return[K,k]}function u(d,_,A,E,v){var T=t.exports.sbrk,P=T(_),I=T(E*v),k=new Uint8Array(t.exports.memory.buffer);k.set(s(A),I);var K=d(P,_,I,E,v),ee=new Uint8Array(K);return ee.set(k.subarray(P,P+K)),T(P-T(0)),ee}function f(d){for(var _=0,A=0;A<d.length;++A){var E=d[A];_=_<E?E:_}return _}function l(d,_){if(i(_==2||_==4),_==4)return new Uint32Array(d.buffer,d.byteOffset,d.byteLength/4);var A=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/2);return new Uint32Array(A)}function p(d,_,A,E,v,T){var P=t.exports.sbrk,I=P(A*E),k=P(A*T),K=new Uint8Array(t.exports.memory.buffer);K.set(s(_),k),d(I,A,E,v,k);var ee=new Uint8Array(A*E);return ee.set(K.subarray(I,I+A*E)),P(I-P(0)),ee}return{ready:n,supported:!0,reorderMesh:function(d,_,A){var E=_?A?t.exports.meshopt_optimizeVertexCacheStrip:t.exports.meshopt_optimizeVertexCache:void 0;return a(d,f(d)+1,E)},encodeVertexBuffer:function(d,_,A){i(A>0&&A<=256),i(A%4==0);var E=t.exports.meshopt_encodeVertexBufferBound(_,A);return u(t.exports.meshopt_encodeVertexBuffer,E,d,_,A)},encodeIndexBuffer:function(d,_,A){i(A==2||A==4),i(_%3==0);var E=l(d,A),v=t.exports.meshopt_encodeIndexBufferBound(_,f(E)+1);return u(t.exports.meshopt_encodeIndexBuffer,v,E,_,4)},encodeIndexSequence:function(d,_,A){i(A==2||A==4);var E=l(d,A),v=t.exports.meshopt_encodeIndexSequenceBound(_,f(E)+1);return u(t.exports.meshopt_encodeIndexSequence,v,E,_,4)},encodeGltfBuffer:function(d,_,A,E){var v={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return i(v[E]),v[E](d,_,A)},encodeFilterOct:function(d,_,A,E){return i(A==4||A==8),i(E>=1&&E<=16),p(t.exports.meshopt_encodeFilterOct,d,_,A,E,16)},encodeFilterQuat:function(d,_,A,E){return i(A==8),i(E>=4&&E<=16),p(t.exports.meshopt_encodeFilterQuat,d,_,A,E,16)},encodeFilterExp:function(d,_,A,E){return i(A>0&&A%4==0),i(E>=1&&E<=24),p(t.exports.meshopt_encodeFilterExp,d,_,A,E,A)}}}(),Ov=function(){var o="B9h79tEBBBE8fV9gBB9gVUUUUUEU9gIUUUB9gEUEU9gIUUUEUIKQBEEEDDDILLVIEBEOWEUEC+Q/IEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBEy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBDe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBIl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBLk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBOL79iv9rBRQ+p8yQDBK/3SEZU8jJJJJBCJ/EB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rADZ1JJJBHWCJ/ABAD9uHOAICEFHLDNADtMBAOC/wfBgGOCJDAOCJD6eHdCBHQINAQAE9PMEAdAEAQ9rAQAdFAE6eGKCSFGOCL4CIFCD4HXDNDNDNDNAOC9wgGMtMBCBHpCEHSAWCJDFHZALHhINARAh9rAX6MIDNARAhAXFGL9rCk6MBCZHOINAWCJ/CBFAOGIFGOC9wFHoDNDNDNDNDNAhAIC9wFGaCO4FrBBAaCI4COg4CIgpLBEDIBKAo9CB83IBAoCWF9CB83IBXIKAoALrBLALrBBGaCO4GcAcCIsGce86BBAOCgFALCLFAcFGorBBAaCL4CIgGcAcCIsGce86BBAOCvFAoAcFGorBBAaCD4CIgGcAcCIsGce86BBAOC7FAoAcFGorBBAaCIgGaAaCIsGae86BBAOCTFAoAaFGarBBALrBEGoCO4GcAcCIsGce86BBAOC91FAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOC4FAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOC93FAaAcFGarBBAoCIgGoAoCIsGoe86BBAOC94FAaAoFGarBBALrBDGoCO4GcAcCIsGce86BBAOC95FAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOC96FAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOC97FAaAcFGarBBAoCIgGoAoCIsGoe86BBAOC98FAaAoFGorBBALrBIGLCO4GaAaCIsGae86BBAOC99FAoAaFGorBBALCL4CIgGaAaCIsGae86BBAOC9+FAoAaFGorBBALCD4CIgGaAaCIsGae86BBAOCUFAoAaFGOrBBALCIgGLALCIsGLe86BBAOALFHLXDKAoALrBWALrBBGaCL4GcAcCSsGce86BBAOCgFALCWFAcFGorBBAaCSgGaAaCSsGae86BBAOCvFAoAaFGorBBALrBEGaCL4GcAcCSsGce86BBAOC7FAoAcFGorBBAaCSgGaAaCSsGae86BBAOCTFAoAaFGorBBALrBDGaCL4GcAcCSsGce86BBAOC91FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC4FAoAaFGorBBALrBIGaCL4GcAcCSsGce86BBAOC93FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC94FAoAaFGorBBALrBLGaCL4GcAcCSsGce86BBAOC95FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC96FAoAaFGorBBALrBVGaCL4GcAcCSsGce86BBAOC97FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC98FAoAaFGorBBALrBOGaCL4GcAcCSsGce86BBAOC99FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC9+FAoAaFGorBBALrBRGLCL4GaAaCSsGae86BBAOCUFAoAaFGOrBBALCSgGLALCSsGLe86BBAOALFHLXEKAoAL8pBB83BBAoCWFALCWF8pBB83BBALCZFHLKDNAIAM9PMBAICZFHOARAL9rCl0MEKKAIAM6MIALtMIDNAKtMBAWApFrBBHoCBHOAZHIINAIAWCJ/CBFAOFrBBGaCE4CBAaCEg9r7AoFGo86BBAIADFHIAOCEFGOAK9HMBKKAZCEFHZApCEFGpAD6HSALHhApAD9HMEXVKKCBHLASCEgMDXIKALAXAD2FHcDNAKtMBCBHhCEHSAWCJDFHMINARAL9rAX6MIALtMDALAXFHLAWAhFrBBHoCBHOAMHIINAIAWCJ/CBFAOFrBBGaCE4CBAaCEg9r7AoFGo86BBAIADFHIAOCEFGOAK9HMBKAMCEFHMAhCEFGhAD6HSAhAD9HMBKAcHLXIKCBHOCEHSINARAL9rAX6MDALtMEALAXFHLAOCEFGOAD6HSADAO9HMBKAcHLXDKCBHLASCEgtMEKC9+HOXIKABAQAD2FAWCJDFAKAD2Z1JJJB8aAWAWCJDFAKCUFAD2FADZ1JJJB8aAKAQFHQALMBKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/EBF8kJJJJBAOK/YZEhU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJEZ+JJJJB8aAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHODNAEtMBCMCSAdCEseHKCBHXCBHMCBHdCBHICBHLINDNAOAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFALARCL4CU7FCSgCITFGpYDLHSApYDBHZDNARCSgGpAK9PMBAVAIARCU7FCSgCDTFYDBAXApeHRAptHpDNDNADCD9HMBABAdCETFGhAZ87EBAhCDFAS87EBAhCLFAR87EBXEKABAdCDTFGhAZbDBAhCLFASbDBAhCWFARbDBKAXApFHXAVC/ABFALCITFGhARbDBAhASbDLAVAICDTFARbDBAVC/ABFALCEFCSgGLCITFGhAZbDBAhARbDLAIApFHIALCEFHLXDKDNDNApCSsMBAMApFApC987FCEFHMXEKAOCEFHRAO8sBBGpCfEgHhDNDNApCU9MMBARHOXEKAOCVFHOAhCfBgHhCRHpDNINAR8sBBGoCfBgApTAhvHhAoCU9KMEARCEFHRApCRFGpC8j9HMBXDKKARCEFHOKAhCE4CBAhCEg9r7AMFHMKDNDNADCD9HMBABAdCETFGRAZ87EBARCDFAS87EBARCLFAM87EBXEKABAdCDTFGRAZbDBARCLFASbDBARCWFAMbDBKAVC/ABFALCITFGRAMbDBARASbDLAVAICDTFAMbDBAVC/ABFALCEFCSgGLCITFGRAZbDBARAMbDLAICEFHIALCEFHLXEKDNARCPE0MBAXCEFGoAVAIAQARCSgFrBBGpCL49rCSgCDTFYDBApCZ6GheHRAVAIAp9rCSgCDTFYDBAoAhFGSApCSgGoeHpAotHoDNDNADCD9HMBABAdCETFGZAX87EBAZCDFAR87EBAZCLFAp87EBXEKABAdCDTFGZAXbDBAZCLFARbDBAZCWFApbDBKAVAICDTFAXbDBAVC/ABFALCITFGZARbDBAZAXbDLAVAICEFGICSgCDTFARbDBAVC/ABFALCEFCSgCITFGZApbDBAZARbDLAVAIAhFCSgGICDTFApbDBAVC/ABFALCDFCSgGLCITFGRAXbDBARApbDLALCEFHLAIAoFHIASAoFHXXEKAXCBAOrBBGZeGaARC/+EsGRFHSAZCSgHcAZCL4HxDNDNAZCS0MBASCEFHoXEKASHoAVAIAx9rCSgCDTFYDBHSKDNDNAcMBAoCEFHXXEKAoHXAVAIAZ9rCSgCDTFYDBHoKDNDNARtMBAOCEFHRXEKAOCDFHRAO8sBEGhCfEgHpDNAhCU9KMBAOCOFHaApCfBgHpCRHODNINAR8sBBGhCfBgAOTApvHpAhCU9KMEARCEFHRAOCRFGOC8j9HMBKAaHRXEKARCEFHRKApCE4CBApCEg9r7AMFGMHaKDNDNAxCSsMBARHpXEKARCEFHpAR8sBBGOCfEgHhDNAOCU9KMBARCVFHSAhCfBgHhCRHODNINAp8sBBGRCfBgAOTAhvHhARCU9KMEApCEFHpAOCRFGOC8j9HMBKASHpXEKApCEFHpKAhCE4CBAhCEg9r7AMFGMHSKDNDNAcCSsMBApHOXEKApCEFHOAp8sBBGRCfEgHhDNARCU9KMBApCVFHoAhCfBgHhCRHRDNINAO8sBBGpCfBgARTAhvHhApCU9KMEAOCEFHOARCRFGRC8j9HMBKAoHOXEKAOCEFHOKAhCE4CBAhCEg9r7AMFGMHoKDNDNADCD9HMBABAdCETFGRAa87EBARCDFAS87EBARCLFAo87EBXEKABAdCDTFGRAabDBARCLFASbDBARCWFAobDBKAVC/ABFALCITFGRASbDBARAabDLAVAICDTFAabDBAVC/ABFALCEFCSgCITFGRAobDBARASbDLAVAICEFGICSgCDTFASbDBAVC/ABFALCDFCSgCITFGRAabDBARAobDLAVAIAZCZ6AxCSsvFGICSgCDTFAobDBAIActAcCSsvFHIALCIFHLKAWCEFHWALCSgHLAICSgHIAdCIFGdAE6MBKKCBC99AOAQseHOKAVC/AEF8kJJJJBAOK+LLEVU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHRAIALFC98FHWDNAEtMBDNADCDsMBCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCDTFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGLbDBAOALbDBAdCEFGdAE9HMBXDKKCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCETFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGL87EBAOALbDBAdCEFGdAE9HMBKKCBC99ARAWseHOKAOK+lVOEUE99DUD99EUD99DNDNADCL9HMBAEtMEINDNDNABCDFGD8sBB+yAB8sBBGI+yGL+L+TABCEFGV8sBBGO+yGR+L+TGWjBB/+9CAWAWnjBBBBAWAWjBBBB9gGdeGQ+MGKAQAICB9IeALmGWAWnAKAQAOCB9IeARmGQAQnmm+R+VGLnjBBBzjBBB+/AdemGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKADAI86BBDNDNAQALnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHDXEKCJJJJ94HDKAVAD86BBDNDNAWALnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD86BBABCLFHBAECUFGEMBXDKKAEtMBINDNDNABCLFGD8uEB+yAB8uEBGI+yGL+L+TABCDFGV8uEBGO+yGR+L+TGWjB/+fsAWAWnjBBBBAWAWjBBBB9gGdeGQ+MGKAQAICB9IeALmGWAWnAKAQAOCB9IeARmGQAQnmm+R+VGLnjBBBzjBBB+/AdemGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKADAI87EBDNDNAQALnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHDXEKCJJJJ94HDKAVAD87EBDNDNAWALnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD87EBABCWFHBAECUFGEMBKKK/SILIUI99IUE99DNAEtMBCBHIABHLINDNDNj/zL81zALCOF8uEBGVCIv+y+VGOAL8uEB+ynGRjB/+fsnjBBBzjBBB+/ARjBBBB9gemGW+LjBBB9P9dtMBAW+oHdXEKCJJJJ94HdKALCLF8uEBHQALCDF8uEBHKABAVCEFCIgAIvCETFAd87EBDNDNAOAK+ynGWjB/+fsnjBBBzjBBB+/AWjBBBB9gemGX+LjBBB9P9dtMBAX+oHKXEKCJJJJ94HKKABAVCDFCIgAIvCETFAK87EBDNDNAOAQ+ynGOjB/+fsnjBBBzjBBB+/AOjBBBB9gemGX+LjBBB9P9dtMBAX+oHQXEKCJJJJ94HQKABAVCUFCIgAIvCETFAQ87EBDNDNjBBJzARARn+TAWAWn+TAOAOn+TGRjBBBBARjBBBB9ge+RjB/+fsnjBBBzmGR+LjBBB9P9dtMBAR+oHQXEKCJJJJ94HQKABAVCIgAIvCETFAQ87EBALCWFHLAICLFHIAECUFGEMBKKK9MBDNADCD4AE2GEtMBINABABYDBGDCWTCW91+yADCE91CJJJ/8IFCJJJ98g++nuDBABCLFHBAECUFGEMBKKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABKKKEBCJWKLZ9kBB",e="B9h79tEBBBEkL9gBB9gVUUUUUEU9gIUUUB9gEUEUIKQBBEBEEDDDILVE9wEEEVIEBEOWEUEC+Q/aEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBDy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBLe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBOk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBRl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBWL79iv9rBdQ/T9TQLBZIK9+EVU8jJJJJBCZ9rHBCBHEINCBHDCBHIINABCWFADFAICJUAEAD4CEgGLe86BBAIALFHIADCEFGDCW9HMBKAEC+Q+YJJBFAI86BBAECITC+Q1JJBFAB8pIW83IBAECEFGECJD9HMBKK/H8jLhUD97EUO978jJJJJBCJ/KB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rAD/8QBBCJ/ABAD9uHOAICEFHLDNADtMBAOC/wfBgGOCJDAOCJD6eHWCBHdINAdAE9PMEAWAEAd9rAdAWFAE6eGQCSFGOC9wgGKCI2HXAKCETHMAOCL4CIFCD4HpABAdAD2FHSCBHZDNINCEHhALHoCBHaDNINARAo9rAp6MIAVCJ/CBFAaAK2FHcAoApFHLCBHIDNAKC/AB6MBARAL9rC/gB6MBCBHOINAcAOFHIDNDNDNDNDNAoAOCO4FrBBGxCIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLBXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLBALCZFHLKDNDNDNDNDNAxCD4CIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLZXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLZALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLZALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLZALCZFHLKDNDNDNDNDNAxCL4CIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLAXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLAALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLAALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLAALCZFHLKDNDNDNDNDNAxCO4pLBEDIBKAIPXBBBBBBBBBBBBBBBBPKL8wXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBAxC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKL8wALCLFAyPqBFAxC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBAxC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKL8wALCWFAyPqBFAxC+Q+YJJBFrBBFHLXEKAIALPBBBPKL8wALCZFHLKAOC/ABFHIAOCJEFAK0MEAIHOARAL9rC/fB0MBKKDNDNAIAK9PMBAICI4HOINARAL9rCk6MDAcAIFHxDNDNDNDNDNAoAICO4FrBBAOCOg4CIgpLBEDIBKAxPXBBBBBBBBBBBBBBBBPKLBXIKAxALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAxALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAxALPBBBPKLBALCZFHLKAOCDFHOAICZFGIAK6MBKKALtMBAaCI6HhALHoAaCEFGOHaAOCLsMDXEKKCBHLAhCEgMDKDNAKtMBAVCJDFAZFHIAVAZFPBDBHyCBHxINAIAVCJ/CBFAxFGOPBLBGlCEP9tAlPXEEEEEEEEEEEEEEEEGqP9OP9hP9RGlAOAKFPBLBG8aCEP9tA8aAqP9OP9hP9RG8aPMBZEhDoIaLcVxOqRlGeAOAMFPBLBG3CEP9tA3AqP9OP9hP9RG3AOAXFPBLBG5CEP9tA5AqP9OP9hP9RG5PMBZEhDoIaLcVxOqRlG8ePMBEZhDIoaLVcxORqlGqAqPMBEDIBEDIBEDIBEDIAyP9uGyP9aDBBAIADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAeA8ePMWdkyQK8aeXM35pS8e8fGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAlA8aPMWkdyQ8aKeX3M5p8eS8fGlA3A5PMWkdyQ8aKeX3M5p8eS8fG8aPMBEZhDIoaLVcxORqlGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAlA8aPMWdkyQK8aeXM35pS8e8fGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFHIAxCZFGxAK6MBKKAZCLFGZAD6MBKASAVCJDFAQAD2/8QBBAVAVCJDFAQCUFAD2FAD/8QBBAQAdFHdC9+HOALMEXIKKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/KBF8kJJJJBAOKWBZ+BJJJBK/UZEhU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJE/8KBAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHODNAEtMBCMCSAdCEseHKCBHXCBHMCBHdCBHICBHLINDNAOAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFALARCL4CU7FCSgCITFGpYDLHSApYDBHZDNARCSgGpAK9PMBAVAIARCU7FCSgCDTFYDBAXApeHRAptHpDNDNADCD9HMBABAdCETFGhAZ87EBAhCDFAS87EBAhCLFAR87EBXEKABAdCDTFGhAZbDBAhCLFASbDBAhCWFARbDBKAXApFHXAVC/ABFALCITFGhARbDBAhASbDLAVAICDTFARbDBAVC/ABFALCEFCSgGLCITFGhAZbDBAhARbDLAIApFHIALCEFHLXDKDNDNApCSsMBAMApFApC987FCEFHMXEKAOCEFHRAO8sBBGpCfEgHhDNDNApCU9MMBARHOXEKAOCVFHOAhCfBgHhCRHpDNINAR8sBBGoCfBgApTAhvHhAoCU9KMEARCEFHRApCRFGpC8j9HMBXDKKARCEFHOKAhCE4CBAhCEg9r7AMFHMKDNDNADCD9HMBABAdCETFGRAZ87EBARCDFAS87EBARCLFAM87EBXEKABAdCDTFGRAZbDBARCLFASbDBARCWFAMbDBKAVC/ABFALCITFGRAMbDBARASbDLAVAICDTFAMbDBAVC/ABFALCEFCSgGLCITFGRAZbDBARAMbDLAICEFHIALCEFHLXEKDNARCPE0MBAXCEFGoAVAIAQARCSgFrBBGpCL49rCSgCDTFYDBApCZ6GheHRAVAIAp9rCSgCDTFYDBAoAhFGSApCSgGoeHpAotHoDNDNADCD9HMBABAdCETFGZAX87EBAZCDFAR87EBAZCLFAp87EBXEKABAdCDTFGZAXbDBAZCLFARbDBAZCWFApbDBKAVAICDTFAXbDBAVC/ABFALCITFGZARbDBAZAXbDLAVAICEFGICSgCDTFARbDBAVC/ABFALCEFCSgCITFGZApbDBAZARbDLAVAIAhFCSgGICDTFApbDBAVC/ABFALCDFCSgGLCITFGRAXbDBARApbDLALCEFHLAIAoFHIASAoFHXXEKAXCBAOrBBGZeGaARC/+EsGRFHSAZCSgHcAZCL4HxDNDNAZCS0MBASCEFHoXEKASHoAVAIAx9rCSgCDTFYDBHSKDNDNAcMBAoCEFHXXEKAoHXAVAIAZ9rCSgCDTFYDBHoKDNDNARtMBAOCEFHRXEKAOCDFHRAO8sBEGhCfEgHpDNAhCU9KMBAOCOFHaApCfBgHpCRHODNINAR8sBBGhCfBgAOTApvHpAhCU9KMEARCEFHRAOCRFGOC8j9HMBKAaHRXEKARCEFHRKApCE4CBApCEg9r7AMFGMHaKDNDNAxCSsMBARHpXEKARCEFHpAR8sBBGOCfEgHhDNAOCU9KMBARCVFHSAhCfBgHhCRHODNINAp8sBBGRCfBgAOTAhvHhARCU9KMEApCEFHpAOCRFGOC8j9HMBKASHpXEKApCEFHpKAhCE4CBAhCEg9r7AMFGMHSKDNDNAcCSsMBApHOXEKApCEFHOAp8sBBGRCfEgHhDNARCU9KMBApCVFHoAhCfBgHhCRHRDNINAO8sBBGpCfBgARTAhvHhApCU9KMEAOCEFHOARCRFGRC8j9HMBKAoHOXEKAOCEFHOKAhCE4CBAhCEg9r7AMFGMHoKDNDNADCD9HMBABAdCETFGRAa87EBARCDFAS87EBARCLFAo87EBXEKABAdCDTFGRAabDBARCLFASbDBARCWFAobDBKAVC/ABFALCITFGRASbDBARAabDLAVAICDTFAabDBAVC/ABFALCEFCSgCITFGRAobDBARASbDLAVAICEFGICSgCDTFASbDBAVC/ABFALCDFCSgCITFGRAabDBARAobDLAVAIAZCZ6AxCSsvFGICSgCDTFAobDBAIActAcCSsvFHIALCIFHLKAWCEFHWALCSgHLAICSgHIAdCIFGdAE6MBKKCBC99AOAQseHOKAVC/AEF8kJJJJBAOK+LLEVU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHRAIALFC98FHWDNAEtMBDNADCDsMBCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCDTFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGLbDBAOALbDBAdCEFGdAE9HMBXDKKCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCETFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGL87EBAOALbDBAdCEFGdAE9HMBKKCBC99ARAWseHOKAOK+epLIUO97EUE978jJJJJBCA9rHIDNDNADCL9HMBDNAEC98gGLtMBCBHVABHDINADADPBBBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdPXBBBBBBBBBBBBBBBBP+2EGQARPXBBBJBBBJBBBJBBBJGKP9OP9RP/kEGRPXBB/+9CBB/+9CBB/+9CBB/+9CARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEPXBBN0BBN0BBN0BBN0GQP/kEPXfBBBfBBBfBBBfBBBP9OAOPXBBBfBBBfBBBfBBBfP9OP9QARAWP/mEAQP/kECWP+rEPXBfBBBfBBBfBBBfBBP9OP9QAdAWP/mEAQP/kECZP+rEPXBBfBBBfBBBfBBBfBP9OP9QPKBBADCZFHDAVCLFGVAL6MBKKALAE9PMEAIAECIgGVCDTGDvCBCZAD9r/8KBAIABALCDTFGLAD/8QBBDNAVtMBAIAIPBLBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdPXBBBBBBBBBBBBBBBBP+2EGQARPXBBBJBBBJBBBJBBBJGKP9OP9RP/kEGRPXBB/+9CBB/+9CBB/+9CBB/+9CARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEPXBBN0BBN0BBN0BBN0GQP/kEPXfBBBfBBBfBBBfBBBP9OAOPXBBBfBBBfBBBfBBBfP9OP9QARAWP/mEAQP/kECWP+rEPXBfBBBfBBBfBBBfBBP9OP9QAdAWP/mEAQP/kECZP+rEPXBBfBBBfBBBfBBBfBP9OP9QPKLBKALAIAD/8QBBSKDNAEC98gGXtMBCBHVABHDINADCZFGLALPBBBGOPXBBBBBBffBBBBBBffGKP9OADPBBBGdAOPMLVORXMpScxql358e8fPXfUBBfUBBfUBBfUBBP9OP/6EAdAOPMBEDIWdQKZhoaky8aeGOCZP+sEP/6EGRP/gEAOCZP+rECZP+sEP/6EGWP/gEP/kEP/lEGOPXB/+fsB/+fsB/+fsB/+fsAWAOPXBBBBBBBBBBBBBBBBP+2EGQAWPXBBBJBBBJBBBJBBBJGMP9OP9RP/kEGWAWP/mEAOAOP/mEARAQARAMP9OP9RP/kEGOAOP/mEP/kEP/kEP/jEP/nEGRP/mEPXBBN0BBN0BBN0BBN0GQP/kECZP+rEAWARP/mEAQP/kEPXffBBffBBffBBffBBP9OP9QGWAOARP/mEAQP/kEPXffBBffBBffBBffBBP9OGOPMWdkyQK8aeXM35pS8e8fP9QPKBBADAdAKP9OAWAOPMBEZhDIoaLVcxORqlP9QPKBBADCAFHDAVCLFGVAX6MBKKAXAE9PMBAIAECIgGVCITGDFCBCAAD9r/8KBAIABAXCITFGLAD/8QBBDNAVtMBAIAIPBLZGOPXBBBBBBffBBBBBBffGKP9OAIPBLBGdAOPMLVORXMpScxql358e8fPXfUBBfUBBfUBBfUBBP9OP/6EAdAOPMBEDIWdQKZhoaky8aeGOCZP+sEP/6EGRP/gEAOCZP+rECZP+sEP/6EGWP/gEP/kEP/lEGOPXB/+fsB/+fsB/+fsB/+fsAWAOPXBBBBBBBBBBBBBBBBP+2EGQAWPXBBBJBBBJBBBJBBBJGMP9OP9RP/kEGWAWP/mEAOAOP/mEARAQARAMP9OP9RP/kEGOAOP/mEP/kEP/kEP/jEP/nEGRP/mEPXBBN0BBN0BBN0BBN0GQP/kECZP+rEAWARP/mEAQP/kEPXffBBffBBffBBffBBP9OP9QGWAOARP/mEAQP/kEPXffBBffBBffBBffBBP9OGOPMWdkyQK8aeXM35pS8e8fP9QPKLZAIAdAKP9OAWAOPMBEZhDIoaLVcxORqlP9QPKLBKALAIAD/8QBBKK/4WLLUE97EUV978jJJJJBC8w9rHIDNAEC98gGLtMBCBHVABHOINAIAOPBBBGRAOCZFGWPBBBGdPMLVORXMpScxql358e8fGQCZP+sEGKCLP+rEPKLBAOPXBBJzBBJzBBJzBBJzPX/zL81z/zL81z/zL81z/zL81zAKPXIBBBIBBBIBBBIBBBP9QP/6EP/nEGKARAdPMBEDIWdQKZhoaky8aeGRCZP+rECZP+sEP/6EP/mEGdAdP/mEAKARCZP+sEP/6EP/mEGXAXP/mEAKAQCZP+rECZP+sEP/6EP/mEGQAQP/mEP/kEP/kEP/lEPXBBBBBBBBBBBBBBBBP+4EP/jEPXB/+fsB/+fsB/+fsB/+fsGKP/mEPXBBN0BBN0BBN0BBN0GRP/kEPXffBBffBBffBBffBBGMP9OAXAKP/mEARP/kECZP+rEP9QGXAQAKP/mEARP/kECZP+rEAdAKP/mEARP/kEAMP9OP9QGKPMBEZhDIoaLVcxORqlGRP5BAIPBLBPeB+t+J83IBAOCWFARP5EAIPBLBPeE+t+J83IBAWAXAKPMWdkyQK8aeXM35pS8e8fGKP5BAIPBLBPeD+t+J83IBAOCkFAKP5EAIPBLBPeI+t+J83IBAOCAFHOAVCLFGVAL6MBKKDNALAE9PMBAIAECIgGVCITGOFCBCAAO9r/8KBAIABALCITFGWAO/8QBBDNAVtMBAIAIPBLBGRAIPBLZGdPMLVORXMpScxql358e8fGQCZP+sEGKCLP+rEPKLAAIPXBBJzBBJzBBJzBBJzPX/zL81z/zL81z/zL81z/zL81zAKPXIBBBIBBBIBBBIBBBP9QP/6EP/nEGKARAdPMBEDIWdQKZhoaky8aeGRCZP+rECZP+sEP/6EP/mEGdAdP/mEAKARCZP+sEP/6EP/mEGXAXP/mEAKAQCZP+rECZP+sEP/6EP/mEGQAQP/mEP/kEP/kEP/lEPXBBBBBBBBBBBBBBBBP+4EP/jEPXB/+fsB/+fsB/+fsB/+fsGKP/mEPXBBN0BBN0BBN0BBN0GRP/kEPXffBBffBBffBBffBBGMP9OAXAKP/mEARP/kECZP+rEP9QGXAQAKP/mEARP/kECZP+rEAdAKP/mEARP/kEAMP9OP9QGKPMBEZhDIoaLVcxORqlGRP5BAIPBLAPeB+t+J83IBAIARP5EAIPBLAPeE+t+J83IWAIAXAKPMWdkyQK8aeXM35pS8e8fGKP5BAIPBLAPeD+t+J83IZAIAKP5EAIPBLAPeI+t+J83IkKAWAIAO/8QBBKK+pDDIUE978jJJJJBC/AB9rHIDNADCD4AE2GLC98gGVtMBCBHDABHEINAEAEPBBBGOCWP+rECWP+sEP/6EAOCEP+sEPXBBJzBBJzBBJzBBJzP+uEPXBBJfBBJfBBJfBBJfP9OP/mEPKBBAECZFHEADCLFGDAV6MBKKDNAVAL9PMBAIALCIgGDCDTGEvCBC/ABAE9r/8KBAIABAVCDTFGVAE/8QBBDNADtMBAIAIPBLBGOCWP+rECWP+sEP/6EAOCEP+sEPXBBJzBBJzBBJzBBJzP+uEPXBBJfBBJfBBJfBBJfP9OP/mEPKLBKAVAIAE/8QBBKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIKKKEBCJWKLZ9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=o;WebAssembly.validate(t)&&(r=e);var i,s=WebAssembly.instantiate(a(r),{}).then(function(p){i=p.instance,i.exports.__wasm_call_ctors()});function a(p){for(var d=new Uint8Array(p.length),_=0;_<p.length;++_){var A=p.charCodeAt(_);d[_]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}for(var E=0,_=0;_<p.length;++_)d[E++]=d[_]<60?n[d[_]]:(d[_]-60)*64+d[++_];return d.buffer.slice(0,E)}function u(p,d,_,A,E,v){var T=i.exports.sbrk,P=_+3&-4,I=T(P*A),k=T(E.length),K=new Uint8Array(i.exports.memory.buffer);K.set(E,k);var ee=p(I,_,A,k,E.length);if(ee==0&&v&&v(I,P,A),d.set(K.subarray(I,I+_*A)),T(I-T(0)),ee!=0)throw new Error("Malformed buffer data: "+ee)}var f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:s,supported:!0,decodeVertexBuffer:function(p,d,_,A,E){u(i.exports.meshopt_decodeVertexBuffer,p,d,_,A,i.exports[f[E]])},decodeIndexBuffer:function(p,d,_,A){u(i.exports.meshopt_decodeIndexBuffer,p,d,_,A)},decodeIndexSequence:function(p,d,_,A){u(i.exports.meshopt_decodeIndexSequence,p,d,_,A)},decodeGltfBuffer:function(p,d,_,A,E,v){u(i.exports[l[E]],p,d,_,A,i.exports[f[v]])}}}(),Nv=function(){var o="B9h79tEBBBECd9gEUEU9gEUB9gBB9gQUUUUUUU99UUEU9gVUUUUUB9gLUUUUE999gIUUUE999gLUUUUEU9gIUUUEUIMXDILVORBWWBEWLVE9wEIIVIEBEOWEUECJ/JEKR7OO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BBZ9tw79o9v9wT9f79p9t9w29p9m95BEx9tw79o9v9wT9f79p9t9w29p9m959T9j9h2wBLA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBVL79iv9rBOdWEBCEKDdQQ+stXDBK/48yIkUp99hU8jJJJJBCJ/BB9rGQ8kJJJJBAQCkFCBC/kBZ1JJJB8aCUALCDTGKALCffffI0eGXCBYD/s1JJBhJJJJBBHMAQCkFAQYD94GpCDTFAMbDBAQAMbDWAQApCEFbD94AXCBYD/s1JJBhJJJJBBHSAQCkFAQYD94GpCDTFASbDBAQASbDXAQApCEFbD94CUADCITADCffffE0eCBYD/s1JJBhJJJJBBHZAQCkFAQYD94GpCDTFAZbDBAQAZbDZAQApCEFbD94AQCWFAEADALCBZ+CJJJBAXCBYD/s1JJBhJJJJBBHhAQCkFAQYD94GpCDTFAhbDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHoAQCkFAQYD94GpCDTFAobDBAQApCEFbD94ALCD4ALFHaCEHcINAcGpCETHcApAa6MBKCBHxCUApCDTGaApCffffI0eCBYD/s1JJBhJJJJBBHcAQCkFAQYD94GqCDTFAcbDBAQAqCEFbD94AcCfEAaZ1JJJBHlDNALtMBAVCD4HkApCUFHqINAIAxAk2CDTFGyYDLGpCh4Ap7C+f+B+dd2AyYDBGpCh4Ap7C/d/o+b8j27AyYDWGpCh4Ap7C+3f/n8n27HaCBHpDNDNINAlAaAqgGaCDTFG8aYDBGcCUsMEAIAcAk2CDTFAyCXZ+LJJJBtMDApCEFGpAaFHaApAq9NMBXDKKA8aAxbDBAxHcKAhAxCDTFAcbDBAxCEFGxAL9HMBKCBHpAoHcINAcApbDBAcCLFHcALApCEFGp9HMBKCBHpAhHcAoHaINDNApAcYDBGqsMBAaAoAqCDTFGqYDBbDBAqApbDBKAcCLFHcAaCLFHaALApCEFGp9HMBKKCBHaALCBYD/s1JJBhJJJJBBHyAQCkFAQYD94GpCDTFAybDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHpAQCkFAQYD94GcCDTFApbDBAQAcCEFbD94AXCBYD/s1JJBhJJJJBBHcAQCkFAQYD94GqCDTFAcbDBAQAqCEFbD94ApCfEAKZ1JJJBHeAcCfEAKZ1JJJBH3DNALtMBAZCWFH5INDNAMAaCDTGpFYDBG8etMBAZASApFYDBCITFH8fA3ApFHAAeApFHxCBHkINDNDNA8fAkCITFYDBGlAa9HMBAxAabDBAAAabDBXEKDNAMAlCDTGKFYDBGHtMBAZASAKFYDBCITGpFYDBAasMEAHCUFH8aA5ApFHcCBHpINA8aApsMEApCEFHpAcYDBHqAcCWFHcAqAa9HMBKApAH6MEKA3AKFGpAaAlApYDBCUsebDBAxAlAaAxYDBCUsebDBKAkCEFGkA8e9HMBKKAaCEFGaAL9HMBKAhHcAoHaA3HqAeHkCBHpINDNDNApAcYDBG8a9HMBDNApAaYDBG8a9HMBAkYDBH8aDNAqYDBGlCU9HMBA8aCU9HMBAyApFCB86BBXIKAyApFHxDNApAlsMBApA8asMBAxCE86BBXIKAxCL86BBXDKDNApAoA8aCDTGlFYDB9HMBDNAqYDBGxCUsMBApAxsMBAkYDBGKCUsMBApAKsMBA3AlFYDBG8eCUsMBA8eA8asMBAeAlFYDBGlCUsMBAlA8asMBDNAhAxCDTFYDBAhAlCDTFYDB9HMBAhAKCDTFYDBAhA8eCDTFYDB9HMBAyApFCD86BBXLKAyApFCL86BBXIKAyApFCL86BBXDKAyApFCL86BBXEKAyApFAyA8aFrBB86BBKAcCLFHcAaCLFHaAqCLFHqAkCLFHkALApCEFGp9HMBKAWCEgtMBAyHpALHcINDNAprBBCE9HMBApCL86BBKApCEFHpAcCUFGcMBKKCBHkCUALCX2ALC/V+q/V+qE0eCBYD/s1JJBhJJJJBBHMAQCkFAQYD94GpCDTFAMbDBAQApCEFbD94AMAIALAVZ+DJJJB8aCUALC8s2GcALC/d/o/F8u0eCBYD/s1JJBhJJJJBBHpAQCkFAQYD94GaCDTFApbDBAQAaCEFbD94ApCBAcZ1JJJBHZDNADtMBAEHcINDNAMAcCLFYDBG8aCX2FGpiDBAMAcYDBGlCX2FGaiDBGG+TG8jAMAcCWFYDBGxCX2FGqCLFiDBAaCLFiDBG8k+TG8lnAqiDBAG+TG8mApCLFiDBA8k+TG8nn+TGYAYnA8nAqCWFiDBAaCWFiDBG8p+TGinA8lApCWFiDBA8p+TG8nn+TG8lA8lnA8nA8mnAiA8jn+TG8jA8jnmm+RG8mjBBBB9etMBAYA8m+VHYA8jA8m+VH8jA8lA8m+VH8lKAZAhAlCDTFYDBC8s2FGpA8lA8m+RG8mA8lnnG8nApiDBmuDBApA8jA8mA8jnG8rnGiApiDLmuDLApAYA8mAYnG8snGrApiDWmuDWApA8rA8lnG8rApiDXmuDXApA8sA8lnG8uApiDZmuDZApA8sA8jnG8sApiDcmuDcApA8lA8mAYA8pnA8lAGnA8kA8jnmm+MG8knGGnG8lApiDkmuDkApA8jAGnG8jApiD3muD3ApAYAGnGYApiDAmuDAApAGA8knGGApiD8kmuD8kApA8mApiDYmuDYAZAhA8aCDTFYDBC8s2FGpA8nApiDBmuDBApAiApiDLmuDLApArApiDWmuDWApA8rApiDXmuDXApA8uApiDZmuDZApA8sApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApAYApiDAmuDAApAGApiD8kmuD8kApA8mApiDYmuDYAZAhAxCDTFYDBC8s2FGpA8nApiDBmuDBApAiApiDLmuDLApArApiDWmuDWApA8rApiDXmuDXApA8uApiDZmuDZApA8sApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApAYApiDAmuDAApAGApiD8kmuD8kApA8mApiDYmuDYAcCXFHcAkCIFGkAD6MBKCBH8aAEHxINCBHcINAyAEAcC+81JJBFYDBGlA8aFCDTFYDBGaFrBBHpDNDNAyAxAcFYDBGqFrBBGkC99FCfEgCPE0MBApCEsMBApCD9HMEKDNAkCUFCfEgCE0MBAeAqCDTFYDBAa9HMEKDNApCUFCfEgCE0MBA3AaCDTFYDBAq9HMEKDNAkCV2ApFC+g1JJBFrBBtMBAhAaCDTFYDBAhAqCDTFYDB0MEKjBBACjBBJzApCEseH8mAkCEsHKAEAlCDTC+81JJBFYDBA8aFCDTFYDBHlDNAMAaCX2FGpCWFiDBAMAqCX2FGkCWFiDBG8k+TG8lA8lnApiDBAkiDBG8p+TG8jA8jnApCLFiDBAkCLFiDBG8n+TGYAYnmm+RGGjBBBB9etMBA8lAG+VH8lAYAG+VHYA8jAG+VH8jKjBBACA8mAKeH8sDNAMAlCX2FGpiDWA8k+TG8mA8lA8mA8lnApiDBA8p+TGrA8jnAYApiDLA8n+TG8rnmmGin+TG8mA8mnArA8jAin+TG8lA8lnA8rAYAin+TG8jA8jnmm+RGYjBBBB9etMBA8mAY+VH8mA8jAY+VH8jA8lAY+VH8lKAZAhAqCDTFYDBC8s2FGpA8lA8sAGnGYA8lnnGiApiDBmuDBApA8jAYA8jnG8snGrApiDLmuDLApA8mAYA8mnGGnG8rApiDWmuDWApA8sA8lnG8sApiDXmuDXApAGA8lnG8uApiDZmuDZApAGA8jnG8vApiDcmuDcApA8lAYA8mA8knA8lA8pnA8nA8jnmm+MG8knGGnG8lApiDkmuDkApA8jAGnG8jApiD3muD3ApA8mAGnG8mApiDAmuDAApAGA8knGGApiD8kmuD8kApAYApiDYmuDYAZAhAaCDTFYDBC8s2FGpAiApiDBmuDBApArApiDLmuDLApA8rApiDWmuDWApA8sApiDXmuDXApA8uApiDZmuDZApA8vApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApA8mApiDAmuDAApAGApiD8kmuD8kApAYApiDYmuDYKAcCLFGcCX9HMBKAxCXFHxA8aCIFG8aAD6MBKKDNABAEsMBABAEADCDTZ+HJJJB8aKCUADCX2ADC/V+q/V+qE0eCBYD/s1JJBhJJJJBBHAAQCkFAQYD94GpCDTFAAbDBAQApCEFbD94CUADCDTADCffffI0eCBYD/s1JJBhJJJJBBH5AQCkFAQYD94GpCDTFA5bDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHIAQCkFAQYD94GpCDTFAIbDBAQApCEFbD94ALCBYD/s1JJBhJJJJBBH8wAQCkFAQYD94GpCDTFA8wbDBAQApCEFbD94jBBBBHrDNADAO9NMBARARnH8sAACWFH8xAQYDZH8yAQYDXH8zAQYDWH80jBBBBHrINAQCWFABADGSALAhZ+CJJJBCBHHABHxCBHKINCBHpINDNAhAxApFYDBGaCDTGEFYDBGkAhABApC+81JJBFYDBAKFCDTFYDBGcCDTFYDBG8asMBAyAcFrBBGlCV2AyAaFrBBGqFC/Q1JJBFrBBGDAqCV2AlFG8eC/Q1JJBFrBBG8fvCfEgtMBDNA8eC+g1JJBFrBBtMBA8aAk0MEKDNAqAl9HMBAqCUFCfEgCE0MBAeAEFYDBAc9HMEKAAAHCX2FGqAcAaA8fCfEgGkebDLAqAaAcAkebDBAqADA8fgCfEgCB9HbDWAHCEFHHKApCLFGpCX9HMBKAxCXFHxAKCIFGKAS6MBKDNDNAHtMBAAHcAHH8aINAcCWFGljBBBBjBBJzAZAhAcYDBGaCDTFYDBC8s2FGpiDYG8l+VA8ljBBBB9beApiDWAMAcCLFGEYDBGqCX2FGkCWFiDBG8lnApiDZAkiDBG8jnApiDAmG8mA8mmmA8lnApiDLAkCLFiDBG8mnApiDcA8lnApiD3mG8lA8lmmA8mnApiDBA8jnApiDXA8mnApiDkmG8lA8lmmA8jnApiD8kmmm+LnGYjBBBBjBBJzAZAhAqAaAlYDBGkeGlCDTFYDBC8s2FGpiDYG8l+VA8ljBBBB9beApiDWAMAaAqAkeGxCX2FGkCWFiDBG8lnApiDZAkiDBG8jnApiDAmG8mA8mmmA8lnApiDLAkCLFiDBG8mnApiDcA8lnApiD3mG8lA8lmmA8mnApiDBA8jnApiDXA8mnApiDkmG8lA8lmmA8jnApiD8kmmm+LnG8lAYA8l9fGpeuDBAEAqAxApebDBAcAaAlApebDBAcCXFHcA8aCUFG8aMBKAQCJEFCBCJ/ABZ1JJJB8aA8xHpAHHcINAQCJEFApYDBCo4C/8zgFGaAaYDBCEFbDBApCXFHpAcCUFGcMBKCBHpCBHcINAQCJEFApFGaYDBHqAaAcbDBAqAcFHcApCLFGpCJ/AB9HMBKCBHpA8xHcINAQCJEFAcYDBCo4C/8zgFGaAaYDBGaCEFbDBA5AaCDTFApbDBAcCXFHcAHApCEFGp9HMBKASAO9rGaCI9uH81DNALtMBCBHpAIHcINAcApbDBAcCLFHcALApCEFGp9HMBKKCBHbA8wCBALZ1JJJBH83AaCo9uHuA81CE4H85CBH86CBHKDNINAAA5AKCDTFYDBCX2FGxiDWG8jA8s9eMEA86A819PMEjffUUH8lDNA85AH9PMBAAA5A85CDTFYDBCX2FiDWjBB/AznH8lKDNA8jA8l9etMBA86Au0MDKDNA83AhAxYDLG87CDTG88FYDBGaFG89rBBA83AhAxYDBGECDTG8+FYDBGzFGNrBBvMBDNA80AzCDTGpFYDBGqtMBA8yA8zApFYDBCITFHpAMAaCX2FG8eCWFHDA8eCLFHXAMAzCX2FG8fCWFHVA8fCLFHWCBHcCEHlDNINDNAIApYDBCDTFYDBGkAasMBAIApCLFYDBCDTFYDBG8aAasMBAMA8aCX2FG8aiDBAMAkCX2FGkiDBG8m+TG8lAWiDBAkCLFiDBGY+TGGnA8fiDBA8m+TG8kA8aCLFiDBAY+TG8jn+TA8lAXiDBAY+TG8pnA8eiDBA8m+TG8nA8jn+TnA8jAViDBAkCWFiDBGY+TGinAGA8aCWFiDBAY+TG8mn+TA8jADiDBAY+TGYnA8pA8mn+TnA8mA8knAiA8ln+TA8mA8nnAYA8ln+TnmmjBBBB9dMDKApCWFHpAcCEFGcAq6HlAqAc9HMBKKAlCEgtMBA85CEFH85XEKAxCWFHqAZAaC8s2FGpAZAzC8s2FGciDBApiDBmuDBApAciDLApiDLmuDLApAciDWApiDWmuDWApAciDXApiDXmuDXApAciDZApiDZmuDZApAciDcApiDcmuDcApAciDkApiDkmuDkApAciD3ApiD3muD3ApAciDAApiDAmuDAApAciD8kApiD8kmuD8kApAciDYApiDYmuDYDNDNDNDNAyAEFGcrBBC9+FpDEBDKAEHpINAIApCDTGpFAabDBAoApFYDBGpAE9HMBXIKKAoA88FYDBHpAoA8+FYDBHEAIA8+FA87bDBApH87KAIAECDTFA87bDBKANCE86BBA89CE86BBAqiDBG8lArArA8l9deHrAbCEFHbCECDAcrBBCEseA86FH86KAKCEFGKAH9HMBKKAbtMBDNALtMBCBHcAeHpINDNApYDBGaCUsMBDNAcAIAaCDTGqFYDBGa9HMBAeAqFYDBHaKApAabDBKApCLFHpALAcCEFGc9HMBKCBHcA3HpINDNApYDBGaCUsMBDNAcAIAaCDTGqFYDBGa9HMBA3AqFYDBHaKApAabDBKApCLFHpALAcCEFGc9HMBKKCBHDABHpCBHkINDNAIApYDBCDTFYDBGcAIApCLFYDBCDTFYDBGasMBAcAIApCWFYDBCDTFYDBGqsMBAaAqsMBABADCDTFG8aAcbDBA8aCLFAabDBA8aCWFAqbDBADCIFHDKApCXFHpAkCIFGkAS9PMDXBKKASHDXDKADAO0MBKKDNAdtMBAdAr+RuDBKAQYD94GpCDTAQCkFFC98FHhDNINAptMEAhYDBCBYD/w1JJBh+BJJJBBAhC98FHhApCUFHpXBKKAQCJ/BBF8kJJJJBADK/PLEOUABYDBCBAICDTZ1JJJB8aADCI9uHVDNADtMBABYDBHODNALtMBAEHRADHWINAOALARYDBCDTFYDBCDTFGdAdYDBCEFbDBARCLFHRAWCUFGWMBXDKKAEHRADHWINAOARYDBCDTFGdAdYDBCEFbDBARCLFHRAWCUFGWMBKKDNAItMBABYDBHRABYDLHWCBHdAIHOINAWAdbDBAWCLFHWARYDBAdFHdARCLFHRAOCUFGOMBKKDNADCI6MBAVCEAVCE0eHQABYDLHVABYDWHRINAECWFYDBHWAECLFYDBHdAEYDBHODNALtMBALAWCDTFYDBHWALAdCDTFYDBHdALAOCDTFYDBHOKARAVAOCDTFGDYDBCITFAdbDBARADYDBCITFAWbDLADADYDBCEFbDBARAVAdCDTFGDYDBCITFAWbDBARADYDBCITFAObDLADADYDBCEFbDBARAVAWCDTFGWYDBCITFAObDBARAWYDBCITFAdbDLAWAWYDBCEFbDBAECXFHEAQCUFGQMBKKDNAItMBABYDLHRABYDBHWINARARYDBAWYDB9rbDBAWCLFHWARCLFHRAICUFGIMBKKK+3LDOUV998jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNADtMBAICD4HVDNABtMBAVCDTHOCBHRAEHWINABARCX2FGIAEARAV2CDTFGdiDBuDBAIAdiDLuDLAIAdiDWuDWCBHIINALCZFAIFGdAWAIFiDBGQAdiDBGKAKAQ9eeuDBALAIFGdAQAdiDBGKAKAQ9deuDBAICLFGICX9HMBKAWAOFHWARCEFGRAD9HMBXDKKAVCDTHRCBHWINCBHIINALCZFAIFGdAEAIFiDBGQAdiDBGKAKAQ9eeuDBALAIFGdAQAdiDBGKAKAQ9deuDBAICLFGICX9HMBKAEARFHEAWCEFGWAD9HMBKKALiDBALiDZGK+TjBBBB+XGQALiDLALiDcGX+TGMAMAQ9deGQALiDWALiDkGM+TGpApAQ9deHpDNABtMBADtMBjBBBBjBBJzAp+VApjBBBB9beHQINABAQABiDBAK+TnuDBABCLFGIAQAIiDBAX+TnuDBABCWFGIAQAIiDBAM+TnuDBABCXFHBADCUFGDMBKKApK+qDIDUI99DUCBHI8jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNDNAEMBjBBJfHVjBBJfHOjBBJfHRXEKADCD4CDTHWINCBHDINALCZFADFGdABADFiDBGOAdiDBGRARAO9eeuDBALADFGdAOAdiDBGRARAO9deuDBADCLFGDCX9HMBKABAWFHBAICEFGIAE9HMBKALiDWALiDk+THRALiDLALiDc+THOALiDBALiDZ+THVKAVjBBBB+XGVAOAOAV9deGOARARAO9deK9dEEUABCfEAICDTZ1JJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD/01JJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD/01JJBFGDbD/01JJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKK6EIUCBHIDNADtMBDNINABrBBGLAErBBGV9HMEAECEFHEABCEFHBADCUFGDMBXDKKALAV9rHIKAIKK+CEDBCJWK9pffUUffUUffUUffUfffUfffUfBBBBBBBBEEEBEEBEBBEEEBEBBBBBEBEBBBBBEBBBDBBBBBBBBBBBBBBBEEEEEBEBBBBBEBBBBBEEBBBBBBC/sWKXEBBBDBBBJ9kBB",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var t,n=WebAssembly.instantiate(r(o),{}).then(function(d){t=d.instance,t.exports.__wasm_call_ctors()});function r(d){for(var _=new Uint8Array(d.length),A=0;A<d.length;++A){var E=d.charCodeAt(A);_[A]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}for(var v=0,A=0;A<d.length;++A)_[v++]=_[A]<60?e[_[A]]:(_[A]-60)*64+_[++A];return _.buffer.slice(0,v)}function i(d){if(!d)throw new Error("Assertion failed")}function s(d){return new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}function a(d,_){var A=t.exports.sbrk,E=A(d.length*4),v=A(_*4),T=new Uint8Array(t.exports.memory.buffer),P=s(d);T.set(P,E);var I=t.exports.meshopt_optimizeVertexFetchRemap(v,E,d.length,_);T=new Uint8Array(t.exports.memory.buffer);var k=new Uint32Array(_);new Uint8Array(k.buffer).set(T.subarray(v,v+_*4)),P.set(T.subarray(E,E+d.length*4)),A(E-A(0));for(var K=0;K<d.length;++K)d[K]=k[d[K]];return[k,I]}function u(d){for(var _=0,A=0;A<d.length;++A){var E=d[A];_=_<E?E:_}return _}function f(d,_,A,E,v,T,P,I,k){var K=t.exports.sbrk,ee=K(4),me=K(A*4),Z=K(v*T),re=K(A*4),de=new Uint8Array(t.exports.memory.buffer);de.set(s(E),Z),de.set(s(_),re);var Ie=d(me,re,A,Z,v,T,P,I,k,ee);de=new Uint8Array(t.exports.memory.buffer);var Pe=new Uint32Array(Ie);s(Pe).set(de.subarray(me,me+Ie*4));var we=new Float32Array(1);return s(we).set(de.subarray(ee,ee+4)),K(ee-K(0)),[Pe,we[0]]}function l(d,_,A,E){var v=t.exports.sbrk,T=v(A*E),P=new Uint8Array(t.exports.memory.buffer);P.set(s(_),T);var I=d(T,A,E);return v(T-v(0)),I}var p={LockBorder:1};return{ready:n,supported:!0,compactMesh:function(d){i(d instanceof Uint32Array||d instanceof Int32Array||d instanceof Uint16Array||d instanceof Int16Array),i(d.length%3==0);var _=d.BYTES_PER_ELEMENT==4?d:new Uint32Array(d);return a(_,u(d)+1)},simplify:function(d,_,A,E,v,T){i(d instanceof Uint32Array||d instanceof Int32Array||d instanceof Uint16Array||d instanceof Int16Array),i(d.length%3==0),i(_ instanceof Float32Array),i(_.length%A==0),i(A>=3),i(E%3==0);for(var P=0,I=0;I<(T?T.length:0);++I)P|=p[T[I]];var k=d.BYTES_PER_ELEMENT==4?d:new Uint32Array(d),K=f(t.exports.meshopt_simplify,k,d.length,_,_.length,A*4,E,v,P);return K[0]=d instanceof Uint32Array?K[0]:new d.constructor(K[0]),K},getScale:function(d,_){return i(d instanceof Float32Array),i(d.length%_==0),l(t.exports.meshopt_simplifyScale,d,d.length,_*4)}}}();const Uv=Object.freeze(Object.defineProperty({__proto__:null,MeshoptDecoder:Ov,MeshoptEncoder:Lv,MeshoptSimplifier:Nv},Symbol.toStringTag,{value:"Module"})),dh=Ou(Uv);var Gv=vi&&vi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},kv=vi&&vi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Hv=vi&&vi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.nodeIO=void 0;var sp=Hv(ng),Wv=fh,ap=dh,ju=lh;function Vv(){return Gv(this,void 0,void 0,function(){var o,e,t,n,r;return kv(this,function(i){switch(i.label){case 0:return e=(o=new Wv.NodeIO().registerExtensions([ju.DracoMeshCompression,ju.MaterialsSpecular,ju.MaterialsEmissiveStrength,ju.TextureWebP,ju.TextureTransform])).registerDependencies,r={},t="draco3d.decoder",[4,sp.default.createDecoderModule()];case 1:return r[t]=i.sent(),n="draco3d.encoder",[4,sp.default.createEncoderModule()];case 2:return[2,e.apply(o,[(r[n]=i.sent(),r["meshopt.decoder"]=ap.MeshoptDecoder,r["meshopt.encoder"]=ap.MeshoptEncoder,r)])]}})})}Xl.nodeIO=Vv;var Pc={};function jv(o){for(var e=new Array(o),t=0;t<o;++t)e[t]=t;return e}var zv=jv;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Kv=function(o){return o!=null&&(rg(o)||Jv(o)||!!o._isBuffer)};function rg(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function Jv(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&rg(o.slice(0,0))}var qv=zv,Xv=Kv,Yv=typeof Float64Array<"u";function $v(o,e){return o[0]-e[0]}function Zv(){var o=this.stride,e=new Array(o.length),t;for(t=0;t<e.length;++t)e[t]=[Math.abs(o[t]),t];e.sort($v);var n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=e[t][1];return n}function Qv(o,e){var t=["View",e,"d",o].join("");e<0&&(t="View_Nil"+o);var n=o==="generic";if(e===-1){var r="function "+t+"(a){this.data=a;};var proto="+t+".prototype;proto.dtype='"+o+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+t+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+t+"(a){return new "+t+"(a);}",E=new Function(r);return E()}else if(e===0){var r="function "+t+"(a,d) {this.data = a;this.offset = d};var proto="+t+".prototype;proto.dtype='"+o+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+t+"_copy() {return new "+t+"(this.data,this.offset)};proto.pick=function "+t+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+t+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+t+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+t+"(a,b,c,d){return new "+t+"(a,d)}",E=new Function("TrivialArray",r);return E(Fl[o][0])}var r=["'use strict'"],i=qv(e),s=i.map(function(v){return"i"+v}),a="this.offset+"+i.map(function(v){return"this.stride["+v+"]*i"+v}).join("+"),u=i.map(function(v){return"b"+v}).join(","),f=i.map(function(v){return"c"+v}).join(",");r.push("function "+t+"(a,"+u+","+f+",d){this.data=a","this.shape=["+u+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+t+".prototype","proto.dtype='"+o+"'","proto.dimension="+e),r.push("Object.defineProperty(proto,'size',{get:function "+t+"_size(){return "+i.map(function(v){return"this.shape["+v+"]"}).join("*"),"}})"),e===1?r.push("proto.order=[0]"):(r.push("Object.defineProperty(proto,'order',{get:"),e<4?(r.push("function "+t+"_order(){"),e===2?r.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&r.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):r.push("ORDER})")),r.push("proto.set=function "+t+"_set("+s.join(",")+",v){"),n?r.push("return this.data.set("+a+",v)}"):r.push("return this.data["+a+"]=v}"),r.push("proto.get=function "+t+"_get("+s.join(",")+"){"),n?r.push("return this.data.get("+a+")}"):r.push("return this.data["+a+"]}"),r.push("proto.index=function "+t+"_index(",s.join(),"){return "+a+"}"),r.push("proto.hi=function "+t+"_hi("+s.join(",")+"){return new "+t+"(this.data,"+i.map(function(v){return["(typeof i",v,"!=='number'||i",v,"<0)?this.shape[",v,"]:i",v,"|0"].join("")}).join(",")+","+i.map(function(v){return"this.stride["+v+"]"}).join(",")+",this.offset)}");var l=i.map(function(v){return"a"+v+"=this.shape["+v+"]"}),p=i.map(function(v){return"c"+v+"=this.stride["+v+"]"});r.push("proto.lo=function "+t+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+p.join(","));for(var d=0;d<e;++d)r.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");r.push("return new "+t+"(this.data,"+i.map(function(v){return"a"+v}).join(",")+","+i.map(function(v){return"c"+v}).join(",")+",b)}"),r.push("proto.step=function "+t+"_step("+s.join(",")+"){var "+i.map(function(v){return"a"+v+"=this.shape["+v+"]"}).join(",")+","+i.map(function(v){return"b"+v+"=this.stride["+v+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)r.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");r.push("return new "+t+"(this.data,"+i.map(function(v){return"a"+v}).join(",")+","+i.map(function(v){return"b"+v}).join(",")+",c)}");for(var _=new Array(e),A=new Array(e),d=0;d<e;++d)_[d]="a[i"+d+"]",A[d]="b[i"+d+"]";r.push("proto.transpose=function "+t+"_transpose("+s+"){"+s.map(function(v,T){return v+"=("+v+"===undefined?"+T+":"+v+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+t+"(this.data,"+_.join(",")+","+A.join(",")+",this.offset)}"),r.push("proto.pick=function "+t+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)r.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");r.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),r.push("return function construct_"+t+"(data,shape,stride,offset){return new "+t+"(data,"+i.map(function(v){return"shape["+v+"]"}).join(",")+","+i.map(function(v){return"stride["+v+"]"}).join(",")+",offset)}");var E=new Function("CTOR_LIST","ORDER",r.join(`
`));return E(Fl[o],Zv)}function eA(o){if(Xv(o))return"buffer";if(Yv)switch(Object.prototype.toString.call(o)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(o)?"array":"generic"}var Fl={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function tA(o,e,t,n){if(o===void 0){var f=Fl.array[0];return f([])}else typeof o=="number"&&(o=[o]);e===void 0&&(e=[o.length]);var r=e.length;if(t===void 0){t=new Array(r);for(var i=r-1,s=1;i>=0;--i)t[i]=s,s*=e[i]}if(n===void 0){n=0;for(var i=0;i<r;++i)t[i]<0&&(n-=(e[i]-1)*t[i])}for(var a=eA(o),u=Fl[a];u.length<=r+1;)u.push(Qv(a,u.length-1));var f=u[r+1];return f(o,e,t,n)}var ts=tA,Qs={};function nA(o,e){for(var t=1,n=o.length,r=o[0],i=o[0],s=1;s<n;++s)if(i=r,r=o[s],e(r,i)){if(s===t){t++;continue}o[t++]=r}return o.length=t,o}function rA(o){for(var e=1,t=o.length,n=o[0],r=o[0],i=1;i<t;++i,r=n)if(r=n,n=o[i],n!==r){if(i===e){e++;continue}o[e++]=n}return o.length=e,o}function iA(o,e,t){return o.length===0?o:e?(t||o.sort(e),nA(o,e)):(t||o.sort(),rA(o))}var oA=iA,sA=oA;function ig(o,e,t){var n=o.length,r=e.arrayArgs.length,i=e.indexArgs.length>0,s=[],a=[],u=0,f=0,l,p;for(l=0;l<n;++l)a.push(["i",l,"=0"].join(""));for(p=0;p<r;++p)for(l=0;l<n;++l)f=u,u=o[l],l===0?a.push(["d",p,"s",l,"=t",p,"p",u].join("")):a.push(["d",p,"s",l,"=(t",p,"p",u,"-s",f,"*t",p,"p",f,")"].join(""));for(a.length>0&&s.push("var "+a.join(",")),l=n-1;l>=0;--l)u=o[l],s.push(["for(i",l,"=0;i",l,"<s",u,";++i",l,"){"].join(""));for(s.push(t),l=0;l<n;++l){for(f=u,u=o[l],p=0;p<r;++p)s.push(["p",p,"+=d",p,"s",l].join(""));i&&(l>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",u,"]"].join(""))),s.push("}")}return s.join(`
`)}function aA(o,e,t,n){for(var r=e.length,i=t.arrayArgs.length,s=t.blockSize,a=t.indexArgs.length>0,u=[],f=0;f<i;++f)u.push(["var offset",f,"=p",f].join(""));for(var f=o;f<r;++f)u.push(["for(var j"+f+"=SS[",e[f],"]|0;j",f,">0;){"].join("")),u.push(["if(j",f,"<",s,"){"].join("")),u.push(["s",e[f],"=j",f].join("")),u.push(["j",f,"=0"].join("")),u.push(["}else{s",e[f],"=",s].join("")),u.push(["j",f,"-=",s,"}"].join("")),a&&u.push(["index[",e[f],"]=j",f].join(""));for(var f=0;f<i;++f){for(var l=["offset"+f],p=o;p<r;++p)l.push(["j",p,"*t",f,"p",e[p]].join(""));u.push(["p",f,"=(",l.join("+"),")"].join(""))}u.push(ig(e,t,n));for(var f=o;f<r;++f)u.push("}");return u.join(`
`)}function uA(o){for(var e=0,t=o[0].length;e<t;){for(var n=1;n<o.length;++n)if(o[n][e]!==o[0][e])return e;++e}return e}function ff(o,e,t){for(var n=o.body,r=[],i=[],s=0;s<o.args.length;++s){var a=o.args[s];if(!(a.count<=0)){var u=new RegExp(a.name,"g"),f="",l=e.arrayArgs.indexOf(s);switch(e.argTypes[s]){case"offset":var p=e.offsetArgIndex.indexOf(s),d=e.offsetArgs[p];l=d.array,f="+q"+p;case"array":f="p"+l+f;var _="l"+s,A="a"+l;if(e.arrayBlockIndices[l]===0)a.count===1?t[l]==="generic"?a.lvalue?(r.push(["var ",_,"=",A,".get(",f,")"].join("")),n=n.replace(u,_),i.push([A,".set(",f,",",_,")"].join(""))):n=n.replace(u,[A,".get(",f,")"].join("")):n=n.replace(u,[A,"[",f,"]"].join("")):t[l]==="generic"?(r.push(["var ",_,"=",A,".get(",f,")"].join("")),n=n.replace(u,_),a.lvalue&&i.push([A,".set(",f,",",_,")"].join(""))):(r.push(["var ",_,"=",A,"[",f,"]"].join("")),n=n.replace(u,_),a.lvalue&&i.push([A,"[",f,"]=",_].join("")));else{for(var E=[a.name],v=[f],T=0;T<Math.abs(e.arrayBlockIndices[l]);T++)E.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(T+1)+"*t"+l+"b"+T);if(u=new RegExp(E.join(""),"g"),f=v.join("+"),t[l]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[A,"[",f,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(s));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape");break}}}return[r.join(`
`),n,i.join(`
`)].join(`
`).trim()}function cA(o){for(var e=new Array(o.length),t=!0,n=0;n<o.length;++n){var r=o[n],i=r.match(/\d+/);i?i=i[0]:i="",r.charAt(0)===0?e[n]="u"+r.charAt(1)+i:e[n]=r.charAt(0)+i,n>0&&(t=t&&e[n]===e[n-1])}return t?e[0]:e.join("")}function lA(o,e){for(var t=e[1].length-Math.abs(o.arrayBlockIndices[0])|0,n=new Array(o.arrayArgs.length),r=new Array(o.arrayArgs.length),i=0;i<o.arrayArgs.length;++i)r[i]=e[2*i],n[i]=e[2*i+1];for(var s=[],a=[],u=[],f=[],l=[],i=0;i<o.arrayArgs.length;++i){o.arrayBlockIndices[i]<0?(u.push(0),f.push(t),s.push(t),a.push(t+o.arrayBlockIndices[i])):(u.push(o.arrayBlockIndices[i]),f.push(o.arrayBlockIndices[i]+t),s.push(0),a.push(o.arrayBlockIndices[i]));for(var p=[],d=0;d<n[i].length;d++)u[i]<=n[i][d]&&n[i][d]<f[i]&&p.push(n[i][d]-u[i]);l.push(p)}for(var _=["SS"],A=["'use strict'"],E=[],d=0;d<t;++d)E.push(["s",d,"=SS[",d,"]"].join(""));for(var i=0;i<o.arrayArgs.length;++i){_.push("a"+i),_.push("t"+i),_.push("p"+i);for(var d=0;d<t;++d)E.push(["t",i,"p",d,"=t",i,"[",u[i]+d,"]"].join(""));for(var d=0;d<Math.abs(o.arrayBlockIndices[i]);++d)E.push(["t",i,"b",d,"=t",i,"[",s[i]+d,"]"].join(""))}for(var i=0;i<o.scalarArgs.length;++i)_.push("Y"+i);if(o.shapeArgs.length>0&&E.push("shape=SS.slice(0)"),o.indexArgs.length>0){for(var v=new Array(t),i=0;i<t;++i)v[i]="0";E.push(["index=[",v.join(","),"]"].join(""))}for(var i=0;i<o.offsetArgs.length;++i){for(var T=o.offsetArgs[i],P=[],d=0;d<T.offset.length;++d)T.offset[d]!==0&&(T.offset[d]===1?P.push(["t",T.array,"p",d].join("")):P.push([T.offset[d],"*t",T.array,"p",d].join("")));P.length===0?E.push("q"+i+"=0"):E.push(["q",i,"=",P.join("+")].join(""))}var I=sA([].concat(o.pre.thisVars).concat(o.body.thisVars).concat(o.post.thisVars));E=E.concat(I),E.length>0&&A.push("var "+E.join(","));for(var i=0;i<o.arrayArgs.length;++i)A.push("p"+i+"|=0");o.pre.body.length>3&&A.push(ff(o.pre,o,r));var k=ff(o.body,o,r),K=uA(l);K<t?A.push(aA(K,l[0],o,k)):A.push(ig(l[0],o,k)),o.post.body.length>3&&A.push(ff(o.post,o,r)),o.debug&&console.log("-----Generated cwise routine for ",e,`:
`+A.join(`
`)+`
----------`);var ee=[o.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",K,cA(r)].join(""),me=new Function(["function ",ee,"(",_.join(","),"){",A.join(`
`),"} return ",ee].join(""));return me()}var fA=lA,dA=fA;function hA(o){var e=["'use strict'","var CACHED={}"],t=[],n=o.funcName+"_cwise_thunk";e.push(["return function ",n,"(",o.shimArgs.join(","),"){"].join(""));for(var r=[],i=[],s=[["array",o.arrayArgs[0],".shape.slice(",Math.max(0,o.arrayBlockIndices[0]),o.arrayBlockIndices[0]<0?","+o.arrayBlockIndices[0]+")":")"].join("")],a=[],u=[],f=0;f<o.arrayArgs.length;++f){var l=o.arrayArgs[f];t.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),r.push("t"+l),r.push("r"+l),i.push("t"+l),i.push("r"+l+".join()"),s.push("array"+l+".data"),s.push("array"+l+".stride"),s.push("array"+l+".offset|0"),f>0&&(a.push("array"+o.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(o.arrayBlockIndices[0])-Math.abs(o.arrayBlockIndices[f]))),u.push("array"+o.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,o.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,o.arrayBlockIndices[f])+"]"))}o.arrayArgs.length>1&&(e.push("if (!("+a.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+o.arrayArgs[0]+".shape.length-"+Math.abs(o.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var f=0;f<o.scalarArgs.length;++f)s.push("scalar"+o.scalarArgs[f]);t.push(["type=[",i.join(","),"].join()"].join("")),t.push("proc=CACHED[type]"),e.push("var "+t.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",r.join(","),"])}","return proc(",s.join(","),")}"].join("")),o.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var p=new Function("compile",e.join(`
`));return p(dA.bind(void 0,o))}var pA=hA,mA=pA;function _A(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function gA(o){var e=new _A;e.pre=o.pre,e.body=o.body,e.post=o.post;var t=o.args.slice(0);e.argTypes=t;for(var n=0;n<t.length;++n){var r=t[n];if(r==="array"||typeof r=="object"&&r.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(r.blockIndices?r.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(r==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(r==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(r==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof r=="object"&&r.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:r.array,offset:r.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+t[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>t.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>t.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>t.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!o.printCode||!!o.debug,e.funcName=o.funcName||"cwise",e.blockSize=o.blockSize||64,mA(e)}var yA=gA;(function(o){var e=yA,t={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return t;for(var _=0;_<d.args.length;++_){var A=d.args[_];_===0?d.args[_]={name:A,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[_]={name:A,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function r(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function i(d){for(var _=[],A=0;A<d.args.length;++A)_.push("a"+A);var E=new Function("P",["return function ",d.funcName,"_ndarrayops(",_.join(","),") {P(",_.join(","),");return a0}"].join(""));return E(r(d))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in s){var _=s[d];o[d]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+_+"c"},funcName:d}),o[d+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+_+"=b"},rvalue:!0,funcName:d+"eq"}),o[d+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+_+"s"},funcName:d+"s"}),o[d+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+_+"=s"},rvalue:!0,funcName:d+"seq"})}})();var a={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in a){var _=a[d];o[d]=i({args:["array","array"],body:{args:["a","b"],body:"a="+_+"b"},funcName:d}),o[d+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+_+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in u){var _=u[d];o[d]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+_+"c"},funcName:d}),o[d+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+_+"s"},funcName:d+"s"}),o[d+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+_+"b"},rvalue:!0,count:2,funcName:d+"eq"}),o[d+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+_+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<f.length;++d){var _=f[d];o[_]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:_}),o[_+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"eq"})}})();var l=["max","min","atan2","pow"];(function(){for(var d=0;d<l.length;++d){var _=l[d];o[_]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:_}),o[_+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:_+"s"}),o[_+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"eq"}),o[_+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"seq"})}})();var p=["atan2","pow"];(function(){for(var d=0;d<p.length;++d){var _=p[d];o[_+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:_+"op"}),o[_+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:_+"ops"}),o[_+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"opeq"}),o[_+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"opseq"})}})(),o.any=e({args:["array"],pre:t,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),o.all=e({args:["array"],pre:t,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),o.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),o.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),o.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),o.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),o.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),o.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),o.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),o.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),o.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),o.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),o.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),o.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),o.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),o.equals=e({args:["array","array"],pre:t,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Qs);function vA(o,e,t={}){const n=document.createElement("canvas");n.width=o.shape[0],n.height=o.shape[1];const r=n.getContext("2d"),i=r.getImageData(0,0,n.width,n.height);try{og(o,i.data)}catch(a){return hh.from(Promise.reject(a))}r.putImageData(i,0,0);const s=t.quality?t.quality/100:void 0;switch(e){case"canvas":return n;case"jpg":case"jpeg":return up(n,"image/jpeg",s);case"png":return up(n,"image/png");default:throw new Error("[ndarray-pixels] Unsupported file type: "+e)}}function up(o,e,t){const n=new Promise((r,i)=>{o.toBlob(async s=>{s?r(new Uint8Array(await s.arrayBuffer())):i(new Error("[ndarray-pixels] Failed to canvas.toBlob()."))},e,t)});return hh.from(n)}function og(o,e,t=-1){if(o.shape.length===4)return og(o.pick(t),e,0);if(o.shape.length===3)if(o.shape[2]===3)Qs.assign(ts(e,[o.shape[0],o.shape[1],3],[4,4*o.shape[0],1]),o),Qs.assigns(ts(e,[o.shape[0]*o.shape[1]],[4],3),255);else if(o.shape[2]===4)Qs.assign(ts(e,[o.shape[0],o.shape[1],4],[4,4*o.shape[0],1]),o);else{if(o.shape[2]!==1)throw new Error("[ndarray-pixels] Incompatible array shape.");Qs.assign(ts(e,[o.shape[0],o.shape[1],3],[4,4*o.shape[0],1]),ts(o.data,[o.shape[0],o.shape[1],3],[o.stride[0],o.stride[1],0],o.offset)),Qs.assigns(ts(e,[o.shape[0]*o.shape[1]],[4],3),255)}else{if(o.shape.length!==2)throw new Error("[ndarray-pixels] Incompatible array shape.");Qs.assign(ts(e,[o.shape[0],o.shape[1],3],[4,4*o.shape[0],1]),ts(o.data,[o.shape[0],o.shape[1],3],[o.stride[0],o.stride[1],0],o.offset)),Qs.assigns(ts(e,[o.shape[0]*o.shape[1]],[4],3),255)}return e}let hh=class{constructor(e){this._promise=void 0,this._promise=e}on(e,t){return e==="data"?this._promise.then(t):e==="error"?this._promise.catch(t):e==="end"&&this._promise.finally(t),this}static from(e){return new hh(e)}};async function sg(o,e){return o instanceof Uint8Array&&typeof Buffer<"u"&&(o=Buffer.from(o)),new Promise((t,n)=>{(function(r,i,s){if(s=s||i,r instanceof Uint8Array){if(typeof i!="string")throw new Error("[ndarray-pixels] Type must be given for Uint8Array image data");const u=new Blob([r],{type:i});r=URL.createObjectURL(u)}const a=new Image;a.crossOrigin="anonymous",a.onload=function(){URL.revokeObjectURL(r);const u=document.createElement("canvas");u.width=a.width,u.height=a.height;const f=u.getContext("2d");f.drawImage(a,0,0);const l=f.getImageData(0,0,a.width,a.height);s(null,ts(new Uint8Array(l.data),[a.width,a.height,4],[4,4*a.width,1],0))},a.onerror=u=>{URL.revokeObjectURL(r),s(u)},a.src=r})(o,e,(r,i)=>{i&&!r?t(i):n(r)})})}async function ag(o,e){return new Promise((t,n)=>{const r=[],i=e.replace("image/","");vA(o,i).on("data",s=>r.push(s)).on("end",()=>t(function(s){let a=0;for(const l of s)a+=l.byteLength;const u=new Uint8Array(a);let f=0;for(const l of s)u.set(l,f),f+=l.byteLength;return u}(r))).on("error",s=>n(s))})}function ug(){var o=new Bs(9);return Bs!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function AA(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[4],o[4]=e[5],o[5]=e[6],o[6]=e[8],o[7]=e[9],o[8]=e[10],o}function bA(o,e){if(o===e){var t=e[1],n=e[2],r=e[5];o[1]=e[3],o[2]=e[6],o[3]=t,o[5]=e[7],o[6]=n,o[7]=r}else o[0]=e[0],o[1]=e[3],o[2]=e[6],o[3]=e[1],o[4]=e[4],o[5]=e[7],o[6]=e[2],o[7]=e[5],o[8]=e[8];return o}function EA(o,e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=l*s-a*f,d=-l*i+a*u,_=f*i-s*u,A=t*p+n*d+r*_;return A?(A=1/A,o[0]=p*A,o[1]=(-l*n+r*f)*A,o[2]=(a*n-r*s)*A,o[3]=d*A,o[4]=(l*t-r*u)*A,o[5]=(-a*t+r*i)*A,o[6]=_*A,o[7]=(-f*t+n*u)*A,o[8]=(s*t-n*i)*A,o):null}function cg(){var o=new Bs(4);return Bs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),o}function TA(o,e){var t=e[0],n=e[1],r=e[2],i=e[3],s=t*t+n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),o[0]=t*s,o[1]=n*s,o[2]=r*s,o[3]=i*s,o}function wA(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]}(function(){var o=cg();return function(e,t,n,r,i,s){var a,u;for(t||(t=4),n||(n=0),r?u=Math.min(r*t+n,e.length):u=e.length,a=n;a<u;a+=t)o[0]=e[a],o[1]=e[a+1],o[2]=e[a+2],o[3]=e[a+3],i(o,o,s),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2],e[a+3]=o[3];return e}})();function cp(){var o=new Bs(4);return Bs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function CA(o,e,t){t=t*.5;var n=Math.sin(t);return o[0]=n*e[0],o[1]=n*e[1],o[2]=n*e[2],o[3]=Math.cos(t),o}function lp(o,e){var t=BA(o,e);return Math.acos(2*t*t-1)}function wl(o,e,t,n){var r=e[0],i=e[1],s=e[2],a=e[3],u=t[0],f=t[1],l=t[2],p=t[3],d,_,A,E,v;return _=r*u+i*f+s*l+a*p,_<0&&(_=-_,u=-u,f=-f,l=-l,p=-p),1-_>gy?(d=Math.acos(_),A=Math.sin(d),E=Math.sin((1-n)*d)/A,v=Math.sin(n*d)/A):(E=1-n,v=n),o[0]=E*r+v*u,o[1]=E*i+v*f,o[2]=E*s+v*l,o[3]=E*a+v*p,o}function SA(o,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),o[3]=.5*n,n=.5/n,o[0]=(e[5]-e[7])*n,o[1]=(e[6]-e[2])*n,o[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[r*3+r]-e[i*3+i]-e[s*3+s]+1),o[r]=.5*n,n=.5/n,o[3]=(e[i*3+s]-e[s*3+i])*n,o[i]=(e[i*3+r]+e[r*3+i])*n,o[s]=(e[s*3+r]+e[r*3+s])*n}return o}var BA=wA,lg=TA;(function(){var o=Dc(),e=Gh(1,0,0),t=Gh(0,1,0);return function(n,r,i){var s=yy(r,i);return s<-.999999?(af(o,e,r),Ay(o)<1e-6&&af(o,t,r),Gl(o,o),CA(n,o,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(af(o,r,i),n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=1+s,lg(n,n))}})();(function(){var o=cp(),e=cp();return function(t,n,r,i,s,a){return wl(o,n,s,a),wl(e,r,i,a),wl(t,o,e,2*a*(1-a)),t}})();(function(){var o=ug();return function(e,t,n,r){return o[0]=n[0],o[3]=n[1],o[6]=n[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-t[0],o[5]=-t[1],o[8]=-t[2],lg(e,SA(e,o))}})();const xA=(o,e)=>{if(o<=-e||o>=e)return 0;const t=o*Math.PI;return Math.sin(t)/t*Math.sin(t/e)/(t/e)},fp=o=>Math.round(16383*o),dp=(o,e,t,n,r)=>{const i=r?2:3,s=1/t,a=Math.min(1,t),u=i/a,f=Math.floor(2*(u+1)),l=new Int16Array((f+2)*e);let p=0;for(let d=0;d<e;d++){const _=(d+.5)*s+n,A=Math.max(0,Math.floor(_-u)),E=Math.min(o-1,Math.ceil(_+u)),v=E-A+1,T=new Float32Array(v),P=new Int16Array(v);let I=0,k=0;for(let re=A;re<=E;re++){const de=xA((re+.5-_)*a,i);I+=de,T[k]=de,k++}let K=0;for(let re=0;re<T.length;re++){const de=T[re]/I;K+=de,P[re]=fp(de)}P[e>>1]+=fp(1-K);let ee=0;for(;ee<P.length&&P[ee]===0;)ee++;let me=P.length-1;for(;me>0&&P[me]===0;)me--;const Z=me-ee+1;l[p++]=A+ee,l[p++]=Z,l.set(P.subarray(ee,me+1),p),p+=Z}return l},Kc=o=>o<0?0:o>255?255:o,hp=(o,e,t)=>{const[n,r]=o.shape,[i]=e.shape;for(let s=0;s<r;s++){const a=s;let u=0;for(let f=0;f<i;f++){let l=t[u++],p=0,d=0,_=0,A=0;for(let E=t[u++];E>0;E--){const v=t[u++];p+=v*o.get(l,s,0),d+=v*o.get(l,s,1),_+=v*o.get(l,s,2),A+=v*o.get(l,s,3),l++}e.set(f,a,0,Kc(p+8192>>14)),e.set(f,a,1,Kc(d+8192>>14)),e.set(f,a,2,Kc(_+8192>>14)),e.set(f,a,3,Kc(A+8192>>14))}}};var xu;function fg(o,e,t){const[n,r]=o.shape,[i,s]=e.shape,a=s/r,u=dp(n,i,i/n,0,t===xu.LANCZOS_2),f=dp(r,s,a,0,t===xu.LANCZOS_2),l=ts(new Uint8Array(i*r*4),[r,i,4]),p=l.transpose(1,0),d=e.transpose(1,0);hp(o,p,u),hp(l,d,f)}function MA(o,e){fg(o,e,xu.LANCZOS_3)}function DA(o,e){fg(o,e,xu.LANCZOS_2)}(function(o){o[o.LANCZOS_3=3]="LANCZOS_3",o[o.LANCZOS_2=2]="LANCZOS_2"})(xu||(xu={}));function qi(){return(qi=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}).apply(this,arguments)}function bo(o,e){return Object.defineProperty(e,"name",{value:o}),e}function ph(o,e,t){return!!o&&o.stack.lastIndexOf(e)<o.stack.lastIndexOf(t)}async function pp(o,e,t){if(!o)return null;const n=o.getImage();if(!n)return null;const r=await sg(n,o.getMimeType());for(let s=0;s<r.shape[0];++s)for(let a=0;a<r.shape[1];++a)t(r,s,a);const i=await ag(r,"image/png");return e.setImage(i).setMimeType("image/png")}class mp{constructor(){this._map=new Map}get size(){return this._map.size}has(e){return this._map.has(e)}add(e,t){let n=this._map.get(e);return n||(n=new Set,this._map.set(e,n)),n.add(t),this}get(e){return this._map.get(e)||new Set}keys(){return this._map.keys()}}function _p(o,e=2){if(o===0)return"0 Bytes";const t=e<0?0:e,n=Math.floor(Math.log(o)/Math.log(1e3));return parseFloat((o/Math.pow(1e3,n)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function gp(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function mh(o,e){return`${gp(o)}  ${gp(e)} (${function(t,n,r=2){return(t>n?"":"+")+(Math.abs(t-n)/t*100).toFixed(r)+"%"}(o,e)})`}function _h(o){const e=[];for(const t of o.listAttributes())e.push(t);for(const t of o.listTargets())for(const n of t.listAttributes())e.push(n);return Array.from(new Set(e))}function RA(o,e,t){o.swap(e,t);for(const n of o.listTargets())n.swap(e,t)}function dg(o,e,t){const n=o.getElementSize(),r=o.getCount(),i=o.getArray(),s=i.slice(0,t*n);for(let a=0;a<r;a++)for(let u=0;u<n;u++)s[e[a]*n+u]=i[a*n+u];o.setArray(s)}function yu(o,e=o){const t=e<=65534?new Uint16Array(o):new Uint32Array(o);for(let n=0;n<t.length;n++)t[n]=n;return t}const yp={pivot:"center"};function IA(o=yp){const e=qi({},yp,o);return bo("center",t=>{const n=t.getLogger(),r=t.getRoot(),i=r.listAnimations().length>0||r.listSkins().length>0;t.getRoot().listScenes().forEach((s,a)=>{let u;if(n.debug(`center: Scene ${a+1} / ${r.listScenes().length}.`),typeof e.pivot=="string"){const l=Rc(s);u=[(l.max[0]-l.min[0])/2+l.min[0],(l.max[1]-l.min[1])/2+l.min[1],(l.max[2]-l.min[2])/2+l.min[2]],e.pivot==="above"&&(u[1]=l.max[1]),e.pivot==="below"&&(u[1]=l.min[1])}else u=e.pivot;n.debug(`center: Pivot "${u.join(", ")}".`);const f=[-1*u[0],-1*u[1],-1*u[2]];if(i){n.debug("center: Model contains animation or skin. Adding a wrapper node.");const l=t.createNode("Pivot").setTranslation(f);s.listChildren().forEach(p=>l.addChild(p)),s.addChild(l)}else n.debug("center: Skipping wrapper, offsetting all root nodes."),s.listChildren().forEach(l=>{const p=l.getTranslation();l.setTranslation([p[0]+f[0],p[1]+f[1],p[2]+f[2]])})}),n.debug("center: Complete.")})}const Jc="colorspace";function PA(o){return bo(Jc,e=>{const t=e.getLogger();if(o.inputEncoding==="linear")return void t.info(`${Jc}: Vertex colors already linear. Skipping conversion.`);if(o.inputEncoding!=="sRGB")return void t.error(`${Jc}: Unknown input encoding "${o.inputEncoding}"  should be "sRGB" or "linear". Skipping conversion.`);const n=new Set;function r(s){return s<.04045?.0773993808*s:Math.pow(.9478672986*s+.0521327014,2.4)}function i(s){const a=[0,0,0];let u;for(let f=0;u=s.getAttribute(`COLOR_${f}`);f++)if(!n.has(u)){for(let l=0;l<u.getCount();l++)u.getElement(l,a),a[0]=r(a[0]),a[1]=r(a[1]),a[2]=r(a[2]),u.setElement(l,a);n.add(u)}}e.getRoot().listMeshes().forEach(s=>s.listPrimitives().forEach(i)),t.debug(`${Jc}: Complete.`)})}const df={propertyTypes:[ct.ACCESSOR,ct.MESH,ct.TEXTURE,ct.MATERIAL]},Fc=function(o=df){const e=qi({},df,o),t=new Set(e.propertyTypes);for(const n of e.propertyTypes)if(!df.propertyTypes.includes(n))throw new Error(`dedup: Unsupported deduplication on type "${n}".`);return bo("dedup",n=>{const r=n.getLogger();t.has(ct.ACCESSOR)&&function(i,s){const a=new Set,u=new Set,f=new Set,l=new Set,p=s.getRoot().listMeshes();p.forEach(T=>{T.listPrimitives().forEach(P=>{P.listAttributes().forEach(k=>u.add(k));const I=P.getIndices();I&&a.add(I)})});for(const T of s.getRoot().listAnimations())for(const P of T.listSamplers()){const I=P.getInput(),k=P.getOutput();I&&f.add(I),k&&l.add(k)}function d(T){const P=new Map;for(let I=0;I<T.length;I++){const k=T[I],K=ii.toView(k.getArray());if(!P.has(k))for(let ee=0;ee<T.length;ee++){const me=T[ee];k!==me&&(P.has(me)||k.getType()===me.getType()&&k.getComponentType()===me.getComponentType()&&k.getCount()===me.getCount()&&k.getNormalized()===me.getNormalized()&&ii.equals(K,ii.toView(me.getArray()))&&P.set(me,k))}}return P}const _=d(Array.from(a));i.debug(`dedup: Found ${_.size} duplicates among ${a.size} indices.`);const A=d(Array.from(u));i.debug(`dedup: Found ${A.size} duplicates among ${u.size} attributes.`);const E=d(Array.from(f)),v=d(Array.from(l));i.debug(`dedup: Found ${E.size+v.size} duplicates among ${f.size+l.size} animation accessors.`),p.forEach(T=>{T.listPrimitives().forEach(P=>{P.listAttributes().forEach(k=>{A.has(k)&&P.swap(k,A.get(k))});const I=P.getIndices();I&&_.has(I)&&P.swap(I,_.get(I))})}),Array.from(_.keys()).forEach(T=>T.dispose()),Array.from(A.keys()).forEach(T=>T.dispose());for(const T of s.getRoot().listAnimations())for(const P of T.listSamplers()){const I=P.getInput(),k=P.getOutput();I&&E.has(I)&&P.swap(I,E.get(I)),k&&v.has(k)&&P.swap(k,v.get(k))}Array.from(E.keys()).forEach(T=>T.dispose()),Array.from(v.keys()).forEach(T=>T.dispose())}(r,n),t.has(ct.TEXTURE)&&function(i,s){const a=s.getRoot(),u=a.listTextures(),f=new Map;for(let l=0;l<u.length;l++){const p=u[l],d=p.getImage();if(!f.has(p))for(let _=0;_<u.length;_++){const A=u[_],E=A.getImage();if(p===A||f.has(A)||p.getMimeType()!==A.getMimeType())continue;const v=p.getSize(),T=A.getSize();v&&T&&v[0]===T[0]&&v[1]===T[1]&&d&&E&&ii.equals(d,E)&&f.set(A,p)}}i.debug(`dedup: Found ${f.size} duplicates among ${a.listTextures().length} textures.`),Array.from(f.entries()).forEach(([l,p])=>{l.listParents().forEach(d=>{d instanceof Wa||d.swap(l,p)}),l.dispose()})}(r,n),t.has(ct.MATERIAL)&&function(i,s){const a=s.getRoot(),u=a.listMaterials(),f=new Map,l=new Set(["name"]);for(let p=0;p<u.length;p++){const d=u[p];if(!f.has(d))for(let _=0;_<u.length;_++){const A=u[_];d!==A&&(f.has(A)||d.equals(A,l)&&f.set(A,d))}}i.debug(`dedup: Found ${f.size} duplicates among ${a.listMaterials().length} materials.`),Array.from(f.entries()).forEach(([p,d])=>{p.listParents().forEach(_=>{_ instanceof Wa||_.swap(p,d)}),p.dispose()})}(r,n),t.has(ct.MESH)&&function(i,s){const a=s.getRoot(),u=new Map;a.listAccessors().forEach((p,d)=>u.set(p,d)),a.listMaterials().forEach((p,d)=>u.set(p,d));const f=a.listMeshes().length,l=new Map;for(const p of a.listMeshes()){const d=[];for(const A of p.listPrimitives())d.push(hg(A,u));const _=d.join(";");if(l.has(_)){const A=l.get(_);p.listParents().forEach(E=>{E.propertyType!==ct.ROOT&&E.swap(p,A)}),p.dispose()}else l.set(_,p)}i.debug(`dedup: Found ${f-l.size} duplicates among ${f} meshes.`)}(r,n),r.debug("dedup: Complete.")})};function hg(o,e){const t=[];for(const n of o.listSemantics()){const r=o.getAttribute(n);t.push(n+":"+e.get(r))}if(o instanceof ao){const n=o.getIndices();n&&t.push("indices:"+e.get(n));const r=o.getMaterial();r&&t.push("material:"+e.get(r)),t.push("mode:"+o.getMode());for(const i of o.listTargets())t.push("target:"+hg(i,e))}return t.join(",")}const vp={pattern:/^((?!JOINTS_).)*$/};function FA(o=vp){const e=qi({},vp,o);return bo("dequantize",t=>{const n=t.getLogger();for(const r of t.getRoot().listMeshes())for(const i of r.listPrimitives())LA(i,e);t.createExtension(Ic).dispose(),n.debug("dequantize: Complete.")})}function LA(o,e){for(const t of o.listSemantics())Ap(t,o.getAttribute(t),e);for(const t of o.listTargets())for(const n of t.listSemantics())Ap(n,t.getAttribute(n),e)}function Ap(o,e,t){if(!e.getArray()||!t.pattern.test(o)||e.getComponentSize()>=4)return;const n=e.getArray(),r=new Float32Array(n.length);for(let i=0,s=e.getCount(),a=[];i<s;i++)a=e.getElement(i,a),e.setArray(r).setElement(i,a).setArray(n);e.setArray(r).setNormalized(!1)}const pg={method:"edgebreaker",encodeSpeed:5,decodeSpeed:5,quantizePosition:14,quantizeNormal:10,quantizeColor:8,quantizeTexcoord:12,quantizeGeneric:12,quantizationVolume:"mesh"},OA=o=>{const e=qi({},pg,o);return t=>{t.createExtension(La).setRequired(!0).setEncoderOptions({method:e.method==="edgebreaker"?La.EncoderMethod.EDGEBREAKER:La.EncoderMethod.SEQUENTIAL,encodeSpeed:e.encodeSpeed,decodeSpeed:e.decodeSpeed,quantizationBits:{POSITION:e.quantizePosition,NORMAL:e.quantizeNormal,COLOR:e.quantizeColor,TEX_COORD:e.quantizeTexcoord,GENERIC:e.quantizeGeneric},quantizationVolume:e.quantizationVolume})}};function NA(o){return{scenes:UA(o),meshes:GA(o),materials:kA(o),textures:HA(o),animations:WA(o)}}function UA(o){return{properties:o.getRoot().listScenes().map(e=>{const t=e.listChildren()[0],n=Rc(e);return{name:e.getName(),rootName:t?t.getName():"",bboxMin:bp(n.min),bboxMax:bp(n.max)}})}}function GA(o){return{properties:o.getRoot().listMeshes().map(e=>{const t=e.listParents().filter(l=>l.propertyType!==ct.ROOT).length;let n=0,r=0;const i=new Set,s=new Set,a=new Set;e.listPrimitives().forEach(l=>{for(const d of l.listSemantics()){const _=l.getAttribute(d);i.add(d+":"+Ep(_)),a.add(_)}for(const d of l.listTargets())d.listAttributes().forEach(_=>a.add(_));const p=l.getIndices();p&&(s.add(Ep(p)),a.add(p)),r+=l.listAttributes()[0].getCount(),n+=function(d){const _=d.getIndices(),A=d.getAttribute("POSITION");switch(d.getMode()){case ao.Mode.POINTS:return A.getCount();case ao.Mode.LINES:return _?_.getCount()/2:A.getCount()/2;case ao.Mode.LINE_LOOP:return A.getCount();case ao.Mode.LINE_STRIP:return A.getCount()-1;case ao.Mode.TRIANGLES:return _?_.getCount()/3:A.getCount()/3;case ao.Mode.TRIANGLE_STRIP:case ao.Mode.TRIANGLE_FAN:return A.getCount()-2;default:throw new Error("Unexpected mode: "+d.getMode())}}(l)});let u=0;Array.from(a).forEach(l=>u+=l.getArray().byteLength);const f=e.listPrimitives().map(l=>VA[l.getMode()]);return{name:e.getName(),mode:Array.from(new Set(f)),primitives:e.listPrimitives().length,glPrimitives:n,vertices:r,indices:Array.from(s).sort(),attributes:Array.from(i).sort(),instances:t,size:u}})}}function kA(o){return{properties:o.getRoot().listMaterials().map(e=>{const t=e.listParents().filter(i=>i.propertyType!==ct.ROOT).length,n=new Set(e.listExtensions()),r=o.getGraph().listEdges().filter(i=>{const s=i.getChild(),a=i.getParent();return s instanceof Ha&&a===e||!!(s instanceof Ha&&a instanceof uo&&n.has(a))}).map(i=>i.getName());return{name:e.getName(),instances:t,textures:r,alphaMode:e.getAlphaMode(),doubleSided:e.getDoubleSided()}})}}function HA(o){return{properties:o.getRoot().listTextures().map(e=>{const t=e.listParents().filter(s=>s.propertyType!==ct.ROOT).length,n=o.getGraph().listParentEdges(e).filter(s=>s.getParent().propertyType!==ct.ROOT).map(s=>s.getName()),r=as.getSize(e.getImage(),e.getMimeType());let i="";if(e.getMimeType()==="image/ktx2"){const s=El(e.getImage()).dataFormatDescriptor[0];s.colorModel===q_?i="ETC1S":s.colorModel===X_&&(i="UASTC")}return{name:e.getName(),uri:e.getURI(),slots:Array.from(new Set(n)),instances:t,mimeType:e.getMimeType(),compression:i,resolution:r?r.join("x"):"",size:e.getImage().byteLength,gpuSize:as.getMemSize(e.getImage(),e.getMimeType())}})}}function WA(o){return{properties:o.getRoot().listAnimations().map(e=>{let t=1/0,n=-1/0;e.listSamplers().forEach(a=>{const u=a.getInput();u&&(t=Math.min(t,u.getMin([])[0]),n=Math.max(n,u.getMax([])[0]))});let r=0,i=0;const s=new Set;return e.listSamplers().forEach(a=>{const u=a.getInput(),f=a.getOutput();u&&(i+=u.getCount(),s.add(u),f&&s.add(f))}),Array.from(s).forEach(a=>{r+=a.getArray().byteLength}),{name:e.getName(),channels:e.listChannels().length,samplers:e.listSamplers().length,duration:Math.round(1e3*(n-t))/1e3,keyframes:i,size:r}})}}const VA=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"],jA={Float32Array:"f32",Uint32Array:"u32",Uint16Array:"u16",Uint8Array:"u8",Int32Array:"i32",Int16Array:"i16",Int8Array:"i8"};function bp(o){for(let e=0;e<o.length;e++)o[e].toFixed&&(o[e]=Number(o[e].toFixed(5)));return o}function Ep(o){const e=o.getArray();return(jA[e.constructor.name]||"?")+(o.getNormalized()?"_norm":"")}const Tp={};function zA(o=Tp){return qi({},Tp,o),bo("instance",e=>{const t=e.getLogger(),n=e.getRoot(),r=e.createExtension(Vl);if(n.listAnimations().length)return t.warn("instance: Instancing is not currently supported for animated models."),void t.debug("instance: Complete.");let i=0,s=0;for(const a of n.listScenes()){const u=new Map;a.traverse(l=>{const p=l.getMesh();p&&u.set(p,(u.get(p)||new Set).add(l))});const f=[];for(const l of Array.from(u.keys())){const p=Array.from(u.get(l));if(p.length<2||p.some(k=>k.getSkin()))continue;const d=JA(e,r,l,p.length),_=d.getAttribute("TRANSLATION"),A=d.getAttribute("ROTATION"),E=d.getAttribute("SCALE"),v=e.createNode().setMesh(l).setExtension("EXT_mesh_gpu_instancing",d);a.addChild(v);let T=!1,P=!1,I=!1;for(let k=0;k<p.length;k++){let K,ee,me;const Z=p[k];_.setElement(k,K=Z.getWorldTranslation()),A.setElement(k,ee=Z.getWorldRotation()),E.setElement(k,me=Z.getWorldScale()),bi.eq(K,[0,0,0])||(T=!0),bi.eq(ee,[0,0,0,1])||(P=!0),bi.eq(me,[1,1,1])||(I=!0),Z.setMesh(null),f.push(Z)}T||_.dispose(),P||A.dispose(),I||E.dispose(),KA(f,t),i++,s+=p.length}}t.info(i>0?`instance: Created ${i} batches, with ${s} total instances.`:"instance: No meshes with multiple parent nodes were found."),r.listProperties().length===0&&r.dispose(),t.debug("instance: Complete.")})}function KA(o,e){let t,n=0;for(;t=o.pop();){if(t.listChildren().length||t.getCamera()||t.getMesh()||t.getSkin()||t.listExtensions().length)continue;const r=t.getParent();r instanceof Nu&&o.push(r),t.dispose(),n++}e.debug(`instance: Removed ${n} unused nodes.`)}function JA(o,e,t,n){const r=t.listPrimitives()[0].getAttribute("POSITION").getBuffer(),i=o.createAccessor().setType("VEC3").setArray(new Float32Array(3*n)).setBuffer(r),s=o.createAccessor().setType("VEC4").setArray(new Float32Array(4*n)).setBuffer(r),a=o.createAccessor().setType("VEC3").setArray(new Float32Array(3*n)).setBuffer(r);return e.createInstancedMesh().setAttribute("TRANSLATION",i).setAttribute("ROTATION",s).setAttribute("SCALE",a)}const wp={propertyTypes:[ct.NODE,ct.SKIN,ct.MESH,ct.CAMERA,ct.PRIMITIVE,ct.PRIMITIVE_TARGET,ct.ANIMATION,ct.MATERIAL,ct.TEXTURE,ct.ACCESSOR,ct.BUFFER],keepLeaves:!1,keepAttributes:!0},Yl=function(o=wp){const e=qi({},wp,o),t=new Set(e.propertyTypes);return bo("prune",n=>{const r=n.getLogger(),i=n.getRoot(),s=n.getGraph(),a={};if(t.has(ct.NODE)&&!e.keepLeaves&&i.listScenes().forEach(function d(_){if(_.listChildren().forEach(d),_ instanceof Hl)return;const A=s.listParentEdges(_).some(E=>{const v=E.getParent().propertyType;return v!==ct.ROOT&&v!==ct.SCENE&&v!==ct.NODE});s.listChildren(_).length!==0||A||(_.dispose(),p(_))}),t.has(ct.NODE)&&i.listNodes().forEach(u),t.has(ct.SKIN)&&i.listSkins().forEach(u),t.has(ct.MESH)&&i.listMeshes().forEach(u),t.has(ct.CAMERA)&&i.listCameras().forEach(u),t.has(ct.PRIMITIVE)&&f(s,ct.PRIMITIVE),t.has(ct.PRIMITIVE_TARGET)&&f(s,ct.PRIMITIVE_TARGET),!e.keepAttributes&&t.has(ct.ACCESSOR))for(const d of i.listMeshes())for(const _ of d.listPrimitives()){const A=mg(n,_.getMaterial()),E=qA(_,A);l(_,E),_.listTargets().forEach(v=>l(v,E))}if(t.has(ct.ANIMATION))for(const d of i.listAnimations()){for(const _ of d.listChannels())_.getTargetNode()||(_.dispose(),p(_));if(d.listChannels().length)d.listSamplers().forEach(u);else{const _=d.listSamplers();u(d),_.forEach(u)}}if(t.has(ct.MATERIAL)&&i.listMaterials().forEach(u),t.has(ct.TEXTURE)&&i.listTextures().forEach(u),t.has(ct.ACCESSOR)&&i.listAccessors().forEach(u),t.has(ct.BUFFER)&&i.listBuffers().forEach(u),Object.keys(a).length){const d=Object.keys(a).map(_=>`${_} (${a[_]})`).join(", ");r.info(`prune: Removed types... ${d}`)}else r.info("prune: No unused properties found.");function u(d){d.listParents().filter(_=>!(_ instanceof Wa||_ instanceof da)).length||(d.dispose(),p(d))}function f(d,_){d.listEdges().map(A=>A.getParent()).filter(A=>A.propertyType===_).forEach(u)}function l(d,_){for(const A of _)d.setAttribute(A,null)}function p(d){a[d.propertyType]=a[d.propertyType]||0,a[d.propertyType]++}r.debug("prune: Complete.")})};function qA(o,e){const t=[];for(const n of o.listSemantics())n!=="TANGENT"||e.has(n)?(n.startsWith("TEXCOORD_")&&!e.has(n)||n.startsWith("COLOR_")&&n!=="COLOR_0")&&t.push(n):t.push(n);return t}function mg(o,e,t=new Set){if(!e)return t;const n=o.getGraph().listChildEdges(e),r=new Set;for(const i of n)i.getChild()instanceof Ha&&r.add(i.getName());for(const i of n){const s=i.getName(),a=i.getChild();a instanceof Qi&&r.has(s.replace(/Info$/,""))&&t.add(`TEXCOORD_${a.getTexCoord()}`),a instanceof Ha&&s.match(/normalTexture/i)&&t.add("TANGENT"),a instanceof uo&&mg(o,a,t)}return t}const XA={target:"size"};function _g(o){const e=qi({},XA,o),t=e.encoder;if(!t)throw new Error('reorder: encoder dependency required  install "meshoptimizer".');return bo("reorder",async n=>{const r=n.getLogger();await t.ready;const i=gg(n);for(const s of i.indicesToAttributes.keys()){const a=s.clone();let u=a.getArray().slice();u instanceof Uint32Array||(u=new Uint32Array(u));const[f,l]=t.reorderMesh(u,i.indicesToMode.get(s)===ao.Mode.TRIANGLES,e.target==="size");a.setArray(l<=65534?new Uint16Array(u):u);for(const p of i.indicesToAttributes.get(s)){const d=p.clone();dg(d,f,l);for(const _ of i.attributesToPrimitives.get(p))if(_.getIndices()===s&&_.swap(s,a),_.getIndices()===a){_.swap(p,d);for(const A of _.listTargets())A.swap(p,d)}}}await n.transform(Yl({propertyTypes:[ct.ACCESSOR]})),i.indicesToAttributes.size?r.debug("reorder: Complete."):r.warn("reorder: No qualifying primitives found; may need to weld first.")})}function gg(o){const e=new mp,t=new Map,n=new mp;for(const r of o.getRoot().listMeshes())for(const i of r.listPrimitives()){const s=i.getIndices();if(s){t.set(s,i.getMode());for(const a of _h(i))e.add(s,a),n.add(a,i)}}return{indicesToAttributes:e,indicesToMode:t,attributesToPrimitives:n}}function yg(o,e=1/0){if(Number.isFinite(e)&&e%4||e<=0)throw new Error("Limit must be positive multiple of four.");const t=o.getAttribute("POSITION").getCount(),n=o.listSemantics().filter(f=>f.startsWith("WEIGHTS_")).length,r=new Uint16Array(4*n),i=new Float32Array(4*n),s=new Float32Array(4*n),a=new Uint32Array(4*n),u=new Uint32Array(4*n);for(let f=0;f<t;f++){qc(o,f,"WEIGHTS",i),qc(o,f,"JOINTS",a);for(let l=0;l<4*n;l++)r[l]=l;r.sort((l,p)=>i[l]>i[p]?-1:1);for(let l=0;l<r.length;l++)s[l]=i[r[l]],u[l]=a[r[l]];Xc(o,f,"WEIGHTS",s),Xc(o,f,"JOINTS",u)}for(let f=n;4*f>e;f--){const l=o.getAttribute("WEIGHTS_"+(f-1)),p=o.getAttribute("JOINTS_"+(f-1));o.setAttribute("WEIGHTS_"+(f-1),null),o.setAttribute("JOINTS_"+(f-1),null),l.listParents().length===1&&l.dispose(),p.listParents().length===1&&p.dispose()}(function(f){if(!function(k){const K=k.listSemantics().filter(Z=>Z.startsWith("WEIGHTS_")).map(Z=>k.getAttribute(Z)),ee=K.map(Z=>Z.getNormalized()),me=K.map(Z=>Z.getComponentType());return new Set(ee).size===1&&new Set(me).size===1}(f))return;const l=f.getAttribute("POSITION").getCount(),p=f.listSemantics().filter(k=>k.startsWith("WEIGHTS_")).length,d=f.getAttribute("WEIGHTS_0"),_=d.getArray(),A=d.getComponentType(),E=d.getNormalized(),v=E?A:void 0,T=E?bi.denormalize(1,A):Number.EPSILON,P=new Uint32Array(4*p).fill(0),I=_.slice(0,4*p).fill(0);for(let k=0;k<l;k++){qc(f,k,"JOINTS",P),qc(f,k,"WEIGHTS",I,v);let K=Cp(I,v);if(K!==0){if(Math.abs(1-K)>T)for(let ee=0;ee<I.length;ee++)if(E){const me=bi.normalize(I[ee]/K,A);I[ee]=bi.denormalize(me,A)}else I[ee]/=K;if(K=Cp(I,v),E&&K!==1){for(let ee=I.length-1;ee>=0;ee--)if(I[ee]>0){I[ee]+=bi.normalize(1-K,A);break}}for(let ee=I.length-1;ee>=0;ee--)I[ee]===0&&(P[ee]=0);Xc(f,k,"JOINTS",P),Xc(f,k,"WEIGHTS",I,v)}}})(o)}function qc(o,e,t,n,r){let i;const s=[0,0,0,0];for(let a=0;i=o.getAttribute(`${t}_${a}`);a++){i.getElement(e,s);for(let u=0;u<4;u++)n[4*a+u]=r?bi.normalize(s[u],r):s[u]}return n}function Xc(o,e,t,n,r){let i;const s=[0,0,0,0];for(let a=0;i=o.getAttribute(`${t}_${a}`);a++){for(let u=0;u<4;u++)s[u]=r?bi.denormalize(n[4*a+u],r):n[4*a+u];i.setElement(e,s)}}function Cp(o,e){let t=0;for(let n=0;n<o.length;n++)t+=e?bi.denormalize(o[n],e):o[n];return t}const YA=[Int8Array,Int16Array,Int32Array],{TRANSLATION:$A,ROTATION:ZA,SCALE:QA,WEIGHTS:eb}=da.TargetPath,tb=[$A,ZA,QA],ud={pattern:/.*/,quantizationVolume:"mesh",quantizePosition:14,quantizeNormal:10,quantizeTexcoord:12,quantizeColor:8,quantizeWeight:8,quantizeGeneric:12,normalizeWeights:!0},vg=(o=ud)=>{const e=qi({},ud,o);return bo("quantize",async t=>{const n=t.getLogger(),r=t.getRoot();let i;t.createExtension(Ic).setRequired(!0),e.quantizationVolume==="scene"&&(i=Bp(function(s){const a=s[0];for(const u of s)nd(a.min,a.min,u.min),rd(a.max,a.max,u.max);return a}(r.listMeshes().map(xp))));for(const s of t.getRoot().listMeshes()){e.quantizationVolume==="mesh"&&(i=Bp(xp(s))),i&&e.pattern.test("POSITION")&&(nb(t,s,i),ib(s,1/i.scale));for(const a of s.listPrimitives()){Sp(t,a,i,e);for(const u of a.listTargets())Sp(t,u,i,e)}}await t.transform(Yl({propertyTypes:[ct.ACCESSOR,ct.SKIN,ct.MATERIAL]}),Fc({propertyTypes:[ct.ACCESSOR,ct.MATERIAL]})),n.debug("quantize: Complete.")})};function Sp(o,e,t,n){const r=o.getLogger();for(const i of e.listSemantics()){if(!n.pattern.test(i))continue;const s=e.getAttribute(i),{bits:a,ctor:u}=sb(i,s,r,n);if(!u)continue;if(a<8||a>16)throw new Error("quantize: Requires bits = 816.");if(s.getComponentSize()<=a/8)continue;const f=s.clone();if(i==="POSITION"){const l=t.scale,p=[];e instanceof ao?by(p,gh(t)):Ty(p,[1/l,1/l,1/l]);for(let d=0,_=[0,0,0],A=f.getCount();d<A;d++)f.getElement(d,_),f.setElement(d,xd(_,_,p))}ob(f,u,a),e.swap(s,f)}if(n.normalizeWeights&&e.getAttribute("WEIGHTS_0")&&yg(e,1/0),e instanceof ao&&e.getIndices()&&e.listAttributes().length&&e.listAttributes()[0].getCount()<65535){const i=e.getIndices();i.setArray(new Uint16Array(i.getArray()))}}function Bp(o){const{min:e,max:t}=o,n=Math.max((t[0]-e[0])/2,(t[1]-e[1])/2,(t[2]-e[2])/2);return{offset:[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2,e[2]+(t[2]-e[2])/2],scale:n}}function nb(o,e,t){const n=gh(t);for(const r of e.listParents()){if(!(r instanceof Nu))continue;const i=r.listParents().filter(l=>l instanceof da),s=i.some(l=>tb.includes(l.getTargetPath())),a=r.listChildren().length>0;if(r.getSkin()){r.setSkin(rb(r.getSkin(),t));continue}let u;a||s?(u=o.createNode("").setMesh(e),r.addChild(u).setMesh(null),i.filter(l=>l.getTargetPath()===eb).forEach(l=>l.setTargetNode(u))):u=r;const f=u.getMatrix();Md(f,f,n),u.setMatrix(f)}}function rb(o,e){o=o.clone();const t=gh(e),n=o.getInverseBindMatrices().clone(),r=[];for(let i=0,s=n.getCount();i<s;i++)n.getElement(i,r),Md(r,r,t),n.setElement(i,r);return o.setInverseBindMatrices(n)}function ib(o,e){for(const t of o.listPrimitives()){let n=t.getMaterial();if(!n)continue;let r=n.getExtension("KHR_materials_volume");!r||r.getThicknessFactor()<=0||(r=r.clone().setThicknessFactor(r.getThicknessFactor()*e),n=n.clone().setExtension("KHR_materials_volume",r),t.setMaterial(n))}}function ob(o,e,t){const n=new e(o.getArray().length),r=YA.includes(e)?1:0,i=t-r,s=8*e.BYTES_PER_ELEMENT-r,a=Math.pow(2,i)-1,u=s-i,f=2*i-s;for(let l=0,p=0,d=[];l<o.getCount();l++){o.getElement(l,d);for(let _=0;_<d.length;_++){let A=Math.round(Math.abs(d[_])*a);A=A<<u|A>>f,n[p++]=A*Math.sign(d[_])}}o.setArray(n).setNormalized(!0)}function sb(o,e,t,n){const r=e.getMinNormalized([]),i=e.getMaxNormalized([]);let s,a;if(o==="POSITION")s=n.quantizePosition,a=s<=8?Int8Array:Int16Array;else if(o==="NORMAL"||o==="TANGENT")s=n.quantizeNormal,a=s<=8?Int8Array:Int16Array;else if(o.startsWith("COLOR_"))s=n.quantizeColor,a=s<=8?Uint8Array:Uint16Array;else if(o.startsWith("TEXCOORD_")){if(r.some(u=>u<0)||i.some(u=>u>1))return t.warn(`quantize: Skipping ${o}; out of [0,1] range.`),{bits:-1};s=n.quantizeTexcoord,a=s<=8?Uint8Array:Uint16Array}else{if(o.startsWith("JOINTS_"))return s=Math.max(...e.getMax([]))<=255?8:16,a=s<=8?Uint8Array:Uint16Array,e.getComponentSize()>s/8&&e.setArray(new a(e.getArray())),{bits:-1};if(o.startsWith("WEIGHTS_")){if(r.some(u=>u<0)||i.some(u=>u>1))return t.warn(`quantize: Skipping ${o}; out of [0,1] range.`),{bits:-1};s=n.quantizeWeight,a=s<=8?Uint8Array:Uint16Array}else{if(!o.startsWith("_"))throw new Error(`quantize: Unexpected semantic, "${o}".`);if(r.some(u=>u<-1)||i.some(u=>u>1))return t.warn(`quantize: Skipping ${o}; out of [-1,1] range.`),{bits:-1};s=n.quantizeGeneric,a=a=r.some(u=>u<0)?s<=8?Int8Array:Int16Array:s<=8?Uint8Array:Uint16Array}}return{bits:s,ctor:a}}function xp(o){const e=[],t=[];for(const r of o.listPrimitives()){const i=r.getAttribute("POSITION");i&&e.push(i);for(const s of r.listTargets()){const a=s.getAttribute("POSITION");a&&t.push(a)}}if(e.length===0)throw new Error('quantize: Missing "POSITION" attribute.');const n=Mp(e,3);if(t.length>0){const{min:r,max:i}=Mp(t,3);nd(n.min,n.min,nd(r,kh(r,r,2),[0,0,0])),rd(n.max,n.max,rd(i,kh(i,i,2),[0,0,0]))}return n}function Mp(o,e){const t=new Array(e).fill(1/0),n=new Array(e).fill(-1/0),r=[],i=[];for(const s of o){s.getMinNormalized(r),s.getMaxNormalized(i);for(let a=0;a<e;a++)t[a]=Math.min(t[a],r[a]),n[a]=Math.max(n[a],i[a])}return{min:t,max:n}}function gh(o){return Sy([],[0,0,0,1],o.offset,[o.scale,o.scale,o.scale])}const Ag={level:"high"},ab=o=>{const e=qi({},Ag,o),t=e.encoder;if(!t)throw new Error('meshopt: encoder dependency required  install "meshoptimizer".');return async n=>{await n.transform(_g({encoder:t,target:"size"}),vg({pattern:e.level==="medium"?/.*/:/^(POSITION|TEXCOORD|JOINTS|WEIGHTS)(_\d+)?$/,quantizePosition:14,quantizeTexcoord:12,quantizeColor:8,quantizeNormal:8})),n.createExtension(Fa).setRequired(!0).setEncoderOptions({method:e.level==="medium"?Fa.EncoderMethod.QUANTIZE:Fa.EncoderMethod.FILTER})}},Dp={};function ub(o=Dp){return qi({},Dp,o),bo("metalRough",async e=>{const t=e.getLogger();if(!e.getRoot().listExtensionsUsed().map(a=>a.extensionName).includes("KHR_materials_pbrSpecularGlossiness"))return void t.warn("metalRough: KHR_materials_pbrSpecularGlossiness not found on document.");const n=e.createExtension(zl),r=e.createExtension(Jl),i=e.createExtension(Kl),s=new Set;for(const a of e.getRoot().listMaterials()){const u=a.getExtension("KHR_materials_pbrSpecularGlossiness");if(!u)continue;const f=r.createSpecular().setSpecularFactor(1).setSpecularColorFactor(u.getSpecularFactor());s.add(u.getSpecularGlossinessTexture()),s.add(a.getBaseColorTexture()),s.add(a.getMetallicRoughnessTexture()),a.setBaseColorFactor(u.getDiffuseFactor()).setMetallicFactor(0).setRoughnessFactor(1).setExtension("KHR_materials_ior",n.createIOR().setIOR(1e3)).setExtension("KHR_materials_specular",f);const l=u.getDiffuseTexture();l&&(a.setBaseColorTexture(l),a.getBaseColorTextureInfo().copy(u.getDiffuseTextureInfo()));const p=u.getSpecularGlossinessTexture();if(p){const d=u.getSpecularGlossinessTextureInfo(),_=e.createTexture();await pp(p,_,(v,T,P)=>{v.set(T,P,3,255)}),f.setSpecularTexture(_),f.setSpecularColorTexture(_),f.getSpecularTextureInfo().copy(d),f.getSpecularColorTextureInfo().copy(d);const A=u.getGlossinessFactor(),E=e.createTexture();await pp(p,E,(v,T,P)=>{const I=255-Math.round(v.get(T,P,3)*A);v.set(T,P,0,0),v.set(T,P,1,I),v.set(T,P,2,0),v.set(T,P,3,255)}),a.setMetallicRoughnessTexture(E),a.getMetallicRoughnessTextureInfo().copy(d)}else f.setSpecularColorFactor(u.getSpecularFactor()),a.setRoughnessFactor(1-u.getGlossinessFactor());a.setExtension("KHR_materials_pbrSpecularGlossiness",null)}i.dispose();for(const a of s)a&&a.listParents().length===1&&a.dispose();t.debug("metalRough: Complete.")})}const Rp={};function bg(o=Rp){return qi({},Rp,o),bo("unweld",e=>{const t=e.getLogger(),n=new Map;for(const r of e.getRoot().listMeshes())for(const i of r.listPrimitives()){const s=i.getIndices();if(!s)continue;const a=i.getAttribute("POSITION").getCount();for(const f of i.listAttributes())i.swap(f,Ip(f,s,t,n)),f.listParents().length===1&&f.dispose();for(const f of i.listTargets())for(const l of f.listAttributes())f.swap(l,Ip(l,s,t,n)),l.listParents().length===1&&l.dispose();const u=i.getAttribute("POSITION").getCount();t.debug(`unweld: ${mh(a,u)} vertices.`),i.setIndices(null),s.listParents().length===1&&s.dispose()}t.debug("unweld: Complete.")})}function Ip(o,e,t,n){if(n.has(o)&&n.get(o).has(e))return t.debug(`unweld: Cache hit for reused attribute, "${o.getName()}".`),n.get(o).get(e);const r=o.clone(),i=o.getArray().constructor;r.setArray(new i(e.getCount()*o.getElementSize()));const s=[];for(let a=0;a<e.getCount();a++)r.setElement(a,o.getElement(e.getScalar(a),s));return n.has(o)||n.set(o,new Map),n.get(o).set(e,r),r}const Pp={overwrite:!1};function cb(o=Pp){const e=qi({},Pp,o);return bo("normals",async t=>{const n=t.getLogger();let r=0;await t.transform(bg());for(const i of t.getRoot().listMeshes())for(const s of i.listPrimitives()){const a=s.getAttribute("POSITION");let u=s.getAttribute("NORMAL");if(e.overwrite&&u)u.dispose();else if(u){n.debug("normals: Skipping primitive: NORMAL found.");continue}u=t.createAccessor().setArray(new Float32Array(3*a.getCount())).setType("VEC3");const f=[0,0,0],l=[0,0,0],p=[0,0,0];for(let d=0;d<a.getCount();d+=3){a.getElement(d+0,f),a.getElement(d+1,l),a.getElement(d+2,p);const _=lb(f,l,p);u.setElement(d+0,_),u.setElement(d+1,_),u.setElement(d+2,_)}s.setAttribute("NORMAL",u),r++}r?n.debug("normals: Complete."):n.warn("normals: No qualifying primitives found. See debug output.")})}function lb(o,e,t){const n=[e[0]-o[0],e[1]-o[1],e[2]-o[2]],r=[t[0]-o[0],t[1]-o[1],t[2]-o[2]];return Gl([0,0,0],[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]])}const Fp={animations:!0,meshes:!0},fb=(o=Fp)=>{const e=qi({},Fp,o);return bo("partition",async t=>{const n=t.getLogger();e.meshes!==!1&&function(r,i,s){const a=new Set(r.getRoot().listBuffers().map(u=>u.getURI()));r.getRoot().listMeshes().forEach((u,f)=>{if(Array.isArray(s.meshes)&&!s.meshes.includes(u.getName()))return void i.debug(`partition: Skipping mesh #${f} with name "${u.getName()}".`);i.debug(`partition: Creating buffer for mesh "${u.getName()}".`);const l=r.createBuffer(u.getName()).setURI(Lp(u.getName()||"mesh",a));u.listPrimitives().forEach(p=>{const d=p.getIndices();d&&d.setBuffer(l),p.listAttributes().forEach(_=>_.setBuffer(l)),p.listTargets().forEach(_=>{_.listAttributes().forEach(A=>A.setBuffer(l))})})})}(t,n,e),e.animations!==!1&&function(r,i,s){const a=new Set(r.getRoot().listBuffers().map(u=>u.getURI()));r.getRoot().listAnimations().forEach((u,f)=>{if(Array.isArray(s.animations)&&!s.animations.includes(u.getName()))return void i.debug(`partition: Skipping animation #${f} with name "${u.getName()}".`);i.debug(`partition: Creating buffer for animation "${u.getName()}".`);const l=r.createBuffer(u.getName()).setURI(Lp(u.getName()||"animation",a));u.listSamplers().forEach(p=>{const d=p.getInput(),_=p.getOutput();d&&d.setBuffer(l),_&&_.setBuffer(l)})})}(t,n,e),e.meshes||e.animations||n.warn("partition: Select animations or meshes to create a partition."),await t.transform(Yl({propertyTypes:[ct.BUFFER]})),n.debug("partition: Complete.")})};function Lp(o,e){let t=`${o}.bin`,n=1;for(;e.has(t);)t=`${o}_${n++}.bin`;return t}const Op={tolerance:1e-4},db=(o=Op)=>{const e=qi({},Op,o);return bo("resample",async(t,n)=>{const r=new Set,i=t.getRoot().listAccessors().length,s=t.getLogger();let a=!1;for(const u of t.getRoot().listAnimations()){const f=new Map;for(const l of u.listChannels())f.set(l.getSampler(),l.getTargetPath());for(const l of u.listSamplers())f.get(l)!=="weights"?l.getInterpolation()!=="STEP"&&l.getInterpolation()!=="LINEAR"||(r.add(l.getInput()),r.add(l.getOutput()),hb(l,f.get(l),e)):a=!0}for(const u of Array.from(r.values()))u.listParents().some(f=>!(f instanceof Wa))||u.dispose();t.getRoot().listAccessors().length>i&&!ph(n,"resample","dedup")&&await t.transform(Fc({propertyTypes:[ct.ACCESSOR]})),a&&s.warn("resample: Skipped optimizing morph target keyframes, not yet supported."),s.debug("resample: Complete.")})};function hb(o,e,t){const n=o.getInput().clone(),r=o.getOutput().clone(),i=t.tolerance,s=o.getInterpolation(),a=n.getCount()-1,u=[],f=[],l=[],p=[];let d=1;for(let _=1;_<a;++_){const A=n.getScalar(d-1),E=n.getScalar(_),v=n.getScalar(_+1),T=(E-A)/(v-A);let P=!1;if(E!==v&&(_!==1||E!==n.getScalar(0)))if(r.getElement(d-1,p),r.getElement(_,f),r.getElement(_+1,l),s==="LINEAR"&&e==="rotation"){const I=wl(u,p,l,T),k=lp(p,f)+lp(f,l);P=!bi.eq(f,I,i)||k+Number.EPSILON>=Math.PI}else if(s==="LINEAR"){const I=mb(u,p,l,T);P=!bi.eq(f,I,i)}else s==="STEP"&&(P=!bi.eq(f,p)||!bi.eq(f,l));P&&(_!==d&&(n.setScalar(d,n.getScalar(_)),r.setElement(d,r.getElement(_,u))),d++)}a>0&&(n.setScalar(d,n.getScalar(a)),r.setElement(d,r.getElement(a,u)),d++),d!==n.getCount()?(n.setArray(n.getArray().slice(0,d)),r.setArray(r.getArray().slice(0,d*r.getElementSize())),o.setInput(n),o.setOutput(r)):(n.dispose(),r.dispose())}function pb(o,e,t){return o*(1-t)+e*t}function mb(o,e,t,n){for(let r=0;r<e.length;r++)o[r]=pb(e[r],t[r],n);return o}const Np={name:"",fps:10,pattern:/.*/,sort:!0};function _b(o=Np){const e=qi({},Np,o);return bo("sequence",t=>{const n=t.getLogger(),r=t.getRoot(),i=e.fps,s=r.listNodes().filter(f=>f.getName().match(e.pattern));e.sort&&s.sort((f,l)=>f.getName()>l.getName()?1:-1);const a=t.createAnimation(e.name),u=r.listBuffers()[0];s.forEach((f,l)=>{let p,d;l===0?(p=[l/i,(l+1)/i],d=[1,1,1,0,0,0]):l===s.length-1?(p=[(l-1)/i,l/i],d=[0,0,0,1,1,1]):(p=[(l-1)/i,l/i,(l+1)/i],d=[0,0,0,1,1,1,0,0,0]);const _=t.createAccessor().setArray(new Float32Array(p)).setBuffer(u),A=t.createAccessor().setArray(new Float32Array(d)).setBuffer(u).setType(Cn.Type.VEC3),E=t.createAnimationSampler().setInterpolation(Xa.Interpolation.STEP).setInput(_).setOutput(A),v=t.createAnimationChannel().setTargetNode(f).setTargetPath(da.TargetPath.SCALE).setSampler(E);a.addSampler(E).addChannel(v)}),n.debug("sequence: Complete.")})}const cd={tolerance:1e-4,overwrite:!0};function Eg(o=cd){const e=qi({},cd,o);if(e.tolerance>.1||e.tolerance<0)throw new Error("weld: Requires 0  tolerance  0.1");return bo("weld",async(t,n)=>{const r=t.getLogger();for(const i of t.getRoot().listMeshes())for(const s of i.listPrimitives())Tg(t,s,e);ph(n,"weld","dedup")||await t.transform(Fc({propertyTypes:[ct.ACCESSOR]})),r.debug("weld: Complete.")})}function Tg(o,e,t){e.getIndices()&&!t.overwrite||e.getMode()!==ao.Mode.POINTS&&(t.tolerance===0?function(n,r){if(r.getIndices())return;const i=r.listAttributes()[0],s=i.getCount(),a=i.getBuffer(),u=n.createAccessor().setBuffer(a).setType(Cn.Type.SCALAR).setArray(yu(s));r.setIndices(u)}(o,e):function(n,r,i){const s=n.getLogger(),a=r.getAttribute("POSITION"),u=r.getIndices()||n.createAccessor().setArray(yu(a.getCount())),f=new Uint32Array(new Set(u.getArray())),l=Math.max(i.tolerance,Number.EPSILON),p={};for(const ee of r.listSemantics()){const me=r.getAttribute(ee);p[ee]=gb(ee,me,l)}var d;s.debug(`weld: Tolerance thresholds: ${d=p,Object.entries(d).map(([ee,me])=>`${ee}=${me}`).join(", ")}`);const _=[0,0,0],A=[0,0,0];f.sort((ee,me)=>(a.getElement(ee,_),a.getElement(me,A),_[0]>A[0]?1:-1));const E=yu(f.length),v=yu(f.length),T=a.getCount();let P=0,I=0;for(let ee=0;ee<f.length;ee++){const me=f[ee];for(let Z=ee-1;Z>=0;Z--){const re=E[f[Z]];if(a.getElement(me,_),a.getElement(re,A),Math.abs(_[0]-A[0])>p.POSITION)break;I++;const de=r.listSemantics().every(Pe=>Gp(r.getAttribute(Pe),me,re,p[Pe])),Ie=r.listTargets().every(Pe=>Pe.listSemantics().every(we=>Gp(Pe.getAttribute(we),me,re,p[we])));if(de&&Ie){E[me]=re;break}}v[me]=E[me]===me?P++:v[E[me]]}s.debug(`weld: Iterations per vertex: ${Math.round(I/f.length)} (avg)`),s.debug(`weld: ${mh(T,P)} vertices.`);const k=u.getCount(),K=yu(k,f.length);for(let ee=0;ee<k;ee++)K[ee]=v[u.getScalar(ee)];r.setIndices(u.clone().setArray(K)),u.listParents().length===1&&u.dispose();for(const ee of r.listAttributes())Up(r,ee,v,P);for(const ee of r.listTargets())for(const me of ee.listAttributes())Up(ee,me,v,P)}(o,e,t))}function Up(o,e,t,n){const r=(i=e.getArray(),s=n*e.getElementSize(),new i.constructor(s));var i,s;const a=e.clone().setArray(r),u=new Uint8Array(n);for(let f=0,l=[];f<t.length;f++)u[t[f]]||(a.setElement(t[f],e.getElement(f,l)),u[t[f]]=1);o.swap(e,a),e.listParents().length===1&&e.dispose()}const hc=[],pc=[];function gb(o,e,t){return o==="NORMAL"||o==="TANGENT"?.5:o.startsWith("COLOR_")?.01:o.startsWith("TEXCOORD_")?1e-4:o.startsWith("JOINTS_")?0:o.startsWith("WEIGHTS_")?.01:(hc.length=pc.length=0,e.getMinNormalized(hc),e.getMaxNormalized(pc),t*(Math.max(...pc)-Math.min(...hc)||1))}function Gp(o,e,t,n,r){o.getElement(e,hc),o.getElement(t,pc);for(let i=0,s=o.getElementSize();i<s;i++)if(Math.abs(hc[i]-pc[i])>n)return!1;return!0}const yh={ratio:.5,error:.001,lockBorder:!1},yb=o=>{const e=qi({},yh,o),t=e.simplifier;if(!t)throw new Error('simplify: simplifier dependency required  install "meshoptimizer".');return bo("simplify",async(n,r)=>{const i=n.getLogger();await t.ready,await n.transform(Eg({overwrite:!1}));for(const s of n.getRoot().listMeshes())for(const a of s.listPrimitives())a.getMode()===ao.Mode.TRIANGLES?wg(n,a,e):i.warn(`simplify: Skipping primitive of mesh "${s.getName()}": Requires TRIANGLES draw mode.`);ph(r,"simplify","dedup")||await n.transform(Fc({propertyTypes:[ct.ACCESSOR]})),i.debug("simplify: Complete.")})};function wg(o,e,t){const n=qi({},yh,t),r=n.simplifier,i=o.getLogger(),s=e.getAttribute("POSITION"),a=e.getIndices(),u=s.getCount();let f=s.getArray(),l=a.getArray();if(s.getComponentType()!==Cn.ComponentType.FLOAT)if(s.getNormalized()){const T=f,P=new Float32Array(T.length);for(let I=0,k=s.getCount(),K=[];I<k;I++)K=s.getElement(I,K),s.setArray(P).setElement(I,K).setArray(T);f=P}else f=new Float32Array(f);a.getComponentType()!==Cn.ComponentType.UNSIGNED_INT&&(l=new Uint32Array(l));const p=3*Math.floor(n.ratio*u/3),[d,_]=r.simplify(l,f,3,p,n.error,n.lockBorder?["LockBorder"]:[]),[A,E]=r.compactMesh(d);i.debug(`simplify: ${mh(s.getCount(),E)} vertices, error: ${_.toFixed(4)}.`);for(const T of _h(e)){const P=T.clone();dg(P,A,E),RA(e,T,P),T.listParents().length===1&&T.dispose()}const v=a.clone();return v.setArray(u<=65534?new Uint16Array(d):d),e.setIndices(v),a.listParents().length===1&&a.dispose(),e}function vb(o,e){const t=vh(o,e),n=[];return t&ho.R&&n.push(ho.R),t&ho.G&&n.push(ho.G),t&ho.B&&n.push(ho.B),t&ho.A&&n.push(ho.A),n}function vh(o,e){let t=0;for(const n of o.getGraph().listParentEdges(e)){const r=n.getParent();let{channels:i}=n.getAttributes();i&&n.getName()==="baseColorTexture"&&r instanceof Ks&&r.getAlphaMode()===Ks.AlphaMode.OPAQUE&&(i&=~ho.A),i?t|=i:r.propertyType!==ct.ROOT&&o.getLogger().warn(`Missing attribute ".channels" on edge, "${n.getName()}".`)}return t}function Ah(o,e){const t=o.getRoot(),n=o.getGraph().listParentEdges(e).filter(r=>r.getParent()!==t).map(r=>r.getName());return Array.from(new Set(n))}var Cs;(function(o){o.OXIPNG="oxipng",o.MOZJPEG="mozjpeg",o.WEBP="webp"})(Cs||(Cs={}));const Cg={[Cs.OXIPNG]:"image/png",[Cs.MOZJPEG]:"image/jpeg",[Cs.WEBP]:"image/webp"},$l={jobs:4,formats:/.*/,slots:/.*/,auto:!1},Ab=qi({},$l,{codec:Cs.WEBP}),bb=qi({},$l,{codec:Cs.MOZJPEG,formats:/^image\/jpeg$/}),Eb=qi({},$l,{codec:Cs.OXIPNG,formats:/^image\/png$/}),Tb=["image/jpeg","image/png","image/webp"];let Tu=null,ld=0;const wb=(o,e)=>(Tu||(Tu=new o.ImagePool(e)),ld++,Tu),Cb=()=>{ld--,Tu&&ld<=0&&(Tu.close(),Tu=null)},Zl=function(o){const e=qi({},$l,o),t=e.squoosh,n=e.codec;if(!t)throw new Error(`${n}: squoosh dependency required  install "@squoosh/lib".`);return async r=>{const i=r.getLogger(),s=r.getRoot().listTextures(),a=wb(t,e.jobs);await Promise.all(s.map(async(u,f)=>{const l=Ah(r,u),p=vh(r,u),d=u.getURI()||u.getName()||`${f+1}/${r.getRoot().listTextures().length}`,_=`${n}:texture(${d})`;if(!Tb.includes(u.getMimeType()))return void i.debug(`${_}: Skipping, unsupported texture type "${u.getMimeType()}".`);if(!e.formats.test(u.getMimeType()))return void i.debug(`${_}: Skipping, "${u.getMimeType()}" excluded by "formats" parameter.`);if(l.length&&!l.some(P=>e.slots.test(P)))return void i.debug(`${_}: Skipping, [${l.join(", ")}] excluded by "slots" parameter.`);if(e.codec===Cs.MOZJPEG&&p&ho.A)return void i.warn(`${_}: Skipping, [${l.join(", ")}] requires alpha channel.`);i.debug(`${_}: Slots  [${l.join(", ")}]`);const A=a.ingestImage(u.getImage()),E=u.getImage().byteLength;await A.encode({[e.codec]:e.auto?"auto":{}});const v=await A.encodedWith[e.codec];i.debug(`${_}: ${JSON.stringify(v.optionsUsed)}`),u.setImage(v.binary).setMimeType(Cg[e.codec]);const T=v.binary.byteLength;i.debug(`${_}: ${_p(E)}  ${_p(T)}`)})),Cb(),i.debug(`${n}: Complete.`)}},Sb=function(o){const e=qi({},Ab,o);return async t=>{await Zl(e)(t),t.getRoot().listTextures().some(n=>n.getMimeType()===Cg[Cs.WEBP])&&t.createExtension(jl).setRequired(!0)}},Bb=function(o){const e=qi({},bb,o);return t=>Zl(e)(t)},xb=function(o){const e=qi({},Eb,o);return t=>Zl(e)(t)},kp={overwrite:!1};function Mb(o=kp){if(!o.generateTangents)throw new Error('tangents: generateTangents callback required  install "mikktspace".');const e=qi({},kp,o);return bo("tangents",t=>{const n=t.getLogger(),r=new Map,i=new Map;let s=0;for(const a of t.getRoot().listMeshes()){const u=a.getName(),f=a.listPrimitives();for(let l=0;l<f.length;l++){const p=f[l];if(!Rb(p,n,u,l,e.overwrite))continue;const d=Db(p),_=p.getAttribute("POSITION").getArray(),A=p.getAttribute("NORMAL").getArray(),E=p.getAttribute(d).getArray(),v=r.get(_)||fc();r.set(_,v);const T=r.get(A)||fc();r.set(A,T);const P=r.get(E)||fc();r.set(E,P);const I=p.getAttribute("TANGENT");I&&I.listParents().length===2&&I.dispose();const k=`${v}|${T}|${P}`;let K=i.get(k);if(K){n.debug(`tangents: Found cache for primitive ${l} of mesh "${u}".`),p.setAttribute("TANGENT",K),s++;continue}n.debug(`tangents: Generating for primitive ${l} of mesh "${u}".`);const ee=p.getAttribute("POSITION").getBuffer(),me=e.generateTangents(_ instanceof Float32Array?_:new Float32Array(_),A instanceof Float32Array?A:new Float32Array(A),E instanceof Float32Array?E:new Float32Array(E));for(let Z=3;Z<me.length;Z+=4)me[Z]*=-1;K=t.createAccessor().setBuffer(ee).setArray(me).setType("VEC4"),p.setAttribute("TANGENT",K),i.set(k,K),s++}}s?n.debug("tangents: Complete."):n.warn("tangents: No qualifying primitives found. See debug output.")})}function Db(o){const e=o.getMaterial();if(!e)return"TEXCOORD_0";const t=e.getNormalTextureInfo();if(!t)return"TEXCOORD_0";const n=`TEXCOORD_${t.getTexCoord()}`;return o.getAttribute(n)?n:"TEXCOORD_0"}function Rb(o,e,t,n,r){return o.getMode()===ao.Mode.TRIANGLES&&o.getAttribute("POSITION")&&o.getAttribute("NORMAL")&&o.getAttribute("TEXCOORD_0")?o.getAttribute("TANGENT")&&!r?(e.debug(`tangents: Skipping primitive ${n} of mesh "${t}": TANGENT found.`),!1):!o.getIndices()||(e.warn(`tangents: Skipping primitive ${n} of mesh "${t}": primitives must be unwelded.`),!1):(e.debug(`tangents: Skipping primitive ${n} of mesh "${t}": primitives must have attributes=[POSITION, NORMAL, TEXCOORD_0] and mode=TRIANGLES.`),!1)}const Rs="textureResize";var bc;(function(o){o.LANCZOS3="lanczos3",o.LANCZOS2="lanczos2"})(bc||(bc={}));const fd={size:[2048,2048],filter:bc.LANCZOS3,pattern:null,slots:null};function Ib(o=fd){const e=qi({},fd,o);return bo(Rs,async t=>{const n=t.getLogger();for(const r of t.getRoot().listTextures()){const i=r.getName(),s=r.getURI();if(e.pattern&&!e.pattern.test(i)&&!e.pattern.test(s)){n.debug(`${Rs}: Skipping, excluded by "pattern" parameter.`);continue}if(r.getMimeType()!=="image/png"&&r.getMimeType()!=="image/jpeg"){n.warn(`${Rs}: Skipping, unsupported texture type "${r.getMimeType()}".`);continue}const a=Ah(t,r);if(e.slots&&!a.some(T=>{var P;return(P=e.slots)==null?void 0:P.test(T)})){n.debug(`${Rs}: Skipping, [${a.join(", ")}] excluded by "slots" parameter.`);continue}const[u,f]=e.size,[l,p]=r.getSize();if(l<=u&&p<=f){n.debug(`${Rs}: Skipping, not within size range.`);continue}let d=l,_=p;d>u&&(_=Math.floor(_*(u/d)),d=u),_>f&&(d=Math.floor(d*(f/_)),_=f);const A=r.getImage(),E=await sg(A,r.getMimeType()),v=ts(new Uint8Array(d*_*4),[d,_,4]);n.debug(`${Rs}: Resizing "${s||i}", ${E.shape}  ${v.shape}...`),n.debug(`${Rs}: Slots  [${a.join(", ")}]`);try{e.filter===bc.LANCZOS3?MA(E,v):DA(E,v)}catch(T){if(T instanceof Error){n.warn(`${Rs}: Failed to resize "${s||i}": "${T.message}".`);continue}throw T}r.setImage(await ag(v,r.getMimeType()))}n.debug(`${Rs}: Complete.`)})}function Pb(o,e,t=!1,n){for(const r of o.listPrimitives())if(r.listParents().some(i=>i.propertyType===ct.MESH&&i!==o)){const i=r.clone();o.swap(r,i);for(const s of i.listTargets()){const a=s.clone();i.swap(s,a)}}if(!t){const r=new Set([...o.listPrimitives(),...o.listPrimitives().flatMap(s=>s.listTargets())]),i=new Map;for(const s of o.listPrimitives())for(const a of _h(s))a.listParents().some(u=>(u instanceof ao||u instanceof Ld)&&!r.has(u))&&!i.has(a)&&i.set(a,a.clone());for(const s of r)for(const[a,u]of i)s.swap(a,u)}n=n||new Set;for(const r of o.listPrimitives())Sg(r,e,n)}function Sg(o,e,t=new Set){var n;const r=o.getAttribute("POSITION"),i=((n=o.getIndices())==null?void 0:n.getArray())||yu(r.getCount());r&&Hp(e,r,i,new Set(t));const s=o.getAttribute("NORMAL");s&&Wp(e,s,i,new Set(t));const a=o.getAttribute("TANGENT");a&&Vp(e,a,i,new Set(t));for(const u of o.listTargets()){const f=u.getAttribute("POSITION");f&&Hp(e,f,i,new Set(t));const l=u.getAttribute("NORMAL");l&&Wp(e,l,i,new Set(t));const p=u.getAttribute("TANGENT");p&&Vp(e,p,i,new Set(t))}for(let u=0;u<i.length;u++)t.add(i[u])}function Hp(o,e,t,n){const r=new Float32Array(3*e.getCount()),i=e.getElementSize();for(let a=0,u=[],f=e.getCount();a<f;a++)r.set(e.getElement(a,u),a*i);const s=Dc();for(let a=0;a<t.length;a++){const u=t[a];n.has(u)||(e.getElement(u,s),xd(s,s,o),r.set(s,3*u),n.add(u))}e.setArray(r).setNormalized(!1)}function Wp(o,e,t,n){const r=ug();AA(r,o),EA(r,r),bA(r,r);const i=Dc();for(let s=0;s<t.length;s++){const a=t[s];n.has(a)||(e.getElement(a,i),vy(i,i,r),Gl(i,i),e.setElement(a,i),n.add(a))}}function Vp(o,e,t,n){const r=Dc(),i=cg();for(let s=0;s<t.length;s++){const a=t[s];if(n.has(a))continue;e.getElement(a,i);const[u,f,l]=i;r[0]=o[0]*u+o[4]*f+o[8]*l,r[1]=o[1]*u+o[5]*f+o[9]*l,r[2]=o[2]*u+o[6]*f+o[10]*l,Gl(r,r),i[0]=r[0],i[1]=r[1],i[2]=r[2],e.setElement(a,i),n.add(a)}}const Fb=()=>o=>{const e=o.createExtension(ql).createUnlit();o.getRoot().listMaterials().forEach(t=>{t.setExtension("KHR_materials_unlit",e)})},jp={},Lb=(o=jp)=>(qi({},jp,o),bo("unpartition",async e=>{const t=e.getLogger(),n=e.getRoot().listBuffers()[0];e.getRoot().listAccessors().forEach(r=>r.setBuffer(n)),e.getRoot().listBuffers().forEach((r,i)=>i>0?r.dispose():null),t.debug("unpartition: Complete.")}));function Ob(o,e){const t=o.getGraph(),n=[];for(const r of t.listParentEdges(e)){const i=r.getParent(),s=r.getName()+"Info";for(const a of t.listChildEdges(i)){const u=a.getChild();u instanceof Qi&&a.getName()===s&&n.push(u)}}return n}const Nb=Object.freeze(Object.defineProperty({__proto__:null,DRACO_DEFAULTS:pg,MESHOPT_DEFAULTS:Ag,QUANTIZE_DEFAULTS:ud,SIMPLIFY_DEFAULTS:yh,TEXTURE_RESIZE_DEFAULTS:fd,get TextureResizeFilter(){return bc},WELD_DEFAULTS:cd,bounds:Rc,center:IA,colorspace:PA,createLayoutPlan:gg,dedup:Fc,dequantize:FA,draco:OA,getTextureChannelMask:vh,inspect:NA,instance:zA,listTextureChannels:vb,listTextureInfo:Ob,listTextureSlots:Ah,meshopt:ab,metalRough:ub,mozjpeg:Bb,normals:cb,oxipng:xb,partition:fb,prune:Yl,quantize:vg,reorder:_g,resample:db,sequence:_b,simplify:yb,simplifyPrimitive:wg,sortPrimitiveWeights:yg,squoosh:Zl,tangents:Mb,textureResize:Ib,transformMesh:Pb,transformPrimitive:Sg,unlit:Fb,unpartition:Lb,unweld:bg,webp:Sb,weld:Eg,weldPrimitive:Tg},Symbol.toStringTag,{value:"Module"})),Ub=Ou(Nb);function Bi(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qa={},hf={},zp;function Gb(){if(zp)return hf;zp=1;var o=function(){return function(l){l=l||{};function t(){return Oe.buffer!=Yt&&ir(Oe.buffer),yn}function n(){return Oe.buffer!=Yt&&ir(Oe.buffer),Cr}function r(){return Oe.buffer!=Yt&&ir(Oe.buffer),Qr}function i(){return Oe.buffer!=Yt&&ir(Oe.buffer),Ai}function s(){return Oe.buffer!=Yt&&ir(Oe.buffer),oi}function a(){return Oe.buffer!=Yt&&ir(Oe.buffer),qr}function u(){return Oe.buffer!=Yt&&ir(Oe.buffer),xn}function f(){return Oe.buffer!=Yt&&ir(Oe.buffer),ei}var l=typeof l<"u"?l:{},p,d;l.ready=new Promise(function(h,g){p=h,d=g});var _={},A;for(A in l)l.hasOwnProperty(A)&&(_[A]=l[A]);var E=function(h,g){throw g},v=typeof importScripts=="function",T=l.ENVIRONMENT_IS_PTHREAD||!1,P="";function I(h){return l.locateFile?l.locateFile(h,P):P+h}var k,K,ee,me;{v?P=gi.dirname(P)+"/":P=__dirname+"/",k=function(g,x){return ee||(ee=gi),me||(me=gi),g=me.normalize(g),ee.readFileSync(g,x?null:"utf8")},K=function(g){var x=k(g,!0);return x.buffer||(x=new Uint8Array(x)),ht(x.buffer),x},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),E=function(h){process.exit(h)},l.inspect=function(){return"[Emscripten Module object]"};var Z;try{Z=gi}catch(h){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),h}vi.Worker=Z.Worker}typeof performance>"u"&&(vi.performance=gi.performance);var re=l.print||console.log.bind(console),de=l.printErr||console.warn.bind(console);for(A in _)_.hasOwnProperty(A)&&(l[A]=_[A]);_=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&(E=l.quit);var Ie=0,Pe=function(h){Ie=h},we=function(){return Ie},Te;l.wasmBinary&&(Te=l.wasmBinary);var Se=l.noExitRuntime||!0;typeof WebAssembly!="object"&&or("no native wasm support detected");var Oe,He,j=!1;function ht(h,g){h||or("Assertion failed: "+g)}function Qe(h,g,x){for(var U=g+x,z="";!(g>=U);){var B=h[g++];if(!B)return z;if(!(B&128)){z+=String.fromCharCode(B);continue}var N=h[g++]&63;if((B&224)==192){z+=String.fromCharCode((B&31)<<6|N);continue}var $=h[g++]&63;if((B&240)==224?B=(B&15)<<12|N<<6|$:B=(B&7)<<18|N<<12|$<<6|h[g++]&63,B<65536)z+=String.fromCharCode(B);else{var ce=B-65536;z+=String.fromCharCode(55296|ce>>10,56320|ce&1023)}}return z}function Je(h,g){return h?Qe(n(),h,g):""}function ze(h,g,x,U){if(!(U>0))return 0;for(var z=x,B=x+U-1,N=0;N<h.length;++N){var $=h.charCodeAt(N);if($>=55296&&$<=57343){var ce=h.charCodeAt(++N);$=65536+(($&1023)<<10)|ce&1023}if($<=127){if(x>=B)break;g[x++]=$}else if($<=2047){if(x+1>=B)break;g[x++]=192|$>>6,g[x++]=128|$&63}else if($<=65535){if(x+2>=B)break;g[x++]=224|$>>12,g[x++]=128|$>>6&63,g[x++]=128|$&63}else{if(x+3>=B)break;g[x++]=240|$>>18,g[x++]=128|$>>12&63,g[x++]=128|$>>6&63,g[x++]=128|$&63}}return g[x]=0,x-z}function ut(h,g,x){return ze(h,n(),g,x)}function ke(h){for(var g=0,x=0;x<h.length;++x){var U=h.charCodeAt(x);U>=55296&&U<=57343&&(U=65536+((U&1023)<<10)|h.charCodeAt(++x)&1023),U<=127?++g:U<=2047?g+=2:U<=65535?g+=3:g+=4}return g}function L(h,g){for(var x="",U=0;!(U>=g/2);++U){var z=r()[h+U*2>>1];if(z==0)break;x+=String.fromCharCode(z)}return x}function nt(h,g,x){if(x===void 0&&(x=2147483647),x<2)return 0;x-=2;for(var U=g,z=x<h.length*2?x/2:h.length,B=0;B<z;++B){var N=h.charCodeAt(B);r()[g>>1]=N,g+=2}return r()[g>>1]=0,g-U}function In(h){return h.length*2}function Xt(h,g){for(var x=0,U="";!(x>=g/4);){var z=s()[h+x*4>>2];if(z==0)break;if(++x,z>=65536){var B=z-65536;U+=String.fromCharCode(55296|B>>10,56320|B&1023)}else U+=String.fromCharCode(z)}return U}function Pn(h,g,x){if(x===void 0&&(x=2147483647),x<4)return 0;for(var U=g,z=U+x-4,B=0;B<h.length;++B){var N=h.charCodeAt(B);if(N>=55296&&N<=57343){var $=h.charCodeAt(++B);N=65536+((N&1023)<<10)|$&1023}if(s()[g>>2]=N,g+=4,g+4>z)break}return s()[g>>2]=0,g-U}function vt(h){for(var g=0,x=0;x<h.length;++x){var U=h.charCodeAt(x);U>=55296&&U<=57343&&++x,g+=4}return g}function dn(h,g){return h%g>0&&(h+=g-h%g),h}var Yt,yn,Cr,Qr,Ai,oi,qr,xn,ei;T&&(Yt=l.buffer);function ir(h){Yt=h,l.HEAP8=yn=new Int8Array(h),l.HEAP16=Qr=new Int16Array(h),l.HEAP32=oi=new Int32Array(h),l.HEAPU8=Cr=new Uint8Array(h),l.HEAPU16=Ai=new Uint16Array(h),l.HEAPU32=qr=new Uint32Array(h),l.HEAPF32=xn=new Float32Array(h),l.HEAPF64=ei=new Float64Array(h)}var Ae=l.INITIAL_MEMORY||16777216;if(T)Oe=l.wasmMemory,Yt=l.buffer;else if(l.wasmMemory)Oe=l.wasmMemory;else if(Oe=new WebAssembly.Memory({initial:Ae/65536,maximum:2147483648/65536,shared:!0}),!(Oe.buffer instanceof SharedArrayBuffer))throw de("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Oe&&(Yt=Oe.buffer),Ae=Yt.byteLength,ir(Yt);var fe,ot=[],wt=[],Et=[];function Lt(){if(!T){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Ve(l.preRun.shift());Hi(ot)}}function bn(){T||Hi(wt)}function Ee(){if(!T){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)Zt(l.postRun.shift());Hi(Et)}}function Ve(h){ot.unshift(h)}function jt(h){wt.unshift(h)}function Zt(h){Et.unshift(h)}var St=0,Ut=null;function sn(h){ht(!T,"addRunDependency cannot be used in a pthread worker"),St++,l.monitorRunDependencies&&l.monitorRunDependencies(St)}function Fn(h){if(St--,l.monitorRunDependencies&&l.monitorRunDependencies(St),St==0&&Ut){var g=Ut;Ut=null,g()}}l.preloadedImages={},l.preloadedAudios={};function or(h){l.onAbort&&l.onAbort(h),T&&console.error("Pthread aborting at "+new Error().stack),h+="",de(h),j=!0,h="abort("+h+"). Build with -s ASSERTIONS=1 for more info.";var g=new WebAssembly.RuntimeError(h);throw d(g),g}var zr="data:application/octet-stream;base64,";function Fe(h){return h.startsWith(zr)}if(l.locateFile){var rt="avif_node_enc_mt.wasm";Fe(rt)||(rt=I(rt))}else var rt=new URL("avif_node_enc_mt.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("avif_node_enc_mt-143090b9.js",document.baseURI).href).toString();function Tt(h){try{if(h==rt&&Te)return new Uint8Array(Te);if(K)return K(h);throw"both async and sync fetching of the wasm failed"}catch(g){or(g)}}function Qt(){return!Te&&v&&typeof fetch=="function"?fetch(rt,{credentials:"same-origin"}).then(function(h){if(!h.ok)throw"failed to load wasm binary file at '"+rt+"'";return h.arrayBuffer()}).catch(function(){return Tt(rt)}):Promise.resolve().then(function(){return Tt(rt)})}function En(){var h={a:ie};function g(N,$){var ce=N.exports;if(l.asm=ce,fe=l.asm.ja,jt(l.asm.fa),en.tlsInitFunctions.push(l.asm.ia),He=$,!T){var V=en.unusedWorkers.length;en.unusedWorkers.forEach(function(S){en.loadWasmModuleToWorker(S,function(){--V||Fn()})})}}T||sn();function x(N){g(N.instance,N.module)}function U(N){return Qt().then(function($){var ce=WebAssembly.instantiate($,h);return ce}).then(N,function($){de("failed to asynchronously prepare wasm: "+$),or($)})}function z(){return!Te&&typeof WebAssembly.instantiateStreaming=="function"&&!Fe(rt)&&typeof fetch=="function"?fetch(rt,{credentials:"same-origin"}).then(function(N){var $=WebAssembly.instantiateStreaming(N,h);return $.then(x,function(ce){return de("wasm streaming compile failed: "+ce),de("falling back to ArrayBuffer instantiation"),U(x)})}):U(x)}if(l.instantiateWasm)try{var B=l.instantiateWasm(h,g);return B}catch(N){return de("Module.instantiateWasm callback failed with error: "+N),!1}return z().catch(d),{}}var Kr={601124:function(){throw"Canceled!"},601142:function(h,g){setTimeout(function(){Ze(h,g)},0)}};function ki(){en.initRuntime()}function Hi(h){for(;h.length>0;){var g=h.shift();if(typeof g=="function"){g(l);continue}var x=g.func;typeof x=="number"?g.arg===void 0?fe.get(x)():fe.get(x)(g.arg):x(g.arg===void 0?null:g.arg)}}var $i={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function li(h,g){if(h<=0||h>t().length||h&!0||g<0)return-28;if(g==0)return 0;g>=2147483647&&(g=1/0);var x=Atomics.load(s(),Kn>>2),U=0;if(x==h){var z=Atomics.compareExchange(s(),Kn>>2,x,0);if(z==x&&(--g,U=1,g<=0))return 1}var B=Atomics.notify(s(),h>>2,g);if(B>=0)return B+U;throw"Atomics.notify returned an unexpected value "+B}l._emscripten_futex_wake=li;function so(h){if(T)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!h)throw"Internal Error! Null pthread_ptr in killThread!";s()[h+12>>2]=0;var g=en.pthreads[h];g.worker.terminate(),en.freeThreadData(g),en.runningWorkers.splice(en.runningWorkers.indexOf(g.worker),1),g.worker.pthread=void 0}function ji(h){if(T)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!h)throw"Internal Error! Null pthread_ptr in cancelThread!";var g=en.pthreads[h];g.worker.postMessage({cmd:"cancel"})}function mo(h){if(T)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!h)throw"Internal Error! Null pthread_ptr in cleanupThread!";var g=en.pthreads[h];if(g){s()[h+12>>2]=0;var x=g.worker;en.returnWorkerToPool(x)}}var en={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var h=navigator.hardwareConcurrency,g=0;g<h;++g)en.allocateUnusedWorker()},initRuntime:function(){for(var h=D(228),g=0;g<228/4;++g)a()[h/4+g]=0;s()[h+12>>2]=h;var x=h+152;s()[x>>2]=x;for(var U=D(512),g=0;g<128;++g)a()[U/4+g]=0;Atomics.store(a(),h+100>>2,U),Atomics.store(a(),h+40>>2,h),Ht(h,!v,1),be(h)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;en.threadExitHandlers.length>0;)en.threadExitHandlers.pop()();T&&Yn()&&Tr()},runExitHandlersAndDeinitThread:function(h,g){Atomics.store(a(),h+56>>2,1),Atomics.store(a(),h+60>>2,0),en.runExitHandlers(),Atomics.store(a(),h+4>>2,g),Atomics.store(a(),h+0>>2,1),li(h+0,2147483647),Ht(0,0,0)},setExitStatus:function(h){},threadExit:function(h){var g=Yn();g&&(en.runExitHandlersAndDeinitThread(g,h),T&&postMessage({cmd:"exit"}))},threadCancel:function(){en.runExitHandlersAndDeinitThread(Yn(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var h in en.pthreads){var g=en.pthreads[h];g&&g.worker&&en.returnWorkerToPool(g.worker)}en.pthreads={};for(var x=0;x<en.unusedWorkers.length;++x){var U=en.unusedWorkers[x];U.terminate()}en.unusedWorkers=[];for(var x=0;x<en.runningWorkers.length;++x){var U=en.runningWorkers[x],g=U.pthread;en.freeThreadData(g),U.terminate()}en.runningWorkers=[]},freeThreadData:function(h){if(h){if(h.threadInfoStruct){var g=s()[h.threadInfoStruct+100>>2];s()[h.threadInfoStruct+100>>2]=0,J(g),J(h.threadInfoStruct)}h.threadInfoStruct=0,h.allocatedOwnStack&&h.stackBase&&J(h.stackBase),h.stackBase=0,h.worker&&(h.worker.pthread=null)}},returnWorkerToPool:function(h){en.runWithoutMainThreadQueuedCalls(function(){delete en.pthreads[h.pthread.threadInfoStruct],en.unusedWorkers.push(h),en.runningWorkers.splice(en.runningWorkers.indexOf(h),1),en.freeThreadData(h.pthread),h.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(h){s()[on>>2]=0;try{h()}finally{s()[on>>2]=1}},receiveObjectTransfer:function(h){},threadInit:function(){for(var h in en.tlsInitFunctions)en.tlsInitFunctions[h]()},loadWasmModuleToWorker:function(h,g){h.onmessage=function(x){var U=x.data,z=U.cmd;if(h.pthread&&(en.currentProxiedOperationCallerThread=h.pthread.threadInfoStruct),U.targetThread&&U.targetThread!=Yn()){var B=en.pthreads[U.targetThread];B?B.worker.postMessage(x.data,U.transferList):console.error('Internal error! Worker sent a message "'+z+'" to target pthread '+U.targetThread+", but that thread no longer exists!"),en.currentProxiedOperationCallerThread=void 0;return}if(z==="processQueuedMainThreadWork")qt();else if(z==="spawnThread")ui(x.data);else if(z==="cleanupThread")mo(U.thread);else if(z==="killThread")so(U.thread);else if(z==="cancelThread")ji(U.thread);else if(z==="loaded")h.loaded=!0,g&&g(h),h.runPthread&&(h.runPthread(),delete h.runPthread);else if(z==="print")re("Thread "+U.threadId+": "+U.text);else if(z==="printErr")de("Thread "+U.threadId+": "+U.text);else if(z==="alert")alert("Thread "+U.threadId+": "+U.text);else if(z==="exit"){var N=h.pthread&&Atomics.load(a(),h.pthread.threadInfoStruct+64>>2);N&&en.returnWorkerToPool(h)}else if(z==="exitProcess")try{C(U.returnCode)}catch($){if($ instanceof y)return;throw $}else z==="cancelDone"?en.returnWorkerToPool(h):z==="objectTransfer"?en.receiveObjectTransfer(x.data):x.data.target==="setimmediate"?h.postMessage(x.data):de("worker sent an unknown command "+z);en.currentProxiedOperationCallerThread=void 0},h.onerror=function(x){de("pthread sent an error! "+x.filename+":"+x.lineno+": "+x.message)},h.on("message",function(x){h.onmessage({data:x})}),h.on("error",function(x){h.onerror(x)}),h.on("exit",function(x){}),h.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob,wasmMemory:Oe,wasmModule:He})},allocateUnusedWorker:function(){if(!l.locateFile){en.unusedWorkers.push(new Worker(new URL("avif_node_enc_mt.worker.js",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("avif_node_enc_mt-143090b9.js",document.baseURI).href)));return}var h=I("avif_node_enc_mt.worker.js");en.unusedWorkers.push(new Worker(h))},getNewWorker:function(){return en.unusedWorkers.length==0&&(en.allocateUnusedWorker(),en.loadWasmModuleToWorker(en.unusedWorkers[0])),en.unusedWorkers.pop()},busySpinWait:function(h){for(var g=performance.now()+h;performance.now()<g;);}};function Mo(h,g){Vr(h,g),tr(h)}l.establishStackSpace=Mo;function no(h,g){return fe.get(h)(g)}l.invokeEntryPoint=no;var ge=0;function qe(){return Se||ge>0}l.keepRuntimeAlive=qe;function at(h,g,x,U){or("Assertion failed: "+Je(h)+", at: "+[g?Je(g):"unknown filename",x,U?Je(U):"unknown function"])}var Ne;Ne=function(){var h=process.hrtime();return h[0]*1e3+h[1]/1e6};function ft(h,g){en.threadExitHandlers.push(function(){fe.get(h)(g)})}function Mn(h,g){return ft(h,g)}var Bn={mappings:{},buffers:[null,[],[]],printChar:function(h,g){var x=Bn.buffers[h];g===0||g===10?((h===1?re:de)(Qe(x,0)),x.length=0):x.push(g)},varargs:void 0,get:function(){Bn.varargs+=4;var h=s()[Bn.varargs-4>>2];return h},getStr:function(h){var g=Je(h);return g},get64:function(h,g){return h}};function mr(h,g,x){return T?lr(1,1,h,g,x):(Bn.varargs=x,0)}function gr(h,g,x){return T?lr(2,1,h,g,x):(Bn.varargs=x,0)}function Gr(h,g,x){if(T)return lr(3,1,h,g,x);Bn.varargs=x}var yr={};function _r(h){for(;h.length;){var g=h.pop(),x=h.pop();x(g)}}function ti(h){return this.fromWireType(a()[h>>2])}var Wi={},zi={},Zi={},Ue=48,c=57;function Xe(h){if(h===void 0)return"_unknown";h=h.replace(/[^a-zA-Z0-9_]/g,"$");var g=h.charCodeAt(0);return g>=Ue&&g<=c?"_"+h:h}function et(h,g){return h=Xe(h),new Function("body","return function "+h+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(g)}function it(h,g){var x=et(g,function(U){this.name=g,this.message=U;var z=new Error(U).stack;z!==void 0&&(this.stack=this.toString()+`
`+z.replace(/^Error(:[^\n]*)?\n/,""))});return x.prototype=Object.create(h.prototype),x.prototype.constructor=x,x.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},x}var je=void 0;function Kt(h){throw new je(h)}function Mt(h,g,x){h.forEach(function($){Zi[$]=g});function U($){var ce=x($);ce.length!==h.length&&Kt("Mismatched type converter count");for(var V=0;V<h.length;++V)rn(h[V],ce[V])}var z=new Array(g.length),B=[],N=0;g.forEach(function($,ce){zi.hasOwnProperty($)?z[ce]=zi[$]:(B.push($),Wi.hasOwnProperty($)||(Wi[$]=[]),Wi[$].push(function(){z[ce]=zi[$],++N,N===B.length&&U(z)}))}),B.length===0&&U(z)}function xt(h){var g=yr[h];delete yr[h];var x=g.rawConstructor,U=g.rawDestructor,z=g.fields,B=z.map(function(N){return N.getterReturnType}).concat(z.map(function(N){return N.setterArgumentType}));Mt([h],B,function(N){var $={};return z.forEach(function(ce,V){var S=ce.fieldName,O=N[V],q=ce.getter,oe=ce.getterContext,G=N[V+z.length],X=ce.setter,te=ce.setterContext;$[S]={read:function(le){return O.fromWireType(q(oe,le))},write:function(le,Ce){var $e=[];X(te,le,G.toWireType($e,Ce)),_r($e)}}}),[{name:g.name,fromWireType:function(ce){var V={};for(var S in $)V[S]=$[S].read(ce);return U(ce),V},toWireType:function(ce,V){for(var S in $)if(!(S in V))throw new TypeError('Missing field:  "'+S+'"');var O=x();for(S in $)$[S].write(O,V[S]);return ce!==null&&ce.push(U,O),O},argPackAdvance:8,readValueFromPointer:ti,destructorFunction:U}]})}function Jt(h,g,x,U,z){}function hn(h){switch(h){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+h)}}function tn(){for(var h=new Array(256),g=0;g<256;++g)h[g]=String.fromCharCode(g);vn=h}var vn=void 0;function pn(h){for(var g="",x=h;n()[x];)g+=vn[n()[x++]];return g}var Ot=void 0;function Gt(h){throw new Ot(h)}function rn(h,g,x){if(x=x||{},!("argPackAdvance"in g))throw new TypeError("registerType registeredInstance requires argPackAdvance");var U=g.name;if(h||Gt('type "'+U+'" must have a positive integer typeid pointer'),zi.hasOwnProperty(h)){if(x.ignoreDuplicateRegistrations)return;Gt("Cannot register type '"+U+"' twice")}if(zi[h]=g,delete Zi[h],Wi.hasOwnProperty(h)){var z=Wi[h];delete Wi[h],z.forEach(function(B){B()})}}function fr(h,g,x,U,z){var B=hn(x);g=pn(g),rn(h,{name:g,fromWireType:function(N){return!!N},toWireType:function(N,$){return $?U:z},argPackAdvance:8,readValueFromPointer:function(N){var $;if(x===1)$=t();else if(x===2)$=r();else if(x===4)$=s();else throw new TypeError("Unknown boolean type size: "+g);return this.fromWireType($[N>>B])},destructorFunction:null})}var Ir=[],Tn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Jr(h){h>4&&--Tn[h].refcount===0&&(Tn[h]=void 0,Ir.push(h))}function Sr(){for(var h=0,g=5;g<Tn.length;++g)Tn[g]!==void 0&&++h;return h}function kr(){for(var h=5;h<Tn.length;++h)if(Tn[h]!==void 0)return Tn[h];return null}function si(){l.count_emval_handles=Sr,l.get_first_emval=kr}function ni(h){switch(h){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var g=Ir.length?Ir.pop():Tn.length;return Tn[g]={refcount:1,value:h},g}}}function Di(h,g){g=pn(g),rn(h,{name:g,fromWireType:function(x){var U=Tn[x].value;return Jr(x),U},toWireType:function(x,U){return ni(U)},argPackAdvance:8,readValueFromPointer:ti,destructorFunction:null})}function Ti(h){if(h===null)return"null";var g=typeof h;return g==="object"||g==="array"||g==="function"?h.toString():""+h}function Ri(h,g){switch(g){case 2:return function(x){return this.fromWireType(u()[x>>2])};case 3:return function(x){return this.fromWireType(f()[x>>3])};default:throw new TypeError("Unknown float type: "+h)}}function Ii(h,g,x){var U=hn(x);g=pn(g),rn(h,{name:g,fromWireType:function(z){return z},toWireType:function(z,B){if(typeof B!="number"&&typeof B!="boolean")throw new TypeError('Cannot convert "'+Ti(B)+'" to '+this.name);return B},argPackAdvance:8,readValueFromPointer:Ri(g,U),destructorFunction:null})}function Pi(h,g){if(!(h instanceof Function))throw new TypeError("new_ called with constructor type "+typeof h+" which is not a function");var x=et(h.name||"unknownFunctionName",function(){});x.prototype=h.prototype;var U=new x,z=h.apply(U,g);return z instanceof Object?z:U}function fi(h,g,x,U,z){var B=g.length;B<2&&Gt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var N=g[1]!==null&&x!==null,$=!1,ce=1;ce<g.length;++ce)if(g[ce]!==null&&g[ce].destructorFunction===void 0){$=!0;break}for(var V=g[0].name!=="void",S="",O="",ce=0;ce<B-2;++ce)S+=(ce!==0?", ":"")+"arg"+ce,O+=(ce!==0?", ":"")+"arg"+ce+"Wired";var q="return function "+Xe(h)+"("+S+`) {
if (arguments.length !== `+(B-2)+`) {
throwBindingError('function `+h+" called with ' + arguments.length + ' arguments, expected "+(B-2)+` args!');
}
`;$&&(q+=`var destructors = [];
`);var oe=$?"destructors":"null",G=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],X=[Gt,U,z,_r,g[0],g[1]];N&&(q+="var thisWired = classParam.toWireType("+oe+`, this);
`);for(var ce=0;ce<B-2;++ce)q+="var arg"+ce+"Wired = argType"+ce+".toWireType("+oe+", arg"+ce+"); // "+g[ce+2].name+`
`,G.push("argType"+ce),X.push(g[ce+2]);if(N&&(O="thisWired"+(O.length>0?", ":"")+O),q+=(V?"var rv = ":"")+"invoker(fn"+(O.length>0?", ":"")+O+`);
`,$)q+=`runDestructors(destructors);
`;else for(var ce=N?1:2;ce<g.length;++ce){var te=ce===1?"thisWired":"arg"+(ce-2)+"Wired";g[ce].destructorFunction!==null&&(q+=te+"_dtor("+te+"); // "+g[ce].name+`
`,G.push(te+"_dtor"),X.push(g[ce].destructorFunction))}V&&(q+=`var ret = retType.fromWireType(rv);
return ret;
`),q+=`}
`,G.push(q);var le=Pi(Function,G).apply(null,X);return le}function di(h,g,x){if(h[g].overloadTable===void 0){var U=h[g];h[g]=function(){return h[g].overloadTable.hasOwnProperty(arguments.length)||Gt("Function '"+x+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+h[g].overloadTable+")!"),h[g].overloadTable[arguments.length].apply(this,arguments)},h[g].overloadTable=[],h[g].overloadTable[U.argCount]=U}}function hi(h,g,x){l.hasOwnProperty(h)?((x===void 0||l[h].overloadTable!==void 0&&l[h].overloadTable[x]!==void 0)&&Gt("Cannot register public name '"+h+"' twice"),di(l,h,h),l.hasOwnProperty(x)&&Gt("Cannot register multiple overloads of a function with the same number of arguments ("+x+")!"),l[h].overloadTable[x]=g):(l[h]=g,x!==void 0&&(l[h].numArguments=x))}function mn(h,g){for(var x=[],U=0;U<h;U++)x.push(s()[(g>>2)+U]);return x}function Ln(h,g,x){l.hasOwnProperty(h)||Kt("Replacing nonexistant public symbol"),l[h].overloadTable!==void 0&&x!==void 0?l[h].overloadTable[x]=g:(l[h]=g,l[h].argCount=x)}function _t(h,g,x){var U=l["dynCall_"+h];return x&&x.length?U.apply(null,[g].concat(x)):U.call(null,g)}function cn(h,g,x){return h.includes("j")?_t(h,g,x):fe.get(g).apply(null,x)}function Wt(h,g){var x=[];return function(){x.length=arguments.length;for(var U=0;U<arguments.length;U++)x[U]=arguments[U];return cn(h,g,x)}}function Ke(h,g){h=pn(h);function x(){return h.includes("j")?Wt(h,g):fe.get(g)}var U=x();return typeof U!="function"&&Gt("unknown function pointer with signature "+h+": "+g),U}var pt=void 0;function Zn(h){var g=ue(h),x=pn(g);return J(g),x}function mt(h,g){var x=[],U={};function z(B){if(!U[B]&&!zi[B]){if(Zi[B]){Zi[B].forEach(z);return}x.push(B),U[B]=!0}}throw g.forEach(z),new pt(h+": "+x.map(Zn).join([", "]))}function Rt(h,g,x,U,z,B){var N=mn(g,x);h=pn(h),z=Ke(U,z),hi(h,function(){mt("Cannot call "+h+" due to unbound types",N)},g-1),Mt([],N,function($){var ce=[$[0],null].concat($.slice(1));return Ln(h,fi(h,ce,null,z,B),g-1),[]})}function an(h,g,x){switch(g){case 0:return x?function(z){return t()[z]}:function(z){return n()[z]};case 1:return x?function(z){return r()[z>>1]}:function(z){return i()[z>>1]};case 2:return x?function(z){return s()[z>>2]}:function(z){return a()[z>>2]};default:throw new TypeError("Unknown integer type: "+h)}}function Hr(h,g,x,U,z){g=pn(g),z===-1&&(z=4294967295);var B=hn(x),N=function(V){return V};if(U===0){var $=32-8*x;N=function(V){return V<<$>>>$}}var ce=g.includes("unsigned");rn(h,{name:g,fromWireType:N,toWireType:function(V,S){if(typeof S!="number"&&typeof S!="boolean")throw new TypeError('Cannot convert "'+Ti(S)+'" to '+this.name);if(S<U||S>z)throw new TypeError('Passing a number "'+Ti(S)+'" from JS side to C/C++ side to an argument of type "'+g+'", which is outside the valid range ['+U+", "+z+"]!");return ce?S>>>0:S|0},argPackAdvance:8,readValueFromPointer:an(g,B,U!==0),destructorFunction:null})}function Wr(h,g,x){var U=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],z=U[g];function B(N){N=N>>2;var $=a(),ce=$[N],V=$[N+1];return new z(Yt,V,ce)}x=pn(x),rn(h,{name:x,fromWireType:B,argPackAdvance:8,readValueFromPointer:B},{ignoreDuplicateRegistrations:!0})}function On(h,g){g=pn(g);var x=g==="std::string";rn(h,{name:g,fromWireType:function(U){var z=a()[U>>2],B;if(x)for(var N=U+4,$=0;$<=z;++$){var ce=U+4+$;if($==z||n()[ce]==0){var V=ce-N,S=Je(N,V);B===void 0?B=S:(B+=String.fromCharCode(0),B+=S),N=ce+1}}else{for(var O=new Array(z),$=0;$<z;++$)O[$]=String.fromCharCode(n()[U+4+$]);B=O.join("")}return J(U),B},toWireType:function(U,z){z instanceof ArrayBuffer&&(z=new Uint8Array(z));var B,N=typeof z=="string";N||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int8Array||Gt("Cannot pass non-string to std::string"),x&&N?B=function(){return ke(z)}:B=function(){return z.length};var $=B(),ce=D(4+$+1);if(a()[ce>>2]=$,x&&N)ut(z,ce+4,$+1);else if(N)for(var V=0;V<$;++V){var S=z.charCodeAt(V);S>255&&(J(ce),Gt("String has UTF-16 code units that do not fit in 8 bits")),n()[ce+4+V]=S}else for(var V=0;V<$;++V)n()[ce+4+V]=z[V];return U!==null&&U.push(J,ce),ce},argPackAdvance:8,readValueFromPointer:ti,destructorFunction:function(U){J(U)}})}function Pr(h,g,x){x=pn(x);var U,z,B,N,$;g===2?(U=L,z=nt,N=In,B=function(){return i()},$=1):g===4&&(U=Xt,z=Pn,N=vt,B=function(){return a()},$=2),rn(h,{name:x,fromWireType:function(ce){for(var V=a()[ce>>2],S=B(),O,q=ce+4,oe=0;oe<=V;++oe){var G=ce+4+oe*g;if(oe==V||S[G>>$]==0){var X=G-q,te=U(q,X);O===void 0?O=te:(O+=String.fromCharCode(0),O+=te),q=G+g}}return J(ce),O},toWireType:function(ce,V){typeof V!="string"&&Gt("Cannot pass non-string to C++ string type "+x);var S=N(V),O=D(4+S+g);return a()[O>>2]=S>>$,z(V,O+4,S+g),ce!==null&&ce.push(J,O),O},argPackAdvance:8,readValueFromPointer:ti,destructorFunction:function(ce){J(ce)}})}function ai(h,g,x,U,z,B){yr[h]={name:pn(g),rawConstructor:Ke(x,U),rawDestructor:Ke(z,B),fields:[]}}function pi(h,g,x,U,z,B,N,$,ce,V){yr[h].fields.push({fieldName:pn(g),getterReturnType:x,getter:Ke(U,z),getterContext:B,setterArgumentType:N,setter:Ke($,ce),setterContext:V})}function wi(h,g){g=pn(g),rn(h,{isVoid:!0,name:g,argPackAdvance:0,fromWireType:function(){},toWireType:function(x,U){}})}function Fr(h,g){if(h==g)postMessage({cmd:"processQueuedMainThreadWork"});else if(T)postMessage({targetThread:h,cmd:"processThreadQueue"});else{var x=en.pthreads[h],U=x&&x.worker;if(!U)return;U.postMessage({cmd:"processThreadQueue"})}return 1}var $r={};function Dn(h){var g=$r[h];return g===void 0?pn(h):g}function sr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Dt(h){return h===0?ni(sr()):(h=Dn(h),ni(sr()[h]))}function Q(h){h>4&&(Tn[h].refcount+=1)}function ne(h,g){var x=zi[h];return x===void 0&&Gt(g+" has unknown type "+Zn(h)),x}function ye(h){for(var g="",x=0;x<h;++x)g+=(x!==0?", ":"")+"arg"+x;for(var U="return function emval_allocator_"+h+`(constructor, argTypes, args) {
`,x=0;x<h;++x)U+="var argType"+x+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+x+'], "parameter '+x+`");
var arg`+x+" = argType"+x+`.readValueFromPointer(args);
args += argType`+x+`['argPackAdvance'];
`;return U+="var obj = new constructor("+g+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",U)(ne,l,ni)}var Me={};function De(h){return h||Gt("Cannot use deleted val. handle = "+h),Tn[h].value}function yt(h,g,x,U){h=De(h);var z=Me[g];return z||(z=ye(g),Me[g]=z),z(h,x,U)}function Xr(){or()}var wn=[];function Nn(h,g){wn.length=0;var x;for(g>>=2;x=n()[h++];){var U=x<105;U&&g&1&&g++,wn.push(U?f()[g++>>1]:s()[g]),++g}return wn}function dr(h,g,x){var U=Nn(g,x);return Kr[h].apply(null,U)}function Wn(){}function ri(h,g){}function cr(h,g,x){if(h<=0||h>t().length||h&!0)return-28;{var U=Atomics.wait(s(),h>>2,g,x);if(U==="timed-out")return-73;if(U==="not-equal")return-6;if(U==="ok")return 0;throw"Atomics.wait returned an unexpected value "+U}}function Br(h,g){throw Ar(h,g||1),"longjmp"}function Rr(h,g){return Br(h,g)}function br(h,g,x){n().copyWithin(h,g,g+x)}function hr(){return gi.cpus().length}function lr(h,g){for(var x=arguments.length-2,U=Qn(),z=x,B=zn(z*8),N=B>>3,$=0;$<x;$++){var ce=arguments[2+$];f()[N+$]=ce}var V=$t(h,z,B,g);return tr(U),V}var Vt=[];function ln(h,g,x){Vt.length=g;for(var U=x>>3,z=0;z<g;z++)Vt[z]=f()[U+z];var B=h<0,N=B?Kr[-h-1]:H[h];return N.apply(null,Vt)}function Un(h){try{return Oe.grow(h-Yt.byteLength+65535>>>16),ir(Oe.buffer),1}catch{}}function _n(h){var g=n().length;if(h=h>>>0,h<=g)return!1;var x=2147483648;if(h>x)return!1;for(var U=1;U<=4;U*=2){var z=g*(1+.2/U);z=Math.min(z,h+100663296);var B=Math.min(x,dn(Math.max(h,z),65536)),N=Un(B);if(N)return!0}return!1}var It={inEventHandler:0,removeAllEventListeners:function(){for(var h=It.eventHandlers.length-1;h>=0;--h)It._removeHandler(h);It.eventHandlers=[],It.deferredCalls=[]},registerRemoveEventListeners:function(){It.removeEventListenersRegistered||(It.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(h,g,x){function U(N,$){if(N.length!=$.length)return!1;for(var ce in N)if(N[ce]!=$[ce])return!1;return!0}for(var z in It.deferredCalls){var B=It.deferredCalls[z];if(B.targetFunction==h&&U(B.argsList,x))return}It.deferredCalls.push({targetFunction:h,precedence:g,argsList:x}),It.deferredCalls.sort(function(N,$){return N.precedence<$.precedence})},removeDeferredCalls:function(h){for(var g=0;g<It.deferredCalls.length;++g)It.deferredCalls[g].targetFunction==h&&(It.deferredCalls.splice(g,1),--g)},canPerformEventHandlerRequests:function(){return It.inEventHandler&&It.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(It.canPerformEventHandlerRequests())for(var h=0;h<It.deferredCalls.length;++h){var g=It.deferredCalls[h];It.deferredCalls.splice(h,1),--h,g.targetFunction.apply(null,g.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(h,g){for(var x=0;x<It.eventHandlers.length;++x)It.eventHandlers[x].target==h&&(!g||g==It.eventHandlers[x].eventTypeString)&&It._removeHandler(x--)},_removeHandler:function(h){var g=It.eventHandlers[h];g.target.removeEventListener(g.eventTypeString,g.eventListenerFunc,g.useCapture),It.eventHandlers.splice(h,1)},registerOrRemoveHandler:function(h){var g=function(z){++It.inEventHandler,It.currentEventHandler=h,It.runDeferredCalls(),h.handlerFunc(z),It.runDeferredCalls(),--It.inEventHandler};if(h.callbackfunc)h.eventListenerFunc=g,h.target.addEventListener(h.eventTypeString,g,h.useCapture),It.eventHandlers.push(h),It.registerRemoveEventListeners();else for(var x=0;x<It.eventHandlers.length;++x)It.eventHandlers[x].target==h.target&&It.eventHandlers[x].eventTypeString==h.eventTypeString&&It._removeHandler(x--)},queueEventHandlerOnThread_iiii:function(h,g,x,U,z){var B=Qn(),N=zn(12);s()[N>>2]=x,s()[N+4>>2]=U,s()[N+8>>2]=z,At(0,h,637534208,g,U,N),tr(B)},getTargetThreadForEventCallback:function(h){switch(h){case 1:return 0;case 2:return en.currentProxiedOperationCallerThread;default:return h}},getNodeNameForTarget:function(h){return h?h==window?"#window":h==screen?"#screen":h&&h.nodeName?h.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Jn(h){var g=ke(h)+1,x=D(g);return ut(h,x,g),x}function vr(h,g,x,U){var z=Qn(),B=zn(12),N=0;g&&(N=Jn(g)),s()[B>>2]=N,s()[B+4>>2]=x,s()[B+8>>2]=U,At(0,h,657457152,0,N,B),tr(z)}function Sn(h,g,x,U){g=g?Je(g):"",vr(h,g,x,U)}function qn(h){return h>2?Je(h):h}var nr=[0,typeof document<"u"?document:0,typeof window<"u"?window:0];function Bt(h){h=qn(h);var g=nr[h]||(typeof document<"u"?document.querySelector(h):void 0);return g}function Vn(h){return Bt(h)}function gn(h,g,x){var U=Vn(h);if(!U)return-4;if(U.canvasSharedPtr&&(s()[U.canvasSharedPtr>>2]=g,s()[U.canvasSharedPtr+4>>2]=x),U.offscreenCanvas||!U.controlTransferredOffscreen){U.offscreenCanvas&&(U=U.offscreenCanvas);var z=!1;if(U.GLctxObject&&U.GLctxObject.GLctx){var B=U.GLctxObject.GLctx.getParameter(2978);z=B[0]===0&&B[1]===0&&B[2]===U.width&&B[3]===U.height}U.width=g,U.height=x,z&&U.GLctxObject.GLctx.viewport(0,0,g,x)}else if(U.canvasSharedPtr){var N=s()[U.canvasSharedPtr+8>>2];return Sn(N,h,g,x),1}else return-4;return 0}function Rn(h,g,x){return T?lr(4,1,h,g,x):gn(h,g,x)}function Gn(h,g,x){var U=Vn(h);return U?gn(h,g,x):Rn(h,g,x)}function rr(h){}function xr(h){var g=h.getExtension("ANGLE_instanced_arrays");if(g)return h.vertexAttribDivisor=function(x,U){g.vertexAttribDivisorANGLE(x,U)},h.drawArraysInstanced=function(x,U,z,B){g.drawArraysInstancedANGLE(x,U,z,B)},h.drawElementsInstanced=function(x,U,z,B,N){g.drawElementsInstancedANGLE(x,U,z,B,N)},1}function fn(h){var g=h.getExtension("OES_vertex_array_object");if(g)return h.createVertexArray=function(){return g.createVertexArrayOES()},h.deleteVertexArray=function(x){g.deleteVertexArrayOES(x)},h.bindVertexArray=function(x){g.bindVertexArrayOES(x)},h.isVertexArray=function(x){return g.isVertexArrayOES(x)},1}function Xn(h){var g=h.getExtension("WEBGL_draw_buffers");if(g)return h.drawBuffers=function(x,U){g.drawBuffersWEBGL(x,U)},1}function kn(h){return!!(h.multiDrawWebgl=h.getExtension("WEBGL_multi_draw"))}var Pt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(g){Pt.lastError||(Pt.lastError=g)},getNewId:function(h){for(var g=Pt.counter++,x=h.length;x<g;x++)h[x]=null;return g},getSource:function(h,g,x,U){for(var z="",B=0;B<g;++B){var N=U?s()[U+B*4>>2]:-1;z+=Je(s()[x+B*4>>2],N<0?void 0:N)}return z},createContext:function(h,g){h.getContextSafariWebGL2Fixed||(h.getContextSafariWebGL2Fixed=h.getContext,h.getContext=function(z,B){var N=h.getContextSafariWebGL2Fixed(z,B);return z=="webgl"==N instanceof WebGLRenderingContext?N:null});var x=h.getContext("webgl",g);if(!x)return 0;var U=Pt.registerContext(x,g);return U},registerContext:function(h,g){var x=D(8);s()[x+4>>2]=Yn();var U={handle:x,attributes:g,version:g.majorVersion,GLctx:h};return h.canvas&&(h.canvas.GLctxObject=U),Pt.contexts[x]=U,(typeof g.enableExtensionsByDefault>"u"||g.enableExtensionsByDefault)&&Pt.initExtensions(U),x},makeContextCurrent:function(h){return Pt.currentContext=Pt.contexts[h],l.ctx=b=Pt.currentContext&&Pt.currentContext.GLctx,!(h&&!b)},getContext:function(h){return Pt.contexts[h]},deleteContext:function(h){Pt.currentContext===Pt.contexts[h]&&(Pt.currentContext=null),typeof It=="object"&&It.removeAllHandlersOnTarget(Pt.contexts[h].GLctx.canvas),Pt.contexts[h]&&Pt.contexts[h].GLctx.canvas&&(Pt.contexts[h].GLctx.canvas.GLctxObject=void 0),J(Pt.contexts[h].handle),Pt.contexts[h]=null},initExtensions:function(h){if(h||(h=Pt.currentContext),!h.initExtensionsDone){h.initExtensionsDone=!0;var g=h.GLctx;xr(g),fn(g),Xn(g),g.disjointTimerQueryExt=g.getExtension("EXT_disjoint_timer_query"),kn(g);var x=g.getSupportedExtensions()||[];x.forEach(function(U){!U.includes("lose_context")&&!U.includes("debug")&&g.getExtension(U)})}}},ar=["default","low-power","high-performance"];function Lr(h,g){var x=g>>2,U=s()[x+6],z={alpha:!!s()[x+0],depth:!!s()[x+1],stencil:!!s()[x+2],antialias:!!s()[x+3],premultipliedAlpha:!!s()[x+4],preserveDrawingBuffer:!!s()[x+5],powerPreference:ar[U],failIfMajorPerformanceCaveat:!!s()[x+7],majorVersion:s()[x+8],minorVersion:s()[x+9],enableExtensionsByDefault:s()[x+10],explicitSwapControl:s()[x+11],proxyContextToMainThread:s()[x+12],renderViaOffscreenBackBuffer:s()[x+13]},B=Vn(h);if(!B||z.explicitSwapControl)return 0;var N=Pt.createContext(B,z);return N}function An(h,g){return Lr(h,g)}function Er(h){return T?lr(5,1,h):0}function jn(h,g,x,U){if(T)return lr(6,1,h,g,x,U);var z=Bn.getStreamFromFD(h),B=Bn.doReadv(z,g,x);return s()[U>>2]=B,0}function Or(h,g,x,U,z){if(T)return lr(7,1,h,g,x,U,z)}function mi(h,g,x,U){if(T)return lr(8,1,h,g,x,U);for(var z=0,B=0;B<x;B++){for(var N=s()[g+B*8>>2],$=s()[g+(B*8+4)>>2],ce=0;ce<$;ce++)Bn.printChar(h,n()[N+ce]);z+=$}return s()[U>>2]=z,0}function Nr(){return we()}function Mr(h){var g=en.threadExitHandlers.pop();h&&g()}function ui(h){if(T)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var g=en.getNewWorker();if(!g)return 6;if(g.pthread!==void 0)throw"Internal error!";if(!h.pthread_ptr)throw"Internal error, no pthread ptr!";en.runningWorkers.push(g);for(var x=D(128*4),U=0;U<128;++U)s()[x+U*4>>2]=0;var z=h.stackBase+h.stackSize,B=en.pthreads[h.pthread_ptr]={worker:g,stackBase:h.stackBase,stackSize:h.stackSize,allocatedOwnStack:h.allocatedOwnStack,threadInfoStruct:h.pthread_ptr},N=B.threadInfoStruct>>2;Atomics.store(a(),N+16,h.detached),Atomics.store(a(),N+25,x),Atomics.store(a(),N+10,B.threadInfoStruct),Atomics.store(a(),N+20,h.stackSize),Atomics.store(a(),N+19,z),Atomics.store(a(),N+26,h.stackSize),Atomics.store(a(),N+(104+8>>2),z),Atomics.store(a(),N+(104+12>>2),h.detached);var $=Ur(),ce=$+40;Atomics.store(a(),N+43,ce),g.pthread=B;var V={cmd:"run",start_routine:h.startRoutine,arg:h.arg,threadInfoStruct:h.pthread_ptr,stackBase:h.stackBase,stackSize:h.stackSize};return g.runPthread=function(){V.time=performance.now(),g.postMessage(V,h.transferList)},g.loaded&&(g.runPthread(),delete g.runPthread),0}function Oi(h,g,x,U){if(typeof SharedArrayBuffer>"u")return de("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!h)return de("pthread_create called with a null thread pointer!"),28;var z=[],B=0;if(T&&(z.length===0||B))return Nt(687865856,h,g,x,U);var N=0,$=0,ce=0;g&&g!=-1?(N=s()[g>>2],N+=81920,$=s()[g+8>>2],ce=s()[g+12>>2]!==0):N=2097152;var V=$==0;V?$=Hn(16,N):($-=N,ht($>0));for(var S=D(228),O=0;O<57;++O)a()[(S>>2)+O]=0;s()[h>>2]=S,s()[S+12>>2]=S;var q=S+152;s()[q>>2]=q;var oe={stackBase:$,stackSize:N,allocatedOwnStack:V,detached:ce,startRoutine:x,pthread_ptr:S,arg:U,transferList:z};return T?(oe.cmd="spawnThread",postMessage(oe,z),0):ui(oe)}function ci(){if(T){var h=Yn();if(h){var g=Atomics.load(a(),h+56>>2);if(!g){var x=Atomics.load(a(),h+0>>2);if(x==2)throw"Canceled!"}}}}function Fi(h,g,x){if(!h)return de("pthread_join attempted on a null thread pointer!"),$i.ESRCH;if(T&&Yn()==h)return de("PThread "+h+" is attempting to join to itself!"),$i.EDEADLK;if(!T&&Re()==h)return de("Main thread "+h+" is attempting to join to itself!"),$i.EDEADLK;var U=s()[h+12>>2];if(U!==h)return de("pthread_join attempted on thread "+h+", which does not point to a valid thread, or does not exist anymore!"),$i.ESRCH;var z=Atomics.load(a(),h+64>>2);if(z)return de("Attempted to join thread "+h+", which was already detached!"),$i.EINVAL;for(;;){var B=Atomics.load(a(),h+0>>2);if(B==1){var N=Atomics.load(a(),h+4>>2);return g&&(s()[g>>2]=N),Atomics.store(a(),h+64>>2,1),T?postMessage({cmd:"cleanupThread",thread:h}):mo(h),0}if(!x)return $i.EBUSY;ci(),T||qt(),cr(h+0,B,T?100:1)}}function Ci(h,g){return Fi(h,g,!0)}function Ni(h){Pe(h)}function Si(h){var g=Date.now()/1e3|0;return h&&(s()[h>>2]=g),g}T||en.initMainThreadBlock(),je=l.InternalError=it(Error,"InternalError"),tn(),Ot=l.BindingError=it(Error,"BindingError"),si(),pt=l.UnboundTypeError=it(Error,"UnboundTypeError");var b,H=[null,mr,gr,Gr,Rn,Er,jn,Or,mi],ie={k:at,C:Mn,u:mr,P:gr,R:Gr,F:xt,I:Jt,aa:fr,$:Di,z:Ii,E:Rt,j:Hr,g:Wr,A:On,r:Pr,K:ai,h:pi,ba:wi,Z:Fr,o:Jr,_:Dt,D:Q,Q:yt,i:Xr,y:dr,V:Wn,x:ri,l:cr,m:li,p:Ne,e:Rr,M:br,ea:hr,W:ln,N:_n,X:Gn,w:rr,Y:An,v:Er,O:jn,H:Or,S:mi,c:Nr,L:ki,q:st,s:bt,t:Be,J:We,G:Ft,n:pr,f:ve,d:he,a:Oe||l.wasmMemory,T:Mr,U:ft,B:Oi,ca:Ci,b:Ni,da:Si};En(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.fa).apply(null,arguments)};var D=l._malloc=function(){return(D=l._malloc=l.asm.ga).apply(null,arguments)},J=l._free=function(){return(J=l._free=l.asm.ha).apply(null,arguments)};l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.ia).apply(null,arguments)};var ue=l.___getTypeName=function(){return(ue=l.___getTypeName=l.asm.ka).apply(null,arguments)};l.___embind_register_native_and_builtin_types=function(){return(l.___embind_register_native_and_builtin_types=l.asm.la).apply(null,arguments)},l._emscripten_current_thread_process_queued_calls=function(){return(l._emscripten_current_thread_process_queued_calls=l.asm.ma).apply(null,arguments)};var be=l._emscripten_register_main_browser_thread_id=function(){return(be=l._emscripten_register_main_browser_thread_id=l.asm.na).apply(null,arguments)},Re=l._emscripten_main_browser_thread_id=function(){return(Re=l._emscripten_main_browser_thread_id=l.asm.oa).apply(null,arguments)},Ze=l.__emscripten_do_dispatch_to_thread=function(){return(Ze=l.__emscripten_do_dispatch_to_thread=l.asm.pa).apply(null,arguments)},Nt=l._emscripten_sync_run_in_main_thread_4=function(){return(Nt=l._emscripten_sync_run_in_main_thread_4=l.asm.qa).apply(null,arguments)},qt=l._emscripten_main_thread_process_queued_calls=function(){return(qt=l._emscripten_main_thread_process_queued_calls=l.asm.ra).apply(null,arguments)},$t=l._emscripten_run_in_main_runtime_thread_js=function(){return($t=l._emscripten_run_in_main_runtime_thread_js=l.asm.sa).apply(null,arguments)},At=l.__emscripten_call_on_thread=function(){return(At=l.__emscripten_call_on_thread=l.asm.ta).apply(null,arguments)},Ht=l.__emscripten_thread_init=function(){return(Ht=l.__emscripten_thread_init=l.asm.ua).apply(null,arguments)},Yn=l._pthread_self=function(){return(Yn=l._pthread_self=l.asm.va).apply(null,arguments)},Tr=l.___pthread_tsd_run_dtors=function(){return(Tr=l.___pthread_tsd_run_dtors=l.asm.wa).apply(null,arguments)},Ur=l._emscripten_get_global_libc=function(){return(Ur=l._emscripten_get_global_libc=l.asm.xa).apply(null,arguments)},Qn=l.stackSave=function(){return(Qn=l.stackSave=l.asm.ya).apply(null,arguments)},tr=l.stackRestore=function(){return(tr=l.stackRestore=l.asm.za).apply(null,arguments)},zn=l.stackAlloc=function(){return(zn=l.stackAlloc=l.asm.Aa).apply(null,arguments)},Vr=l._emscripten_stack_set_limits=function(){return(Vr=l._emscripten_stack_set_limits=l.asm.Ba).apply(null,arguments)},Ar=l._setThrew=function(){return(Ar=l._setThrew=l.asm.Ca).apply(null,arguments)},Hn=l._memalign=function(){return(Hn=l._memalign=l.asm.Da).apply(null,arguments)};l.dynCall_jiiiiiiiii=function(){return(l.dynCall_jiiiiiiiii=l.asm.Ea).apply(null,arguments)};var nn=l.dynCall_ijiii=function(){return(nn=l.dynCall_ijiii=l.asm.Fa).apply(null,arguments)};l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.Ga).apply(null,arguments)},l.dynCall_jiiiiiiii=function(){return(l.dynCall_jiiiiiiii=l.asm.Ha).apply(null,arguments)},l.dynCall_jiiiiii=function(){return(l.dynCall_jiiiiii=l.asm.Ia).apply(null,arguments)},l.dynCall_jiiiii=function(){return(l.dynCall_jiiiii=l.asm.Ja).apply(null,arguments)},l.dynCall_iiijii=function(){return(l.dynCall_iiijii=l.asm.Ka).apply(null,arguments)};var on=l.__emscripten_allow_main_runtime_queued_calls=600816,Kn=l.__emscripten_main_thread_futex=897300;function pr(h,g){var x=Qn();try{fe.get(h)(g)}catch(U){if(tr(x),U!==U+0&&U!=="longjmp")throw U;Ar(1,0)}}function he(h,g,x,U,z){var B=Qn();try{fe.get(h)(g,x,U,z)}catch(N){if(tr(B),N!==N+0&&N!=="longjmp")throw N;Ar(1,0)}}function ve(h,g,x){var U=Qn();try{fe.get(h)(g,x)}catch(z){if(tr(U),z!==z+0&&z!=="longjmp")throw z;Ar(1,0)}}function Be(h,g,x,U,z,B,N,$,ce,V){var S=Qn();try{return fe.get(h)(g,x,U,z,B,N,$,ce,V)}catch(O){if(tr(S),O!==O+0&&O!=="longjmp")throw O;Ar(1,0)}}function We(h,g,x,U,z,B,N,$,ce,V,S,O){var q=Qn();try{return fe.get(h)(g,x,U,z,B,N,$,ce,V,S,O)}catch(oe){if(tr(q),oe!==oe+0&&oe!=="longjmp")throw oe;Ar(1,0)}}function st(h,g,x,U,z){var B=Qn();try{return fe.get(h)(g,x,U,z)}catch(N){if(tr(B),N!==N+0&&N!=="longjmp")throw N;Ar(1,0)}}function bt(h,g,x,U,z,B,N,$,ce){var V=Qn();try{return fe.get(h)(g,x,U,z,B,N,$,ce)}catch(S){if(tr(V),S!==S+0&&S!=="longjmp")throw S;Ar(1,0)}}function Ft(h,g,x,U,z,B){var N=Qn();try{return nn(h,g,x,U,z,B)}catch($){if(tr(N),$!==$+0&&$!=="longjmp")throw $;Ar(1,0)}}l.PThread=en,l.PThread=en,l.wasmMemory=Oe,l.ExitStatus=y;var R;function y(h){this.name="ExitStatus",this.message="Program terminated with exit("+h+")",this.status=h}Ut=function h(){R||m(),R||(Ut=h)};function m(h){if(St>0)return;if(T){p(l),bn(),postMessage({cmd:"loaded"});return}if(Lt(),St>0)return;function g(){R||(R=!0,l.calledRun=!0,!j&&(bn(),p(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),Ee()))}l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),g()},1)):g()}l.run=m;function C(h,g){if(!(g&&qe()&&h===0)){if(!g&&T)throw postMessage({cmd:"exitProcess",returnCode:h}),new y(h);qe()||(en.terminateAllThreads(),l.onExit&&l.onExit(h),j=!0),E(h,new y(h))}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();return T&&(Se=!1,en.initWorker()),m(),l.ready}}();return hf.default=o,hf}var mc={},kb={get exports(){return mc},set exports(o){mc=o}},Kp;function Hb(){return Kp||(Kp=1,function(o,e){(function(t,n){n(e)})(vi,function(t){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(b){return"Symbol("+b+")"};function r(){}var i=typeof self<"u"?self:typeof window<"u"?window:typeof vi<"u"?vi:void 0;function s(b){return typeof b=="object"&&b!==null||typeof b=="function"}var a=r,u=Promise,f=Promise.prototype.then,l=Promise.resolve.bind(u),p=Promise.reject.bind(u);function d(b){return new u(b)}function _(b){return l(b)}function A(b){return p(b)}function E(b,H,ie){return f.call(b,H,ie)}function v(b,H,ie){E(E(b,H,ie),void 0,a)}function T(b,H){v(b,H)}function P(b,H){v(b,void 0,H)}function I(b,H,ie){return E(b,H,ie)}function k(b){E(b,void 0,a)}var K=function(){var b=i&&i.queueMicrotask;if(typeof b=="function")return b;var H=_(void 0);return function(ie){return E(H,ie)}}();function ee(b,H,ie){if(typeof b!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(b,H,ie)}function me(b,H,ie){try{return _(ee(b,H,ie))}catch(D){return A(D)}}var Z=function(){function b(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(b.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),b.prototype.push=function(H){var ie=this._back,D=ie;ie._elements.length===16383&&(D={_elements:[],_next:void 0}),ie._elements.push(H),D!==ie&&(this._back=D,ie._next=D),++this._size},b.prototype.shift=function(){var H=this._front,ie=H,D=this._cursor,J=D+1,ue=H._elements,be=ue[D];return J===16384&&(ie=H._next,J=0),--this._size,this._cursor=J,H!==ie&&(this._front=ie),ue[D]=void 0,be},b.prototype.forEach=function(H){for(var ie=this._cursor,D=this._front,J=D._elements;!(ie===J.length&&D._next===void 0||ie===J.length&&(ie=0,(J=(D=D._next)._elements).length===0));)H(J[ie]),++ie},b.prototype.peek=function(){var H=this._front,ie=this._cursor;return H._elements[ie]},b}();function re(b,H){b._ownerReadableStream=H,H._reader=b,H._state==="readable"?we(b):H._state==="closed"?function(ie){we(ie),Oe(ie)}(b):Te(b,H._storedError)}function de(b,H){return Sn(b._ownerReadableStream,H)}function Ie(b){b._ownerReadableStream._state==="readable"?Se(b,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(H,ie){Te(H,ie)}(b,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),b._ownerReadableStream._reader=void 0,b._ownerReadableStream=void 0}function Pe(b){return new TypeError("Cannot "+b+" a stream using a released reader")}function we(b){b._closedPromise=d(function(H,ie){b._closedPromise_resolve=H,b._closedPromise_reject=ie})}function Te(b,H){we(b),Se(b,H)}function Se(b,H){b._closedPromise_reject!==void 0&&(k(b._closedPromise),b._closedPromise_reject(H),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0)}function Oe(b){b._closedPromise_resolve!==void 0&&(b._closedPromise_resolve(void 0),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0)}var He=n("[[AbortSteps]]"),j=n("[[ErrorSteps]]"),ht=n("[[CancelSteps]]"),Qe=n("[[PullSteps]]"),Je=Number.isFinite||function(b){return typeof b=="number"&&isFinite(b)},ze=Math.trunc||function(b){return b<0?Math.ceil(b):Math.floor(b)};function ut(b,H){if(b!==void 0&&typeof(ie=b)!="object"&&typeof ie!="function")throw new TypeError(H+" is not an object.");var ie}function ke(b,H){if(typeof b!="function")throw new TypeError(H+" is not a function.")}function L(b,H){if(!function(ie){return typeof ie=="object"&&ie!==null||typeof ie=="function"}(b))throw new TypeError(H+" is not an object.")}function nt(b,H,ie){if(b===void 0)throw new TypeError("Parameter "+H+" is required in '"+ie+"'.")}function In(b,H,ie){if(b===void 0)throw new TypeError(H+" is required in '"+ie+"'.")}function Xt(b){return Number(b)}function Pn(b){return b===0?0:b}function vt(b,H){var ie=Number.MAX_SAFE_INTEGER,D=Number(b);if(D=Pn(D),!Je(D))throw new TypeError(H+" is not a finite number");if((D=function(J){return Pn(ze(J))}(D))<0||D>ie)throw new TypeError(H+" is outside the accepted range of 0 to "+ie+", inclusive");return Je(D)&&D!==0?D:0}function dn(b,H){if(!Jn(b))throw new TypeError(H+" is not a ReadableStream.")}function Yt(b){return new xn(b)}function yn(b,H){b._reader._readRequests.push(H)}function Cr(b,H,ie){var D=b._reader._readRequests.shift();ie?D._closeSteps():D._chunkSteps(H)}function Qr(b){return b._reader._readRequests.length}function Ai(b){var H=b._reader;return H!==void 0&&!!ei(H)}var oi,qr,xn=function(){function b(H){if(nt(H,1,"ReadableStreamDefaultReader"),dn(H,"First parameter"),vr(H))throw new TypeError("This stream has already been locked for exclusive reading by another reader");re(this,H),this._readRequests=new Z}return Object.defineProperty(b.prototype,"closed",{get:function(){return ei(this)?this._closedPromise:A(Ae("closed"))},enumerable:!1,configurable:!0}),b.prototype.cancel=function(H){return H===void 0&&(H=void 0),ei(this)?this._ownerReadableStream===void 0?A(Pe("cancel")):de(this,H):A(Ae("cancel"))},b.prototype.read=function(){if(!ei(this))return A(Ae("read"));if(this._ownerReadableStream===void 0)return A(Pe("read from"));var H,ie,D=d(function(J,ue){H=J,ie=ue});return ir(this,{_chunkSteps:function(J){return H({value:J,done:!1})},_closeSteps:function(){return H({value:void 0,done:!0})},_errorSteps:function(J){return ie(J)}}),D},b.prototype.releaseLock=function(){if(!ei(this))throw Ae("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ie(this)}},b}();function ei(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_readRequests")&&b instanceof xn}function ir(b,H){var ie=b._ownerReadableStream;ie._disturbed=!0,ie._state==="closed"?H._closeSteps():ie._state==="errored"?H._errorSteps(ie._storedError):ie._readableStreamController[Qe](H)}function Ae(b){return new TypeError("ReadableStreamDefaultReader.prototype."+b+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(xn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(xn.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),typeof n.asyncIterator=="symbol"&&((oi={})[n.asyncIterator]=function(){return this},qr=oi,Object.defineProperty(qr,n.asyncIterator,{enumerable:!1}));var fe=function(){function b(H,ie){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=H,this._preventCancel=ie}return b.prototype.next=function(){var H=this,ie=function(){return H._nextSteps()};return this._ongoingPromise=this._ongoingPromise?I(this._ongoingPromise,ie,ie):ie(),this._ongoingPromise},b.prototype.return=function(H){var ie=this,D=function(){return ie._returnSteps(H)};return this._ongoingPromise?I(this._ongoingPromise,D,D):D()},b.prototype._nextSteps=function(){var H=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var ie,D,J=this._reader;if(J._ownerReadableStream===void 0)return A(Pe("iterate"));var ue=d(function(be,Re){ie=be,D=Re});return ir(J,{_chunkSteps:function(be){H._ongoingPromise=void 0,K(function(){return ie({value:be,done:!1})})},_closeSteps:function(){H._ongoingPromise=void 0,H._isFinished=!0,Ie(J),ie({value:void 0,done:!0})},_errorSteps:function(be){H._ongoingPromise=void 0,H._isFinished=!0,Ie(J),D(be)}}),ue},b.prototype._returnSteps=function(H){if(this._isFinished)return Promise.resolve({value:H,done:!0});this._isFinished=!0;var ie=this._reader;if(ie._ownerReadableStream===void 0)return A(Pe("finish iterating"));if(!this._preventCancel){var D=de(ie,H);return Ie(ie),I(D,function(){return{value:H,done:!0}})}return Ie(ie),_({value:H,done:!0})},b}(),ot={next:function(){return wt(this)?this._asyncIteratorImpl.next():A(Et("next"))},return:function(b){return wt(this)?this._asyncIteratorImpl.return(b):A(Et("return"))}};function wt(b){if(!s(b)||!Object.prototype.hasOwnProperty.call(b,"_asyncIteratorImpl"))return!1;try{return b._asyncIteratorImpl instanceof fe}catch{return!1}}function Et(b){return new TypeError("ReadableStreamAsyncIterator."+b+" can only be used on a ReadableSteamAsyncIterator")}qr!==void 0&&Object.setPrototypeOf(ot,qr);var Lt=Number.isNaN||function(b){return b!=b};function bn(b){return b.slice()}function Ee(b,H,ie,D,J){new Uint8Array(b).set(new Uint8Array(ie,D,J),H)}function Ve(b,H,ie){if(b.slice)return b.slice(H,ie);var D=ie-H,J=new ArrayBuffer(D);return Ee(J,0,b,H,D),J}function jt(b){var H=Ve(b.buffer,b.byteOffset,b.byteOffset+b.byteLength);return new Uint8Array(H)}function Zt(b){var H=b._queue.shift();return b._queueTotalSize-=H.size,b._queueTotalSize<0&&(b._queueTotalSize=0),H.value}function St(b,H,ie){if(typeof(D=ie)!="number"||Lt(D)||D<0||ie===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var D;b._queue.push({value:H,size:ie}),b._queueTotalSize+=ie}function Ut(b){b._queue=new Z,b._queueTotalSize=0}var sn=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"view",{get:function(){if(!zr(this))throw Mn("view");return this._view},enumerable:!1,configurable:!0}),b.prototype.respond=function(H){if(!zr(this))throw Mn("respond");if(nt(H,1,"respond"),H=vt(H,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,at(this._associatedReadableByteStreamController,H)},b.prototype.respondWithNewView=function(H){if(!zr(this))throw Mn("respondWithNewView");if(nt(H,1,"respondWithNewView"),!ArrayBuffer.isView(H))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");H.buffer,Ne(this._associatedReadableByteStreamController,H)},b}();Object.defineProperties(sn.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(sn.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Fn=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"byobRequest",{get:function(){if(!or(this))throw Bn("byobRequest");return ge(this)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!or(this))throw Bn("desiredSize");return qe(this)},enumerable:!1,configurable:!0}),b.prototype.close=function(){if(!or(this))throw Bn("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var H=this._controlledReadableByteStream._state;if(H!=="readable")throw new TypeError("The stream (in "+H+" state) is not in the readable state and cannot be closed");en(this)},b.prototype.enqueue=function(H){if(!or(this))throw Bn("enqueue");if(nt(H,1,"enqueue"),!ArrayBuffer.isView(H))throw new TypeError("chunk must be an array buffer view");if(H.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(H.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var ie=this._controlledReadableByteStream._state;if(ie!=="readable")throw new TypeError("The stream (in "+ie+" state) is not in the readable state and cannot be enqueued to");Mo(this,H)},b.prototype.error=function(H){if(H===void 0&&(H=void 0),!or(this))throw Bn("error");no(this,H)},b.prototype[ht]=function(H){rt(this),Ut(this);var ie=this._cancelAlgorithm(H);return mo(this),ie},b.prototype[Qe]=function(H){var ie=this._controlledReadableByteStream;if(this._queueTotalSize>0){var D=this._queue.shift();this._queueTotalSize-=D.byteLength,Hi(this);var J=new Uint8Array(D.buffer,D.byteOffset,D.byteLength);H._chunkSteps(J)}else{var ue=this._autoAllocateChunkSize;if(ue!==void 0){var be=void 0;try{be=new ArrayBuffer(ue)}catch(Ze){return void H._errorSteps(Ze)}var Re={buffer:be,bufferByteLength:ue,byteOffset:0,byteLength:ue,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Re)}yn(ie,H),Fe(this)}},b}();function or(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledReadableByteStream")&&b instanceof Fn}function zr(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_associatedReadableByteStreamController")&&b instanceof sn}function Fe(b){(function(H){var ie=H._controlledReadableByteStream;return ie._state!=="readable"||H._closeRequested||!H._started?!1:!!(Ai(ie)&&Qr(ie)>0||yr(ie)&&Gr(ie)>0||qe(H)>0)})(b)&&(b._pulling?b._pullAgain=!0:(b._pulling=!0,v(b._pullAlgorithm(),function(){b._pulling=!1,b._pullAgain&&(b._pullAgain=!1,Fe(b))},function(H){no(b,H)})))}function rt(b){$i(b),b._pendingPullIntos=new Z}function Tt(b,H){var ie=!1;b._state==="closed"&&(ie=!0);var D=Qt(H);H.readerType==="default"?Cr(b,D,ie):function(J,ue,be){var Re=J._reader._readIntoRequests.shift();be?Re._closeSteps(ue):Re._chunkSteps(ue)}(b,D,ie)}function Qt(b){var H=b.bytesFilled,ie=b.elementSize;return new b.viewConstructor(b.buffer,b.byteOffset,H/ie)}function En(b,H,ie,D){b._queue.push({buffer:H,byteOffset:ie,byteLength:D}),b._queueTotalSize+=D}function Kr(b,H){var ie=H.elementSize,D=H.bytesFilled-H.bytesFilled%ie,J=Math.min(b._queueTotalSize,H.byteLength-H.bytesFilled),ue=H.bytesFilled+J,be=ue-ue%ie,Re=J,Ze=!1;be>D&&(Re=be-H.bytesFilled,Ze=!0);for(var Nt=b._queue;Re>0;){var qt=Nt.peek(),$t=Math.min(Re,qt.byteLength),At=H.byteOffset+H.bytesFilled;Ee(H.buffer,At,qt.buffer,qt.byteOffset,$t),qt.byteLength===$t?Nt.shift():(qt.byteOffset+=$t,qt.byteLength-=$t),b._queueTotalSize-=$t,ki(b,$t,H),Re-=$t}return Ze}function ki(b,H,ie){ie.bytesFilled+=H}function Hi(b){b._queueTotalSize===0&&b._closeRequested?(mo(b),qn(b._controlledReadableByteStream)):Fe(b)}function $i(b){b._byobRequest!==null&&(b._byobRequest._associatedReadableByteStreamController=void 0,b._byobRequest._view=null,b._byobRequest=null)}function li(b){for(;b._pendingPullIntos.length>0;){if(b._queueTotalSize===0)return;var H=b._pendingPullIntos.peek();Kr(b,H)&&(ji(b),Tt(b._controlledReadableByteStream,H))}}function so(b,H){var ie=b._pendingPullIntos.peek();$i(b),b._controlledReadableByteStream._state==="closed"?function(D,J){var ue=D._controlledReadableByteStream;if(yr(ue))for(;Gr(ue)>0;)Tt(ue,ji(D))}(b):function(D,J,ue){if(ki(0,J,ue),!(ue.bytesFilled<ue.elementSize)){ji(D);var be=ue.bytesFilled%ue.elementSize;if(be>0){var Re=ue.byteOffset+ue.bytesFilled,Ze=Ve(ue.buffer,Re-be,Re);En(D,Ze,0,Ze.byteLength)}ue.bytesFilled-=be,Tt(D._controlledReadableByteStream,ue),li(D)}}(b,H,ie),Fe(b)}function ji(b){return b._pendingPullIntos.shift()}function mo(b){b._pullAlgorithm=void 0,b._cancelAlgorithm=void 0}function en(b){var H=b._controlledReadableByteStream;if(!b._closeRequested&&H._state==="readable")if(b._queueTotalSize>0)b._closeRequested=!0;else{if(b._pendingPullIntos.length>0&&b._pendingPullIntos.peek().bytesFilled>0){var ie=new TypeError("Insufficient bytes to fill elements in the given buffer");throw no(b,ie),ie}mo(b),qn(H)}}function Mo(b,H){var ie=b._controlledReadableByteStream;if(!b._closeRequested&&ie._state==="readable"){var D=H.buffer,J=H.byteOffset,ue=H.byteLength,be=D;if(b._pendingPullIntos.length>0){var Re=b._pendingPullIntos.peek();Re.buffer,Re.buffer=Re.buffer}$i(b),Ai(ie)?Qr(ie)===0?En(b,be,J,ue):(b._pendingPullIntos.length>0&&ji(b),Cr(ie,new Uint8Array(be,J,ue),!1)):yr(ie)?(En(b,be,J,ue),li(b)):En(b,be,J,ue),Fe(b)}}function no(b,H){var ie=b._controlledReadableByteStream;ie._state==="readable"&&(rt(b),Ut(b),mo(b),nr(ie,H))}function ge(b){if(b._byobRequest===null&&b._pendingPullIntos.length>0){var H=b._pendingPullIntos.peek(),ie=new Uint8Array(H.buffer,H.byteOffset+H.bytesFilled,H.byteLength-H.bytesFilled),D=Object.create(sn.prototype);(function(J,ue,be){J._associatedReadableByteStreamController=ue,J._view=be})(D,b,ie),b._byobRequest=D}return b._byobRequest}function qe(b){var H=b._controlledReadableByteStream._state;return H==="errored"?null:H==="closed"?0:b._strategyHWM-b._queueTotalSize}function at(b,H){var ie=b._pendingPullIntos.peek();if(b._controlledReadableByteStream._state==="closed"){if(H!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(H===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(ie.bytesFilled+H>ie.byteLength)throw new RangeError("bytesWritten out of range")}ie.buffer=ie.buffer,so(b,H)}function Ne(b,H){var ie=b._pendingPullIntos.peek();if(b._controlledReadableByteStream._state==="closed"){if(H.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(H.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(ie.byteOffset+ie.bytesFilled!==H.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(ie.bufferByteLength!==H.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(ie.bytesFilled+H.byteLength>ie.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var D=H.byteLength;ie.buffer=H.buffer,so(b,D)}function ft(b,H,ie,D,J,ue,be){H._controlledReadableByteStream=b,H._pullAgain=!1,H._pulling=!1,H._byobRequest=null,H._queue=H._queueTotalSize=void 0,Ut(H),H._closeRequested=!1,H._started=!1,H._strategyHWM=ue,H._pullAlgorithm=D,H._cancelAlgorithm=J,H._autoAllocateChunkSize=be,H._pendingPullIntos=new Z,b._readableStreamController=H,v(_(ie()),function(){H._started=!0,Fe(H)},function(Re){no(H,Re)})}function Mn(b){return new TypeError("ReadableStreamBYOBRequest.prototype."+b+" can only be used on a ReadableStreamBYOBRequest")}function Bn(b){return new TypeError("ReadableByteStreamController.prototype."+b+" can only be used on a ReadableByteStreamController")}function mr(b){return new _r(b)}function gr(b,H){b._reader._readIntoRequests.push(H)}function Gr(b){return b._reader._readIntoRequests.length}function yr(b){var H=b._reader;return H!==void 0&&!!ti(H)}Object.defineProperties(Fn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Fn.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var _r=function(){function b(H){if(nt(H,1,"ReadableStreamBYOBReader"),dn(H,"First parameter"),vr(H))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!or(H._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");re(this,H),this._readIntoRequests=new Z}return Object.defineProperty(b.prototype,"closed",{get:function(){return ti(this)?this._closedPromise:A(zi("closed"))},enumerable:!1,configurable:!0}),b.prototype.cancel=function(H){return H===void 0&&(H=void 0),ti(this)?this._ownerReadableStream===void 0?A(Pe("cancel")):de(this,H):A(zi("cancel"))},b.prototype.read=function(H){if(!ti(this))return A(zi("read"));if(!ArrayBuffer.isView(H))return A(new TypeError("view must be an array buffer view"));if(H.byteLength===0)return A(new TypeError("view must have non-zero byteLength"));if(H.buffer.byteLength===0)return A(new TypeError("view's buffer must have non-zero byteLength"));if(H.buffer,this._ownerReadableStream===void 0)return A(Pe("read from"));var ie,D,J=d(function(ue,be){ie=ue,D=be});return Wi(this,H,{_chunkSteps:function(ue){return ie({value:ue,done:!1})},_closeSteps:function(ue){return ie({value:ue,done:!0})},_errorSteps:function(ue){return D(ue)}}),J},b.prototype.releaseLock=function(){if(!ti(this))throw zi("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ie(this)}},b}();function ti(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_readIntoRequests")&&b instanceof _r}function Wi(b,H,ie){var D=b._ownerReadableStream;D._disturbed=!0,D._state==="errored"?ie._errorSteps(D._storedError):function(J,ue,be){var Re=J._controlledReadableByteStream,Ze=1;ue.constructor!==DataView&&(Ze=ue.constructor.BYTES_PER_ELEMENT);var Nt=ue.constructor,qt=ue.buffer,$t={buffer:qt,bufferByteLength:qt.byteLength,byteOffset:ue.byteOffset,byteLength:ue.byteLength,bytesFilled:0,elementSize:Ze,viewConstructor:Nt,readerType:"byob"};if(J._pendingPullIntos.length>0)return J._pendingPullIntos.push($t),void gr(Re,be);if(Re._state!=="closed"){if(J._queueTotalSize>0){if(Kr(J,$t)){var At=Qt($t);return Hi(J),void be._chunkSteps(At)}if(J._closeRequested){var Ht=new TypeError("Insufficient bytes to fill elements in the given buffer");return no(J,Ht),void be._errorSteps(Ht)}}J._pendingPullIntos.push($t),gr(Re,be),Fe(J)}else{var Yn=new Nt($t.buffer,$t.byteOffset,0);be._closeSteps(Yn)}}(D._readableStreamController,H,ie)}function zi(b){return new TypeError("ReadableStreamBYOBReader.prototype."+b+" can only be used on a ReadableStreamBYOBReader")}function Zi(b,H){var ie=b.highWaterMark;if(ie===void 0)return H;if(Lt(ie)||ie<0)throw new RangeError("Invalid highWaterMark");return ie}function Ue(b){var H=b.size;return H||function(){return 1}}function c(b,H){ut(b,H);var ie=b==null?void 0:b.highWaterMark,D=b==null?void 0:b.size;return{highWaterMark:ie===void 0?void 0:Xt(ie),size:D===void 0?void 0:Xe(D,H+" has member 'size' that")}}function Xe(b,H){return ke(b,H),function(ie){return Xt(b(ie))}}function et(b,H,ie){return ke(b,ie),function(D){return me(b,H,[D])}}function it(b,H,ie){return ke(b,ie),function(){return me(b,H,[])}}function je(b,H,ie){return ke(b,ie),function(D){return ee(b,H,[D])}}function Kt(b,H,ie){return ke(b,ie),function(D,J){return me(b,H,[D,J])}}function Mt(b,H){if(!vn(b))throw new TypeError(H+" is not a WritableStream.")}Object.defineProperties(_r.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(_r.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var xt=typeof AbortController=="function",Jt=function(){function b(H,ie){H===void 0&&(H={}),ie===void 0&&(ie={}),H===void 0?H=null:L(H,"First parameter");var D=c(ie,"Second parameter"),J=function(be,Re){ut(be,Re);var Ze=be==null?void 0:be.abort,Nt=be==null?void 0:be.close,qt=be==null?void 0:be.start,$t=be==null?void 0:be.type,At=be==null?void 0:be.write;return{abort:Ze===void 0?void 0:et(Ze,be,Re+" has member 'abort' that"),close:Nt===void 0?void 0:it(Nt,be,Re+" has member 'close' that"),start:qt===void 0?void 0:je(qt,be,Re+" has member 'start' that"),write:At===void 0?void 0:Kt(At,be,Re+" has member 'write' that"),type:$t}}(H,"First parameter");if(tn(this),J.type!==void 0)throw new RangeError("Invalid type is specified");var ue=Ue(D);(function(be,Re,Ze,Nt){var qt=Object.create(fi.prototype),$t=function(){},At=function(){return _(void 0)},Ht=function(){return _(void 0)},Yn=function(){return _(void 0)};Re.start!==void 0&&($t=function(){return Re.start(qt)}),Re.write!==void 0&&(At=function(Tr){return Re.write(Tr,qt)}),Re.close!==void 0&&(Ht=function(){return Re.close()}),Re.abort!==void 0&&(Yn=function(Tr){return Re.abort(Tr)}),hi(be,qt,$t,At,Ht,Yn,Ze,Nt)})(this,J,Zi(D,1),ue)}return Object.defineProperty(b.prototype,"locked",{get:function(){if(!vn(this))throw pt("locked");return pn(this)},enumerable:!1,configurable:!0}),b.prototype.abort=function(H){return H===void 0&&(H=void 0),vn(this)?pn(this)?A(new TypeError("Cannot abort a stream that already has a writer")):Ot(this,H):A(pt("abort"))},b.prototype.close=function(){return vn(this)?pn(this)?A(new TypeError("Cannot close a stream that already has a writer")):Tn(this)?A(new TypeError("Cannot close an already-closing stream")):Gt(this):A(pt("close"))},b.prototype.getWriter=function(){if(!vn(this))throw pt("getWriter");return hn(this)},b}();function hn(b){return new kr(b)}function tn(b){b._state="writable",b._storedError=void 0,b._writer=void 0,b._writableStreamController=void 0,b._writeRequests=new Z,b._inFlightWriteRequest=void 0,b._closeRequest=void 0,b._inFlightCloseRequest=void 0,b._pendingAbortRequest=void 0,b._backpressure=!1}function vn(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_writableStreamController")&&b instanceof Jt}function pn(b){return b._writer!==void 0}function Ot(b,H){var ie;if(b._state==="closed"||b._state==="errored")return _(void 0);b._writableStreamController._abortReason=H,(ie=b._writableStreamController._abortController)===null||ie===void 0||ie.abort();var D=b._state;if(D==="closed"||D==="errored")return _(void 0);if(b._pendingAbortRequest!==void 0)return b._pendingAbortRequest._promise;var J=!1;D==="erroring"&&(J=!0,H=void 0);var ue=d(function(be,Re){b._pendingAbortRequest={_promise:void 0,_resolve:be,_reject:Re,_reason:H,_wasAlreadyErroring:J}});return b._pendingAbortRequest._promise=ue,J||fr(b,H),ue}function Gt(b){var H=b._state;if(H==="closed"||H==="errored")return A(new TypeError("The stream (in "+H+" state) is not in the writable state and cannot be closed"));var ie,D=d(function(ue,be){var Re={_resolve:ue,_reject:be};b._closeRequest=Re}),J=b._writer;return J!==void 0&&b._backpressure&&H==="writable"&&Fr(J),St(ie=b._writableStreamController,Pi,0),_t(ie),D}function rn(b,H){b._state!=="writable"?Ir(b):fr(b,H)}function fr(b,H){var ie=b._writableStreamController;b._state="erroring",b._storedError=H;var D=b._writer;D!==void 0&&Ti(D,H),!function(J){return!(J._inFlightWriteRequest===void 0&&J._inFlightCloseRequest===void 0)}(b)&&ie._started&&Ir(b)}function Ir(b){b._state="errored",b._writableStreamController[j]();var H=b._storedError;if(b._writeRequests.forEach(function(D){D._reject(H)}),b._writeRequests=new Z,b._pendingAbortRequest!==void 0){var ie=b._pendingAbortRequest;if(b._pendingAbortRequest=void 0,ie._wasAlreadyErroring)return ie._reject(H),void Jr(b);v(b._writableStreamController[He](ie._reason),function(){ie._resolve(),Jr(b)},function(D){ie._reject(D),Jr(b)})}else Jr(b)}function Tn(b){return b._closeRequest!==void 0||b._inFlightCloseRequest!==void 0}function Jr(b){b._closeRequest!==void 0&&(b._closeRequest._reject(b._storedError),b._closeRequest=void 0);var H=b._writer;H!==void 0&&Wr(H,b._storedError)}function Sr(b,H){var ie=b._writer;ie!==void 0&&H!==b._backpressure&&(H?function(D){Pr(D)}(ie):Fr(ie)),b._backpressure=H}Object.defineProperties(Jt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});var kr=function(){function b(H){if(nt(H,1,"WritableStreamDefaultWriter"),Mt(H,"First parameter"),pn(H))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=H,H._writer=this;var ie,D=H._state;if(D==="writable")!Tn(H)&&H._backpressure?Pr(this):pi(this),an(this);else if(D==="erroring")ai(this,H._storedError),an(this);else if(D==="closed")pi(this),an(ie=this),On(ie);else{var J=H._storedError;ai(this,J),Hr(this,J)}}return Object.defineProperty(b.prototype,"closed",{get:function(){return si(this)?this._closedPromise:A(mt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!si(this))throw mt("desiredSize");if(this._ownerWritableStream===void 0)throw Rt("desiredSize");return function(H){var ie=H._ownerWritableStream,D=ie._state;return D==="errored"||D==="erroring"?null:D==="closed"?0:Ln(ie._writableStreamController)}(this)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"ready",{get:function(){return si(this)?this._readyPromise:A(mt("ready"))},enumerable:!1,configurable:!0}),b.prototype.abort=function(H){return H===void 0&&(H=void 0),si(this)?this._ownerWritableStream===void 0?A(Rt("abort")):function(ie,D){return Ot(ie._ownerWritableStream,D)}(this,H):A(mt("abort"))},b.prototype.close=function(){if(!si(this))return A(mt("close"));var H=this._ownerWritableStream;return H===void 0?A(Rt("close")):Tn(H)?A(new TypeError("Cannot close an already-closing stream")):ni(this)},b.prototype.releaseLock=function(){if(!si(this))throw mt("releaseLock");this._ownerWritableStream!==void 0&&Ri(this)},b.prototype.write=function(H){return H===void 0&&(H=void 0),si(this)?this._ownerWritableStream===void 0?A(Rt("write to")):Ii(this,H):A(mt("write"))},b}();function si(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_ownerWritableStream")&&b instanceof kr}function ni(b){return Gt(b._ownerWritableStream)}function Di(b,H){b._closedPromiseState==="pending"?Wr(b,H):function(ie,D){Hr(ie,D)}(b,H)}function Ti(b,H){b._readyPromiseState==="pending"?wi(b,H):function(ie,D){ai(ie,D)}(b,H)}function Ri(b){var H=b._ownerWritableStream,ie=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ti(b,ie),Di(b,ie),H._writer=void 0,b._ownerWritableStream=void 0}function Ii(b,H){var ie=b._ownerWritableStream,D=ie._writableStreamController,J=function(Re,Ze){try{return Re._strategySizeAlgorithm(Ze)}catch(Nt){return cn(Re,Nt),1}}(D,H);if(ie!==b._ownerWritableStream)return A(Rt("write to"));var ue=ie._state;if(ue==="errored")return A(ie._storedError);if(Tn(ie)||ue==="closed")return A(new TypeError("The stream is closing or closed and cannot be written to"));if(ue==="erroring")return A(ie._storedError);var be=function(Re){return d(function(Ze,Nt){var qt={_resolve:Ze,_reject:Nt};Re._writeRequests.push(qt)})}(ie);return function(Re,Ze,Nt){try{St(Re,Ze,Nt)}catch($t){return void cn(Re,$t)}var qt=Re._controlledWritableStream;!Tn(qt)&&qt._state==="writable"&&Sr(qt,Wt(Re)),_t(Re)}(D,H,J),be}Object.defineProperties(kr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(kr.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var Pi={},fi=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"abortReason",{get:function(){if(!di(this))throw Zn("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"signal",{get:function(){if(!di(this))throw Zn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),b.prototype.error=function(H){if(H===void 0&&(H=void 0),!di(this))throw Zn("error");this._controlledWritableStream._state==="writable"&&Ke(this,H)},b.prototype[He]=function(H){var ie=this._abortAlgorithm(H);return mn(this),ie},b.prototype[j]=function(){Ut(this)},b}();function di(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledWritableStream")&&b instanceof fi}function hi(b,H,ie,D,J,ue,be,Re){H._controlledWritableStream=b,b._writableStreamController=H,H._queue=void 0,H._queueTotalSize=void 0,Ut(H),H._abortReason=void 0,H._abortController=function(){if(xt)return new AbortController}(),H._started=!1,H._strategySizeAlgorithm=Re,H._strategyHWM=be,H._writeAlgorithm=D,H._closeAlgorithm=J,H._abortAlgorithm=ue;var Ze=Wt(H);Sr(b,Ze),v(_(ie()),function(){H._started=!0,_t(H)},function(Nt){H._started=!0,rn(b,Nt)})}function mn(b){b._writeAlgorithm=void 0,b._closeAlgorithm=void 0,b._abortAlgorithm=void 0,b._strategySizeAlgorithm=void 0}function Ln(b){return b._strategyHWM-b._queueTotalSize}function _t(b){var H=b._controlledWritableStream;if(b._started&&H._inFlightWriteRequest===void 0)if(H._state!=="erroring"){if(b._queue.length!==0){var ie=b._queue.peek().value;ie===Pi?function(D){var J=D._controlledWritableStream;(function(be){be._inFlightCloseRequest=be._closeRequest,be._closeRequest=void 0})(J),Zt(D);var ue=D._closeAlgorithm();mn(D),v(ue,function(){(function(be){be._inFlightCloseRequest._resolve(void 0),be._inFlightCloseRequest=void 0,be._state==="erroring"&&(be._storedError=void 0,be._pendingAbortRequest!==void 0&&(be._pendingAbortRequest._resolve(),be._pendingAbortRequest=void 0)),be._state="closed";var Re=be._writer;Re!==void 0&&On(Re)})(J)},function(be){(function(Re,Ze){Re._inFlightCloseRequest._reject(Ze),Re._inFlightCloseRequest=void 0,Re._pendingAbortRequest!==void 0&&(Re._pendingAbortRequest._reject(Ze),Re._pendingAbortRequest=void 0),rn(Re,Ze)})(J,be)})}(b):function(D,J){var ue=D._controlledWritableStream;(function(be){be._inFlightWriteRequest=be._writeRequests.shift()})(ue),v(D._writeAlgorithm(J),function(){(function(Ze){Ze._inFlightWriteRequest._resolve(void 0),Ze._inFlightWriteRequest=void 0})(ue);var be=ue._state;if(Zt(D),!Tn(ue)&&be==="writable"){var Re=Wt(D);Sr(ue,Re)}_t(D)},function(be){ue._state==="writable"&&mn(D),function(Re,Ze){Re._inFlightWriteRequest._reject(Ze),Re._inFlightWriteRequest=void 0,rn(Re,Ze)}(ue,be)})}(b,ie)}}else Ir(H)}function cn(b,H){b._controlledWritableStream._state==="writable"&&Ke(b,H)}function Wt(b){return Ln(b)<=0}function Ke(b,H){var ie=b._controlledWritableStream;mn(b),fr(ie,H)}function pt(b){return new TypeError("WritableStream.prototype."+b+" can only be used on a WritableStream")}function Zn(b){return new TypeError("WritableStreamDefaultController.prototype."+b+" can only be used on a WritableStreamDefaultController")}function mt(b){return new TypeError("WritableStreamDefaultWriter.prototype."+b+" can only be used on a WritableStreamDefaultWriter")}function Rt(b){return new TypeError("Cannot "+b+" a stream using a released writer")}function an(b){b._closedPromise=d(function(H,ie){b._closedPromise_resolve=H,b._closedPromise_reject=ie,b._closedPromiseState="pending"})}function Hr(b,H){an(b),Wr(b,H)}function Wr(b,H){b._closedPromise_reject!==void 0&&(k(b._closedPromise),b._closedPromise_reject(H),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0,b._closedPromiseState="rejected")}function On(b){b._closedPromise_resolve!==void 0&&(b._closedPromise_resolve(void 0),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0,b._closedPromiseState="resolved")}function Pr(b){b._readyPromise=d(function(H,ie){b._readyPromise_resolve=H,b._readyPromise_reject=ie}),b._readyPromiseState="pending"}function ai(b,H){Pr(b),wi(b,H)}function pi(b){Pr(b),Fr(b)}function wi(b,H){b._readyPromise_reject!==void 0&&(k(b._readyPromise),b._readyPromise_reject(H),b._readyPromise_resolve=void 0,b._readyPromise_reject=void 0,b._readyPromiseState="rejected")}function Fr(b){b._readyPromise_resolve!==void 0&&(b._readyPromise_resolve(void 0),b._readyPromise_resolve=void 0,b._readyPromise_reject=void 0,b._readyPromiseState="fulfilled")}Object.defineProperties(fi.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(fi.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var $r=typeof DOMException<"u"?DOMException:void 0,Dn,sr=function(b){if(typeof b!="function"&&typeof b!="object")return!1;try{return new b,!0}catch{return!1}}($r)?$r:((Dn=function(b,H){this.message=b||"",this.name=H||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}).prototype=Object.create(Error.prototype),Object.defineProperty(Dn.prototype,"constructor",{value:Dn,writable:!0,configurable:!0}),Dn);function Dt(b,H,ie,D,J,ue){var be=Yt(b),Re=hn(H);b._disturbed=!0;var Ze=!1,Nt=_(void 0);return d(function(qt,$t){var At,Ht,Yn,Tr;if(ue!==void 0){if(At=function(){var Hn=new sr("Aborted","AbortError"),nn=[];D||nn.push(function(){return H._state==="writable"?Ot(H,Hn):_(void 0)}),J||nn.push(function(){return b._state==="readable"?Sn(b,Hn):_(void 0)}),zn(function(){return Promise.all(nn.map(function(on){return on()}))},!0,Hn)},ue.aborted)return void At();ue.addEventListener("abort",At)}if(tr(b,be._closedPromise,function(Hn){D?Vr(!0,Hn):zn(function(){return Ot(H,Hn)},!0,Hn)}),tr(H,Re._closedPromise,function(Hn){J?Vr(!0,Hn):zn(function(){return Sn(b,Hn)},!0,Hn)}),Ht=b,Yn=be._closedPromise,Tr=function(){ie?Vr():zn(function(){return function(Hn){var nn=Hn._ownerWritableStream,on=nn._state;return Tn(nn)||on==="closed"?_(void 0):on==="errored"?A(nn._storedError):ni(Hn)}(Re)})},Ht._state==="closed"?Tr():T(Yn,Tr),Tn(H)||H._state==="closed"){var Ur=new TypeError("the destination writable stream closed before all data could be piped to it");J?Vr(!0,Ur):zn(function(){return Sn(b,Ur)},!0,Ur)}function Qn(){var Hn=Nt;return E(Nt,function(){return Hn!==Nt?Qn():void 0})}function tr(Hn,nn,on){Hn._state==="errored"?on(Hn._storedError):P(nn,on)}function zn(Hn,nn,on){function Kn(){v(Hn(),function(){return Ar(nn,on)},function(pr){return Ar(!0,pr)})}Ze||(Ze=!0,H._state!=="writable"||Tn(H)?Kn():T(Qn(),Kn))}function Vr(Hn,nn){Ze||(Ze=!0,H._state!=="writable"||Tn(H)?Ar(Hn,nn):T(Qn(),function(){return Ar(Hn,nn)}))}function Ar(Hn,nn){Ri(Re),Ie(be),ue!==void 0&&ue.removeEventListener("abort",At),Hn?$t(nn):qt(void 0)}k(d(function(Hn,nn){(function on(Kn){Kn?Hn():E(Ze?_(!0):E(Re._readyPromise,function(){return d(function(pr,he){ir(be,{_chunkSteps:function(ve){Nt=E(Ii(Re,ve),void 0,r),pr(!1)},_closeSteps:function(){return pr(!0)},_errorSteps:he})})}),on,nn)})(!1)}))})}var Q=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!ne(this))throw ri("desiredSize");return Nn(this)},enumerable:!1,configurable:!0}),b.prototype.close=function(){if(!ne(this))throw ri("close");if(!dr(this))throw new TypeError("The stream is not in a state that permits close");yt(this)},b.prototype.enqueue=function(H){if(H===void 0&&(H=void 0),!ne(this))throw ri("enqueue");if(!dr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Xr(this,H)},b.prototype.error=function(H){if(H===void 0&&(H=void 0),!ne(this))throw ri("error");wn(this,H)},b.prototype[ht]=function(H){Ut(this);var ie=this._cancelAlgorithm(H);return De(this),ie},b.prototype[Qe]=function(H){var ie=this._controlledReadableStream;if(this._queue.length>0){var D=Zt(this);this._closeRequested&&this._queue.length===0?(De(this),qn(ie)):ye(this),H._chunkSteps(D)}else yn(ie,H),ye(this)},b}();function ne(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledReadableStream")&&b instanceof Q}function ye(b){Me(b)&&(b._pulling?b._pullAgain=!0:(b._pulling=!0,v(b._pullAlgorithm(),function(){b._pulling=!1,b._pullAgain&&(b._pullAgain=!1,ye(b))},function(H){wn(b,H)})))}function Me(b){var H=b._controlledReadableStream;return!!dr(b)&&!!b._started&&(!!(vr(H)&&Qr(H)>0)||Nn(b)>0)}function De(b){b._pullAlgorithm=void 0,b._cancelAlgorithm=void 0,b._strategySizeAlgorithm=void 0}function yt(b){if(dr(b)){var H=b._controlledReadableStream;b._closeRequested=!0,b._queue.length===0&&(De(b),qn(H))}}function Xr(b,H){if(dr(b)){var ie=b._controlledReadableStream;if(vr(ie)&&Qr(ie)>0)Cr(ie,H,!1);else{var D=void 0;try{D=b._strategySizeAlgorithm(H)}catch(J){throw wn(b,J),J}try{St(b,H,D)}catch(J){throw wn(b,J),J}}ye(b)}}function wn(b,H){var ie=b._controlledReadableStream;ie._state==="readable"&&(Ut(b),De(b),nr(ie,H))}function Nn(b){var H=b._controlledReadableStream._state;return H==="errored"?null:H==="closed"?0:b._strategyHWM-b._queueTotalSize}function dr(b){var H=b._controlledReadableStream._state;return!b._closeRequested&&H==="readable"}function Wn(b,H,ie,D,J,ue,be){H._controlledReadableStream=b,H._queue=void 0,H._queueTotalSize=void 0,Ut(H),H._started=!1,H._closeRequested=!1,H._pullAgain=!1,H._pulling=!1,H._strategySizeAlgorithm=be,H._strategyHWM=ue,H._pullAlgorithm=D,H._cancelAlgorithm=J,b._readableStreamController=H,v(_(ie()),function(){H._started=!0,ye(H)},function(Re){wn(H,Re)})}function ri(b){return new TypeError("ReadableStreamDefaultController.prototype."+b+" can only be used on a ReadableStreamDefaultController")}function cr(b,H){return or(b._readableStreamController)?function(ie){var D,J,ue,be,Re,Ze=Yt(ie),Nt=!1,qt=!1,$t=!1,At=!1,Ht=!1,Yn=d(function(nn){Re=nn});function Tr(nn){P(nn._closedPromise,function(on){nn===Ze&&(no(ue._readableStreamController,on),no(be._readableStreamController,on),At&&Ht||Re(void 0))})}function Ur(){ti(Ze)&&(Ie(Ze),Tr(Ze=Yt(ie))),ir(Ze,{_chunkSteps:function(nn){K(function(){qt=!1,$t=!1;var on=nn,Kn=nn;if(!At&&!Ht)try{Kn=jt(nn)}catch(pr){return no(ue._readableStreamController,pr),no(be._readableStreamController,pr),void Re(Sn(ie,pr))}At||Mo(ue._readableStreamController,on),Ht||Mo(be._readableStreamController,Kn),Nt=!1,qt?tr():$t&&zn()})},_closeSteps:function(){Nt=!1,At||en(ue._readableStreamController),Ht||en(be._readableStreamController),ue._readableStreamController._pendingPullIntos.length>0&&at(ue._readableStreamController,0),be._readableStreamController._pendingPullIntos.length>0&&at(be._readableStreamController,0),At&&Ht||Re(void 0)},_errorSteps:function(){Nt=!1}})}function Qn(nn,on){ei(Ze)&&(Ie(Ze),Tr(Ze=mr(ie)));var Kn=on?be:ue,pr=on?ue:be;Wi(Ze,nn,{_chunkSteps:function(he){K(function(){qt=!1,$t=!1;var ve=on?Ht:At;if(on?At:Ht)ve||Ne(Kn._readableStreamController,he);else{var Be=void 0;try{Be=jt(he)}catch(We){return no(Kn._readableStreamController,We),no(pr._readableStreamController,We),void Re(Sn(ie,We))}ve||Ne(Kn._readableStreamController,he),Mo(pr._readableStreamController,Be)}Nt=!1,qt?tr():$t&&zn()})},_closeSteps:function(he){Nt=!1;var ve=on?Ht:At,Be=on?At:Ht;ve||en(Kn._readableStreamController),Be||en(pr._readableStreamController),he!==void 0&&(ve||Ne(Kn._readableStreamController,he),!Be&&pr._readableStreamController._pendingPullIntos.length>0&&at(pr._readableStreamController,0)),ve&&Be||Re(void 0)},_errorSteps:function(){Nt=!1}})}function tr(){if(Nt)return qt=!0,_(void 0);Nt=!0;var nn=ge(ue._readableStreamController);return nn===null?Ur():Qn(nn._view,!1),_(void 0)}function zn(){if(Nt)return $t=!0,_(void 0);Nt=!0;var nn=ge(be._readableStreamController);return nn===null?Ur():Qn(nn._view,!0),_(void 0)}function Vr(nn){if(At=!0,D=nn,Ht){var on=bn([D,J]),Kn=Sn(ie,on);Re(Kn)}return Yn}function Ar(nn){if(Ht=!0,J=nn,At){var on=bn([D,J]),Kn=Sn(ie,on);Re(Kn)}return Yn}function Hn(){}return ue=_n(Hn,tr,Vr),be=_n(Hn,zn,Ar),Tr(Ze),[ue,be]}(b):function(ie,D){var J,ue,be,Re,Ze,Nt=Yt(ie),qt=!1,$t=!1,At=!1,Ht=!1,Yn=d(function(zn){Ze=zn});function Tr(){return qt?($t=!0,_(void 0)):(qt=!0,ir(Nt,{_chunkSteps:function(zn){K(function(){$t=!1;var Vr=zn,Ar=zn;At||Xr(be._readableStreamController,Vr),Ht||Xr(Re._readableStreamController,Ar),qt=!1,$t&&Tr()})},_closeSteps:function(){qt=!1,At||yt(be._readableStreamController),Ht||yt(Re._readableStreamController),At&&Ht||Ze(void 0)},_errorSteps:function(){qt=!1}}),_(void 0))}function Ur(zn){if(At=!0,J=zn,Ht){var Vr=bn([J,ue]),Ar=Sn(ie,Vr);Ze(Ar)}return Yn}function Qn(zn){if(Ht=!0,ue=zn,At){var Vr=bn([J,ue]),Ar=Sn(ie,Vr);Ze(Ar)}return Yn}function tr(){}return be=Un(tr,Tr,Ur),Re=Un(tr,Tr,Qn),P(Nt._closedPromise,function(zn){wn(be._readableStreamController,zn),wn(Re._readableStreamController,zn),At&&Ht||Ze(void 0)}),[be,Re]}(b)}function Br(b,H,ie){return ke(b,ie),function(D){return me(b,H,[D])}}function Rr(b,H,ie){return ke(b,ie),function(D){return me(b,H,[D])}}function br(b,H,ie){return ke(b,ie),function(D){return ee(b,H,[D])}}function hr(b,H){if((b=""+b)!="bytes")throw new TypeError(H+" '"+b+"' is not a valid enumeration value for ReadableStreamType");return b}function lr(b,H){if((b=""+b)!="byob")throw new TypeError(H+" '"+b+"' is not a valid enumeration value for ReadableStreamReaderMode");return b}function Vt(b,H){ut(b,H);var ie=b==null?void 0:b.preventAbort,D=b==null?void 0:b.preventCancel,J=b==null?void 0:b.preventClose,ue=b==null?void 0:b.signal;return ue!==void 0&&function(be,Re){if(!function(Ze){if(typeof Ze!="object"||Ze===null)return!1;try{return typeof Ze.aborted=="boolean"}catch{return!1}}(be))throw new TypeError(Re+" is not an AbortSignal.")}(ue,H+" has member 'signal' that"),{preventAbort:Boolean(ie),preventCancel:Boolean(D),preventClose:Boolean(J),signal:ue}}Object.defineProperties(Q.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Q.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var ln=function(){function b(H,ie){H===void 0&&(H={}),ie===void 0&&(ie={}),H===void 0?H=null:L(H,"First parameter");var D=c(ie,"Second parameter"),J=function(be,Re){ut(be,Re);var Ze=be,Nt=Ze==null?void 0:Ze.autoAllocateChunkSize,qt=Ze==null?void 0:Ze.cancel,$t=Ze==null?void 0:Ze.pull,At=Ze==null?void 0:Ze.start,Ht=Ze==null?void 0:Ze.type;return{autoAllocateChunkSize:Nt===void 0?void 0:vt(Nt,Re+" has member 'autoAllocateChunkSize' that"),cancel:qt===void 0?void 0:Br(qt,Ze,Re+" has member 'cancel' that"),pull:$t===void 0?void 0:Rr($t,Ze,Re+" has member 'pull' that"),start:At===void 0?void 0:br(At,Ze,Re+" has member 'start' that"),type:Ht===void 0?void 0:hr(Ht,Re+" has member 'type' that")}}(H,"First parameter");if(It(this),J.type==="bytes"){if(D.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");(function(be,Re,Ze){var Nt=Object.create(Fn.prototype),qt=function(){},$t=function(){return _(void 0)},At=function(){return _(void 0)};Re.start!==void 0&&(qt=function(){return Re.start(Nt)}),Re.pull!==void 0&&($t=function(){return Re.pull(Nt)}),Re.cancel!==void 0&&(At=function(Yn){return Re.cancel(Yn)});var Ht=Re.autoAllocateChunkSize;if(Ht===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ft(be,Nt,qt,$t,At,Ze,Ht)})(this,J,Zi(D,0))}else{var ue=Ue(D);(function(be,Re,Ze,Nt){var qt=Object.create(Q.prototype),$t=function(){},At=function(){return _(void 0)},Ht=function(){return _(void 0)};Re.start!==void 0&&($t=function(){return Re.start(qt)}),Re.pull!==void 0&&(At=function(){return Re.pull(qt)}),Re.cancel!==void 0&&(Ht=function(Yn){return Re.cancel(Yn)}),Wn(be,qt,$t,At,Ht,Ze,Nt)})(this,J,Zi(D,1),ue)}}return Object.defineProperty(b.prototype,"locked",{get:function(){if(!Jn(this))throw Bt("locked");return vr(this)},enumerable:!1,configurable:!0}),b.prototype.cancel=function(H){return H===void 0&&(H=void 0),Jn(this)?vr(this)?A(new TypeError("Cannot cancel a stream that already has a reader")):Sn(this,H):A(Bt("cancel"))},b.prototype.getReader=function(H){if(H===void 0&&(H=void 0),!Jn(this))throw Bt("getReader");return function(ie,D){ut(ie,D);var J=ie==null?void 0:ie.mode;return{mode:J===void 0?void 0:lr(J,D+" has member 'mode' that")}}(H,"First parameter").mode===void 0?Yt(this):mr(this)},b.prototype.pipeThrough=function(H,ie){if(ie===void 0&&(ie={}),!Jn(this))throw Bt("pipeThrough");nt(H,1,"pipeThrough");var D=function(ue,be){ut(ue,be);var Re=ue==null?void 0:ue.readable;In(Re,"readable","ReadableWritablePair"),dn(Re,be+" has member 'readable' that");var Ze=ue==null?void 0:ue.writable;return In(Ze,"writable","ReadableWritablePair"),Mt(Ze,be+" has member 'writable' that"),{readable:Re,writable:Ze}}(H,"First parameter"),J=Vt(ie,"Second parameter");if(vr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(pn(D.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return k(Dt(this,D.writable,J.preventClose,J.preventAbort,J.preventCancel,J.signal)),D.readable},b.prototype.pipeTo=function(H,ie){if(ie===void 0&&(ie={}),!Jn(this))return A(Bt("pipeTo"));if(H===void 0)return A("Parameter 1 is required in 'pipeTo'.");if(!vn(H))return A(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var D;try{D=Vt(ie,"Second parameter")}catch(J){return A(J)}return vr(this)?A(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):pn(H)?A(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Dt(this,H,D.preventClose,D.preventAbort,D.preventCancel,D.signal)},b.prototype.tee=function(){if(!Jn(this))throw Bt("tee");return bn(cr(this))},b.prototype.values=function(H){if(H===void 0&&(H=void 0),!Jn(this))throw Bt("values");var ie,D,J,ue,be,Re=function(Ze,Nt){ut(Ze,Nt);var qt=Ze==null?void 0:Ze.preventCancel;return{preventCancel:Boolean(qt)}}(H,"First parameter");return ie=this,D=Re.preventCancel,J=Yt(ie),ue=new fe(J,D),(be=Object.create(ot))._asyncIteratorImpl=ue,be},b}();function Un(b,H,ie,D,J){D===void 0&&(D=1),J===void 0&&(J=function(){return 1});var ue=Object.create(ln.prototype);return It(ue),Wn(ue,Object.create(Q.prototype),b,H,ie,D,J),ue}function _n(b,H,ie){var D=Object.create(ln.prototype);return It(D),ft(D,Object.create(Fn.prototype),b,H,ie,0,void 0),D}function It(b){b._state="readable",b._reader=void 0,b._storedError=void 0,b._disturbed=!1}function Jn(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_readableStreamController")&&b instanceof ln}function vr(b){return b._reader!==void 0}function Sn(b,H){if(b._disturbed=!0,b._state==="closed")return _(void 0);if(b._state==="errored")return A(b._storedError);qn(b);var ie=b._reader;return ie!==void 0&&ti(ie)&&(ie._readIntoRequests.forEach(function(D){D._closeSteps(void 0)}),ie._readIntoRequests=new Z),I(b._readableStreamController[ht](H),r)}function qn(b){b._state="closed";var H=b._reader;H!==void 0&&(Oe(H),ei(H)&&(H._readRequests.forEach(function(ie){ie._closeSteps()}),H._readRequests=new Z))}function nr(b,H){b._state="errored",b._storedError=H;var ie=b._reader;ie!==void 0&&(Se(ie,H),ei(ie)?(ie._readRequests.forEach(function(D){D._errorSteps(H)}),ie._readRequests=new Z):(ie._readIntoRequests.forEach(function(D){D._errorSteps(H)}),ie._readIntoRequests=new Z))}function Bt(b){return new TypeError("ReadableStream.prototype."+b+" can only be used on a ReadableStream")}function Vn(b,H){ut(b,H);var ie=b==null?void 0:b.highWaterMark;return In(ie,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Xt(ie)}}Object.defineProperties(ln.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ln.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),typeof n.asyncIterator=="symbol"&&Object.defineProperty(ln.prototype,n.asyncIterator,{value:ln.prototype.values,writable:!0,configurable:!0});var gn=function(b){return b.byteLength};try{Object.defineProperty(gn,"name",{value:"size",configurable:!0})}catch{}var Rn=function(){function b(H){nt(H,1,"ByteLengthQueuingStrategy"),H=Vn(H,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=H.highWaterMark}return Object.defineProperty(b.prototype,"highWaterMark",{get:function(){if(!rr(this))throw Gn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"size",{get:function(){if(!rr(this))throw Gn("size");return gn},enumerable:!1,configurable:!0}),b}();function Gn(b){return new TypeError("ByteLengthQueuingStrategy.prototype."+b+" can only be used on a ByteLengthQueuingStrategy")}function rr(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_byteLengthQueuingStrategyHighWaterMark")&&b instanceof Rn}Object.defineProperties(Rn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Rn.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var xr=function(){return 1};try{Object.defineProperty(xr,"name",{value:"size",configurable:!0})}catch{}var fn=function(){function b(H){nt(H,1,"CountQueuingStrategy"),H=Vn(H,"First parameter"),this._countQueuingStrategyHighWaterMark=H.highWaterMark}return Object.defineProperty(b.prototype,"highWaterMark",{get:function(){if(!kn(this))throw Xn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"size",{get:function(){if(!kn(this))throw Xn("size");return xr},enumerable:!1,configurable:!0}),b}();function Xn(b){return new TypeError("CountQueuingStrategy.prototype."+b+" can only be used on a CountQueuingStrategy")}function kn(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_countQueuingStrategyHighWaterMark")&&b instanceof fn}function Pt(b,H,ie){return ke(b,ie),function(D){return me(b,H,[D])}}function ar(b,H,ie){return ke(b,ie),function(D){return ee(b,H,[D])}}function Lr(b,H,ie){return ke(b,ie),function(D,J){return me(b,H,[D,J])}}Object.defineProperties(fn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(fn.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var An=function(){function b(H,ie,D){H===void 0&&(H={}),ie===void 0&&(ie={}),D===void 0&&(D={}),H===void 0&&(H=null);var J=c(ie,"Second parameter"),ue=c(D,"Third parameter"),be=function(At,Ht){ut(At,Ht);var Yn=At==null?void 0:At.flush,Tr=At==null?void 0:At.readableType,Ur=At==null?void 0:At.start,Qn=At==null?void 0:At.transform,tr=At==null?void 0:At.writableType;return{flush:Yn===void 0?void 0:Pt(Yn,At,Ht+" has member 'flush' that"),readableType:Tr,start:Ur===void 0?void 0:ar(Ur,At,Ht+" has member 'start' that"),transform:Qn===void 0?void 0:Lr(Qn,At,Ht+" has member 'transform' that"),writableType:tr}}(H,"First parameter");if(be.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(be.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Re,Ze=Zi(ue,0),Nt=Ue(ue),qt=Zi(J,1),$t=Ue(J);(function(At,Ht,Yn,Tr,Ur,Qn){function tr(){return Ht}function zn(on){return function(Kn,pr){var he=Kn._transformStreamController;return Kn._backpressure?I(Kn._backpressureChangePromise,function(){var ve=Kn._writable;if(ve._state==="erroring")throw ve._storedError;return ci(he,pr)}):ci(he,pr)}(At,on)}function Vr(on){return function(Kn,pr){return jn(Kn,pr),_(void 0)}(At,on)}function Ar(){return function(on){var Kn=on._readable,pr=on._transformStreamController,he=pr._flushAlgorithm();return ui(pr),I(he,function(){if(Kn._state==="errored")throw Kn._storedError;yt(Kn._readableStreamController)},function(ve){throw jn(on,ve),Kn._storedError})}(At)}function Hn(){return function(on){return mi(on,!1),on._backpressureChangePromise}(At)}function nn(on){return Or(At,on),_(void 0)}At._writable=function(on,Kn,pr,he,ve,Be){ve===void 0&&(ve=1),Be===void 0&&(Be=function(){return 1});var We=Object.create(Jt.prototype);return tn(We),hi(We,Object.create(fi.prototype),on,Kn,pr,he,ve,Be),We}(tr,zn,Ar,Vr,Yn,Tr),At._readable=Un(tr,Hn,nn,Ur,Qn),At._backpressure=void 0,At._backpressureChangePromise=void 0,At._backpressureChangePromise_resolve=void 0,mi(At,!0),At._transformStreamController=void 0})(this,d(function(At){Re=At}),qt,$t,Ze,Nt),function(At,Ht){var Yn=Object.create(Nr.prototype),Tr=function(Qn){try{return Oi(Yn,Qn),_(void 0)}catch(tr){return A(tr)}},Ur=function(){return _(void 0)};Ht.transform!==void 0&&(Tr=function(Qn){return Ht.transform(Qn,Yn)}),Ht.flush!==void 0&&(Ur=function(){return Ht.flush(Yn)}),function(Qn,tr,zn,Vr){tr._controlledTransformStream=Qn,Qn._transformStreamController=tr,tr._transformAlgorithm=zn,tr._flushAlgorithm=Vr}(At,Yn,Tr,Ur)}(this,be),be.start!==void 0?Re(be.start(this._transformStreamController)):Re(void 0)}return Object.defineProperty(b.prototype,"readable",{get:function(){if(!Er(this))throw Ci("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"writable",{get:function(){if(!Er(this))throw Ci("writable");return this._writable},enumerable:!1,configurable:!0}),b}();function Er(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_transformStreamController")&&b instanceof An}function jn(b,H){wn(b._readable._readableStreamController,H),Or(b,H)}function Or(b,H){ui(b._transformStreamController),cn(b._writable._writableStreamController,H),b._backpressure&&mi(b,!1)}function mi(b,H){b._backpressureChangePromise!==void 0&&b._backpressureChangePromise_resolve(),b._backpressureChangePromise=d(function(ie){b._backpressureChangePromise_resolve=ie}),b._backpressure=H}Object.defineProperties(An.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(An.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});var Nr=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!Mr(this))throw Fi("desiredSize");return Nn(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),b.prototype.enqueue=function(H){if(H===void 0&&(H=void 0),!Mr(this))throw Fi("enqueue");Oi(this,H)},b.prototype.error=function(H){if(H===void 0&&(H=void 0),!Mr(this))throw Fi("error");var ie;ie=H,jn(this._controlledTransformStream,ie)},b.prototype.terminate=function(){if(!Mr(this))throw Fi("terminate");(function(H){var ie=H._controlledTransformStream;yt(ie._readable._readableStreamController);var D=new TypeError("TransformStream terminated");Or(ie,D)})(this)},b}();function Mr(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledTransformStream")&&b instanceof Nr}function ui(b){b._transformAlgorithm=void 0,b._flushAlgorithm=void 0}function Oi(b,H){var ie=b._controlledTransformStream,D=ie._readable._readableStreamController;if(!dr(D))throw new TypeError("Readable side is not in a state that permits enqueue");try{Xr(D,H)}catch(J){throw Or(ie,J),ie._readable._storedError}(function(J){return!Me(J)})(D)!==ie._backpressure&&mi(ie,!0)}function ci(b,H){return I(b._transformAlgorithm(H),void 0,function(ie){throw jn(b._controlledTransformStream,ie),ie})}function Fi(b){return new TypeError("TransformStreamDefaultController.prototype."+b+" can only be used on a TransformStreamDefaultController")}function Ci(b){return new TypeError("TransformStream.prototype."+b+" can only be used on a TransformStream")}Object.defineProperties(Nr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Nr.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var Ni={ReadableStream:ln,ReadableStreamDefaultController:Q,ReadableByteStreamController:Fn,ReadableStreamBYOBRequest:sn,ReadableStreamDefaultReader:xn,ReadableStreamBYOBReader:_r,WritableStream:Jt,WritableStreamDefaultController:fi,WritableStreamDefaultWriter:kr,ByteLengthQueuingStrategy:Rn,CountQueuingStrategy:fn,TransformStream:An,TransformStreamDefaultController:Nr};if(i!==void 0)for(var Si in Ni)Object.prototype.hasOwnProperty.call(Ni,Si)&&Object.defineProperty(i,Si,{value:Ni[Si],writable:!0,configurable:!0});t.ByteLengthQueuingStrategy=Rn,t.CountQueuingStrategy=fn,t.ReadableByteStreamController=Fn,t.ReadableStream=ln,t.ReadableStreamBYOBReader=_r,t.ReadableStreamBYOBRequest=sn,t.ReadableStreamDefaultController=Q,t.ReadableStreamDefaultReader=xn,t.TransformStream=An,t.TransformStreamDefaultController=Nr,t.WritableStream=Jt,t.WritableStreamDefaultController=fi,t.WritableStreamDefaultWriter=kr,Object.defineProperty(t,"__esModule",{value:!0})})}(kb,mc)),mc}var Jp;function Wb(){if(Jp)return Qa;Jp=1,Object.defineProperty(Qa,"__esModule",{value:!0});var o=gi,e=gi,t=gi,n=gi,r=Gb(),i=Hb();function s(Ue){return Ue.startsWith("file://")&&(Ue=t.fileURLToPath(Ue)),Ue}function a(Ue,c,Xe=""){return Ue({locateFile(et){return et.endsWith(".wasm")?s(c):et.endsWith(".worker.js")?s(Xe):et}})}const u=()=>(async Ue=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(Ue)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));var f=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(G,X){Xe=G,et=X});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt="./this.program",Mt=function(G,X){throw X},xt=!1,Jt="";function hn(G){return c.locateFile?c.locateFile(G,Jt):Jt+G}var tn,vn,pn,Ot;Jt=__dirname+"/",tn=function(X,te){return pn||(pn=gi),Ot||(Ot=gi),X=Ot.normalize(X),pn.readFileSync(X,te?null:"utf8")},vn=function(X){var te=tn(X,!0);return te.buffer||(te=new Uint8Array(te)),Sr(te.buffer),te},process.argv.length>1&&(Kt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Mt=function(G){process.exit(G)},c.inspect=function(){return"[Emscripten Module object]"};var Gt=c.print||console.log.bind(console),rn=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&(Kt=c.thisProgram),c.quit&&(Mt=c.quit);var fr;c.wasmBinary&&(fr=c.wasmBinary);var Ir=c.noExitRuntime||!0;typeof WebAssembly!="object"&&yt("no native wasm support detected");var Tn,Jr=!1;function Sr(G,X){G||yt("Assertion failed: "+X)}var kr=new TextDecoder("utf8");function si(G,X,te){for(var le=X+te,Ce=X;G[Ce]&&!(Ce>=le);)++Ce;return kr.decode(G.subarray?G.subarray(X,Ce):new Uint8Array(G.slice(X,Ce)))}function ni(G,X){if(!G)return"";for(var te=G+X,le=G;!(le>=te)&&pt[le];)++le;return kr.decode(pt.subarray(G,le))}function Di(G,X,te,le){if(!(le>0))return 0;for(var Ce=te,$e=te+le-1,lt=0;lt<G.length;++lt){var tt=G.charCodeAt(lt);if(tt>=55296&&tt<=57343){var dt=G.charCodeAt(++lt);tt=65536+((tt&1023)<<10)|dt&1023}if(tt<=127){if(te>=$e)break;X[te++]=tt}else if(tt<=2047){if(te+1>=$e)break;X[te++]=192|tt>>6,X[te++]=128|tt&63}else if(tt<=65535){if(te+2>=$e)break;X[te++]=224|tt>>12,X[te++]=128|tt>>6&63,X[te++]=128|tt&63}else{if(te+3>=$e)break;X[te++]=240|tt>>18,X[te++]=128|tt>>12&63,X[te++]=128|tt>>6&63,X[te++]=128|tt&63}}return X[te]=0,te-Ce}function Ti(G,X,te){return Di(G,pt,X,te)}function Ri(G){for(var X=0,te=0;te<G.length;++te){var le=G.charCodeAt(te);le>=55296&&le<=57343&&(le=65536+((le&1023)<<10)|G.charCodeAt(++te)&1023),le<=127?++X:le<=2047?X+=2:le<=65535?X+=3:X+=4}return X}var Ii=new TextDecoder("utf-16le");function Pi(G,X){for(var te=G,le=te>>1,Ce=le+X/2;!(le>=Ce)&&mt[le];)++le;return te=le<<1,Ii.decode(pt.subarray(G,te))}function fi(G,X,te){if(te===void 0&&(te=2147483647),te<2)return 0;te-=2;for(var le=X,Ce=te<G.length*2?te/2:G.length,$e=0;$e<Ce;++$e){var lt=G.charCodeAt($e);Zn[X>>1]=lt,X+=2}return Zn[X>>1]=0,X-le}function di(G){return G.length*2}function hi(G,X){for(var te=0,le="";!(te>=X/4);){var Ce=Rt[G+te*4>>2];if(Ce==0)break;if(++te,Ce>=65536){var $e=Ce-65536;le+=String.fromCharCode(55296|$e>>10,56320|$e&1023)}else le+=String.fromCharCode(Ce)}return le}function mn(G,X,te){if(te===void 0&&(te=2147483647),te<4)return 0;for(var le=X,Ce=le+te-4,$e=0;$e<G.length;++$e){var lt=G.charCodeAt($e);if(lt>=55296&&lt<=57343){var tt=G.charCodeAt(++$e);lt=65536+((lt&1023)<<10)|tt&1023}if(Rt[X>>2]=lt,X+=4,X+4>Ce)break}return Rt[X>>2]=0,X-le}function Ln(G){for(var X=0,te=0;te<G.length;++te){var le=G.charCodeAt(te);le>=55296&&le<=57343&&++te,X+=4}return X}function _t(G,X,te){for(var le=0;le<G.length;++le)Ke[X++>>0]=G.charCodeAt(le);te||(Ke[X>>0]=0)}function cn(G,X){return G%X>0&&(G+=X-G%X),G}var Wt,Ke,pt,Zn,mt,Rt,an,Hr,Wr;function On(G){Wt=G,c.HEAP8=Ke=new Int8Array(G),c.HEAP16=Zn=new Int16Array(G),c.HEAP32=Rt=new Int32Array(G),c.HEAPU8=pt=new Uint8Array(G),c.HEAPU16=mt=new Uint16Array(G),c.HEAPU32=an=new Uint32Array(G),c.HEAPF32=Hr=new Float32Array(G),c.HEAPF64=Wr=new Float64Array(G)}c.INITIAL_MEMORY;var Pr,ai=[],pi=[],wi=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)sr(c.preRun.shift());cr(ai)}function $r(){cr(pi)}function Dn(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Q(c.postRun.shift());cr(wi)}function sr(G){ai.unshift(G)}function Dt(G){pi.unshift(G)}function Q(G){wi.unshift(G)}var ne=0,ye=null;function Me(G){ne++,c.monitorRunDependencies&&c.monitorRunDependencies(ne)}function De(G){if(ne--,c.monitorRunDependencies&&c.monitorRunDependencies(ne),ne==0&&ye){var X=ye;ye=null,X()}}c.preloadedImages={},c.preloadedAudios={};function yt(G){c.onAbort&&c.onAbort(G),G+="",rn(G),Jr=!0,G="abort("+G+"). Build with -s ASSERTIONS=1 for more info.";var X=new WebAssembly.RuntimeError(G);throw et(X),X}var Xr="data:application/octet-stream;base64,";function wn(G){return G.startsWith(Xr)}if(c.locateFile){var Nn="mozjpeg_node_enc.wasm";wn(Nn)||(Nn=hn(Nn))}else var Nn=new URL("mozjpeg_node_enc.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function dr(G){try{if(G==Nn&&fr)return new Uint8Array(fr);if(vn)return vn(G);throw"both async and sync fetching of the wasm failed"}catch(X){yt(X)}}function Wn(){return!fr&&xt&&typeof fetch=="function"?fetch(Nn,{credentials:"same-origin"}).then(function(G){if(!G.ok)throw"failed to load wasm binary file at '"+Nn+"'";return G.arrayBuffer()}).catch(function(){return dr(Nn)}):Promise.resolve().then(function(){return dr(Nn)})}function ri(){var G={a:N};function X(lt,tt){var dt=lt.exports;c.asm=dt,Tn=c.asm.C,On(Tn.buffer),Pr=c.asm.I,Dt(c.asm.D),De()}Me();function te(lt){X(lt.instance)}function le(lt){return Wn().then(function(tt){var dt=WebAssembly.instantiate(tt,G);return dt}).then(lt,function(tt){rn("failed to asynchronously prepare wasm: "+tt),yt(tt)})}function Ce(){return!fr&&typeof WebAssembly.instantiateStreaming=="function"&&!wn(Nn)&&typeof fetch=="function"?fetch(Nn,{credentials:"same-origin"}).then(function(lt){var tt=WebAssembly.instantiateStreaming(lt,G);return tt.then(te,function(dt){return rn("wasm streaming compile failed: "+dt),rn("falling back to ArrayBuffer instantiation"),le(te)})}):le(te)}if(c.instantiateWasm)try{var $e=c.instantiateWasm(G,X);return $e}catch(lt){return rn("Module.instantiateWasm callback failed with error: "+lt),!1}return Ce().catch(et),{}}function cr(G){for(;G.length>0;){var X=G.shift();if(typeof X=="function"){X(c);continue}var te=X.func;typeof te=="number"?X.arg===void 0?Pr.get(te)():Pr.get(te)(X.arg):te(X.arg===void 0?null:X.arg)}}var Br=0;function Rr(){return Ir||Br>0}function br(G,X){}function hr(G,X){return void 0}var lr={};function Vt(G){for(;G.length;){var X=G.pop(),te=G.pop();te(X)}}function ln(G){return this.fromWireType(an[G>>2])}var Un={},_n={},It={},Jn=48,vr=57;function Sn(G){if(G===void 0)return"_unknown";G=G.replace(/[^a-zA-Z0-9_]/g,"$");var X=G.charCodeAt(0);return X>=Jn&&X<=vr?"_"+G:G}function qn(G,X){return G=Sn(G),new Function("body","return function "+G+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(X)}function nr(G,X){var te=qn(X,function(le){this.name=X,this.message=le;var Ce=new Error(le).stack;Ce!==void 0&&(this.stack=this.toString()+`
`+Ce.replace(/^Error(:[^\n]*)?\n/,""))});return te.prototype=Object.create(G.prototype),te.prototype.constructor=te,te.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},te}var Bt=void 0;function Vn(G){throw new Bt(G)}function gn(G,X,te){G.forEach(function(tt){It[tt]=X});function le(tt){var dt=te(tt);dt.length!==G.length&&Vn("Mismatched type converter count");for(var zt=0;zt<G.length;++zt)ar(G[zt],dt[zt])}var Ce=new Array(X.length),$e=[],lt=0;X.forEach(function(tt,dt){_n.hasOwnProperty(tt)?Ce[dt]=_n[tt]:($e.push(tt),Un.hasOwnProperty(tt)||(Un[tt]=[]),Un[tt].push(function(){Ce[dt]=_n[tt],++lt,lt===$e.length&&le(Ce)}))}),$e.length===0&&le(Ce)}function Rn(G){var X=lr[G];delete lr[G];var te=X.rawConstructor,le=X.rawDestructor,Ce=X.fields,$e=Ce.map(function(lt){return lt.getterReturnType}).concat(Ce.map(function(lt){return lt.setterArgumentType}));gn([G],$e,function(lt){var tt={};return Ce.forEach(function(dt,zt){var se=dt.fieldName,F=lt[zt],W=dt.getter,w=dt.getterContext,M=lt[zt+Ce.length],Y=dt.setter,ae=dt.setterContext;tt[se]={read:function(pe){return F.fromWireType(W(w,pe))},write:function(pe,_e){var xe=[];Y(ae,pe,M.toWireType(xe,_e)),Vt(xe)}}}),[{name:X.name,fromWireType:function(dt){var zt={};for(var se in tt)zt[se]=tt[se].read(dt);return le(dt),zt},toWireType:function(dt,zt){for(var se in tt)if(!(se in zt))throw new TypeError('Missing field:  "'+se+'"');var F=te();for(se in tt)tt[se].write(F,zt[se]);return dt!==null&&dt.push(le,F),F},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:le}]})}function Gn(G,X,te,le,Ce){}function rr(G){switch(G){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+G)}}function xr(){for(var G=new Array(256),X=0;X<256;++X)G[X]=String.fromCharCode(X);fn=G}var fn=void 0;function Xn(G){for(var X="",te=G;pt[te];)X+=fn[pt[te++]];return X}var kn=void 0;function Pt(G){throw new kn(G)}function ar(G,X,te){if(te=te||{},!("argPackAdvance"in X))throw new TypeError("registerType registeredInstance requires argPackAdvance");var le=X.name;if(G||Pt('type "'+le+'" must have a positive integer typeid pointer'),_n.hasOwnProperty(G)){if(te.ignoreDuplicateRegistrations)return;Pt("Cannot register type '"+le+"' twice")}if(_n[G]=X,delete It[G],Un.hasOwnProperty(G)){var Ce=Un[G];delete Un[G],Ce.forEach(function($e){$e()})}}function Lr(G,X,te,le,Ce){var $e=rr(te);X=Xn(X),ar(G,{name:X,fromWireType:function(lt){return!!lt},toWireType:function(lt,tt){return tt?le:Ce},argPackAdvance:8,readValueFromPointer:function(lt){var tt;if(te===1)tt=Ke;else if(te===2)tt=Zn;else if(te===4)tt=Rt;else throw new TypeError("Unknown boolean type size: "+X);return this.fromWireType(tt[lt>>$e])},destructorFunction:null})}var An=[],Er=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function jn(G){G>4&&--Er[G].refcount===0&&(Er[G]=void 0,An.push(G))}function Or(){for(var G=0,X=5;X<Er.length;++X)Er[X]!==void 0&&++G;return G}function mi(){for(var G=5;G<Er.length;++G)if(Er[G]!==void 0)return Er[G];return null}function Nr(){c.count_emval_handles=Or,c.get_first_emval=mi}function Mr(G){switch(G){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var X=An.length?An.pop():Er.length;return Er[X]={refcount:1,value:G},X}}}function ui(G,X){X=Xn(X),ar(G,{name:X,fromWireType:function(te){var le=Er[te].value;return jn(te),le},toWireType:function(te,le){return Mr(le)},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:null})}function Oi(G){if(G===null)return"null";var X=typeof G;return X==="object"||X==="array"||X==="function"?G.toString():""+G}function ci(G,X){switch(X){case 2:return function(te){return this.fromWireType(Hr[te>>2])};case 3:return function(te){return this.fromWireType(Wr[te>>3])};default:throw new TypeError("Unknown float type: "+G)}}function Fi(G,X,te){var le=rr(te);X=Xn(X),ar(G,{name:X,fromWireType:function(Ce){return Ce},toWireType:function(Ce,$e){if(typeof $e!="number"&&typeof $e!="boolean")throw new TypeError('Cannot convert "'+Oi($e)+'" to '+this.name);return $e},argPackAdvance:8,readValueFromPointer:ci(X,le),destructorFunction:null})}function Ci(G,X){if(!(G instanceof Function))throw new TypeError("new_ called with constructor type "+typeof G+" which is not a function");var te=qn(G.name||"unknownFunctionName",function(){});te.prototype=G.prototype;var le=new te,Ce=G.apply(le,X);return Ce instanceof Object?Ce:le}function Ni(G,X,te,le,Ce){var $e=X.length;$e<2&&Pt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var lt=X[1]!==null&&te!==null,tt=!1,dt=1;dt<X.length;++dt)if(X[dt]!==null&&X[dt].destructorFunction===void 0){tt=!0;break}for(var zt=X[0].name!=="void",se="",F="",dt=0;dt<$e-2;++dt)se+=(dt!==0?", ":"")+"arg"+dt,F+=(dt!==0?", ":"")+"arg"+dt+"Wired";var W="return function "+Sn(G)+"("+se+`) {
if (arguments.length !== `+($e-2)+`) {
throwBindingError('function `+G+" called with ' + arguments.length + ' arguments, expected "+($e-2)+` args!');
}
`;tt&&(W+=`var destructors = [];
`);var w=tt?"destructors":"null",M=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Y=[Pt,le,Ce,Vt,X[0],X[1]];lt&&(W+="var thisWired = classParam.toWireType("+w+`, this);
`);for(var dt=0;dt<$e-2;++dt)W+="var arg"+dt+"Wired = argType"+dt+".toWireType("+w+", arg"+dt+"); // "+X[dt+2].name+`
`,M.push("argType"+dt),Y.push(X[dt+2]);if(lt&&(F="thisWired"+(F.length>0?", ":"")+F),W+=(zt?"var rv = ":"")+"invoker(fn"+(F.length>0?", ":"")+F+`);
`,tt)W+=`runDestructors(destructors);
`;else for(var dt=lt?1:2;dt<X.length;++dt){var ae=dt===1?"thisWired":"arg"+(dt-2)+"Wired";X[dt].destructorFunction!==null&&(W+=ae+"_dtor("+ae+"); // "+X[dt].name+`
`,M.push(ae+"_dtor"),Y.push(X[dt].destructorFunction))}zt&&(W+=`var ret = retType.fromWireType(rv);
return ret;
`),W+=`}
`,M.push(W);var pe=Ci(Function,M).apply(null,Y);return pe}function Si(G,X,te){if(G[X].overloadTable===void 0){var le=G[X];G[X]=function(){return G[X].overloadTable.hasOwnProperty(arguments.length)||Pt("Function '"+te+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+G[X].overloadTable+")!"),G[X].overloadTable[arguments.length].apply(this,arguments)},G[X].overloadTable=[],G[X].overloadTable[le.argCount]=le}}function b(G,X,te){c.hasOwnProperty(G)?((te===void 0||c[G].overloadTable!==void 0&&c[G].overloadTable[te]!==void 0)&&Pt("Cannot register public name '"+G+"' twice"),Si(c,G,G),c.hasOwnProperty(te)&&Pt("Cannot register multiple overloads of a function with the same number of arguments ("+te+")!"),c[G].overloadTable[te]=X):(c[G]=X,te!==void 0&&(c[G].numArguments=te))}function H(G,X){for(var te=[],le=0;le<G;le++)te.push(Rt[(X>>2)+le]);return te}function ie(G,X,te){c.hasOwnProperty(G)||Vn("Replacing nonexistant public symbol"),c[G].overloadTable!==void 0&&te!==void 0?c[G].overloadTable[te]=X:(c[G]=X,c[G].argCount=te)}function D(G,X,te){var le=c["dynCall_"+G];return te&&te.length?le.apply(null,[X].concat(te)):le.call(null,X)}function J(G,X,te){return G.includes("j")?D(G,X,te):Pr.get(X).apply(null,te)}function ue(G,X){var te=[];return function(){te.length=arguments.length;for(var le=0;le<arguments.length;le++)te[le]=arguments[le];return J(G,X,te)}}function be(G,X){G=Xn(G);function te(){return G.includes("j")?ue(G,X):Pr.get(X)}var le=te();return typeof le!="function"&&Pt("unknown function pointer with signature "+G+": "+X),le}var Re=void 0;function Ze(G){var X=V(G),te=Xn(X);return ce(X),te}function Nt(G,X){var te=[],le={};function Ce($e){if(!le[$e]&&!_n[$e]){if(It[$e]){It[$e].forEach(Ce);return}te.push($e),le[$e]=!0}}throw X.forEach(Ce),new Re(G+": "+te.map(Ze).join([", "]))}function qt(G,X,te,le,Ce,$e){var lt=H(X,te);G=Xn(G),Ce=be(le,Ce),b(G,function(){Nt("Cannot call "+G+" due to unbound types",lt)},X-1),gn([],lt,function(tt){var dt=[tt[0],null].concat(tt.slice(1));return ie(G,Ni(G,dt,null,Ce,$e),X-1),[]})}function $t(G,X,te){switch(X){case 0:return te?function(Ce){return Ke[Ce]}:function(Ce){return pt[Ce]};case 1:return te?function(Ce){return Zn[Ce>>1]}:function(Ce){return mt[Ce>>1]};case 2:return te?function(Ce){return Rt[Ce>>2]}:function(Ce){return an[Ce>>2]};default:throw new TypeError("Unknown integer type: "+G)}}function At(G,X,te,le,Ce){X=Xn(X),Ce===-1&&(Ce=4294967295);var $e=rr(te),lt=function(zt){return zt};if(le===0){var tt=32-8*te;lt=function(zt){return zt<<tt>>>tt}}var dt=X.includes("unsigned");ar(G,{name:X,fromWireType:lt,toWireType:function(zt,se){if(typeof se!="number"&&typeof se!="boolean")throw new TypeError('Cannot convert "'+Oi(se)+'" to '+this.name);if(se<le||se>Ce)throw new TypeError('Passing a number "'+Oi(se)+'" from JS side to C/C++ side to an argument of type "'+X+'", which is outside the valid range ['+le+", "+Ce+"]!");return dt?se>>>0:se|0},argPackAdvance:8,readValueFromPointer:$t(X,$e,le!==0),destructorFunction:null})}function Ht(G,X,te){var le=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Ce=le[X];function $e(lt){lt=lt>>2;var tt=an,dt=tt[lt],zt=tt[lt+1];return new Ce(Wt,zt,dt)}te=Xn(te),ar(G,{name:te,fromWireType:$e,argPackAdvance:8,readValueFromPointer:$e},{ignoreDuplicateRegistrations:!0})}function Yn(G,X){X=Xn(X);var te=X==="std::string";ar(G,{name:X,fromWireType:function(le){var Ce=an[le>>2],$e;if(te)for(var lt=le+4,tt=0;tt<=Ce;++tt){var dt=le+4+tt;if(tt==Ce||pt[dt]==0){var zt=dt-lt,se=ni(lt,zt);$e===void 0?$e=se:($e+=String.fromCharCode(0),$e+=se),lt=dt+1}}else{for(var F=new Array(Ce),tt=0;tt<Ce;++tt)F[tt]=String.fromCharCode(pt[le+4+tt]);$e=F.join("")}return ce(le),$e},toWireType:function(le,Ce){Ce instanceof ArrayBuffer&&(Ce=new Uint8Array(Ce));var $e,lt=typeof Ce=="string";lt||Ce instanceof Uint8Array||Ce instanceof Uint8ClampedArray||Ce instanceof Int8Array||Pt("Cannot pass non-string to std::string"),te&&lt?$e=function(){return Ri(Ce)}:$e=function(){return Ce.length};var tt=$e(),dt=$(4+tt+1);if(an[dt>>2]=tt,te&&lt)Ti(Ce,dt+4,tt+1);else if(lt)for(var zt=0;zt<tt;++zt){var se=Ce.charCodeAt(zt);se>255&&(ce(dt),Pt("String has UTF-16 code units that do not fit in 8 bits")),pt[dt+4+zt]=se}else for(var zt=0;zt<tt;++zt)pt[dt+4+zt]=Ce[zt];return le!==null&&le.push(ce,dt),dt},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:function(le){ce(le)}})}function Tr(G,X,te){te=Xn(te);var le,Ce,$e,lt,tt;X===2?(le=Pi,Ce=fi,lt=di,$e=function(){return mt},tt=1):X===4&&(le=hi,Ce=mn,lt=Ln,$e=function(){return an},tt=2),ar(G,{name:te,fromWireType:function(dt){for(var zt=an[dt>>2],se=$e(),F,W=dt+4,w=0;w<=zt;++w){var M=dt+4+w*X;if(w==zt||se[M>>tt]==0){var Y=M-W,ae=le(W,Y);F===void 0?F=ae:(F+=String.fromCharCode(0),F+=ae),W=M+X}}return ce(dt),F},toWireType:function(dt,zt){typeof zt!="string"&&Pt("Cannot pass non-string to C++ string type "+te);var se=lt(zt),F=$(4+se+X);return an[F>>2]=se>>tt,Ce(zt,F+4,se+X),dt!==null&&dt.push(ce,F),F},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:function(dt){ce(dt)}})}function Ur(G,X,te,le,Ce,$e){lr[G]={name:Xn(X),rawConstructor:be(te,le),rawDestructor:be(Ce,$e),fields:[]}}function Qn(G,X,te,le,Ce,$e,lt,tt,dt,zt){lr[G].fields.push({fieldName:Xn(X),getterReturnType:te,getter:be(le,Ce),getterContext:$e,setterArgumentType:lt,setter:be(tt,dt),setterContext:zt})}function tr(G,X){X=Xn(X),ar(G,{isVoid:!0,name:X,argPackAdvance:0,fromWireType:function(){},toWireType:function(te,le){}})}var zn={};function Vr(G){var X=zn[G];return X===void 0?Xn(G):X}function Ar(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Hn(G){return G===0?Mr(Ar()):(G=Vr(G),Mr(Ar()[G]))}function nn(G){G>4&&(Er[G].refcount+=1)}function on(G,X){var te=_n[G];return te===void 0&&Pt(X+" has unknown type "+Ze(G)),te}function Kn(G){for(var X="",te=0;te<G;++te)X+=(te!==0?", ":"")+"arg"+te;for(var le="return function emval_allocator_"+G+`(constructor, argTypes, args) {
`,te=0;te<G;++te)le+="var argType"+te+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+te+'], "parameter '+te+`");
var arg`+te+" = argType"+te+`.readValueFromPointer(args);
args += argType`+te+`['argPackAdvance'];
`;return le+="var obj = new constructor("+X+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",le)(on,c,Mr)}var pr={};function he(G){return G||Pt("Cannot use deleted val. handle = "+G),Er[G].value}function ve(G,X,te,le){G=he(G);var Ce=pr[X];return Ce||(Ce=Kn(X),pr[X]=Ce),Ce(G,te,le)}function Be(){yt()}function We(G,X,te){pt.copyWithin(G,X,X+te)}function st(G){try{return Tn.grow(G-Wt.byteLength+65535>>>16),On(Tn.buffer),1}catch{}}function bt(G){var X=pt.length;G=G>>>0;var te=2147483648;if(G>te)return!1;for(var le=1;le<=4;le*=2){var Ce=X*(1+.2/le);Ce=Math.min(Ce,G+100663296);var $e=Math.min(te,cn(Math.max(G,Ce),65536)),lt=st($e);if(lt)return!0}return!1}var Ft={};function R(){return Kt||"./this.program"}function y(){if(!y.strings){var G=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:G,_:R()};for(var te in Ft)X[te]=Ft[te];var le=[];for(var te in X)le.push(te+"="+X[te]);y.strings=le}return y.strings}var m={mappings:{},buffers:[null,[],[]],printChar:function(G,X){var te=m.buffers[G];X===0||X===10?((G===1?Gt:rn)(si(te,0)),te.length=0):te.push(X)},varargs:void 0,get:function(){m.varargs+=4;var G=Rt[m.varargs-4>>2];return G},getStr:function(G){var X=ni(G);return X},get64:function(G,X){return G}};function C(G,X){var te=0;return y().forEach(function(le,Ce){var $e=X+te;Rt[G+Ce*4>>2]=$e,_t(le,$e),te+=le.length+1}),0}function h(G,X){var te=y();Rt[G>>2]=te.length;var le=0;return te.forEach(function(Ce){le+=Ce.length+1}),Rt[X>>2]=le,0}function g(G){oe(G)}function x(G){return 0}function U(G,X,te,le,Ce){}function z(G,X,te,le){for(var Ce=0,$e=0;$e<te;$e++){for(var lt=Rt[X+$e*8>>2],tt=Rt[X+($e*8+4)>>2],dt=0;dt<tt;dt++)m.printChar(G,pt[lt+dt]);Ce+=tt}return Rt[le>>2]=Ce,0}function B(G){}Bt=c.InternalError=nr(Error,"InternalError"),xr(),kn=c.BindingError=nr(Error,"BindingError"),Nr(),Re=c.UnboundTypeError=nr(Error,"UnboundTypeError");var N={B:hr,l:Rn,p:Gn,y:Lr,x:ui,i:Fi,f:qt,c:At,b:Ht,j:Yn,e:Tr,m:Ur,a:Qn,z:tr,g:jn,u:Hn,k:nn,n:ve,h:Be,r:We,d:bt,s:C,t:h,A:g,w:x,o:U,v:z,q:B};ri(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.D).apply(null,arguments)};var $=c._malloc=function(){return($=c._malloc=c.asm.E).apply(null,arguments)},ce=c._free=function(){return(ce=c._free=c.asm.F).apply(null,arguments)},V=c.___getTypeName=function(){return(V=c.___getTypeName=c.asm.G).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.H).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.J).apply(null,arguments)};var S;function O(G){this.name="ExitStatus",this.message="Program terminated with exit("+G+")",this.status=G}ye=function G(){S||q(),S||(ye=G)};function q(G){if(ne>0||(Fr(),ne>0))return;function X(){S||(S=!0,c.calledRun=!0,!Jr&&($r(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Dn()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),X()},1)):X()}c.run=q;function oe(G,X){X&&Rr()&&G===0||(Rr()||(c.onExit&&c.onExit(G),Jr=!0),Mt(G,new O(G)))}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return q(),c.ready}}(),l=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/mozjpeg_node_enc-7b3a94eb.wasm").href:new URL("mozjpeg_node_enc-7b3a94eb.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,p=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(S,O){Xe=S,et=O});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt="./this.program",Mt=function(S,O){throw O},xt=!1,Jt="";function hn(S){return c.locateFile?c.locateFile(S,Jt):Jt+S}var tn,vn,pn,Ot;Jt=__dirname+"/",tn=function(O,q){return pn||(pn=gi),Ot||(Ot=gi),O=Ot.normalize(O),pn.readFileSync(O,q?null:"utf8")},vn=function(O){var q=tn(O,!0);return q.buffer||(q=new Uint8Array(q)),Sr(q.buffer),q},process.argv.length>1&&(Kt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Mt=function(S){process.exit(S)},c.inspect=function(){return"[Emscripten Module object]"};var Gt=c.print||console.log.bind(console),rn=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&(Kt=c.thisProgram),c.quit&&(Mt=c.quit);var fr;c.wasmBinary&&(fr=c.wasmBinary);var Ir=c.noExitRuntime||!0;typeof WebAssembly!="object"&&yt("no native wasm support detected");var Tn,Jr=!1;function Sr(S,O){S||yt("Assertion failed: "+O)}var kr=new TextDecoder("utf8");function si(S,O,q){for(var oe=O+q,G=O;S[G]&&!(G>=oe);)++G;return kr.decode(S.subarray?S.subarray(O,G):new Uint8Array(S.slice(O,G)))}function ni(S,O){if(!S)return"";for(var q=S+O,oe=S;!(oe>=q)&&pt[oe];)++oe;return kr.decode(pt.subarray(S,oe))}function Di(S,O,q,oe){if(!(oe>0))return 0;for(var G=q,X=q+oe-1,te=0;te<S.length;++te){var le=S.charCodeAt(te);if(le>=55296&&le<=57343){var Ce=S.charCodeAt(++te);le=65536+((le&1023)<<10)|Ce&1023}if(le<=127){if(q>=X)break;O[q++]=le}else if(le<=2047){if(q+1>=X)break;O[q++]=192|le>>6,O[q++]=128|le&63}else if(le<=65535){if(q+2>=X)break;O[q++]=224|le>>12,O[q++]=128|le>>6&63,O[q++]=128|le&63}else{if(q+3>=X)break;O[q++]=240|le>>18,O[q++]=128|le>>12&63,O[q++]=128|le>>6&63,O[q++]=128|le&63}}return O[q]=0,q-G}function Ti(S,O,q){return Di(S,pt,O,q)}function Ri(S){for(var O=0,q=0;q<S.length;++q){var oe=S.charCodeAt(q);oe>=55296&&oe<=57343&&(oe=65536+((oe&1023)<<10)|S.charCodeAt(++q)&1023),oe<=127?++O:oe<=2047?O+=2:oe<=65535?O+=3:O+=4}return O}var Ii=new TextDecoder("utf-16le");function Pi(S,O){for(var q=S,oe=q>>1,G=oe+O/2;!(oe>=G)&&mt[oe];)++oe;return q=oe<<1,Ii.decode(pt.subarray(S,q))}function fi(S,O,q){if(q===void 0&&(q=2147483647),q<2)return 0;q-=2;for(var oe=O,G=q<S.length*2?q/2:S.length,X=0;X<G;++X){var te=S.charCodeAt(X);Zn[O>>1]=te,O+=2}return Zn[O>>1]=0,O-oe}function di(S){return S.length*2}function hi(S,O){for(var q=0,oe="";!(q>=O/4);){var G=Rt[S+q*4>>2];if(G==0)break;if(++q,G>=65536){var X=G-65536;oe+=String.fromCharCode(55296|X>>10,56320|X&1023)}else oe+=String.fromCharCode(G)}return oe}function mn(S,O,q){if(q===void 0&&(q=2147483647),q<4)return 0;for(var oe=O,G=oe+q-4,X=0;X<S.length;++X){var te=S.charCodeAt(X);if(te>=55296&&te<=57343){var le=S.charCodeAt(++X);te=65536+((te&1023)<<10)|le&1023}if(Rt[O>>2]=te,O+=4,O+4>G)break}return Rt[O>>2]=0,O-oe}function Ln(S){for(var O=0,q=0;q<S.length;++q){var oe=S.charCodeAt(q);oe>=55296&&oe<=57343&&++q,O+=4}return O}function _t(S,O,q){for(var oe=0;oe<S.length;++oe)Ke[O++>>0]=S.charCodeAt(oe);q||(Ke[O>>0]=0)}function cn(S,O){return S%O>0&&(S+=O-S%O),S}var Wt,Ke,pt,Zn,mt,Rt,an,Hr,Wr;function On(S){Wt=S,c.HEAP8=Ke=new Int8Array(S),c.HEAP16=Zn=new Int16Array(S),c.HEAP32=Rt=new Int32Array(S),c.HEAPU8=pt=new Uint8Array(S),c.HEAPU16=mt=new Uint16Array(S),c.HEAPU32=an=new Uint32Array(S),c.HEAPF32=Hr=new Float32Array(S),c.HEAPF64=Wr=new Float64Array(S)}c.INITIAL_MEMORY;var Pr,ai=[],pi=[],wi=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)sr(c.preRun.shift());cr(ai)}function $r(){cr(pi)}function Dn(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Q(c.postRun.shift());cr(wi)}function sr(S){ai.unshift(S)}function Dt(S){pi.unshift(S)}function Q(S){wi.unshift(S)}var ne=0,ye=null;function Me(S){ne++,c.monitorRunDependencies&&c.monitorRunDependencies(ne)}function De(S){if(ne--,c.monitorRunDependencies&&c.monitorRunDependencies(ne),ne==0&&ye){var O=ye;ye=null,O()}}c.preloadedImages={},c.preloadedAudios={};function yt(S){c.onAbort&&c.onAbort(S),S+="",rn(S),Jr=!0,S="abort("+S+"). Build with -s ASSERTIONS=1 for more info.";var O=new WebAssembly.RuntimeError(S);throw et(O),O}var Xr="data:application/octet-stream;base64,";function wn(S){return S.startsWith(Xr)}if(c.locateFile){var Nn="mozjpeg_node_dec.wasm";wn(Nn)||(Nn=hn(Nn))}else var Nn=new URL("mozjpeg_node_dec.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function dr(S){try{if(S==Nn&&fr)return new Uint8Array(fr);if(vn)return vn(S);throw"both async and sync fetching of the wasm failed"}catch(O){yt(O)}}function Wn(){return!fr&&xt&&typeof fetch=="function"?fetch(Nn,{credentials:"same-origin"}).then(function(S){if(!S.ok)throw"failed to load wasm binary file at '"+Nn+"'";return S.arrayBuffer()}).catch(function(){return dr(Nn)}):Promise.resolve().then(function(){return dr(Nn)})}function ri(){var S={a:x};function O(te,le){var Ce=te.exports;c.asm=Ce,Tn=c.asm.z,On(Tn.buffer),Pr=c.asm.F,Dt(c.asm.A),De()}Me();function q(te){O(te.instance)}function oe(te){return Wn().then(function(le){var Ce=WebAssembly.instantiate(le,S);return Ce}).then(te,function(le){rn("failed to asynchronously prepare wasm: "+le),yt(le)})}function G(){return!fr&&typeof WebAssembly.instantiateStreaming=="function"&&!wn(Nn)&&typeof fetch=="function"?fetch(Nn,{credentials:"same-origin"}).then(function(te){var le=WebAssembly.instantiateStreaming(te,S);return le.then(q,function(Ce){return rn("wasm streaming compile failed: "+Ce),rn("falling back to ArrayBuffer instantiation"),oe(q)})}):oe(q)}if(c.instantiateWasm)try{var X=c.instantiateWasm(S,O);return X}catch(te){return rn("Module.instantiateWasm callback failed with error: "+te),!1}return G().catch(et),{}}function cr(S){for(;S.length>0;){var O=S.shift();if(typeof O=="function"){O(c);continue}var q=O.func;typeof q=="number"?O.arg===void 0?Pr.get(q)():Pr.get(q)(O.arg):q(O.arg===void 0?null:O.arg)}}var Br=0;function Rr(){return Ir||Br>0}function br(S,O){}function hr(S,O){return void 0}function lr(S,O,q,oe,G){}function Vt(S){switch(S){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+S)}}function ln(){for(var S=new Array(256),O=0;O<256;++O)S[O]=String.fromCharCode(O);Un=S}var Un=void 0;function _n(S){for(var O="",q=S;pt[q];)O+=Un[pt[q++]];return O}var It={},Jn={},vr={},Sn=48,qn=57;function nr(S){if(S===void 0)return"_unknown";S=S.replace(/[^a-zA-Z0-9_]/g,"$");var O=S.charCodeAt(0);return O>=Sn&&O<=qn?"_"+S:S}function Bt(S,O){return S=nr(S),new Function("body","return function "+S+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(O)}function Vn(S,O){var q=Bt(O,function(oe){this.name=O,this.message=oe;var G=new Error(oe).stack;G!==void 0&&(this.stack=this.toString()+`
`+G.replace(/^Error(:[^\n]*)?\n/,""))});return q.prototype=Object.create(S.prototype),q.prototype.constructor=q,q.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},q}var gn=void 0;function Rn(S){throw new gn(S)}var Gn=void 0;function rr(S){throw new Gn(S)}function xr(S,O,q){S.forEach(function(le){vr[le]=O});function oe(le){var Ce=q(le);Ce.length!==S.length&&rr("Mismatched type converter count");for(var $e=0;$e<S.length;++$e)fn(S[$e],Ce[$e])}var G=new Array(O.length),X=[],te=0;O.forEach(function(le,Ce){Jn.hasOwnProperty(le)?G[Ce]=Jn[le]:(X.push(le),It.hasOwnProperty(le)||(It[le]=[]),It[le].push(function(){G[Ce]=Jn[le],++te,te===X.length&&oe(G)}))}),X.length===0&&oe(G)}function fn(S,O,q){if(q=q||{},!("argPackAdvance"in O))throw new TypeError("registerType registeredInstance requires argPackAdvance");var oe=O.name;if(S||Rn('type "'+oe+'" must have a positive integer typeid pointer'),Jn.hasOwnProperty(S)){if(q.ignoreDuplicateRegistrations)return;Rn("Cannot register type '"+oe+"' twice")}if(Jn[S]=O,delete vr[S],It.hasOwnProperty(S)){var G=It[S];delete It[S],G.forEach(function(X){X()})}}function Xn(S,O,q,oe,G){var X=Vt(q);O=_n(O),fn(S,{name:O,fromWireType:function(te){return!!te},toWireType:function(te,le){return le?oe:G},argPackAdvance:8,readValueFromPointer:function(te){var le;if(q===1)le=Ke;else if(q===2)le=Zn;else if(q===4)le=Rt;else throw new TypeError("Unknown boolean type size: "+O);return this.fromWireType(le[te>>X])},destructorFunction:null})}var kn=[],Pt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ar(S){S>4&&--Pt[S].refcount===0&&(Pt[S]=void 0,kn.push(S))}function Lr(){for(var S=0,O=5;O<Pt.length;++O)Pt[O]!==void 0&&++S;return S}function An(){for(var S=5;S<Pt.length;++S)if(Pt[S]!==void 0)return Pt[S];return null}function Er(){c.count_emval_handles=Lr,c.get_first_emval=An}function jn(S){switch(S){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var O=kn.length?kn.pop():Pt.length;return Pt[O]={refcount:1,value:S},O}}}function Or(S){return this.fromWireType(an[S>>2])}function mi(S,O){O=_n(O),fn(S,{name:O,fromWireType:function(q){var oe=Pt[q].value;return ar(q),oe},toWireType:function(q,oe){return jn(oe)},argPackAdvance:8,readValueFromPointer:Or,destructorFunction:null})}function Nr(S){if(S===null)return"null";var O=typeof S;return O==="object"||O==="array"||O==="function"?S.toString():""+S}function Mr(S,O){switch(O){case 2:return function(q){return this.fromWireType(Hr[q>>2])};case 3:return function(q){return this.fromWireType(Wr[q>>3])};default:throw new TypeError("Unknown float type: "+S)}}function ui(S,O,q){var oe=Vt(q);O=_n(O),fn(S,{name:O,fromWireType:function(G){return G},toWireType:function(G,X){if(typeof X!="number"&&typeof X!="boolean")throw new TypeError('Cannot convert "'+Nr(X)+'" to '+this.name);return X},argPackAdvance:8,readValueFromPointer:Mr(O,oe),destructorFunction:null})}function Oi(S,O){if(!(S instanceof Function))throw new TypeError("new_ called with constructor type "+typeof S+" which is not a function");var q=Bt(S.name||"unknownFunctionName",function(){});q.prototype=S.prototype;var oe=new q,G=S.apply(oe,O);return G instanceof Object?G:oe}function ci(S){for(;S.length;){var O=S.pop(),q=S.pop();q(O)}}function Fi(S,O,q,oe,G){var X=O.length;X<2&&Rn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var te=O[1]!==null&&q!==null,le=!1,Ce=1;Ce<O.length;++Ce)if(O[Ce]!==null&&O[Ce].destructorFunction===void 0){le=!0;break}for(var $e=O[0].name!=="void",lt="",tt="",Ce=0;Ce<X-2;++Ce)lt+=(Ce!==0?", ":"")+"arg"+Ce,tt+=(Ce!==0?", ":"")+"arg"+Ce+"Wired";var dt="return function "+nr(S)+"("+lt+`) {
if (arguments.length !== `+(X-2)+`) {
throwBindingError('function `+S+" called with ' + arguments.length + ' arguments, expected "+(X-2)+` args!');
}
`;le&&(dt+=`var destructors = [];
`);var zt=le?"destructors":"null",se=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],F=[Rn,oe,G,ci,O[0],O[1]];te&&(dt+="var thisWired = classParam.toWireType("+zt+`, this);
`);for(var Ce=0;Ce<X-2;++Ce)dt+="var arg"+Ce+"Wired = argType"+Ce+".toWireType("+zt+", arg"+Ce+"); // "+O[Ce+2].name+`
`,se.push("argType"+Ce),F.push(O[Ce+2]);if(te&&(tt="thisWired"+(tt.length>0?", ":"")+tt),dt+=($e?"var rv = ":"")+"invoker(fn"+(tt.length>0?", ":"")+tt+`);
`,le)dt+=`runDestructors(destructors);
`;else for(var Ce=te?1:2;Ce<O.length;++Ce){var W=Ce===1?"thisWired":"arg"+(Ce-2)+"Wired";O[Ce].destructorFunction!==null&&(dt+=W+"_dtor("+W+"); // "+O[Ce].name+`
`,se.push(W+"_dtor"),F.push(O[Ce].destructorFunction))}$e&&(dt+=`var ret = retType.fromWireType(rv);
return ret;
`),dt+=`}
`,se.push(dt);var w=Oi(Function,se).apply(null,F);return w}function Ci(S,O,q){if(S[O].overloadTable===void 0){var oe=S[O];S[O]=function(){return S[O].overloadTable.hasOwnProperty(arguments.length)||Rn("Function '"+q+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+S[O].overloadTable+")!"),S[O].overloadTable[arguments.length].apply(this,arguments)},S[O].overloadTable=[],S[O].overloadTable[oe.argCount]=oe}}function Ni(S,O,q){c.hasOwnProperty(S)?((q===void 0||c[S].overloadTable!==void 0&&c[S].overloadTable[q]!==void 0)&&Rn("Cannot register public name '"+S+"' twice"),Ci(c,S,S),c.hasOwnProperty(q)&&Rn("Cannot register multiple overloads of a function with the same number of arguments ("+q+")!"),c[S].overloadTable[q]=O):(c[S]=O,q!==void 0&&(c[S].numArguments=q))}function Si(S,O){for(var q=[],oe=0;oe<S;oe++)q.push(Rt[(O>>2)+oe]);return q}function b(S,O,q){c.hasOwnProperty(S)||rr("Replacing nonexistant public symbol"),c[S].overloadTable!==void 0&&q!==void 0?c[S].overloadTable[q]=O:(c[S]=O,c[S].argCount=q)}function H(S,O,q){var oe=c["dynCall_"+S];return q&&q.length?oe.apply(null,[O].concat(q)):oe.call(null,O)}function ie(S,O,q){return S.includes("j")?H(S,O,q):Pr.get(O).apply(null,q)}function D(S,O){var q=[];return function(){q.length=arguments.length;for(var oe=0;oe<arguments.length;oe++)q[oe]=arguments[oe];return ie(S,O,q)}}function J(S,O){S=_n(S);function q(){return S.includes("j")?D(S,O):Pr.get(O)}var oe=q();return typeof oe!="function"&&Rn("unknown function pointer with signature "+S+": "+O),oe}var ue=void 0;function be(S){var O=B(S),q=_n(O);return z(O),q}function Re(S,O){var q=[],oe={};function G(X){if(!oe[X]&&!Jn[X]){if(vr[X]){vr[X].forEach(G);return}q.push(X),oe[X]=!0}}throw O.forEach(G),new ue(S+": "+q.map(be).join([", "]))}function Ze(S,O,q,oe,G,X){var te=Si(O,q);S=_n(S),G=J(oe,G),Ni(S,function(){Re("Cannot call "+S+" due to unbound types",te)},O-1),xr([],te,function(le){var Ce=[le[0],null].concat(le.slice(1));return b(S,Fi(S,Ce,null,G,X),O-1),[]})}function Nt(S,O,q){switch(O){case 0:return q?function(G){return Ke[G]}:function(G){return pt[G]};case 1:return q?function(G){return Zn[G>>1]}:function(G){return mt[G>>1]};case 2:return q?function(G){return Rt[G>>2]}:function(G){return an[G>>2]};default:throw new TypeError("Unknown integer type: "+S)}}function qt(S,O,q,oe,G){O=_n(O),G===-1&&(G=4294967295);var X=Vt(q),te=function($e){return $e};if(oe===0){var le=32-8*q;te=function($e){return $e<<le>>>le}}var Ce=O.includes("unsigned");fn(S,{name:O,fromWireType:te,toWireType:function($e,lt){if(typeof lt!="number"&&typeof lt!="boolean")throw new TypeError('Cannot convert "'+Nr(lt)+'" to '+this.name);if(lt<oe||lt>G)throw new TypeError('Passing a number "'+Nr(lt)+'" from JS side to C/C++ side to an argument of type "'+O+'", which is outside the valid range ['+oe+", "+G+"]!");return Ce?lt>>>0:lt|0},argPackAdvance:8,readValueFromPointer:Nt(O,X,oe!==0),destructorFunction:null})}function $t(S,O,q){var oe=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],G=oe[O];function X(te){te=te>>2;var le=an,Ce=le[te],$e=le[te+1];return new G(Wt,$e,Ce)}q=_n(q),fn(S,{name:q,fromWireType:X,argPackAdvance:8,readValueFromPointer:X},{ignoreDuplicateRegistrations:!0})}function At(S,O){O=_n(O);var q=O==="std::string";fn(S,{name:O,fromWireType:function(oe){var G=an[oe>>2],X;if(q)for(var te=oe+4,le=0;le<=G;++le){var Ce=oe+4+le;if(le==G||pt[Ce]==0){var $e=Ce-te,lt=ni(te,$e);X===void 0?X=lt:(X+=String.fromCharCode(0),X+=lt),te=Ce+1}}else{for(var tt=new Array(G),le=0;le<G;++le)tt[le]=String.fromCharCode(pt[oe+4+le]);X=tt.join("")}return z(oe),X},toWireType:function(oe,G){G instanceof ArrayBuffer&&(G=new Uint8Array(G));var X,te=typeof G=="string";te||G instanceof Uint8Array||G instanceof Uint8ClampedArray||G instanceof Int8Array||Rn("Cannot pass non-string to std::string"),q&&te?X=function(){return Ri(G)}:X=function(){return G.length};var le=X(),Ce=U(4+le+1);if(an[Ce>>2]=le,q&&te)Ti(G,Ce+4,le+1);else if(te)for(var $e=0;$e<le;++$e){var lt=G.charCodeAt($e);lt>255&&(z(Ce),Rn("String has UTF-16 code units that do not fit in 8 bits")),pt[Ce+4+$e]=lt}else for(var $e=0;$e<le;++$e)pt[Ce+4+$e]=G[$e];return oe!==null&&oe.push(z,Ce),Ce},argPackAdvance:8,readValueFromPointer:Or,destructorFunction:function(oe){z(oe)}})}function Ht(S,O,q){q=_n(q);var oe,G,X,te,le;O===2?(oe=Pi,G=fi,te=di,X=function(){return mt},le=1):O===4&&(oe=hi,G=mn,te=Ln,X=function(){return an},le=2),fn(S,{name:q,fromWireType:function(Ce){for(var $e=an[Ce>>2],lt=X(),tt,dt=Ce+4,zt=0;zt<=$e;++zt){var se=Ce+4+zt*O;if(zt==$e||lt[se>>le]==0){var F=se-dt,W=oe(dt,F);tt===void 0?tt=W:(tt+=String.fromCharCode(0),tt+=W),dt=se+O}}return z(Ce),tt},toWireType:function(Ce,$e){typeof $e!="string"&&Rn("Cannot pass non-string to C++ string type "+q);var lt=te($e),tt=U(4+lt+O);return an[tt>>2]=lt>>le,G($e,tt+4,lt+O),Ce!==null&&Ce.push(z,tt),tt},argPackAdvance:8,readValueFromPointer:Or,destructorFunction:function(Ce){z(Ce)}})}function Yn(S,O){O=_n(O),fn(S,{isVoid:!0,name:O,argPackAdvance:0,fromWireType:function(){},toWireType:function(q,oe){}})}var Tr={};function Ur(S){var O=Tr[S];return O===void 0?_n(S):O}function Qn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function tr(S){return S===0?jn(Qn()):(S=Ur(S),jn(Qn()[S]))}function zn(S){S>4&&(Pt[S].refcount+=1)}function Vr(S,O){var q=Jn[S];return q===void 0&&Rn(O+" has unknown type "+be(S)),q}function Ar(S){for(var O="",q=0;q<S;++q)O+=(q!==0?", ":"")+"arg"+q;for(var oe="return function emval_allocator_"+S+`(constructor, argTypes, args) {
`,q=0;q<S;++q)oe+="var argType"+q+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+q+'], "parameter '+q+`");
var arg`+q+" = argType"+q+`.readValueFromPointer(args);
args += argType`+q+`['argPackAdvance'];
`;return oe+="var obj = new constructor("+O+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",oe)(Vr,c,jn)}var Hn={};function nn(S){return S||Rn("Cannot use deleted val. handle = "+S),Pt[S].value}function on(S,O,q,oe){S=nn(S);var G=Hn[O];return G||(G=Ar(O),Hn[O]=G),G(S,q,oe)}function Kn(){yt()}function pr(S,O,q){pt.copyWithin(S,O,O+q)}function he(S){try{return Tn.grow(S-Wt.byteLength+65535>>>16),On(Tn.buffer),1}catch{}}function ve(S){var O=pt.length;S=S>>>0;var q=2147483648;if(S>q)return!1;for(var oe=1;oe<=4;oe*=2){var G=O*(1+.2/oe);G=Math.min(G,S+100663296);var X=Math.min(q,cn(Math.max(S,G),65536)),te=he(X);if(te)return!0}return!1}var Be={};function We(){return Kt||"./this.program"}function st(){if(!st.strings){var S=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",O={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:S,_:We()};for(var q in Be)O[q]=Be[q];var oe=[];for(var q in O)oe.push(q+"="+O[q]);st.strings=oe}return st.strings}var bt={mappings:{},buffers:[null,[],[]],printChar:function(S,O){var q=bt.buffers[S];O===0||O===10?((S===1?Gt:rn)(si(q,0)),q.length=0):q.push(O)},varargs:void 0,get:function(){bt.varargs+=4;var S=Rt[bt.varargs-4>>2];return S},getStr:function(S){var O=ni(S);return O},get64:function(S,O){return S}};function Ft(S,O){var q=0;return st().forEach(function(oe,G){var X=O+q;Rt[S+G*4>>2]=X,_t(oe,X),q+=oe.length+1}),0}function R(S,O){var q=st();Rt[S>>2]=q.length;var oe=0;return q.forEach(function(G){oe+=G.length+1}),Rt[O>>2]=oe,0}function y(S){V(S)}function m(S){return 0}function C(S,O,q,oe,G){}function h(S,O,q,oe){for(var G=0,X=0;X<q;X++){for(var te=Rt[O+X*8>>2],le=Rt[O+(X*8+4)>>2],Ce=0;Ce<le;Ce++)bt.printChar(S,pt[te+Ce]);G+=le}return Rt[oe>>2]=G,0}function g(S){}ln(),gn=c.BindingError=Vn(Error,"BindingError"),Gn=c.InternalError=Vn(Error,"InternalError"),Er(),ue=c.UnboundTypeError=Vn(Error,"UnboundTypeError");var x={e:hr,q:lr,m:Xn,x:mi,l:ui,o:Ze,b:qt,a:$t,h:At,g:Ht,n:Yn,c:ar,d:tr,i:zn,j:on,k:Kn,s:pr,f:ve,t:Ft,u:R,y,w:m,p:C,v:h,r:g};ri(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.A).apply(null,arguments)};var U=c._malloc=function(){return(U=c._malloc=c.asm.B).apply(null,arguments)},z=c._free=function(){return(z=c._free=c.asm.C).apply(null,arguments)},B=c.___getTypeName=function(){return(B=c.___getTypeName=c.asm.D).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.E).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.G).apply(null,arguments)};var N;function $(S){this.name="ExitStatus",this.message="Program terminated with exit("+S+")",this.status=S}ye=function S(){N||ce(),N||(ye=S)};function ce(S){if(ne>0||(Fr(),ne>0))return;function O(){N||(N=!0,c.calledRun=!0,!Jr&&($r(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Dn()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),O()},1)):O()}c.run=ce;function V(S,O){O&&Rr()&&S===0||(Rr()||(c.onExit&&c.onExit(S),Jr=!0),Mt(S,new $(S)))}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return ce(),c.ready}}(),d=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/mozjpeg_node_dec-4fa549e7.wasm").href:new URL("mozjpeg_node_dec-4fa549e7.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,_=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(R,y){Xe=R,et=y});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(R){return c.locateFile?c.locateFile(R,Mt):Mt+R}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(y,m){return tn||(tn=gi),vn||(vn=gi),y=vn.normalize(y),tn.readFileSync(y,m?null:"utf8")},hn=function(y){var m=Jt(y,!0);return m.buffer||(m=new Uint8Array(m)),fr(m.buffer),m},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"},c.print||console.log.bind(console);var pn=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Ot;c.wasmBinary&&(Ot=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&Dt("no native wasm support detected");var Gt,rn=!1;function fr(R,y){R||Dt("Assertion failed: "+y)}var Ir=new TextDecoder("utf8");function Tn(R,y){if(!R)return"";for(var m=R+y,C=R;!(C>=m)&&mn[C];)++C;return Ir.decode(mn.subarray(R,C))}function Jr(R,y,m,C){if(!(C>0))return 0;for(var h=m,g=m+C-1,x=0;x<R.length;++x){var U=R.charCodeAt(x);if(U>=55296&&U<=57343){var z=R.charCodeAt(++x);U=65536+((U&1023)<<10)|z&1023}if(U<=127){if(m>=g)break;y[m++]=U}else if(U<=2047){if(m+1>=g)break;y[m++]=192|U>>6,y[m++]=128|U&63}else if(U<=65535){if(m+2>=g)break;y[m++]=224|U>>12,y[m++]=128|U>>6&63,y[m++]=128|U&63}else{if(m+3>=g)break;y[m++]=240|U>>18,y[m++]=128|U>>12&63,y[m++]=128|U>>6&63,y[m++]=128|U&63}}return y[m]=0,m-h}function Sr(R,y,m){return Jr(R,mn,y,m)}function kr(R){for(var y=0,m=0;m<R.length;++m){var C=R.charCodeAt(m);C>=55296&&C<=57343&&(C=65536+((C&1023)<<10)|R.charCodeAt(++m)&1023),C<=127?++y:C<=2047?y+=2:C<=65535?y+=3:y+=4}return y}var si=new TextDecoder("utf-16le");function ni(R,y){for(var m=R,C=m>>1,h=C+y/2;!(C>=h)&&_t[C];)++C;return m=C<<1,si.decode(mn.subarray(R,m))}function Di(R,y,m){if(m===void 0&&(m=2147483647),m<2)return 0;m-=2;for(var C=y,h=m<R.length*2?m/2:R.length,g=0;g<h;++g){var x=R.charCodeAt(g);Ln[y>>1]=x,y+=2}return Ln[y>>1]=0,y-C}function Ti(R){return R.length*2}function Ri(R,y){for(var m=0,C="";!(m>=y/4);){var h=cn[R+m*4>>2];if(h==0)break;if(++m,h>=65536){var g=h-65536;C+=String.fromCharCode(55296|g>>10,56320|g&1023)}else C+=String.fromCharCode(h)}return C}function Ii(R,y,m){if(m===void 0&&(m=2147483647),m<4)return 0;for(var C=y,h=C+m-4,g=0;g<R.length;++g){var x=R.charCodeAt(g);if(x>=55296&&x<=57343){var U=R.charCodeAt(++g);x=65536+((x&1023)<<10)|U&1023}if(cn[y>>2]=x,y+=4,y+4>h)break}return cn[y>>2]=0,y-C}function Pi(R){for(var y=0,m=0;m<R.length;++m){var C=R.charCodeAt(m);C>=55296&&C<=57343&&++m,y+=4}return y}function fi(R,y){return R%y>0&&(R+=y-R%y),R}var di,hi,mn,Ln,_t,cn,Wt,Ke,pt;function Zn(R){di=R,c.HEAP8=hi=new Int8Array(R),c.HEAP16=Ln=new Int16Array(R),c.HEAP32=cn=new Int32Array(R),c.HEAPU8=mn=new Uint8Array(R),c.HEAPU16=_t=new Uint16Array(R),c.HEAPU32=Wt=new Uint32Array(R),c.HEAPF32=Ke=new Float32Array(R),c.HEAPF64=pt=new Float64Array(R)}c.INITIAL_MEMORY;var mt,Rt=[],an=[],Hr=[];function Wr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)ai(c.preRun.shift());Xr(Rt)}function On(){Xr(an)}function Pr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)wi(c.postRun.shift());Xr(Hr)}function ai(R){Rt.unshift(R)}function pi(R){an.unshift(R)}function wi(R){Hr.unshift(R)}var Fr=0,$r=null;function Dn(R){Fr++,c.monitorRunDependencies&&c.monitorRunDependencies(Fr)}function sr(R){if(Fr--,c.monitorRunDependencies&&c.monitorRunDependencies(Fr),Fr==0&&$r){var y=$r;$r=null,y()}}c.preloadedImages={},c.preloadedAudios={};function Dt(R){c.onAbort&&c.onAbort(R),R+="",pn(R),rn=!0,R="abort("+R+"). Build with -s ASSERTIONS=1 for more info.";var y=new WebAssembly.RuntimeError(R);throw et(y),y}var Q="data:application/octet-stream;base64,";function ne(R){return R.startsWith(Q)}if(c.locateFile){var ye="webp_node_enc.wasm";ne(ye)||(ye=xt(ye))}else var ye=new URL("webp_node_enc.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(R){try{if(R==ye&&Ot)return new Uint8Array(Ot);if(hn)return hn(R);throw"both async and sync fetching of the wasm failed"}catch(y){Dt(y)}}function De(){return!Ot&&Kt&&typeof fetch=="function"?fetch(ye,{credentials:"same-origin"}).then(function(R){if(!R.ok)throw"failed to load wasm binary file at '"+ye+"'";return R.arrayBuffer()}).catch(function(){return Me(ye)}):Promise.resolve().then(function(){return Me(ye)})}function yt(){var R={a:ve};function y(x,U){var z=x.exports;c.asm=z,Gt=c.asm.x,Zn(Gt.buffer),mt=c.asm.D,pi(c.asm.y),sr()}Dn();function m(x){y(x.instance)}function C(x){return De().then(function(U){var z=WebAssembly.instantiate(U,R);return z}).then(x,function(U){pn("failed to asynchronously prepare wasm: "+U),Dt(U)})}function h(){return!Ot&&typeof WebAssembly.instantiateStreaming=="function"&&!ne(ye)&&typeof fetch=="function"?fetch(ye,{credentials:"same-origin"}).then(function(x){var U=WebAssembly.instantiateStreaming(x,R);return U.then(m,function(z){return pn("wasm streaming compile failed: "+z),pn("falling back to ArrayBuffer instantiation"),C(m)})}):C(m)}if(c.instantiateWasm)try{var g=c.instantiateWasm(R,y);return g}catch(x){return pn("Module.instantiateWasm callback failed with error: "+x),!1}return h().catch(et),{}}function Xr(R){for(;R.length>0;){var y=R.shift();if(typeof y=="function"){y(c);continue}var m=y.func;typeof m=="number"?y.arg===void 0?mt.get(m)():mt.get(m)(y.arg):m(y.arg===void 0?null:y.arg)}}function wn(R,y){}function Nn(R,y){return void 0}var dr={};function Wn(R){for(;R.length;){var y=R.pop(),m=R.pop();m(y)}}function ri(R){return this.fromWireType(Wt[R>>2])}var cr={},Br={},Rr={},br=48,hr=57;function lr(R){if(R===void 0)return"_unknown";R=R.replace(/[^a-zA-Z0-9_]/g,"$");var y=R.charCodeAt(0);return y>=br&&y<=hr?"_"+R:R}function Vt(R,y){return R=lr(R),new Function("body","return function "+R+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(y)}function ln(R,y){var m=Vt(y,function(C){this.name=y,this.message=C;var h=new Error(C).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return m.prototype=Object.create(R.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},m}var Un=void 0;function _n(R){throw new Un(R)}function It(R,y,m){R.forEach(function(U){Rr[U]=y});function C(U){var z=m(U);z.length!==R.length&&_n("Mismatched type converter count");for(var B=0;B<R.length;++B)Rn(R[B],z[B])}var h=new Array(y.length),g=[],x=0;y.forEach(function(U,z){Br.hasOwnProperty(U)?h[z]=Br[U]:(g.push(U),cr.hasOwnProperty(U)||(cr[U]=[]),cr[U].push(function(){h[z]=Br[U],++x,x===g.length&&C(h)}))}),g.length===0&&C(h)}function Jn(R){var y=dr[R];delete dr[R];var m=y.rawConstructor,C=y.rawDestructor,h=y.fields,g=h.map(function(x){return x.getterReturnType}).concat(h.map(function(x){return x.setterArgumentType}));It([R],g,function(x){var U={};return h.forEach(function(z,B){var N=z.fieldName,$=x[B],ce=z.getter,V=z.getterContext,S=x[B+h.length],O=z.setter,q=z.setterContext;U[N]={read:function(oe){return $.fromWireType(ce(V,oe))},write:function(oe,G){var X=[];O(q,oe,S.toWireType(X,G)),Wn(X)}}}),[{name:y.name,fromWireType:function(z){var B={};for(var N in U)B[N]=U[N].read(z);return C(z),B},toWireType:function(z,B){for(var N in U)if(!(N in B))throw new TypeError('Missing field:  "'+N+'"');var $=m();for(N in U)U[N].write($,B[N]);return z!==null&&z.push(C,$),$},argPackAdvance:8,readValueFromPointer:ri,destructorFunction:C}]})}function vr(R,y,m,C,h){}function Sn(R){switch(R){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+R)}}function qn(){for(var R=new Array(256),y=0;y<256;++y)R[y]=String.fromCharCode(y);nr=R}var nr=void 0;function Bt(R){for(var y="",m=R;mn[m];)y+=nr[mn[m++]];return y}var Vn=void 0;function gn(R){throw new Vn(R)}function Rn(R,y,m){if(m=m||{},!("argPackAdvance"in y))throw new TypeError("registerType registeredInstance requires argPackAdvance");var C=y.name;if(R||gn('type "'+C+'" must have a positive integer typeid pointer'),Br.hasOwnProperty(R)){if(m.ignoreDuplicateRegistrations)return;gn("Cannot register type '"+C+"' twice")}if(Br[R]=y,delete Rr[R],cr.hasOwnProperty(R)){var h=cr[R];delete cr[R],h.forEach(function(g){g()})}}function Gn(R,y,m,C,h){var g=Sn(m);y=Bt(y),Rn(R,{name:y,fromWireType:function(x){return!!x},toWireType:function(x,U){return U?C:h},argPackAdvance:8,readValueFromPointer:function(x){var U;if(m===1)U=hi;else if(m===2)U=Ln;else if(m===4)U=cn;else throw new TypeError("Unknown boolean type size: "+y);return this.fromWireType(U[x>>g])},destructorFunction:null})}var rr=[],xr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function fn(R){R>4&&--xr[R].refcount===0&&(xr[R]=void 0,rr.push(R))}function Xn(){for(var R=0,y=5;y<xr.length;++y)xr[y]!==void 0&&++R;return R}function kn(){for(var R=5;R<xr.length;++R)if(xr[R]!==void 0)return xr[R];return null}function Pt(){c.count_emval_handles=Xn,c.get_first_emval=kn}function ar(R){switch(R){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var y=rr.length?rr.pop():xr.length;return xr[y]={refcount:1,value:R},y}}}function Lr(R,y){y=Bt(y),Rn(R,{name:y,fromWireType:function(m){var C=xr[m].value;return fn(m),C},toWireType:function(m,C){return ar(C)},argPackAdvance:8,readValueFromPointer:ri,destructorFunction:null})}function An(R,y,m){if(R[y].overloadTable===void 0){var C=R[y];R[y]=function(){return R[y].overloadTable.hasOwnProperty(arguments.length)||gn("Function '"+m+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+R[y].overloadTable+")!"),R[y].overloadTable[arguments.length].apply(this,arguments)},R[y].overloadTable=[],R[y].overloadTable[C.argCount]=C}}function Er(R,y,m){c.hasOwnProperty(R)?((m===void 0||c[R].overloadTable!==void 0&&c[R].overloadTable[m]!==void 0)&&gn("Cannot register public name '"+R+"' twice"),An(c,R,R),c.hasOwnProperty(m)&&gn("Cannot register multiple overloads of a function with the same number of arguments ("+m+")!"),c[R].overloadTable[m]=y):(c[R]=y,m!==void 0&&(c[R].numArguments=m))}function jn(R,y,m){switch(y){case 0:return function(C){var h=m?hi:mn;return this.fromWireType(h[C])};case 1:return function(C){var h=m?Ln:_t;return this.fromWireType(h[C>>1])};case 2:return function(C){var h=m?cn:Wt;return this.fromWireType(h[C>>2])};default:throw new TypeError("Unknown integer type: "+R)}}function Or(R,y,m,C){var h=Sn(m);y=Bt(y);function g(){}g.values={},Rn(R,{name:y,constructor:g,fromWireType:function(x){return this.constructor.values[x]},toWireType:function(x,U){return U.value},argPackAdvance:8,readValueFromPointer:jn(y,h,C),destructorFunction:null}),Er(y,g)}function mi(R){var y=st(R),m=Bt(y);return We(y),m}function Nr(R,y){var m=Br[R];return m===void 0&&gn(y+" has unknown type "+mi(R)),m}function Mr(R,y,m){var C=Nr(R,"enum");y=Bt(y);var h=C.constructor,g=Object.create(C.constructor.prototype,{value:{value:m},constructor:{value:Vt(C.name+"_"+y,function(){})}});h.values[m]=g,h[y]=g}function ui(R){if(R===null)return"null";var y=typeof R;return y==="object"||y==="array"||y==="function"?R.toString():""+R}function Oi(R,y){switch(y){case 2:return function(m){return this.fromWireType(Ke[m>>2])};case 3:return function(m){return this.fromWireType(pt[m>>3])};default:throw new TypeError("Unknown float type: "+R)}}function ci(R,y,m){var C=Sn(m);y=Bt(y),Rn(R,{name:y,fromWireType:function(h){return h},toWireType:function(h,g){if(typeof g!="number"&&typeof g!="boolean")throw new TypeError('Cannot convert "'+ui(g)+'" to '+this.name);return g},argPackAdvance:8,readValueFromPointer:Oi(y,C),destructorFunction:null})}function Fi(R,y){if(!(R instanceof Function))throw new TypeError("new_ called with constructor type "+typeof R+" which is not a function");var m=Vt(R.name||"unknownFunctionName",function(){});m.prototype=R.prototype;var C=new m,h=R.apply(C,y);return h instanceof Object?h:C}function Ci(R,y,m,C,h){var g=y.length;g<2&&gn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var x=y[1]!==null&&m!==null,U=!1,z=1;z<y.length;++z)if(y[z]!==null&&y[z].destructorFunction===void 0){U=!0;break}for(var B=y[0].name!=="void",N="",$="",z=0;z<g-2;++z)N+=(z!==0?", ":"")+"arg"+z,$+=(z!==0?", ":"")+"arg"+z+"Wired";var ce="return function "+lr(R)+"("+N+`) {
if (arguments.length !== `+(g-2)+`) {
throwBindingError('function `+R+" called with ' + arguments.length + ' arguments, expected "+(g-2)+` args!');
}
`;U&&(ce+=`var destructors = [];
`);var V=U?"destructors":"null",S=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],O=[gn,C,h,Wn,y[0],y[1]];x&&(ce+="var thisWired = classParam.toWireType("+V+`, this);
`);for(var z=0;z<g-2;++z)ce+="var arg"+z+"Wired = argType"+z+".toWireType("+V+", arg"+z+"); // "+y[z+2].name+`
`,S.push("argType"+z),O.push(y[z+2]);if(x&&($="thisWired"+($.length>0?", ":"")+$),ce+=(B?"var rv = ":"")+"invoker(fn"+($.length>0?", ":"")+$+`);
`,U)ce+=`runDestructors(destructors);
`;else for(var z=x?1:2;z<y.length;++z){var q=z===1?"thisWired":"arg"+(z-2)+"Wired";y[z].destructorFunction!==null&&(ce+=q+"_dtor("+q+"); // "+y[z].name+`
`,S.push(q+"_dtor"),O.push(y[z].destructorFunction))}B&&(ce+=`var ret = retType.fromWireType(rv);
return ret;
`),ce+=`}
`,S.push(ce);var oe=Fi(Function,S).apply(null,O);return oe}function Ni(R,y){for(var m=[],C=0;C<R;C++)m.push(cn[(y>>2)+C]);return m}function Si(R,y,m){c.hasOwnProperty(R)||_n("Replacing nonexistant public symbol"),c[R].overloadTable!==void 0&&m!==void 0?c[R].overloadTable[m]=y:(c[R]=y,c[R].argCount=m)}function b(R,y,m){var C=c["dynCall_"+R];return m&&m.length?C.apply(null,[y].concat(m)):C.call(null,y)}function H(R,y,m){return R.includes("j")?b(R,y,m):mt.get(y).apply(null,m)}function ie(R,y){var m=[];return function(){m.length=arguments.length;for(var C=0;C<arguments.length;C++)m[C]=arguments[C];return H(R,y,m)}}function D(R,y){R=Bt(R);function m(){return R.includes("j")?ie(R,y):mt.get(y)}var C=m();return typeof C!="function"&&gn("unknown function pointer with signature "+R+": "+y),C}var J=void 0;function ue(R,y){var m=[],C={};function h(g){if(!C[g]&&!Br[g]){if(Rr[g]){Rr[g].forEach(h);return}m.push(g),C[g]=!0}}throw y.forEach(h),new J(R+": "+m.map(mi).join([", "]))}function be(R,y,m,C,h,g){var x=Ni(y,m);R=Bt(R),h=D(C,h),Er(R,function(){ue("Cannot call "+R+" due to unbound types",x)},y-1),It([],x,function(U){var z=[U[0],null].concat(U.slice(1));return Si(R,Ci(R,z,null,h,g),y-1),[]})}function Re(R,y,m){switch(y){case 0:return m?function(h){return hi[h]}:function(h){return mn[h]};case 1:return m?function(h){return Ln[h>>1]}:function(h){return _t[h>>1]};case 2:return m?function(h){return cn[h>>2]}:function(h){return Wt[h>>2]};default:throw new TypeError("Unknown integer type: "+R)}}function Ze(R,y,m,C,h){y=Bt(y),h===-1&&(h=4294967295);var g=Sn(m),x=function(B){return B};if(C===0){var U=32-8*m;x=function(B){return B<<U>>>U}}var z=y.includes("unsigned");Rn(R,{name:y,fromWireType:x,toWireType:function(B,N){if(typeof N!="number"&&typeof N!="boolean")throw new TypeError('Cannot convert "'+ui(N)+'" to '+this.name);if(N<C||N>h)throw new TypeError('Passing a number "'+ui(N)+'" from JS side to C/C++ side to an argument of type "'+y+'", which is outside the valid range ['+C+", "+h+"]!");return z?N>>>0:N|0},argPackAdvance:8,readValueFromPointer:Re(y,g,C!==0),destructorFunction:null})}function Nt(R,y,m){var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=C[y];function g(x){x=x>>2;var U=Wt,z=U[x],B=U[x+1];return new h(di,B,z)}m=Bt(m),Rn(R,{name:m,fromWireType:g,argPackAdvance:8,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})}function qt(R,y){y=Bt(y);var m=y==="std::string";Rn(R,{name:y,fromWireType:function(C){var h=Wt[C>>2],g;if(m)for(var x=C+4,U=0;U<=h;++U){var z=C+4+U;if(U==h||mn[z]==0){var B=z-x,N=Tn(x,B);g===void 0?g=N:(g+=String.fromCharCode(0),g+=N),x=z+1}}else{for(var $=new Array(h),U=0;U<h;++U)$[U]=String.fromCharCode(mn[C+4+U]);g=$.join("")}return We(C),g},toWireType:function(C,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,x=typeof h=="string";x||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||gn("Cannot pass non-string to std::string"),m&&x?g=function(){return kr(h)}:g=function(){return h.length};var U=g(),z=Be(4+U+1);if(Wt[z>>2]=U,m&&x)Sr(h,z+4,U+1);else if(x)for(var B=0;B<U;++B){var N=h.charCodeAt(B);N>255&&(We(z),gn("String has UTF-16 code units that do not fit in 8 bits")),mn[z+4+B]=N}else for(var B=0;B<U;++B)mn[z+4+B]=h[B];return C!==null&&C.push(We,z),z},argPackAdvance:8,readValueFromPointer:ri,destructorFunction:function(C){We(C)}})}function $t(R,y,m){m=Bt(m);var C,h,g,x,U;y===2?(C=ni,h=Di,x=Ti,g=function(){return _t},U=1):y===4&&(C=Ri,h=Ii,x=Pi,g=function(){return Wt},U=2),Rn(R,{name:m,fromWireType:function(z){for(var B=Wt[z>>2],N=g(),$,ce=z+4,V=0;V<=B;++V){var S=z+4+V*y;if(V==B||N[S>>U]==0){var O=S-ce,q=C(ce,O);$===void 0?$=q:($+=String.fromCharCode(0),$+=q),ce=S+y}}return We(z),$},toWireType:function(z,B){typeof B!="string"&&gn("Cannot pass non-string to C++ string type "+m);var N=x(B),$=Be(4+N+y);return Wt[$>>2]=N>>U,h(B,$+4,N+y),z!==null&&z.push(We,$),$},argPackAdvance:8,readValueFromPointer:ri,destructorFunction:function(z){We(z)}})}function At(R,y,m,C,h,g){dr[R]={name:Bt(y),rawConstructor:D(m,C),rawDestructor:D(h,g),fields:[]}}function Ht(R,y,m,C,h,g,x,U,z,B){dr[R].fields.push({fieldName:Bt(y),getterReturnType:m,getter:D(C,h),getterContext:g,setterArgumentType:x,setter:D(U,z),setterContext:B})}function Yn(R,y){y=Bt(y),Rn(R,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:function(){},toWireType:function(m,C){}})}var Tr={};function Ur(R){var y=Tr[R];return y===void 0?Bt(R):y}function Qn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function tr(R){return R===0?ar(Qn()):(R=Ur(R),ar(Qn()[R]))}function zn(R){R>4&&(xr[R].refcount+=1)}function Vr(R){for(var y="",m=0;m<R;++m)y+=(m!==0?", ":"")+"arg"+m;for(var C="return function emval_allocator_"+R+`(constructor, argTypes, args) {
`,m=0;m<R;++m)C+="var argType"+m+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+m+'], "parameter '+m+`");
var arg`+m+" = argType"+m+`.readValueFromPointer(args);
args += argType`+m+`['argPackAdvance'];
`;return C+="var obj = new constructor("+y+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",C)(Nr,c,ar)}var Ar={};function Hn(R){return R||gn("Cannot use deleted val. handle = "+R),xr[R].value}function nn(R,y,m,C){R=Hn(R);var h=Ar[y];return h||(h=Vr(y),Ar[y]=h),h(R,m,C)}function on(){Dt()}function Kn(R,y,m){mn.copyWithin(R,y,y+m)}function pr(R){try{return Gt.grow(R-di.byteLength+65535>>>16),Zn(Gt.buffer),1}catch{}}function he(R){var y=mn.length;R=R>>>0;var m=2147483648;if(R>m)return!1;for(var C=1;C<=4;C*=2){var h=y*(1+.2/C);h=Math.min(h,R+100663296);var g=Math.min(m,fi(Math.max(R,h),65536)),x=pr(g);if(x)return!0}return!1}Un=c.InternalError=ln(Error,"InternalError"),qn(),Vn=c.BindingError=ln(Error,"BindingError"),Pt(),J=c.UnboundTypeError=ln(Error,"UnboundTypeError");var ve={w:Nn,l:Jn,p:vr,s:Gn,r:Lr,n:Or,d:Mr,j:ci,h:be,c:Ze,b:Nt,k:qt,g:$t,m:At,a:Ht,t:Yn,f:fn,v:tr,u:zn,o:nn,i:on,q:Kn,e:he};yt(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.y).apply(null,arguments)};var Be=c._malloc=function(){return(Be=c._malloc=c.asm.z).apply(null,arguments)},We=c._free=function(){return(We=c._free=c.asm.A).apply(null,arguments)},st=c.___getTypeName=function(){return(st=c.___getTypeName=c.asm.B).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.C).apply(null,arguments)};var bt;$r=function R(){bt||Ft(),bt||($r=R)};function Ft(R){if(Fr>0||(Wr(),Fr>0))return;function y(){bt||(bt=!0,c.calledRun=!0,!rn&&(On(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Pr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),y()},1)):y()}if(c.run=Ft,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ft(),c.ready}}(),A=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/webp_node_enc-21e7a82d.wasm").href:new URL("webp_node_enc-21e7a82d.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,E=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(he,ve){Xe=he,et=ve});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(he){return c.locateFile?c.locateFile(he,Mt):Mt+he}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(ve,Be){return tn||(tn=gi),vn||(vn=gi),ve=vn.normalize(ve),tn.readFileSync(ve,Be?null:"utf8")},hn=function(ve){var Be=Jt(ve,!0);return Be.buffer||(Be=new Uint8Array(Be)),fr(Be.buffer),Be},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"},c.print||console.log.bind(console);var pn=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Ot;c.wasmBinary&&(Ot=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&Dt("no native wasm support detected");var Gt,rn=!1;function fr(he,ve){he||Dt("Assertion failed: "+ve)}var Ir=new TextDecoder("utf8");function Tn(he,ve){if(!he)return"";for(var Be=he+ve,We=he;!(We>=Be)&&mn[We];)++We;return Ir.decode(mn.subarray(he,We))}function Jr(he,ve,Be,We){if(!(We>0))return 0;for(var st=Be,bt=Be+We-1,Ft=0;Ft<he.length;++Ft){var R=he.charCodeAt(Ft);if(R>=55296&&R<=57343){var y=he.charCodeAt(++Ft);R=65536+((R&1023)<<10)|y&1023}if(R<=127){if(Be>=bt)break;ve[Be++]=R}else if(R<=2047){if(Be+1>=bt)break;ve[Be++]=192|R>>6,ve[Be++]=128|R&63}else if(R<=65535){if(Be+2>=bt)break;ve[Be++]=224|R>>12,ve[Be++]=128|R>>6&63,ve[Be++]=128|R&63}else{if(Be+3>=bt)break;ve[Be++]=240|R>>18,ve[Be++]=128|R>>12&63,ve[Be++]=128|R>>6&63,ve[Be++]=128|R&63}}return ve[Be]=0,Be-st}function Sr(he,ve,Be){return Jr(he,mn,ve,Be)}function kr(he){for(var ve=0,Be=0;Be<he.length;++Be){var We=he.charCodeAt(Be);We>=55296&&We<=57343&&(We=65536+((We&1023)<<10)|he.charCodeAt(++Be)&1023),We<=127?++ve:We<=2047?ve+=2:We<=65535?ve+=3:ve+=4}return ve}var si=new TextDecoder("utf-16le");function ni(he,ve){for(var Be=he,We=Be>>1,st=We+ve/2;!(We>=st)&&_t[We];)++We;return Be=We<<1,si.decode(mn.subarray(he,Be))}function Di(he,ve,Be){if(Be===void 0&&(Be=2147483647),Be<2)return 0;Be-=2;for(var We=ve,st=Be<he.length*2?Be/2:he.length,bt=0;bt<st;++bt){var Ft=he.charCodeAt(bt);Ln[ve>>1]=Ft,ve+=2}return Ln[ve>>1]=0,ve-We}function Ti(he){return he.length*2}function Ri(he,ve){for(var Be=0,We="";!(Be>=ve/4);){var st=cn[he+Be*4>>2];if(st==0)break;if(++Be,st>=65536){var bt=st-65536;We+=String.fromCharCode(55296|bt>>10,56320|bt&1023)}else We+=String.fromCharCode(st)}return We}function Ii(he,ve,Be){if(Be===void 0&&(Be=2147483647),Be<4)return 0;for(var We=ve,st=We+Be-4,bt=0;bt<he.length;++bt){var Ft=he.charCodeAt(bt);if(Ft>=55296&&Ft<=57343){var R=he.charCodeAt(++bt);Ft=65536+((Ft&1023)<<10)|R&1023}if(cn[ve>>2]=Ft,ve+=4,ve+4>st)break}return cn[ve>>2]=0,ve-We}function Pi(he){for(var ve=0,Be=0;Be<he.length;++Be){var We=he.charCodeAt(Be);We>=55296&&We<=57343&&++Be,ve+=4}return ve}function fi(he,ve){return he%ve>0&&(he+=ve-he%ve),he}var di,hi,mn,Ln,_t,cn,Wt,Ke,pt;function Zn(he){di=he,c.HEAP8=hi=new Int8Array(he),c.HEAP16=Ln=new Int16Array(he),c.HEAP32=cn=new Int32Array(he),c.HEAPU8=mn=new Uint8Array(he),c.HEAPU16=_t=new Uint16Array(he),c.HEAPU32=Wt=new Uint32Array(he),c.HEAPF32=Ke=new Float32Array(he),c.HEAPF64=pt=new Float64Array(he)}c.INITIAL_MEMORY;var mt,Rt=[],an=[],Hr=[];function Wr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)ai(c.preRun.shift());Xr(Rt)}function On(){Xr(an)}function Pr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)wi(c.postRun.shift());Xr(Hr)}function ai(he){Rt.unshift(he)}function pi(he){an.unshift(he)}function wi(he){Hr.unshift(he)}var Fr=0,$r=null;function Dn(he){Fr++,c.monitorRunDependencies&&c.monitorRunDependencies(Fr)}function sr(he){if(Fr--,c.monitorRunDependencies&&c.monitorRunDependencies(Fr),Fr==0&&$r){var ve=$r;$r=null,ve()}}c.preloadedImages={},c.preloadedAudios={};function Dt(he){c.onAbort&&c.onAbort(he),he+="",pn(he),rn=!0,he="abort("+he+"). Build with -s ASSERTIONS=1 for more info.";var ve=new WebAssembly.RuntimeError(he);throw et(ve),ve}var Q="data:application/octet-stream;base64,";function ne(he){return he.startsWith(Q)}if(c.locateFile){var ye="webp_node_dec.wasm";ne(ye)||(ye=xt(ye))}else var ye=new URL("webp_node_dec.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(he){try{if(he==ye&&Ot)return new Uint8Array(Ot);if(hn)return hn(he);throw"both async and sync fetching of the wasm failed"}catch(ve){Dt(ve)}}function De(){return!Ot&&Kt&&typeof fetch=="function"?fetch(ye,{credentials:"same-origin"}).then(function(he){if(!he.ok)throw"failed to load wasm binary file at '"+ye+"'";return he.arrayBuffer()}).catch(function(){return Me(ye)}):Promise.resolve().then(function(){return Me(ye)})}function yt(){var he={a:Ar};function ve(Ft,R){var y=Ft.exports;c.asm=y,Gt=c.asm.s,Zn(Gt.buffer),mt=c.asm.y,pi(c.asm.t),sr()}Dn();function Be(Ft){ve(Ft.instance)}function We(Ft){return De().then(function(R){var y=WebAssembly.instantiate(R,he);return y}).then(Ft,function(R){pn("failed to asynchronously prepare wasm: "+R),Dt(R)})}function st(){return!Ot&&typeof WebAssembly.instantiateStreaming=="function"&&!ne(ye)&&typeof fetch=="function"?fetch(ye,{credentials:"same-origin"}).then(function(Ft){var R=WebAssembly.instantiateStreaming(Ft,he);return R.then(Be,function(y){return pn("wasm streaming compile failed: "+y),pn("falling back to ArrayBuffer instantiation"),We(Be)})}):We(Be)}if(c.instantiateWasm)try{var bt=c.instantiateWasm(he,ve);return bt}catch(Ft){return pn("Module.instantiateWasm callback failed with error: "+Ft),!1}return st().catch(et),{}}function Xr(he){for(;he.length>0;){var ve=he.shift();if(typeof ve=="function"){ve(c);continue}var Be=ve.func;typeof Be=="number"?ve.arg===void 0?mt.get(Be)():mt.get(Be)(ve.arg):Be(ve.arg===void 0?null:ve.arg)}}function wn(he,ve){}function Nn(he,ve){return void 0}function dr(he,ve,Be,We,st){}function Wn(he){switch(he){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+he)}}function ri(){for(var he=new Array(256),ve=0;ve<256;++ve)he[ve]=String.fromCharCode(ve);cr=he}var cr=void 0;function Br(he){for(var ve="",Be=he;mn[Be];)ve+=cr[mn[Be++]];return ve}var Rr={},br={},hr={},lr=48,Vt=57;function ln(he){if(he===void 0)return"_unknown";he=he.replace(/[^a-zA-Z0-9_]/g,"$");var ve=he.charCodeAt(0);return ve>=lr&&ve<=Vt?"_"+he:he}function Un(he,ve){return he=ln(he),new Function("body","return function "+he+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(ve)}function _n(he,ve){var Be=Un(ve,function(We){this.name=ve,this.message=We;var st=new Error(We).stack;st!==void 0&&(this.stack=this.toString()+`
`+st.replace(/^Error(:[^\n]*)?\n/,""))});return Be.prototype=Object.create(he.prototype),Be.prototype.constructor=Be,Be.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Be}var It=void 0;function Jn(he){throw new It(he)}var vr=void 0;function Sn(he){throw new vr(he)}function qn(he,ve,Be){he.forEach(function(R){hr[R]=ve});function We(R){var y=Be(R);y.length!==he.length&&Sn("Mismatched type converter count");for(var m=0;m<he.length;++m)nr(he[m],y[m])}var st=new Array(ve.length),bt=[],Ft=0;ve.forEach(function(R,y){br.hasOwnProperty(R)?st[y]=br[R]:(bt.push(R),Rr.hasOwnProperty(R)||(Rr[R]=[]),Rr[R].push(function(){st[y]=br[R],++Ft,Ft===bt.length&&We(st)}))}),bt.length===0&&We(st)}function nr(he,ve,Be){if(Be=Be||{},!("argPackAdvance"in ve))throw new TypeError("registerType registeredInstance requires argPackAdvance");var We=ve.name;if(he||Jn('type "'+We+'" must have a positive integer typeid pointer'),br.hasOwnProperty(he)){if(Be.ignoreDuplicateRegistrations)return;Jn("Cannot register type '"+We+"' twice")}if(br[he]=ve,delete hr[he],Rr.hasOwnProperty(he)){var st=Rr[he];delete Rr[he],st.forEach(function(bt){bt()})}}function Bt(he,ve,Be,We,st){var bt=Wn(Be);ve=Br(ve),nr(he,{name:ve,fromWireType:function(Ft){return!!Ft},toWireType:function(Ft,R){return R?We:st},argPackAdvance:8,readValueFromPointer:function(Ft){var R;if(Be===1)R=hi;else if(Be===2)R=Ln;else if(Be===4)R=cn;else throw new TypeError("Unknown boolean type size: "+ve);return this.fromWireType(R[Ft>>bt])},destructorFunction:null})}var Vn=[],gn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Rn(he){he>4&&--gn[he].refcount===0&&(gn[he]=void 0,Vn.push(he))}function Gn(){for(var he=0,ve=5;ve<gn.length;++ve)gn[ve]!==void 0&&++he;return he}function rr(){for(var he=5;he<gn.length;++he)if(gn[he]!==void 0)return gn[he];return null}function xr(){c.count_emval_handles=Gn,c.get_first_emval=rr}function fn(he){switch(he){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var ve=Vn.length?Vn.pop():gn.length;return gn[ve]={refcount:1,value:he},ve}}}function Xn(he){return this.fromWireType(Wt[he>>2])}function kn(he,ve){ve=Br(ve),nr(he,{name:ve,fromWireType:function(Be){var We=gn[Be].value;return Rn(Be),We},toWireType:function(Be,We){return fn(We)},argPackAdvance:8,readValueFromPointer:Xn,destructorFunction:null})}function Pt(he){if(he===null)return"null";var ve=typeof he;return ve==="object"||ve==="array"||ve==="function"?he.toString():""+he}function ar(he,ve){switch(ve){case 2:return function(Be){return this.fromWireType(Ke[Be>>2])};case 3:return function(Be){return this.fromWireType(pt[Be>>3])};default:throw new TypeError("Unknown float type: "+he)}}function Lr(he,ve,Be){var We=Wn(Be);ve=Br(ve),nr(he,{name:ve,fromWireType:function(st){return st},toWireType:function(st,bt){if(typeof bt!="number"&&typeof bt!="boolean")throw new TypeError('Cannot convert "'+Pt(bt)+'" to '+this.name);return bt},argPackAdvance:8,readValueFromPointer:ar(ve,We),destructorFunction:null})}function An(he,ve){if(!(he instanceof Function))throw new TypeError("new_ called with constructor type "+typeof he+" which is not a function");var Be=Un(he.name||"unknownFunctionName",function(){});Be.prototype=he.prototype;var We=new Be,st=he.apply(We,ve);return st instanceof Object?st:We}function Er(he){for(;he.length;){var ve=he.pop(),Be=he.pop();Be(ve)}}function jn(he,ve,Be,We,st){var bt=ve.length;bt<2&&Jn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Ft=ve[1]!==null&&Be!==null,R=!1,y=1;y<ve.length;++y)if(ve[y]!==null&&ve[y].destructorFunction===void 0){R=!0;break}for(var m=ve[0].name!=="void",C="",h="",y=0;y<bt-2;++y)C+=(y!==0?", ":"")+"arg"+y,h+=(y!==0?", ":"")+"arg"+y+"Wired";var g="return function "+ln(he)+"("+C+`) {
if (arguments.length !== `+(bt-2)+`) {
throwBindingError('function `+he+" called with ' + arguments.length + ' arguments, expected "+(bt-2)+` args!');
}
`;R&&(g+=`var destructors = [];
`);var x=R?"destructors":"null",U=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],z=[Jn,We,st,Er,ve[0],ve[1]];Ft&&(g+="var thisWired = classParam.toWireType("+x+`, this);
`);for(var y=0;y<bt-2;++y)g+="var arg"+y+"Wired = argType"+y+".toWireType("+x+", arg"+y+"); // "+ve[y+2].name+`
`,U.push("argType"+y),z.push(ve[y+2]);if(Ft&&(h="thisWired"+(h.length>0?", ":"")+h),g+=(m?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+`);
`,R)g+=`runDestructors(destructors);
`;else for(var y=Ft?1:2;y<ve.length;++y){var B=y===1?"thisWired":"arg"+(y-2)+"Wired";ve[y].destructorFunction!==null&&(g+=B+"_dtor("+B+"); // "+ve[y].name+`
`,U.push(B+"_dtor"),z.push(ve[y].destructorFunction))}m&&(g+=`var ret = retType.fromWireType(rv);
return ret;
`),g+=`}
`,U.push(g);var N=An(Function,U).apply(null,z);return N}function Or(he,ve,Be){if(he[ve].overloadTable===void 0){var We=he[ve];he[ve]=function(){return he[ve].overloadTable.hasOwnProperty(arguments.length)||Jn("Function '"+Be+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+he[ve].overloadTable+")!"),he[ve].overloadTable[arguments.length].apply(this,arguments)},he[ve].overloadTable=[],he[ve].overloadTable[We.argCount]=We}}function mi(he,ve,Be){c.hasOwnProperty(he)?((Be===void 0||c[he].overloadTable!==void 0&&c[he].overloadTable[Be]!==void 0)&&Jn("Cannot register public name '"+he+"' twice"),Or(c,he,he),c.hasOwnProperty(Be)&&Jn("Cannot register multiple overloads of a function with the same number of arguments ("+Be+")!"),c[he].overloadTable[Be]=ve):(c[he]=ve,Be!==void 0&&(c[he].numArguments=Be))}function Nr(he,ve){for(var Be=[],We=0;We<he;We++)Be.push(cn[(ve>>2)+We]);return Be}function Mr(he,ve,Be){c.hasOwnProperty(he)||Sn("Replacing nonexistant public symbol"),c[he].overloadTable!==void 0&&Be!==void 0?c[he].overloadTable[Be]=ve:(c[he]=ve,c[he].argCount=Be)}function ui(he,ve,Be){var We=c["dynCall_"+he];return Be&&Be.length?We.apply(null,[ve].concat(Be)):We.call(null,ve)}function Oi(he,ve,Be){return he.includes("j")?ui(he,ve,Be):mt.get(ve).apply(null,Be)}function ci(he,ve){var Be=[];return function(){Be.length=arguments.length;for(var We=0;We<arguments.length;We++)Be[We]=arguments[We];return Oi(he,ve,Be)}}function Fi(he,ve){he=Br(he);function Be(){return he.includes("j")?ci(he,ve):mt.get(ve)}var We=Be();return typeof We!="function"&&Jn("unknown function pointer with signature "+he+": "+ve),We}var Ci=void 0;function Ni(he){var ve=on(he),Be=Br(ve);return nn(ve),Be}function Si(he,ve){var Be=[],We={};function st(bt){if(!We[bt]&&!br[bt]){if(hr[bt]){hr[bt].forEach(st);return}Be.push(bt),We[bt]=!0}}throw ve.forEach(st),new Ci(he+": "+Be.map(Ni).join([", "]))}function b(he,ve,Be,We,st,bt){var Ft=Nr(ve,Be);he=Br(he),st=Fi(We,st),mi(he,function(){Si("Cannot call "+he+" due to unbound types",Ft)},ve-1),qn([],Ft,function(R){var y=[R[0],null].concat(R.slice(1));return Mr(he,jn(he,y,null,st,bt),ve-1),[]})}function H(he,ve,Be){switch(ve){case 0:return Be?function(st){return hi[st]}:function(st){return mn[st]};case 1:return Be?function(st){return Ln[st>>1]}:function(st){return _t[st>>1]};case 2:return Be?function(st){return cn[st>>2]}:function(st){return Wt[st>>2]};default:throw new TypeError("Unknown integer type: "+he)}}function ie(he,ve,Be,We,st){ve=Br(ve),st===-1&&(st=4294967295);var bt=Wn(Be),Ft=function(m){return m};if(We===0){var R=32-8*Be;Ft=function(m){return m<<R>>>R}}var y=ve.includes("unsigned");nr(he,{name:ve,fromWireType:Ft,toWireType:function(m,C){if(typeof C!="number"&&typeof C!="boolean")throw new TypeError('Cannot convert "'+Pt(C)+'" to '+this.name);if(C<We||C>st)throw new TypeError('Passing a number "'+Pt(C)+'" from JS side to C/C++ side to an argument of type "'+ve+'", which is outside the valid range ['+We+", "+st+"]!");return y?C>>>0:C|0},argPackAdvance:8,readValueFromPointer:H(ve,bt,We!==0),destructorFunction:null})}function D(he,ve,Be){var We=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],st=We[ve];function bt(Ft){Ft=Ft>>2;var R=Wt,y=R[Ft],m=R[Ft+1];return new st(di,m,y)}Be=Br(Be),nr(he,{name:Be,fromWireType:bt,argPackAdvance:8,readValueFromPointer:bt},{ignoreDuplicateRegistrations:!0})}function J(he,ve){ve=Br(ve);var Be=ve==="std::string";nr(he,{name:ve,fromWireType:function(We){var st=Wt[We>>2],bt;if(Be)for(var Ft=We+4,R=0;R<=st;++R){var y=We+4+R;if(R==st||mn[y]==0){var m=y-Ft,C=Tn(Ft,m);bt===void 0?bt=C:(bt+=String.fromCharCode(0),bt+=C),Ft=y+1}}else{for(var h=new Array(st),R=0;R<st;++R)h[R]=String.fromCharCode(mn[We+4+R]);bt=h.join("")}return nn(We),bt},toWireType:function(We,st){st instanceof ArrayBuffer&&(st=new Uint8Array(st));var bt,Ft=typeof st=="string";Ft||st instanceof Uint8Array||st instanceof Uint8ClampedArray||st instanceof Int8Array||Jn("Cannot pass non-string to std::string"),Be&&Ft?bt=function(){return kr(st)}:bt=function(){return st.length};var R=bt(),y=Hn(4+R+1);if(Wt[y>>2]=R,Be&&Ft)Sr(st,y+4,R+1);else if(Ft)for(var m=0;m<R;++m){var C=st.charCodeAt(m);C>255&&(nn(y),Jn("String has UTF-16 code units that do not fit in 8 bits")),mn[y+4+m]=C}else for(var m=0;m<R;++m)mn[y+4+m]=st[m];return We!==null&&We.push(nn,y),y},argPackAdvance:8,readValueFromPointer:Xn,destructorFunction:function(We){nn(We)}})}function ue(he,ve,Be){Be=Br(Be);var We,st,bt,Ft,R;ve===2?(We=ni,st=Di,Ft=Ti,bt=function(){return _t},R=1):ve===4&&(We=Ri,st=Ii,Ft=Pi,bt=function(){return Wt},R=2),nr(he,{name:Be,fromWireType:function(y){for(var m=Wt[y>>2],C=bt(),h,g=y+4,x=0;x<=m;++x){var U=y+4+x*ve;if(x==m||C[U>>R]==0){var z=U-g,B=We(g,z);h===void 0?h=B:(h+=String.fromCharCode(0),h+=B),g=U+ve}}return nn(y),h},toWireType:function(y,m){typeof m!="string"&&Jn("Cannot pass non-string to C++ string type "+Be);var C=Ft(m),h=Hn(4+C+ve);return Wt[h>>2]=C>>R,st(m,h+4,C+ve),y!==null&&y.push(nn,h),h},argPackAdvance:8,readValueFromPointer:Xn,destructorFunction:function(y){nn(y)}})}function be(he,ve){ve=Br(ve),nr(he,{isVoid:!0,name:ve,argPackAdvance:0,fromWireType:function(){},toWireType:function(Be,We){}})}var Re={};function Ze(he){var ve=Re[he];return ve===void 0?Br(he):ve}function Nt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function qt(he){return he===0?fn(Nt()):(he=Ze(he),fn(Nt()[he]))}function $t(he){he>4&&(gn[he].refcount+=1)}function At(he,ve){var Be=br[he];return Be===void 0&&Jn(ve+" has unknown type "+Ni(he)),Be}function Ht(he){for(var ve="",Be=0;Be<he;++Be)ve+=(Be!==0?", ":"")+"arg"+Be;for(var We="return function emval_allocator_"+he+`(constructor, argTypes, args) {
`,Be=0;Be<he;++Be)We+="var argType"+Be+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+Be+'], "parameter '+Be+`");
var arg`+Be+" = argType"+Be+`.readValueFromPointer(args);
args += argType`+Be+`['argPackAdvance'];
`;return We+="var obj = new constructor("+ve+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",We)(At,c,fn)}var Yn={};function Tr(he){return he||Jn("Cannot use deleted val. handle = "+he),gn[he].value}function Ur(he,ve,Be,We){he=Tr(he);var st=Yn[ve];return st||(st=Ht(ve),Yn[ve]=st),st(he,Be,We)}function Qn(){Dt()}function tr(he,ve,Be){mn.copyWithin(he,ve,ve+Be)}function zn(he){try{return Gt.grow(he-di.byteLength+65535>>>16),Zn(Gt.buffer),1}catch{}}function Vr(he){var ve=mn.length;he=he>>>0;var Be=2147483648;if(he>Be)return!1;for(var We=1;We<=4;We*=2){var st=ve*(1+.2/We);st=Math.min(st,he+100663296);var bt=Math.min(Be,fi(Math.max(he,st),65536)),Ft=zn(bt);if(Ft)return!0}return!1}ri(),It=c.BindingError=_n(Error,"BindingError"),vr=c.InternalError=_n(Error,"InternalError"),xr(),Ci=c.UnboundTypeError=_n(Error,"UnboundTypeError");var Ar={e:Nn,p:dr,n:Bt,r:kn,m:Lr,i:b,b:ie,a:D,h:J,f:ue,o:be,c:Rn,d:qt,j:$t,k:Ur,l:Qn,q:tr,g:Vr};yt(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.t).apply(null,arguments)};var Hn=c._malloc=function(){return(Hn=c._malloc=c.asm.u).apply(null,arguments)},nn=c._free=function(){return(nn=c._free=c.asm.v).apply(null,arguments)},on=c.___getTypeName=function(){return(on=c.___getTypeName=c.asm.w).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.x).apply(null,arguments)};var Kn;$r=function he(){Kn||pr(),Kn||($r=he)};function pr(he){if(Fr>0||(Wr(),Fr>0))return;function ve(){Kn||(Kn=!0,c.calledRun=!0,!rn&&(On(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Pr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),ve()},1)):ve()}if(c.run=pr,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return pr(),c.ready}}(),v=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/webp_node_dec-dde61ffa.wasm").href:new URL("webp_node_dec-dde61ffa.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,T=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(se,F){Xe=se,et=F});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(se){return c.locateFile?c.locateFile(se,Mt):Mt+se}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(F,W){return tn||(tn=gi),vn||(vn=gi),F=vn.normalize(F),tn.readFileSync(F,W?null:"utf8")},hn=function(F){var W=Jt(F,!0);return W.buffer||(W=new Uint8Array(W)),Sr(W.buffer),W},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt=0,rn=function(se){Gt=se},fr=function(){return Gt},Ir;c.wasmBinary&&(Ir=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&De("no native wasm support detected");var Tn,Jr=!1;function Sr(se,F){se||De("Assertion failed: "+F)}var kr=new TextDecoder("utf8");function si(se,F,W){for(var w=F+W,M=F;se[M]&&!(M>=w);)++M;return kr.decode(se.subarray?se.subarray(F,M):new Uint8Array(se.slice(F,M)))}function ni(se,F){if(!se)return"";for(var W=se+F,w=se;!(w>=W)&&Ke[w];)++w;return kr.decode(Ke.subarray(se,w))}function Di(se,F,W,w){if(!(w>0))return 0;for(var M=W,Y=W+w-1,ae=0;ae<se.length;++ae){var pe=se.charCodeAt(ae);if(pe>=55296&&pe<=57343){var _e=se.charCodeAt(++ae);pe=65536+((pe&1023)<<10)|_e&1023}if(pe<=127){if(W>=Y)break;F[W++]=pe}else if(pe<=2047){if(W+1>=Y)break;F[W++]=192|pe>>6,F[W++]=128|pe&63}else if(pe<=65535){if(W+2>=Y)break;F[W++]=224|pe>>12,F[W++]=128|pe>>6&63,F[W++]=128|pe&63}else{if(W+3>=Y)break;F[W++]=240|pe>>18,F[W++]=128|pe>>12&63,F[W++]=128|pe>>6&63,F[W++]=128|pe&63}}return F[W]=0,W-M}function Ti(se,F,W){return Di(se,Ke,F,W)}function Ri(se){for(var F=0,W=0;W<se.length;++W){var w=se.charCodeAt(W);w>=55296&&w<=57343&&(w=65536+((w&1023)<<10)|se.charCodeAt(++W)&1023),w<=127?++F:w<=2047?F+=2:w<=65535?F+=3:F+=4}return F}var Ii=new TextDecoder("utf-16le");function Pi(se,F){for(var W=se,w=W>>1,M=w+F/2;!(w>=M)&&Zn[w];)++w;return W=w<<1,Ii.decode(Ke.subarray(se,W))}function fi(se,F,W){if(W===void 0&&(W=2147483647),W<2)return 0;W-=2;for(var w=F,M=W<se.length*2?W/2:se.length,Y=0;Y<M;++Y){var ae=se.charCodeAt(Y);pt[F>>1]=ae,F+=2}return pt[F>>1]=0,F-w}function di(se){return se.length*2}function hi(se,F){for(var W=0,w="";!(W>=F/4);){var M=mt[se+W*4>>2];if(M==0)break;if(++W,M>=65536){var Y=M-65536;w+=String.fromCharCode(55296|Y>>10,56320|Y&1023)}else w+=String.fromCharCode(M)}return w}function mn(se,F,W){if(W===void 0&&(W=2147483647),W<4)return 0;for(var w=F,M=w+W-4,Y=0;Y<se.length;++Y){var ae=se.charCodeAt(Y);if(ae>=55296&&ae<=57343){var pe=se.charCodeAt(++Y);ae=65536+((ae&1023)<<10)|pe&1023}if(mt[F>>2]=ae,F+=4,F+4>M)break}return mt[F>>2]=0,F-w}function Ln(se){for(var F=0,W=0;W<se.length;++W){var w=se.charCodeAt(W);w>=55296&&w<=57343&&++W,F+=4}return F}function _t(se,F){return se%F>0&&(se+=F-se%F),se}var cn,Wt,Ke,pt,Zn,mt,Rt,an,Hr;function Wr(se){cn=se,c.HEAP8=Wt=new Int8Array(se),c.HEAP16=pt=new Int16Array(se),c.HEAP32=mt=new Int32Array(se),c.HEAPU8=Ke=new Uint8Array(se),c.HEAPU16=Zn=new Uint16Array(se),c.HEAPU32=Rt=new Uint32Array(se),c.HEAPF32=an=new Float32Array(se),c.HEAPF64=Hr=new Float64Array(se)}c.INITIAL_MEMORY;var On,Pr=[],ai=[],pi=[];function wi(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Dn(c.preRun.shift());ri(Pr)}function Fr(){ri(ai)}function $r(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Dt(c.postRun.shift());ri(pi)}function Dn(se){Pr.unshift(se)}function sr(se){ai.unshift(se)}function Dt(se){pi.unshift(se)}var Q=0,ne=null;function ye(se){Q++,c.monitorRunDependencies&&c.monitorRunDependencies(Q)}function Me(se){if(Q--,c.monitorRunDependencies&&c.monitorRunDependencies(Q),Q==0&&ne){var F=ne;ne=null,F()}}c.preloadedImages={},c.preloadedAudios={};function De(se){c.onAbort&&c.onAbort(se),se+="",Ot(se),Jr=!0,se="abort("+se+"). Build with -s ASSERTIONS=1 for more info.";var F=new WebAssembly.RuntimeError(se);throw et(F),F}var yt="data:application/octet-stream;base64,";function Xr(se){return se.startsWith(yt)}if(c.locateFile){var wn="avif_node_enc.wasm";Xr(wn)||(wn=xt(wn))}else var wn=new URL("avif_node_enc.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Nn(se){try{if(se==wn&&Ir)return new Uint8Array(Ir);if(hn)return hn(se);throw"both async and sync fetching of the wasm failed"}catch(F){De(F)}}function dr(){return!Ir&&Kt&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(se){if(!se.ok)throw"failed to load wasm binary file at '"+wn+"'";return se.arrayBuffer()}).catch(function(){return Nn(wn)}):Promise.resolve().then(function(){return Nn(wn)})}function Wn(){var se={a:B};function F(ae,pe){var _e=ae.exports;c.asm=_e,Tn=c.asm.P,Wr(Tn.buffer),On=c.asm.Y,sr(c.asm.Q),Me()}ye();function W(ae){F(ae.instance)}function w(ae){return dr().then(function(pe){var _e=WebAssembly.instantiate(pe,se);return _e}).then(ae,function(pe){Ot("failed to asynchronously prepare wasm: "+pe),De(pe)})}function M(){return!Ir&&typeof WebAssembly.instantiateStreaming=="function"&&!Xr(wn)&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(ae){var pe=WebAssembly.instantiateStreaming(ae,se);return pe.then(W,function(_e){return Ot("wasm streaming compile failed: "+_e),Ot("falling back to ArrayBuffer instantiation"),w(W)})}):w(W)}if(c.instantiateWasm)try{var Y=c.instantiateWasm(se,F);return Y}catch(ae){return Ot("Module.instantiateWasm callback failed with error: "+ae),!1}return M().catch(et),{}}function ri(se){for(;se.length>0;){var F=se.shift();if(typeof F=="function"){F(c);continue}var W=F.func;typeof W=="number"?F.arg===void 0?On.get(W)():On.get(W)(F.arg):W(F.arg===void 0?null:F.arg)}}function cr(se,F){}function Br(se,F){return void 0}var Rr={mappings:{},buffers:[null,[],[]],printChar:function(se,F){var W=Rr.buffers[se];F===0||F===10?((se===1?pn:Ot)(si(W,0)),W.length=0):W.push(F)},varargs:void 0,get:function(){Rr.varargs+=4;var se=mt[Rr.varargs-4>>2];return se},getStr:function(se){var F=ni(se);return F},get64:function(se,F){return se}};function br(se,F,W){return Rr.varargs=W,0}function hr(se,F,W){return Rr.varargs=W,0}function lr(se,F,W){Rr.varargs=W}var Vt={};function ln(se){for(;se.length;){var F=se.pop(),W=se.pop();W(F)}}function Un(se){return this.fromWireType(Rt[se>>2])}var _n={},It={},Jn={},vr=48,Sn=57;function qn(se){if(se===void 0)return"_unknown";se=se.replace(/[^a-zA-Z0-9_]/g,"$");var F=se.charCodeAt(0);return F>=vr&&F<=Sn?"_"+se:se}function nr(se,F){return se=qn(se),new Function("body","return function "+se+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(F)}function Bt(se,F){var W=nr(F,function(w){this.name=F,this.message=w;var M=new Error(w).stack;M!==void 0&&(this.stack=this.toString()+`
`+M.replace(/^Error(:[^\n]*)?\n/,""))});return W.prototype=Object.create(se.prototype),W.prototype.constructor=W,W.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},W}var Vn=void 0;function gn(se){throw new Vn(se)}function Rn(se,F,W){se.forEach(function(pe){Jn[pe]=F});function w(pe){var _e=W(pe);_e.length!==se.length&&gn("Mismatched type converter count");for(var xe=0;xe<se.length;++xe)Lr(se[xe],_e[xe])}var M=new Array(F.length),Y=[],ae=0;F.forEach(function(pe,_e){It.hasOwnProperty(pe)?M[_e]=It[pe]:(Y.push(pe),_n.hasOwnProperty(pe)||(_n[pe]=[]),_n[pe].push(function(){M[_e]=It[pe],++ae,ae===Y.length&&w(M)}))}),Y.length===0&&w(M)}function Gn(se){var F=Vt[se];delete Vt[se];var W=F.rawConstructor,w=F.rawDestructor,M=F.fields,Y=M.map(function(ae){return ae.getterReturnType}).concat(M.map(function(ae){return ae.setterArgumentType}));Rn([se],Y,function(ae){var pe={};return M.forEach(function(_e,xe){var Le=_e.fieldName,Ye=ae[xe],gt=_e.getter,kt=_e.getterContext,$n=ae[xe+M.length],wr=_e.setter,Zr=_e.setterContext;pe[Le]={read:function(Li){return Ye.fromWireType(gt(kt,Li))},write:function(Li,eo){var Ct=[];wr(Zr,Li,$n.toWireType(Ct,eo)),ln(Ct)}}}),[{name:F.name,fromWireType:function(_e){var xe={};for(var Le in pe)xe[Le]=pe[Le].read(_e);return w(_e),xe},toWireType:function(_e,xe){for(var Le in pe)if(!(Le in xe))throw new TypeError('Missing field:  "'+Le+'"');var Ye=W();for(Le in pe)pe[Le].write(Ye,xe[Le]);return _e!==null&&_e.push(w,Ye),Ye},argPackAdvance:8,readValueFromPointer:Un,destructorFunction:w}]})}function rr(se,F,W,w,M){}function xr(se){switch(se){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+se)}}function fn(){for(var se=new Array(256),F=0;F<256;++F)se[F]=String.fromCharCode(F);Xn=se}var Xn=void 0;function kn(se){for(var F="",W=se;Ke[W];)F+=Xn[Ke[W++]];return F}var Pt=void 0;function ar(se){throw new Pt(se)}function Lr(se,F,W){if(W=W||{},!("argPackAdvance"in F))throw new TypeError("registerType registeredInstance requires argPackAdvance");var w=F.name;if(se||ar('type "'+w+'" must have a positive integer typeid pointer'),It.hasOwnProperty(se)){if(W.ignoreDuplicateRegistrations)return;ar("Cannot register type '"+w+"' twice")}if(It[se]=F,delete Jn[se],_n.hasOwnProperty(se)){var M=_n[se];delete _n[se],M.forEach(function(Y){Y()})}}function An(se,F,W,w,M){var Y=xr(W);F=kn(F),Lr(se,{name:F,fromWireType:function(ae){return!!ae},toWireType:function(ae,pe){return pe?w:M},argPackAdvance:8,readValueFromPointer:function(ae){var pe;if(W===1)pe=Wt;else if(W===2)pe=pt;else if(W===4)pe=mt;else throw new TypeError("Unknown boolean type size: "+F);return this.fromWireType(pe[ae>>Y])},destructorFunction:null})}var Er=[],jn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Or(se){se>4&&--jn[se].refcount===0&&(jn[se]=void 0,Er.push(se))}function mi(){for(var se=0,F=5;F<jn.length;++F)jn[F]!==void 0&&++se;return se}function Nr(){for(var se=5;se<jn.length;++se)if(jn[se]!==void 0)return jn[se];return null}function Mr(){c.count_emval_handles=mi,c.get_first_emval=Nr}function ui(se){switch(se){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var F=Er.length?Er.pop():jn.length;return jn[F]={refcount:1,value:se},F}}}function Oi(se,F){F=kn(F),Lr(se,{name:F,fromWireType:function(W){var w=jn[W].value;return Or(W),w},toWireType:function(W,w){return ui(w)},argPackAdvance:8,readValueFromPointer:Un,destructorFunction:null})}function ci(se){if(se===null)return"null";var F=typeof se;return F==="object"||F==="array"||F==="function"?se.toString():""+se}function Fi(se,F){switch(F){case 2:return function(W){return this.fromWireType(an[W>>2])};case 3:return function(W){return this.fromWireType(Hr[W>>3])};default:throw new TypeError("Unknown float type: "+se)}}function Ci(se,F,W){var w=xr(W);F=kn(F),Lr(se,{name:F,fromWireType:function(M){return M},toWireType:function(M,Y){if(typeof Y!="number"&&typeof Y!="boolean")throw new TypeError('Cannot convert "'+ci(Y)+'" to '+this.name);return Y},argPackAdvance:8,readValueFromPointer:Fi(F,w),destructorFunction:null})}function Ni(se,F){if(!(se instanceof Function))throw new TypeError("new_ called with constructor type "+typeof se+" which is not a function");var W=nr(se.name||"unknownFunctionName",function(){});W.prototype=se.prototype;var w=new W,M=se.apply(w,F);return M instanceof Object?M:w}function Si(se,F,W,w,M){var Y=F.length;Y<2&&ar("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var ae=F[1]!==null&&W!==null,pe=!1,_e=1;_e<F.length;++_e)if(F[_e]!==null&&F[_e].destructorFunction===void 0){pe=!0;break}for(var xe=F[0].name!=="void",Le="",Ye="",_e=0;_e<Y-2;++_e)Le+=(_e!==0?", ":"")+"arg"+_e,Ye+=(_e!==0?", ":"")+"arg"+_e+"Wired";var gt="return function "+qn(se)+"("+Le+`) {
if (arguments.length !== `+(Y-2)+`) {
throwBindingError('function `+se+" called with ' + arguments.length + ' arguments, expected "+(Y-2)+` args!');
}
`;pe&&(gt+=`var destructors = [];
`);var kt=pe?"destructors":"null",$n=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],wr=[ar,w,M,ln,F[0],F[1]];ae&&(gt+="var thisWired = classParam.toWireType("+kt+`, this);
`);for(var _e=0;_e<Y-2;++_e)gt+="var arg"+_e+"Wired = argType"+_e+".toWireType("+kt+", arg"+_e+"); // "+F[_e+2].name+`
`,$n.push("argType"+_e),wr.push(F[_e+2]);if(ae&&(Ye="thisWired"+(Ye.length>0?", ":"")+Ye),gt+=(xe?"var rv = ":"")+"invoker(fn"+(Ye.length>0?", ":"")+Ye+`);
`,pe)gt+=`runDestructors(destructors);
`;else for(var _e=ae?1:2;_e<F.length;++_e){var Zr=_e===1?"thisWired":"arg"+(_e-2)+"Wired";F[_e].destructorFunction!==null&&(gt+=Zr+"_dtor("+Zr+"); // "+F[_e].name+`
`,$n.push(Zr+"_dtor"),wr.push(F[_e].destructorFunction))}xe&&(gt+=`var ret = retType.fromWireType(rv);
return ret;
`),gt+=`}
`,$n.push(gt);var Li=Ni(Function,$n).apply(null,wr);return Li}function b(se,F,W){if(se[F].overloadTable===void 0){var w=se[F];se[F]=function(){return se[F].overloadTable.hasOwnProperty(arguments.length)||ar("Function '"+W+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+se[F].overloadTable+")!"),se[F].overloadTable[arguments.length].apply(this,arguments)},se[F].overloadTable=[],se[F].overloadTable[w.argCount]=w}}function H(se,F,W){c.hasOwnProperty(se)?((W===void 0||c[se].overloadTable!==void 0&&c[se].overloadTable[W]!==void 0)&&ar("Cannot register public name '"+se+"' twice"),b(c,se,se),c.hasOwnProperty(W)&&ar("Cannot register multiple overloads of a function with the same number of arguments ("+W+")!"),c[se].overloadTable[W]=F):(c[se]=F,W!==void 0&&(c[se].numArguments=W))}function ie(se,F){for(var W=[],w=0;w<se;w++)W.push(mt[(F>>2)+w]);return W}function D(se,F,W){c.hasOwnProperty(se)||gn("Replacing nonexistant public symbol"),c[se].overloadTable!==void 0&&W!==void 0?c[se].overloadTable[W]=F:(c[se]=F,c[se].argCount=W)}function J(se,F,W){var w=c["dynCall_"+se];return W&&W.length?w.apply(null,[F].concat(W)):w.call(null,F)}function ue(se,F,W){return se.includes("j")?J(se,F,W):On.get(F).apply(null,W)}function be(se,F){var W=[];return function(){W.length=arguments.length;for(var w=0;w<arguments.length;w++)W[w]=arguments[w];return ue(se,F,W)}}function Re(se,F){se=kn(se);function W(){return se.includes("j")?be(se,F):On.get(F)}var w=W();return typeof w!="function"&&ar("unknown function pointer with signature "+se+": "+F),w}var Ze=void 0;function Nt(se){var F=ce(se),W=kn(F);return $(F),W}function qt(se,F){var W=[],w={};function M(Y){if(!w[Y]&&!It[Y]){if(Jn[Y]){Jn[Y].forEach(M);return}W.push(Y),w[Y]=!0}}throw F.forEach(M),new Ze(se+": "+W.map(Nt).join([", "]))}function $t(se,F,W,w,M,Y){var ae=ie(F,W);se=kn(se),M=Re(w,M),H(se,function(){qt("Cannot call "+se+" due to unbound types",ae)},F-1),Rn([],ae,function(pe){var _e=[pe[0],null].concat(pe.slice(1));return D(se,Si(se,_e,null,M,Y),F-1),[]})}function At(se,F,W){switch(F){case 0:return W?function(M){return Wt[M]}:function(M){return Ke[M]};case 1:return W?function(M){return pt[M>>1]}:function(M){return Zn[M>>1]};case 2:return W?function(M){return mt[M>>2]}:function(M){return Rt[M>>2]};default:throw new TypeError("Unknown integer type: "+se)}}function Ht(se,F,W,w,M){F=kn(F),M===-1&&(M=4294967295);var Y=xr(W),ae=function(xe){return xe};if(w===0){var pe=32-8*W;ae=function(xe){return xe<<pe>>>pe}}var _e=F.includes("unsigned");Lr(se,{name:F,fromWireType:ae,toWireType:function(xe,Le){if(typeof Le!="number"&&typeof Le!="boolean")throw new TypeError('Cannot convert "'+ci(Le)+'" to '+this.name);if(Le<w||Le>M)throw new TypeError('Passing a number "'+ci(Le)+'" from JS side to C/C++ side to an argument of type "'+F+'", which is outside the valid range ['+w+", "+M+"]!");return _e?Le>>>0:Le|0},argPackAdvance:8,readValueFromPointer:At(F,Y,w!==0),destructorFunction:null})}function Yn(se,F,W){var w=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],M=w[F];function Y(ae){ae=ae>>2;var pe=Rt,_e=pe[ae],xe=pe[ae+1];return new M(cn,xe,_e)}W=kn(W),Lr(se,{name:W,fromWireType:Y,argPackAdvance:8,readValueFromPointer:Y},{ignoreDuplicateRegistrations:!0})}function Tr(se,F){F=kn(F);var W=F==="std::string";Lr(se,{name:F,fromWireType:function(w){var M=Rt[w>>2],Y;if(W)for(var ae=w+4,pe=0;pe<=M;++pe){var _e=w+4+pe;if(pe==M||Ke[_e]==0){var xe=_e-ae,Le=ni(ae,xe);Y===void 0?Y=Le:(Y+=String.fromCharCode(0),Y+=Le),ae=_e+1}}else{for(var Ye=new Array(M),pe=0;pe<M;++pe)Ye[pe]=String.fromCharCode(Ke[w+4+pe]);Y=Ye.join("")}return $(w),Y},toWireType:function(w,M){M instanceof ArrayBuffer&&(M=new Uint8Array(M));var Y,ae=typeof M=="string";ae||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int8Array||ar("Cannot pass non-string to std::string"),W&&ae?Y=function(){return Ri(M)}:Y=function(){return M.length};var pe=Y(),_e=N(4+pe+1);if(Rt[_e>>2]=pe,W&&ae)Ti(M,_e+4,pe+1);else if(ae)for(var xe=0;xe<pe;++xe){var Le=M.charCodeAt(xe);Le>255&&($(_e),ar("String has UTF-16 code units that do not fit in 8 bits")),Ke[_e+4+xe]=Le}else for(var xe=0;xe<pe;++xe)Ke[_e+4+xe]=M[xe];return w!==null&&w.push($,_e),_e},argPackAdvance:8,readValueFromPointer:Un,destructorFunction:function(w){$(w)}})}function Ur(se,F,W){W=kn(W);var w,M,Y,ae,pe;F===2?(w=Pi,M=fi,ae=di,Y=function(){return Zn},pe=1):F===4&&(w=hi,M=mn,ae=Ln,Y=function(){return Rt},pe=2),Lr(se,{name:W,fromWireType:function(_e){for(var xe=Rt[_e>>2],Le=Y(),Ye,gt=_e+4,kt=0;kt<=xe;++kt){var $n=_e+4+kt*F;if(kt==xe||Le[$n>>pe]==0){var wr=$n-gt,Zr=w(gt,wr);Ye===void 0?Ye=Zr:(Ye+=String.fromCharCode(0),Ye+=Zr),gt=$n+F}}return $(_e),Ye},toWireType:function(_e,xe){typeof xe!="string"&&ar("Cannot pass non-string to C++ string type "+W);var Le=ae(xe),Ye=N(4+Le+F);return Rt[Ye>>2]=Le>>pe,M(xe,Ye+4,Le+F),_e!==null&&_e.push($,Ye),Ye},argPackAdvance:8,readValueFromPointer:Un,destructorFunction:function(_e){$(_e)}})}function Qn(se,F,W,w,M,Y){Vt[se]={name:kn(F),rawConstructor:Re(W,w),rawDestructor:Re(M,Y),fields:[]}}function tr(se,F,W,w,M,Y,ae,pe,_e,xe){Vt[se].fields.push({fieldName:kn(F),getterReturnType:W,getter:Re(w,M),getterContext:Y,setterArgumentType:ae,setter:Re(pe,_e),setterContext:xe})}function zn(se,F){F=kn(F),Lr(se,{isVoid:!0,name:F,argPackAdvance:0,fromWireType:function(){},toWireType:function(W,w){}})}var Vr={};function Ar(se){var F=Vr[se];return F===void 0?kn(se):F}function Hn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function nn(se){return se===0?ui(Hn()):(se=Ar(se),ui(Hn()[se]))}function on(se){se>4&&(jn[se].refcount+=1)}function Kn(se,F){var W=It[se];return W===void 0&&ar(F+" has unknown type "+Nt(se)),W}function pr(se){for(var F="",W=0;W<se;++W)F+=(W!==0?", ":"")+"arg"+W;for(var w="return function emval_allocator_"+se+`(constructor, argTypes, args) {
`,W=0;W<se;++W)w+="var argType"+W+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+W+'], "parameter '+W+`");
var arg`+W+" = argType"+W+`.readValueFromPointer(args);
args += argType`+W+`['argPackAdvance'];
`;return w+="var obj = new constructor("+F+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",w)(Kn,c,ui)}var he={};function ve(se){return se||ar("Cannot use deleted val. handle = "+se),jn[se].value}function Be(se,F,W,w){se=ve(se);var M=he[F];return M||(M=pr(F),he[F]=M),M(se,W,w)}function We(){De()}function st(se,F){throw O(se,F||1),"longjmp"}function bt(se,F){return st(se,F)}function Ft(se,F,W){Ke.copyWithin(se,F,F+W)}function R(se){try{return Tn.grow(se-cn.byteLength+65535>>>16),Wr(Tn.buffer),1}catch{}}function y(se){var F=Ke.length;se=se>>>0;var W=2147483648;if(se>W)return!1;for(var w=1;w<=4;w*=2){var M=F*(1+.2/w);M=Math.min(M,se+100663296);var Y=Math.min(W,_t(Math.max(se,M),65536)),ae=R(Y);if(ae)return!0}return!1}function m(se){return 0}function C(se,F,W,w){var M=Rr.getStreamFromFD(se),Y=Rr.doReadv(M,F,W);return mt[w>>2]=Y,0}function h(se,F,W,w,M){}function g(se,F,W,w){for(var M=0,Y=0;Y<W;Y++){for(var ae=mt[F+Y*8>>2],pe=mt[F+(Y*8+4)>>2],_e=0;_e<pe;_e++)Rr.printChar(se,Ke[ae+_e]);M+=pe}return mt[w>>2]=M,0}function x(){return fr()}function U(se){rn(se)}function z(se){var F=Date.now()/1e3|0;return se&&(mt[se>>2]=F),F}Vn=c.InternalError=Bt(Error,"InternalError"),fn(),Pt=c.BindingError=Bt(Error,"BindingError"),Mr(),Ze=c.UnboundTypeError=Bt(Error,"UnboundTypeError");var B={O:Br,r:br,G:hr,H:lr,x:Gn,B:rr,K:An,J:Oi,t:Ci,w:$t,i:Ht,e:Yn,u:Tr,o:Ur,z:Qn,g:tr,L:zn,j:Or,N:nn,v:on,D:Be,f:We,d:bt,E:Ft,n:y,s:m,F:C,A:h,I:g,b:x,l:Ce,p:lt,q:te,C:le,y:tt,m:oe,h:X,c:G,k:$e,a:U,M:z};Wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.Q).apply(null,arguments)};var N=c._malloc=function(){return(N=c._malloc=c.asm.R).apply(null,arguments)},$=c._free=function(){return($=c._free=c.asm.S).apply(null,arguments)},ce=c.___getTypeName=function(){return(ce=c.___getTypeName=c.asm.T).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.U).apply(null,arguments)};var V=c.stackSave=function(){return(V=c.stackSave=c.asm.V).apply(null,arguments)},S=c.stackRestore=function(){return(S=c.stackRestore=c.asm.W).apply(null,arguments)},O=c._setThrew=function(){return(O=c._setThrew=c.asm.X).apply(null,arguments)};c.dynCall_jiiiiiiiii=function(){return(c.dynCall_jiiiiiiiii=c.asm.Z).apply(null,arguments)};var q=c.dynCall_ijiii=function(){return(q=c.dynCall_ijiii=c.asm._).apply(null,arguments)};c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.$).apply(null,arguments)},c.dynCall_jiiiiiiii=function(){return(c.dynCall_jiiiiiiii=c.asm.aa).apply(null,arguments)},c.dynCall_jiiiiii=function(){return(c.dynCall_jiiiiii=c.asm.ba).apply(null,arguments)},c.dynCall_jiiiii=function(){return(c.dynCall_jiiiii=c.asm.ca).apply(null,arguments)},c.dynCall_iiijii=function(){return(c.dynCall_iiijii=c.asm.da).apply(null,arguments)};function oe(se,F){var W=V();try{On.get(se)(F)}catch(w){if(S(W),w!==w+0&&w!=="longjmp")throw w;O(1,0)}}function G(se,F,W,w,M){var Y=V();try{On.get(se)(F,W,w,M)}catch(ae){if(S(Y),ae!==ae+0&&ae!=="longjmp")throw ae;O(1,0)}}function X(se,F,W){var w=V();try{On.get(se)(F,W)}catch(M){if(S(w),M!==M+0&&M!=="longjmp")throw M;O(1,0)}}function te(se,F,W,w,M,Y,ae,pe,_e,xe){var Le=V();try{return On.get(se)(F,W,w,M,Y,ae,pe,_e,xe)}catch(Ye){if(S(Le),Ye!==Ye+0&&Ye!=="longjmp")throw Ye;O(1,0)}}function le(se,F,W,w,M,Y,ae,pe,_e,xe,Le,Ye){var gt=V();try{return On.get(se)(F,W,w,M,Y,ae,pe,_e,xe,Le,Ye)}catch(kt){if(S(gt),kt!==kt+0&&kt!=="longjmp")throw kt;O(1,0)}}function Ce(se,F,W,w,M){var Y=V();try{return On.get(se)(F,W,w,M)}catch(ae){if(S(Y),ae!==ae+0&&ae!=="longjmp")throw ae;O(1,0)}}function $e(se,F,W,w,M,Y,ae,pe,_e,xe,Le){var Ye=V();try{On.get(se)(F,W,w,M,Y,ae,pe,_e,xe,Le)}catch(gt){if(S(Ye),gt!==gt+0&&gt!=="longjmp")throw gt;O(1,0)}}function lt(se,F,W,w,M,Y,ae,pe,_e){var xe=V();try{return On.get(se)(F,W,w,M,Y,ae,pe,_e)}catch(Le){if(S(xe),Le!==Le+0&&Le!=="longjmp")throw Le;O(1,0)}}function tt(se,F,W,w,M,Y){var ae=V();try{return q(se,F,W,w,M,Y)}catch(pe){if(S(ae),pe!==pe+0&&pe!=="longjmp")throw pe;O(1,0)}}var dt;ne=function se(){dt||zt(),dt||(ne=se)};function zt(se){if(Q>0||(wi(),Q>0))return;function F(){dt||(dt=!0,c.calledRun=!0,!Jr&&(Fr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),$r()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),F()},1)):F()}if(c.run=zt,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return zt(),c.ready}}(),P=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/avif_node_enc-53831d47.wasm").href:new URL("avif_node_enc-53831d47.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,I=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/avif_node_enc_mt.worker-be931951.js").href:new URL("avif_node_enc_mt.worker-be931951.js",document.currentScript&&document.currentScript.src||document.baseURI).href,k=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/avif_node_enc_mt-1018c40e.wasm").href:new URL("avif_node_enc_mt-1018c40e.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,K=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(V,S){Xe=V,et=S});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(V){return c.locateFile?c.locateFile(V,Mt):Mt+V}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(S,O){return tn||(tn=gi),vn||(vn=gi),S=vn.normalize(S),tn.readFileSync(S,O?null:"utf8")},hn=function(S){var O=Jt(S,!0);return O.buffer||(O=new Uint8Array(O)),Sr(O.buffer),O},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt=0,rn=function(V){Gt=V},fr=function(){return Gt},Ir;c.wasmBinary&&(Ir=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&De("no native wasm support detected");var Tn,Jr=!1;function Sr(V,S){V||De("Assertion failed: "+S)}var kr=new TextDecoder("utf8");function si(V,S,O){for(var q=S+O,oe=S;V[oe]&&!(oe>=q);)++oe;return kr.decode(V.subarray?V.subarray(S,oe):new Uint8Array(V.slice(S,oe)))}function ni(V,S){if(!V)return"";for(var O=V+S,q=V;!(q>=O)&&Ke[q];)++q;return kr.decode(Ke.subarray(V,q))}function Di(V,S,O,q){if(!(q>0))return 0;for(var oe=O,G=O+q-1,X=0;X<V.length;++X){var te=V.charCodeAt(X);if(te>=55296&&te<=57343){var le=V.charCodeAt(++X);te=65536+((te&1023)<<10)|le&1023}if(te<=127){if(O>=G)break;S[O++]=te}else if(te<=2047){if(O+1>=G)break;S[O++]=192|te>>6,S[O++]=128|te&63}else if(te<=65535){if(O+2>=G)break;S[O++]=224|te>>12,S[O++]=128|te>>6&63,S[O++]=128|te&63}else{if(O+3>=G)break;S[O++]=240|te>>18,S[O++]=128|te>>12&63,S[O++]=128|te>>6&63,S[O++]=128|te&63}}return S[O]=0,O-oe}function Ti(V,S,O){return Di(V,Ke,S,O)}function Ri(V){for(var S=0,O=0;O<V.length;++O){var q=V.charCodeAt(O);q>=55296&&q<=57343&&(q=65536+((q&1023)<<10)|V.charCodeAt(++O)&1023),q<=127?++S:q<=2047?S+=2:q<=65535?S+=3:S+=4}return S}var Ii=new TextDecoder("utf-16le");function Pi(V,S){for(var O=V,q=O>>1,oe=q+S/2;!(q>=oe)&&Zn[q];)++q;return O=q<<1,Ii.decode(Ke.subarray(V,O))}function fi(V,S,O){if(O===void 0&&(O=2147483647),O<2)return 0;O-=2;for(var q=S,oe=O<V.length*2?O/2:V.length,G=0;G<oe;++G){var X=V.charCodeAt(G);pt[S>>1]=X,S+=2}return pt[S>>1]=0,S-q}function di(V){return V.length*2}function hi(V,S){for(var O=0,q="";!(O>=S/4);){var oe=mt[V+O*4>>2];if(oe==0)break;if(++O,oe>=65536){var G=oe-65536;q+=String.fromCharCode(55296|G>>10,56320|G&1023)}else q+=String.fromCharCode(oe)}return q}function mn(V,S,O){if(O===void 0&&(O=2147483647),O<4)return 0;for(var q=S,oe=q+O-4,G=0;G<V.length;++G){var X=V.charCodeAt(G);if(X>=55296&&X<=57343){var te=V.charCodeAt(++G);X=65536+((X&1023)<<10)|te&1023}if(mt[S>>2]=X,S+=4,S+4>oe)break}return mt[S>>2]=0,S-q}function Ln(V){for(var S=0,O=0;O<V.length;++O){var q=V.charCodeAt(O);q>=55296&&q<=57343&&++O,S+=4}return S}function _t(V,S){return V%S>0&&(V+=S-V%S),V}var cn,Wt,Ke,pt,Zn,mt,Rt,an,Hr;function Wr(V){cn=V,c.HEAP8=Wt=new Int8Array(V),c.HEAP16=pt=new Int16Array(V),c.HEAP32=mt=new Int32Array(V),c.HEAPU8=Ke=new Uint8Array(V),c.HEAPU16=Zn=new Uint16Array(V),c.HEAPU32=Rt=new Uint32Array(V),c.HEAPF32=an=new Float32Array(V),c.HEAPF64=Hr=new Float64Array(V)}c.INITIAL_MEMORY;var On,Pr=[],ai=[],pi=[];function wi(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Dn(c.preRun.shift());ri(Pr)}function Fr(){ri(ai)}function $r(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Dt(c.postRun.shift());ri(pi)}function Dn(V){Pr.unshift(V)}function sr(V){ai.unshift(V)}function Dt(V){pi.unshift(V)}var Q=0,ne=null;function ye(V){Q++,c.monitorRunDependencies&&c.monitorRunDependencies(Q)}function Me(V){if(Q--,c.monitorRunDependencies&&c.monitorRunDependencies(Q),Q==0&&ne){var S=ne;ne=null,S()}}c.preloadedImages={},c.preloadedAudios={};function De(V){c.onAbort&&c.onAbort(V),V+="",Ot(V),Jr=!0,V="abort("+V+"). Build with -s ASSERTIONS=1 for more info.";var S=new WebAssembly.RuntimeError(V);throw et(S),S}var yt="data:application/octet-stream;base64,";function Xr(V){return V.startsWith(yt)}if(c.locateFile){var wn="avif_node_dec.wasm";Xr(wn)||(wn=xt(wn))}else var wn=new URL("avif_node_dec.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Nn(V){try{if(V==wn&&Ir)return new Uint8Array(Ir);if(hn)return hn(V);throw"both async and sync fetching of the wasm failed"}catch(S){De(S)}}function dr(){return!Ir&&Kt&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(V){if(!V.ok)throw"failed to load wasm binary file at '"+wn+"'";return V.arrayBuffer()}).catch(function(){return Nn(wn)}):Promise.resolve().then(function(){return Nn(wn)})}function Wn(){var V={a:R};function S(X,te){var le=X.exports;c.asm=le,Tn=c.asm.C,Wr(Tn.buffer),On=c.asm.L,sr(c.asm.D),Me()}ye();function O(X){S(X.instance)}function q(X){return dr().then(function(te){var le=WebAssembly.instantiate(te,V);return le}).then(X,function(te){Ot("failed to asynchronously prepare wasm: "+te),De(te)})}function oe(){return!Ir&&typeof WebAssembly.instantiateStreaming=="function"&&!Xr(wn)&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(X){var te=WebAssembly.instantiateStreaming(X,V);return te.then(O,function(le){return Ot("wasm streaming compile failed: "+le),Ot("falling back to ArrayBuffer instantiation"),q(O)})}):q(O)}if(c.instantiateWasm)try{var G=c.instantiateWasm(V,S);return G}catch(X){return Ot("Module.instantiateWasm callback failed with error: "+X),!1}return oe().catch(et),{}}function ri(V){for(;V.length>0;){var S=V.shift();if(typeof S=="function"){S(c);continue}var O=S.func;typeof O=="number"?S.arg===void 0?On.get(O)():On.get(O)(S.arg):O(S.arg===void 0?null:S.arg)}}function cr(V,S){}function Br(V,S){return void 0}function Rr(V,S,O,q,oe){}function br(V){switch(V){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+V)}}function hr(){for(var V=new Array(256),S=0;S<256;++S)V[S]=String.fromCharCode(S);lr=V}var lr=void 0;function Vt(V){for(var S="",O=V;Ke[O];)S+=lr[Ke[O++]];return S}var ln={},Un={},_n={},It=48,Jn=57;function vr(V){if(V===void 0)return"_unknown";V=V.replace(/[^a-zA-Z0-9_]/g,"$");var S=V.charCodeAt(0);return S>=It&&S<=Jn?"_"+V:V}function Sn(V,S){return V=vr(V),new Function("body","return function "+V+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(S)}function qn(V,S){var O=Sn(S,function(q){this.name=S,this.message=q;var oe=new Error(q).stack;oe!==void 0&&(this.stack=this.toString()+`
`+oe.replace(/^Error(:[^\n]*)?\n/,""))});return O.prototype=Object.create(V.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},O}var nr=void 0;function Bt(V){throw new nr(V)}var Vn=void 0;function gn(V){throw new Vn(V)}function Rn(V,S,O){V.forEach(function(te){_n[te]=S});function q(te){var le=O(te);le.length!==V.length&&gn("Mismatched type converter count");for(var Ce=0;Ce<V.length;++Ce)Gn(V[Ce],le[Ce])}var oe=new Array(S.length),G=[],X=0;S.forEach(function(te,le){Un.hasOwnProperty(te)?oe[le]=Un[te]:(G.push(te),ln.hasOwnProperty(te)||(ln[te]=[]),ln[te].push(function(){oe[le]=Un[te],++X,X===G.length&&q(oe)}))}),G.length===0&&q(oe)}function Gn(V,S,O){if(O=O||{},!("argPackAdvance"in S))throw new TypeError("registerType registeredInstance requires argPackAdvance");var q=S.name;if(V||Bt('type "'+q+'" must have a positive integer typeid pointer'),Un.hasOwnProperty(V)){if(O.ignoreDuplicateRegistrations)return;Bt("Cannot register type '"+q+"' twice")}if(Un[V]=S,delete _n[V],ln.hasOwnProperty(V)){var oe=ln[V];delete ln[V],oe.forEach(function(G){G()})}}function rr(V,S,O,q,oe){var G=br(O);S=Vt(S),Gn(V,{name:S,fromWireType:function(X){return!!X},toWireType:function(X,te){return te?q:oe},argPackAdvance:8,readValueFromPointer:function(X){var te;if(O===1)te=Wt;else if(O===2)te=pt;else if(O===4)te=mt;else throw new TypeError("Unknown boolean type size: "+S);return this.fromWireType(te[X>>G])},destructorFunction:null})}var xr=[],fn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Xn(V){V>4&&--fn[V].refcount===0&&(fn[V]=void 0,xr.push(V))}function kn(){for(var V=0,S=5;S<fn.length;++S)fn[S]!==void 0&&++V;return V}function Pt(){for(var V=5;V<fn.length;++V)if(fn[V]!==void 0)return fn[V];return null}function ar(){c.count_emval_handles=kn,c.get_first_emval=Pt}function Lr(V){switch(V){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var S=xr.length?xr.pop():fn.length;return fn[S]={refcount:1,value:V},S}}}function An(V){return this.fromWireType(Rt[V>>2])}function Er(V,S){S=Vt(S),Gn(V,{name:S,fromWireType:function(O){var q=fn[O].value;return Xn(O),q},toWireType:function(O,q){return Lr(q)},argPackAdvance:8,readValueFromPointer:An,destructorFunction:null})}function jn(V){if(V===null)return"null";var S=typeof V;return S==="object"||S==="array"||S==="function"?V.toString():""+V}function Or(V,S){switch(S){case 2:return function(O){return this.fromWireType(an[O>>2])};case 3:return function(O){return this.fromWireType(Hr[O>>3])};default:throw new TypeError("Unknown float type: "+V)}}function mi(V,S,O){var q=br(O);S=Vt(S),Gn(V,{name:S,fromWireType:function(oe){return oe},toWireType:function(oe,G){if(typeof G!="number"&&typeof G!="boolean")throw new TypeError('Cannot convert "'+jn(G)+'" to '+this.name);return G},argPackAdvance:8,readValueFromPointer:Or(S,q),destructorFunction:null})}function Nr(V,S){if(!(V instanceof Function))throw new TypeError("new_ called with constructor type "+typeof V+" which is not a function");var O=Sn(V.name||"unknownFunctionName",function(){});O.prototype=V.prototype;var q=new O,oe=V.apply(q,S);return oe instanceof Object?oe:q}function Mr(V){for(;V.length;){var S=V.pop(),O=V.pop();O(S)}}function ui(V,S,O,q,oe){var G=S.length;G<2&&Bt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var X=S[1]!==null&&O!==null,te=!1,le=1;le<S.length;++le)if(S[le]!==null&&S[le].destructorFunction===void 0){te=!0;break}for(var Ce=S[0].name!=="void",$e="",lt="",le=0;le<G-2;++le)$e+=(le!==0?", ":"")+"arg"+le,lt+=(le!==0?", ":"")+"arg"+le+"Wired";var tt="return function "+vr(V)+"("+$e+`) {
if (arguments.length !== `+(G-2)+`) {
throwBindingError('function `+V+" called with ' + arguments.length + ' arguments, expected "+(G-2)+` args!');
}
`;te&&(tt+=`var destructors = [];
`);var dt=te?"destructors":"null",zt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],se=[Bt,q,oe,Mr,S[0],S[1]];X&&(tt+="var thisWired = classParam.toWireType("+dt+`, this);
`);for(var le=0;le<G-2;++le)tt+="var arg"+le+"Wired = argType"+le+".toWireType("+dt+", arg"+le+"); // "+S[le+2].name+`
`,zt.push("argType"+le),se.push(S[le+2]);if(X&&(lt="thisWired"+(lt.length>0?", ":"")+lt),tt+=(Ce?"var rv = ":"")+"invoker(fn"+(lt.length>0?", ":"")+lt+`);
`,te)tt+=`runDestructors(destructors);
`;else for(var le=X?1:2;le<S.length;++le){var F=le===1?"thisWired":"arg"+(le-2)+"Wired";S[le].destructorFunction!==null&&(tt+=F+"_dtor("+F+"); // "+S[le].name+`
`,zt.push(F+"_dtor"),se.push(S[le].destructorFunction))}Ce&&(tt+=`var ret = retType.fromWireType(rv);
return ret;
`),tt+=`}
`,zt.push(tt);var W=Nr(Function,zt).apply(null,se);return W}function Oi(V,S,O){if(V[S].overloadTable===void 0){var q=V[S];V[S]=function(){return V[S].overloadTable.hasOwnProperty(arguments.length)||Bt("Function '"+O+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+V[S].overloadTable+")!"),V[S].overloadTable[arguments.length].apply(this,arguments)},V[S].overloadTable=[],V[S].overloadTable[q.argCount]=q}}function ci(V,S,O){c.hasOwnProperty(V)?((O===void 0||c[V].overloadTable!==void 0&&c[V].overloadTable[O]!==void 0)&&Bt("Cannot register public name '"+V+"' twice"),Oi(c,V,V),c.hasOwnProperty(O)&&Bt("Cannot register multiple overloads of a function with the same number of arguments ("+O+")!"),c[V].overloadTable[O]=S):(c[V]=S,O!==void 0&&(c[V].numArguments=O))}function Fi(V,S){for(var O=[],q=0;q<V;q++)O.push(mt[(S>>2)+q]);return O}function Ci(V,S,O){c.hasOwnProperty(V)||gn("Replacing nonexistant public symbol"),c[V].overloadTable!==void 0&&O!==void 0?c[V].overloadTable[O]=S:(c[V]=S,c[V].argCount=O)}function Ni(V,S,O){var q=c["dynCall_"+V];return O&&O.length?q.apply(null,[S].concat(O)):q.call(null,S)}function Si(V,S,O){return V.includes("j")?Ni(V,S,O):On.get(S).apply(null,O)}function b(V,S){var O=[];return function(){O.length=arguments.length;for(var q=0;q<arguments.length;q++)O[q]=arguments[q];return Si(V,S,O)}}function H(V,S){V=Vt(V);function O(){return V.includes("j")?b(V,S):On.get(S)}var q=O();return typeof q!="function"&&Bt("unknown function pointer with signature "+V+": "+S),q}var ie=void 0;function D(V){var S=C(V),O=Vt(S);return m(S),O}function J(V,S){var O=[],q={};function oe(G){if(!q[G]&&!Un[G]){if(_n[G]){_n[G].forEach(oe);return}O.push(G),q[G]=!0}}throw S.forEach(oe),new ie(V+": "+O.map(D).join([", "]))}function ue(V,S,O,q,oe,G){var X=Fi(S,O);V=Vt(V),oe=H(q,oe),ci(V,function(){J("Cannot call "+V+" due to unbound types",X)},S-1),Rn([],X,function(te){var le=[te[0],null].concat(te.slice(1));return Ci(V,ui(V,le,null,oe,G),S-1),[]})}function be(V,S,O){switch(S){case 0:return O?function(oe){return Wt[oe]}:function(oe){return Ke[oe]};case 1:return O?function(oe){return pt[oe>>1]}:function(oe){return Zn[oe>>1]};case 2:return O?function(oe){return mt[oe>>2]}:function(oe){return Rt[oe>>2]};default:throw new TypeError("Unknown integer type: "+V)}}function Re(V,S,O,q,oe){S=Vt(S),oe===-1&&(oe=4294967295);var G=br(O),X=function(Ce){return Ce};if(q===0){var te=32-8*O;X=function(Ce){return Ce<<te>>>te}}var le=S.includes("unsigned");Gn(V,{name:S,fromWireType:X,toWireType:function(Ce,$e){if(typeof $e!="number"&&typeof $e!="boolean")throw new TypeError('Cannot convert "'+jn($e)+'" to '+this.name);if($e<q||$e>oe)throw new TypeError('Passing a number "'+jn($e)+'" from JS side to C/C++ side to an argument of type "'+S+'", which is outside the valid range ['+q+", "+oe+"]!");return le?$e>>>0:$e|0},argPackAdvance:8,readValueFromPointer:be(S,G,q!==0),destructorFunction:null})}function Ze(V,S,O){var q=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],oe=q[S];function G(X){X=X>>2;var te=Rt,le=te[X],Ce=te[X+1];return new oe(cn,Ce,le)}O=Vt(O),Gn(V,{name:O,fromWireType:G,argPackAdvance:8,readValueFromPointer:G},{ignoreDuplicateRegistrations:!0})}function Nt(V,S){S=Vt(S);var O=S==="std::string";Gn(V,{name:S,fromWireType:function(q){var oe=Rt[q>>2],G;if(O)for(var X=q+4,te=0;te<=oe;++te){var le=q+4+te;if(te==oe||Ke[le]==0){var Ce=le-X,$e=ni(X,Ce);G===void 0?G=$e:(G+=String.fromCharCode(0),G+=$e),X=le+1}}else{for(var lt=new Array(oe),te=0;te<oe;++te)lt[te]=String.fromCharCode(Ke[q+4+te]);G=lt.join("")}return m(q),G},toWireType:function(q,oe){oe instanceof ArrayBuffer&&(oe=new Uint8Array(oe));var G,X=typeof oe=="string";X||oe instanceof Uint8Array||oe instanceof Uint8ClampedArray||oe instanceof Int8Array||Bt("Cannot pass non-string to std::string"),O&&X?G=function(){return Ri(oe)}:G=function(){return oe.length};var te=G(),le=y(4+te+1);if(Rt[le>>2]=te,O&&X)Ti(oe,le+4,te+1);else if(X)for(var Ce=0;Ce<te;++Ce){var $e=oe.charCodeAt(Ce);$e>255&&(m(le),Bt("String has UTF-16 code units that do not fit in 8 bits")),Ke[le+4+Ce]=$e}else for(var Ce=0;Ce<te;++Ce)Ke[le+4+Ce]=oe[Ce];return q!==null&&q.push(m,le),le},argPackAdvance:8,readValueFromPointer:An,destructorFunction:function(q){m(q)}})}function qt(V,S,O){O=Vt(O);var q,oe,G,X,te;S===2?(q=Pi,oe=fi,X=di,G=function(){return Zn},te=1):S===4&&(q=hi,oe=mn,X=Ln,G=function(){return Rt},te=2),Gn(V,{name:O,fromWireType:function(le){for(var Ce=Rt[le>>2],$e=G(),lt,tt=le+4,dt=0;dt<=Ce;++dt){var zt=le+4+dt*S;if(dt==Ce||$e[zt>>te]==0){var se=zt-tt,F=q(tt,se);lt===void 0?lt=F:(lt+=String.fromCharCode(0),lt+=F),tt=zt+S}}return m(le),lt},toWireType:function(le,Ce){typeof Ce!="string"&&Bt("Cannot pass non-string to C++ string type "+O);var $e=X(Ce),lt=y(4+$e+S);return Rt[lt>>2]=$e>>te,oe(Ce,lt+4,$e+S),le!==null&&le.push(m,lt),lt},argPackAdvance:8,readValueFromPointer:An,destructorFunction:function(le){m(le)}})}function $t(V,S){S=Vt(S),Gn(V,{isVoid:!0,name:S,argPackAdvance:0,fromWireType:function(){},toWireType:function(O,q){}})}var At={};function Ht(V){var S=At[V];return S===void 0?Vt(V):S}function Yn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Tr(V){return V===0?Lr(Yn()):(V=Ht(V),Lr(Yn()[V]))}function Ur(V){V>4&&(fn[V].refcount+=1)}function Qn(V,S){var O=Un[V];return O===void 0&&Bt(S+" has unknown type "+D(V)),O}function tr(V){for(var S="",O=0;O<V;++O)S+=(O!==0?", ":"")+"arg"+O;for(var q="return function emval_allocator_"+V+`(constructor, argTypes, args) {
`,O=0;O<V;++O)q+="var argType"+O+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+O+'], "parameter '+O+`");
var arg`+O+" = argType"+O+`.readValueFromPointer(args);
args += argType`+O+`['argPackAdvance'];
`;return q+="var obj = new constructor("+S+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",q)(Qn,c,Lr)}var zn={};function Vr(V){return V||Bt("Cannot use deleted val. handle = "+V),fn[V].value}function Ar(V,S,O,q){V=Vr(V);var oe=zn[S];return oe||(oe=tr(S),zn[S]=oe),oe(V,O,q)}function Hn(){De()}function nn(V,S){throw x(V,S||1),"longjmp"}function on(V,S){return nn(V,S)}function Kn(V,S,O){Ke.copyWithin(V,S,S+O)}function pr(V){try{return Tn.grow(V-cn.byteLength+65535>>>16),Wr(Tn.buffer),1}catch{}}function he(V){var S=Ke.length;V=V>>>0;var O=2147483648;if(V>O)return!1;for(var q=1;q<=4;q*=2){var oe=S*(1+.2/q);oe=Math.min(oe,V+100663296);var G=Math.min(O,_t(Math.max(V,oe),65536)),X=pr(G);if(X)return!0}return!1}var ve={mappings:{},buffers:[null,[],[]],printChar:function(V,S){var O=ve.buffers[V];S===0||S===10?((V===1?pn:Ot)(si(O,0)),O.length=0):O.push(S)},varargs:void 0,get:function(){ve.varargs+=4;var V=mt[ve.varargs-4>>2];return V},getStr:function(V){var S=ni(V);return S},get64:function(V,S){return V}};function Be(V){return 0}function We(V,S,O,q,oe){}function st(V,S,O,q){for(var oe=0,G=0;G<O;G++){for(var X=mt[S+G*8>>2],te=mt[S+(G*8+4)>>2],le=0;le<te;le++)ve.printChar(V,Ke[X+le]);oe+=te}return mt[q>>2]=oe,0}function bt(){return fr()}function Ft(V){rn(V)}hr(),nr=c.BindingError=qn(Error,"BindingError"),Vn=c.InternalError=qn(Error,"InternalError"),ar(),ie=c.UnboundTypeError=qn(Error,"UnboundTypeError");var R={j:Br,v:Rr,r:rr,B:Er,q:mi,t:ue,e:Re,d:Ze,m:Nt,l:qt,s:$t,h:Xn,i:Tr,n:Ur,o:Ar,a:Hn,g:on,y:Kn,k:he,A:Be,u:We,z:st,b:bt,f:B,w:N,p:z,x:U,c:Ft};Wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.D).apply(null,arguments)};var y=c._malloc=function(){return(y=c._malloc=c.asm.E).apply(null,arguments)},m=c._free=function(){return(m=c._free=c.asm.F).apply(null,arguments)},C=c.___getTypeName=function(){return(C=c.___getTypeName=c.asm.G).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.H).apply(null,arguments)};var h=c.stackSave=function(){return(h=c.stackSave=c.asm.I).apply(null,arguments)},g=c.stackRestore=function(){return(g=c.stackRestore=c.asm.J).apply(null,arguments)},x=c._setThrew=function(){return(x=c._setThrew=c.asm.K).apply(null,arguments)};c.dynCall_iiijii=function(){return(c.dynCall_iiijii=c.asm.M).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.N).apply(null,arguments)};function U(V,S,O,q,oe,G,X,te){var le=h();try{On.get(V)(S,O,q,oe,G,X,te)}catch(Ce){if(g(le),Ce!==Ce+0&&Ce!=="longjmp")throw Ce;x(1,0)}}function z(V,S,O,q,oe){var G=h();try{On.get(V)(S,O,q,oe)}catch(X){if(g(G),X!==X+0&&X!=="longjmp")throw X;x(1,0)}}function B(V,S,O){var q=h();try{return On.get(V)(S,O)}catch(oe){if(g(q),oe!==oe+0&&oe!=="longjmp")throw oe;x(1,0)}}function N(V,S,O,q,oe){var G=h();try{return On.get(V)(S,O,q,oe)}catch(X){if(g(G),X!==X+0&&X!=="longjmp")throw X;x(1,0)}}var $;ne=function V(){$||ce(),$||(ne=V)};function ce(V){if(Q>0||(wi(),Q>0))return;function S(){$||($=!0,c.calledRun=!0,!Jr&&(Fr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),$r()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),S()},1)):S()}if(c.run=ce,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return ce(),c.ready}}(),ee=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/avif_node_dec-94f55a8c.wasm").href:new URL("avif_node_dec-94f55a8c.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,me=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(F,W){Xe=F,et=W});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt="./this.program",Mt=!1,xt="";function Jt(F){return c.locateFile?c.locateFile(F,xt):xt+F}var hn,tn,vn,pn;xt=__dirname+"/",hn=function(W,w){return vn||(vn=gi),pn||(pn=gi),W=pn.normalize(W),vn.readFileSync(W,w?null:"utf8")},tn=function(W){var w=hn(W,!0);return w.buffer||(w=new Uint8Array(w)),Tn(w.buffer),w},process.argv.length>1&&(Kt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var Ot=c.print||console.log.bind(console),Gt=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&(Kt=c.thisProgram),c.quit&&c.quit;var rn;c.wasmBinary&&(rn=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&De("no native wasm support detected");var fr,Ir=!1;function Tn(F,W){F||De("Assertion failed: "+W)}var Jr=new TextDecoder("utf8");function Sr(F,W,w){for(var M=W+w,Y=W;F[Y]&&!(Y>=M);)++Y;return Jr.decode(F.subarray?F.subarray(W,Y):new Uint8Array(F.slice(W,Y)))}function kr(F,W){if(!F)return"";for(var w=F+W,M=F;!(M>=w)&&Ke[M];)++M;return Jr.decode(Ke.subarray(F,M))}function si(F,W,w,M){if(!(M>0))return 0;for(var Y=w,ae=w+M-1,pe=0;pe<F.length;++pe){var _e=F.charCodeAt(pe);if(_e>=55296&&_e<=57343){var xe=F.charCodeAt(++pe);_e=65536+((_e&1023)<<10)|xe&1023}if(_e<=127){if(w>=ae)break;W[w++]=_e}else if(_e<=2047){if(w+1>=ae)break;W[w++]=192|_e>>6,W[w++]=128|_e&63}else if(_e<=65535){if(w+2>=ae)break;W[w++]=224|_e>>12,W[w++]=128|_e>>6&63,W[w++]=128|_e&63}else{if(w+3>=ae)break;W[w++]=240|_e>>18,W[w++]=128|_e>>12&63,W[w++]=128|_e>>6&63,W[w++]=128|_e&63}}return W[w]=0,w-Y}function ni(F,W,w){return si(F,Ke,W,w)}function Di(F){for(var W=0,w=0;w<F.length;++w){var M=F.charCodeAt(w);M>=55296&&M<=57343&&(M=65536+((M&1023)<<10)|F.charCodeAt(++w)&1023),M<=127?++W:M<=2047?W+=2:M<=65535?W+=3:W+=4}return W}var Ti=new TextDecoder("utf-16le");function Ri(F,W){for(var w=F,M=w>>1,Y=M+W/2;!(M>=Y)&&Zn[M];)++M;return w=M<<1,Ti.decode(Ke.subarray(F,w))}function Ii(F,W,w){if(w===void 0&&(w=2147483647),w<2)return 0;w-=2;for(var M=W,Y=w<F.length*2?w/2:F.length,ae=0;ae<Y;++ae){var pe=F.charCodeAt(ae);pt[W>>1]=pe,W+=2}return pt[W>>1]=0,W-M}function Pi(F){return F.length*2}function fi(F,W){for(var w=0,M="";!(w>=W/4);){var Y=mt[F+w*4>>2];if(Y==0)break;if(++w,Y>=65536){var ae=Y-65536;M+=String.fromCharCode(55296|ae>>10,56320|ae&1023)}else M+=String.fromCharCode(Y)}return M}function di(F,W,w){if(w===void 0&&(w=2147483647),w<4)return 0;for(var M=W,Y=M+w-4,ae=0;ae<F.length;++ae){var pe=F.charCodeAt(ae);if(pe>=55296&&pe<=57343){var _e=F.charCodeAt(++ae);pe=65536+((pe&1023)<<10)|_e&1023}if(mt[W>>2]=pe,W+=4,W+4>Y)break}return mt[W>>2]=0,W-M}function hi(F){for(var W=0,w=0;w<F.length;++w){var M=F.charCodeAt(w);M>=55296&&M<=57343&&++w,W+=4}return W}function mn(F,W){Wt.set(F,W)}function Ln(F,W,w){for(var M=0;M<F.length;++M)Wt[W++>>0]=F.charCodeAt(M);w||(Wt[W>>0]=0)}function _t(F,W){return F%W>0&&(F+=W-F%W),F}var cn,Wt,Ke,pt,Zn,mt,Rt,an,Hr;function Wr(F){cn=F,c.HEAP8=Wt=new Int8Array(F),c.HEAP16=pt=new Int16Array(F),c.HEAP32=mt=new Int32Array(F),c.HEAPU8=Ke=new Uint8Array(F),c.HEAPU16=Zn=new Uint16Array(F),c.HEAPU32=Rt=new Uint32Array(F),c.HEAPF32=an=new Float32Array(F),c.HEAPF64=Hr=new Float64Array(F)}c.INITIAL_MEMORY;var On,Pr=[],ai=[],pi=[];function wi(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Dn(c.preRun.shift());ri(Pr)}function Fr(){ri(ai)}function $r(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Dt(c.postRun.shift());ri(pi)}function Dn(F){Pr.unshift(F)}function sr(F){ai.unshift(F)}function Dt(F){pi.unshift(F)}var Q=0,ne=null;function ye(F){Q++,c.monitorRunDependencies&&c.monitorRunDependencies(Q)}function Me(F){if(Q--,c.monitorRunDependencies&&c.monitorRunDependencies(Q),Q==0&&ne){var W=ne;ne=null,W()}}c.preloadedImages={},c.preloadedAudios={};function De(F){c.onAbort&&c.onAbort(F),F+="",Gt(F),Ir=!0,F="abort("+F+"). Build with -s ASSERTIONS=1 for more info.";var W=new WebAssembly.RuntimeError(F);throw et(W),W}var yt="data:application/octet-stream;base64,";function Xr(F){return F.startsWith(yt)}if(c.locateFile){var wn="jxl_node_enc.wasm";Xr(wn)||(wn=Jt(wn))}else var wn=new URL("jxl_node_enc.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Nn(F){try{if(F==wn&&rn)return new Uint8Array(rn);if(tn)return tn(F);throw"both async and sync fetching of the wasm failed"}catch(W){De(W)}}function dr(){return!rn&&Mt&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(F){if(!F.ok)throw"failed to load wasm binary file at '"+wn+"'";return F.arrayBuffer()}).catch(function(){return Nn(wn)}):Promise.resolve().then(function(){return Nn(wn)})}function Wn(){var F={a:$e};function W(pe,_e){var xe=pe.exports;c.asm=xe,fr=c.asm.J,Wr(fr.buffer),On=c.asm.Q,sr(c.asm.K),Me()}ye();function w(pe){W(pe.instance)}function M(pe){return dr().then(function(_e){var xe=WebAssembly.instantiate(_e,F);return xe}).then(pe,function(_e){Gt("failed to asynchronously prepare wasm: "+_e),De(_e)})}function Y(){return!rn&&typeof WebAssembly.instantiateStreaming=="function"&&!Xr(wn)&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(pe){var _e=WebAssembly.instantiateStreaming(pe,F);return _e.then(w,function(xe){return Gt("wasm streaming compile failed: "+xe),Gt("falling back to ArrayBuffer instantiation"),M(w)})}):M(w)}if(c.instantiateWasm)try{var ae=c.instantiateWasm(F,W);return ae}catch(pe){return Gt("Module.instantiateWasm callback failed with error: "+pe),!1}return Y().catch(et),{}}function ri(F){for(;F.length>0;){var W=F.shift();if(typeof W=="function"){W(c);continue}var w=W.func;typeof w=="number"?W.arg===void 0?On.get(w)():On.get(w)(W.arg):w(W.arg===void 0?null:W.arg)}}var cr={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Br(F){return lt(F+cr.SIZE)+cr.SIZE}function Rr(F,W){}function br(F,W){return void 0}function hr(F){this.excPtr=F,this.ptr=F-cr.SIZE,this.set_type=function(W){mt[this.ptr+cr.TYPE_OFFSET>>2]=W},this.get_type=function(){return mt[this.ptr+cr.TYPE_OFFSET>>2]},this.set_destructor=function(W){mt[this.ptr+cr.DESTRUCTOR_OFFSET>>2]=W},this.get_destructor=function(){return mt[this.ptr+cr.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(W){mt[this.ptr+cr.REFCOUNT_OFFSET>>2]=W},this.set_caught=function(W){W=W?1:0,Wt[this.ptr+cr.CAUGHT_OFFSET>>0]=W},this.get_caught=function(){return Wt[this.ptr+cr.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(W){W=W?1:0,Wt[this.ptr+cr.RETHROWN_OFFSET>>0]=W},this.get_rethrown=function(){return Wt[this.ptr+cr.RETHROWN_OFFSET>>0]!=0},this.init=function(W,w){this.set_type(W),this.set_destructor(w),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var W=mt[this.ptr+cr.REFCOUNT_OFFSET>>2];mt[this.ptr+cr.REFCOUNT_OFFSET>>2]=W+1},this.release_ref=function(){var W=mt[this.ptr+cr.REFCOUNT_OFFSET>>2];return mt[this.ptr+cr.REFCOUNT_OFFSET>>2]=W-1,W===1}}function lr(F,W,w){var M=new hr(F);throw M.init(W,w),F}var Vt={mappings:{},buffers:[null,[],[]],printChar:function(F,W){var w=Vt.buffers[F];W===0||W===10?((F===1?Ot:Gt)(Sr(w,0)),w.length=0):w.push(W)},varargs:void 0,get:function(){Vt.varargs+=4;var F=mt[Vt.varargs-4>>2];return F},getStr:function(F){var W=kr(F);return W},get64:function(F,W){return F}};function ln(F,W,w){return Vt.varargs=w,0}function Un(F,W,w){return Vt.varargs=w,0}function _n(F,W,w){Vt.varargs=w}var It={};function Jn(F){for(;F.length;){var W=F.pop(),w=F.pop();w(W)}}function vr(F){return this.fromWireType(Rt[F>>2])}var Sn={},qn={},nr={},Bt=48,Vn=57;function gn(F){if(F===void 0)return"_unknown";F=F.replace(/[^a-zA-Z0-9_]/g,"$");var W=F.charCodeAt(0);return W>=Bt&&W<=Vn?"_"+F:F}function Rn(F,W){return F=gn(F),new Function("body","return function "+F+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(W)}function Gn(F,W){var w=Rn(W,function(M){this.name=W,this.message=M;var Y=new Error(M).stack;Y!==void 0&&(this.stack=this.toString()+`
`+Y.replace(/^Error(:[^\n]*)?\n/,""))});return w.prototype=Object.create(F.prototype),w.prototype.constructor=w,w.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},w}var rr=void 0;function xr(F){throw new rr(F)}function fn(F,W,w){F.forEach(function(_e){nr[_e]=W});function M(_e){var xe=w(_e);xe.length!==F.length&&xr("Mismatched type converter count");for(var Le=0;Le<F.length;++Le)Or(F[Le],xe[Le])}var Y=new Array(W.length),ae=[],pe=0;W.forEach(function(_e,xe){qn.hasOwnProperty(_e)?Y[xe]=qn[_e]:(ae.push(_e),Sn.hasOwnProperty(_e)||(Sn[_e]=[]),Sn[_e].push(function(){Y[xe]=qn[_e],++pe,pe===ae.length&&M(Y)}))}),ae.length===0&&M(Y)}function Xn(F){var W=It[F];delete It[F];var w=W.rawConstructor,M=W.rawDestructor,Y=W.fields,ae=Y.map(function(pe){return pe.getterReturnType}).concat(Y.map(function(pe){return pe.setterArgumentType}));fn([F],ae,function(pe){var _e={};return Y.forEach(function(xe,Le){var Ye=xe.fieldName,gt=pe[Le],kt=xe.getter,$n=xe.getterContext,wr=pe[Le+Y.length],Zr=xe.setter,Li=xe.setterContext;_e[Ye]={read:function(eo){return gt.fromWireType(kt($n,eo))},write:function(eo,Ct){var ur=[];Zr(Li,eo,wr.toWireType(ur,Ct)),Jn(ur)}}}),[{name:W.name,fromWireType:function(xe){var Le={};for(var Ye in _e)Le[Ye]=_e[Ye].read(xe);return M(xe),Le},toWireType:function(xe,Le){for(var Ye in _e)if(!(Ye in Le))throw new TypeError('Missing field:  "'+Ye+'"');var gt=w();for(Ye in _e)_e[Ye].write(gt,Le[Ye]);return xe!==null&&xe.push(M,gt),gt},argPackAdvance:8,readValueFromPointer:vr,destructorFunction:M}]})}function kn(F,W,w,M,Y){}function Pt(F){switch(F){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+F)}}function ar(){for(var F=new Array(256),W=0;W<256;++W)F[W]=String.fromCharCode(W);Lr=F}var Lr=void 0;function An(F){for(var W="",w=F;Ke[w];)W+=Lr[Ke[w++]];return W}var Er=void 0;function jn(F){throw new Er(F)}function Or(F,W,w){if(w=w||{},!("argPackAdvance"in W))throw new TypeError("registerType registeredInstance requires argPackAdvance");var M=W.name;if(F||jn('type "'+M+'" must have a positive integer typeid pointer'),qn.hasOwnProperty(F)){if(w.ignoreDuplicateRegistrations)return;jn("Cannot register type '"+M+"' twice")}if(qn[F]=W,delete nr[F],Sn.hasOwnProperty(F)){var Y=Sn[F];delete Sn[F],Y.forEach(function(ae){ae()})}}function mi(F,W,w,M,Y){var ae=Pt(w);W=An(W),Or(F,{name:W,fromWireType:function(pe){return!!pe},toWireType:function(pe,_e){return _e?M:Y},argPackAdvance:8,readValueFromPointer:function(pe){var _e;if(w===1)_e=Wt;else if(w===2)_e=pt;else if(w===4)_e=mt;else throw new TypeError("Unknown boolean type size: "+W);return this.fromWireType(_e[pe>>ae])},destructorFunction:null})}var Nr=[],Mr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ui(F){F>4&&--Mr[F].refcount===0&&(Mr[F]=void 0,Nr.push(F))}function Oi(){for(var F=0,W=5;W<Mr.length;++W)Mr[W]!==void 0&&++F;return F}function ci(){for(var F=5;F<Mr.length;++F)if(Mr[F]!==void 0)return Mr[F];return null}function Fi(){c.count_emval_handles=Oi,c.get_first_emval=ci}function Ci(F){switch(F){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var W=Nr.length?Nr.pop():Mr.length;return Mr[W]={refcount:1,value:F},W}}}function Ni(F,W){W=An(W),Or(F,{name:W,fromWireType:function(w){var M=Mr[w].value;return ui(w),M},toWireType:function(w,M){return Ci(M)},argPackAdvance:8,readValueFromPointer:vr,destructorFunction:null})}function Si(F){if(F===null)return"null";var W=typeof F;return W==="object"||W==="array"||W==="function"?F.toString():""+F}function b(F,W){switch(W){case 2:return function(w){return this.fromWireType(an[w>>2])};case 3:return function(w){return this.fromWireType(Hr[w>>3])};default:throw new TypeError("Unknown float type: "+F)}}function H(F,W,w){var M=Pt(w);W=An(W),Or(F,{name:W,fromWireType:function(Y){return Y},toWireType:function(Y,ae){if(typeof ae!="number"&&typeof ae!="boolean")throw new TypeError('Cannot convert "'+Si(ae)+'" to '+this.name);return ae},argPackAdvance:8,readValueFromPointer:b(W,M),destructorFunction:null})}function ie(F,W){if(!(F instanceof Function))throw new TypeError("new_ called with constructor type "+typeof F+" which is not a function");var w=Rn(F.name||"unknownFunctionName",function(){});w.prototype=F.prototype;var M=new w,Y=F.apply(M,W);return Y instanceof Object?Y:M}function D(F,W,w,M,Y){var ae=W.length;ae<2&&jn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var pe=W[1]!==null&&w!==null,_e=!1,xe=1;xe<W.length;++xe)if(W[xe]!==null&&W[xe].destructorFunction===void 0){_e=!0;break}for(var Le=W[0].name!=="void",Ye="",gt="",xe=0;xe<ae-2;++xe)Ye+=(xe!==0?", ":"")+"arg"+xe,gt+=(xe!==0?", ":"")+"arg"+xe+"Wired";var kt="return function "+gn(F)+"("+Ye+`) {
if (arguments.length !== `+(ae-2)+`) {
throwBindingError('function `+F+" called with ' + arguments.length + ' arguments, expected "+(ae-2)+` args!');
}
`;_e&&(kt+=`var destructors = [];
`);var $n=_e?"destructors":"null",wr=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Zr=[jn,M,Y,Jn,W[0],W[1]];pe&&(kt+="var thisWired = classParam.toWireType("+$n+`, this);
`);for(var xe=0;xe<ae-2;++xe)kt+="var arg"+xe+"Wired = argType"+xe+".toWireType("+$n+", arg"+xe+"); // "+W[xe+2].name+`
`,wr.push("argType"+xe),Zr.push(W[xe+2]);if(pe&&(gt="thisWired"+(gt.length>0?", ":"")+gt),kt+=(Le?"var rv = ":"")+"invoker(fn"+(gt.length>0?", ":"")+gt+`);
`,_e)kt+=`runDestructors(destructors);
`;else for(var xe=pe?1:2;xe<W.length;++xe){var Li=xe===1?"thisWired":"arg"+(xe-2)+"Wired";W[xe].destructorFunction!==null&&(kt+=Li+"_dtor("+Li+"); // "+W[xe].name+`
`,wr.push(Li+"_dtor"),Zr.push(W[xe].destructorFunction))}Le&&(kt+=`var ret = retType.fromWireType(rv);
return ret;
`),kt+=`}
`,wr.push(kt);var eo=ie(Function,wr).apply(null,Zr);return eo}function J(F,W,w){if(F[W].overloadTable===void 0){var M=F[W];F[W]=function(){return F[W].overloadTable.hasOwnProperty(arguments.length)||jn("Function '"+w+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+F[W].overloadTable+")!"),F[W].overloadTable[arguments.length].apply(this,arguments)},F[W].overloadTable=[],F[W].overloadTable[M.argCount]=M}}function ue(F,W,w){c.hasOwnProperty(F)?((w===void 0||c[F].overloadTable!==void 0&&c[F].overloadTable[w]!==void 0)&&jn("Cannot register public name '"+F+"' twice"),J(c,F,F),c.hasOwnProperty(w)&&jn("Cannot register multiple overloads of a function with the same number of arguments ("+w+")!"),c[F].overloadTable[w]=W):(c[F]=W,w!==void 0&&(c[F].numArguments=w))}function be(F,W){for(var w=[],M=0;M<F;M++)w.push(mt[(W>>2)+M]);return w}function Re(F,W,w){c.hasOwnProperty(F)||xr("Replacing nonexistant public symbol"),c[F].overloadTable!==void 0&&w!==void 0?c[F].overloadTable[w]=W:(c[F]=W,c[F].argCount=w)}function Ze(F,W,w){var M=c["dynCall_"+F];return w&&w.length?M.apply(null,[W].concat(w)):M.call(null,W)}function Nt(F,W,w){return F.includes("j")?Ze(F,W,w):On.get(W).apply(null,w)}function qt(F,W){var w=[];return function(){w.length=arguments.length;for(var M=0;M<arguments.length;M++)w[M]=arguments[M];return Nt(F,W,w)}}function $t(F,W){F=An(F);function w(){return F.includes("j")?qt(F,W):On.get(W)}var M=w();return typeof M!="function"&&jn("unknown function pointer with signature "+F+": "+W),M}var At=void 0;function Ht(F){var W=dt(F),w=An(W);return tt(W),w}function Yn(F,W){var w=[],M={};function Y(ae){if(!M[ae]&&!qn[ae]){if(nr[ae]){nr[ae].forEach(Y);return}w.push(ae),M[ae]=!0}}throw W.forEach(Y),new At(F+": "+w.map(Ht).join([", "]))}function Tr(F,W,w,M,Y,ae){var pe=be(W,w);F=An(F),Y=$t(M,Y),ue(F,function(){Yn("Cannot call "+F+" due to unbound types",pe)},W-1),fn([],pe,function(_e){var xe=[_e[0],null].concat(_e.slice(1));return Re(F,D(F,xe,null,Y,ae),W-1),[]})}function Ur(F,W,w){switch(W){case 0:return w?function(Y){return Wt[Y]}:function(Y){return Ke[Y]};case 1:return w?function(Y){return pt[Y>>1]}:function(Y){return Zn[Y>>1]};case 2:return w?function(Y){return mt[Y>>2]}:function(Y){return Rt[Y>>2]};default:throw new TypeError("Unknown integer type: "+F)}}function Qn(F,W,w,M,Y){W=An(W),Y===-1&&(Y=4294967295);var ae=Pt(w),pe=function(Le){return Le};if(M===0){var _e=32-8*w;pe=function(Le){return Le<<_e>>>_e}}var xe=W.includes("unsigned");Or(F,{name:W,fromWireType:pe,toWireType:function(Le,Ye){if(typeof Ye!="number"&&typeof Ye!="boolean")throw new TypeError('Cannot convert "'+Si(Ye)+'" to '+this.name);if(Ye<M||Ye>Y)throw new TypeError('Passing a number "'+Si(Ye)+'" from JS side to C/C++ side to an argument of type "'+W+'", which is outside the valid range ['+M+", "+Y+"]!");return xe?Ye>>>0:Ye|0},argPackAdvance:8,readValueFromPointer:Ur(W,ae,M!==0),destructorFunction:null})}function tr(F,W,w){var M=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Y=M[W];function ae(pe){pe=pe>>2;var _e=Rt,xe=_e[pe],Le=_e[pe+1];return new Y(cn,Le,xe)}w=An(w),Or(F,{name:w,fromWireType:ae,argPackAdvance:8,readValueFromPointer:ae},{ignoreDuplicateRegistrations:!0})}function zn(F,W){W=An(W);var w=W==="std::string";Or(F,{name:W,fromWireType:function(M){var Y=Rt[M>>2],ae;if(w)for(var pe=M+4,_e=0;_e<=Y;++_e){var xe=M+4+_e;if(_e==Y||Ke[xe]==0){var Le=xe-pe,Ye=kr(pe,Le);ae===void 0?ae=Ye:(ae+=String.fromCharCode(0),ae+=Ye),pe=xe+1}}else{for(var gt=new Array(Y),_e=0;_e<Y;++_e)gt[_e]=String.fromCharCode(Ke[M+4+_e]);ae=gt.join("")}return tt(M),ae},toWireType:function(M,Y){Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y));var ae,pe=typeof Y=="string";pe||Y instanceof Uint8Array||Y instanceof Uint8ClampedArray||Y instanceof Int8Array||jn("Cannot pass non-string to std::string"),w&&pe?ae=function(){return Di(Y)}:ae=function(){return Y.length};var _e=ae(),xe=lt(4+_e+1);if(Rt[xe>>2]=_e,w&&pe)ni(Y,xe+4,_e+1);else if(pe)for(var Le=0;Le<_e;++Le){var Ye=Y.charCodeAt(Le);Ye>255&&(tt(xe),jn("String has UTF-16 code units that do not fit in 8 bits")),Ke[xe+4+Le]=Ye}else for(var Le=0;Le<_e;++Le)Ke[xe+4+Le]=Y[Le];return M!==null&&M.push(tt,xe),xe},argPackAdvance:8,readValueFromPointer:vr,destructorFunction:function(M){tt(M)}})}function Vr(F,W,w){w=An(w);var M,Y,ae,pe,_e;W===2?(M=Ri,Y=Ii,pe=Pi,ae=function(){return Zn},_e=1):W===4&&(M=fi,Y=di,pe=hi,ae=function(){return Rt},_e=2),Or(F,{name:w,fromWireType:function(xe){for(var Le=Rt[xe>>2],Ye=ae(),gt,kt=xe+4,$n=0;$n<=Le;++$n){var wr=xe+4+$n*W;if($n==Le||Ye[wr>>_e]==0){var Zr=wr-kt,Li=M(kt,Zr);gt===void 0?gt=Li:(gt+=String.fromCharCode(0),gt+=Li),kt=wr+W}}return tt(xe),gt},toWireType:function(xe,Le){typeof Le!="string"&&jn("Cannot pass non-string to C++ string type "+w);var Ye=pe(Le),gt=lt(4+Ye+W);return Rt[gt>>2]=Ye>>_e,Y(Le,gt+4,Ye+W),xe!==null&&xe.push(tt,gt),gt},argPackAdvance:8,readValueFromPointer:vr,destructorFunction:function(xe){tt(xe)}})}function Ar(F,W,w,M,Y,ae){It[F]={name:An(W),rawConstructor:$t(w,M),rawDestructor:$t(Y,ae),fields:[]}}function Hn(F,W,w,M,Y,ae,pe,_e,xe,Le){It[F].fields.push({fieldName:An(W),getterReturnType:w,getter:$t(M,Y),getterContext:ae,setterArgumentType:pe,setter:$t(_e,xe),setterContext:Le})}function nn(F,W){W=An(W),Or(F,{isVoid:!0,name:W,argPackAdvance:0,fromWireType:function(){},toWireType:function(w,M){}})}var on={};function Kn(F){var W=on[F];return W===void 0?An(F):W}function pr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function he(F){return F===0?Ci(pr()):(F=Kn(F),Ci(pr()[F]))}function ve(F){F>4&&(Mr[F].refcount+=1)}function Be(F,W){var w=qn[F];return w===void 0&&jn(W+" has unknown type "+Ht(F)),w}function We(F){for(var W="",w=0;w<F;++w)W+=(w!==0?", ":"")+"arg"+w;for(var M="return function emval_allocator_"+F+`(constructor, argTypes, args) {
`,w=0;w<F;++w)M+="var argType"+w+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+w+'], "parameter '+w+`");
var arg`+w+" = argType"+w+`.readValueFromPointer(args);
args += argType`+w+`['argPackAdvance'];
`;return M+="var obj = new constructor("+W+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",M)(Be,c,Ci)}var st={};function bt(F){return F||jn("Cannot use deleted val. handle = "+F),Mr[F].value}function Ft(F,W,w,M){F=bt(F);var Y=st[W];return Y||(Y=We(W),st[W]=Y),Y(F,w,M)}function R(){De()}function y(F,W,w){Ke.copyWithin(F,W,W+w)}function m(F){try{return fr.grow(F-cn.byteLength+65535>>>16),Wr(fr.buffer),1}catch{}}function C(F){var W=Ke.length;F=F>>>0;var w=2147483648;if(F>w)return!1;for(var M=1;M<=4;M*=2){var Y=W*(1+.2/M);Y=Math.min(Y,F+100663296);var ae=Math.min(w,_t(Math.max(F,Y),65536)),pe=m(ae);if(pe)return!0}return!1}var h={};function g(){return Kt||"./this.program"}function x(){if(!x.strings){var F=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",W={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:F,_:g()};for(var w in h)W[w]=h[w];var M=[];for(var w in W)M.push(w+"="+W[w]);x.strings=M}return x.strings}function U(F,W){var w=0;return x().forEach(function(M,Y){var ae=W+w;mt[F+Y*4>>2]=ae,Ln(M,ae),w+=M.length+1}),0}function z(F,W){var w=x();mt[F>>2]=w.length;var M=0;return w.forEach(function(Y){M+=Y.length+1}),mt[W>>2]=M,0}function B(F){return 0}function N(F,W,w,M){var Y=Vt.getStreamFromFD(F),ae=Vt.doReadv(Y,W,w);return mt[M>>2]=ae,0}function $(F,W,w,M,Y){}function ce(F,W,w,M){for(var Y=0,ae=0;ae<w;ae++){for(var pe=mt[W+ae*8>>2],_e=mt[W+(ae*8+4)>>2],xe=0;xe<_e;xe++)Vt.printChar(F,Ke[pe+xe]);Y+=_e}return mt[M>>2]=Y,0}function V(F){}function S(F){return F%4===0&&(F%100!==0||F%400===0)}function O(F,W){for(var w=0,M=0;M<=W;w+=F[M++]);return w}var q=[31,29,31,30,31,30,31,31,30,31,30,31],oe=[31,28,31,30,31,30,31,31,30,31,30,31];function G(F,W){for(var w=new Date(F.getTime());W>0;){var M=S(w.getFullYear()),Y=w.getMonth(),ae=(M?q:oe)[Y];if(W>ae-w.getDate())W-=ae-w.getDate()+1,w.setDate(1),Y<11?w.setMonth(Y+1):(w.setMonth(0),w.setFullYear(w.getFullYear()+1));else return w.setDate(w.getDate()+W),w}return w}function X(F,W,w,M){var Y=mt[M+40>>2],ae={tm_sec:mt[M>>2],tm_min:mt[M+4>>2],tm_hour:mt[M+8>>2],tm_mday:mt[M+12>>2],tm_mon:mt[M+16>>2],tm_year:mt[M+20>>2],tm_wday:mt[M+24>>2],tm_yday:mt[M+28>>2],tm_isdst:mt[M+32>>2],tm_gmtoff:mt[M+36>>2],tm_zone:Y?kr(Y):""},pe=kr(w),_e={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var xe in _e)pe=pe.replace(new RegExp(xe,"g"),_e[xe]);var Le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ye=["January","February","March","April","May","June","July","August","September","October","November","December"];function gt(Ct,ur,ro){for(var Ui=typeof Ct=="number"?Ct.toString():Ct||"";Ui.length<ur;)Ui=ro[0]+Ui;return Ui}function kt(Ct,ur){return gt(Ct,ur,"0")}function $n(Ct,ur){function ro(Qo){return Qo<0?-1:Qo>0?1:0}var Ui;return(Ui=ro(Ct.getFullYear()-ur.getFullYear()))===0&&(Ui=ro(Ct.getMonth()-ur.getMonth()))===0&&(Ui=ro(Ct.getDate()-ur.getDate())),Ui}function wr(Ct){switch(Ct.getDay()){case 0:return new Date(Ct.getFullYear()-1,11,29);case 1:return Ct;case 2:return new Date(Ct.getFullYear(),0,3);case 3:return new Date(Ct.getFullYear(),0,2);case 4:return new Date(Ct.getFullYear(),0,1);case 5:return new Date(Ct.getFullYear()-1,11,31);case 6:return new Date(Ct.getFullYear()-1,11,30)}}function Zr(Ct){var ur=G(new Date(Ct.tm_year+1900,0,1),Ct.tm_yday),ro=new Date(ur.getFullYear(),0,4),Ui=new Date(ur.getFullYear()+1,0,4),Qo=wr(ro),ls=wr(Ui);return $n(Qo,ur)<=0?$n(ls,ur)<=0?ur.getFullYear()+1:ur.getFullYear():ur.getFullYear()-1}var Li={"%a":function(Ct){return Le[Ct.tm_wday].substring(0,3)},"%A":function(Ct){return Le[Ct.tm_wday]},"%b":function(Ct){return Ye[Ct.tm_mon].substring(0,3)},"%B":function(Ct){return Ye[Ct.tm_mon]},"%C":function(Ct){var ur=Ct.tm_year+1900;return kt(ur/100|0,2)},"%d":function(Ct){return kt(Ct.tm_mday,2)},"%e":function(Ct){return gt(Ct.tm_mday,2," ")},"%g":function(Ct){return Zr(Ct).toString().substring(2)},"%G":function(Ct){return Zr(Ct)},"%H":function(Ct){return kt(Ct.tm_hour,2)},"%I":function(Ct){var ur=Ct.tm_hour;return ur==0?ur=12:ur>12&&(ur-=12),kt(ur,2)},"%j":function(Ct){return kt(Ct.tm_mday+O(S(Ct.tm_year+1900)?q:oe,Ct.tm_mon-1),3)},"%m":function(Ct){return kt(Ct.tm_mon+1,2)},"%M":function(Ct){return kt(Ct.tm_min,2)},"%n":function(){return`
`},"%p":function(Ct){return Ct.tm_hour>=0&&Ct.tm_hour<12?"AM":"PM"},"%S":function(Ct){return kt(Ct.tm_sec,2)},"%t":function(){return"	"},"%u":function(Ct){return Ct.tm_wday||7},"%U":function(Ct){var ur=new Date(Ct.tm_year+1900,0,1),ro=ur.getDay()===0?ur:G(ur,7-ur.getDay()),Ui=new Date(Ct.tm_year+1900,Ct.tm_mon,Ct.tm_mday);if($n(ro,Ui)<0){var Qo=O(S(Ui.getFullYear())?q:oe,Ui.getMonth()-1)-31,ls=31-ro.getDate(),ys=ls+Qo+Ui.getDate();return kt(Math.ceil(ys/7),2)}return $n(ro,ur)===0?"01":"00"},"%V":function(Ct){var ur=new Date(Ct.tm_year+1900,0,4),ro=new Date(Ct.tm_year+1901,0,4),Ui=wr(ur),Qo=wr(ro),ls=G(new Date(Ct.tm_year+1900,0,1),Ct.tm_yday);if($n(ls,Ui)<0)return"53";if($n(Qo,ls)<=0)return"01";var ys;return Ui.getFullYear()<Ct.tm_year+1900?ys=Ct.tm_yday+32-Ui.getDate():ys=Ct.tm_yday+1-Ui.getDate(),kt(Math.ceil(ys/7),2)},"%w":function(Ct){return Ct.tm_wday},"%W":function(Ct){var ur=new Date(Ct.tm_year,0,1),ro=ur.getDay()===1?ur:G(ur,ur.getDay()===0?1:7-ur.getDay()+1),Ui=new Date(Ct.tm_year+1900,Ct.tm_mon,Ct.tm_mday);if($n(ro,Ui)<0){var Qo=O(S(Ui.getFullYear())?q:oe,Ui.getMonth()-1)-31,ls=31-ro.getDate(),ys=ls+Qo+Ui.getDate();return kt(Math.ceil(ys/7),2)}return $n(ro,ur)===0?"01":"00"},"%y":function(Ct){return(Ct.tm_year+1900).toString().substring(2)},"%Y":function(Ct){return Ct.tm_year+1900},"%z":function(Ct){var ur=Ct.tm_gmtoff,ro=ur>=0;return ur=Math.abs(ur)/60,ur=ur/60*100+ur%60,(ro?"+":"-")+String("0000"+ur).slice(-4)},"%Z":function(Ct){return Ct.tm_zone},"%%":function(){return"%"}};for(var xe in Li)pe.includes(xe)&&(pe=pe.replace(new RegExp(xe,"g"),Li[xe](ae)));var eo=Ce(pe,!1);return eo.length>W?0:(mn(eo,F),eo.length-1)}function te(F,W,w,M){return X(F,W,w,M)}function le(F){{if(!F)return 1;var W=kr(F);if(!W.length)return 0;var w=gi,M=w.spawnSync(W,[],{shell:!0,stdio:"inherit"}),Y=function(pe,_e){return pe<<8|_e};if(M.status===null){var ae=function(pe){switch(pe){case"SIGHUP":return 1;case"SIGINT":return 2;case"SIGQUIT":return 3;case"SIGFPE":return 8;case"SIGKILL":return 9;case"SIGALRM":return 14;case"SIGTERM":return 15}return 2};return Y(0,ae(M.signal))}return Y(M.status,0)}}rr=c.InternalError=Gn(Error,"InternalError"),ar(),Er=c.BindingError=Gn(Error,"BindingError"),Fi(),At=c.UnboundTypeError=Gn(Error,"UnboundTypeError");function Ce(F,W,w){var M=w>0?w:Di(F)+1,Y=new Array(M),ae=si(F,Y,0,Y.length);return W&&(Y.length=ae),Y}var $e={u:Br,I:br,p:lr,h:ln,A:Un,B:_n,m:Xn,r:kn,D:mi,C:Ni,j:H,l:Tr,c:Qn,b:tr,k:zn,g:Vr,n:Ar,d:Hn,E:nn,e:ui,H:he,G:ve,o:Ft,a:R,t:y,f:C,w:U,x:z,i:B,z:N,q:$,y:ce,s:V,v:te,F:le};Wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.K).apply(null,arguments)};var lt=c._malloc=function(){return(lt=c._malloc=c.asm.L).apply(null,arguments)},tt=c._free=function(){return(tt=c._free=c.asm.M).apply(null,arguments)},dt=c.___getTypeName=function(){return(dt=c.___getTypeName=c.asm.N).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.O).apply(null,arguments)},c.___errno_location=function(){return(c.___errno_location=c.asm.P).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.R).apply(null,arguments)},c.dynCall_iiji=function(){return(c.dynCall_iiji=c.asm.S).apply(null,arguments)},c.dynCall_iiiiij=function(){return(c.dynCall_iiiiij=c.asm.T).apply(null,arguments)},c.dynCall_iiiiijj=function(){return(c.dynCall_iiiiijj=c.asm.U).apply(null,arguments)},c.dynCall_iiiiiijj=function(){return(c.dynCall_iiiiiijj=c.asm.V).apply(null,arguments)},c.dynCall_viijii=function(){return(c.dynCall_viijii=c.asm.W).apply(null,arguments)};var zt;ne=function F(){zt||se(),zt||(ne=F)};function se(F){if(Q>0||(wi(),Q>0))return;function W(){zt||(zt=!0,c.calledRun=!0,!Ir&&(Fr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),$r()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),W()},1)):W()}if(c.run=se,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return se(),c.ready}}(),Z=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/jxl_node_enc-b8ea914c.wasm").href:new URL("jxl_node_enc-b8ea914c.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,re=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(y,m){Xe=y,et=m});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(y){return c.locateFile?c.locateFile(y,Mt):Mt+y}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(m,C){return tn||(tn=gi),vn||(vn=gi),m=vn.normalize(m),tn.readFileSync(m,C?null:"utf8")},hn=function(m){var C=Jt(m,!0);return C.buffer||(C=new Uint8Array(C)),Ir(C.buffer),C},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&ne("no native wasm support detected");var rn,fr=!1;function Ir(y,m){y||ne("Assertion failed: "+m)}var Tn=new TextDecoder("utf8");function Jr(y,m,C){for(var h=m+C,g=m;y[g]&&!(g>=h);)++g;return Tn.decode(y.subarray?y.subarray(m,g):new Uint8Array(y.slice(m,g)))}function Sr(y,m){if(!y)return"";for(var C=y+m,h=y;!(h>=C)&&_t[h];)++h;return Tn.decode(_t.subarray(y,h))}function kr(y,m,C,h){if(!(h>0))return 0;for(var g=C,x=C+h-1,U=0;U<y.length;++U){var z=y.charCodeAt(U);if(z>=55296&&z<=57343){var B=y.charCodeAt(++U);z=65536+((z&1023)<<10)|B&1023}if(z<=127){if(C>=x)break;m[C++]=z}else if(z<=2047){if(C+1>=x)break;m[C++]=192|z>>6,m[C++]=128|z&63}else if(z<=65535){if(C+2>=x)break;m[C++]=224|z>>12,m[C++]=128|z>>6&63,m[C++]=128|z&63}else{if(C+3>=x)break;m[C++]=240|z>>18,m[C++]=128|z>>12&63,m[C++]=128|z>>6&63,m[C++]=128|z&63}}return m[C]=0,C-g}function si(y,m,C){return kr(y,_t,m,C)}function ni(y){for(var m=0,C=0;C<y.length;++C){var h=y.charCodeAt(C);h>=55296&&h<=57343&&(h=65536+((h&1023)<<10)|y.charCodeAt(++C)&1023),h<=127?++m:h<=2047?m+=2:h<=65535?m+=3:m+=4}return m}var Di=new TextDecoder("utf-16le");function Ti(y,m){for(var C=y,h=C>>1,g=h+m/2;!(h>=g)&&Wt[h];)++h;return C=h<<1,Di.decode(_t.subarray(y,C))}function Ri(y,m,C){if(C===void 0&&(C=2147483647),C<2)return 0;C-=2;for(var h=m,g=C<y.length*2?C/2:y.length,x=0;x<g;++x){var U=y.charCodeAt(x);cn[m>>1]=U,m+=2}return cn[m>>1]=0,m-h}function Ii(y){return y.length*2}function Pi(y,m){for(var C=0,h="";!(C>=m/4);){var g=Ke[y+C*4>>2];if(g==0)break;if(++C,g>=65536){var x=g-65536;h+=String.fromCharCode(55296|x>>10,56320|x&1023)}else h+=String.fromCharCode(g)}return h}function fi(y,m,C){if(C===void 0&&(C=2147483647),C<4)return 0;for(var h=m,g=h+C-4,x=0;x<y.length;++x){var U=y.charCodeAt(x);if(U>=55296&&U<=57343){var z=y.charCodeAt(++x);U=65536+((U&1023)<<10)|z&1023}if(Ke[m>>2]=U,m+=4,m+4>g)break}return Ke[m>>2]=0,m-h}function di(y){for(var m=0,C=0;C<y.length;++C){var h=y.charCodeAt(C);h>=55296&&h<=57343&&++C,m+=4}return m}function hi(y,m){return y%m>0&&(y+=m-y%m),y}var mn,Ln,_t,cn,Wt,Ke,pt,Zn,mt;function Rt(y){mn=y,c.HEAP8=Ln=new Int8Array(y),c.HEAP16=cn=new Int16Array(y),c.HEAP32=Ke=new Int32Array(y),c.HEAPU8=_t=new Uint8Array(y),c.HEAPU16=Wt=new Uint16Array(y),c.HEAPU32=pt=new Uint32Array(y),c.HEAPF32=Zn=new Float32Array(y),c.HEAPF64=mt=new Float64Array(y)}c.INITIAL_MEMORY;var an,Hr=[],Wr=[],On=[];function Pr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Nn(Hr)}function ai(){Nn(Wr)}function pi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());Nn(On)}function wi(y){Hr.unshift(y)}function Fr(y){Wr.unshift(y)}function $r(y){On.unshift(y)}var Dn=0,sr=null;function Dt(y){Dn++,c.monitorRunDependencies&&c.monitorRunDependencies(Dn)}function Q(y){if(Dn--,c.monitorRunDependencies&&c.monitorRunDependencies(Dn),Dn==0&&sr){var m=sr;sr=null,m()}}c.preloadedImages={},c.preloadedAudios={};function ne(y){c.onAbort&&c.onAbort(y),y+="",Ot(y),fr=!0,y="abort("+y+"). Build with -s ASSERTIONS=1 for more info.";var m=new WebAssembly.RuntimeError(y);throw et(m),m}var ye="data:application/octet-stream;base64,";function Me(y){return y.startsWith(ye)}if(c.locateFile){var De="jxl_node_dec.wasm";Me(De)||(De=xt(De))}else var De=new URL("jxl_node_dec.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function yt(y){try{if(y==De&&Gt)return new Uint8Array(Gt);if(hn)return hn(y);throw"both async and sync fetching of the wasm failed"}catch(m){ne(m)}}function Xr(){return!Gt&&Kt&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+De+"'";return y.arrayBuffer()}).catch(function(){return yt(De)}):Promise.resolve().then(function(){return yt(De)})}function wn(){var y={a:Be};function m(U,z){var B=U.exports;c.asm=B,rn=c.asm.x,Rt(rn.buffer),an=c.asm.D,Fr(c.asm.y),Q()}Dt();function C(U){m(U.instance)}function h(U){return Xr().then(function(z){var B=WebAssembly.instantiate(z,y);return B}).then(U,function(z){Ot("failed to asynchronously prepare wasm: "+z),ne(z)})}function g(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(De)&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(U){var z=WebAssembly.instantiateStreaming(U,y);return z.then(C,function(B){return Ot("wasm streaming compile failed: "+B),Ot("falling back to ArrayBuffer instantiation"),h(C)})}):h(C)}if(c.instantiateWasm)try{var x=c.instantiateWasm(y,m);return x}catch(U){return Ot("Module.instantiateWasm callback failed with error: "+U),!1}return g().catch(et),{}}function Nn(y){for(;y.length>0;){var m=y.shift();if(typeof m=="function"){m(c);continue}var C=m.func;typeof C=="number"?m.arg===void 0?an.get(C)():an.get(C)(m.arg):C(m.arg===void 0?null:m.arg)}}function dr(y,m,C,h){ne("Assertion failed: "+Sr(y)+", at: "+[m?Sr(m):"unknown filename",C,h?Sr(h):"unknown function"])}function Wn(y,m){}function ri(y,m){return void 0}function cr(y,m,C,h,g){}function Br(y){switch(y){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+y)}}function Rr(){for(var y=new Array(256),m=0;m<256;++m)y[m]=String.fromCharCode(m);br=y}var br=void 0;function hr(y){for(var m="",C=y;_t[C];)m+=br[_t[C++]];return m}var lr={},Vt={},ln={},Un=48,_n=57;function It(y){if(y===void 0)return"_unknown";y=y.replace(/[^a-zA-Z0-9_]/g,"$");var m=y.charCodeAt(0);return m>=Un&&m<=_n?"_"+y:y}function Jn(y,m){return y=It(y),new Function("body","return function "+y+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(m)}function vr(y,m){var C=Jn(m,function(h){this.name=m,this.message=h;var g=new Error(h).stack;g!==void 0&&(this.stack=this.toString()+`
`+g.replace(/^Error(:[^\n]*)?\n/,""))});return C.prototype=Object.create(y.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},C}var Sn=void 0;function qn(y){throw new Sn(y)}var nr=void 0;function Bt(y){throw new nr(y)}function Vn(y,m,C){y.forEach(function(z){ln[z]=m});function h(z){var B=C(z);B.length!==y.length&&Bt("Mismatched type converter count");for(var N=0;N<y.length;++N)gn(y[N],B[N])}var g=new Array(m.length),x=[],U=0;m.forEach(function(z,B){Vt.hasOwnProperty(z)?g[B]=Vt[z]:(x.push(z),lr.hasOwnProperty(z)||(lr[z]=[]),lr[z].push(function(){g[B]=Vt[z],++U,U===x.length&&h(g)}))}),x.length===0&&h(g)}function gn(y,m,C){if(C=C||{},!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");var h=m.name;if(y||qn('type "'+h+'" must have a positive integer typeid pointer'),Vt.hasOwnProperty(y)){if(C.ignoreDuplicateRegistrations)return;qn("Cannot register type '"+h+"' twice")}if(Vt[y]=m,delete ln[y],lr.hasOwnProperty(y)){var g=lr[y];delete lr[y],g.forEach(function(x){x()})}}function Rn(y,m,C,h,g){var x=Br(C);m=hr(m),gn(y,{name:m,fromWireType:function(U){return!!U},toWireType:function(U,z){return z?h:g},argPackAdvance:8,readValueFromPointer:function(U){var z;if(C===1)z=Ln;else if(C===2)z=cn;else if(C===4)z=Ke;else throw new TypeError("Unknown boolean type size: "+m);return this.fromWireType(z[U>>x])},destructorFunction:null})}var Gn=[],rr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function xr(y){y>4&&--rr[y].refcount===0&&(rr[y]=void 0,Gn.push(y))}function fn(){for(var y=0,m=5;m<rr.length;++m)rr[m]!==void 0&&++y;return y}function Xn(){for(var y=5;y<rr.length;++y)if(rr[y]!==void 0)return rr[y];return null}function kn(){c.count_emval_handles=fn,c.get_first_emval=Xn}function Pt(y){switch(y){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var m=Gn.length?Gn.pop():rr.length;return rr[m]={refcount:1,value:y},m}}}function ar(y){return this.fromWireType(pt[y>>2])}function Lr(y,m){m=hr(m),gn(y,{name:m,fromWireType:function(C){var h=rr[C].value;return xr(C),h},toWireType:function(C,h){return Pt(h)},argPackAdvance:8,readValueFromPointer:ar,destructorFunction:null})}function An(y){if(y===null)return"null";var m=typeof y;return m==="object"||m==="array"||m==="function"?y.toString():""+y}function Er(y,m){switch(m){case 2:return function(C){return this.fromWireType(Zn[C>>2])};case 3:return function(C){return this.fromWireType(mt[C>>3])};default:throw new TypeError("Unknown float type: "+y)}}function jn(y,m,C){var h=Br(C);m=hr(m),gn(y,{name:m,fromWireType:function(g){return g},toWireType:function(g,x){if(typeof x!="number"&&typeof x!="boolean")throw new TypeError('Cannot convert "'+An(x)+'" to '+this.name);return x},argPackAdvance:8,readValueFromPointer:Er(m,h),destructorFunction:null})}function Or(y,m){if(!(y instanceof Function))throw new TypeError("new_ called with constructor type "+typeof y+" which is not a function");var C=Jn(y.name||"unknownFunctionName",function(){});C.prototype=y.prototype;var h=new C,g=y.apply(h,m);return g instanceof Object?g:h}function mi(y){for(;y.length;){var m=y.pop(),C=y.pop();C(m)}}function Nr(y,m,C,h,g){var x=m.length;x<2&&qn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var U=m[1]!==null&&C!==null,z=!1,B=1;B<m.length;++B)if(m[B]!==null&&m[B].destructorFunction===void 0){z=!0;break}for(var N=m[0].name!=="void",$="",ce="",B=0;B<x-2;++B)$+=(B!==0?", ":"")+"arg"+B,ce+=(B!==0?", ":"")+"arg"+B+"Wired";var V="return function "+It(y)+"("+$+`) {
if (arguments.length !== `+(x-2)+`) {
throwBindingError('function `+y+" called with ' + arguments.length + ' arguments, expected "+(x-2)+` args!');
}
`;z&&(V+=`var destructors = [];
`);var S=z?"destructors":"null",O=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],q=[qn,h,g,mi,m[0],m[1]];U&&(V+="var thisWired = classParam.toWireType("+S+`, this);
`);for(var B=0;B<x-2;++B)V+="var arg"+B+"Wired = argType"+B+".toWireType("+S+", arg"+B+"); // "+m[B+2].name+`
`,O.push("argType"+B),q.push(m[B+2]);if(U&&(ce="thisWired"+(ce.length>0?", ":"")+ce),V+=(N?"var rv = ":"")+"invoker(fn"+(ce.length>0?", ":"")+ce+`);
`,z)V+=`runDestructors(destructors);
`;else for(var B=U?1:2;B<m.length;++B){var oe=B===1?"thisWired":"arg"+(B-2)+"Wired";m[B].destructorFunction!==null&&(V+=oe+"_dtor("+oe+"); // "+m[B].name+`
`,O.push(oe+"_dtor"),q.push(m[B].destructorFunction))}N&&(V+=`var ret = retType.fromWireType(rv);
return ret;
`),V+=`}
`,O.push(V);var G=Or(Function,O).apply(null,q);return G}function Mr(y,m,C){if(y[m].overloadTable===void 0){var h=y[m];y[m]=function(){return y[m].overloadTable.hasOwnProperty(arguments.length)||qn("Function '"+C+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+y[m].overloadTable+")!"),y[m].overloadTable[arguments.length].apply(this,arguments)},y[m].overloadTable=[],y[m].overloadTable[h.argCount]=h}}function ui(y,m,C){c.hasOwnProperty(y)?((C===void 0||c[y].overloadTable!==void 0&&c[y].overloadTable[C]!==void 0)&&qn("Cannot register public name '"+y+"' twice"),Mr(c,y,y),c.hasOwnProperty(C)&&qn("Cannot register multiple overloads of a function with the same number of arguments ("+C+")!"),c[y].overloadTable[C]=m):(c[y]=m,C!==void 0&&(c[y].numArguments=C))}function Oi(y,m){for(var C=[],h=0;h<y;h++)C.push(Ke[(m>>2)+h]);return C}function ci(y,m,C){c.hasOwnProperty(y)||Bt("Replacing nonexistant public symbol"),c[y].overloadTable!==void 0&&C!==void 0?c[y].overloadTable[C]=m:(c[y]=m,c[y].argCount=C)}function Fi(y,m,C){var h=c["dynCall_"+y];return C&&C.length?h.apply(null,[m].concat(C)):h.call(null,m)}function Ci(y,m,C){return y.includes("j")?Fi(y,m,C):an.get(m).apply(null,C)}function Ni(y,m){var C=[];return function(){C.length=arguments.length;for(var h=0;h<arguments.length;h++)C[h]=arguments[h];return Ci(y,m,C)}}function Si(y,m){y=hr(y);function C(){return y.includes("j")?Ni(y,m):an.get(m)}var h=C();return typeof h!="function"&&qn("unknown function pointer with signature "+y+": "+m),h}var b=void 0;function H(y){var m=bt(y),C=hr(m);return st(m),C}function ie(y,m){var C=[],h={};function g(x){if(!h[x]&&!Vt[x]){if(ln[x]){ln[x].forEach(g);return}C.push(x),h[x]=!0}}throw m.forEach(g),new b(y+": "+C.map(H).join([", "]))}function D(y,m,C,h,g,x){var U=Oi(m,C);y=hr(y),g=Si(h,g),ui(y,function(){ie("Cannot call "+y+" due to unbound types",U)},m-1),Vn([],U,function(z){var B=[z[0],null].concat(z.slice(1));return ci(y,Nr(y,B,null,g,x),m-1),[]})}function J(y,m,C){switch(m){case 0:return C?function(g){return Ln[g]}:function(g){return _t[g]};case 1:return C?function(g){return cn[g>>1]}:function(g){return Wt[g>>1]};case 2:return C?function(g){return Ke[g>>2]}:function(g){return pt[g>>2]};default:throw new TypeError("Unknown integer type: "+y)}}function ue(y,m,C,h,g){m=hr(m),g===-1&&(g=4294967295);var x=Br(C),U=function(N){return N};if(h===0){var z=32-8*C;U=function(N){return N<<z>>>z}}var B=m.includes("unsigned");gn(y,{name:m,fromWireType:U,toWireType:function(N,$){if(typeof $!="number"&&typeof $!="boolean")throw new TypeError('Cannot convert "'+An($)+'" to '+this.name);if($<h||$>g)throw new TypeError('Passing a number "'+An($)+'" from JS side to C/C++ side to an argument of type "'+m+'", which is outside the valid range ['+h+", "+g+"]!");return B?$>>>0:$|0},argPackAdvance:8,readValueFromPointer:J(m,x,h!==0),destructorFunction:null})}function be(y,m,C){var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],g=h[m];function x(U){U=U>>2;var z=pt,B=z[U],N=z[U+1];return new g(mn,N,B)}C=hr(C),gn(y,{name:C,fromWireType:x,argPackAdvance:8,readValueFromPointer:x},{ignoreDuplicateRegistrations:!0})}function Re(y,m){m=hr(m);var C=m==="std::string";gn(y,{name:m,fromWireType:function(h){var g=pt[h>>2],x;if(C)for(var U=h+4,z=0;z<=g;++z){var B=h+4+z;if(z==g||_t[B]==0){var N=B-U,$=Sr(U,N);x===void 0?x=$:(x+=String.fromCharCode(0),x+=$),U=B+1}}else{for(var ce=new Array(g),z=0;z<g;++z)ce[z]=String.fromCharCode(_t[h+4+z]);x=ce.join("")}return st(h),x},toWireType:function(h,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var x,U=typeof g=="string";U||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array||qn("Cannot pass non-string to std::string"),C&&U?x=function(){return ni(g)}:x=function(){return g.length};var z=x(),B=We(4+z+1);if(pt[B>>2]=z,C&&U)si(g,B+4,z+1);else if(U)for(var N=0;N<z;++N){var $=g.charCodeAt(N);$>255&&(st(B),qn("String has UTF-16 code units that do not fit in 8 bits")),_t[B+4+N]=$}else for(var N=0;N<z;++N)_t[B+4+N]=g[N];return h!==null&&h.push(st,B),B},argPackAdvance:8,readValueFromPointer:ar,destructorFunction:function(h){st(h)}})}function Ze(y,m,C){C=hr(C);var h,g,x,U,z;m===2?(h=Ti,g=Ri,U=Ii,x=function(){return Wt},z=1):m===4&&(h=Pi,g=fi,U=di,x=function(){return pt},z=2),gn(y,{name:C,fromWireType:function(B){for(var N=pt[B>>2],$=x(),ce,V=B+4,S=0;S<=N;++S){var O=B+4+S*m;if(S==N||$[O>>z]==0){var q=O-V,oe=h(V,q);ce===void 0?ce=oe:(ce+=String.fromCharCode(0),ce+=oe),V=O+m}}return st(B),ce},toWireType:function(B,N){typeof N!="string"&&qn("Cannot pass non-string to C++ string type "+C);var $=U(N),ce=We(4+$+m);return pt[ce>>2]=$>>z,g(N,ce+4,$+m),B!==null&&B.push(st,ce),ce},argPackAdvance:8,readValueFromPointer:ar,destructorFunction:function(B){st(B)}})}function Nt(y,m){m=hr(m),gn(y,{isVoid:!0,name:m,argPackAdvance:0,fromWireType:function(){},toWireType:function(C,h){}})}var qt={};function $t(y){var m=qt[y];return m===void 0?hr(y):m}function At(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Ht(y){return y===0?Pt(At()):(y=$t(y),Pt(At()[y]))}function Yn(y){y>4&&(rr[y].refcount+=1)}function Tr(y,m){var C=Vt[y];return C===void 0&&qn(m+" has unknown type "+H(y)),C}function Ur(y){for(var m="",C=0;C<y;++C)m+=(C!==0?", ":"")+"arg"+C;for(var h="return function emval_allocator_"+y+`(constructor, argTypes, args) {
`,C=0;C<y;++C)h+="var argType"+C+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+C+'], "parameter '+C+`");
var arg`+C+" = argType"+C+`.readValueFromPointer(args);
args += argType`+C+`['argPackAdvance'];
`;return h+="var obj = new constructor("+m+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",h)(Tr,c,Pt)}var Qn={};function tr(y){return y||qn("Cannot use deleted val. handle = "+y),rr[y].value}function zn(y,m,C,h){y=tr(y);var g=Qn[m];return g||(g=Ur(m),Qn[m]=g),g(y,C,h)}function Vr(){ne()}function Ar(y,m,C){_t.copyWithin(y,m,m+C)}function Hn(y){try{return rn.grow(y-mn.byteLength+65535>>>16),Rt(rn.buffer),1}catch{}}function nn(y){var m=_t.length;y=y>>>0;var C=2147483648;if(y>C)return!1;for(var h=1;h<=4;h*=2){var g=m*(1+.2/h);g=Math.min(g,y+100663296);var x=Math.min(C,hi(Math.max(y,g),65536)),U=Hn(x);if(U)return!0}return!1}var on={mappings:{},buffers:[null,[],[]],printChar:function(y,m){var C=on.buffers[y];m===0||m===10?((y===1?pn:Ot)(Jr(C,0)),C.length=0):C.push(m)},varargs:void 0,get:function(){on.varargs+=4;var y=Ke[on.varargs-4>>2];return y},getStr:function(y){var m=Sr(y);return m},get64:function(y,m){return y}};function Kn(y){return 0}function pr(y,m,C,h,g){}function he(y,m,C,h){for(var g=0,x=0;x<C;x++){for(var U=Ke[m+x*8>>2],z=Ke[m+(x*8+4)>>2],B=0;B<z;B++)on.printChar(y,_t[U+B]);g+=z}return Ke[h>>2]=g,0}function ve(y){}Rr(),Sn=c.BindingError=vr(Error,"BindingError"),nr=c.InternalError=vr(Error,"InternalError"),kn(),b=c.UnboundTypeError=vr(Error,"UnboundTypeError");var Be={b:dr,m:ri,r:cr,n:Rn,w:Lr,j:jn,p:D,d:ue,c:be,k:Re,g:Ze,o:Nt,e:xr,l:Ht,h:Yn,i:zn,a:Vr,t:Ar,f:nn,u:Kn,q:pr,v:he,s:ve};wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.y).apply(null,arguments)};var We=c._malloc=function(){return(We=c._malloc=c.asm.z).apply(null,arguments)},st=c._free=function(){return(st=c._free=c.asm.A).apply(null,arguments)},bt=c.___getTypeName=function(){return(bt=c.___getTypeName=c.asm.B).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.C).apply(null,arguments)},c.dynCall_iiji=function(){return(c.dynCall_iiji=c.asm.E).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.F).apply(null,arguments)};var Ft;sr=function y(){Ft||R(),Ft||(sr=y)};function R(y){if(Dn>0||(Pr(),Dn>0))return;function m(){Ft||(Ft=!0,c.calledRun=!0,!fr&&(ai(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),pi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),m()},1)):m()}if(c.run=R,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return R(),c.ready}}(),de=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/jxl_node_dec-c51936e8.wasm").href:new URL("jxl_node_dec-c51936e8.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,Ie=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(B,N){Xe=B,et=N});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(B){return c.locateFile?c.locateFile(B,Mt):Mt+B}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(N,$){return tn||(tn=gi),vn||(vn=gi),N=vn.normalize(N),tn.readFileSync(N,$?null:"utf8")},hn=function(N){var $=Jt(N,!0);return $.buffer||($=new Uint8Array($)),Ir($.buffer),$},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&ne("no native wasm support detected");var rn,fr=!1;function Ir(B,N){B||ne("Assertion failed: "+N)}var Tn=new TextDecoder("utf8");function Jr(B,N,$){for(var ce=N+$,V=N;B[V]&&!(V>=ce);)++V;return Tn.decode(B.subarray?B.subarray(N,V):new Uint8Array(B.slice(N,V)))}function Sr(B,N){if(!B)return"";for(var $=B+N,ce=B;!(ce>=$)&&_t[ce];)++ce;return Tn.decode(_t.subarray(B,ce))}function kr(B,N,$,ce){if(!(ce>0))return 0;for(var V=$,S=$+ce-1,O=0;O<B.length;++O){var q=B.charCodeAt(O);if(q>=55296&&q<=57343){var oe=B.charCodeAt(++O);q=65536+((q&1023)<<10)|oe&1023}if(q<=127){if($>=S)break;N[$++]=q}else if(q<=2047){if($+1>=S)break;N[$++]=192|q>>6,N[$++]=128|q&63}else if(q<=65535){if($+2>=S)break;N[$++]=224|q>>12,N[$++]=128|q>>6&63,N[$++]=128|q&63}else{if($+3>=S)break;N[$++]=240|q>>18,N[$++]=128|q>>12&63,N[$++]=128|q>>6&63,N[$++]=128|q&63}}return N[$]=0,$-V}function si(B,N,$){return kr(B,_t,N,$)}function ni(B){for(var N=0,$=0;$<B.length;++$){var ce=B.charCodeAt($);ce>=55296&&ce<=57343&&(ce=65536+((ce&1023)<<10)|B.charCodeAt(++$)&1023),ce<=127?++N:ce<=2047?N+=2:ce<=65535?N+=3:N+=4}return N}var Di=new TextDecoder("utf-16le");function Ti(B,N){for(var $=B,ce=$>>1,V=ce+N/2;!(ce>=V)&&Wt[ce];)++ce;return $=ce<<1,Di.decode(_t.subarray(B,$))}function Ri(B,N,$){if($===void 0&&($=2147483647),$<2)return 0;$-=2;for(var ce=N,V=$<B.length*2?$/2:B.length,S=0;S<V;++S){var O=B.charCodeAt(S);cn[N>>1]=O,N+=2}return cn[N>>1]=0,N-ce}function Ii(B){return B.length*2}function Pi(B,N){for(var $=0,ce="";!($>=N/4);){var V=Ke[B+$*4>>2];if(V==0)break;if(++$,V>=65536){var S=V-65536;ce+=String.fromCharCode(55296|S>>10,56320|S&1023)}else ce+=String.fromCharCode(V)}return ce}function fi(B,N,$){if($===void 0&&($=2147483647),$<4)return 0;for(var ce=N,V=ce+$-4,S=0;S<B.length;++S){var O=B.charCodeAt(S);if(O>=55296&&O<=57343){var q=B.charCodeAt(++S);O=65536+((O&1023)<<10)|q&1023}if(Ke[N>>2]=O,N+=4,N+4>V)break}return Ke[N>>2]=0,N-ce}function di(B){for(var N=0,$=0;$<B.length;++$){var ce=B.charCodeAt($);ce>=55296&&ce<=57343&&++$,N+=4}return N}function hi(B,N){return B%N>0&&(B+=N-B%N),B}var mn,Ln,_t,cn,Wt,Ke,pt,Zn,mt;function Rt(B){mn=B,c.HEAP8=Ln=new Int8Array(B),c.HEAP16=cn=new Int16Array(B),c.HEAP32=Ke=new Int32Array(B),c.HEAPU8=_t=new Uint8Array(B),c.HEAPU16=Wt=new Uint16Array(B),c.HEAPU32=pt=new Uint32Array(B),c.HEAPF32=Zn=new Float32Array(B),c.HEAPF64=mt=new Float64Array(B)}c.INITIAL_MEMORY;var an,Hr=[],Wr=[],On=[];function Pr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Nn(Hr)}function ai(){Nn(Wr)}function pi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());Nn(On)}function wi(B){Hr.unshift(B)}function Fr(B){Wr.unshift(B)}function $r(B){On.unshift(B)}var Dn=0,sr=null;function Dt(B){Dn++,c.monitorRunDependencies&&c.monitorRunDependencies(Dn)}function Q(B){if(Dn--,c.monitorRunDependencies&&c.monitorRunDependencies(Dn),Dn==0&&sr){var N=sr;sr=null,N()}}c.preloadedImages={},c.preloadedAudios={};function ne(B){c.onAbort&&c.onAbort(B),B+="",Ot(B),fr=!0,B="abort("+B+"). Build with -s ASSERTIONS=1 for more info.";var N=new WebAssembly.RuntimeError(B);throw et(N),N}var ye="data:application/octet-stream;base64,";function Me(B){return B.startsWith(ye)}if(c.locateFile){var De="wp2_node_enc.wasm";Me(De)||(De=xt(De))}else var De=new URL("wp2_node_enc.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function yt(B){try{if(B==De&&Gt)return new Uint8Array(Gt);if(hn)return hn(B);throw"both async and sync fetching of the wasm failed"}catch(N){ne(N)}}function Xr(){return!Gt&&Kt&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(B){if(!B.ok)throw"failed to load wasm binary file at '"+De+"'";return B.arrayBuffer()}).catch(function(){return yt(De)}):Promise.resolve().then(function(){return yt(De)})}function wn(){var B={a:C};function N(O,q){var oe=O.exports;c.asm=oe,rn=c.asm.C,Rt(rn.buffer),an=c.asm.I,Fr(c.asm.D),Q()}Dt();function $(O){N(O.instance)}function ce(O){return Xr().then(function(q){var oe=WebAssembly.instantiate(q,B);return oe}).then(O,function(q){Ot("failed to asynchronously prepare wasm: "+q),ne(q)})}function V(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(De)&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(O){var q=WebAssembly.instantiateStreaming(O,B);return q.then($,function(oe){return Ot("wasm streaming compile failed: "+oe),Ot("falling back to ArrayBuffer instantiation"),ce($)})}):ce($)}if(c.instantiateWasm)try{var S=c.instantiateWasm(B,N);return S}catch(O){return Ot("Module.instantiateWasm callback failed with error: "+O),!1}return V().catch(et),{}}function Nn(B){for(;B.length>0;){var N=B.shift();if(typeof N=="function"){N(c);continue}var $=N.func;typeof $=="number"?N.arg===void 0?an.get($)():an.get($)(N.arg):$(N.arg===void 0?null:N.arg)}}function dr(B,N,$,ce){ne("Assertion failed: "+Sr(B)+", at: "+[N?Sr(N):"unknown filename",$,ce?Sr(ce):"unknown function"])}var Wn={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ri(B){return g(B+Wn.SIZE)+Wn.SIZE}function cr(B,N){}function Br(B,N){return void 0}function Rr(B){this.excPtr=B,this.ptr=B-Wn.SIZE,this.set_type=function(N){Ke[this.ptr+Wn.TYPE_OFFSET>>2]=N},this.get_type=function(){return Ke[this.ptr+Wn.TYPE_OFFSET>>2]},this.set_destructor=function(N){Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]=N},this.get_destructor=function(){return Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(N){Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=N},this.set_caught=function(N){N=N?1:0,Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]=N},this.get_caught=function(){return Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(N){N=N?1:0,Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]=N},this.get_rethrown=function(){return Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]!=0},this.init=function(N,$){this.set_type(N),this.set_destructor($),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var N=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=N+1},this.release_ref=function(){var N=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];return Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=N-1,N===1}}function br(B,N,$){var ce=new Rr(B);throw ce.init(N,$),B}var hr={};function lr(B){for(;B.length;){var N=B.pop(),$=B.pop();$(N)}}function Vt(B){return this.fromWireType(pt[B>>2])}var ln={},Un={},_n={},It=48,Jn=57;function vr(B){if(B===void 0)return"_unknown";B=B.replace(/[^a-zA-Z0-9_]/g,"$");var N=B.charCodeAt(0);return N>=It&&N<=Jn?"_"+B:B}function Sn(B,N){return B=vr(B),new Function("body","return function "+B+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(N)}function qn(B,N){var $=Sn(N,function(ce){this.name=N,this.message=ce;var V=new Error(ce).stack;V!==void 0&&(this.stack=this.toString()+`
`+V.replace(/^Error(:[^\n]*)?\n/,""))});return $.prototype=Object.create(B.prototype),$.prototype.constructor=$,$.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},$}var nr=void 0;function Bt(B){throw new nr(B)}function Vn(B,N,$){B.forEach(function(q){_n[q]=N});function ce(q){var oe=$(q);oe.length!==B.length&&Bt("Mismatched type converter count");for(var G=0;G<B.length;++G)Pt(B[G],oe[G])}var V=new Array(N.length),S=[],O=0;N.forEach(function(q,oe){Un.hasOwnProperty(q)?V[oe]=Un[q]:(S.push(q),ln.hasOwnProperty(q)||(ln[q]=[]),ln[q].push(function(){V[oe]=Un[q],++O,O===S.length&&ce(V)}))}),S.length===0&&ce(V)}function gn(B){var N=hr[B];delete hr[B];var $=N.rawConstructor,ce=N.rawDestructor,V=N.fields,S=V.map(function(O){return O.getterReturnType}).concat(V.map(function(O){return O.setterArgumentType}));Vn([B],S,function(O){var q={};return V.forEach(function(oe,G){var X=oe.fieldName,te=O[G],le=oe.getter,Ce=oe.getterContext,$e=O[G+V.length],lt=oe.setter,tt=oe.setterContext;q[X]={read:function(dt){return te.fromWireType(le(Ce,dt))},write:function(dt,zt){var se=[];lt(tt,dt,$e.toWireType(se,zt)),lr(se)}}}),[{name:N.name,fromWireType:function(oe){var G={};for(var X in q)G[X]=q[X].read(oe);return ce(oe),G},toWireType:function(oe,G){for(var X in q)if(!(X in G))throw new TypeError('Missing field:  "'+X+'"');var te=$();for(X in q)q[X].write(te,G[X]);return oe!==null&&oe.push(ce,te),te},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:ce}]})}function Rn(B,N,$,ce,V){}function Gn(B){switch(B){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+B)}}function rr(){for(var B=new Array(256),N=0;N<256;++N)B[N]=String.fromCharCode(N);xr=B}var xr=void 0;function fn(B){for(var N="",$=B;_t[$];)N+=xr[_t[$++]];return N}var Xn=void 0;function kn(B){throw new Xn(B)}function Pt(B,N,$){if($=$||{},!("argPackAdvance"in N))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ce=N.name;if(B||kn('type "'+ce+'" must have a positive integer typeid pointer'),Un.hasOwnProperty(B)){if($.ignoreDuplicateRegistrations)return;kn("Cannot register type '"+ce+"' twice")}if(Un[B]=N,delete _n[B],ln.hasOwnProperty(B)){var V=ln[B];delete ln[B],V.forEach(function(S){S()})}}function ar(B,N,$,ce,V){var S=Gn($);N=fn(N),Pt(B,{name:N,fromWireType:function(O){return!!O},toWireType:function(O,q){return q?ce:V},argPackAdvance:8,readValueFromPointer:function(O){var q;if($===1)q=Ln;else if($===2)q=cn;else if($===4)q=Ke;else throw new TypeError("Unknown boolean type size: "+N);return this.fromWireType(q[O>>S])},destructorFunction:null})}var Lr=[],An=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Er(B){B>4&&--An[B].refcount===0&&(An[B]=void 0,Lr.push(B))}function jn(){for(var B=0,N=5;N<An.length;++N)An[N]!==void 0&&++B;return B}function Or(){for(var B=5;B<An.length;++B)if(An[B]!==void 0)return An[B];return null}function mi(){c.count_emval_handles=jn,c.get_first_emval=Or}function Nr(B){switch(B){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var N=Lr.length?Lr.pop():An.length;return An[N]={refcount:1,value:B},N}}}function Mr(B,N){N=fn(N),Pt(B,{name:N,fromWireType:function($){var ce=An[$].value;return Er($),ce},toWireType:function($,ce){return Nr(ce)},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:null})}function ui(B){if(B===null)return"null";var N=typeof B;return N==="object"||N==="array"||N==="function"?B.toString():""+B}function Oi(B,N){switch(N){case 2:return function($){return this.fromWireType(Zn[$>>2])};case 3:return function($){return this.fromWireType(mt[$>>3])};default:throw new TypeError("Unknown float type: "+B)}}function ci(B,N,$){var ce=Gn($);N=fn(N),Pt(B,{name:N,fromWireType:function(V){return V},toWireType:function(V,S){if(typeof S!="number"&&typeof S!="boolean")throw new TypeError('Cannot convert "'+ui(S)+'" to '+this.name);return S},argPackAdvance:8,readValueFromPointer:Oi(N,ce),destructorFunction:null})}function Fi(B,N){if(!(B instanceof Function))throw new TypeError("new_ called with constructor type "+typeof B+" which is not a function");var $=Sn(B.name||"unknownFunctionName",function(){});$.prototype=B.prototype;var ce=new $,V=B.apply(ce,N);return V instanceof Object?V:ce}function Ci(B,N,$,ce,V){var S=N.length;S<2&&kn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var O=N[1]!==null&&$!==null,q=!1,oe=1;oe<N.length;++oe)if(N[oe]!==null&&N[oe].destructorFunction===void 0){q=!0;break}for(var G=N[0].name!=="void",X="",te="",oe=0;oe<S-2;++oe)X+=(oe!==0?", ":"")+"arg"+oe,te+=(oe!==0?", ":"")+"arg"+oe+"Wired";var le="return function "+vr(B)+"("+X+`) {
if (arguments.length !== `+(S-2)+`) {
throwBindingError('function `+B+" called with ' + arguments.length + ' arguments, expected "+(S-2)+` args!');
}
`;q&&(le+=`var destructors = [];
`);var Ce=q?"destructors":"null",$e=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],lt=[kn,ce,V,lr,N[0],N[1]];O&&(le+="var thisWired = classParam.toWireType("+Ce+`, this);
`);for(var oe=0;oe<S-2;++oe)le+="var arg"+oe+"Wired = argType"+oe+".toWireType("+Ce+", arg"+oe+"); // "+N[oe+2].name+`
`,$e.push("argType"+oe),lt.push(N[oe+2]);if(O&&(te="thisWired"+(te.length>0?", ":"")+te),le+=(G?"var rv = ":"")+"invoker(fn"+(te.length>0?", ":"")+te+`);
`,q)le+=`runDestructors(destructors);
`;else for(var oe=O?1:2;oe<N.length;++oe){var tt=oe===1?"thisWired":"arg"+(oe-2)+"Wired";N[oe].destructorFunction!==null&&(le+=tt+"_dtor("+tt+"); // "+N[oe].name+`
`,$e.push(tt+"_dtor"),lt.push(N[oe].destructorFunction))}G&&(le+=`var ret = retType.fromWireType(rv);
return ret;
`),le+=`}
`,$e.push(le);var dt=Fi(Function,$e).apply(null,lt);return dt}function Ni(B,N,$){if(B[N].overloadTable===void 0){var ce=B[N];B[N]=function(){return B[N].overloadTable.hasOwnProperty(arguments.length)||kn("Function '"+$+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+B[N].overloadTable+")!"),B[N].overloadTable[arguments.length].apply(this,arguments)},B[N].overloadTable=[],B[N].overloadTable[ce.argCount]=ce}}function Si(B,N,$){c.hasOwnProperty(B)?(($===void 0||c[B].overloadTable!==void 0&&c[B].overloadTable[$]!==void 0)&&kn("Cannot register public name '"+B+"' twice"),Ni(c,B,B),c.hasOwnProperty($)&&kn("Cannot register multiple overloads of a function with the same number of arguments ("+$+")!"),c[B].overloadTable[$]=N):(c[B]=N,$!==void 0&&(c[B].numArguments=$))}function b(B,N){for(var $=[],ce=0;ce<B;ce++)$.push(Ke[(N>>2)+ce]);return $}function H(B,N,$){c.hasOwnProperty(B)||Bt("Replacing nonexistant public symbol"),c[B].overloadTable!==void 0&&$!==void 0?c[B].overloadTable[$]=N:(c[B]=N,c[B].argCount=$)}function ie(B,N,$){var ce=c["dynCall_"+B];return $&&$.length?ce.apply(null,[N].concat($)):ce.call(null,N)}function D(B,N,$){return B.includes("j")?ie(B,N,$):an.get(N).apply(null,$)}function J(B,N){var $=[];return function(){$.length=arguments.length;for(var ce=0;ce<arguments.length;ce++)$[ce]=arguments[ce];return D(B,N,$)}}function ue(B,N){B=fn(B);function $(){return B.includes("j")?J(B,N):an.get(N)}var ce=$();return typeof ce!="function"&&kn("unknown function pointer with signature "+B+": "+N),ce}var be=void 0;function Re(B){var N=x(B),$=fn(N);return h(N),$}function Ze(B,N){var $=[],ce={};function V(S){if(!ce[S]&&!Un[S]){if(_n[S]){_n[S].forEach(V);return}$.push(S),ce[S]=!0}}throw N.forEach(V),new be(B+": "+$.map(Re).join([", "]))}function Nt(B,N,$,ce,V,S){var O=b(N,$);B=fn(B),V=ue(ce,V),Si(B,function(){Ze("Cannot call "+B+" due to unbound types",O)},N-1),Vn([],O,function(q){var oe=[q[0],null].concat(q.slice(1));return H(B,Ci(B,oe,null,V,S),N-1),[]})}function qt(B,N,$){switch(N){case 0:return $?function(V){return Ln[V]}:function(V){return _t[V]};case 1:return $?function(V){return cn[V>>1]}:function(V){return Wt[V>>1]};case 2:return $?function(V){return Ke[V>>2]}:function(V){return pt[V>>2]};default:throw new TypeError("Unknown integer type: "+B)}}function $t(B,N,$,ce,V){N=fn(N),V===-1&&(V=4294967295);var S=Gn($),O=function(G){return G};if(ce===0){var q=32-8*$;O=function(G){return G<<q>>>q}}var oe=N.includes("unsigned");Pt(B,{name:N,fromWireType:O,toWireType:function(G,X){if(typeof X!="number"&&typeof X!="boolean")throw new TypeError('Cannot convert "'+ui(X)+'" to '+this.name);if(X<ce||X>V)throw new TypeError('Passing a number "'+ui(X)+'" from JS side to C/C++ side to an argument of type "'+N+'", which is outside the valid range ['+ce+", "+V+"]!");return oe?X>>>0:X|0},argPackAdvance:8,readValueFromPointer:qt(N,S,ce!==0),destructorFunction:null})}function At(B,N,$){var ce=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],V=ce[N];function S(O){O=O>>2;var q=pt,oe=q[O],G=q[O+1];return new V(mn,G,oe)}$=fn($),Pt(B,{name:$,fromWireType:S,argPackAdvance:8,readValueFromPointer:S},{ignoreDuplicateRegistrations:!0})}function Ht(B,N){N=fn(N);var $=N==="std::string";Pt(B,{name:N,fromWireType:function(ce){var V=pt[ce>>2],S;if($)for(var O=ce+4,q=0;q<=V;++q){var oe=ce+4+q;if(q==V||_t[oe]==0){var G=oe-O,X=Sr(O,G);S===void 0?S=X:(S+=String.fromCharCode(0),S+=X),O=oe+1}}else{for(var te=new Array(V),q=0;q<V;++q)te[q]=String.fromCharCode(_t[ce+4+q]);S=te.join("")}return h(ce),S},toWireType:function(ce,V){V instanceof ArrayBuffer&&(V=new Uint8Array(V));var S,O=typeof V=="string";O||V instanceof Uint8Array||V instanceof Uint8ClampedArray||V instanceof Int8Array||kn("Cannot pass non-string to std::string"),$&&O?S=function(){return ni(V)}:S=function(){return V.length};var q=S(),oe=g(4+q+1);if(pt[oe>>2]=q,$&&O)si(V,oe+4,q+1);else if(O)for(var G=0;G<q;++G){var X=V.charCodeAt(G);X>255&&(h(oe),kn("String has UTF-16 code units that do not fit in 8 bits")),_t[oe+4+G]=X}else for(var G=0;G<q;++G)_t[oe+4+G]=V[G];return ce!==null&&ce.push(h,oe),oe},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:function(ce){h(ce)}})}function Yn(B,N,$){$=fn($);var ce,V,S,O,q;N===2?(ce=Ti,V=Ri,O=Ii,S=function(){return Wt},q=1):N===4&&(ce=Pi,V=fi,O=di,S=function(){return pt},q=2),Pt(B,{name:$,fromWireType:function(oe){for(var G=pt[oe>>2],X=S(),te,le=oe+4,Ce=0;Ce<=G;++Ce){var $e=oe+4+Ce*N;if(Ce==G||X[$e>>q]==0){var lt=$e-le,tt=ce(le,lt);te===void 0?te=tt:(te+=String.fromCharCode(0),te+=tt),le=$e+N}}return h(oe),te},toWireType:function(oe,G){typeof G!="string"&&kn("Cannot pass non-string to C++ string type "+$);var X=O(G),te=g(4+X+N);return pt[te>>2]=X>>q,V(G,te+4,X+N),oe!==null&&oe.push(h,te),te},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:function(oe){h(oe)}})}function Tr(B,N,$,ce,V,S){hr[B]={name:fn(N),rawConstructor:ue($,ce),rawDestructor:ue(V,S),fields:[]}}function Ur(B,N,$,ce,V,S,O,q,oe,G){hr[B].fields.push({fieldName:fn(N),getterReturnType:$,getter:ue(ce,V),getterContext:S,setterArgumentType:O,setter:ue(q,oe),setterContext:G})}function Qn(B,N){N=fn(N),Pt(B,{isVoid:!0,name:N,argPackAdvance:0,fromWireType:function(){},toWireType:function($,ce){}})}var tr={};function zn(B){var N=tr[B];return N===void 0?fn(B):N}function Vr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Ar(B){return B===0?Nr(Vr()):(B=zn(B),Nr(Vr()[B]))}function Hn(B){B>4&&(An[B].refcount+=1)}function nn(B,N){var $=Un[B];return $===void 0&&kn(N+" has unknown type "+Re(B)),$}function on(B){for(var N="",$=0;$<B;++$)N+=($!==0?", ":"")+"arg"+$;for(var ce="return function emval_allocator_"+B+`(constructor, argTypes, args) {
`,$=0;$<B;++$)ce+="var argType"+$+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+$+'], "parameter '+$+`");
var arg`+$+" = argType"+$+`.readValueFromPointer(args);
args += argType`+$+`['argPackAdvance'];
`;return ce+="var obj = new constructor("+N+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",ce)(nn,c,Nr)}var Kn={};function pr(B){return B||kn("Cannot use deleted val. handle = "+B),An[B].value}function he(B,N,$,ce){B=pr(B);var V=Kn[N];return V||(V=on(N),Kn[N]=V),V(B,$,ce)}function ve(){ne()}function Be(B,N,$){_t.copyWithin(B,N,N+$)}function We(B){try{return rn.grow(B-mn.byteLength+65535>>>16),Rt(rn.buffer),1}catch{}}function st(B){var N=_t.length;B=B>>>0;var $=2147483648;if(B>$)return!1;for(var ce=1;ce<=4;ce*=2){var V=N*(1+.2/ce);V=Math.min(V,B+100663296);var S=Math.min($,hi(Math.max(B,V),65536)),O=We(S);if(O)return!0}return!1}var bt={mappings:{},buffers:[null,[],[]],printChar:function(B,N){var $=bt.buffers[B];N===0||N===10?((B===1?pn:Ot)(Jr($,0)),$.length=0):$.push(N)},varargs:void 0,get:function(){bt.varargs+=4;var B=Ke[bt.varargs-4>>2];return B},getStr:function(B){var N=Sr(B);return N},get64:function(B,N){return B}};function Ft(B){return 0}function R(B,N,$,ce,V){}function y(B,N,$,ce){for(var V=0,S=0;S<$;S++){for(var O=Ke[N+S*8>>2],q=Ke[N+(S*8+4)>>2],oe=0;oe<q;oe++)bt.printChar(B,_t[O+oe]);V+=q}return Ke[ce>>2]=V,0}function m(B){}nr=c.InternalError=qn(Error,"InternalError"),rr(),Xn=c.BindingError=qn(Error,"BindingError"),mi(),be=c.UnboundTypeError=qn(Error,"UnboundTypeError");var C={o:dr,z:ri,B:Br,y:br,l:gn,q:Rn,w:ar,v:Mr,h:ci,k:Nt,c:$t,a:At,i:Ht,e:Yn,m:Tr,b:Ur,x:Qn,g:Er,A:Ar,j:Hn,n:he,f:ve,s:Be,d:st,u:Ft,p:R,t:y,r:m};wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.D).apply(null,arguments)};var h=c._free=function(){return(h=c._free=c.asm.E).apply(null,arguments)},g=c._malloc=function(){return(g=c._malloc=c.asm.F).apply(null,arguments)},x=c.___getTypeName=function(){return(x=c.___getTypeName=c.asm.G).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.H).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.J).apply(null,arguments)};var U;sr=function B(){U||z(),U||(sr=B)};function z(B){if(Dn>0||(Pr(),Dn>0))return;function N(){U||(U=!0,c.calledRun=!0,!fr&&(ai(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),pi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),N()},1)):N()}if(c.run=z,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return z(),c.ready}}(),Pe=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/wp2_node_enc-683ca61a.wasm").href:new URL("wp2_node_enc-683ca61a.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,we=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(m,C){Xe=m,et=C});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(m){return c.locateFile?c.locateFile(m,Mt):Mt+m}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(C,h){return tn||(tn=gi),vn||(vn=gi),C=vn.normalize(C),tn.readFileSync(C,h?null:"utf8")},hn=function(C){var h=Jt(C,!0);return h.buffer||(h=new Uint8Array(h)),Ir(h.buffer),h},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&ne("no native wasm support detected");var rn,fr=!1;function Ir(m,C){m||ne("Assertion failed: "+C)}var Tn=new TextDecoder("utf8");function Jr(m,C,h){for(var g=C+h,x=C;m[x]&&!(x>=g);)++x;return Tn.decode(m.subarray?m.subarray(C,x):new Uint8Array(m.slice(C,x)))}function Sr(m,C){if(!m)return"";for(var h=m+C,g=m;!(g>=h)&&_t[g];)++g;return Tn.decode(_t.subarray(m,g))}function kr(m,C,h,g){if(!(g>0))return 0;for(var x=h,U=h+g-1,z=0;z<m.length;++z){var B=m.charCodeAt(z);if(B>=55296&&B<=57343){var N=m.charCodeAt(++z);B=65536+((B&1023)<<10)|N&1023}if(B<=127){if(h>=U)break;C[h++]=B}else if(B<=2047){if(h+1>=U)break;C[h++]=192|B>>6,C[h++]=128|B&63}else if(B<=65535){if(h+2>=U)break;C[h++]=224|B>>12,C[h++]=128|B>>6&63,C[h++]=128|B&63}else{if(h+3>=U)break;C[h++]=240|B>>18,C[h++]=128|B>>12&63,C[h++]=128|B>>6&63,C[h++]=128|B&63}}return C[h]=0,h-x}function si(m,C,h){return kr(m,_t,C,h)}function ni(m){for(var C=0,h=0;h<m.length;++h){var g=m.charCodeAt(h);g>=55296&&g<=57343&&(g=65536+((g&1023)<<10)|m.charCodeAt(++h)&1023),g<=127?++C:g<=2047?C+=2:g<=65535?C+=3:C+=4}return C}var Di=new TextDecoder("utf-16le");function Ti(m,C){for(var h=m,g=h>>1,x=g+C/2;!(g>=x)&&Wt[g];)++g;return h=g<<1,Di.decode(_t.subarray(m,h))}function Ri(m,C,h){if(h===void 0&&(h=2147483647),h<2)return 0;h-=2;for(var g=C,x=h<m.length*2?h/2:m.length,U=0;U<x;++U){var z=m.charCodeAt(U);cn[C>>1]=z,C+=2}return cn[C>>1]=0,C-g}function Ii(m){return m.length*2}function Pi(m,C){for(var h=0,g="";!(h>=C/4);){var x=Ke[m+h*4>>2];if(x==0)break;if(++h,x>=65536){var U=x-65536;g+=String.fromCharCode(55296|U>>10,56320|U&1023)}else g+=String.fromCharCode(x)}return g}function fi(m,C,h){if(h===void 0&&(h=2147483647),h<4)return 0;for(var g=C,x=g+h-4,U=0;U<m.length;++U){var z=m.charCodeAt(U);if(z>=55296&&z<=57343){var B=m.charCodeAt(++U);z=65536+((z&1023)<<10)|B&1023}if(Ke[C>>2]=z,C+=4,C+4>x)break}return Ke[C>>2]=0,C-g}function di(m){for(var C=0,h=0;h<m.length;++h){var g=m.charCodeAt(h);g>=55296&&g<=57343&&++h,C+=4}return C}function hi(m,C){return m%C>0&&(m+=C-m%C),m}var mn,Ln,_t,cn,Wt,Ke,pt,Zn,mt;function Rt(m){mn=m,c.HEAP8=Ln=new Int8Array(m),c.HEAP16=cn=new Int16Array(m),c.HEAP32=Ke=new Int32Array(m),c.HEAPU8=_t=new Uint8Array(m),c.HEAPU16=Wt=new Uint16Array(m),c.HEAPU32=pt=new Uint32Array(m),c.HEAPF32=Zn=new Float32Array(m),c.HEAPF64=mt=new Float64Array(m)}c.INITIAL_MEMORY;var an,Hr=[],Wr=[],On=[];function Pr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Nn(Hr)}function ai(){Nn(Wr)}function pi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());Nn(On)}function wi(m){Hr.unshift(m)}function Fr(m){Wr.unshift(m)}function $r(m){On.unshift(m)}var Dn=0,sr=null;function Dt(m){Dn++,c.monitorRunDependencies&&c.monitorRunDependencies(Dn)}function Q(m){if(Dn--,c.monitorRunDependencies&&c.monitorRunDependencies(Dn),Dn==0&&sr){var C=sr;sr=null,C()}}c.preloadedImages={},c.preloadedAudios={};function ne(m){c.onAbort&&c.onAbort(m),m+="",Ot(m),fr=!0,m="abort("+m+"). Build with -s ASSERTIONS=1 for more info.";var C=new WebAssembly.RuntimeError(m);throw et(C),C}var ye="data:application/octet-stream;base64,";function Me(m){return m.startsWith(ye)}if(c.locateFile){var De="wp2_node_dec.wasm";Me(De)||(De=xt(De))}else var De=new URL("wp2_node_dec.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function yt(m){try{if(m==De&&Gt)return new Uint8Array(Gt);if(hn)return hn(m);throw"both async and sync fetching of the wasm failed"}catch(C){ne(C)}}function Xr(){return!Gt&&Kt&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(m){if(!m.ok)throw"failed to load wasm binary file at '"+De+"'";return m.arrayBuffer()}).catch(function(){return yt(De)}):Promise.resolve().then(function(){return yt(De)})}function wn(){var m={a:We};function C(z,B){var N=z.exports;c.asm=N,rn=c.asm.w,Rt(rn.buffer),an=c.asm.C,Fr(c.asm.x),Q()}Dt();function h(z){C(z.instance)}function g(z){return Xr().then(function(B){var N=WebAssembly.instantiate(B,m);return N}).then(z,function(B){Ot("failed to asynchronously prepare wasm: "+B),ne(B)})}function x(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(De)&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(z){var B=WebAssembly.instantiateStreaming(z,m);return B.then(h,function(N){return Ot("wasm streaming compile failed: "+N),Ot("falling back to ArrayBuffer instantiation"),g(h)})}):g(h)}if(c.instantiateWasm)try{var U=c.instantiateWasm(m,C);return U}catch(z){return Ot("Module.instantiateWasm callback failed with error: "+z),!1}return x().catch(et),{}}function Nn(m){for(;m.length>0;){var C=m.shift();if(typeof C=="function"){C(c);continue}var h=C.func;typeof h=="number"?C.arg===void 0?an.get(h)():an.get(h)(C.arg):h(C.arg===void 0?null:C.arg)}}var dr={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Wn(m){return bt(m+dr.SIZE)+dr.SIZE}function ri(m,C){}function cr(m,C){return void 0}function Br(m){this.excPtr=m,this.ptr=m-dr.SIZE,this.set_type=function(C){Ke[this.ptr+dr.TYPE_OFFSET>>2]=C},this.get_type=function(){return Ke[this.ptr+dr.TYPE_OFFSET>>2]},this.set_destructor=function(C){Ke[this.ptr+dr.DESTRUCTOR_OFFSET>>2]=C},this.get_destructor=function(){return Ke[this.ptr+dr.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(C){Ke[this.ptr+dr.REFCOUNT_OFFSET>>2]=C},this.set_caught=function(C){C=C?1:0,Ln[this.ptr+dr.CAUGHT_OFFSET>>0]=C},this.get_caught=function(){return Ln[this.ptr+dr.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(C){C=C?1:0,Ln[this.ptr+dr.RETHROWN_OFFSET>>0]=C},this.get_rethrown=function(){return Ln[this.ptr+dr.RETHROWN_OFFSET>>0]!=0},this.init=function(C,h){this.set_type(C),this.set_destructor(h),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var C=Ke[this.ptr+dr.REFCOUNT_OFFSET>>2];Ke[this.ptr+dr.REFCOUNT_OFFSET>>2]=C+1},this.release_ref=function(){var C=Ke[this.ptr+dr.REFCOUNT_OFFSET>>2];return Ke[this.ptr+dr.REFCOUNT_OFFSET>>2]=C-1,C===1}}function Rr(m,C,h){var g=new Br(m);throw g.init(C,h),m}function br(m,C,h,g,x){}function hr(m){switch(m){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+m)}}function lr(){for(var m=new Array(256),C=0;C<256;++C)m[C]=String.fromCharCode(C);Vt=m}var Vt=void 0;function ln(m){for(var C="",h=m;_t[h];)C+=Vt[_t[h++]];return C}var Un={},_n={},It={},Jn=48,vr=57;function Sn(m){if(m===void 0)return"_unknown";m=m.replace(/[^a-zA-Z0-9_]/g,"$");var C=m.charCodeAt(0);return C>=Jn&&C<=vr?"_"+m:m}function qn(m,C){return m=Sn(m),new Function("body","return function "+m+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(C)}function nr(m,C){var h=qn(C,function(g){this.name=C,this.message=g;var x=new Error(g).stack;x!==void 0&&(this.stack=this.toString()+`
`+x.replace(/^Error(:[^\n]*)?\n/,""))});return h.prototype=Object.create(m.prototype),h.prototype.constructor=h,h.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},h}var Bt=void 0;function Vn(m){throw new Bt(m)}var gn=void 0;function Rn(m){throw new gn(m)}function Gn(m,C,h){m.forEach(function(B){It[B]=C});function g(B){var N=h(B);N.length!==m.length&&Rn("Mismatched type converter count");for(var $=0;$<m.length;++$)rr(m[$],N[$])}var x=new Array(C.length),U=[],z=0;C.forEach(function(B,N){_n.hasOwnProperty(B)?x[N]=_n[B]:(U.push(B),Un.hasOwnProperty(B)||(Un[B]=[]),Un[B].push(function(){x[N]=_n[B],++z,z===U.length&&g(x)}))}),U.length===0&&g(x)}function rr(m,C,h){if(h=h||{},!("argPackAdvance"in C))throw new TypeError("registerType registeredInstance requires argPackAdvance");var g=C.name;if(m||Vn('type "'+g+'" must have a positive integer typeid pointer'),_n.hasOwnProperty(m)){if(h.ignoreDuplicateRegistrations)return;Vn("Cannot register type '"+g+"' twice")}if(_n[m]=C,delete It[m],Un.hasOwnProperty(m)){var x=Un[m];delete Un[m],x.forEach(function(U){U()})}}function xr(m,C,h,g,x){var U=hr(h);C=ln(C),rr(m,{name:C,fromWireType:function(z){return!!z},toWireType:function(z,B){return B?g:x},argPackAdvance:8,readValueFromPointer:function(z){var B;if(h===1)B=Ln;else if(h===2)B=cn;else if(h===4)B=Ke;else throw new TypeError("Unknown boolean type size: "+C);return this.fromWireType(B[z>>U])},destructorFunction:null})}var fn=[],Xn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function kn(m){m>4&&--Xn[m].refcount===0&&(Xn[m]=void 0,fn.push(m))}function Pt(){for(var m=0,C=5;C<Xn.length;++C)Xn[C]!==void 0&&++m;return m}function ar(){for(var m=5;m<Xn.length;++m)if(Xn[m]!==void 0)return Xn[m];return null}function Lr(){c.count_emval_handles=Pt,c.get_first_emval=ar}function An(m){switch(m){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var C=fn.length?fn.pop():Xn.length;return Xn[C]={refcount:1,value:m},C}}}function Er(m){return this.fromWireType(pt[m>>2])}function jn(m,C){C=ln(C),rr(m,{name:C,fromWireType:function(h){var g=Xn[h].value;return kn(h),g},toWireType:function(h,g){return An(g)},argPackAdvance:8,readValueFromPointer:Er,destructorFunction:null})}function Or(m){if(m===null)return"null";var C=typeof m;return C==="object"||C==="array"||C==="function"?m.toString():""+m}function mi(m,C){switch(C){case 2:return function(h){return this.fromWireType(Zn[h>>2])};case 3:return function(h){return this.fromWireType(mt[h>>3])};default:throw new TypeError("Unknown float type: "+m)}}function Nr(m,C,h){var g=hr(h);C=ln(C),rr(m,{name:C,fromWireType:function(x){return x},toWireType:function(x,U){if(typeof U!="number"&&typeof U!="boolean")throw new TypeError('Cannot convert "'+Or(U)+'" to '+this.name);return U},argPackAdvance:8,readValueFromPointer:mi(C,g),destructorFunction:null})}function Mr(m,C){if(!(m instanceof Function))throw new TypeError("new_ called with constructor type "+typeof m+" which is not a function");var h=qn(m.name||"unknownFunctionName",function(){});h.prototype=m.prototype;var g=new h,x=m.apply(g,C);return x instanceof Object?x:g}function ui(m){for(;m.length;){var C=m.pop(),h=m.pop();h(C)}}function Oi(m,C,h,g,x){var U=C.length;U<2&&Vn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var z=C[1]!==null&&h!==null,B=!1,N=1;N<C.length;++N)if(C[N]!==null&&C[N].destructorFunction===void 0){B=!0;break}for(var $=C[0].name!=="void",ce="",V="",N=0;N<U-2;++N)ce+=(N!==0?", ":"")+"arg"+N,V+=(N!==0?", ":"")+"arg"+N+"Wired";var S="return function "+Sn(m)+"("+ce+`) {
if (arguments.length !== `+(U-2)+`) {
throwBindingError('function `+m+" called with ' + arguments.length + ' arguments, expected "+(U-2)+` args!');
}
`;B&&(S+=`var destructors = [];
`);var O=B?"destructors":"null",q=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],oe=[Vn,g,x,ui,C[0],C[1]];z&&(S+="var thisWired = classParam.toWireType("+O+`, this);
`);for(var N=0;N<U-2;++N)S+="var arg"+N+"Wired = argType"+N+".toWireType("+O+", arg"+N+"); // "+C[N+2].name+`
`,q.push("argType"+N),oe.push(C[N+2]);if(z&&(V="thisWired"+(V.length>0?", ":"")+V),S+=($?"var rv = ":"")+"invoker(fn"+(V.length>0?", ":"")+V+`);
`,B)S+=`runDestructors(destructors);
`;else for(var N=z?1:2;N<C.length;++N){var G=N===1?"thisWired":"arg"+(N-2)+"Wired";C[N].destructorFunction!==null&&(S+=G+"_dtor("+G+"); // "+C[N].name+`
`,q.push(G+"_dtor"),oe.push(C[N].destructorFunction))}$&&(S+=`var ret = retType.fromWireType(rv);
return ret;
`),S+=`}
`,q.push(S);var X=Mr(Function,q).apply(null,oe);return X}function ci(m,C,h){if(m[C].overloadTable===void 0){var g=m[C];m[C]=function(){return m[C].overloadTable.hasOwnProperty(arguments.length)||Vn("Function '"+h+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+m[C].overloadTable+")!"),m[C].overloadTable[arguments.length].apply(this,arguments)},m[C].overloadTable=[],m[C].overloadTable[g.argCount]=g}}function Fi(m,C,h){c.hasOwnProperty(m)?((h===void 0||c[m].overloadTable!==void 0&&c[m].overloadTable[h]!==void 0)&&Vn("Cannot register public name '"+m+"' twice"),ci(c,m,m),c.hasOwnProperty(h)&&Vn("Cannot register multiple overloads of a function with the same number of arguments ("+h+")!"),c[m].overloadTable[h]=C):(c[m]=C,h!==void 0&&(c[m].numArguments=h))}function Ci(m,C){for(var h=[],g=0;g<m;g++)h.push(Ke[(C>>2)+g]);return h}function Ni(m,C,h){c.hasOwnProperty(m)||Rn("Replacing nonexistant public symbol"),c[m].overloadTable!==void 0&&h!==void 0?c[m].overloadTable[h]=C:(c[m]=C,c[m].argCount=h)}function Si(m,C,h){var g=c["dynCall_"+m];return h&&h.length?g.apply(null,[C].concat(h)):g.call(null,C)}function b(m,C,h){return m.includes("j")?Si(m,C,h):an.get(C).apply(null,h)}function H(m,C){var h=[];return function(){h.length=arguments.length;for(var g=0;g<arguments.length;g++)h[g]=arguments[g];return b(m,C,h)}}function ie(m,C){m=ln(m);function h(){return m.includes("j")?H(m,C):an.get(C)}var g=h();return typeof g!="function"&&Vn("unknown function pointer with signature "+m+": "+C),g}var D=void 0;function J(m){var C=Ft(m),h=ln(C);return st(C),h}function ue(m,C){var h=[],g={};function x(U){if(!g[U]&&!_n[U]){if(It[U]){It[U].forEach(x);return}h.push(U),g[U]=!0}}throw C.forEach(x),new D(m+": "+h.map(J).join([", "]))}function be(m,C,h,g,x,U){var z=Ci(C,h);m=ln(m),x=ie(g,x),Fi(m,function(){ue("Cannot call "+m+" due to unbound types",z)},C-1),Gn([],z,function(B){var N=[B[0],null].concat(B.slice(1));return Ni(m,Oi(m,N,null,x,U),C-1),[]})}function Re(m,C,h){switch(C){case 0:return h?function(x){return Ln[x]}:function(x){return _t[x]};case 1:return h?function(x){return cn[x>>1]}:function(x){return Wt[x>>1]};case 2:return h?function(x){return Ke[x>>2]}:function(x){return pt[x>>2]};default:throw new TypeError("Unknown integer type: "+m)}}function Ze(m,C,h,g,x){C=ln(C),x===-1&&(x=4294967295);var U=hr(h),z=function($){return $};if(g===0){var B=32-8*h;z=function($){return $<<B>>>B}}var N=C.includes("unsigned");rr(m,{name:C,fromWireType:z,toWireType:function($,ce){if(typeof ce!="number"&&typeof ce!="boolean")throw new TypeError('Cannot convert "'+Or(ce)+'" to '+this.name);if(ce<g||ce>x)throw new TypeError('Passing a number "'+Or(ce)+'" from JS side to C/C++ side to an argument of type "'+C+'", which is outside the valid range ['+g+", "+x+"]!");return N?ce>>>0:ce|0},argPackAdvance:8,readValueFromPointer:Re(C,U,g!==0),destructorFunction:null})}function Nt(m,C,h){var g=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],x=g[C];function U(z){z=z>>2;var B=pt,N=B[z],$=B[z+1];return new x(mn,$,N)}h=ln(h),rr(m,{name:h,fromWireType:U,argPackAdvance:8,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})}function qt(m,C){C=ln(C);var h=C==="std::string";rr(m,{name:C,fromWireType:function(g){var x=pt[g>>2],U;if(h)for(var z=g+4,B=0;B<=x;++B){var N=g+4+B;if(B==x||_t[N]==0){var $=N-z,ce=Sr(z,$);U===void 0?U=ce:(U+=String.fromCharCode(0),U+=ce),z=N+1}}else{for(var V=new Array(x),B=0;B<x;++B)V[B]=String.fromCharCode(_t[g+4+B]);U=V.join("")}return st(g),U},toWireType:function(g,x){x instanceof ArrayBuffer&&(x=new Uint8Array(x));var U,z=typeof x=="string";z||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof Int8Array||Vn("Cannot pass non-string to std::string"),h&&z?U=function(){return ni(x)}:U=function(){return x.length};var B=U(),N=bt(4+B+1);if(pt[N>>2]=B,h&&z)si(x,N+4,B+1);else if(z)for(var $=0;$<B;++$){var ce=x.charCodeAt($);ce>255&&(st(N),Vn("String has UTF-16 code units that do not fit in 8 bits")),_t[N+4+$]=ce}else for(var $=0;$<B;++$)_t[N+4+$]=x[$];return g!==null&&g.push(st,N),N},argPackAdvance:8,readValueFromPointer:Er,destructorFunction:function(g){st(g)}})}function $t(m,C,h){h=ln(h);var g,x,U,z,B;C===2?(g=Ti,x=Ri,z=Ii,U=function(){return Wt},B=1):C===4&&(g=Pi,x=fi,z=di,U=function(){return pt},B=2),rr(m,{name:h,fromWireType:function(N){for(var $=pt[N>>2],ce=U(),V,S=N+4,O=0;O<=$;++O){var q=N+4+O*C;if(O==$||ce[q>>B]==0){var oe=q-S,G=g(S,oe);V===void 0?V=G:(V+=String.fromCharCode(0),V+=G),S=q+C}}return st(N),V},toWireType:function(N,$){typeof $!="string"&&Vn("Cannot pass non-string to C++ string type "+h);var ce=z($),V=bt(4+ce+C);return pt[V>>2]=ce>>B,x($,V+4,ce+C),N!==null&&N.push(st,V),V},argPackAdvance:8,readValueFromPointer:Er,destructorFunction:function(N){st(N)}})}function At(m,C){C=ln(C),rr(m,{isVoid:!0,name:C,argPackAdvance:0,fromWireType:function(){},toWireType:function(h,g){}})}var Ht={};function Yn(m){var C=Ht[m];return C===void 0?ln(m):C}function Tr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Ur(m){return m===0?An(Tr()):(m=Yn(m),An(Tr()[m]))}function Qn(m){m>4&&(Xn[m].refcount+=1)}function tr(m,C){var h=_n[m];return h===void 0&&Vn(C+" has unknown type "+J(m)),h}function zn(m){for(var C="",h=0;h<m;++h)C+=(h!==0?", ":"")+"arg"+h;for(var g="return function emval_allocator_"+m+`(constructor, argTypes, args) {
`,h=0;h<m;++h)g+="var argType"+h+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+h+'], "parameter '+h+`");
var arg`+h+" = argType"+h+`.readValueFromPointer(args);
args += argType`+h+`['argPackAdvance'];
`;return g+="var obj = new constructor("+C+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",g)(tr,c,An)}var Vr={};function Ar(m){return m||Vn("Cannot use deleted val. handle = "+m),Xn[m].value}function Hn(m,C,h,g){m=Ar(m);var x=Vr[C];return x||(x=zn(C),Vr[C]=x),x(m,h,g)}function nn(){ne()}function on(m,C,h){_t.copyWithin(m,C,C+h)}function Kn(m){try{return rn.grow(m-mn.byteLength+65535>>>16),Rt(rn.buffer),1}catch{}}function pr(m){var C=_t.length;m=m>>>0;var h=2147483648;if(m>h)return!1;for(var g=1;g<=4;g*=2){var x=C*(1+.2/g);x=Math.min(x,m+100663296);var U=Math.min(h,hi(Math.max(m,x),65536)),z=Kn(U);if(z)return!0}return!1}var he={mappings:{},buffers:[null,[],[]],printChar:function(m,C){var h=he.buffers[m];C===0||C===10?((m===1?pn:Ot)(Jr(h,0)),h.length=0):h.push(C)},varargs:void 0,get:function(){he.varargs+=4;var m=Ke[he.varargs-4>>2];return m},getStr:function(m){var C=Sr(m);return C},get64:function(m,C){return m}};function ve(m,C,h,g){for(var x=0,U=0;U<h;U++){for(var z=Ke[C+U*8>>2],B=Ke[C+(U*8+4)>>2],N=0;N<B;N++)he.printChar(m,_t[z+N]);x+=B}return Ke[g>>2]=x,0}function Be(m){}lr(),Bt=c.BindingError=nr(Error,"BindingError"),gn=c.InternalError=nr(Error,"InternalError"),Lr(),D=c.UnboundTypeError=nr(Error,"UnboundTypeError");var We={p:Wn,e:cr,o:Rr,r:br,m:xr,v:jn,k:Nr,q:be,b:Ze,a:Nt,l:qt,g:$t,n:At,c:kn,d:Ur,h:Qn,i:Hn,j:nn,t:on,f:pr,u:ve,s:Be};wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.x).apply(null,arguments)};var st=c._free=function(){return(st=c._free=c.asm.y).apply(null,arguments)},bt=c._malloc=function(){return(bt=c._malloc=c.asm.z).apply(null,arguments)},Ft=c.___getTypeName=function(){return(Ft=c.___getTypeName=c.asm.A).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.B).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.D).apply(null,arguments)};var R;sr=function m(){R||y(),R||(sr=m)};function y(m){if(Dn>0||(Pr(),Dn>0))return;function C(){R||(R=!0,c.calledRun=!0,!fr&&(ai(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),pi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),C()},1)):C()}if(c.run=y,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return y(),c.ready}}(),Te=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/wp2_node_dec-87bef8e5.wasm").href:new URL("wp2_node_dec-87bef8e5.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;let Se,Oe=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Oe.decode();let He=null;function j(){return(He===null||He.buffer!==Se.memory.buffer)&&(He=new Uint8Array(Se.memory.buffer)),He}function ht(Ue,c){return Oe.decode(j().subarray(Ue,Ue+c))}let Qe=null;function Je(){return(Qe===null||Qe.buffer!==Se.memory.buffer)&&(Qe=new Uint8ClampedArray(Se.memory.buffer)),Qe}function ze(Ue,c){return Je().subarray(Ue/1,Ue/1+c)}const ut=new Array(32).fill(void 0);ut.push(void 0,null,!0,!1);let ke=ut.length;function L(Ue){ke===ut.length&&ut.push(ut.length+1);const c=ke;return ke=ut[c],ut[c]=Ue,c}let nt=0;function In(Ue,c){const Xe=c(Ue.length*1);return j().set(Ue,Xe/1),nt=Ue.length,Xe}let Xt=null;function Pn(){return(Xt===null||Xt.buffer!==Se.memory.buffer)&&(Xt=new Int32Array(Se.memory.buffer)),Xt}function vt(Ue,c){return j().subarray(Ue/1,Ue/1+c)}function dn(Ue,c,Xe){try{const xt=Se.__wbindgen_add_to_stack_pointer(-16);var et=In(Ue,Se.__wbindgen_malloc),it=nt;Se.encode(xt,et,it,c,Xe);var je=Pn()[xt/4+0],Kt=Pn()[xt/4+1],Mt=vt(je,Kt).slice();return Se.__wbindgen_free(je,Kt*1),Mt}finally{Se.__wbindgen_add_to_stack_pointer(16)}}function Yt(Ue){return ut[Ue]}function yn(Ue){Ue<36||(ut[Ue]=ke,ke=Ue)}function Cr(Ue){const c=Yt(Ue);return yn(Ue),c}function Qr(Ue){var c=In(Ue,Se.__wbindgen_malloc),Xe=nt,et=Se.decode(c,Xe);return Cr(et)}async function Ai(Ue,c){if(typeof Response=="function"&&Ue instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(Ue,c)}catch(et){if(Ue.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",et);else throw et}const Xe=await Ue.arrayBuffer();return await WebAssembly.instantiate(Xe,c)}else{const Xe=await WebAssembly.instantiate(Ue,c);return Xe instanceof WebAssembly.Instance?{instance:Xe,module:Ue}:Xe}}async function oi(Ue){typeof Ue>"u"&&(Ue=new URL("squoosh_png_bg.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href));const c={};c.wbg={},c.wbg.__wbg_newwithownedu8clampedarrayandsh_787b2db8ea6bfd62=function(it,je,Kt,Mt){var xt=ze(it,je).slice();Se.__wbindgen_free(it,je*1);var Jt=new ImageData(xt,Kt>>>0,Mt>>>0);return L(Jt)},c.wbg.__wbindgen_throw=function(it,je){throw new Error(ht(it,je))},(typeof Ue=="string"||typeof Request=="function"&&Ue instanceof Request||typeof URL=="function"&&Ue instanceof URL)&&(Ue=fetch(Ue));const{instance:Xe,module:et}=await Ai(await Ue,c);return Se=Xe.exports,oi.__wbindgen_wasm_module=et,Se}var qr=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/squoosh_png_bg-afa2f8d4.wasm").href:new URL("squoosh_png_bg-afa2f8d4.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;let xn,ei=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});ei.decode();let ir=null;function Ae(){return(ir===null||ir.buffer!==xn.memory.buffer)&&(ir=new Uint8Array(xn.memory.buffer)),ir}function fe(Ue,c){return ei.decode(Ae().subarray(Ue,Ue+c))}let ot=0;function wt(Ue,c){const Xe=c(Ue.length*1);return Ae().set(Ue,Xe/1),ot=Ue.length,Xe}let Et=null;function Lt(){return(Et===null||Et.buffer!==xn.memory.buffer)&&(Et=new Int32Array(xn.memory.buffer)),Et}function bn(Ue,c){return Ae().subarray(Ue/1,Ue/1+c)}function Ee(Ue,c,Xe){try{const xt=xn.__wbindgen_add_to_stack_pointer(-16);var et=wt(Ue,xn.__wbindgen_malloc),it=ot;xn.optimise(xt,et,it,c,Xe);var je=Lt()[xt/4+0],Kt=Lt()[xt/4+1],Mt=bn(je,Kt).slice();return xn.__wbindgen_free(je,Kt*1),Mt}finally{xn.__wbindgen_add_to_stack_pointer(16)}}async function Ve(Ue,c){if(typeof Response=="function"&&Ue instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(Ue,c)}catch(et){if(Ue.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",et);else throw et}const Xe=await Ue.arrayBuffer();return await WebAssembly.instantiate(Xe,c)}else{const Xe=await WebAssembly.instantiate(Ue,c);return Xe instanceof WebAssembly.Instance?{instance:Xe,module:Ue}:Xe}}async function jt(Ue){typeof Ue>"u"&&(Ue=new URL("squoosh_oxipng_bg.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href));const c={};c.wbg={},c.wbg.__wbindgen_throw=function(it,je){throw new Error(fe(it,je))},(typeof Ue=="string"||typeof Request=="function"&&Ue instanceof Request||typeof URL=="function"&&Ue instanceof URL)&&(Ue=fetch(Ue));const{instance:Xe,module:et}=await Ve(await Ue,c);return xn=Xe.exports,jt.__wbindgen_wasm_module=et,xn}var Zt=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/squoosh_oxipng_bg-bb6b7672.wasm").href:new URL("squoosh_oxipng_bg-bb6b7672.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;let St,Ut=null;function sn(){return(Ut===null||Ut.buffer!==St.memory.buffer)&&(Ut=new Uint8Array(St.memory.buffer)),Ut}let Fn=0;function or(Ue,c){const Xe=c(Ue.length*1);return sn().set(Ue,Xe/1),Fn=Ue.length,Xe}let zr=null;function Fe(){return(zr===null||zr.buffer!==St.memory.buffer)&&(zr=new Int32Array(St.memory.buffer)),zr}let rt=null;function Tt(){return(rt===null||rt.buffer!==St.memory.buffer)&&(rt=new Uint8ClampedArray(St.memory.buffer)),rt}function Qt(Ue,c){return Tt().subarray(Ue/1,Ue/1+c)}function En(Ue,c,Xe,et,it,je,Kt,Mt){try{const pn=St.__wbindgen_add_to_stack_pointer(-16);var xt=or(Ue,St.__wbindgen_malloc),Jt=Fn;St.resize(pn,xt,Jt,c,Xe,et,it,je,Kt,Mt);var hn=Fe()[pn/4+0],tn=Fe()[pn/4+1],vn=Qt(hn,tn).slice();return St.__wbindgen_free(hn,tn*1),vn}finally{St.__wbindgen_add_to_stack_pointer(16)}}async function Kr(Ue,c){if(typeof Response=="function"&&Ue instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(Ue,c)}catch(et){if(Ue.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",et);else throw et}const Xe=await Ue.arrayBuffer();return await WebAssembly.instantiate(Xe,c)}else{const Xe=await WebAssembly.instantiate(Ue,c);return Xe instanceof WebAssembly.Instance?{instance:Xe,module:Ue}:Xe}}async function ki(Ue){typeof Ue>"u"&&(Ue=new URL("squoosh_resize_bg.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href));const c={};(typeof Ue=="string"||typeof Request=="function"&&Ue instanceof Request||typeof URL=="function"&&Ue instanceof URL)&&(Ue=fetch(Ue));const{instance:Xe,module:et}=await Kr(await Ue,c);return St=Xe.exports,ki.__wbindgen_wasm_module=et,St}var Hi=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/squoosh_resize_bg-3d426466.wasm").href:new URL("squoosh_resize_bg-3d426466.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,$i=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/rotate-e8fb6784.wasm").href:new URL("rotate-e8fb6784.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,li=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(R,y){Xe=R,et=y});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(R){return c.locateFile?c.locateFile(R,Mt):Mt+R}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(y,m){return tn||(tn=gi),vn||(vn=gi),y=vn.normalize(y),tn.readFileSync(y,m?null:"utf8")},hn=function(y){var m=Jt(y,!0);return m.buffer||(m=new Uint8Array(m)),Ir(m.buffer),m},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&ne("no native wasm support detected");var rn,fr=!1;function Ir(R,y){R||ne("Assertion failed: "+y)}var Tn=new TextDecoder("utf8");function Jr(R,y,m){for(var C=y+m,h=y;R[h]&&!(h>=C);)++h;return Tn.decode(R.subarray?R.subarray(y,h):new Uint8Array(R.slice(y,h)))}function Sr(R,y){if(!R)return"";for(var m=R+y,C=R;!(C>=m)&&_t[C];)++C;return Tn.decode(_t.subarray(R,C))}function kr(R,y,m,C){if(!(C>0))return 0;for(var h=m,g=m+C-1,x=0;x<R.length;++x){var U=R.charCodeAt(x);if(U>=55296&&U<=57343){var z=R.charCodeAt(++x);U=65536+((U&1023)<<10)|z&1023}if(U<=127){if(m>=g)break;y[m++]=U}else if(U<=2047){if(m+1>=g)break;y[m++]=192|U>>6,y[m++]=128|U&63}else if(U<=65535){if(m+2>=g)break;y[m++]=224|U>>12,y[m++]=128|U>>6&63,y[m++]=128|U&63}else{if(m+3>=g)break;y[m++]=240|U>>18,y[m++]=128|U>>12&63,y[m++]=128|U>>6&63,y[m++]=128|U&63}}return y[m]=0,m-h}function si(R,y,m){return kr(R,_t,y,m)}function ni(R){for(var y=0,m=0;m<R.length;++m){var C=R.charCodeAt(m);C>=55296&&C<=57343&&(C=65536+((C&1023)<<10)|R.charCodeAt(++m)&1023),C<=127?++y:C<=2047?y+=2:C<=65535?y+=3:y+=4}return y}var Di=new TextDecoder("utf-16le");function Ti(R,y){for(var m=R,C=m>>1,h=C+y/2;!(C>=h)&&Wt[C];)++C;return m=C<<1,Di.decode(_t.subarray(R,m))}function Ri(R,y,m){if(m===void 0&&(m=2147483647),m<2)return 0;m-=2;for(var C=y,h=m<R.length*2?m/2:R.length,g=0;g<h;++g){var x=R.charCodeAt(g);cn[y>>1]=x,y+=2}return cn[y>>1]=0,y-C}function Ii(R){return R.length*2}function Pi(R,y){for(var m=0,C="";!(m>=y/4);){var h=Ke[R+m*4>>2];if(h==0)break;if(++m,h>=65536){var g=h-65536;C+=String.fromCharCode(55296|g>>10,56320|g&1023)}else C+=String.fromCharCode(h)}return C}function fi(R,y,m){if(m===void 0&&(m=2147483647),m<4)return 0;for(var C=y,h=C+m-4,g=0;g<R.length;++g){var x=R.charCodeAt(g);if(x>=55296&&x<=57343){var U=R.charCodeAt(++g);x=65536+((x&1023)<<10)|U&1023}if(Ke[y>>2]=x,y+=4,y+4>h)break}return Ke[y>>2]=0,y-C}function di(R){for(var y=0,m=0;m<R.length;++m){var C=R.charCodeAt(m);C>=55296&&C<=57343&&++m,y+=4}return y}function hi(R,y){return R%y>0&&(R+=y-R%y),R}var mn,Ln,_t,cn,Wt,Ke,pt,Zn,mt;function Rt(R){mn=R,c.HEAP8=Ln=new Int8Array(R),c.HEAP16=cn=new Int16Array(R),c.HEAP32=Ke=new Int32Array(R),c.HEAPU8=_t=new Uint8Array(R),c.HEAPU16=Wt=new Uint16Array(R),c.HEAPU32=pt=new Uint32Array(R),c.HEAPF32=Zn=new Float32Array(R),c.HEAPF64=mt=new Float64Array(R)}c.INITIAL_MEMORY;var an,Hr=[],Wr=[],On=[];function Pr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Nn(Hr)}function ai(){Nn(Wr)}function pi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());Nn(On)}function wi(R){Hr.unshift(R)}function Fr(R){Wr.unshift(R)}function $r(R){On.unshift(R)}var Dn=0,sr=null;function Dt(R){Dn++,c.monitorRunDependencies&&c.monitorRunDependencies(Dn)}function Q(R){if(Dn--,c.monitorRunDependencies&&c.monitorRunDependencies(Dn),Dn==0&&sr){var y=sr;sr=null,y()}}c.preloadedImages={},c.preloadedAudios={};function ne(R){c.onAbort&&c.onAbort(R),R+="",Ot(R),fr=!0,R="abort("+R+"). Build with -s ASSERTIONS=1 for more info.";var y=new WebAssembly.RuntimeError(R);throw et(y),y}var ye="data:application/octet-stream;base64,";function Me(R){return R.startsWith(ye)}if(c.locateFile){var De="imagequant_node.wasm";Me(De)||(De=xt(De))}else var De=new URL("imagequant_node.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function yt(R){try{if(R==De&&Gt)return new Uint8Array(Gt);if(hn)return hn(R);throw"both async and sync fetching of the wasm failed"}catch(y){ne(y)}}function Xr(){return!Gt&&Kt&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(R){if(!R.ok)throw"failed to load wasm binary file at '"+De+"'";return R.arrayBuffer()}).catch(function(){return yt(De)}):Promise.resolve().then(function(){return yt(De)})}function wn(){var R={a:ve};function y(x,U){var z=x.exports;c.asm=z,rn=c.asm.w,Rt(rn.buffer),an=c.asm.C,Fr(c.asm.x),Q()}Dt();function m(x){y(x.instance)}function C(x){return Xr().then(function(U){var z=WebAssembly.instantiate(U,R);return z}).then(x,function(U){Ot("failed to asynchronously prepare wasm: "+U),ne(U)})}function h(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(De)&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(x){var U=WebAssembly.instantiateStreaming(x,R);return U.then(m,function(z){return Ot("wasm streaming compile failed: "+z),Ot("falling back to ArrayBuffer instantiation"),C(m)})}):C(m)}if(c.instantiateWasm)try{var g=c.instantiateWasm(R,y);return g}catch(x){return Ot("Module.instantiateWasm callback failed with error: "+x),!1}return h().catch(et),{}}function Nn(R){for(;R.length>0;){var y=R.shift();if(typeof y=="function"){y(c);continue}var m=y.func;typeof m=="number"?y.arg===void 0?an.get(m)():an.get(m)(y.arg):m(y.arg===void 0?null:y.arg)}}function dr(R,y){}function Wn(R,y){return void 0}function ri(R,y,m,C,h){}function cr(R){switch(R){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+R)}}function Br(){for(var R=new Array(256),y=0;y<256;++y)R[y]=String.fromCharCode(y);Rr=R}var Rr=void 0;function br(R){for(var y="",m=R;_t[m];)y+=Rr[_t[m++]];return y}var hr={},lr={},Vt={},ln=48,Un=57;function _n(R){if(R===void 0)return"_unknown";R=R.replace(/[^a-zA-Z0-9_]/g,"$");var y=R.charCodeAt(0);return y>=ln&&y<=Un?"_"+R:R}function It(R,y){return R=_n(R),new Function("body","return function "+R+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(y)}function Jn(R,y){var m=It(y,function(C){this.name=y,this.message=C;var h=new Error(C).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return m.prototype=Object.create(R.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},m}var vr=void 0;function Sn(R){throw new vr(R)}var qn=void 0;function nr(R){throw new qn(R)}function Bt(R,y,m){R.forEach(function(U){Vt[U]=y});function C(U){var z=m(U);z.length!==R.length&&nr("Mismatched type converter count");for(var B=0;B<R.length;++B)Vn(R[B],z[B])}var h=new Array(y.length),g=[],x=0;y.forEach(function(U,z){lr.hasOwnProperty(U)?h[z]=lr[U]:(g.push(U),hr.hasOwnProperty(U)||(hr[U]=[]),hr[U].push(function(){h[z]=lr[U],++x,x===g.length&&C(h)}))}),g.length===0&&C(h)}function Vn(R,y,m){if(m=m||{},!("argPackAdvance"in y))throw new TypeError("registerType registeredInstance requires argPackAdvance");var C=y.name;if(R||Sn('type "'+C+'" must have a positive integer typeid pointer'),lr.hasOwnProperty(R)){if(m.ignoreDuplicateRegistrations)return;Sn("Cannot register type '"+C+"' twice")}if(lr[R]=y,delete Vt[R],hr.hasOwnProperty(R)){var h=hr[R];delete hr[R],h.forEach(function(g){g()})}}function gn(R,y,m,C,h){var g=cr(m);y=br(y),Vn(R,{name:y,fromWireType:function(x){return!!x},toWireType:function(x,U){return U?C:h},argPackAdvance:8,readValueFromPointer:function(x){var U;if(m===1)U=Ln;else if(m===2)U=cn;else if(m===4)U=Ke;else throw new TypeError("Unknown boolean type size: "+y);return this.fromWireType(U[x>>g])},destructorFunction:null})}var Rn=[],Gn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function rr(R){R>4&&--Gn[R].refcount===0&&(Gn[R]=void 0,Rn.push(R))}function xr(){for(var R=0,y=5;y<Gn.length;++y)Gn[y]!==void 0&&++R;return R}function fn(){for(var R=5;R<Gn.length;++R)if(Gn[R]!==void 0)return Gn[R];return null}function Xn(){c.count_emval_handles=xr,c.get_first_emval=fn}function kn(R){switch(R){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var y=Rn.length?Rn.pop():Gn.length;return Gn[y]={refcount:1,value:R},y}}}function Pt(R){return this.fromWireType(pt[R>>2])}function ar(R,y){y=br(y),Vn(R,{name:y,fromWireType:function(m){var C=Gn[m].value;return rr(m),C},toWireType:function(m,C){return kn(C)},argPackAdvance:8,readValueFromPointer:Pt,destructorFunction:null})}function Lr(R){if(R===null)return"null";var y=typeof R;return y==="object"||y==="array"||y==="function"?R.toString():""+R}function An(R,y){switch(y){case 2:return function(m){return this.fromWireType(Zn[m>>2])};case 3:return function(m){return this.fromWireType(mt[m>>3])};default:throw new TypeError("Unknown float type: "+R)}}function Er(R,y,m){var C=cr(m);y=br(y),Vn(R,{name:y,fromWireType:function(h){return h},toWireType:function(h,g){if(typeof g!="number"&&typeof g!="boolean")throw new TypeError('Cannot convert "'+Lr(g)+'" to '+this.name);return g},argPackAdvance:8,readValueFromPointer:An(y,C),destructorFunction:null})}function jn(R,y){if(!(R instanceof Function))throw new TypeError("new_ called with constructor type "+typeof R+" which is not a function");var m=It(R.name||"unknownFunctionName",function(){});m.prototype=R.prototype;var C=new m,h=R.apply(C,y);return h instanceof Object?h:C}function Or(R){for(;R.length;){var y=R.pop(),m=R.pop();m(y)}}function mi(R,y,m,C,h){var g=y.length;g<2&&Sn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var x=y[1]!==null&&m!==null,U=!1,z=1;z<y.length;++z)if(y[z]!==null&&y[z].destructorFunction===void 0){U=!0;break}for(var B=y[0].name!=="void",N="",$="",z=0;z<g-2;++z)N+=(z!==0?", ":"")+"arg"+z,$+=(z!==0?", ":"")+"arg"+z+"Wired";var ce="return function "+_n(R)+"("+N+`) {
if (arguments.length !== `+(g-2)+`) {
throwBindingError('function `+R+" called with ' + arguments.length + ' arguments, expected "+(g-2)+` args!');
}
`;U&&(ce+=`var destructors = [];
`);var V=U?"destructors":"null",S=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],O=[Sn,C,h,Or,y[0],y[1]];x&&(ce+="var thisWired = classParam.toWireType("+V+`, this);
`);for(var z=0;z<g-2;++z)ce+="var arg"+z+"Wired = argType"+z+".toWireType("+V+", arg"+z+"); // "+y[z+2].name+`
`,S.push("argType"+z),O.push(y[z+2]);if(x&&($="thisWired"+($.length>0?", ":"")+$),ce+=(B?"var rv = ":"")+"invoker(fn"+($.length>0?", ":"")+$+`);
`,U)ce+=`runDestructors(destructors);
`;else for(var z=x?1:2;z<y.length;++z){var q=z===1?"thisWired":"arg"+(z-2)+"Wired";y[z].destructorFunction!==null&&(ce+=q+"_dtor("+q+"); // "+y[z].name+`
`,S.push(q+"_dtor"),O.push(y[z].destructorFunction))}B&&(ce+=`var ret = retType.fromWireType(rv);
return ret;
`),ce+=`}
`,S.push(ce);var oe=jn(Function,S).apply(null,O);return oe}function Nr(R,y,m){if(R[y].overloadTable===void 0){var C=R[y];R[y]=function(){return R[y].overloadTable.hasOwnProperty(arguments.length)||Sn("Function '"+m+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+R[y].overloadTable+")!"),R[y].overloadTable[arguments.length].apply(this,arguments)},R[y].overloadTable=[],R[y].overloadTable[C.argCount]=C}}function Mr(R,y,m){c.hasOwnProperty(R)?((m===void 0||c[R].overloadTable!==void 0&&c[R].overloadTable[m]!==void 0)&&Sn("Cannot register public name '"+R+"' twice"),Nr(c,R,R),c.hasOwnProperty(m)&&Sn("Cannot register multiple overloads of a function with the same number of arguments ("+m+")!"),c[R].overloadTable[m]=y):(c[R]=y,m!==void 0&&(c[R].numArguments=m))}function ui(R,y){for(var m=[],C=0;C<R;C++)m.push(Ke[(y>>2)+C]);return m}function Oi(R,y,m){c.hasOwnProperty(R)||nr("Replacing nonexistant public symbol"),c[R].overloadTable!==void 0&&m!==void 0?c[R].overloadTable[m]=y:(c[R]=y,c[R].argCount=m)}function ci(R,y,m){var C=c["dynCall_"+R];return m&&m.length?C.apply(null,[y].concat(m)):C.call(null,y)}function Fi(R,y,m){return R.includes("j")?ci(R,y,m):an.get(y).apply(null,m)}function Ci(R,y){var m=[];return function(){m.length=arguments.length;for(var C=0;C<arguments.length;C++)m[C]=arguments[C];return Fi(R,y,m)}}function Ni(R,y){R=br(R);function m(){return R.includes("j")?Ci(R,y):an.get(y)}var C=m();return typeof C!="function"&&Sn("unknown function pointer with signature "+R+": "+y),C}var Si=void 0;function b(R){var y=st(R),m=br(y);return We(y),m}function H(R,y){var m=[],C={};function h(g){if(!C[g]&&!lr[g]){if(Vt[g]){Vt[g].forEach(h);return}m.push(g),C[g]=!0}}throw y.forEach(h),new Si(R+": "+m.map(b).join([", "]))}function ie(R,y,m,C,h,g){var x=ui(y,m);R=br(R),h=Ni(C,h),Mr(R,function(){H("Cannot call "+R+" due to unbound types",x)},y-1),Bt([],x,function(U){var z=[U[0],null].concat(U.slice(1));return Oi(R,mi(R,z,null,h,g),y-1),[]})}function D(R,y,m){switch(y){case 0:return m?function(h){return Ln[h]}:function(h){return _t[h]};case 1:return m?function(h){return cn[h>>1]}:function(h){return Wt[h>>1]};case 2:return m?function(h){return Ke[h>>2]}:function(h){return pt[h>>2]};default:throw new TypeError("Unknown integer type: "+R)}}function J(R,y,m,C,h){y=br(y),h===-1&&(h=4294967295);var g=cr(m),x=function(B){return B};if(C===0){var U=32-8*m;x=function(B){return B<<U>>>U}}var z=y.includes("unsigned");Vn(R,{name:y,fromWireType:x,toWireType:function(B,N){if(typeof N!="number"&&typeof N!="boolean")throw new TypeError('Cannot convert "'+Lr(N)+'" to '+this.name);if(N<C||N>h)throw new TypeError('Passing a number "'+Lr(N)+'" from JS side to C/C++ side to an argument of type "'+y+'", which is outside the valid range ['+C+", "+h+"]!");return z?N>>>0:N|0},argPackAdvance:8,readValueFromPointer:D(y,g,C!==0),destructorFunction:null})}function ue(R,y,m){var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=C[y];function g(x){x=x>>2;var U=pt,z=U[x],B=U[x+1];return new h(mn,B,z)}m=br(m),Vn(R,{name:m,fromWireType:g,argPackAdvance:8,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})}function be(R,y){y=br(y);var m=y==="std::string";Vn(R,{name:y,fromWireType:function(C){var h=pt[C>>2],g;if(m)for(var x=C+4,U=0;U<=h;++U){var z=C+4+U;if(U==h||_t[z]==0){var B=z-x,N=Sr(x,B);g===void 0?g=N:(g+=String.fromCharCode(0),g+=N),x=z+1}}else{for(var $=new Array(h),U=0;U<h;++U)$[U]=String.fromCharCode(_t[C+4+U]);g=$.join("")}return We(C),g},toWireType:function(C,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,x=typeof h=="string";x||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||Sn("Cannot pass non-string to std::string"),m&&x?g=function(){return ni(h)}:g=function(){return h.length};var U=g(),z=Be(4+U+1);if(pt[z>>2]=U,m&&x)si(h,z+4,U+1);else if(x)for(var B=0;B<U;++B){var N=h.charCodeAt(B);N>255&&(We(z),Sn("String has UTF-16 code units that do not fit in 8 bits")),_t[z+4+B]=N}else for(var B=0;B<U;++B)_t[z+4+B]=h[B];return C!==null&&C.push(We,z),z},argPackAdvance:8,readValueFromPointer:Pt,destructorFunction:function(C){We(C)}})}function Re(R,y,m){m=br(m);var C,h,g,x,U;y===2?(C=Ti,h=Ri,x=Ii,g=function(){return Wt},U=1):y===4&&(C=Pi,h=fi,x=di,g=function(){return pt},U=2),Vn(R,{name:m,fromWireType:function(z){for(var B=pt[z>>2],N=g(),$,ce=z+4,V=0;V<=B;++V){var S=z+4+V*y;if(V==B||N[S>>U]==0){var O=S-ce,q=C(ce,O);$===void 0?$=q:($+=String.fromCharCode(0),$+=q),ce=S+y}}return We(z),$},toWireType:function(z,B){typeof B!="string"&&Sn("Cannot pass non-string to C++ string type "+m);var N=x(B),$=Be(4+N+y);return pt[$>>2]=N>>U,h(B,$+4,N+y),z!==null&&z.push(We,$),$},argPackAdvance:8,readValueFromPointer:Pt,destructorFunction:function(z){We(z)}})}function Ze(R,y){y=br(y),Vn(R,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:function(){},toWireType:function(m,C){}})}var Nt={};function qt(R){var y=Nt[R];return y===void 0?br(R):y}function $t(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function At(R){return R===0?kn($t()):(R=qt(R),kn($t()[R]))}function Ht(R){R>4&&(Gn[R].refcount+=1)}function Yn(R,y){var m=lr[R];return m===void 0&&Sn(y+" has unknown type "+b(R)),m}function Tr(R){for(var y="",m=0;m<R;++m)y+=(m!==0?", ":"")+"arg"+m;for(var C="return function emval_allocator_"+R+`(constructor, argTypes, args) {
`,m=0;m<R;++m)C+="var argType"+m+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+m+'], "parameter '+m+`");
var arg`+m+" = argType"+m+`.readValueFromPointer(args);
args += argType`+m+`['argPackAdvance'];
`;return C+="var obj = new constructor("+y+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",C)(Yn,c,kn)}var Ur={};function Qn(R){return R||Sn("Cannot use deleted val. handle = "+R),Gn[R].value}function tr(R,y,m,C){R=Qn(R);var h=Ur[y];return h||(h=Tr(y),Ur[y]=h),h(R,m,C)}function zn(){ne()}function Vr(R,y,m){_t.copyWithin(R,y,y+m)}function Ar(R){try{return rn.grow(R-mn.byteLength+65535>>>16),Rt(rn.buffer),1}catch{}}function Hn(R){var y=_t.length;R=R>>>0;var m=2147483648;if(R>m)return!1;for(var C=1;C<=4;C*=2){var h=y*(1+.2/C);h=Math.min(h,R+100663296);var g=Math.min(m,hi(Math.max(R,h),65536)),x=Ar(g);if(x)return!0}return!1}var nn={mappings:{},buffers:[null,[],[]],printChar:function(R,y){var m=nn.buffers[R];y===0||y===10?((R===1?pn:Ot)(Jr(m,0)),m.length=0):m.push(y)},varargs:void 0,get:function(){nn.varargs+=4;var R=Ke[nn.varargs-4>>2];return R},getStr:function(R){var y=Sr(R);return y},get64:function(R,y){return R}};function on(R){return 0}function Kn(R,y,m,C,h){}function pr(R,y,m,C){for(var h=0,g=0;g<m;g++){for(var x=Ke[y+g*8>>2],U=Ke[y+(g*8+4)>>2],z=0;z<U;z++)nn.printChar(R,_t[x+z]);h+=U}return Ke[C>>2]=h,0}function he(R){}Br(),vr=c.BindingError=Jn(Error,"BindingError"),qn=c.InternalError=Jn(Error,"InternalError"),Xn(),Si=c.UnboundTypeError=Jn(Error,"UnboundTypeError");var ve={m:Wn,q:ri,n:gn,v:ar,l:Er,c:ie,b:J,a:ue,h:be,f:Re,o:Ze,d:rr,k:At,i:Ht,j:tr,g:zn,s:Vr,e:Hn,u:on,p:Kn,t:pr,r:he};wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.x).apply(null,arguments)};var Be=c._malloc=function(){return(Be=c._malloc=c.asm.y).apply(null,arguments)},We=c._free=function(){return(We=c._free=c.asm.z).apply(null,arguments)},st=c.___getTypeName=function(){return(st=c.___getTypeName=c.asm.A).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.B).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.D).apply(null,arguments)};var bt;sr=function R(){bt||Ft(),bt||(sr=R)};function Ft(R){if(Dn>0||(Pr(),Dn>0))return;function y(){bt||(bt=!0,c.calledRun=!0,!fr&&(ai(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),pi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),y()},1)):y()}if(c.run=Ft,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ft(),c.ready}}(),so=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/imagequant_node-a4aafbae.wasm").href:new URL("imagequant_node-a4aafbae.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;class ji{constructor(c,Xe,et){this.data=c,this.width=Xe,this.height=et}}globalThis.navigator={hardwareConcurrency:n.cpus().length};const mo=oi(e.promises.readFile(s(qr))),en=jt(e.promises.readFile(s(Zt))),Mo=ki(e.promises.readFile(s(Hi))),no=a(li,so);globalThis.ImageData=ji;function ge(Ue){switch(Ue){case"triangle":return 0;case"catrom":return 1;case"mitchell":return 2;case"lanczos3":return 3;default:throw Error(`Unknown resize algorithm "${Ue}"`)}}function qe({input_width:Ue,input_height:c,target_width:Xe,target_height:et}){if(!Xe&&!et)throw Error("Need to specify at least width or height when resizing");return Xe&&et?{width:Xe,height:et}:Xe?{width:Xe,height:Math.round(c/Ue*Xe)}:{width:Math.round(Ue/c*et),height:et}}const at={resize:{name:"Resize",description:"Resize the image before compressing",instantiate:async()=>(await Mo,(Ue,c,Xe,{width:et,height:it,method:je,premultiply:Kt,linearRGB:Mt})=>({width:et,height:it}=qe({input_width:c,input_height:Xe,target_width:et,target_height:it}),new ji(En(Ue,c,Xe,et,it,ge(je),Kt,Mt),et,it))),defaultOptions:{method:"lanczos3",fitMethod:"stretch",premultiply:!0,linearRGB:!0}},quant:{name:"ImageQuant",description:"Reduce the number of colors used (aka. paletting)",instantiate:async()=>{const Ue=await no;return(c,Xe,et,{numColors:it,dither:je})=>new ji(Ue.quantize(c,Xe,et,it,je),Xe,et)},defaultOptions:{numColors:255,dither:1}},rotate:{name:"Rotate",description:"Rotate image",instantiate:async()=>async(Ue,c,Xe,{numRotations:et})=>{const it=et*90%360,je=it==0||it==180,Kt=c*Xe*4,Mt=(await WebAssembly.instantiate(await e.promises.readFile(s($i)))).instance,{memory:xt}=Mt.exports,Jt=Math.ceil((Kt*2-xt.buffer.byteLength+8)/(64*1024));Jt>0&&xt.grow(Jt);const hn=new Uint8ClampedArray(xt.buffer);return hn.set(Ue,8),Mt.exports.rotate(c,Xe,it),new ji(hn.slice(Kt+8,Kt*2+8),je?c:Xe,je?Xe:c)},defaultOptions:{numRotations:0}}},Ne={mozjpeg:{name:"MozJPEG",extension:"jpg",detectors:[/^\xFF\xD8\xFF/],dec:()=>a(p,d),enc:()=>a(f,l),defaultEncoderOptions:{quality:75,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:3,quant_table:3,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75},autoOptimize:{option:"quality",min:0,max:100}},webp:{name:"WebP",extension:"webp",detectors:[/^RIFF....WEBPVP8[LX ]/s],dec:()=>a(E,v),enc:()=>a(_,A),defaultEncoderOptions:{quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0},autoOptimize:{option:"quality",min:0,max:100}},avif:{name:"AVIF",extension:"avif",detectors:[/^\x00\x00\x00 ftypavif\x00\x00\x00\x00/],dec:()=>a(K,ee),enc:async()=>await u()?a(r.default,k,I):a(T,P),defaultEncoderOptions:{cqLevel:33,cqAlphaLevel:-1,denoiseLevel:0,tileColsLog2:0,tileRowsLog2:0,speed:6,subsample:1,chromaDeltaQ:!1,sharpness:0,tune:0},autoOptimize:{option:"cqLevel",min:62,max:0}},jxl:{name:"JPEG-XL",extension:"jxl",detectors:[/^\xff\x0a/],dec:()=>a(re,de),enc:()=>a(me,Z),defaultEncoderOptions:{effort:1,quality:75,progressive:!1,epf:-1,lossyPalette:!1,decodingSpeedTier:0,photonNoiseIso:0,lossyModular:!1},autoOptimize:{option:"quality",min:0,max:100}},wp2:{name:"WebP2",extension:"wp2",detectors:[/^\xF4\xFF\x6F/],dec:()=>a(we,Te),enc:()=>a(Ie,Pe),defaultEncoderOptions:{quality:75,alpha_quality:75,effort:5,pass:1,sns:50,uv_mode:0,csp_type:0,error_diffusion:0,use_random_matrix:!1},autoOptimize:{option:"quality",min:0,max:100}},oxipng:{name:"OxiPNG",extension:"png",detectors:[/^\x89PNG\x0D\x0A\x1A\x0A/],dec:async()=>(await mo,{decode:Qr}),enc:async()=>(await mo,await en,{encode:(Ue,c,Xe,et)=>{const it=dn(new Uint8Array(Ue),c,Xe);return Ee(it,et.level,!1)}}),defaultEncoderOptions:{level:2},autoOptimize:{option:"level",min:6,max:1}}};function ft(){return Array.from({length:16},()=>Math.floor(Math.random()*256).toString(16)).join("")}class Mn{constructor(c,Xe){this.numWorkers=c,this.jobQueue=new i.TransformStream,this.workerQueue=new i.TransformStream;const et=this.workerQueue.writable.getWriter();for(let it=0;it<c;it++)et.write(new o.Worker(Xe));et.releaseLock(),this.done=this._readLoop()}async _readLoop(){const c=this.jobQueue.readable.getReader();for(;;){const{value:Xe,done:et}=await c.read();if(et){await this._terminateAll();return}if(!Xe)throw new Error("Reader did not return any value");const{msg:it,resolve:je,reject:Kt}=Xe,Mt=await this._nextWorker();this.jobPromise(Mt,it).then(xt=>je(xt)).catch(xt=>Kt(xt)).finally(()=>{const xt=this.workerQueue.writable.getWriter();xt.write(Mt),xt.releaseLock()})}}async _nextWorker(){const c=this.workerQueue.readable.getReader(),{value:Xe}=await c.read();if(c.releaseLock(),!Xe)throw new Error("No worker left");return Xe}async _terminateAll(){for(let c=0;c<this.numWorkers;c++)(await this._nextWorker()).terminate();this.workerQueue.writable.close()}async join(){this.jobQueue.writable.getWriter().close(),await this.done}dispatchJob(c){return new Promise((Xe,et)=>{const it=this.jobQueue.writable.getWriter();it.write({msg:c,resolve:Xe,reject:et}),it.releaseLock()})}jobPromise(c,Xe){return new Promise((et,it)=>{const je=ft();c.postMessage({msg:Xe,id:je}),c.on("message",function Kt({error:Mt,result:xt,id:Jt}){if(Jt===je){if(Mt){it(Mt);return}c.off("message",Kt),et(xt)}})})}static useThisThreadAsWorker(c){o.parentPort.on("message",async Xe=>{const{msg:et,id:it}=Xe;try{const je=await c(et);o.parentPort.postMessage({result:je,id:it})}catch(je){o.parentPort.postMessage({error:je.message,id:it})}})}}var Bn=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(w,M){Xe=w,et=M});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var Kt=!1,Mt="";function xt(w){return c.locateFile?c.locateFile(w,Mt):Mt+w}var Jt,hn,tn,vn;Mt=__dirname+"/",Jt=function(M,Y){return tn||(tn=gi),vn||(vn=gi),M=vn.normalize(M),tn.readFileSync(M,Y?null:"utf8")},hn=function(M){var Y=Jt(M,!0);return Y.buffer||(Y=new Uint8Array(Y)),Ir(Y.buffer),Y},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ot=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&ne("no native wasm support detected");var rn,fr=!1;function Ir(w,M){w||ne("Assertion failed: "+M)}var Tn=new TextDecoder("utf8");function Jr(w,M,Y){for(var ae=M+Y,pe=M;w[pe]&&!(pe>=ae);)++pe;return Tn.decode(w.subarray?w.subarray(M,pe):new Uint8Array(w.slice(M,pe)))}function Sr(w,M){if(!w)return"";for(var Y=w+M,ae=w;!(ae>=Y)&&_t[ae];)++ae;return Tn.decode(_t.subarray(w,ae))}function kr(w,M,Y,ae){if(!(ae>0))return 0;for(var pe=Y,_e=Y+ae-1,xe=0;xe<w.length;++xe){var Le=w.charCodeAt(xe);if(Le>=55296&&Le<=57343){var Ye=w.charCodeAt(++xe);Le=65536+((Le&1023)<<10)|Ye&1023}if(Le<=127){if(Y>=_e)break;M[Y++]=Le}else if(Le<=2047){if(Y+1>=_e)break;M[Y++]=192|Le>>6,M[Y++]=128|Le&63}else if(Le<=65535){if(Y+2>=_e)break;M[Y++]=224|Le>>12,M[Y++]=128|Le>>6&63,M[Y++]=128|Le&63}else{if(Y+3>=_e)break;M[Y++]=240|Le>>18,M[Y++]=128|Le>>12&63,M[Y++]=128|Le>>6&63,M[Y++]=128|Le&63}}return M[Y]=0,Y-pe}function si(w,M,Y){return kr(w,_t,M,Y)}function ni(w){for(var M=0,Y=0;Y<w.length;++Y){var ae=w.charCodeAt(Y);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|w.charCodeAt(++Y)&1023),ae<=127?++M:ae<=2047?M+=2:ae<=65535?M+=3:M+=4}return M}var Di=new TextDecoder("utf-16le");function Ti(w,M){for(var Y=w,ae=Y>>1,pe=ae+M/2;!(ae>=pe)&&Wt[ae];)++ae;return Y=ae<<1,Di.decode(_t.subarray(w,Y))}function Ri(w,M,Y){if(Y===void 0&&(Y=2147483647),Y<2)return 0;Y-=2;for(var ae=M,pe=Y<w.length*2?Y/2:w.length,_e=0;_e<pe;++_e){var xe=w.charCodeAt(_e);cn[M>>1]=xe,M+=2}return cn[M>>1]=0,M-ae}function Ii(w){return w.length*2}function Pi(w,M){for(var Y=0,ae="";!(Y>=M/4);){var pe=Ke[w+Y*4>>2];if(pe==0)break;if(++Y,pe>=65536){var _e=pe-65536;ae+=String.fromCharCode(55296|_e>>10,56320|_e&1023)}else ae+=String.fromCharCode(pe)}return ae}function fi(w,M,Y){if(Y===void 0&&(Y=2147483647),Y<4)return 0;for(var ae=M,pe=ae+Y-4,_e=0;_e<w.length;++_e){var xe=w.charCodeAt(_e);if(xe>=55296&&xe<=57343){var Le=w.charCodeAt(++_e);xe=65536+((xe&1023)<<10)|Le&1023}if(Ke[M>>2]=xe,M+=4,M+4>pe)break}return Ke[M>>2]=0,M-ae}function di(w){for(var M=0,Y=0;Y<w.length;++Y){var ae=w.charCodeAt(Y);ae>=55296&&ae<=57343&&++Y,M+=4}return M}function hi(w,M){return w%M>0&&(w+=M-w%M),w}var mn,Ln,_t,cn,Wt,Ke,pt,Zn,mt;function Rt(w){mn=w,c.HEAP8=Ln=new Int8Array(w),c.HEAP16=cn=new Int16Array(w),c.HEAP32=Ke=new Int32Array(w),c.HEAPU8=_t=new Uint8Array(w),c.HEAPU16=Wt=new Uint16Array(w),c.HEAPU32=pt=new Uint32Array(w),c.HEAPF32=Zn=new Float32Array(w),c.HEAPF64=mt=new Float64Array(w)}c.INITIAL_MEMORY;var an,Hr=[],Wr=[],On=[];function Pr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Nn(Hr)}function ai(){Nn(Wr)}function pi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());Nn(On)}function wi(w){Hr.unshift(w)}function Fr(w){Wr.unshift(w)}function $r(w){On.unshift(w)}var Dn=0,sr=null;function Dt(w){Dn++,c.monitorRunDependencies&&c.monitorRunDependencies(Dn)}function Q(w){if(Dn--,c.monitorRunDependencies&&c.monitorRunDependencies(Dn),Dn==0&&sr){var M=sr;sr=null,M()}}c.preloadedImages={},c.preloadedAudios={};function ne(w){c.onAbort&&c.onAbort(w),w+="",Ot(w),fr=!0,w="abort("+w+"). Build with -s ASSERTIONS=1 for more info.";var M=new WebAssembly.RuntimeError(w);throw et(M),M}var ye="data:application/octet-stream;base64,";function Me(w){return w.startsWith(ye)}if(c.locateFile){var De="visdif.wasm";Me(De)||(De=xt(De))}else var De=new URL("visdif.wasm",typeof document>"u"?new(Bi("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function yt(w){try{if(w==De&&Gt)return new Uint8Array(Gt);if(hn)return hn(w);throw"both async and sync fetching of the wasm failed"}catch(M){ne(M)}}function Xr(){return!Gt&&Kt&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(w){if(!w.ok)throw"failed to load wasm binary file at '"+De+"'";return w.arrayBuffer()}).catch(function(){return yt(De)}):Promise.resolve().then(function(){return yt(De)})}function wn(){var w={a:tt};function M(xe,Le){var Ye=xe.exports;c.asm=Ye,rn=c.asm.u,Rt(rn.buffer),an=c.asm.A,Fr(c.asm.v),Q()}Dt();function Y(xe){M(xe.instance)}function ae(xe){return Xr().then(function(Le){var Ye=WebAssembly.instantiate(Le,w);return Ye}).then(xe,function(Le){Ot("failed to asynchronously prepare wasm: "+Le),ne(Le)})}function pe(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!Me(De)&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(xe){var Le=WebAssembly.instantiateStreaming(xe,w);return Le.then(Y,function(Ye){return Ot("wasm streaming compile failed: "+Ye),Ot("falling back to ArrayBuffer instantiation"),ae(Y)})}):ae(Y)}if(c.instantiateWasm)try{var _e=c.instantiateWasm(w,M);return _e}catch(xe){return Ot("Module.instantiateWasm callback failed with error: "+xe),!1}return pe().catch(et),{}}function Nn(w){for(;w.length>0;){var M=w.shift();if(typeof M=="function"){M(c);continue}var Y=M.func;typeof Y=="number"?M.arg===void 0?an.get(Y)():an.get(Y)(M.arg):Y(M.arg===void 0?null:M.arg)}}function dr(w,M,Y,ae){ne("Assertion failed: "+Sr(w)+", at: "+[M?Sr(M):"unknown filename",Y,ae?Sr(ae):"unknown function"])}var Wn={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ri(w){return dt(w+Wn.SIZE)+Wn.SIZE}function cr(w){this.excPtr=w,this.ptr=w-Wn.SIZE,this.set_type=function(M){Ke[this.ptr+Wn.TYPE_OFFSET>>2]=M},this.get_type=function(){return Ke[this.ptr+Wn.TYPE_OFFSET>>2]},this.set_destructor=function(M){Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]=M},this.get_destructor=function(){return Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(M){Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=M},this.set_caught=function(M){M=M?1:0,Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]=M},this.get_caught=function(){return Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(M){M=M?1:0,Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]=M},this.get_rethrown=function(){return Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]!=0},this.init=function(M,Y){this.set_type(M),this.set_destructor(Y),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var M=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=M+1},this.release_ref=function(){var M=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];return Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=M-1,M===1}}function Br(w,M,Y){var ae=new cr(w);throw ae.init(M,Y),w}function Rr(w,M,Y,ae,pe){}function br(w){switch(w){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+w)}}function hr(){for(var w=new Array(256),M=0;M<256;++M)w[M]=String.fromCharCode(M);lr=w}var lr=void 0;function Vt(w){for(var M="",Y=w;_t[Y];)M+=lr[_t[Y++]];return M}var ln={},Un={},_n={},It=48,Jn=57;function vr(w){if(w===void 0)return"_unknown";w=w.replace(/[^a-zA-Z0-9_]/g,"$");var M=w.charCodeAt(0);return M>=It&&M<=Jn?"_"+w:w}function Sn(w,M){return w=vr(w),new Function("body","return function "+w+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(M)}function qn(w,M){var Y=Sn(M,function(ae){this.name=M,this.message=ae;var pe=new Error(ae).stack;pe!==void 0&&(this.stack=this.toString()+`
`+pe.replace(/^Error(:[^\n]*)?\n/,""))});return Y.prototype=Object.create(w.prototype),Y.prototype.constructor=Y,Y.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Y}var nr=void 0;function Bt(w){throw new nr(w)}var Vn=void 0;function gn(w){throw new Vn(w)}function Rn(w,M,Y){w.forEach(function(Le){_n[Le]=M});function ae(Le){var Ye=Y(Le);Ye.length!==w.length&&gn("Mismatched type converter count");for(var gt=0;gt<w.length;++gt)Gn(w[gt],Ye[gt])}var pe=new Array(M.length),_e=[],xe=0;M.forEach(function(Le,Ye){Un.hasOwnProperty(Le)?pe[Ye]=Un[Le]:(_e.push(Le),ln.hasOwnProperty(Le)||(ln[Le]=[]),ln[Le].push(function(){pe[Ye]=Un[Le],++xe,xe===_e.length&&ae(pe)}))}),_e.length===0&&ae(pe)}function Gn(w,M,Y){if(Y=Y||{},!("argPackAdvance"in M))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ae=M.name;if(w||Bt('type "'+ae+'" must have a positive integer typeid pointer'),Un.hasOwnProperty(w)){if(Y.ignoreDuplicateRegistrations)return;Bt("Cannot register type '"+ae+"' twice")}if(Un[w]=M,delete _n[w],ln.hasOwnProperty(w)){var pe=ln[w];delete ln[w],pe.forEach(function(_e){_e()})}}function rr(w,M,Y,ae,pe){var _e=br(Y);M=Vt(M),Gn(w,{name:M,fromWireType:function(xe){return!!xe},toWireType:function(xe,Le){return Le?ae:pe},argPackAdvance:8,readValueFromPointer:function(xe){var Le;if(Y===1)Le=Ln;else if(Y===2)Le=cn;else if(Y===4)Le=Ke;else throw new TypeError("Unknown boolean type size: "+M);return this.fromWireType(Le[xe>>_e])},destructorFunction:null})}function xr(w){if(!(this instanceof ci)||!(w instanceof ci))return!1;for(var M=this.$$.ptrType.registeredClass,Y=this.$$.ptr,ae=w.$$.ptrType.registeredClass,pe=w.$$.ptr;M.baseClass;)Y=M.upcast(Y),M=M.baseClass;for(;ae.baseClass;)pe=ae.upcast(pe),ae=ae.baseClass;return M===ae&&Y===pe}function fn(w){return{count:w.count,deleteScheduled:w.deleteScheduled,preservePointerOnDelete:w.preservePointerOnDelete,ptr:w.ptr,ptrType:w.ptrType,smartPtr:w.smartPtr,smartPtrType:w.smartPtrType}}function Xn(w){function M(Y){return Y.$$.ptrType.registeredClass.name}Bt(M(w)+" instance already deleted")}var kn=!1;function Pt(w){}function ar(w){w.smartPtr?w.smartPtrType.rawDestructor(w.smartPtr):w.ptrType.registeredClass.rawDestructor(w.ptr)}function Lr(w){w.count.value-=1;var M=w.count.value===0;M&&ar(w)}function An(w){return typeof FinalizationGroup>"u"?(An=function(M){return M},w):(kn=new FinalizationGroup(function(M){for(var Y=M.next();!Y.done;Y=M.next()){var ae=Y.value;ae.ptr?Lr(ae):console.warn("object already deleted: "+ae.ptr)}}),An=function(M){return kn.register(M,M.$$,M.$$),M},Pt=function(M){kn.unregister(M.$$)},An(w))}function Er(){if(this.$$.ptr||Xn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var w=An(Object.create(Object.getPrototypeOf(this),{$$:{value:fn(this.$$)}}));return w.$$.count.value+=1,w.$$.deleteScheduled=!1,w}function jn(){this.$$.ptr||Xn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Bt("Object already scheduled for deletion"),Pt(this),Lr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Or(){return!this.$$.ptr}var mi=void 0,Nr=[];function Mr(){for(;Nr.length;){var w=Nr.pop();w.$$.deleteScheduled=!1,w.delete()}}function ui(){return this.$$.ptr||Xn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Bt("Object already scheduled for deletion"),Nr.push(this),Nr.length===1&&mi&&mi(Mr),this.$$.deleteScheduled=!0,this}function Oi(){ci.prototype.isAliasOf=xr,ci.prototype.clone=Er,ci.prototype.delete=jn,ci.prototype.isDeleted=Or,ci.prototype.deleteLater=ui}function ci(){}var Fi={};function Ci(w,M,Y){if(w[M].overloadTable===void 0){var ae=w[M];w[M]=function(){return w[M].overloadTable.hasOwnProperty(arguments.length)||Bt("Function '"+Y+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+w[M].overloadTable+")!"),w[M].overloadTable[arguments.length].apply(this,arguments)},w[M].overloadTable=[],w[M].overloadTable[ae.argCount]=ae}}function Ni(w,M,Y){c.hasOwnProperty(w)?((Y===void 0||c[w].overloadTable!==void 0&&c[w].overloadTable[Y]!==void 0)&&Bt("Cannot register public name '"+w+"' twice"),Ci(c,w,w),c.hasOwnProperty(Y)&&Bt("Cannot register multiple overloads of a function with the same number of arguments ("+Y+")!"),c[w].overloadTable[Y]=M):(c[w]=M,Y!==void 0&&(c[w].numArguments=Y))}function Si(w,M,Y,ae,pe,_e,xe,Le){this.name=w,this.constructor=M,this.instancePrototype=Y,this.rawDestructor=ae,this.baseClass=pe,this.getActualType=_e,this.upcast=xe,this.downcast=Le,this.pureVirtualFunctions=[]}function b(w,M,Y){for(;M!==Y;)M.upcast||Bt("Expected null or instance of "+Y.name+", got an instance of "+M.name),w=M.upcast(w),M=M.baseClass;return w}function H(w,M){if(M===null)return this.isReference&&Bt("null is not a valid "+this.name),0;M.$$||Bt('Cannot pass "'+B(M)+'" as a '+this.name),M.$$.ptr||Bt("Cannot pass deleted object as a pointer of type "+this.name);var Y=M.$$.ptrType.registeredClass,ae=b(M.$$.ptr,Y,this.registeredClass);return ae}function ie(w,M){var Y;if(M===null)return this.isReference&&Bt("null is not a valid "+this.name),this.isSmartPointer?(Y=this.rawConstructor(),w!==null&&w.push(this.rawDestructor,Y),Y):0;M.$$||Bt('Cannot pass "'+B(M)+'" as a '+this.name),M.$$.ptr||Bt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&M.$$.ptrType.isConst&&Bt("Cannot convert argument of type "+(M.$$.smartPtrType?M.$$.smartPtrType.name:M.$$.ptrType.name)+" to parameter type "+this.name);var ae=M.$$.ptrType.registeredClass;if(Y=b(M.$$.ptr,ae,this.registeredClass),this.isSmartPointer)switch(M.$$.smartPtr===void 0&&Bt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:M.$$.smartPtrType===this?Y=M.$$.smartPtr:Bt("Cannot convert argument of type "+(M.$$.smartPtrType?M.$$.smartPtrType.name:M.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:Y=M.$$.smartPtr;break;case 2:if(M.$$.smartPtrType===this)Y=M.$$.smartPtr;else{var pe=M.clone();Y=this.rawShare(Y,U(function(){pe.delete()})),w!==null&&w.push(this.rawDestructor,Y)}break;default:Bt("Unsupporting sharing policy")}return Y}function D(w,M){if(M===null)return this.isReference&&Bt("null is not a valid "+this.name),0;M.$$||Bt('Cannot pass "'+B(M)+'" as a '+this.name),M.$$.ptr||Bt("Cannot pass deleted object as a pointer of type "+this.name),M.$$.ptrType.isConst&&Bt("Cannot convert argument of type "+M.$$.ptrType.name+" to parameter type "+this.name);var Y=M.$$.ptrType.registeredClass,ae=b(M.$$.ptr,Y,this.registeredClass);return ae}function J(w){return this.fromWireType(pt[w>>2])}function ue(w){return this.rawGetPointee&&(w=this.rawGetPointee(w)),w}function be(w){this.rawDestructor&&this.rawDestructor(w)}function Re(w){w!==null&&w.delete()}function Ze(w,M,Y){if(M===Y)return w;if(Y.baseClass===void 0)return null;var ae=Ze(w,M,Y.baseClass);return ae===null?null:Y.downcast(ae)}function Nt(){return Object.keys(Ht).length}function qt(){var w=[];for(var M in Ht)Ht.hasOwnProperty(M)&&w.push(Ht[M]);return w}function $t(w){mi=w,Nr.length&&mi&&mi(Mr)}function At(){c.getInheritedInstanceCount=Nt,c.getLiveInheritedInstances=qt,c.flushPendingDeletes=Mr,c.setDelayFunction=$t}var Ht={};function Yn(w,M){for(M===void 0&&Bt("ptr should not be undefined");w.baseClass;)M=w.upcast(M),w=w.baseClass;return M}function Tr(w,M){return M=Yn(w,M),Ht[M]}function Ur(w,M){(!M.ptrType||!M.ptr)&&gn("makeClassHandle requires ptr and ptrType");var Y=!!M.smartPtrType,ae=!!M.smartPtr;return Y!==ae&&gn("Both smartPtrType and smartPtr must be specified"),M.count={value:1},An(Object.create(w,{$$:{value:M}}))}function Qn(w){var M=this.getPointee(w);if(!M)return this.destructor(w),null;var Y=Tr(this.registeredClass,M);if(Y!==void 0){if(Y.$$.count.value===0)return Y.$$.ptr=M,Y.$$.smartPtr=w,Y.clone();var ae=Y.clone();return this.destructor(w),ae}function pe(){return this.isSmartPointer?Ur(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:M,smartPtrType:this,smartPtr:w}):Ur(this.registeredClass.instancePrototype,{ptrType:this,ptr:w})}var _e=this.registeredClass.getActualType(M),xe=Fi[_e];if(!xe)return pe.call(this);var Le;this.isConst?Le=xe.constPointerType:Le=xe.pointerType;var Ye=Ze(M,this.registeredClass,Le.registeredClass);return Ye===null?pe.call(this):this.isSmartPointer?Ur(Le.registeredClass.instancePrototype,{ptrType:Le,ptr:Ye,smartPtrType:this,smartPtr:w}):Ur(Le.registeredClass.instancePrototype,{ptrType:Le,ptr:Ye})}function tr(){zn.prototype.getPointee=ue,zn.prototype.destructor=be,zn.prototype.argPackAdvance=8,zn.prototype.readValueFromPointer=J,zn.prototype.deleteObject=Re,zn.prototype.fromWireType=Qn}function zn(w,M,Y,ae,pe,_e,xe,Le,Ye,gt,kt){this.name=w,this.registeredClass=M,this.isReference=Y,this.isConst=ae,this.isSmartPointer=pe,this.pointeeType=_e,this.sharingPolicy=xe,this.rawGetPointee=Le,this.rawConstructor=Ye,this.rawShare=gt,this.rawDestructor=kt,!pe&&M.baseClass===void 0?ae?(this.toWireType=H,this.destructorFunction=null):(this.toWireType=D,this.destructorFunction=null):this.toWireType=ie}function Vr(w,M,Y){c.hasOwnProperty(w)||gn("Replacing nonexistant public symbol"),c[w].overloadTable!==void 0&&Y!==void 0?c[w].overloadTable[Y]=M:(c[w]=M,c[w].argCount=Y)}function Ar(w,M,Y){var ae=c["dynCall_"+w];return Y&&Y.length?ae.apply(null,[M].concat(Y)):ae.call(null,M)}function Hn(w,M,Y){return w.includes("j")?Ar(w,M,Y):an.get(M).apply(null,Y)}function nn(w,M){var Y=[];return function(){Y.length=arguments.length;for(var ae=0;ae<arguments.length;ae++)Y[ae]=arguments[ae];return Hn(w,M,Y)}}function on(w,M){w=Vt(w);function Y(){return w.includes("j")?nn(w,M):an.get(M)}var ae=Y();return typeof ae!="function"&&Bt("unknown function pointer with signature "+w+": "+M),ae}var Kn=void 0;function pr(w){var M=se(w),Y=Vt(M);return zt(M),Y}function he(w,M){var Y=[],ae={};function pe(_e){if(!ae[_e]&&!Un[_e]){if(_n[_e]){_n[_e].forEach(pe);return}Y.push(_e),ae[_e]=!0}}throw M.forEach(pe),new Kn(w+": "+Y.map(pr).join([", "]))}function ve(w,M,Y,ae,pe,_e,xe,Le,Ye,gt,kt,$n,wr){kt=Vt(kt),_e=on(pe,_e),Le&&(Le=on(xe,Le)),gt&&(gt=on(Ye,gt)),wr=on($n,wr);var Zr=vr(kt);Ni(Zr,function(){he("Cannot construct "+kt+" due to unbound types",[ae])}),Rn([w,M,Y],ae?[ae]:[],function(Li){Li=Li[0];var eo,Ct;ae?(eo=Li.registeredClass,Ct=eo.instancePrototype):Ct=ci.prototype;var ur=Sn(Zr,function(){if(Object.getPrototypeOf(this)!==ro)throw new nr("Use 'new' to construct "+kt);if(Ui.constructor_body===void 0)throw new nr(kt+" has no accessible constructor");var Lh=Ui.constructor_body[arguments.length];if(Lh===void 0)throw new nr("Tried to invoke ctor of "+kt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ui.constructor_body).toString()+") parameters instead!");return Lh.apply(this,arguments)}),ro=Object.create(Ct,{constructor:{value:ur}});ur.prototype=ro;var Ui=new Si(kt,ur,ro,wr,eo,_e,Le,gt),Qo=new zn(kt,Ui,!0,!1,!1),ls=new zn(kt+"*",Ui,!1,!1,!1),ys=new zn(kt+" const*",Ui,!1,!0,!1);return Fi[w]={pointerType:ls,constPointerType:ys},Vr(Zr,ur),[Qo,ls,ys]})}function Be(w,M){for(var Y=[],ae=0;ae<w;ae++)Y.push(Ke[(M>>2)+ae]);return Y}function We(w){for(;w.length;){var M=w.pop(),Y=w.pop();Y(M)}}function st(w,M,Y,ae,pe,_e){Ir(M>0);var xe=Be(M,Y);pe=on(ae,pe);var Le=[_e],Ye=[];Rn([],[w],function(gt){gt=gt[0];var kt="constructor "+gt.name;if(gt.registeredClass.constructor_body===void 0&&(gt.registeredClass.constructor_body=[]),gt.registeredClass.constructor_body[M-1]!==void 0)throw new nr("Cannot register multiple constructors with identical number of parameters ("+(M-1)+") for class '"+gt.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return gt.registeredClass.constructor_body[M-1]=function(){he("Cannot construct "+gt.name+" due to unbound types",xe)},Rn([],xe,function($n){return gt.registeredClass.constructor_body[M-1]=function(){arguments.length!==M-1&&Bt(kt+" called with "+arguments.length+" arguments, expected "+(M-1)),Ye.length=0,Le.length=M;for(var Zr=1;Zr<M;++Zr)Le[Zr]=$n[Zr].toWireType(Ye,arguments[Zr-1]);var Li=pe.apply(null,Le);return We(Ye),$n[0].fromWireType(Li)},[]}),[]})}function bt(w,M){if(!(w instanceof Function))throw new TypeError("new_ called with constructor type "+typeof w+" which is not a function");var Y=Sn(w.name||"unknownFunctionName",function(){});Y.prototype=w.prototype;var ae=new Y,pe=w.apply(ae,M);return pe instanceof Object?pe:ae}function Ft(w,M,Y,ae,pe){var _e=M.length;_e<2&&Bt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var xe=M[1]!==null&&Y!==null,Le=!1,Ye=1;Ye<M.length;++Ye)if(M[Ye]!==null&&M[Ye].destructorFunction===void 0){Le=!0;break}for(var gt=M[0].name!=="void",kt="",$n="",Ye=0;Ye<_e-2;++Ye)kt+=(Ye!==0?", ":"")+"arg"+Ye,$n+=(Ye!==0?", ":"")+"arg"+Ye+"Wired";var wr="return function "+vr(w)+"("+kt+`) {
if (arguments.length !== `+(_e-2)+`) {
throwBindingError('function `+w+" called with ' + arguments.length + ' arguments, expected "+(_e-2)+` args!');
}
`;Le&&(wr+=`var destructors = [];
`);var Zr=Le?"destructors":"null",Li=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],eo=[Bt,ae,pe,We,M[0],M[1]];xe&&(wr+="var thisWired = classParam.toWireType("+Zr+`, this);
`);for(var Ye=0;Ye<_e-2;++Ye)wr+="var arg"+Ye+"Wired = argType"+Ye+".toWireType("+Zr+", arg"+Ye+"); // "+M[Ye+2].name+`
`,Li.push("argType"+Ye),eo.push(M[Ye+2]);if(xe&&($n="thisWired"+($n.length>0?", ":"")+$n),wr+=(gt?"var rv = ":"")+"invoker(fn"+($n.length>0?", ":"")+$n+`);
`,Le)wr+=`runDestructors(destructors);
`;else for(var Ye=xe?1:2;Ye<M.length;++Ye){var Ct=Ye===1?"thisWired":"arg"+(Ye-2)+"Wired";M[Ye].destructorFunction!==null&&(wr+=Ct+"_dtor("+Ct+"); // "+M[Ye].name+`
`,Li.push(Ct+"_dtor"),eo.push(M[Ye].destructorFunction))}gt&&(wr+=`var ret = retType.fromWireType(rv);
return ret;
`),wr+=`}
`,Li.push(wr);var ur=bt(Function,Li).apply(null,eo);return ur}function R(w,M,Y,ae,pe,_e,xe,Le){var Ye=Be(Y,ae);M=Vt(M),_e=on(pe,_e),Rn([],[w],function(gt){gt=gt[0];var kt=gt.name+"."+M;M.startsWith("@@")&&(M=Symbol[M.substring(2)]),Le&&gt.registeredClass.pureVirtualFunctions.push(M);function $n(){he("Cannot call "+kt+" due to unbound types",Ye)}var wr=gt.registeredClass.instancePrototype,Zr=wr[M];return Zr===void 0||Zr.overloadTable===void 0&&Zr.className!==gt.name&&Zr.argCount===Y-2?($n.argCount=Y-2,$n.className=gt.name,wr[M]=$n):(Ci(wr,M,kt),wr[M].overloadTable[Y-2]=$n),Rn([],Ye,function(Li){var eo=Ft(kt,Li,gt,_e,xe);return wr[M].overloadTable===void 0?(eo.argCount=Y-2,wr[M]=eo):wr[M].overloadTable[Y-2]=eo,[]}),[]})}var y=[],m=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function C(w){w>4&&--m[w].refcount===0&&(m[w]=void 0,y.push(w))}function h(){for(var w=0,M=5;M<m.length;++M)m[M]!==void 0&&++w;return w}function g(){for(var w=5;w<m.length;++w)if(m[w]!==void 0)return m[w];return null}function x(){c.count_emval_handles=h,c.get_first_emval=g}function U(w){switch(w){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var M=y.length?y.pop():m.length;return m[M]={refcount:1,value:w},M}}}function z(w,M){M=Vt(M),Gn(w,{name:M,fromWireType:function(Y){var ae=m[Y].value;return C(Y),ae},toWireType:function(Y,ae){return U(ae)},argPackAdvance:8,readValueFromPointer:J,destructorFunction:null})}function B(w){if(w===null)return"null";var M=typeof w;return M==="object"||M==="array"||M==="function"?w.toString():""+w}function N(w,M){switch(M){case 2:return function(Y){return this.fromWireType(Zn[Y>>2])};case 3:return function(Y){return this.fromWireType(mt[Y>>3])};default:throw new TypeError("Unknown float type: "+w)}}function $(w,M,Y){var ae=br(Y);M=Vt(M),Gn(w,{name:M,fromWireType:function(pe){return pe},toWireType:function(pe,_e){if(typeof _e!="number"&&typeof _e!="boolean")throw new TypeError('Cannot convert "'+B(_e)+'" to '+this.name);return _e},argPackAdvance:8,readValueFromPointer:N(M,ae),destructorFunction:null})}function ce(w,M,Y){switch(M){case 0:return Y?function(pe){return Ln[pe]}:function(pe){return _t[pe]};case 1:return Y?function(pe){return cn[pe>>1]}:function(pe){return Wt[pe>>1]};case 2:return Y?function(pe){return Ke[pe>>2]}:function(pe){return pt[pe>>2]};default:throw new TypeError("Unknown integer type: "+w)}}function V(w,M,Y,ae,pe){M=Vt(M),pe===-1&&(pe=4294967295);var _e=br(Y),xe=function(gt){return gt};if(ae===0){var Le=32-8*Y;xe=function(gt){return gt<<Le>>>Le}}var Ye=M.includes("unsigned");Gn(w,{name:M,fromWireType:xe,toWireType:function(gt,kt){if(typeof kt!="number"&&typeof kt!="boolean")throw new TypeError('Cannot convert "'+B(kt)+'" to '+this.name);if(kt<ae||kt>pe)throw new TypeError('Passing a number "'+B(kt)+'" from JS side to C/C++ side to an argument of type "'+M+'", which is outside the valid range ['+ae+", "+pe+"]!");return Ye?kt>>>0:kt|0},argPackAdvance:8,readValueFromPointer:ce(M,_e,ae!==0),destructorFunction:null})}function S(w,M,Y){var ae=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],pe=ae[M];function _e(xe){xe=xe>>2;var Le=pt,Ye=Le[xe],gt=Le[xe+1];return new pe(mn,gt,Ye)}Y=Vt(Y),Gn(w,{name:Y,fromWireType:_e,argPackAdvance:8,readValueFromPointer:_e},{ignoreDuplicateRegistrations:!0})}function O(w,M){M=Vt(M);var Y=M==="std::string";Gn(w,{name:M,fromWireType:function(ae){var pe=pt[ae>>2],_e;if(Y)for(var xe=ae+4,Le=0;Le<=pe;++Le){var Ye=ae+4+Le;if(Le==pe||_t[Ye]==0){var gt=Ye-xe,kt=Sr(xe,gt);_e===void 0?_e=kt:(_e+=String.fromCharCode(0),_e+=kt),xe=Ye+1}}else{for(var $n=new Array(pe),Le=0;Le<pe;++Le)$n[Le]=String.fromCharCode(_t[ae+4+Le]);_e=$n.join("")}return zt(ae),_e},toWireType:function(ae,pe){pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe));var _e,xe=typeof pe=="string";xe||pe instanceof Uint8Array||pe instanceof Uint8ClampedArray||pe instanceof Int8Array||Bt("Cannot pass non-string to std::string"),Y&&xe?_e=function(){return ni(pe)}:_e=function(){return pe.length};var Le=_e(),Ye=dt(4+Le+1);if(pt[Ye>>2]=Le,Y&&xe)si(pe,Ye+4,Le+1);else if(xe)for(var gt=0;gt<Le;++gt){var kt=pe.charCodeAt(gt);kt>255&&(zt(Ye),Bt("String has UTF-16 code units that do not fit in 8 bits")),_t[Ye+4+gt]=kt}else for(var gt=0;gt<Le;++gt)_t[Ye+4+gt]=pe[gt];return ae!==null&&ae.push(zt,Ye),Ye},argPackAdvance:8,readValueFromPointer:J,destructorFunction:function(ae){zt(ae)}})}function q(w,M,Y){Y=Vt(Y);var ae,pe,_e,xe,Le;M===2?(ae=Ti,pe=Ri,xe=Ii,_e=function(){return Wt},Le=1):M===4&&(ae=Pi,pe=fi,xe=di,_e=function(){return pt},Le=2),Gn(w,{name:Y,fromWireType:function(Ye){for(var gt=pt[Ye>>2],kt=_e(),$n,wr=Ye+4,Zr=0;Zr<=gt;++Zr){var Li=Ye+4+Zr*M;if(Zr==gt||kt[Li>>Le]==0){var eo=Li-wr,Ct=ae(wr,eo);$n===void 0?$n=Ct:($n+=String.fromCharCode(0),$n+=Ct),wr=Li+M}}return zt(Ye),$n},toWireType:function(Ye,gt){typeof gt!="string"&&Bt("Cannot pass non-string to C++ string type "+Y);var kt=xe(gt),$n=dt(4+kt+M);return pt[$n>>2]=kt>>Le,pe(gt,$n+4,kt+M),Ye!==null&&Ye.push(zt,$n),$n},argPackAdvance:8,readValueFromPointer:J,destructorFunction:function(Ye){zt(Ye)}})}function oe(w,M){M=Vt(M),Gn(w,{isVoid:!0,name:M,argPackAdvance:0,fromWireType:function(){},toWireType:function(Y,ae){}})}function G(){ne()}function X(w,M,Y){_t.copyWithin(w,M,M+Y)}function te(w){try{return rn.grow(w-mn.byteLength+65535>>>16),Rt(rn.buffer),1}catch{}}function le(w){var M=_t.length;w=w>>>0;var Y=2147483648;if(w>Y)return!1;for(var ae=1;ae<=4;ae*=2){var pe=M*(1+.2/ae);pe=Math.min(pe,w+100663296);var _e=Math.min(Y,hi(Math.max(w,pe),65536)),xe=te(_e);if(xe)return!0}return!1}var Ce={mappings:{},buffers:[null,[],[]],printChar:function(w,M){var Y=Ce.buffers[w];M===0||M===10?((w===1?pn:Ot)(Jr(Y,0)),Y.length=0):Y.push(M)},varargs:void 0,get:function(){Ce.varargs+=4;var w=Ke[Ce.varargs-4>>2];return w},getStr:function(w){var M=Sr(w);return M},get64:function(w,M){return w}};function $e(w,M,Y,ae){for(var pe=0,_e=0;_e<Y;_e++){for(var xe=Ke[M+_e*8>>2],Le=Ke[M+(_e*8+4)>>2],Ye=0;Ye<Le;Ye++)Ce.printChar(w,_t[xe+Ye]);pe+=Le}return Ke[ae>>2]=pe,0}function lt(w){}hr(),nr=c.BindingError=qn(Error,"BindingError"),Vn=c.InternalError=qn(Error,"InternalError"),Oi(),tr(),At(),Kn=c.UnboundTypeError=qn(Error,"UnboundTypeError"),x();var tt={d:dr,t:ri,n:Br,o:Rr,i:rr,m:ve,l:st,k:R,s:z,h:$,c:V,b:S,g:O,f:q,j:oe,a:G,q:X,e:le,r:$e,p:lt};wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.v).apply(null,arguments)};var dt=c._malloc=function(){return(dt=c._malloc=c.asm.w).apply(null,arguments)},zt=c._free=function(){return(zt=c._free=c.asm.x).apply(null,arguments)},se=c.___getTypeName=function(){return(se=c.___getTypeName=c.asm.y).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.z).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.B).apply(null,arguments)};var F;sr=function w(){F||W(),F||(sr=w)};function W(w){if(Dn>0||(Pr(),Dn>0))return;function M(){F||(F=!0,c.calledRun=!0,!fr&&(ai(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),pi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),M()},1)):M()}if(c.run=W,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return W(),c.ready}}(),mr=typeof document>"u"?new(Bi("url")).URL("file:"+__dirname+"/visdif-f4d1bd06.wasm").href:new URL("visdif-f4d1bd06.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;async function gr(Ue,c,{min:Xe=0,max:et=100,epsilon:it=.1,maxRounds:je=6}={}){let Kt=(et-Xe)/2+Xe,Mt=(et-Xe)/4,xt,Jt=1;for(;;){if(xt=await c(Kt),Math.abs(xt-Ue)<it||Jt>=je)return{parameter:Kt,round:Jt,value:xt};xt>Ue?Kt-=Mt:xt<Ue&&(Kt+=Mt),Mt/=2,Jt++}}async function Gr(Ue,c,Xe,{butteraugliDistanceGoal:et=1.4,...it}={}){const{VisDiff:je}=await a(Bn,mr),Kt=new je(Ue.data,Ue.width,Ue.height);let Mt,xt;const{parameter:Jt}=await gr(-1*et,async hn=>(xt=await c(Ue,hn),Mt=await Xe(xt),-1*Kt.distance(Mt.data)),it);return Kt.delete(),{bitmap:Mt,binary:xt,quality:Jt}}async function yr({file:Ue}){var c;const Xe=new Uint8Array(Ue),et=Xe.slice(0,16),it=Array.from(et).map(Jt=>String.fromCodePoint(Jt)).join(""),je=(c=Object.entries(Ne).find(([Jt,{detectors:hn}])=>hn.some(tn=>tn.exec(it))))===null||c===void 0?void 0:c[0];if(!je)throw Error("File has an unsupported format");return{bitmap:(await Ne[je].dec()).decode(Xe),size:Xe.length}}async function _r({preprocessorName:Ue,options:c,image:Xe}){const et=await at[Ue].instantiate();return Xe.bitmap=await et(Uint8Array.from(Xe.bitmap.data),Xe.bitmap.width,Xe.bitmap.height,c),Xe}async function ti({bitmap:Ue,encName:c,encConfig:Xe,optimizerButteraugliTarget:et,maxOptimizerRounds:it}){let je,Kt=Xe;const Mt=await Ne[c].enc();if(Xe==="auto"){const xt=Ne[c].autoOptimize.option,Jt=await Ne[c].dec(),hn=(Gt,rn)=>Mt.encode(Gt.data,Gt.width,Gt.height,Object.assign({},Ne[c].defaultEncoderOptions,{[xt]:rn})),tn=Gt=>Jt.decode(Gt),vn=(Gt,rn)=>{const fr=hn(Gt,rn);if(!fr)throw new Error("There was an error while encoding");return fr},{binary:pn,quality:Ot}=await Gr(Ue,vn,tn,{min:Ne[c].autoOptimize.min,max:Ne[c].autoOptimize.max,butteraugliDistanceGoal:et,maxRounds:it});je=pn,Kt={[xt]:Math.round(Ot*1e4)/1e4}}else{const xt=Mt.encode(Ue.data.buffer,Ue.width,Ue.height,Xe);if(!xt)throw new Error("There was an error while encoding");je=xt}return{optionsUsed:Kt,binary:je,extension:Ne[c].extension,size:je.length}}function Wi(Ue){switch(Ue.operation){case"encode":return ti(Ue);case"decode":return yr(Ue);case"preprocess":return _r(Ue);default:throw Error(`Invalid job "${Ue.operation}"`)}}class zi{constructor(c,Xe){this.file=Xe,this.workerPool=c,this.decoded=c.dispatchJob({operation:"decode",file:Xe}),this.encodedWith={}}async preprocess(c={}){for(const[Xe,et]of Object.entries(c)){if(!Object.keys(at).includes(Xe))throw Error(`Invalid preprocessor "${Xe}"`);const it=Xe,je=Object.assign({},at[it].defaultOptions,et);this.decoded=this.workerPool.dispatchJob({operation:"preprocess",preprocessorName:it,image:await this.decoded,options:je}),await this.decoded}}async encode(c){var Xe,et;const{bitmap:it}=await this.decoded,je=[];for(const[Kt,Mt]of Object.entries(c)){if(!Object.keys(Ne).includes(Kt))continue;const xt=Kt,Jt=Ne[xt],hn=typeof Mt=="string"?Mt:Object.assign({},Jt.defaultEncoderOptions,Mt);je.push(this.workerPool.dispatchJob({operation:"encode",bitmap:it,encName:xt,encConfig:hn,optimizerButteraugliTarget:Number((Xe=c.optimizerButteraugliTarget)!==null&&Xe!==void 0?Xe:1.4),maxOptimizerRounds:Number((et=c.maxOptimizerRounds)!==null&&et!==void 0?et:6)}).then(tn=>{this.encodedWith[xt]=tn}))}return await Promise.all(je),this.encodedWith}}class Zi{constructor(c){this.workerPool=new Mn(c,__filename)}ingestImage(c){return new zi(this.workerPool,c)}async close(){await this.workerPool.join()}}return o.isMainThread||Mn.useThisThreadAsWorker(Wi),Qa.ImagePool=Zi,Qa.encoders=Ne,Qa.preprocessors=at,Qa}var Vb=vi&&vi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},jb=vi&&vi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.transform=void 0;var zb=fh,pf=dh,fs=Ub,jo=go;function Kb(o,e,t){var n,r,i,s,a,u,f,l,p,d,_,A=t===void 0?{draco:{method:jo.DRACO_METHOD},weld:{tolerance:jo.WELD_TOLERANCE},simplify:{enabled:jo.SIMPLIFY,ratio:jo.SIMPLIFY_RATIO,error:jo.SIMPLIFY_ERROR},texture:{resize:{resolution:jo.TEXTURE_RESIZE_RESOLUTION,filter:jo.TEXTURE_RESIZE_FILTER}}}:t,E=A.draco,v=A.weld,T=A.simplify,P=A.texture;return Vb(this,void 0,void 0,function(){var I;return jb(this,function(k){switch(k.label){case 0:return[4,pf.MeshoptEncoder.ready];case 1:return k.sent(),I=new Set([(0,fs.resample)(),(0,fs.draco)({method:(n=E==null?void 0:E.method)!==null&&n!==void 0?n:jo.DRACO_METHOD}),(0,fs.reorder)({encoder:pf.MeshoptEncoder}),(0,fs.prune)(),(0,fs.dedup)({propertyTypes:[zb.PropertyType.MESH]})]),((r=T==null?void 0:T.enabled)!==null&&r!==void 0?r:jo.SIMPLIFY)&&I.add((0,fs.weld)({tolerance:(i=v==null?void 0:v.tolerance)!==null&&i!==void 0?i:jo.WELD_TOLERANCE})).add((0,fs.simplify)({simplifier:pf.MeshoptSimplifier,ratio:(s=T==null?void 0:T.ratio)!==null&&s!==void 0?s:jo.SIMPLIFY_RATIO,error:(a=T==null?void 0:T.error)!==null&&a!==void 0?a:jo.SIMPLIFY_ERROR})),e&&I.add((0,fs.textureResize)({size:[(f=(u=P==null?void 0:P.resize)===null||u===void 0?void 0:u.resolution)!==null&&f!==void 0?f:jo.TEXTURE_RESIZE_RESOLUTION,(p=(l=P==null?void 0:P.resize)===null||l===void 0?void 0:l.resolution)!==null&&p!==void 0?p:jo.TEXTURE_RESIZE_RESOLUTION],filter:["LANCZOS2","lanczos2"].includes((_=(d=P==null?void 0:P.resize)===null||d===void 0?void 0:d.filter)!==null&&_!==void 0?_:"")?fs.TextureResizeFilter.LANCZOS2:fs.TextureResizeFilter.LANCZOS3})).add((0,fs.webp)({squoosh:Wb()})),[4,o.transform.apply(o,Array.from(I))];case 2:return[2,k.sent()]}})})}Pc.transform=Kb;var Jb=vi&&vi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},qb=vi&&vi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.node=void 0;var Xb=Mc,Yb=Xl,$b=Pc;function Zb(o,e){return Jb(this,void 0,void 0,function(){var t,n;return qb(this,function(r){switch(r.label){case 0:return[4,(0,Yb.nodeIO)()];case 1:return t=r.sent(),[4,t.readBinary(o)];case 2:return n=r.sent(),(0,Xb.setEmissiveStrength)(n,e==null?void 0:e.emissiveStrength),[4,(0,$b.transform)(n,!0,e==null?void 0:e.transform)];case 3:return r.sent(),[4,t.writeBinary(n)];case 4:return[2,r.sent()]}})})}Ul.node=Zb;var Ql={},ef={},Qb=75;function Bg(o,{quality:e,width:t,height:n}={}){return new Promise(function(r,i){var s=document.createElement("canvas"),a=s.getContext("2d"),u=new Image;u.src=o,u.crossOrigin="anonymous",u.onload=function(f){s.width=t||u.width,s.height=n||u.height,URL.revokeObjectURL(f.target.src),a.drawImage(f.target,0,0,s.width,s.height),s.toBlob(function(l){r(l)},"image/webp",e||Qb)},u.onerror=function(f){return i(f)}})}function xg(o,{quality:e,width:t,height:n}={}){return Bg(URL.createObjectURL(o),{quality:e,width:t,height:n})}function e0(o,{quality:e,width:t,height:n}={}){return xg(new Blob([o]),{quality:e,width:t,height:n})}const t0=Object.freeze(Object.defineProperty({__proto__:null,arrayBufferToWebP:e0,blobToWebP:xg,srcToWebP:Bg},Symbol.toStringTag,{value:"Module"})),n0=Ou(t0);var r0=vi&&vi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},i0=vi&&vi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(ef,"__esModule",{value:!0});ef.convertTextureWebP=void 0;var o0=n0;function s0(o,e){return e===void 0&&(e=1024),r0(this,void 0,void 0,function(){return i0(this,function(t){switch(t.label){case 0:return[4,Promise.all(o.getRoot().listTextures().map(function(n){var r,i=(r=n.getSize())!==null&&r!==void 0?r:[1024,1024],s=i[0],a=i[1],u=e/a0(s,a);return(0,o0.arrayBufferToWebP)(n.getImage(),{width:s*u,height:a*u}).then(function(f){return f.arrayBuffer()}).then(function(f){return new Uint8Array(f)}).then(function(f){n.copy(o.createTexture().setMimeType("image/webp").setImage(f))})}))];case 1:return t.sent(),[2]}})})}ef.convertTextureWebP=s0;function a0(o,e){return o>=e?o:e}var tf={},u0=vi&&vi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},c0=vi&&vi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},l0=vi&&vi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(tf,"__esModule",{value:!0});tf.webIO=void 0;var qp=l0(ng),f0=fh,Xp=dh,zu=lh;function d0(){return u0(this,void 0,void 0,function(){var o,e,t,n,r;return c0(this,function(i){switch(i.label){case 0:return e=(o=new f0.WebIO().registerExtensions([zu.DracoMeshCompression,zu.MaterialsSpecular,zu.MaterialsEmissiveStrength,zu.TextureWebP,zu.TextureTransform])).registerDependencies,r={},t="draco3d.decoder",[4,qp.default.createDecoderModule()];case 1:return r[t]=i.sent(),n="draco3d.encoder",[4,qp.default.createEncoderModule()];case 2:return[2,e.apply(o,[(r[n]=i.sent(),r["meshopt.decoder"]=Xp.MeshoptDecoder,r["meshopt.encoder"]=Xp.MeshoptEncoder,r)])]}})})}tf.webIO=d0;var h0=vi&&vi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},p0=vi&&vi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.web=void 0;var m0=Mc,_0=ef,g0=tf,y0=Pc;function v0(o,e){var t,n,r;return h0(this,void 0,void 0,function(){var i,s;return p0(this,function(a){switch(a.label){case 0:return[4,(0,g0.webIO)()];case 1:return i=a.sent(),[4,i.readBinary(o)];case 2:return s=a.sent(),(0,m0.setEmissiveStrength)(s,e==null?void 0:e.emissiveStrength),[4,(0,_0.convertTextureWebP)(s,(r=(n=(t=e==null?void 0:e.transform)===null||t===void 0?void 0:t.texture)===null||n===void 0?void 0:n.resize)===null||r===void 0?void 0:r.resolution)];case 3:return a.sent(),[4,(0,y0.transform)(s,!1,e==null?void 0:e.transform)];case 4:return a.sent(),[4,i.writeBinary(s)];case 5:return[2,a.sent()]}})})}Ql.web=v0;Object.defineProperty(Sd,"__esModule",{value:!0});var dd=Sd.optimizer=void 0,A0=Ul,b0=Ql;dd=Sd.optimizer={node:A0.node,web:b0.web};/**
 * filesize
 *
 * @copyright 2022 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.0.6
 */const E0="array",T0="bit",Yp="bits",w0="byte",$p="bytes",eu="",C0="exponent",S0="function",Yc="iec",B0="Invalid number",x0="Invalid rounding method",Ku="jedec",M0="object",Zp=".",D0="round",R0="s",I0="kbit",P0="kB",F0=" ",L0="string",O0="0",mf={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function _f(o,{bits:e=!1,pad:t=!1,base:n=-1,round:r=2,locale:i=eu,localeOptions:s={},separator:a=eu,spacer:u=F0,symbols:f={},standard:l=eu,output:p=L0,fullform:d=!1,fullforms:_=[],exponent:A=-1,roundingMethod:E=D0,precision:v=0}={}){let T=A,P=Number(o),I=[],k=0,K=eu;n===-1&&l.length===0?(n=10,l=Ku):n===-1&&l.length>0?(l=l===Yc?Yc:Ku,n=l===Yc?2:10):(n=n===2?2:10,l=n===10||l===Ku?Ku:Yc);const ee=n===10?1e3:1024,me=d===!0,Z=P<0,re=Math[E];if(typeof o!="bigint"&&isNaN(o))throw new TypeError(B0);if(typeof re!==S0)throw new TypeError(x0);if(Z&&(P=-P),(T===-1||isNaN(T))&&(T=Math.floor(Math.log(P)/Math.log(ee)),T<0&&(T=0)),T>8&&(v>0&&(v+=8-T),T=8),p===C0)return T;if(P===0)I[0]=0,K=I[1]=mf.symbol[l][e?Yp:$p][T];else{k=P/(n===2?Math.pow(2,T*10):Math.pow(1e3,T)),e&&(k=k*8,k>=ee&&T<8&&(k=k/ee,T++));const de=Math.pow(10,T>0?r:0);I[0]=re(k*de)/de,I[0]===ee&&T<8&&A===-1&&(I[0]=1,T++),K=I[1]=n===10&&T===1?e?I0:P0:mf.symbol[l][e?Yp:$p][T]}if(Z&&(I[0]=-I[0]),v>0&&(I[0]=I[0].toPrecision(v)),I[1]=f[I[1]]||I[1],i===!0?I[0]=I[0].toLocaleString():i.length>0?I[0]=I[0].toLocaleString(i,s):a.length>0&&(I[0]=I[0].toString().replace(Zp,a)),t&&Number.isInteger(I[0])===!1&&r>0){const de=a||Zp,Ie=I[0].toString().split(de),Pe=Ie[1]||eu,we=Pe.length,Te=r-we;I[0]=`${Ie[0]}${de}${Pe.padEnd(we+Te,O0)}`}return me&&(I[1]=_[T]?_[T]:mf.fullform[l][T]+(e?T0:w0)+(I[0]===1?eu:R0)),p===E0?I:p===M0?{value:I[0],symbol:I[1],exponent:T,unit:K}:I.join(u)}var Mg={};Object.defineProperty(Mg,"__esModule",{value:!0});function N0(o){var e=o.fileName,t=o.arrayBuffer,n=o.blob,r=o.mimeType,i=r===void 0?"application/octet-stream":r;if(n!=null){Qp(e,n);return}if(t!=null){var s=new Blob([t],{type:i});Qp(e,s);return}throw new Error("Either arrayBuffer or blob must be provided")}var U0=Mg.default=N0;function Qp(o,e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=o,n.click()}function G0(o){let e,t,n,r,i,s,a,u;return{c(){e=xi("div"),t=wo("Drag and drop your "),n=xi("code"),r=wo(".glb"),i=wo(` file here

	`),s=xi("input"),this.h()},l(f){e=Mi(f,"DIV",{id:!0,class:!0});var l=to(e);t=Co(l,"Drag and drop your "),n=Mi(l,"CODE",{class:!0});var p=to(n);r=Co(p,".glb"),p.forEach(Dr),i=Co(l,` file here

	`),s=Mi(l,"INPUT",{type:!0,accept:!0,id:!0,class:!0}),l.forEach(Dr),this.h()},h(){er(n,"class","svelte-tnc7wr"),er(s,"type","file"),er(s,"accept",".glb"),er(s,"id","dropzoneInput"),er(s,"class","svelte-tnc7wr"),er(e,"id","dropzone"),er(e,"class","svelte-tnc7wr")},m(f,l){io(f,e,l),jr(e,t),jr(e,n),jr(n,r),jr(e,i),jr(e,s),a||(u=[ko(s,"change",o[2]),ko(e,"dragover",Oh(o[4])),ko(e,"drop",Oh(o[5])),ko(e,"drop",o[1]),ko(e,"click",o[6])],a=!0)},p:Vo,i:Vo,o:Vo,d(f){f&&Dr(e),a=!1,H_(u)}}}function k0(o,e,t){let{onChangeFile:n}=e,r;Cd(()=>{t(0,r=document.getElementById("dropzoneInput"))});function i(l){t(0,r.files=l.dataTransfer.files,r),n(r.files)}const s=()=>n(r.files);function a(l){Nh.call(this,o,l)}function u(l){Nh.call(this,o,l)}const f=()=>r.click();return o.$$set=l=>{"onChangeFile"in l&&t(3,n=l.onChangeFile)},[r,i,s,n,a,u,f]}class H0 extends ca{constructor(e){super(),la(this,e,k0,G0,fa,{onChangeFile:3})}}const W0=""+new URL("../../assets/github-mark-26d56f27.png",import.meta.url).href;function V0(o){let e,t,n,r;return{c(){e=xi("a"),t=wo("Link to "),n=xi("img"),this.h()},l(i){e=Mi(i,"A",{href:!0,target:!0,id:!0,class:!0});var s=to(e);t=Co(s,"Link to "),n=Mi(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(Dr),this.h()},h(){fy(n.src,r=W0)||er(n,"src",r),er(n,"alt","GitHub"),er(n,"class","svelte-8avlu"),er(e,"href","https://github.com/juunini/gltf-optimizer"),er(e,"target","_new"),er(e,"id","githubLink"),er(e,"class","svelte-8avlu")},m(i,s){io(i,e,s),jr(e,t),jr(e,n)},p:Vo,i:Vo,o:Vo,d(i){i&&Dr(e)}}}class j0 extends ca{constructor(e){super(),la(this,e,null,V0,fa,{})}}function z0(o){let e,t;return{c(){e=xi("h1"),t=wo("glTF Optimizer"),this.h()},l(n){e=Mi(n,"H1",{class:!0});var r=to(e);t=Co(r,"glTF Optimizer"),r.forEach(Dr),this.h()},h(){er(e,"class","svelte-gsi8vg")},m(n,r){io(n,e,r),jr(e,t)},p:Vo,i:Vo,o:Vo,d(n){n&&Dr(e)}}}class K0 extends ca{constructor(e){super(),la(this,e,null,z0,fa,{})}}function J0(o){let e,t;const n=o[1].default,r=dy(n,o,o[0],null);return{c(){e=xi("section"),r&&r.c(),this.h()},l(i){e=Mi(i,"SECTION",{class:!0});var s=to(e);r&&r.l(s),s.forEach(Dr),this.h()},h(){er(e,"class","display-section svelte-1ev6xbg")},m(i,s){io(i,e,s),r&&r.m(e,null),t=!0},p(i,[s]){r&&r.p&&(!t||s&1)&&hy(r,n,i,i[0],t?my(n,i[0],s,null):py(i[0]),null)},i(i){t||(Gs(r,i),t=!0)},o(i){ks(r,i),t=!1},d(i){i&&Dr(e),r&&r.d(i)}}}function q0(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=i=>{"$$scope"in i&&t(0,r=i.$$scope)},[r,n]}class X0 extends ca{constructor(e){super(),la(this,e,q0,J0,fa,{})}}function Y0(o){let e,t,n,r,i,s;return{c(){e=xi("article"),t=xi("p"),n=wo(o[1]),r=Ro(),i=xi("p"),s=wo(o[2]),this.h()},l(a){e=Mi(a,"ARTICLE",{class:!0,id:!0});var u=to(e);t=Mi(u,"P",{class:!0});var f=to(t);n=Co(f,o[1]),f.forEach(Dr),r=Io(u),i=Mi(u,"P",{class:!0});var l=to(i);s=Co(l,o[2]),l.forEach(Dr),u.forEach(Dr),this.h()},h(){er(t,"class","svelte-1x1q1f0"),er(i,"class","svelte-1x1q1f0"),er(e,"class","display-article svelte-1x1q1f0"),er(e,"id",o[0])},m(a,u){io(a,e,u),jr(e,t),jr(t,n),jr(e,r),jr(e,i),jr(i,s)},p(a,[u]){u&2&&Uh(n,a[1]),u&4&&Uh(s,a[2]),u&1&&er(e,"id",a[0])},i:Vo,o:Vo,d(a){a&&Dr(e)}}}function $0(o,e,t){let{id:n}=e,{fileName:r}=e,{size:i}=e,{scene:s}=e;return Cd(()=>{setTimeout(()=>document.getElementById(n).appendChild(s),100)}),o.$$set=a=>{"id"in a&&t(0,n=a.id),"fileName"in a&&t(1,r=a.fileName),"size"in a&&t(2,i=a.size),"scene"in a&&t(3,s=a.scene)},[n,r,i,s]}class em extends ca{constructor(e){super(),la(this,e,$0,Y0,fa,{id:0,fileName:1,size:2,scene:3})}}function Z0(o){let e,t,n,r;return{c(){e=xi("button"),t=wo("Download"),this.h()},l(i){e=Mi(i,"BUTTON",{class:!0,type:!0});var s=to(e);t=Co(s,"Download"),s.forEach(Dr),this.h()},h(){er(e,"class","download-button svelte-1yp52zu"),er(e,"type","button"),e.disabled=o[0]},m(i,s){io(i,e,s),jr(e,t),n||(r=ko(e,"click",function(){W_(o[1])&&o[1].apply(this,arguments)}),n=!0)},p(i,[s]){o=i,s&1&&(e.disabled=o[0])},i:Vo,o:Vo,d(i){i&&Dr(e),n=!1,r()}}}function Q0(o,e,t){let{disabled:n}=e,{onClick:r}=e;return o.$$set=i=>{"disabled"in i&&t(0,n=i.disabled),"onClick"in i&&t(1,r=i.onClick)},[n,r]}class eE extends ca{constructor(e){super(),la(this,e,Q0,Z0,fa,{disabled:0,onClick:1})}}function tE(o){let e,t,n,r,i,s,a,u,f,l,p,d,_,A,E,v,T,P,I,k,K,ee,me,Z,re,de,Ie,Pe,we,Te,Se,Oe,He,j,ht,Qe,Je,ze,ut,ke,L,nt,In,Xt,Pn;return{c(){e=xi("div"),t=xi("label"),n=wo(`Emissive Strength
    `),r=xi("input"),i=Ro(),s=xi("div"),a=xi("label"),u=wo(`Simplify
    `),f=xi("input"),l=Ro(),p=xi("label"),d=wo(`Simplify Ratio
    `),_=xi("input"),E=Ro(),v=xi("label"),T=wo(`Simplify Error
    `),P=xi("input"),k=Ro(),K=xi("div"),ee=xi("label"),me=wo(`Weld Tolerance
    `),Z=xi("input"),re=Ro(),de=xi("div"),Ie=xi("label"),Pe=wo(`Texture Resolution
    `),we=xi("input"),Te=Ro(),Se=xi("label"),Oe=wo(`LANCZOS2
    `),He=xi("input"),ht=Ro(),Qe=xi("label"),Je=wo(`LANCZOS3
    `),ze=xi("input"),ke=Ro(),L=xi("div"),nt=xi("button"),In=wo("Re Compress"),this.h()},l(vt){e=Mi(vt,"DIV",{class:!0});var dn=to(e);t=Mi(dn,"LABEL",{});var Yt=to(t);n=Co(Yt,`Emissive Strength
    `),r=Mi(Yt,"INPUT",{type:!0,min:!0,step:!0,class:!0}),Yt.forEach(Dr),dn.forEach(Dr),i=Io(vt),s=Mi(vt,"DIV",{class:!0});var yn=to(s);a=Mi(yn,"LABEL",{});var Cr=to(a);u=Co(Cr,`Simplify
    `),f=Mi(Cr,"INPUT",{type:!0}),Cr.forEach(Dr),l=Io(yn),p=Mi(yn,"LABEL",{});var Qr=to(p);d=Co(Qr,`Simplify Ratio
    `),_=Mi(Qr,"INPUT",{type:!0,max:!0,min:!0,step:!0,class:!0}),Qr.forEach(Dr),E=Io(yn),v=Mi(yn,"LABEL",{});var Ai=to(v);T=Co(Ai,`Simplify Error
    `),P=Mi(Ai,"INPUT",{type:!0,max:!0,min:!0,step:!0,class:!0}),Ai.forEach(Dr),yn.forEach(Dr),k=Io(vt),K=Mi(vt,"DIV",{class:!0});var oi=to(K);ee=Mi(oi,"LABEL",{});var qr=to(ee);me=Co(qr,`Weld Tolerance
    `),Z=Mi(qr,"INPUT",{type:!0,max:!0,min:!0,step:!0,class:!0}),qr.forEach(Dr),oi.forEach(Dr),re=Io(vt),de=Mi(vt,"DIV",{class:!0});var xn=to(de);Ie=Mi(xn,"LABEL",{});var ei=to(Ie);Pe=Co(ei,`Texture Resolution
    `),we=Mi(ei,"INPUT",{type:!0,class:!0}),ei.forEach(Dr),Te=Io(xn),Se=Mi(xn,"LABEL",{});var ir=to(Se);Oe=Co(ir,`LANCZOS2
    `),He=Mi(ir,"INPUT",{type:!0,name:!0}),ir.forEach(Dr),ht=Io(xn),Qe=Mi(xn,"LABEL",{});var Ae=to(Qe);Je=Co(Ae,`LANCZOS3
    `),ze=Mi(Ae,"INPUT",{type:!0,name:!0}),Ae.forEach(Dr),xn.forEach(Dr),ke=Io(vt),L=Mi(vt,"DIV",{class:!0});var fe=to(L);nt=Mi(fe,"BUTTON",{type:!0,class:!0});var ot=to(nt);In=Co(ot,"Re Compress"),ot.forEach(Dr),fe.forEach(Dr),this.h()},h(){er(r,"type","number"),er(r,"min","0"),er(r,"step","0.1"),er(r,"class","svelte-hjvgo6"),er(e,"class","box svelte-hjvgo6"),er(f,"type","checkbox"),er(_,"type","number"),_.disabled=A=!o[2].enabled,er(_,"max","1"),er(_,"min","0"),er(_,"step","0.01"),er(_,"class","svelte-hjvgo6"),er(P,"type","number"),P.disabled=I=!o[2].enabled,er(P,"max","1"),er(P,"min","0"),er(P,"step","0.01"),er(P,"class","svelte-hjvgo6"),er(s,"class","box svelte-hjvgo6"),er(Z,"type","number"),er(Z,"max","1"),er(Z,"min","0"),er(Z,"step","0.0001"),er(Z,"class","svelte-hjvgo6"),er(K,"class","box svelte-hjvgo6"),er(we,"type","number"),er(we,"class","svelte-hjvgo6"),er(He,"type","radio"),er(He,"name","texture-resize-filter"),He.__value="LANCZOS2",He.value=He.__value,He.checked=j=o[3].resize.filter==="LANCZOS2",o[13][0].push(He),er(ze,"type","radio"),er(ze,"name","texture-resize-filter"),ze.__value="LANCZOS3",ze.value=ze.__value,ze.checked=ut=o[3].resize.filter==="LANCZOS3",o[13][0].push(ze),er(de,"class","box svelte-hjvgo6"),er(nt,"type","button"),nt.disabled=o[5],er(nt,"class","svelte-hjvgo6"),er(L,"class","box svelte-hjvgo6")},m(vt,dn){io(vt,e,dn),jr(e,t),jr(t,n),jr(t,r),vs(r,o[0]),io(vt,i,dn),io(vt,s,dn),jr(s,a),jr(a,u),jr(a,f),f.checked=o[2].enabled,jr(s,l),jr(s,p),jr(p,d),jr(p,_),vs(_,o[2].ratio),jr(s,E),jr(s,v),jr(v,T),jr(v,P),vs(P,o[2].error),io(vt,k,dn),io(vt,K,dn),jr(K,ee),jr(ee,me),jr(ee,Z),vs(Z,o[1].tolerance),io(vt,re,dn),io(vt,de,dn),jr(de,Ie),jr(Ie,Pe),jr(Ie,we),vs(we,o[3].resize.resolution),jr(de,Te),jr(de,Se),jr(Se,Oe),jr(Se,He),He.checked=He.__value===o[3].resize.filter,jr(de,ht),jr(de,Qe),jr(Qe,Je),jr(Qe,ze),ze.checked=ze.__value===o[3].resize.filter,io(vt,ke,dn),io(vt,L,dn),jr(L,nt),jr(nt,In),Xt||(Pn=[ko(r,"input",o[6]),ko(f,"change",o[7]),ko(_,"input",o[8]),ko(P,"input",o[9]),ko(Z,"input",o[10]),ko(we,"input",o[11]),ko(He,"change",o[12]),ko(ze,"change",o[14]),ko(nt,"click",function(){W_(o[4])&&o[4].apply(this,arguments)})],Xt=!0)},p(vt,[dn]){o=vt,dn&1&&ws(r.value)!==o[0]&&vs(r,o[0]),dn&4&&(f.checked=o[2].enabled),dn&4&&A!==(A=!o[2].enabled)&&(_.disabled=A),dn&4&&ws(_.value)!==o[2].ratio&&vs(_,o[2].ratio),dn&4&&I!==(I=!o[2].enabled)&&(P.disabled=I),dn&4&&ws(P.value)!==o[2].error&&vs(P,o[2].error),dn&2&&ws(Z.value)!==o[1].tolerance&&vs(Z,o[1].tolerance),dn&8&&ws(we.value)!==o[3].resize.resolution&&vs(we,o[3].resize.resolution),dn&8&&j!==(j=o[3].resize.filter==="LANCZOS2")&&(He.checked=j),dn&8&&(He.checked=He.__value===o[3].resize.filter),dn&8&&ut!==(ut=o[3].resize.filter==="LANCZOS3")&&(ze.checked=ut),dn&8&&(ze.checked=ze.__value===o[3].resize.filter),dn&32&&(nt.disabled=o[5])},i:Vo,o:Vo,d(vt){vt&&Dr(e),vt&&Dr(i),vt&&Dr(s),vt&&Dr(k),vt&&Dr(K),vt&&Dr(re),vt&&Dr(de),o[13][0].splice(o[13][0].indexOf(He),1),o[13][0].splice(o[13][0].indexOf(ze),1),vt&&Dr(ke),vt&&Dr(L),Xt=!1,H_(Pn)}}}function nE(o,e,t){let{emissiveStrength:n}=e,{weld:r}=e,{simplify:i}=e,{texture:s}=e,{reCompress:a}=e,{disabledReCompress:u}=e;const f=[[]];function l(){n=ws(this.value),t(0,n)}function p(){i.enabled=this.checked,t(2,i)}function d(){i.ratio=ws(this.value),t(2,i)}function _(){i.error=ws(this.value),t(2,i)}function A(){r.tolerance=ws(this.value),t(1,r)}function E(){s.resize.resolution=ws(this.value),t(3,s)}function v(){s.resize.filter=this.__value,t(3,s)}function T(){s.resize.filter=this.__value,t(3,s)}return o.$$set=P=>{"emissiveStrength"in P&&t(0,n=P.emissiveStrength),"weld"in P&&t(1,r=P.weld),"simplify"in P&&t(2,i=P.simplify),"texture"in P&&t(3,s=P.texture),"reCompress"in P&&t(4,a=P.reCompress),"disabledReCompress"in P&&t(5,u=P.disabledReCompress)},[n,r,i,s,a,u,l,p,d,_,A,E,v,f,T]}class rE extends ca{constructor(e){super(),la(this,e,nE,tE,fa,{emissiveStrength:0,weld:1,simplify:2,texture:3,reCompress:4,disabledReCompress:5})}}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const bh="148",tu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},iE=0,tm=1,oE=2,Dg=1,sE=2,uc=3,ua=0,cs=1,nf=2,$c=3,aa=0,wu=1,nm=2,rm=3,im=4,aE=5,vu=100,uE=101,cE=102,om=103,sm=104,lE=200,fE=201,dE=202,hE=203,Rg=204,Ig=205,pE=206,mE=207,_E=208,gE=209,yE=210,vE=0,AE=1,bE=2,hd=3,EE=4,TE=5,wE=6,CE=7,Pg=0,SE=1,BE=2,js=0,xE=1,ME=2,DE=3,RE=4,IE=5,Fg=300,Mu=301,Du=302,pd=303,md=304,rf=306,Ru=1e3,is=1001,Ll=1002,To=1003,_d=1004,Cl=1005,qo=1006,Lg=1007,Va=1008,ja=1009,PE=1010,FE=1011,Og=1012,LE=1013,Ra=1014,oa=1015,Ec=1016,OE=1017,NE=1018,Cu=1020,UE=1021,GE=1022,os=1023,kE=1024,HE=1025,Oa=1026,Iu=1027,WE=1028,VE=1029,jE=1030,zE=1031,KE=1033,gf=33776,yf=33777,vf=33778,Af=33779,am=35840,um=35841,cm=35842,lm=35843,JE=36196,fm=37492,dm=37496,hm=37808,pm=37809,mm=37810,_m=37811,gm=37812,ym=37813,vm=37814,Am=37815,bm=37816,Em=37817,Tm=37818,wm=37819,Cm=37820,Sm=37821,Bm=36492,Tc=2300,Pu=2301,bf=2302,xm=2400,Mm=2401,Dm=2402,qE=2500,XE=1,Ng=2,za=3e3,Vi=3001,YE=3200,$E=3201,Ug=0,ZE=1,Es="srgb",wc="srgb-linear",Ef=7680,QE=519,gd=35044,Rm="300 es",yd=1035;class Ya{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,e);e.target=null}}}const Do=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Im=1234567;const _c=Math.PI/180,Cc=180/Math.PI;function _s(){const o=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Do[o&255]+Do[o>>8&255]+Do[o>>16&255]+Do[o>>24&255]+"-"+Do[e&255]+Do[e>>8&255]+"-"+Do[e>>16&15|64]+Do[e>>24&255]+"-"+Do[t&63|128]+Do[t>>8&255]+"-"+Do[t>>16&255]+Do[t>>24&255]+Do[n&255]+Do[n>>8&255]+Do[n>>16&255]+Do[n>>24&255]).toLowerCase()}function Po(o,e,t){return Math.max(e,Math.min(t,o))}function Eh(o,e){return(o%e+e)%e}function eT(o,e,t,n,r){return n+(o-e)*(r-n)/(t-e)}function tT(o,e,t){return o!==e?(t-o)/(e-o):0}function gc(o,e,t){return(1-t)*o+t*e}function nT(o,e,t,n){return gc(o,e,1-Math.exp(-t*n))}function rT(o,e=1){return e-Math.abs(Eh(o,e*2)-e)}function iT(o,e,t){return o<=e?0:o>=t?1:(o=(o-e)/(t-e),o*o*(3-2*o))}function oT(o,e,t){return o<=e?0:o>=t?1:(o=(o-e)/(t-e),o*o*o*(o*(o*6-15)+10))}function sT(o,e){return o+Math.floor(Math.random()*(e-o+1))}function aT(o,e){return o+Math.random()*(e-o)}function uT(o){return o*(.5-Math.random())}function cT(o){o!==void 0&&(Im=o);let e=Im+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lT(o){return o*_c}function fT(o){return o*Cc}function vd(o){return(o&o-1)===0&&o!==0}function Gg(o){return Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function Ol(o){return Math.pow(2,Math.floor(Math.log(o)/Math.LN2))}function dT(o,e,t,n,r){const i=Math.cos,s=Math.sin,a=i(t/2),u=s(t/2),f=i((e+n)/2),l=s((e+n)/2),p=i((e-n)/2),d=s((e-n)/2),_=i((n-e)/2),A=s((n-e)/2);switch(r){case"XYX":o.set(a*l,u*p,u*d,a*f);break;case"YZY":o.set(u*d,a*l,u*p,a*f);break;case"ZXZ":o.set(u*p,u*d,a*l,a*f);break;case"XZX":o.set(a*l,u*A,u*_,a*f);break;case"YXY":o.set(u*_,a*l,u*A,a*f);break;case"ZYZ":o.set(u*A,u*_,a*l,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ws(o,e){switch(e.constructor){case Float32Array:return o;case Uint16Array:return o/65535;case Uint8Array:return o/255;case Int16Array:return Math.max(o/32767,-1);case Int8Array:return Math.max(o/127,-1);default:throw new Error("Invalid component type.")}}function Xi(o,e){switch(e.constructor){case Float32Array:return o;case Uint16Array:return Math.round(o*65535);case Uint8Array:return Math.round(o*255);case Int16Array:return Math.round(o*32767);case Int8Array:return Math.round(o*127);default:throw new Error("Invalid component type.")}}var hT=Object.freeze({__proto__:null,DEG2RAD:_c,RAD2DEG:Cc,generateUUID:_s,clamp:Po,euclideanModulo:Eh,mapLinear:eT,inverseLerp:tT,lerp:gc,damp:nT,pingpong:rT,smoothstep:iT,smootherstep:oT,randInt:sT,randFloat:aT,randFloatSpread:uT,seededRandom:cT,degToRad:lT,radToDeg:fT,isPowerOfTwo:vd,ceilPowerOfTwo:Gg,floorPowerOfTwo:Ol,setQuaternionFromProperEuler:dT,normalize:Xi,denormalize:Ws});class Yr{constructor(e=0,t=0){Yr.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zo{constructor(){Zo.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,s,a,u,f){const l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=u,l[6]=n,l[7]=s,l[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],u=n[6],f=n[1],l=n[4],p=n[7],d=n[2],_=n[5],A=n[8],E=r[0],v=r[3],T=r[6],P=r[1],I=r[4],k=r[7],K=r[2],ee=r[5],me=r[8];return i[0]=s*E+a*P+u*K,i[3]=s*v+a*I+u*ee,i[6]=s*T+a*k+u*me,i[1]=f*E+l*P+p*K,i[4]=f*v+l*I+p*ee,i[7]=f*T+l*k+p*me,i[2]=d*E+_*P+A*K,i[5]=d*v+_*I+A*ee,i[8]=d*T+_*k+A*me,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8];return t*s*l-t*a*f-n*i*l+n*a*u+r*i*f-r*s*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=l*s-a*f,d=a*u-l*i,_=f*i-s*u,A=t*p+n*d+r*_;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=p*E,e[1]=(r*f-l*n)*E,e[2]=(a*n-r*s)*E,e[3]=d*E,e[4]=(l*t-r*u)*E,e[5]=(r*i-a*t)*E,e[6]=_*E,e[7]=(n*u-f*t)*E,e[8]=(s*t-n*i)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const u=Math.cos(i),f=Math.sin(i);return this.set(n*u,n*f,-n*(u*s+f*a)+s+e,-r*f,r*u,-r*(-f*s+u*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Tf.makeScale(e,t)),this}rotate(e){return this.premultiply(Tf.makeRotation(-e)),this}translate(e,t){return this.premultiply(Tf.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Tf=new Zo;function kg(o){for(let e=o.length-1;e>=0;--e)if(o[e]>=65535)return!0;return!1}function Sc(o){return document.createElementNS("http://www.w3.org/1999/xhtml",o)}function Na(o){return o<.04045?o*.0773993808:Math.pow(o*.9478672986+.0521327014,2.4)}function Sl(o){return o<.0031308?o*12.92:1.055*Math.pow(o,.41666)-.055}const wf={[Es]:{[wc]:Na},[wc]:{[Es]:Sl}},Oo={legacyMode:!0,get workingColorSpace(){return wc},set workingColorSpace(o){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(o,e,t){if(this.legacyMode||e===t||!e||!t)return o;if(wf[e]&&wf[e][t]!==void 0){const n=wf[e][t];return o.r=n(o.r),o.g=n(o.g),o.b=n(o.b),o}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(o,e){return this.convert(o,this.workingColorSpace,e)},toWorkingColorSpace:function(o,e){return this.convert(o,e,this.workingColorSpace)}},Hg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_o={r:0,g:0,b:0},ds={h:0,s:0,l:0},Zc={h:0,s:0,l:0};function Cf(o,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+(e-o)*6*t:t<1/2?e:t<2/3?o+(e-o)*6*(2/3-t):o}function Qc(o,e){return e.r=o.r,e.g=o.g,e.b=o.b,e}class yi{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Es){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Oo.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Oo.workingColorSpace){return this.r=e,this.g=t,this.b=n,Oo.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Oo.workingColorSpace){if(e=Eh(e,1),t=Po(t,0,1),n=Po(n,0,1),t===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,s=2*n-i;this.r=Cf(s,i,e+1/3),this.g=Cf(s,i,e),this.b=Cf(s,i,e-1/3)}return Oo.toWorkingColorSpace(this,r),this}setStyle(e,t=Es){function n(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,Oo.toWorkingColorSpace(this,t),n(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,Oo.toWorkingColorSpace(this,t),n(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const u=parseFloat(i[1])/360,f=parseFloat(i[2])/100,l=parseFloat(i[3])/100;return n(i[4]),this.setHSL(u,f,l,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,Oo.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,Oo.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Es){const n=Hg[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Na(e.r),this.g=Na(e.g),this.b=Na(e.b),this}copyLinearToSRGB(e){return this.r=Sl(e.r),this.g=Sl(e.g),this.b=Sl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Es){return Oo.fromWorkingColorSpace(Qc(this,_o),e),Po(_o.r*255,0,255)<<16^Po(_o.g*255,0,255)<<8^Po(_o.b*255,0,255)<<0}getHexString(e=Es){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Oo.workingColorSpace){Oo.fromWorkingColorSpace(Qc(this,_o),t);const n=_o.r,r=_o.g,i=_o.b,s=Math.max(n,r,i),a=Math.min(n,r,i);let u,f;const l=(a+s)/2;if(a===s)u=0,f=0;else{const p=s-a;switch(f=l<=.5?p/(s+a):p/(2-s-a),s){case n:u=(r-i)/p+(r<i?6:0);break;case r:u=(i-n)/p+2;break;case i:u=(n-r)/p+4;break}u/=6}return e.h=u,e.s=f,e.l=l,e}getRGB(e,t=Oo.workingColorSpace){return Oo.fromWorkingColorSpace(Qc(this,_o),t),e.r=_o.r,e.g=_o.g,e.b=_o.b,e}getStyle(e=Es){return Oo.fromWorkingColorSpace(Qc(this,_o),e),e!==Es?`color(${e} ${_o.r} ${_o.g} ${_o.b})`:`rgb(${_o.r*255|0},${_o.g*255|0},${_o.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(ds),ds.h+=e,ds.s+=t,ds.l+=n,this.setHSL(ds.h,ds.s,ds.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ds),e.getHSL(Zc);const n=gc(ds.h,Zc.h,t),r=gc(ds.s,Zc.s,t),i=gc(ds.l,Zc.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}yi.NAMES=Hg;let ru;class Wg{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ru===void 0&&(ru=Sc("canvas")),ru.width=e.width,ru.height=e.height;const n=ru.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ru}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Sc("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let s=0;s<i.length;s++)i[s]=Na(i[s]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Na(t[n]/255)*255):t[n]=Na(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Vg{constructor(e=null){this.isSource=!0,this.uuid=_s(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let i;if(Array.isArray(r)){i=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?i.push(Sf(r[s].image)):i.push(Sf(r[s]))}else i=Sf(r);n.url=i}return t||(e.images[this.uuid]=n),n}}function Sf(o){return typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap?Wg.getDataURL(o):o.data?{data:Array.from(o.data),width:o.width,height:o.height,type:o.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pT=0;class Bo extends Ya{constructor(e=Bo.DEFAULT_IMAGE,t=Bo.DEFAULT_MAPPING,n=is,r=is,i=qo,s=Va,a=os,u=ja,f=Bo.DEFAULT_ANISOTROPY,l=za){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pT++}),this.uuid=_s(),this.name="",this.source=new Vg(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=u,this.offset=new Yr(0,0),this.repeat=new Yr(1,1),this.center=new Yr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ru:e.x=e.x-Math.floor(e.x);break;case is:e.x=e.x<0?0:1;break;case Ll:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ru:e.y=e.y-Math.floor(e.y);break;case is:e.y=e.y<0?0:1;break;case Ll:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Bo.DEFAULT_IMAGE=null;Bo.DEFAULT_MAPPING=Fg;Bo.DEFAULT_ANISOTROPY=1;class Yi{constructor(e=0,t=0,n=0,r=1){Yi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const u=e.elements,f=u[0],l=u[4],p=u[8],d=u[1],_=u[5],A=u[9],E=u[2],v=u[6],T=u[10];if(Math.abs(l-d)<.01&&Math.abs(p-E)<.01&&Math.abs(A-v)<.01){if(Math.abs(l+d)<.1&&Math.abs(p+E)<.1&&Math.abs(A+v)<.1&&Math.abs(f+_+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(f+1)/2,k=(_+1)/2,K=(T+1)/2,ee=(l+d)/4,me=(p+E)/4,Z=(A+v)/4;return I>k&&I>K?I<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(I),r=ee/n,i=me/n):k>K?k<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(k),n=ee/r,i=Z/r):K<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(K),n=me/i,r=Z/i),this.set(n,r,i,t),this}let P=Math.sqrt((v-A)*(v-A)+(p-E)*(p-E)+(d-l)*(d-l));return Math.abs(P)<.001&&(P=1),this.x=(v-A)/P,this.y=(p-E)/P,this.z=(d-l)/P,this.w=Math.acos((f+_+T-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ka extends Ya{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yi(0,0,e,t),this.scissorTest=!1,this.viewport=new Yi(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Bo(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:qo,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Vg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jg extends Bo{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=To,this.minFilter=To,this.wrapR=is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mT extends Bo{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=To,this.minFilter=To,this.wrapR=is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ms{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,a){let u=n[r+0],f=n[r+1],l=n[r+2],p=n[r+3];const d=i[s+0],_=i[s+1],A=i[s+2],E=i[s+3];if(a===0){e[t+0]=u,e[t+1]=f,e[t+2]=l,e[t+3]=p;return}if(a===1){e[t+0]=d,e[t+1]=_,e[t+2]=A,e[t+3]=E;return}if(p!==E||u!==d||f!==_||l!==A){let v=1-a;const T=u*d+f*_+l*A+p*E,P=T>=0?1:-1,I=1-T*T;if(I>Number.EPSILON){const K=Math.sqrt(I),ee=Math.atan2(K,T*P);v=Math.sin(v*ee)/K,a=Math.sin(a*ee)/K}const k=a*P;if(u=u*v+d*k,f=f*v+_*k,l=l*v+A*k,p=p*v+E*k,v===1-a){const K=1/Math.sqrt(u*u+f*f+l*l+p*p);u*=K,f*=K,l*=K,p*=K}}e[t]=u,e[t+1]=f,e[t+2]=l,e[t+3]=p}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],u=n[r+1],f=n[r+2],l=n[r+3],p=i[s],d=i[s+1],_=i[s+2],A=i[s+3];return e[t]=a*A+l*p+u*_-f*d,e[t+1]=u*A+l*d+f*p-a*_,e[t+2]=f*A+l*_+a*d-u*p,e[t+3]=l*A-a*p-u*d-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,u=Math.sin,f=a(n/2),l=a(r/2),p=a(i/2),d=u(n/2),_=u(r/2),A=u(i/2);switch(s){case"XYZ":this._x=d*l*p+f*_*A,this._y=f*_*p-d*l*A,this._z=f*l*A+d*_*p,this._w=f*l*p-d*_*A;break;case"YXZ":this._x=d*l*p+f*_*A,this._y=f*_*p-d*l*A,this._z=f*l*A-d*_*p,this._w=f*l*p+d*_*A;break;case"ZXY":this._x=d*l*p-f*_*A,this._y=f*_*p+d*l*A,this._z=f*l*A+d*_*p,this._w=f*l*p-d*_*A;break;case"ZYX":this._x=d*l*p-f*_*A,this._y=f*_*p+d*l*A,this._z=f*l*A-d*_*p,this._w=f*l*p+d*_*A;break;case"YZX":this._x=d*l*p+f*_*A,this._y=f*_*p+d*l*A,this._z=f*l*A-d*_*p,this._w=f*l*p-d*_*A;break;case"XZY":this._x=d*l*p-f*_*A,this._y=f*_*p-d*l*A,this._z=f*l*A+d*_*p,this._w=f*l*p+d*_*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],u=t[9],f=t[2],l=t[6],p=t[10],d=n+a+p;if(d>0){const _=.5/Math.sqrt(d+1);this._w=.25/_,this._x=(l-u)*_,this._y=(i-f)*_,this._z=(s-r)*_}else if(n>a&&n>p){const _=2*Math.sqrt(1+n-a-p);this._w=(l-u)/_,this._x=.25*_,this._y=(r+s)/_,this._z=(i+f)/_}else if(a>p){const _=2*Math.sqrt(1+a-n-p);this._w=(i-f)/_,this._x=(r+s)/_,this._y=.25*_,this._z=(u+l)/_}else{const _=2*Math.sqrt(1+p-n-a);this._w=(s-r)/_,this._x=(i+f)/_,this._y=(u+l)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Po(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,u=t._y,f=t._z,l=t._w;return this._x=n*l+s*a+r*f-i*u,this._y=r*l+s*u+i*a-n*f,this._z=i*l+s*f+n*u-r*a,this._w=s*l-n*a-r*u-i*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const u=1-a*a;if(u<=Number.EPSILON){const _=1-t;return this._w=_*s+t*this._w,this._x=_*n+t*this._x,this._y=_*r+t*this._y,this._z=_*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),l=Math.atan2(f,a),p=Math.sin((1-t)*l)/f,d=Math.sin(t*l)/f;return this._w=s*p+this._w*d,this._x=n*p+this._x*d,this._y=r*p+this._y*d,this._z=i*p+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ge{constructor(e=0,t=0,n=0){Ge.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Pm.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Pm.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,u=e.w,f=u*t+s*r-a*n,l=u*n+a*t-i*r,p=u*r+i*n-s*t,d=-i*t-s*n-a*r;return this.x=f*u+d*-i+l*-a-p*-s,this.y=l*u+d*-s+p*-i-f*-a,this.z=p*u+d*-a+f*-s-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,u=t.z;return this.x=r*u-i*a,this.y=i*s-n*u,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Bf.copy(this).projectOnVector(e),this.sub(Bf)}reflect(e){return this.sub(Bf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Po(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Bf=new Ge,Pm=new Ms;class $a{constructor(e=new Ge(1/0,1/0,1/0),t=new Ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let u=0,f=e.length;u<f;u+=3){const l=e[u],p=e[u+1],d=e[u+2];l<t&&(t=l),p<n&&(n=p),d<r&&(r=d),l>i&&(i=l),p>s&&(s=p),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let u=0,f=e.count;u<f;u++){const l=e.getX(u),p=e.getY(u),d=e.getZ(u);l<t&&(t=l),p<n&&(n=p),d<r&&(r=d),l>i&&(i=l),p>s&&(s=p),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ha.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const i=n.attributes.position;for(let s=0,a=i.count;s<a;s++)ha.fromBufferAttribute(i,s).applyMatrix4(e.matrixWorld),this.expandByPoint(ha)}else n.boundingBox===null&&n.computeBoundingBox(),xf.copy(n.boundingBox),xf.applyMatrix4(e.matrixWorld),this.union(xf);const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ha),ha.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ju),el.subVectors(this.max,Ju),iu.subVectors(e.a,Ju),ou.subVectors(e.b,Ju),su.subVectors(e.c,Ju),Js.subVectors(ou,iu),qs.subVectors(su,ou),pa.subVectors(iu,su);let t=[0,-Js.z,Js.y,0,-qs.z,qs.y,0,-pa.z,pa.y,Js.z,0,-Js.x,qs.z,0,-qs.x,pa.z,0,-pa.x,-Js.y,Js.x,0,-qs.y,qs.x,0,-pa.y,pa.x,0];return!Mf(t,iu,ou,su,el)||(t=[1,0,0,0,1,0,0,0,1],!Mf(t,iu,ou,su,el))?!1:(tl.crossVectors(Js,qs),t=[tl.x,tl.y,tl.z],Mf(t,iu,ou,su,el))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ha.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ha).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Is[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Is[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Is[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Is[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Is[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Is[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Is[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Is[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Is),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Is=[new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge],ha=new Ge,xf=new $a,iu=new Ge,ou=new Ge,su=new Ge,Js=new Ge,qs=new Ge,pa=new Ge,Ju=new Ge,el=new Ge,tl=new Ge,ma=new Ge;function Mf(o,e,t,n,r){for(let i=0,s=o.length-3;i<=s;i+=3){ma.fromArray(o,i);const a=r.x*Math.abs(ma.x)+r.y*Math.abs(ma.y)+r.z*Math.abs(ma.z),u=e.dot(ma),f=t.dot(ma),l=n.dot(ma);if(Math.max(-Math.max(u,f,l),Math.min(u,f,l))>a)return!1}return!0}const _T=new $a,qu=new Ge,Df=new Ge;class Uu{constructor(e=new Ge,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_T.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qu.subVectors(e,this.center);const t=qu.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(qu,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Df.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qu.copy(e.center).add(Df)),this.expandByPoint(qu.copy(e.center).sub(Df))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ps=new Ge,Rf=new Ge,nl=new Ge,Xs=new Ge,If=new Ge,rl=new Ge,Pf=new Ge;class Th{constructor(e=new Ge,t=new Ge(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ps)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ps.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ps.copy(this.direction).multiplyScalar(t).add(this.origin),Ps.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Rf.copy(e).add(t).multiplyScalar(.5),nl.copy(t).sub(e).normalize(),Xs.copy(this.origin).sub(Rf);const i=e.distanceTo(t)*.5,s=-this.direction.dot(nl),a=Xs.dot(this.direction),u=-Xs.dot(nl),f=Xs.lengthSq(),l=Math.abs(1-s*s);let p,d,_,A;if(l>0)if(p=s*u-a,d=s*a-u,A=i*l,p>=0)if(d>=-A)if(d<=A){const E=1/l;p*=E,d*=E,_=p*(p+s*d+2*a)+d*(s*p+d+2*u)+f}else d=i,p=Math.max(0,-(s*d+a)),_=-p*p+d*(d+2*u)+f;else d=-i,p=Math.max(0,-(s*d+a)),_=-p*p+d*(d+2*u)+f;else d<=-A?(p=Math.max(0,-(-s*i+a)),d=p>0?-i:Math.min(Math.max(-i,-u),i),_=-p*p+d*(d+2*u)+f):d<=A?(p=0,d=Math.min(Math.max(-i,-u),i),_=d*(d+2*u)+f):(p=Math.max(0,-(s*i+a)),d=p>0?i:Math.min(Math.max(-i,-u),i),_=-p*p+d*(d+2*u)+f);else d=s>0?-i:i,p=Math.max(0,-(s*d+a)),_=-p*p+d*(d+2*u)+f;return n&&n.copy(this.direction).multiplyScalar(p).add(this.origin),r&&r.copy(nl).multiplyScalar(d).add(Rf),_}intersectSphere(e,t){Ps.subVectors(e.center,this.origin);const n=Ps.dot(this.direction),r=Ps.dot(Ps)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,u=n+s;return a<0&&u<0?null:a<0?this.at(u,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,u;const f=1/this.direction.x,l=1/this.direction.y,p=1/this.direction.z,d=this.origin;return f>=0?(n=(e.min.x-d.x)*f,r=(e.max.x-d.x)*f):(n=(e.max.x-d.x)*f,r=(e.min.x-d.x)*f),l>=0?(i=(e.min.y-d.y)*l,s=(e.max.y-d.y)*l):(i=(e.max.y-d.y)*l,s=(e.min.y-d.y)*l),n>s||i>r||((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),p>=0?(a=(e.min.z-d.z)*p,u=(e.max.z-d.z)*p):(a=(e.max.z-d.z)*p,u=(e.min.z-d.z)*p),n>u||a>r)||((a>n||n!==n)&&(n=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ps)!==null}intersectTriangle(e,t,n,r,i){If.subVectors(t,e),rl.subVectors(n,e),Pf.crossVectors(If,rl);let s=this.direction.dot(Pf),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Xs.subVectors(this.origin,e);const u=a*this.direction.dot(rl.crossVectors(Xs,rl));if(u<0)return null;const f=a*this.direction.dot(If.cross(Xs));if(f<0||u+f>s)return null;const l=-a*Xs.dot(Pf);return l<0?null:this.at(l/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ei{constructor(){Ei.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,s,a,u,f,l,p,d,_,A,E,v){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=i,T[5]=s,T[9]=a,T[13]=u,T[2]=f,T[6]=l,T[10]=p,T[14]=d,T[3]=_,T[7]=A,T[11]=E,T[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ei().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/au.setFromMatrixColumn(e,0).length(),i=1/au.setFromMatrixColumn(e,1).length(),s=1/au.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),u=Math.cos(r),f=Math.sin(r),l=Math.cos(i),p=Math.sin(i);if(e.order==="XYZ"){const d=s*l,_=s*p,A=a*l,E=a*p;t[0]=u*l,t[4]=-u*p,t[8]=f,t[1]=_+A*f,t[5]=d-E*f,t[9]=-a*u,t[2]=E-d*f,t[6]=A+_*f,t[10]=s*u}else if(e.order==="YXZ"){const d=u*l,_=u*p,A=f*l,E=f*p;t[0]=d+E*a,t[4]=A*a-_,t[8]=s*f,t[1]=s*p,t[5]=s*l,t[9]=-a,t[2]=_*a-A,t[6]=E+d*a,t[10]=s*u}else if(e.order==="ZXY"){const d=u*l,_=u*p,A=f*l,E=f*p;t[0]=d-E*a,t[4]=-s*p,t[8]=A+_*a,t[1]=_+A*a,t[5]=s*l,t[9]=E-d*a,t[2]=-s*f,t[6]=a,t[10]=s*u}else if(e.order==="ZYX"){const d=s*l,_=s*p,A=a*l,E=a*p;t[0]=u*l,t[4]=A*f-_,t[8]=d*f+E,t[1]=u*p,t[5]=E*f+d,t[9]=_*f-A,t[2]=-f,t[6]=a*u,t[10]=s*u}else if(e.order==="YZX"){const d=s*u,_=s*f,A=a*u,E=a*f;t[0]=u*l,t[4]=E-d*p,t[8]=A*p+_,t[1]=p,t[5]=s*l,t[9]=-a*l,t[2]=-f*l,t[6]=_*p+A,t[10]=d-E*p}else if(e.order==="XZY"){const d=s*u,_=s*f,A=a*u,E=a*f;t[0]=u*l,t[4]=-p,t[8]=f*l,t[1]=d*p+E,t[5]=s*l,t[9]=_*p-A,t[2]=A*p-_,t[6]=a*l,t[10]=E*p+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gT,e,yT)}lookAt(e,t,n){const r=this.elements;return Xo.subVectors(e,t),Xo.lengthSq()===0&&(Xo.z=1),Xo.normalize(),Ys.crossVectors(n,Xo),Ys.lengthSq()===0&&(Math.abs(n.z)===1?Xo.x+=1e-4:Xo.z+=1e-4,Xo.normalize(),Ys.crossVectors(n,Xo)),Ys.normalize(),il.crossVectors(Xo,Ys),r[0]=Ys.x,r[4]=il.x,r[8]=Xo.x,r[1]=Ys.y,r[5]=il.y,r[9]=Xo.y,r[2]=Ys.z,r[6]=il.z,r[10]=Xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],u=n[8],f=n[12],l=n[1],p=n[5],d=n[9],_=n[13],A=n[2],E=n[6],v=n[10],T=n[14],P=n[3],I=n[7],k=n[11],K=n[15],ee=r[0],me=r[4],Z=r[8],re=r[12],de=r[1],Ie=r[5],Pe=r[9],we=r[13],Te=r[2],Se=r[6],Oe=r[10],He=r[14],j=r[3],ht=r[7],Qe=r[11],Je=r[15];return i[0]=s*ee+a*de+u*Te+f*j,i[4]=s*me+a*Ie+u*Se+f*ht,i[8]=s*Z+a*Pe+u*Oe+f*Qe,i[12]=s*re+a*we+u*He+f*Je,i[1]=l*ee+p*de+d*Te+_*j,i[5]=l*me+p*Ie+d*Se+_*ht,i[9]=l*Z+p*Pe+d*Oe+_*Qe,i[13]=l*re+p*we+d*He+_*Je,i[2]=A*ee+E*de+v*Te+T*j,i[6]=A*me+E*Ie+v*Se+T*ht,i[10]=A*Z+E*Pe+v*Oe+T*Qe,i[14]=A*re+E*we+v*He+T*Je,i[3]=P*ee+I*de+k*Te+K*j,i[7]=P*me+I*Ie+k*Se+K*ht,i[11]=P*Z+I*Pe+k*Oe+K*Qe,i[15]=P*re+I*we+k*He+K*Je,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],u=e[9],f=e[13],l=e[2],p=e[6],d=e[10],_=e[14],A=e[3],E=e[7],v=e[11],T=e[15];return A*(+i*u*p-r*f*p-i*a*d+n*f*d+r*a*_-n*u*_)+E*(+t*u*_-t*f*d+i*s*d-r*s*_+r*f*l-i*u*l)+v*(+t*f*p-t*a*_-i*s*p+n*s*_+i*a*l-n*f*l)+T*(-r*a*l-t*u*p+t*a*d+r*s*p-n*s*d+n*u*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=e[9],d=e[10],_=e[11],A=e[12],E=e[13],v=e[14],T=e[15],P=p*v*f-E*d*f+E*u*_-a*v*_-p*u*T+a*d*T,I=A*d*f-l*v*f-A*u*_+s*v*_+l*u*T-s*d*T,k=l*E*f-A*p*f+A*a*_-s*E*_-l*a*T+s*p*T,K=A*p*u-l*E*u-A*a*d+s*E*d+l*a*v-s*p*v,ee=t*P+n*I+r*k+i*K;if(ee===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const me=1/ee;return e[0]=P*me,e[1]=(E*d*i-p*v*i-E*r*_+n*v*_+p*r*T-n*d*T)*me,e[2]=(a*v*i-E*u*i+E*r*f-n*v*f-a*r*T+n*u*T)*me,e[3]=(p*u*i-a*d*i-p*r*f+n*d*f+a*r*_-n*u*_)*me,e[4]=I*me,e[5]=(l*v*i-A*d*i+A*r*_-t*v*_-l*r*T+t*d*T)*me,e[6]=(A*u*i-s*v*i-A*r*f+t*v*f+s*r*T-t*u*T)*me,e[7]=(s*d*i-l*u*i+l*r*f-t*d*f-s*r*_+t*u*_)*me,e[8]=k*me,e[9]=(A*p*i-l*E*i-A*n*_+t*E*_+l*n*T-t*p*T)*me,e[10]=(s*E*i-A*a*i+A*n*f-t*E*f-s*n*T+t*a*T)*me,e[11]=(l*a*i-s*p*i-l*n*f+t*p*f+s*n*_-t*a*_)*me,e[12]=K*me,e[13]=(l*E*r-A*p*r+A*n*d-t*E*d-l*n*v+t*p*v)*me,e[14]=(A*a*r-s*E*r-A*n*u+t*E*u+s*n*v-t*a*v)*me,e[15]=(s*p*r-l*a*r+l*n*u-t*p*u-s*n*d+t*a*d)*me,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,u=e.z,f=i*s,l=i*a;return this.set(f*s+n,f*a-r*u,f*u+r*a,0,f*a+r*u,l*a+n,l*u-r*s,0,f*u-r*a,l*u+r*s,i*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,u=t._w,f=i+i,l=s+s,p=a+a,d=i*f,_=i*l,A=i*p,E=s*l,v=s*p,T=a*p,P=u*f,I=u*l,k=u*p,K=n.x,ee=n.y,me=n.z;return r[0]=(1-(E+T))*K,r[1]=(_+k)*K,r[2]=(A-I)*K,r[3]=0,r[4]=(_-k)*ee,r[5]=(1-(d+T))*ee,r[6]=(v+P)*ee,r[7]=0,r[8]=(A+I)*me,r[9]=(v-P)*me,r[10]=(1-(d+E))*me,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=au.set(r[0],r[1],r[2]).length();const s=au.set(r[4],r[5],r[6]).length(),a=au.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],hs.copy(this);const f=1/i,l=1/s,p=1/a;return hs.elements[0]*=f,hs.elements[1]*=f,hs.elements[2]*=f,hs.elements[4]*=l,hs.elements[5]*=l,hs.elements[6]*=l,hs.elements[8]*=p,hs.elements[9]*=p,hs.elements[10]*=p,t.setFromRotationMatrix(hs),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s){const a=this.elements,u=2*i/(t-e),f=2*i/(n-r),l=(t+e)/(t-e),p=(n+r)/(n-r),d=-(s+i)/(s-i),_=-2*s*i/(s-i);return a[0]=u,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=f,a[9]=p,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=_,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s){const a=this.elements,u=1/(t-e),f=1/(n-r),l=1/(s-i),p=(t+e)*u,d=(n+r)*f,_=(s+i)*l;return a[0]=2*u,a[4]=0,a[8]=0,a[12]=-p,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-_,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const au=new Ge,hs=new Ei,gT=new Ge(0,0,0),yT=new Ge(1,1,1),Ys=new Ge,il=new Ge,Xo=new Ge,Fm=new Ei,Lm=new Ms;class Lc{constructor(e=0,t=0,n=0,r=Lc.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],u=r[1],f=r[5],l=r[9],p=r[2],d=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(Po(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,_),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(d,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Po(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,i),this._z=0);break;case"ZXY":this._x=Math.asin(Po(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(u,i));break;case"ZYX":this._y=Math.asin(-Po(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,_),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(Po(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,f),this._y=Math.atan2(-p,i)):(this._x=0,this._y=Math.atan2(a,_));break;case"XZY":this._z=Math.asin(-Po(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,f),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Fm.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Fm,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Lm.setFromEuler(this),this.setFromQuaternion(Lm,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Lc.DefaultOrder="XYZ";Lc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class zg{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vT=0;const Om=new Ge,uu=new Ms,Fs=new Ei,ol=new Ge,Xu=new Ge,AT=new Ge,bT=new Ms,Nm=new Ge(1,0,0),Um=new Ge(0,1,0),Gm=new Ge(0,0,1),ET={type:"added"},km={type:"removed"};class oo extends Ya{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vT++}),this.uuid=_s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=oo.DefaultUp.clone();const e=new Ge,t=new Lc,n=new Ms,r=new Ge(1,1,1);function i(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ei},normalMatrix:{value:new Zo}}),this.matrix=new Ei,this.matrixWorld=new Ei,this.matrixAutoUpdate=oo.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=oo.DefaultMatrixWorldAutoUpdate,this.layers=new zg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uu.setFromAxisAngle(e,t),this.quaternion.multiply(uu),this}rotateOnWorldAxis(e,t){return uu.setFromAxisAngle(e,t),this.quaternion.premultiply(uu),this}rotateX(e){return this.rotateOnAxis(Nm,e)}rotateY(e){return this.rotateOnAxis(Um,e)}rotateZ(e){return this.rotateOnAxis(Gm,e)}translateOnAxis(e,t){return Om.copy(e).applyQuaternion(this.quaternion),this.position.add(Om.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Nm,e)}translateY(e){return this.translateOnAxis(Um,e)}translateZ(e){return this.translateOnAxis(Gm,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fs.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ol.copy(e):ol.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Xu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fs.lookAt(Xu,ol,this.up):Fs.lookAt(ol,Xu,this.up),this.quaternion.setFromRotationMatrix(Fs),r&&(Fs.extractRotation(r.matrixWorld),uu.setFromRotationMatrix(Fs),this.quaternion.premultiply(uu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ET)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(km)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(km)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectsByProperty(e,t);s.length>0&&(n=n.concat(s))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xu,e,AT),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xu,bT,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const i=t[n];(i.matrixWorldAutoUpdate===!0||e===!0)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let i=0,s=r.length;i<s;i++){const a=r[i];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function i(a,u){return a[u.uuid]===void 0&&(a[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const u=a.shapes;if(Array.isArray(u))for(let f=0,l=u.length;f<l;f++){const p=u[f];i(e.shapes,p)}else i(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let u=0,f=this.material.length;u<f;u++)a.push(i(e.materials,this.material[u]));r.material=a}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const u=this.animations[a];r.animations.push(i(e.animations,u))}}if(t){const a=s(e.geometries),u=s(e.materials),f=s(e.textures),l=s(e.images),p=s(e.shapes),d=s(e.skeletons),_=s(e.animations),A=s(e.nodes);a.length>0&&(n.geometries=a),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),l.length>0&&(n.images=l),p.length>0&&(n.shapes=p),d.length>0&&(n.skeletons=d),_.length>0&&(n.animations=_),A.length>0&&(n.nodes=A)}return n.object=r,n;function s(a){const u=[];for(const f in a){const l=a[f];delete l.metadata,u.push(l)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}oo.DefaultUp=new Ge(0,1,0);oo.DefaultMatrixAutoUpdate=!0;oo.DefaultMatrixWorldAutoUpdate=!0;const ps=new Ge,Ls=new Ge,Ff=new Ge,Os=new Ge,cu=new Ge,lu=new Ge,Hm=new Ge,Lf=new Ge,Of=new Ge,Nf=new Ge;class Hs{constructor(e=new Ge,t=new Ge,n=new Ge){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ps.subVectors(e,t),r.cross(ps);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ps.subVectors(r,t),Ls.subVectors(n,t),Ff.subVectors(e,t);const s=ps.dot(ps),a=ps.dot(Ls),u=ps.dot(Ff),f=Ls.dot(Ls),l=Ls.dot(Ff),p=s*f-a*a;if(p===0)return i.set(-2,-1,-1);const d=1/p,_=(f*u-a*l)*d,A=(s*l-a*u)*d;return i.set(1-_-A,A,_)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Os),Os.x>=0&&Os.y>=0&&Os.x+Os.y<=1}static getUV(e,t,n,r,i,s,a,u){return this.getBarycoord(e,t,n,r,Os),u.set(0,0),u.addScaledVector(i,Os.x),u.addScaledVector(s,Os.y),u.addScaledVector(a,Os.z),u}static isFrontFacing(e,t,n,r){return ps.subVectors(n,t),Ls.subVectors(e,t),ps.cross(Ls).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ps.subVectors(this.c,this.b),Ls.subVectors(this.a,this.b),ps.cross(Ls).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Hs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Hs.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Hs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;cu.subVectors(r,n),lu.subVectors(i,n),Lf.subVectors(e,n);const u=cu.dot(Lf),f=lu.dot(Lf);if(u<=0&&f<=0)return t.copy(n);Of.subVectors(e,r);const l=cu.dot(Of),p=lu.dot(Of);if(l>=0&&p<=l)return t.copy(r);const d=u*p-l*f;if(d<=0&&u>=0&&l<=0)return s=u/(u-l),t.copy(n).addScaledVector(cu,s);Nf.subVectors(e,i);const _=cu.dot(Nf),A=lu.dot(Nf);if(A>=0&&_<=A)return t.copy(i);const E=_*f-u*A;if(E<=0&&f>=0&&A<=0)return a=f/(f-A),t.copy(n).addScaledVector(lu,a);const v=l*A-_*p;if(v<=0&&p-l>=0&&_-A>=0)return Hm.subVectors(i,r),a=(p-l)/(p-l+(_-A)),t.copy(r).addScaledVector(Hm,a);const T=1/(v+E+d);return s=E*T,a=d*T,t.copy(n).addScaledVector(cu,s).addScaledVector(lu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let TT=0;class Ss extends Ya{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TT++}),this.uuid=_s(),this.name="",this.type="Material",this.blending=wu,this.side=ua,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Rg,this.blendDst=Ig,this.blendEquation=vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=QE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ef,this.stencilZFail=Ef,this.stencilZPass=Ef,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==wu&&(n.blending=this.blending),this.side!==ua&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(i){const s=[];for(const a in i){const u=i[a];delete u.metadata,s.push(u)}return s}if(t){const i=r(e.textures),s=r(e.images);i.length>0&&(n.textures=i),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ia extends Ss{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const po=new Ge,sl=new Yr;class xo{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=gd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.applyMatrix3(e),this.setXY(t,sl.x,sl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.applyMatrix3(e),this.setXYZ(t,po.x,po.y,po.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.applyMatrix4(e),this.setXYZ(t,po.x,po.y,po.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.applyNormalMatrix(e),this.setXYZ(t,po.x,po.y,po.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.transformDirection(e),this.setXYZ(t,po.x,po.y,po.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ws(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ws(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ws(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ws(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array),i=Xi(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==gd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Kg extends xo{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Jg extends xo{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class zs extends xo{constructor(e,t,n){super(new Float32Array(e),t,n)}}let wT=0;const es=new Ei,Uf=new oo,fu=new Ge,Yo=new $a,Yu=new $a,Eo=new Ge;class gs extends Ya{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wT++}),this.uuid=_s(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(kg(e)?Jg:Kg)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const i=new Zo().getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return es.makeRotationFromQuaternion(e),this.applyMatrix4(es),this}rotateX(e){return es.makeRotationX(e),this.applyMatrix4(es),this}rotateY(e){return es.makeRotationY(e),this.applyMatrix4(es),this}rotateZ(e){return es.makeRotationZ(e),this.applyMatrix4(es),this}translate(e,t,n){return es.makeTranslation(e,t,n),this.applyMatrix4(es),this}scale(e,t,n){return es.makeScale(e,t,n),this.applyMatrix4(es),this}lookAt(e){return Uf.lookAt(e),Uf.updateMatrix(),this.applyMatrix4(Uf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fu).negate(),this.translate(fu.x,fu.y,fu.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new zs(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ge(-1/0,-1/0,-1/0),new Ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const i=t[n];Yo.setFromBufferAttribute(i),this.morphTargetsRelative?(Eo.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(Eo),Eo.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(Eo)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Uu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ge,1/0);return}if(e){const n=this.boundingSphere.center;if(Yo.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const a=t[i];Yu.setFromBufferAttribute(a),this.morphTargetsRelative?(Eo.addVectors(Yo.min,Yu.min),Yo.expandByPoint(Eo),Eo.addVectors(Yo.max,Yu.max),Yo.expandByPoint(Eo)):(Yo.expandByPoint(Yu.min),Yo.expandByPoint(Yu.max))}Yo.getCenter(n);let r=0;for(let i=0,s=e.count;i<s;i++)Eo.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Eo));if(t)for(let i=0,s=t.length;i<s;i++){const a=t[i],u=this.morphTargetsRelative;for(let f=0,l=a.count;f<l;f++)Eo.fromBufferAttribute(a,f),u&&(fu.fromBufferAttribute(e,f),Eo.add(fu)),r=Math.max(r,n.distanceToSquared(Eo))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xo(new Float32Array(4*a),4));const u=this.getAttribute("tangent").array,f=[],l=[];for(let de=0;de<a;de++)f[de]=new Ge,l[de]=new Ge;const p=new Ge,d=new Ge,_=new Ge,A=new Yr,E=new Yr,v=new Yr,T=new Ge,P=new Ge;function I(de,Ie,Pe){p.fromArray(r,de*3),d.fromArray(r,Ie*3),_.fromArray(r,Pe*3),A.fromArray(s,de*2),E.fromArray(s,Ie*2),v.fromArray(s,Pe*2),d.sub(p),_.sub(p),E.sub(A),v.sub(A);const we=1/(E.x*v.y-v.x*E.y);isFinite(we)&&(T.copy(d).multiplyScalar(v.y).addScaledVector(_,-E.y).multiplyScalar(we),P.copy(_).multiplyScalar(E.x).addScaledVector(d,-v.x).multiplyScalar(we),f[de].add(T),f[Ie].add(T),f[Pe].add(T),l[de].add(P),l[Ie].add(P),l[Pe].add(P))}let k=this.groups;k.length===0&&(k=[{start:0,count:n.length}]);for(let de=0,Ie=k.length;de<Ie;++de){const Pe=k[de],we=Pe.start,Te=Pe.count;for(let Se=we,Oe=we+Te;Se<Oe;Se+=3)I(n[Se+0],n[Se+1],n[Se+2])}const K=new Ge,ee=new Ge,me=new Ge,Z=new Ge;function re(de){me.fromArray(i,de*3),Z.copy(me);const Ie=f[de];K.copy(Ie),K.sub(me.multiplyScalar(me.dot(Ie))).normalize(),ee.crossVectors(Z,Ie);const we=ee.dot(l[de])<0?-1:1;u[de*4]=K.x,u[de*4+1]=K.y,u[de*4+2]=K.z,u[de*4+3]=we}for(let de=0,Ie=k.length;de<Ie;++de){const Pe=k[de],we=Pe.start,Te=Pe.count;for(let Se=we,Oe=we+Te;Se<Oe;Se+=3)re(n[Se+0]),re(n[Se+1]),re(n[Se+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new xo(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,_=n.count;d<_;d++)n.setXYZ(d,0,0,0);const r=new Ge,i=new Ge,s=new Ge,a=new Ge,u=new Ge,f=new Ge,l=new Ge,p=new Ge;if(e)for(let d=0,_=e.count;d<_;d+=3){const A=e.getX(d+0),E=e.getX(d+1),v=e.getX(d+2);r.fromBufferAttribute(t,A),i.fromBufferAttribute(t,E),s.fromBufferAttribute(t,v),l.subVectors(s,i),p.subVectors(r,i),l.cross(p),a.fromBufferAttribute(n,A),u.fromBufferAttribute(n,E),f.fromBufferAttribute(n,v),a.add(l),u.add(l),f.add(l),n.setXYZ(A,a.x,a.y,a.z),n.setXYZ(E,u.x,u.y,u.z),n.setXYZ(v,f.x,f.y,f.z)}else for(let d=0,_=t.count;d<_;d+=3)r.fromBufferAttribute(t,d+0),i.fromBufferAttribute(t,d+1),s.fromBufferAttribute(t,d+2),l.subVectors(s,i),p.subVectors(r,i),l.cross(p),n.setXYZ(d+0,l.x,l.y,l.z),n.setXYZ(d+1,l.x,l.y,l.z),n.setXYZ(d+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Eo.fromBufferAttribute(e,t),Eo.normalize(),e.setXYZ(t,Eo.x,Eo.y,Eo.z)}toNonIndexed(){function e(a,u){const f=a.array,l=a.itemSize,p=a.normalized,d=new f.constructor(u.length*l);let _=0,A=0;for(let E=0,v=u.length;E<v;E++){a.isInterleavedBufferAttribute?_=u[E]*a.data.stride+a.offset:_=u[E]*l;for(let T=0;T<l;T++)d[A++]=f[_++]}return new xo(d,l,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gs,n=this.index.array,r=this.attributes;for(const a in r){const u=r[a],f=e(u,n);t.setAttribute(a,f)}const i=this.morphAttributes;for(const a in i){const u=[],f=i[a];for(let l=0,p=f.length;l<p;l++){const d=f[l],_=e(d,n);u.push(_)}t.morphAttributes[a]=u}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,u=s.length;a<u;a++){const f=s[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const f=n[u];e.data.attributes[u]=f.toJSON(e.data)}const r={};let i=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],l=[];for(let p=0,d=f.length;p<d;p++){const _=f[p];l.push(_.toJSON(e.data))}l.length>0&&(r[u]=l,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const f in r){const l=r[f];this.setAttribute(f,l.clone(t))}const i=e.morphAttributes;for(const f in i){const l=[],p=i[f];for(let d=0,_=p.length;d<_;d++)l.push(p[d].clone(t));this.morphAttributes[f]=l}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,l=s.length;f<l;f++){const p=s[f];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Wm=new Ei,du=new Th,Gf=new Uu,$u=new Ge,Zu=new Ge,Qu=new Ge,kf=new Ge,al=new Ge,ul=new Yr,cl=new Yr,ll=new Yr,Hf=new Ge,fl=new Ge;class ss extends oo{constructor(e=new gs,t=new Ia){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){al.set(0,0,0);for(let u=0,f=i.length;u<f;u++){const l=a[u],p=i[u];l!==0&&(kf.fromBufferAttribute(p,e),s?al.addScaledVector(kf,l):al.addScaledVector(kf.sub(t),l))}t.add(al)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Gf.copy(n.boundingSphere),Gf.applyMatrix4(i),e.ray.intersectsSphere(Gf)===!1)||(Wm.copy(i).invert(),du.copy(e.ray).applyMatrix4(Wm),n.boundingBox!==null&&du.intersectsBox(n.boundingBox)===!1))return;let s;const a=n.index,u=n.attributes.position,f=n.attributes.uv,l=n.attributes.uv2,p=n.groups,d=n.drawRange;if(a!==null)if(Array.isArray(r))for(let _=0,A=p.length;_<A;_++){const E=p[_],v=r[E.materialIndex],T=Math.max(E.start,d.start),P=Math.min(a.count,Math.min(E.start+E.count,d.start+d.count));for(let I=T,k=P;I<k;I+=3){const K=a.getX(I),ee=a.getX(I+1),me=a.getX(I+2);s=dl(this,v,e,du,f,l,K,ee,me),s&&(s.faceIndex=Math.floor(I/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const _=Math.max(0,d.start),A=Math.min(a.count,d.start+d.count);for(let E=_,v=A;E<v;E+=3){const T=a.getX(E),P=a.getX(E+1),I=a.getX(E+2);s=dl(this,r,e,du,f,l,T,P,I),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}else if(u!==void 0)if(Array.isArray(r))for(let _=0,A=p.length;_<A;_++){const E=p[_],v=r[E.materialIndex],T=Math.max(E.start,d.start),P=Math.min(u.count,Math.min(E.start+E.count,d.start+d.count));for(let I=T,k=P;I<k;I+=3){const K=I,ee=I+1,me=I+2;s=dl(this,v,e,du,f,l,K,ee,me),s&&(s.faceIndex=Math.floor(I/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const _=Math.max(0,d.start),A=Math.min(u.count,d.start+d.count);for(let E=_,v=A;E<v;E+=3){const T=E,P=E+1,I=E+2;s=dl(this,r,e,du,f,l,T,P,I),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}}}function CT(o,e,t,n,r,i,s,a){let u;if(e.side===cs?u=n.intersectTriangle(s,i,r,!0,a):u=n.intersectTriangle(r,i,s,e.side===ua,a),u===null)return null;fl.copy(a),fl.applyMatrix4(o.matrixWorld);const f=t.ray.origin.distanceTo(fl);return f<t.near||f>t.far?null:{distance:f,point:fl.clone(),object:o}}function dl(o,e,t,n,r,i,s,a,u){o.getVertexPosition(s,$u),o.getVertexPosition(a,Zu),o.getVertexPosition(u,Qu);const f=CT(o,e,t,n,$u,Zu,Qu,Hf);if(f){r&&(ul.fromBufferAttribute(r,s),cl.fromBufferAttribute(r,a),ll.fromBufferAttribute(r,u),f.uv=Hs.getUV(Hf,$u,Zu,Qu,ul,cl,ll,new Yr)),i&&(ul.fromBufferAttribute(i,s),cl.fromBufferAttribute(i,a),ll.fromBufferAttribute(i,u),f.uv2=Hs.getUV(Hf,$u,Zu,Qu,ul,cl,ll,new Yr));const l={a:s,b:a,c:u,normal:new Ge,materialIndex:0};Hs.getNormal($u,Zu,Qu,l.normal),f.face=l}return f}class Oc extends gs{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const u=[],f=[],l=[],p=[];let d=0,_=0;A("z","y","x",-1,-1,n,t,e,s,i,0),A("z","y","x",1,-1,n,t,-e,s,i,1),A("x","z","y",1,1,e,n,t,r,s,2),A("x","z","y",1,-1,e,n,-t,r,s,3),A("x","y","z",1,-1,e,t,n,r,i,4),A("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(u),this.setAttribute("position",new zs(f,3)),this.setAttribute("normal",new zs(l,3)),this.setAttribute("uv",new zs(p,2));function A(E,v,T,P,I,k,K,ee,me,Z,re){const de=k/me,Ie=K/Z,Pe=k/2,we=K/2,Te=ee/2,Se=me+1,Oe=Z+1;let He=0,j=0;const ht=new Ge;for(let Qe=0;Qe<Oe;Qe++){const Je=Qe*Ie-we;for(let ze=0;ze<Se;ze++){const ut=ze*de-Pe;ht[E]=ut*P,ht[v]=Je*I,ht[T]=Te,f.push(ht.x,ht.y,ht.z),ht[E]=0,ht[v]=0,ht[T]=ee>0?1:-1,l.push(ht.x,ht.y,ht.z),p.push(ze/me),p.push(1-Qe/Z),He+=1}}for(let Qe=0;Qe<Z;Qe++)for(let Je=0;Je<me;Je++){const ze=d+Je+Se*Qe,ut=d+Je+Se*(Qe+1),ke=d+(Je+1)+Se*(Qe+1),L=d+(Je+1)+Se*Qe;u.push(ze,ut,L),u.push(ut,ke,L),j+=6}a.addGroup(_,j,re),_+=j,d+=He}}static fromJSON(e){return new Oc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fu(o){const e={};for(const t in o){e[t]={};for(const n in o[t]){const r=o[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Go(o){const e={};for(let t=0;t<o.length;t++){const n=Fu(o[t]);for(const r in n)e[r]=n[r]}return e}function ST(o){const e=[];for(let t=0;t<o.length;t++)e.push(o[t].clone());return e}function qg(o){return o.getRenderTarget()===null&&o.outputEncoding===Vi?Es:wc}const BT={clone:Fu,merge:Go};var xT=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,MT=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ja extends Ss{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=xT,this.fragmentShader=MT,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fu(e.uniforms),this.uniformsGroups=ST(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Xg extends oo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ei,this.projectionMatrix=new Ei,this.projectionMatrixInverse=new Ei}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ho extends Xg{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Cc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(_c*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cc*2*Math.atan(Math.tan(_c*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(_c*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const u=s.fullWidth,f=s.fullHeight;i+=s.offsetX*r/u,t-=s.offsetY*n/f,r*=s.width/u,n*=s.height/f}const a=this.filmOffset;a!==0&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const hu=-90,pu=1;class DT extends oo{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Ho(hu,pu,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new Ho(hu,pu,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const s=new Ho(hu,pu,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new Ho(hu,pu,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const u=new Ho(hu,pu,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const f=new Ho(hu,pu,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,a,u,f]=this.children,l=e.getRenderTarget(),p=e.toneMapping,d=e.xr.enabled;e.toneMapping=js,e.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=_,e.setRenderTarget(n,5),e.render(t,f),e.setRenderTarget(l),e.toneMapping=p,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class Yg extends Bo{constructor(e,t,n,r,i,s,a,u,f,l){e=e!==void 0?e:[],t=t!==void 0?t:Mu,super(e,t,n,r,i,s,a,u,f,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class RT extends Ka{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Yg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qo}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Oc(5,5,5),i=new Ja({name:"CubemapFromEquirect",uniforms:Fu(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:cs,blending:aa});i.uniforms.tEquirect.value=t;const s=new ss(r,i),a=t.minFilter;return t.minFilter===Va&&(t.minFilter=qo),new DT(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}}const Wf=new Ge,IT=new Ge,PT=new Zo;class Ba{constructor(e=new Ge(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Wf.subVectors(n,t).cross(IT.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Wf),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||PT.getNormalMatrix(e),r=this.coplanarPoint(Wf).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const mu=new Uu,hl=new Ge;class wh{constructor(e=new Ba,t=new Ba,n=new Ba,r=new Ba,i=new Ba,s=new Ba){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],f=n[5],l=n[6],p=n[7],d=n[8],_=n[9],A=n[10],E=n[11],v=n[12],T=n[13],P=n[14],I=n[15];return t[0].setComponents(a-r,p-u,E-d,I-v).normalize(),t[1].setComponents(a+r,p+u,E+d,I+v).normalize(),t[2].setComponents(a+i,p+f,E+_,I+T).normalize(),t[3].setComponents(a-i,p-f,E-_,I-T).normalize(),t[4].setComponents(a-s,p-l,E-A,I-P).normalize(),t[5].setComponents(a+s,p+l,E+A,I+P).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),mu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(mu)}intersectsSprite(e){return mu.center.set(0,0,0),mu.radius=.7071067811865476,mu.applyMatrix4(e.matrixWorld),this.intersectsSphere(mu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(hl.x=r.normal.x>0?e.max.x:e.min.x,hl.y=r.normal.y>0?e.max.y:e.min.y,hl.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(hl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $g(){let o=null,e=!1,t=null,n=null;function r(i,s){t(i,s),n=o.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=o.requestAnimationFrame(r),e=!0)},stop:function(){o.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(i){t=i},setContext:function(i){o=i}}}function FT(o,e){const t=e.isWebGL2,n=new WeakMap;function r(f,l){const p=f.array,d=f.usage,_=o.createBuffer();o.bindBuffer(l,_),o.bufferData(l,p,d),f.onUploadCallback();let A;if(p instanceof Float32Array)A=5126;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)A=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else A=5123;else if(p instanceof Int16Array)A=5122;else if(p instanceof Uint32Array)A=5125;else if(p instanceof Int32Array)A=5124;else if(p instanceof Int8Array)A=5120;else if(p instanceof Uint8Array)A=5121;else if(p instanceof Uint8ClampedArray)A=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:A,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function i(f,l,p){const d=l.array,_=l.updateRange;o.bindBuffer(p,f),_.count===-1?o.bufferSubData(p,0,d):(t?o.bufferSubData(p,_.offset*d.BYTES_PER_ELEMENT,d,_.offset,_.count):o.bufferSubData(p,_.offset*d.BYTES_PER_ELEMENT,d.subarray(_.offset,_.offset+_.count)),_.count=-1),l.onUploadCallback()}function s(f){return f.isInterleavedBufferAttribute&&(f=f.data),n.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const l=n.get(f);l&&(o.deleteBuffer(l.buffer),n.delete(f))}function u(f,l){if(f.isGLBufferAttribute){const d=n.get(f);(!d||d.version<f.version)&&n.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const p=n.get(f);p===void 0?n.set(f,r(f,l)):p.version<f.version&&(i(p.buffer,f,l),p.version=f.version)}return{get:s,remove:a,update:u}}class Ch extends gs{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),u=Math.floor(r),f=a+1,l=u+1,p=e/a,d=t/u,_=[],A=[],E=[],v=[];for(let T=0;T<l;T++){const P=T*d-s;for(let I=0;I<f;I++){const k=I*p-i;A.push(k,-P,0),E.push(0,0,1),v.push(I/a),v.push(1-T/u)}}for(let T=0;T<u;T++)for(let P=0;P<a;P++){const I=P+f*T,k=P+f*(T+1),K=P+1+f*(T+1),ee=P+1+f*T;_.push(I,k,ee),_.push(k,K,ee)}this.setIndex(_),this.setAttribute("position",new zs(A,3)),this.setAttribute("normal",new zs(E,3)),this.setAttribute("uv",new zs(v,2))}static fromJSON(e){return new Ch(e.width,e.height,e.widthSegments,e.heightSegments)}}var LT=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,OT=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NT=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,UT=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,GT=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kT=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,HT="vec3 transformed = vec3( position );",WT=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,VT=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,jT=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zT=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,KT=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,JT=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qT=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,XT=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,YT=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$T=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ZT=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,QT=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ew=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,tw=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nw=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,rw=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,iw=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ow=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sw=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,aw="gl_FragColor = linearToOutputTexel( gl_FragColor );",uw=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,cw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lw=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fw=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dw=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pw=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mw=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_w=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,gw=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yw=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,vw=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Aw=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bw=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ew=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Tw=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ww=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Cw=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Sw=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Bw=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,xw=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Mw=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Dw=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Rw=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Iw=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pw=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Fw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ow=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Nw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Uw=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Gw=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,kw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Hw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ww=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Vw=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jw=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,zw=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Kw=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Jw=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,qw=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Xw=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yw=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$w=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zw=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Qw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,eC=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,tC=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,nC=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,rC=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,iC=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,oC=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,sC=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,aC=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uC=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,cC=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lC=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fC=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dC=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,hC=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pC=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,mC=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_C=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gC=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,yC=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vC=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,AC=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,bC=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EC=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TC=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wC=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,CC=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,SC=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,BC=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,xC=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,MC=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,DC=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,RC=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,IC=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const PC=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,FC=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,LC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OC=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,NC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UC=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GC=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kC=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,HC=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,WC=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,VC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jC=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zC=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,KC=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JC=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qC=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XC=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YC=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$C=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ZC=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QC=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,eS=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,tS=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nS=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rS=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,iS=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oS=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sS=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aS=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,uS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cS=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lS=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,fS=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,_i={alphamap_fragment:LT,alphamap_pars_fragment:OT,alphatest_fragment:NT,alphatest_pars_fragment:UT,aomap_fragment:GT,aomap_pars_fragment:kT,begin_vertex:HT,beginnormal_vertex:WT,bsdfs:VT,iridescence_fragment:jT,bumpmap_pars_fragment:zT,clipping_planes_fragment:KT,clipping_planes_pars_fragment:JT,clipping_planes_pars_vertex:qT,clipping_planes_vertex:XT,color_fragment:YT,color_pars_fragment:$T,color_pars_vertex:ZT,color_vertex:QT,common:ew,cube_uv_reflection_fragment:tw,defaultnormal_vertex:nw,displacementmap_pars_vertex:rw,displacementmap_vertex:iw,emissivemap_fragment:ow,emissivemap_pars_fragment:sw,encodings_fragment:aw,encodings_pars_fragment:uw,envmap_fragment:cw,envmap_common_pars_fragment:lw,envmap_pars_fragment:fw,envmap_pars_vertex:dw,envmap_physical_pars_fragment:ww,envmap_vertex:hw,fog_vertex:pw,fog_pars_vertex:mw,fog_fragment:_w,fog_pars_fragment:gw,gradientmap_pars_fragment:yw,lightmap_fragment:vw,lightmap_pars_fragment:Aw,lights_lambert_fragment:bw,lights_lambert_pars_fragment:Ew,lights_pars_begin:Tw,lights_toon_fragment:Cw,lights_toon_pars_fragment:Sw,lights_phong_fragment:Bw,lights_phong_pars_fragment:xw,lights_physical_fragment:Mw,lights_physical_pars_fragment:Dw,lights_fragment_begin:Rw,lights_fragment_maps:Iw,lights_fragment_end:Pw,logdepthbuf_fragment:Fw,logdepthbuf_pars_fragment:Lw,logdepthbuf_pars_vertex:Ow,logdepthbuf_vertex:Nw,map_fragment:Uw,map_pars_fragment:Gw,map_particle_fragment:kw,map_particle_pars_fragment:Hw,metalnessmap_fragment:Ww,metalnessmap_pars_fragment:Vw,morphcolor_vertex:jw,morphnormal_vertex:zw,morphtarget_pars_vertex:Kw,morphtarget_vertex:Jw,normal_fragment_begin:qw,normal_fragment_maps:Xw,normal_pars_fragment:Yw,normal_pars_vertex:$w,normal_vertex:Zw,normalmap_pars_fragment:Qw,clearcoat_normal_fragment_begin:eC,clearcoat_normal_fragment_maps:tC,clearcoat_pars_fragment:nC,iridescence_pars_fragment:rC,output_fragment:iC,packing:oC,premultiplied_alpha_fragment:sC,project_vertex:aC,dithering_fragment:uC,dithering_pars_fragment:cC,roughnessmap_fragment:lC,roughnessmap_pars_fragment:fC,shadowmap_pars_fragment:dC,shadowmap_pars_vertex:hC,shadowmap_vertex:pC,shadowmask_pars_fragment:mC,skinbase_vertex:_C,skinning_pars_vertex:gC,skinning_vertex:yC,skinnormal_vertex:vC,specularmap_fragment:AC,specularmap_pars_fragment:bC,tonemapping_fragment:EC,tonemapping_pars_fragment:TC,transmission_fragment:wC,transmission_pars_fragment:CC,uv_pars_fragment:SC,uv_pars_vertex:BC,uv_vertex:xC,uv2_pars_fragment:MC,uv2_pars_vertex:DC,uv2_vertex:RC,worldpos_vertex:IC,background_vert:PC,background_frag:FC,backgroundCube_vert:LC,backgroundCube_frag:OC,cube_vert:NC,cube_frag:UC,depth_vert:GC,depth_frag:kC,distanceRGBA_vert:HC,distanceRGBA_frag:WC,equirect_vert:VC,equirect_frag:jC,linedashed_vert:zC,linedashed_frag:KC,meshbasic_vert:JC,meshbasic_frag:qC,meshlambert_vert:XC,meshlambert_frag:YC,meshmatcap_vert:$C,meshmatcap_frag:ZC,meshnormal_vert:QC,meshnormal_frag:eS,meshphong_vert:tS,meshphong_frag:nS,meshphysical_vert:rS,meshphysical_frag:iS,meshtoon_vert:oS,meshtoon_frag:sS,points_vert:aS,points_frag:uS,shadow_vert:cS,shadow_frag:lS,sprite_vert:fS,sprite_frag:dS},un={common:{diffuse:{value:new yi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Zo},uv2Transform:{value:new Zo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Yr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zo}},sprite:{diffuse:{value:new yi(16777215)},opacity:{value:1},center:{value:new Yr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zo}}},Ts={basic:{uniforms:Go([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.fog]),vertexShader:_i.meshbasic_vert,fragmentShader:_i.meshbasic_frag},lambert:{uniforms:Go([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new yi(0)}}]),vertexShader:_i.meshlambert_vert,fragmentShader:_i.meshlambert_frag},phong:{uniforms:Go([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new yi(0)},specular:{value:new yi(1118481)},shininess:{value:30}}]),vertexShader:_i.meshphong_vert,fragmentShader:_i.meshphong_frag},standard:{uniforms:Go([un.common,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.roughnessmap,un.metalnessmap,un.fog,un.lights,{emissive:{value:new yi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_i.meshphysical_vert,fragmentShader:_i.meshphysical_frag},toon:{uniforms:Go([un.common,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.gradientmap,un.fog,un.lights,{emissive:{value:new yi(0)}}]),vertexShader:_i.meshtoon_vert,fragmentShader:_i.meshtoon_frag},matcap:{uniforms:Go([un.common,un.bumpmap,un.normalmap,un.displacementmap,un.fog,{matcap:{value:null}}]),vertexShader:_i.meshmatcap_vert,fragmentShader:_i.meshmatcap_frag},points:{uniforms:Go([un.points,un.fog]),vertexShader:_i.points_vert,fragmentShader:_i.points_frag},dashed:{uniforms:Go([un.common,un.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_i.linedashed_vert,fragmentShader:_i.linedashed_frag},depth:{uniforms:Go([un.common,un.displacementmap]),vertexShader:_i.depth_vert,fragmentShader:_i.depth_frag},normal:{uniforms:Go([un.common,un.bumpmap,un.normalmap,un.displacementmap,{opacity:{value:1}}]),vertexShader:_i.meshnormal_vert,fragmentShader:_i.meshnormal_frag},sprite:{uniforms:Go([un.sprite,un.fog]),vertexShader:_i.sprite_vert,fragmentShader:_i.sprite_frag},background:{uniforms:{uvTransform:{value:new Zo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_i.background_vert,fragmentShader:_i.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:_i.backgroundCube_vert,fragmentShader:_i.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_i.cube_vert,fragmentShader:_i.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_i.equirect_vert,fragmentShader:_i.equirect_frag},distanceRGBA:{uniforms:Go([un.common,un.displacementmap,{referencePosition:{value:new Ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_i.distanceRGBA_vert,fragmentShader:_i.distanceRGBA_frag},shadow:{uniforms:Go([un.lights,un.fog,{color:{value:new yi(0)},opacity:{value:1}}]),vertexShader:_i.shadow_vert,fragmentShader:_i.shadow_frag}};Ts.physical={uniforms:Go([Ts.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Yr(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new yi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Yr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new yi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new yi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:_i.meshphysical_vert,fragmentShader:_i.meshphysical_frag};const pl={r:0,b:0,g:0};function hS(o,e,t,n,r,i,s){const a=new yi(0);let u=i===!0?0:1,f,l,p=null,d=0,_=null;function A(v,T){let P=!1,I=T.isScene===!0?T.background:null;I&&I.isTexture&&(I=(T.backgroundBlurriness>0?t:e).get(I));const k=o.xr,K=k.getSession&&k.getSession();K&&K.environmentBlendMode==="additive"&&(I=null),I===null?E(a,u):I&&I.isColor&&(E(I,1),P=!0),(o.autoClear||P)&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),I&&(I.isCubeTexture||I.mapping===rf)?(l===void 0&&(l=new ss(new Oc(1,1,1),new Ja({name:"BackgroundCubeMaterial",uniforms:Fu(Ts.backgroundCube.uniforms),vertexShader:Ts.backgroundCube.vertexShader,fragmentShader:Ts.backgroundCube.fragmentShader,side:cs,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(ee,me,Z){this.matrixWorld.copyPosition(Z.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=I,l.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,l.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,l.material.toneMapped=I.encoding!==Vi,(p!==I||d!==I.version||_!==o.toneMapping)&&(l.material.needsUpdate=!0,p=I,d=I.version,_=o.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null)):I&&I.isTexture&&(f===void 0&&(f=new ss(new Ch(2,2),new Ja({name:"BackgroundMaterial",uniforms:Fu(Ts.background.uniforms),vertexShader:Ts.background.vertexShader,fragmentShader:Ts.background.fragmentShader,side:ua,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=I,f.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,f.material.toneMapped=I.encoding!==Vi,I.matrixAutoUpdate===!0&&I.updateMatrix(),f.material.uniforms.uvTransform.value.copy(I.matrix),(p!==I||d!==I.version||_!==o.toneMapping)&&(f.material.needsUpdate=!0,p=I,d=I.version,_=o.toneMapping),f.layers.enableAll(),v.unshift(f,f.geometry,f.material,0,0,null))}function E(v,T){v.getRGB(pl,qg(o)),n.buffers.color.setClear(pl.r,pl.g,pl.b,T,s)}return{getClearColor:function(){return a},setClearColor:function(v,T=1){a.set(v),u=T,E(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(v){u=v,E(a,u)},render:A}}function pS(o,e,t,n){const r=o.getParameter(34921),i=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||i!==null,a={},u=v(null);let f=u,l=!1;function p(Te,Se,Oe,He,j){let ht=!1;if(s){const Qe=E(He,Oe,Se);f!==Qe&&(f=Qe,_(f.object)),ht=T(Te,He,Oe,j),ht&&P(Te,He,Oe,j)}else{const Qe=Se.wireframe===!0;(f.geometry!==He.id||f.program!==Oe.id||f.wireframe!==Qe)&&(f.geometry=He.id,f.program=Oe.id,f.wireframe=Qe,ht=!0)}j!==null&&t.update(j,34963),(ht||l)&&(l=!1,Z(Te,Se,Oe,He),j!==null&&o.bindBuffer(34963,t.get(j).buffer))}function d(){return n.isWebGL2?o.createVertexArray():i.createVertexArrayOES()}function _(Te){return n.isWebGL2?o.bindVertexArray(Te):i.bindVertexArrayOES(Te)}function A(Te){return n.isWebGL2?o.deleteVertexArray(Te):i.deleteVertexArrayOES(Te)}function E(Te,Se,Oe){const He=Oe.wireframe===!0;let j=a[Te.id];j===void 0&&(j={},a[Te.id]=j);let ht=j[Se.id];ht===void 0&&(ht={},j[Se.id]=ht);let Qe=ht[He];return Qe===void 0&&(Qe=v(d()),ht[He]=Qe),Qe}function v(Te){const Se=[],Oe=[],He=[];for(let j=0;j<r;j++)Se[j]=0,Oe[j]=0,He[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Se,enabledAttributes:Oe,attributeDivisors:He,object:Te,attributes:{},index:null}}function T(Te,Se,Oe,He){const j=f.attributes,ht=Se.attributes;let Qe=0;const Je=Oe.getAttributes();for(const ze in Je)if(Je[ze].location>=0){const ke=j[ze];let L=ht[ze];if(L===void 0&&(ze==="instanceMatrix"&&Te.instanceMatrix&&(L=Te.instanceMatrix),ze==="instanceColor"&&Te.instanceColor&&(L=Te.instanceColor)),ke===void 0||ke.attribute!==L||L&&ke.data!==L.data)return!0;Qe++}return f.attributesNum!==Qe||f.index!==He}function P(Te,Se,Oe,He){const j={},ht=Se.attributes;let Qe=0;const Je=Oe.getAttributes();for(const ze in Je)if(Je[ze].location>=0){let ke=ht[ze];ke===void 0&&(ze==="instanceMatrix"&&Te.instanceMatrix&&(ke=Te.instanceMatrix),ze==="instanceColor"&&Te.instanceColor&&(ke=Te.instanceColor));const L={};L.attribute=ke,ke&&ke.data&&(L.data=ke.data),j[ze]=L,Qe++}f.attributes=j,f.attributesNum=Qe,f.index=He}function I(){const Te=f.newAttributes;for(let Se=0,Oe=Te.length;Se<Oe;Se++)Te[Se]=0}function k(Te){K(Te,0)}function K(Te,Se){const Oe=f.newAttributes,He=f.enabledAttributes,j=f.attributeDivisors;Oe[Te]=1,He[Te]===0&&(o.enableVertexAttribArray(Te),He[Te]=1),j[Te]!==Se&&((n.isWebGL2?o:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Te,Se),j[Te]=Se)}function ee(){const Te=f.newAttributes,Se=f.enabledAttributes;for(let Oe=0,He=Se.length;Oe<He;Oe++)Se[Oe]!==Te[Oe]&&(o.disableVertexAttribArray(Oe),Se[Oe]=0)}function me(Te,Se,Oe,He,j,ht){n.isWebGL2===!0&&(Oe===5124||Oe===5125)?o.vertexAttribIPointer(Te,Se,Oe,j,ht):o.vertexAttribPointer(Te,Se,Oe,He,j,ht)}function Z(Te,Se,Oe,He){if(n.isWebGL2===!1&&(Te.isInstancedMesh||He.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;I();const j=He.attributes,ht=Oe.getAttributes(),Qe=Se.defaultAttributeValues;for(const Je in ht){const ze=ht[Je];if(ze.location>=0){let ut=j[Je];if(ut===void 0&&(Je==="instanceMatrix"&&Te.instanceMatrix&&(ut=Te.instanceMatrix),Je==="instanceColor"&&Te.instanceColor&&(ut=Te.instanceColor)),ut!==void 0){const ke=ut.normalized,L=ut.itemSize,nt=t.get(ut);if(nt===void 0)continue;const In=nt.buffer,Xt=nt.type,Pn=nt.bytesPerElement;if(ut.isInterleavedBufferAttribute){const vt=ut.data,dn=vt.stride,Yt=ut.offset;if(vt.isInstancedInterleavedBuffer){for(let yn=0;yn<ze.locationSize;yn++)K(ze.location+yn,vt.meshPerAttribute);Te.isInstancedMesh!==!0&&He._maxInstanceCount===void 0&&(He._maxInstanceCount=vt.meshPerAttribute*vt.count)}else for(let yn=0;yn<ze.locationSize;yn++)k(ze.location+yn);o.bindBuffer(34962,In);for(let yn=0;yn<ze.locationSize;yn++)me(ze.location+yn,L/ze.locationSize,Xt,ke,dn*Pn,(Yt+L/ze.locationSize*yn)*Pn)}else{if(ut.isInstancedBufferAttribute){for(let vt=0;vt<ze.locationSize;vt++)K(ze.location+vt,ut.meshPerAttribute);Te.isInstancedMesh!==!0&&He._maxInstanceCount===void 0&&(He._maxInstanceCount=ut.meshPerAttribute*ut.count)}else for(let vt=0;vt<ze.locationSize;vt++)k(ze.location+vt);o.bindBuffer(34962,In);for(let vt=0;vt<ze.locationSize;vt++)me(ze.location+vt,L/ze.locationSize,Xt,ke,L*Pn,L/ze.locationSize*vt*Pn)}}else if(Qe!==void 0){const ke=Qe[Je];if(ke!==void 0)switch(ke.length){case 2:o.vertexAttrib2fv(ze.location,ke);break;case 3:o.vertexAttrib3fv(ze.location,ke);break;case 4:o.vertexAttrib4fv(ze.location,ke);break;default:o.vertexAttrib1fv(ze.location,ke)}}}}ee()}function re(){Pe();for(const Te in a){const Se=a[Te];for(const Oe in Se){const He=Se[Oe];for(const j in He)A(He[j].object),delete He[j];delete Se[Oe]}delete a[Te]}}function de(Te){if(a[Te.id]===void 0)return;const Se=a[Te.id];for(const Oe in Se){const He=Se[Oe];for(const j in He)A(He[j].object),delete He[j];delete Se[Oe]}delete a[Te.id]}function Ie(Te){for(const Se in a){const Oe=a[Se];if(Oe[Te.id]===void 0)continue;const He=Oe[Te.id];for(const j in He)A(He[j].object),delete He[j];delete Oe[Te.id]}}function Pe(){we(),l=!0,f!==u&&(f=u,_(f.object))}function we(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:p,reset:Pe,resetDefaultState:we,dispose:re,releaseStatesOfGeometry:de,releaseStatesOfProgram:Ie,initAttributes:I,enableAttribute:k,disableUnusedAttributes:ee}}function mS(o,e,t,n){const r=n.isWebGL2;let i;function s(f){i=f}function a(f,l){o.drawArrays(i,f,l),t.update(l,i,1)}function u(f,l,p){if(p===0)return;let d,_;if(r)d=o,_="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[_](i,f,l,p),t.update(l,i,p)}this.setMode=s,this.render=a,this.renderInstances=u}function _S(o,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const me=e.get("EXT_texture_filter_anisotropic");n=o.getParameter(me.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function i(me){if(me==="highp"){if(o.getShaderPrecisionFormat(35633,36338).precision>0&&o.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";me="mediump"}return me==="mediump"&&o.getShaderPrecisionFormat(35633,36337).precision>0&&o.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&o instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&o instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const u=i(a);u!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",u,"instead."),a=u);const f=s||e.has("WEBGL_draw_buffers"),l=t.logarithmicDepthBuffer===!0,p=o.getParameter(34930),d=o.getParameter(35660),_=o.getParameter(3379),A=o.getParameter(34076),E=o.getParameter(34921),v=o.getParameter(36347),T=o.getParameter(36348),P=o.getParameter(36349),I=d>0,k=s||e.has("OES_texture_float"),K=I&&k,ee=s?o.getParameter(36183):0;return{isWebGL2:s,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:p,maxVertexTextures:d,maxTextureSize:_,maxCubemapSize:A,maxAttributes:E,maxVertexUniforms:v,maxVaryings:T,maxFragmentUniforms:P,vertexTextures:I,floatFragmentTextures:k,floatVertexTextures:K,maxSamples:ee}}function gS(o){const e=this;let t=null,n=0,r=!1,i=!1;const s=new Ba,a=new Zo,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,d,_){const A=p.length!==0||d||n!==0||r;return r=d,t=l(p,_,0),n=p.length,A},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,f()},this.setState=function(p,d,_){const A=p.clippingPlanes,E=p.clipIntersection,v=p.clipShadows,T=o.get(p);if(!r||A===null||A.length===0||i&&!v)i?l(null):f();else{const P=i?0:n,I=P*4;let k=T.clippingState||null;u.value=k,k=l(A,d,I,_);for(let K=0;K!==I;++K)k[K]=t[K];T.clippingState=k,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=P}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(p,d,_,A){const E=p!==null?p.length:0;let v=null;if(E!==0){if(v=u.value,A!==!0||v===null){const T=_+E*4,P=d.matrixWorldInverse;a.getNormalMatrix(P),(v===null||v.length<T)&&(v=new Float32Array(T));for(let I=0,k=_;I!==E;++I,k+=4)s.copy(p[I]).applyMatrix4(P,a),s.normal.toArray(v,k),v[k+3]=s.constant}u.value=v,u.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,v}}function yS(o){let e=new WeakMap;function t(s,a){return a===pd?s.mapping=Mu:a===md&&(s.mapping=Du),s}function n(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===pd||a===md)if(e.has(s)){const u=e.get(s).texture;return t(u,s.mapping)}else{const u=s.image;if(u&&u.height>0){const f=new RT(u.height/2);return f.fromEquirectangularTexture(o,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function i(){e=new WeakMap}return{get:n,dispose:i}}class Sh extends Xg{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=f*this.view.offsetX,s=i+f*this.view.width,a-=l*this.view.offsetY,u=a-l*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const bu=4,Vm=[.125,.215,.35,.446,.526,.582],Ma=20,Vf=new Sh,jm=new yi;let jf=null;const xa=(1+Math.sqrt(5))/2,_u=1/xa,zm=[new Ge(1,1,1),new Ge(-1,1,1),new Ge(1,1,-1),new Ge(-1,1,-1),new Ge(0,xa,_u),new Ge(0,xa,-_u),new Ge(_u,0,xa),new Ge(-_u,0,xa),new Ge(xa,_u,0),new Ge(-xa,_u,0)];class Km{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){jf=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Xm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jf),e.scissorTest=!1,ml(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Mu||e.mapping===Du?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jf=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:qo,minFilter:qo,generateMipmaps:!1,type:Ec,format:os,encoding:za,depthBuffer:!1},r=Jm(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Jm(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=vS(i)),this._blurMaterial=AS(i,e,t)}return r}_compileMaterial(e){const t=new ss(this._lodPlanes[0],e);this._renderer.compile(t,Vf)}_sceneToCubeUV(e,t,n,r){const a=new Ho(90,1,t,n),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],l=this._renderer,p=l.autoClear,d=l.toneMapping;l.getClearColor(jm),l.toneMapping=js,l.autoClear=!1;const _=new Ia({name:"PMREM.Background",side:cs,depthWrite:!1,depthTest:!1}),A=new ss(new Oc,_);let E=!1;const v=e.background;v?v.isColor&&(_.color.copy(v),e.background=null,E=!0):(_.color.copy(jm),E=!0);for(let T=0;T<6;T++){const P=T%3;P===0?(a.up.set(0,u[T],0),a.lookAt(f[T],0,0)):P===1?(a.up.set(0,0,u[T]),a.lookAt(0,f[T],0)):(a.up.set(0,u[T],0),a.lookAt(0,0,f[T]));const I=this._cubeSize;ml(r,P*I,T>2?I:0,I,I),l.setRenderTarget(r),E&&l.render(A,a),l.render(e,a)}A.geometry.dispose(),A.material.dispose(),l.toneMapping=d,l.autoClear=p,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Mu||e.mapping===Du;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Xm()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qm());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new ss(this._lodPlanes[0],i),a=i.uniforms;a.envMap.value=e;const u=this._cubeSize;ml(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(s,Vf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),s=zm[(r-1)%zm.length];this._blur(e,r-1,r,i,s)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const u=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const l=3,p=new ss(this._lodPlanes[r],f),d=f.uniforms,_=this._sizeLods[n]-1,A=isFinite(i)?Math.PI/(2*_):2*Math.PI/(2*Ma-1),E=i/A,v=isFinite(i)?1+Math.floor(l*E):Ma;v>Ma&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Ma}`);const T=[];let P=0;for(let me=0;me<Ma;++me){const Z=me/E,re=Math.exp(-Z*Z/2);T.push(re),me===0?P+=re:me<v&&(P+=2*re)}for(let me=0;me<T.length;me++)T[me]=T[me]/P;d.envMap.value=e.texture,d.samples.value=v,d.weights.value=T,d.latitudinal.value=s==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:I}=this;d.dTheta.value=A,d.mipInt.value=I-n;const k=this._sizeLods[r],K=3*k*(r>I-bu?r-I+bu:0),ee=4*(this._cubeSize-k);ml(t,K,ee,3*k,2*k),u.setRenderTarget(t),u.render(p,Vf)}}function vS(o){const e=[],t=[],n=[];let r=o;const i=o-bu+1+Vm.length;for(let s=0;s<i;s++){const a=Math.pow(2,r);t.push(a);let u=1/a;s>o-bu?u=Vm[s-o+bu-1]:s===0&&(u=0),n.push(u);const f=1/(a-2),l=-f,p=1+f,d=[l,l,p,l,p,p,l,l,p,p,l,p],_=6,A=6,E=3,v=2,T=1,P=new Float32Array(E*A*_),I=new Float32Array(v*A*_),k=new Float32Array(T*A*_);for(let ee=0;ee<_;ee++){const me=ee%3*2/3-1,Z=ee>2?0:-1,re=[me,Z,0,me+2/3,Z,0,me+2/3,Z+1,0,me,Z,0,me+2/3,Z+1,0,me,Z+1,0];P.set(re,E*A*ee),I.set(d,v*A*ee);const de=[ee,ee,ee,ee,ee,ee];k.set(de,T*A*ee)}const K=new gs;K.setAttribute("position",new xo(P,E)),K.setAttribute("uv",new xo(I,v)),K.setAttribute("faceIndex",new xo(k,T)),e.push(K),r>bu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Jm(o,e,t){const n=new Ka(o,e,t);return n.texture.mapping=rf,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ml(o,e,t,n,r){o.viewport.set(e,t,n,r),o.scissor.set(e,t,n,r)}function AS(o,e,t){const n=new Float32Array(Ma),r=new Ge(0,1,0);return new Ja({name:"SphericalGaussianBlur",defines:{n:Ma,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${o}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Bh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function qm(){return new Ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Bh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function Xm(){return new Ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Bh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function Bh(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bS(o){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const u=a.mapping,f=u===pd||u===md,l=u===Mu||u===Du;if(f||l)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new Km(o)),p=f?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(f&&p&&p.height>0||l&&p&&r(p)){t===null&&(t=new Km(o));const d=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",i),d.texture}else return null}}}return a}function r(a){let u=0;const f=6;for(let l=0;l<f;l++)a[l]!==void 0&&u++;return u===f}function i(a){const u=a.target;u.removeEventListener("dispose",i);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function ES(o){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=o.getExtension("WEBGL_depth_texture")||o.getExtension("MOZ_WEBGL_depth_texture")||o.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=o.getExtension("WEBGL_compressed_texture_s3tc")||o.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=o.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function TS(o,e,t,n){const r={},i=new WeakMap;function s(p){const d=p.target;d.index!==null&&e.remove(d.index);for(const A in d.attributes)e.remove(d.attributes[A]);d.removeEventListener("dispose",s),delete r[d.id];const _=i.get(d);_&&(e.remove(_),i.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(p,d){return r[d.id]===!0||(d.addEventListener("dispose",s),r[d.id]=!0,t.memory.geometries++),d}function u(p){const d=p.attributes;for(const A in d)e.update(d[A],34962);const _=p.morphAttributes;for(const A in _){const E=_[A];for(let v=0,T=E.length;v<T;v++)e.update(E[v],34962)}}function f(p){const d=[],_=p.index,A=p.attributes.position;let E=0;if(_!==null){const P=_.array;E=_.version;for(let I=0,k=P.length;I<k;I+=3){const K=P[I+0],ee=P[I+1],me=P[I+2];d.push(K,ee,ee,me,me,K)}}else{const P=A.array;E=A.version;for(let I=0,k=P.length/3-1;I<k;I+=3){const K=I+0,ee=I+1,me=I+2;d.push(K,ee,ee,me,me,K)}}const v=new(kg(d)?Jg:Kg)(d,1);v.version=E;const T=i.get(p);T&&e.remove(T),i.set(p,v)}function l(p){const d=i.get(p);if(d){const _=p.index;_!==null&&d.version<_.version&&f(p)}else f(p);return i.get(p)}return{get:a,update:u,getWireframeAttribute:l}}function wS(o,e,t,n){const r=n.isWebGL2;let i;function s(d){i=d}let a,u;function f(d){a=d.type,u=d.bytesPerElement}function l(d,_){o.drawElements(i,_,a,d*u),t.update(_,i,1)}function p(d,_,A){if(A===0)return;let E,v;if(r)E=o,v="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[v](i,_,a,d*u,A),t.update(_,i,A)}this.setMode=s,this.setIndex=f,this.render=l,this.renderInstances=p}function CS(o){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(i,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(i/3);break;case 1:t.lines+=a*(i/2);break;case 3:t.lines+=a*(i-1);break;case 2:t.lines+=a*i;break;case 0:t.points+=a*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function SS(o,e){return o[0]-e[0]}function BS(o,e){return Math.abs(e[1])-Math.abs(o[1])}function xS(o,e,t){const n={},r=new Float32Array(8),i=new WeakMap,s=new Yi,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function u(f,l,p,d){const _=f.morphTargetInfluences;if(e.isWebGL2===!0){const A=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,E=A!==void 0?A.length:0;let v=i.get(l);if(v===void 0||v.count!==E){let Se=function(){we.dispose(),i.delete(l),l.removeEventListener("dispose",Se)};v!==void 0&&v.texture.dispose();const I=l.morphAttributes.position!==void 0,k=l.morphAttributes.normal!==void 0,K=l.morphAttributes.color!==void 0,ee=l.morphAttributes.position||[],me=l.morphAttributes.normal||[],Z=l.morphAttributes.color||[];let re=0;I===!0&&(re=1),k===!0&&(re=2),K===!0&&(re=3);let de=l.attributes.position.count*re,Ie=1;de>e.maxTextureSize&&(Ie=Math.ceil(de/e.maxTextureSize),de=e.maxTextureSize);const Pe=new Float32Array(de*Ie*4*E),we=new jg(Pe,de,Ie,E);we.type=oa,we.needsUpdate=!0;const Te=re*4;for(let Oe=0;Oe<E;Oe++){const He=ee[Oe],j=me[Oe],ht=Z[Oe],Qe=de*Ie*4*Oe;for(let Je=0;Je<He.count;Je++){const ze=Je*Te;I===!0&&(s.fromBufferAttribute(He,Je),Pe[Qe+ze+0]=s.x,Pe[Qe+ze+1]=s.y,Pe[Qe+ze+2]=s.z,Pe[Qe+ze+3]=0),k===!0&&(s.fromBufferAttribute(j,Je),Pe[Qe+ze+4]=s.x,Pe[Qe+ze+5]=s.y,Pe[Qe+ze+6]=s.z,Pe[Qe+ze+7]=0),K===!0&&(s.fromBufferAttribute(ht,Je),Pe[Qe+ze+8]=s.x,Pe[Qe+ze+9]=s.y,Pe[Qe+ze+10]=s.z,Pe[Qe+ze+11]=ht.itemSize===4?s.w:1)}}v={count:E,texture:we,size:new Yr(de,Ie)},i.set(l,v),l.addEventListener("dispose",Se)}let T=0;for(let I=0;I<_.length;I++)T+=_[I];const P=l.morphTargetsRelative?1:1-T;d.getUniforms().setValue(o,"morphTargetBaseInfluence",P),d.getUniforms().setValue(o,"morphTargetInfluences",_),d.getUniforms().setValue(o,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(o,"morphTargetsTextureSize",v.size)}else{const A=_===void 0?0:_.length;let E=n[l.id];if(E===void 0||E.length!==A){E=[];for(let k=0;k<A;k++)E[k]=[k,0];n[l.id]=E}for(let k=0;k<A;k++){const K=E[k];K[0]=k,K[1]=_[k]}E.sort(BS);for(let k=0;k<8;k++)k<A&&E[k][1]?(a[k][0]=E[k][0],a[k][1]=E[k][1]):(a[k][0]=Number.MAX_SAFE_INTEGER,a[k][1]=0);a.sort(SS);const v=l.morphAttributes.position,T=l.morphAttributes.normal;let P=0;for(let k=0;k<8;k++){const K=a[k],ee=K[0],me=K[1];ee!==Number.MAX_SAFE_INTEGER&&me?(v&&l.getAttribute("morphTarget"+k)!==v[ee]&&l.setAttribute("morphTarget"+k,v[ee]),T&&l.getAttribute("morphNormal"+k)!==T[ee]&&l.setAttribute("morphNormal"+k,T[ee]),r[k]=me,P+=me):(v&&l.hasAttribute("morphTarget"+k)===!0&&l.deleteAttribute("morphTarget"+k),T&&l.hasAttribute("morphNormal"+k)===!0&&l.deleteAttribute("morphNormal"+k),r[k]=0)}const I=l.morphTargetsRelative?1:1-P;d.getUniforms().setValue(o,"morphTargetBaseInfluence",I),d.getUniforms().setValue(o,"morphTargetInfluences",r)}}return{update:u}}function MS(o,e,t,n){let r=new WeakMap;function i(u){const f=n.render.frame,l=u.geometry,p=e.get(u,l);return r.get(p)!==f&&(e.update(p),r.set(p,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),p}function s(){r=new WeakMap}function a(u){const f=u.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:i,dispose:s}}const Zg=new Bo,Qg=new jg,ey=new mT,ty=new Yg,Ym=[],$m=[],Zm=new Float32Array(16),Qm=new Float32Array(9),e_=new Float32Array(4);function Gu(o,e,t){const n=o[0];if(n<=0||n>0)return o;const r=e*t;let i=Ym[r];if(i===void 0&&(i=new Float32Array(r),Ym[r]=i),e!==0){n.toArray(i,0);for(let s=1,a=0;s!==e;++s)a+=t,o[s].toArray(i,a)}return i}function vo(o,e){if(o.length!==e.length)return!1;for(let t=0,n=o.length;t<n;t++)if(o[t]!==e[t])return!1;return!0}function Ao(o,e){for(let t=0,n=e.length;t<n;t++)o[t]=e[t]}function of(o,e){let t=$m[e];t===void 0&&(t=new Int32Array(e),$m[e]=t);for(let n=0;n!==e;++n)t[n]=o.allocateTextureUnit();return t}function DS(o,e){const t=this.cache;t[0]!==e&&(o.uniform1f(this.addr,e),t[0]=e)}function RS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;o.uniform2fv(this.addr,e),Ao(t,e)}}function IS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(o.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vo(t,e))return;o.uniform3fv(this.addr,e),Ao(t,e)}}function PS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;o.uniform4fv(this.addr,e),Ao(t,e)}}function FS(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(vo(t,e))return;o.uniformMatrix2fv(this.addr,!1,e),Ao(t,e)}else{if(vo(t,n))return;e_.set(n),o.uniformMatrix2fv(this.addr,!1,e_),Ao(t,n)}}function LS(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(vo(t,e))return;o.uniformMatrix3fv(this.addr,!1,e),Ao(t,e)}else{if(vo(t,n))return;Qm.set(n),o.uniformMatrix3fv(this.addr,!1,Qm),Ao(t,n)}}function OS(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(vo(t,e))return;o.uniformMatrix4fv(this.addr,!1,e),Ao(t,e)}else{if(vo(t,n))return;Zm.set(n),o.uniformMatrix4fv(this.addr,!1,Zm),Ao(t,n)}}function NS(o,e){const t=this.cache;t[0]!==e&&(o.uniform1i(this.addr,e),t[0]=e)}function US(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;o.uniform2iv(this.addr,e),Ao(t,e)}}function GS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vo(t,e))return;o.uniform3iv(this.addr,e),Ao(t,e)}}function kS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;o.uniform4iv(this.addr,e),Ao(t,e)}}function HS(o,e){const t=this.cache;t[0]!==e&&(o.uniform1ui(this.addr,e),t[0]=e)}function WS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;o.uniform2uiv(this.addr,e),Ao(t,e)}}function VS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vo(t,e))return;o.uniform3uiv(this.addr,e),Ao(t,e)}}function jS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;o.uniform4uiv(this.addr,e),Ao(t,e)}}function zS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||Zg,r)}function KS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||ey,r)}function JS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||ty,r)}function qS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||Qg,r)}function XS(o){switch(o){case 5126:return DS;case 35664:return RS;case 35665:return IS;case 35666:return PS;case 35674:return FS;case 35675:return LS;case 35676:return OS;case 5124:case 35670:return NS;case 35667:case 35671:return US;case 35668:case 35672:return GS;case 35669:case 35673:return kS;case 5125:return HS;case 36294:return WS;case 36295:return VS;case 36296:return jS;case 35678:case 36198:case 36298:case 36306:case 35682:return zS;case 35679:case 36299:case 36307:return KS;case 35680:case 36300:case 36308:case 36293:return JS;case 36289:case 36303:case 36311:case 36292:return qS}}function YS(o,e){o.uniform1fv(this.addr,e)}function $S(o,e){const t=Gu(e,this.size,2);o.uniform2fv(this.addr,t)}function ZS(o,e){const t=Gu(e,this.size,3);o.uniform3fv(this.addr,t)}function QS(o,e){const t=Gu(e,this.size,4);o.uniform4fv(this.addr,t)}function e1(o,e){const t=Gu(e,this.size,4);o.uniformMatrix2fv(this.addr,!1,t)}function t1(o,e){const t=Gu(e,this.size,9);o.uniformMatrix3fv(this.addr,!1,t)}function n1(o,e){const t=Gu(e,this.size,16);o.uniformMatrix4fv(this.addr,!1,t)}function r1(o,e){o.uniform1iv(this.addr,e)}function i1(o,e){o.uniform2iv(this.addr,e)}function o1(o,e){o.uniform3iv(this.addr,e)}function s1(o,e){o.uniform4iv(this.addr,e)}function a1(o,e){o.uniform1uiv(this.addr,e)}function u1(o,e){o.uniform2uiv(this.addr,e)}function c1(o,e){o.uniform3uiv(this.addr,e)}function l1(o,e){o.uniform4uiv(this.addr,e)}function f1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||Zg,i[s])}function d1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||ey,i[s])}function h1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||ty,i[s])}function p1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Qg,i[s])}function m1(o){switch(o){case 5126:return YS;case 35664:return $S;case 35665:return ZS;case 35666:return QS;case 35674:return e1;case 35675:return t1;case 35676:return n1;case 5124:case 35670:return r1;case 35667:case 35671:return i1;case 35668:case 35672:return o1;case 35669:case 35673:return s1;case 5125:return a1;case 36294:return u1;case 36295:return c1;case 36296:return l1;case 35678:case 36198:case 36298:case 36306:case 35682:return f1;case 35679:case 36299:case 36307:return d1;case 35680:case 36300:case 36308:case 36293:return h1;case 36289:case 36303:case 36311:case 36292:return p1}}class _1{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=XS(t.type)}}class g1{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=m1(t.type)}}class y1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const zf=/(\w+)(\])?(\[|\.)?/g;function t_(o,e){o.seq.push(e),o.map[e.id]=e}function v1(o,e,t){const n=o.name,r=n.length;for(zf.lastIndex=0;;){const i=zf.exec(n),s=zf.lastIndex;let a=i[1];const u=i[2]==="]",f=i[3];if(u&&(a=a|0),f===void 0||f==="["&&s+2===r){t_(t,f===void 0?new _1(a,o,e):new g1(a,o,e));break}else{let p=t.map[a];p===void 0&&(p=new y1(a),t_(t,p)),t=p}}}class Bl{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const i=e.getActiveUniform(t,r),s=e.getUniformLocation(t,i.name);v1(i,s,this)}}setValue(e,t,n,r){const i=this.map[t];i!==void 0&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const a=t[i],u=n[a.id];u.needsUpdate!==!1&&a.setValue(e,u.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const s=e[r];s.id in t&&n.push(s)}return n}}function n_(o,e,t){const n=o.createShader(e);return o.shaderSource(n,t),o.compileShader(n),n}let A1=0;function b1(o,e){const t=o.split(`
`),n=[],r=Math.max(e-6,0),i=Math.min(e+6,t.length);for(let s=r;s<i;s++){const a=s+1;n.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return n.join(`
`)}function E1(o){switch(o){case za:return["Linear","( value )"];case Vi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",o),["Linear","( value )"]}}function r_(o,e,t){const n=o.getShaderParameter(e,35713),r=o.getShaderInfoLog(e).trim();if(n&&r==="")return"";const i=/ERROR: 0:(\d+)/.exec(r);if(i){const s=parseInt(i[1]);return t.toUpperCase()+`

`+r+`

`+b1(o.getShaderSource(e),s)}else return r}function T1(o,e){const t=E1(e);return"vec4 "+o+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function w1(o,e){let t;switch(e){case xE:t="Linear";break;case ME:t="Reinhard";break;case DE:t="OptimizedCineon";break;case RE:t="ACESFilmic";break;case IE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+o+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function C1(o){return[o.extensionDerivatives||o.envMapCubeUVHeight||o.bumpMap||o.tangentSpaceNormalMap||o.clearcoatNormalMap||o.flatShading||o.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(o.extensionFragDepth||o.logarithmicDepthBuffer)&&o.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",o.extensionDrawBuffers&&o.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(o.extensionShaderTextureLOD||o.envMap||o.transmission)&&o.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cc).join(`
`)}function S1(o){const e=[];for(const t in o){const n=o[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function B1(o,e){const t={},n=o.getProgramParameter(e,35721);for(let r=0;r<n;r++){const i=o.getActiveAttrib(e,r),s=i.name;let a=1;i.type===35674&&(a=2),i.type===35675&&(a=3),i.type===35676&&(a=4),t[s]={type:i.type,location:o.getAttribLocation(e,s),locationSize:a}}return t}function cc(o){return o!==""}function i_(o,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return o.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function o_(o,e){return o.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const x1=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ad(o){return o.replace(x1,M1)}function M1(o,e){const t=_i[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Ad(t)}const D1=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s_(o){return o.replace(D1,R1)}function R1(o,e,t,n){let r="";for(let i=parseInt(e);i<parseInt(t);i++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return r}function a_(o){let e="precision "+o.precision+` float;
precision `+o.precision+" int;";return o.precision==="highp"?e+=`
#define HIGH_PRECISION`:o.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:o.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function I1(o){let e="SHADOWMAP_TYPE_BASIC";return o.shadowMapType===Dg?e="SHADOWMAP_TYPE_PCF":o.shadowMapType===sE?e="SHADOWMAP_TYPE_PCF_SOFT":o.shadowMapType===uc&&(e="SHADOWMAP_TYPE_VSM"),e}function P1(o){let e="ENVMAP_TYPE_CUBE";if(o.envMap)switch(o.envMapMode){case Mu:case Du:e="ENVMAP_TYPE_CUBE";break;case rf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function F1(o){let e="ENVMAP_MODE_REFLECTION";if(o.envMap)switch(o.envMapMode){case Du:e="ENVMAP_MODE_REFRACTION";break}return e}function L1(o){let e="ENVMAP_BLENDING_NONE";if(o.envMap)switch(o.combine){case Pg:e="ENVMAP_BLENDING_MULTIPLY";break;case SE:e="ENVMAP_BLENDING_MIX";break;case BE:e="ENVMAP_BLENDING_ADD";break}return e}function O1(o){const e=o.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function N1(o,e,t,n){const r=o.getContext(),i=t.defines;let s=t.vertexShader,a=t.fragmentShader;const u=I1(t),f=P1(t),l=F1(t),p=L1(t),d=O1(t),_=t.isWebGL2?"":C1(t),A=S1(i),E=r.createProgram();let v,T,P=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[A].filter(cc).join(`
`),v.length>0&&(v+=`
`),T=[_,A].filter(cc).join(`
`),T.length>0&&(T+=`
`)):(v=[a_(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cc).join(`
`),T=[_,a_(t),"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+l:"",t.envMap?"#define "+p:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==js?"#define TONE_MAPPING":"",t.toneMapping!==js?_i.tonemapping_pars_fragment:"",t.toneMapping!==js?w1("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",_i.encodings_pars_fragment,T1("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cc).join(`
`)),s=Ad(s),s=i_(s,t),s=o_(s,t),a=Ad(a),a=i_(a,t),a=o_(a,t),s=s_(s),a=s_(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,T=["#define varying in",t.glslVersion===Rm?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Rm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const I=P+v+s,k=P+T+a,K=n_(r,35633,I),ee=n_(r,35632,k);if(r.attachShader(E,K),r.attachShader(E,ee),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E),o.debug.checkShaderErrors){const re=r.getProgramInfoLog(E).trim(),de=r.getShaderInfoLog(K).trim(),Ie=r.getShaderInfoLog(ee).trim();let Pe=!0,we=!0;if(r.getProgramParameter(E,35714)===!1){Pe=!1;const Te=r_(r,K,"vertex"),Se=r_(r,ee,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,35715)+`

Program Info Log: `+re+`
`+Te+`
`+Se)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(de===""||Ie==="")&&(we=!1);we&&(this.diagnostics={runnable:Pe,programLog:re,vertexShader:{log:de,prefix:v},fragmentShader:{log:Ie,prefix:T}})}r.deleteShader(K),r.deleteShader(ee);let me;this.getUniforms=function(){return me===void 0&&(me=new Bl(r,E)),me};let Z;return this.getAttributes=function(){return Z===void 0&&(Z=B1(r,E)),Z},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.name=t.shaderName,this.id=A1++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=K,this.fragmentShader=ee,this}let U1=0;class G1{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(i)===!1&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new k1(e),t.set(e,n)),n}}class k1{constructor(e){this.id=U1++,this.code=e,this.usedTimes=0}}function H1(o,e,t,n,r,i,s){const a=new zg,u=new G1,f=[],l=r.isWebGL2,p=r.logarithmicDepthBuffer,d=r.vertexTextures;let _=r.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(Z,re,de,Ie,Pe){const we=Ie.fog,Te=Pe.geometry,Se=Z.isMeshStandardMaterial?Ie.environment:null,Oe=(Z.isMeshStandardMaterial?t:e).get(Z.envMap||Se),He=Oe&&Oe.mapping===rf?Oe.image.height:null,j=A[Z.type];Z.precision!==null&&(_=r.getMaxPrecision(Z.precision),_!==Z.precision&&console.warn("THREE.WebGLProgram.getParameters:",Z.precision,"not supported, using",_,"instead."));const ht=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,Qe=ht!==void 0?ht.length:0;let Je=0;Te.morphAttributes.position!==void 0&&(Je=1),Te.morphAttributes.normal!==void 0&&(Je=2),Te.morphAttributes.color!==void 0&&(Je=3);let ze,ut,ke,L;if(j){const dn=Ts[j];ze=dn.vertexShader,ut=dn.fragmentShader}else ze=Z.vertexShader,ut=Z.fragmentShader,u.update(Z),ke=u.getVertexShaderID(Z),L=u.getFragmentShaderID(Z);const nt=o.getRenderTarget(),In=Z.alphaTest>0,Xt=Z.clearcoat>0,Pn=Z.iridescence>0;return{isWebGL2:l,shaderID:j,shaderName:Z.type,vertexShader:ze,fragmentShader:ut,defines:Z.defines,customVertexShaderID:ke,customFragmentShaderID:L,isRawShaderMaterial:Z.isRawShaderMaterial===!0,glslVersion:Z.glslVersion,precision:_,instancing:Pe.isInstancedMesh===!0,instancingColor:Pe.isInstancedMesh===!0&&Pe.instanceColor!==null,supportsVertexTextures:d,outputEncoding:nt===null?o.outputEncoding:nt.isXRRenderTarget===!0?nt.texture.encoding:za,map:!!Z.map,matcap:!!Z.matcap,envMap:!!Oe,envMapMode:Oe&&Oe.mapping,envMapCubeUVHeight:He,lightMap:!!Z.lightMap,aoMap:!!Z.aoMap,emissiveMap:!!Z.emissiveMap,bumpMap:!!Z.bumpMap,normalMap:!!Z.normalMap,objectSpaceNormalMap:Z.normalMapType===ZE,tangentSpaceNormalMap:Z.normalMapType===Ug,decodeVideoTexture:!!Z.map&&Z.map.isVideoTexture===!0&&Z.map.encoding===Vi,clearcoat:Xt,clearcoatMap:Xt&&!!Z.clearcoatMap,clearcoatRoughnessMap:Xt&&!!Z.clearcoatRoughnessMap,clearcoatNormalMap:Xt&&!!Z.clearcoatNormalMap,iridescence:Pn,iridescenceMap:Pn&&!!Z.iridescenceMap,iridescenceThicknessMap:Pn&&!!Z.iridescenceThicknessMap,displacementMap:!!Z.displacementMap,roughnessMap:!!Z.roughnessMap,metalnessMap:!!Z.metalnessMap,specularMap:!!Z.specularMap,specularIntensityMap:!!Z.specularIntensityMap,specularColorMap:!!Z.specularColorMap,opaque:Z.transparent===!1&&Z.blending===wu,alphaMap:!!Z.alphaMap,alphaTest:In,gradientMap:!!Z.gradientMap,sheen:Z.sheen>0,sheenColorMap:!!Z.sheenColorMap,sheenRoughnessMap:!!Z.sheenRoughnessMap,transmission:Z.transmission>0,transmissionMap:!!Z.transmissionMap,thicknessMap:!!Z.thicknessMap,combine:Z.combine,vertexTangents:!!Z.normalMap&&!!Te.attributes.tangent,vertexColors:Z.vertexColors,vertexAlphas:Z.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,vertexUvs:!!Z.map||!!Z.bumpMap||!!Z.normalMap||!!Z.specularMap||!!Z.alphaMap||!!Z.emissiveMap||!!Z.roughnessMap||!!Z.metalnessMap||!!Z.clearcoatMap||!!Z.clearcoatRoughnessMap||!!Z.clearcoatNormalMap||!!Z.iridescenceMap||!!Z.iridescenceThicknessMap||!!Z.displacementMap||!!Z.transmissionMap||!!Z.thicknessMap||!!Z.specularIntensityMap||!!Z.specularColorMap||!!Z.sheenColorMap||!!Z.sheenRoughnessMap,uvsVertexOnly:!(Z.map||Z.bumpMap||Z.normalMap||Z.specularMap||Z.alphaMap||Z.emissiveMap||Z.roughnessMap||Z.metalnessMap||Z.clearcoatNormalMap||Z.iridescenceMap||Z.iridescenceThicknessMap||Z.transmission>0||Z.transmissionMap||Z.thicknessMap||Z.specularIntensityMap||Z.specularColorMap||Z.sheen>0||Z.sheenColorMap||Z.sheenRoughnessMap)&&!!Z.displacementMap,fog:!!we,useFog:Z.fog===!0,fogExp2:we&&we.isFogExp2,flatShading:!!Z.flatShading,sizeAttenuation:Z.sizeAttenuation,logarithmicDepthBuffer:p,skinning:Pe.isSkinnedMesh===!0,morphTargets:Te.morphAttributes.position!==void 0,morphNormals:Te.morphAttributes.normal!==void 0,morphColors:Te.morphAttributes.color!==void 0,morphTargetsCount:Qe,morphTextureStride:Je,numDirLights:re.directional.length,numPointLights:re.point.length,numSpotLights:re.spot.length,numSpotLightMaps:re.spotLightMap.length,numRectAreaLights:re.rectArea.length,numHemiLights:re.hemi.length,numDirLightShadows:re.directionalShadowMap.length,numPointLightShadows:re.pointShadowMap.length,numSpotLightShadows:re.spotShadowMap.length,numSpotLightShadowsWithMaps:re.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:Z.dithering,shadowMapEnabled:o.shadowMap.enabled&&de.length>0,shadowMapType:o.shadowMap.type,toneMapping:Z.toneMapped?o.toneMapping:js,physicallyCorrectLights:o.physicallyCorrectLights,premultipliedAlpha:Z.premultipliedAlpha,doubleSided:Z.side===nf,flipSided:Z.side===cs,useDepthPacking:!!Z.depthPacking,depthPacking:Z.depthPacking||0,index0AttributeName:Z.index0AttributeName,extensionDerivatives:Z.extensions&&Z.extensions.derivatives,extensionFragDepth:Z.extensions&&Z.extensions.fragDepth,extensionDrawBuffers:Z.extensions&&Z.extensions.drawBuffers,extensionShaderTextureLOD:Z.extensions&&Z.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||n.has("EXT_shader_texture_lod"),customProgramCacheKey:Z.customProgramCacheKey()}}function v(Z){const re=[];if(Z.shaderID?re.push(Z.shaderID):(re.push(Z.customVertexShaderID),re.push(Z.customFragmentShaderID)),Z.defines!==void 0)for(const de in Z.defines)re.push(de),re.push(Z.defines[de]);return Z.isRawShaderMaterial===!1&&(T(re,Z),P(re,Z),re.push(o.outputEncoding)),re.push(Z.customProgramCacheKey),re.join()}function T(Z,re){Z.push(re.precision),Z.push(re.outputEncoding),Z.push(re.envMapMode),Z.push(re.envMapCubeUVHeight),Z.push(re.combine),Z.push(re.vertexUvs),Z.push(re.fogExp2),Z.push(re.sizeAttenuation),Z.push(re.morphTargetsCount),Z.push(re.morphAttributeCount),Z.push(re.numDirLights),Z.push(re.numPointLights),Z.push(re.numSpotLights),Z.push(re.numSpotLightMaps),Z.push(re.numHemiLights),Z.push(re.numRectAreaLights),Z.push(re.numDirLightShadows),Z.push(re.numPointLightShadows),Z.push(re.numSpotLightShadows),Z.push(re.numSpotLightShadowsWithMaps),Z.push(re.shadowMapType),Z.push(re.toneMapping),Z.push(re.numClippingPlanes),Z.push(re.numClipIntersection),Z.push(re.depthPacking)}function P(Z,re){a.disableAll(),re.isWebGL2&&a.enable(0),re.supportsVertexTextures&&a.enable(1),re.instancing&&a.enable(2),re.instancingColor&&a.enable(3),re.map&&a.enable(4),re.matcap&&a.enable(5),re.envMap&&a.enable(6),re.lightMap&&a.enable(7),re.aoMap&&a.enable(8),re.emissiveMap&&a.enable(9),re.bumpMap&&a.enable(10),re.normalMap&&a.enable(11),re.objectSpaceNormalMap&&a.enable(12),re.tangentSpaceNormalMap&&a.enable(13),re.clearcoat&&a.enable(14),re.clearcoatMap&&a.enable(15),re.clearcoatRoughnessMap&&a.enable(16),re.clearcoatNormalMap&&a.enable(17),re.iridescence&&a.enable(18),re.iridescenceMap&&a.enable(19),re.iridescenceThicknessMap&&a.enable(20),re.displacementMap&&a.enable(21),re.specularMap&&a.enable(22),re.roughnessMap&&a.enable(23),re.metalnessMap&&a.enable(24),re.gradientMap&&a.enable(25),re.alphaMap&&a.enable(26),re.alphaTest&&a.enable(27),re.vertexColors&&a.enable(28),re.vertexAlphas&&a.enable(29),re.vertexUvs&&a.enable(30),re.vertexTangents&&a.enable(31),re.uvsVertexOnly&&a.enable(32),Z.push(a.mask),a.disableAll(),re.fog&&a.enable(0),re.useFog&&a.enable(1),re.flatShading&&a.enable(2),re.logarithmicDepthBuffer&&a.enable(3),re.skinning&&a.enable(4),re.morphTargets&&a.enable(5),re.morphNormals&&a.enable(6),re.morphColors&&a.enable(7),re.premultipliedAlpha&&a.enable(8),re.shadowMapEnabled&&a.enable(9),re.physicallyCorrectLights&&a.enable(10),re.doubleSided&&a.enable(11),re.flipSided&&a.enable(12),re.useDepthPacking&&a.enable(13),re.dithering&&a.enable(14),re.specularIntensityMap&&a.enable(15),re.specularColorMap&&a.enable(16),re.transmission&&a.enable(17),re.transmissionMap&&a.enable(18),re.thicknessMap&&a.enable(19),re.sheen&&a.enable(20),re.sheenColorMap&&a.enable(21),re.sheenRoughnessMap&&a.enable(22),re.decodeVideoTexture&&a.enable(23),re.opaque&&a.enable(24),Z.push(a.mask)}function I(Z){const re=A[Z.type];let de;if(re){const Ie=Ts[re];de=BT.clone(Ie.uniforms)}else de=Z.uniforms;return de}function k(Z,re){let de;for(let Ie=0,Pe=f.length;Ie<Pe;Ie++){const we=f[Ie];if(we.cacheKey===re){de=we,++de.usedTimes;break}}return de===void 0&&(de=new N1(o,re,Z,i),f.push(de)),de}function K(Z){if(--Z.usedTimes===0){const re=f.indexOf(Z);f[re]=f[f.length-1],f.pop(),Z.destroy()}}function ee(Z){u.remove(Z)}function me(){u.dispose()}return{getParameters:E,getProgramCacheKey:v,getUniforms:I,acquireProgram:k,releaseProgram:K,releaseShaderCache:ee,programs:f,dispose:me}}function W1(){let o=new WeakMap;function e(i){let s=o.get(i);return s===void 0&&(s={},o.set(i,s)),s}function t(i){o.delete(i)}function n(i,s,a){o.get(i)[s]=a}function r(){o=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function V1(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.material.id!==e.material.id?o.material.id-e.material.id:o.z!==e.z?o.z-e.z:o.id-e.id}function u_(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.z!==e.z?e.z-o.z:o.id-e.id}function c_(){const o=[];let e=0;const t=[],n=[],r=[];function i(){e=0,t.length=0,n.length=0,r.length=0}function s(p,d,_,A,E,v){let T=o[e];return T===void 0?(T={id:p.id,object:p,geometry:d,material:_,groupOrder:A,renderOrder:p.renderOrder,z:E,group:v},o[e]=T):(T.id=p.id,T.object=p,T.geometry=d,T.material=_,T.groupOrder=A,T.renderOrder=p.renderOrder,T.z=E,T.group=v),e++,T}function a(p,d,_,A,E,v){const T=s(p,d,_,A,E,v);_.transmission>0?n.push(T):_.transparent===!0?r.push(T):t.push(T)}function u(p,d,_,A,E,v){const T=s(p,d,_,A,E,v);_.transmission>0?n.unshift(T):_.transparent===!0?r.unshift(T):t.unshift(T)}function f(p,d){t.length>1&&t.sort(p||V1),n.length>1&&n.sort(d||u_),r.length>1&&r.sort(d||u_)}function l(){for(let p=e,d=o.length;p<d;p++){const _=o[p];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:r,init:i,push:a,unshift:u,finish:l,sort:f}}function j1(){let o=new WeakMap;function e(n,r){const i=o.get(n);let s;return i===void 0?(s=new c_,o.set(n,[s])):r>=i.length?(s=new c_,i.push(s)):s=i[r],s}function t(){o=new WeakMap}return{get:e,dispose:t}}function z1(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Ge,color:new yi};break;case"SpotLight":t={position:new Ge,direction:new Ge,color:new yi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ge,color:new yi,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ge,skyColor:new yi,groundColor:new yi};break;case"RectAreaLight":t={color:new yi,position:new Ge,halfWidth:new Ge,halfHeight:new Ge};break}return o[e.id]=t,t}}}function K1(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yr};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yr};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yr,shadowCameraNear:1,shadowCameraFar:1e3};break}return o[e.id]=t,t}}}let J1=0;function q1(o,e){return(e.castShadow?2:0)-(o.castShadow?2:0)+(e.map?1:0)-(o.map?1:0)}function X1(o,e){const t=new z1,n=K1(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)r.probe.push(new Ge);const i=new Ge,s=new Ei,a=new Ei;function u(l,p){let d=0,_=0,A=0;for(let Ie=0;Ie<9;Ie++)r.probe[Ie].set(0,0,0);let E=0,v=0,T=0,P=0,I=0,k=0,K=0,ee=0,me=0,Z=0;l.sort(q1);const re=p!==!0?Math.PI:1;for(let Ie=0,Pe=l.length;Ie<Pe;Ie++){const we=l[Ie],Te=we.color,Se=we.intensity,Oe=we.distance,He=we.shadow&&we.shadow.map?we.shadow.map.texture:null;if(we.isAmbientLight)d+=Te.r*Se*re,_+=Te.g*Se*re,A+=Te.b*Se*re;else if(we.isLightProbe)for(let j=0;j<9;j++)r.probe[j].addScaledVector(we.sh.coefficients[j],Se);else if(we.isDirectionalLight){const j=t.get(we);if(j.color.copy(we.color).multiplyScalar(we.intensity*re),we.castShadow){const ht=we.shadow,Qe=n.get(we);Qe.shadowBias=ht.bias,Qe.shadowNormalBias=ht.normalBias,Qe.shadowRadius=ht.radius,Qe.shadowMapSize=ht.mapSize,r.directionalShadow[E]=Qe,r.directionalShadowMap[E]=He,r.directionalShadowMatrix[E]=we.shadow.matrix,k++}r.directional[E]=j,E++}else if(we.isSpotLight){const j=t.get(we);j.position.setFromMatrixPosition(we.matrixWorld),j.color.copy(Te).multiplyScalar(Se*re),j.distance=Oe,j.coneCos=Math.cos(we.angle),j.penumbraCos=Math.cos(we.angle*(1-we.penumbra)),j.decay=we.decay,r.spot[T]=j;const ht=we.shadow;if(we.map&&(r.spotLightMap[me]=we.map,me++,ht.updateMatrices(we),we.castShadow&&Z++),r.spotLightMatrix[T]=ht.matrix,we.castShadow){const Qe=n.get(we);Qe.shadowBias=ht.bias,Qe.shadowNormalBias=ht.normalBias,Qe.shadowRadius=ht.radius,Qe.shadowMapSize=ht.mapSize,r.spotShadow[T]=Qe,r.spotShadowMap[T]=He,ee++}T++}else if(we.isRectAreaLight){const j=t.get(we);j.color.copy(Te).multiplyScalar(Se),j.halfWidth.set(we.width*.5,0,0),j.halfHeight.set(0,we.height*.5,0),r.rectArea[P]=j,P++}else if(we.isPointLight){const j=t.get(we);if(j.color.copy(we.color).multiplyScalar(we.intensity*re),j.distance=we.distance,j.decay=we.decay,we.castShadow){const ht=we.shadow,Qe=n.get(we);Qe.shadowBias=ht.bias,Qe.shadowNormalBias=ht.normalBias,Qe.shadowRadius=ht.radius,Qe.shadowMapSize=ht.mapSize,Qe.shadowCameraNear=ht.camera.near,Qe.shadowCameraFar=ht.camera.far,r.pointShadow[v]=Qe,r.pointShadowMap[v]=He,r.pointShadowMatrix[v]=we.shadow.matrix,K++}r.point[v]=j,v++}else if(we.isHemisphereLight){const j=t.get(we);j.skyColor.copy(we.color).multiplyScalar(Se*re),j.groundColor.copy(we.groundColor).multiplyScalar(Se*re),r.hemi[I]=j,I++}}P>0&&(e.isWebGL2||o.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=un.LTC_FLOAT_1,r.rectAreaLTC2=un.LTC_FLOAT_2):o.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=un.LTC_HALF_1,r.rectAreaLTC2=un.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=_,r.ambient[2]=A;const de=r.hash;(de.directionalLength!==E||de.pointLength!==v||de.spotLength!==T||de.rectAreaLength!==P||de.hemiLength!==I||de.numDirectionalShadows!==k||de.numPointShadows!==K||de.numSpotShadows!==ee||de.numSpotMaps!==me)&&(r.directional.length=E,r.spot.length=T,r.rectArea.length=P,r.point.length=v,r.hemi.length=I,r.directionalShadow.length=k,r.directionalShadowMap.length=k,r.pointShadow.length=K,r.pointShadowMap.length=K,r.spotShadow.length=ee,r.spotShadowMap.length=ee,r.directionalShadowMatrix.length=k,r.pointShadowMatrix.length=K,r.spotLightMatrix.length=ee+me-Z,r.spotLightMap.length=me,r.numSpotLightShadowsWithMaps=Z,de.directionalLength=E,de.pointLength=v,de.spotLength=T,de.rectAreaLength=P,de.hemiLength=I,de.numDirectionalShadows=k,de.numPointShadows=K,de.numSpotShadows=ee,de.numSpotMaps=me,r.version=J1++)}function f(l,p){let d=0,_=0,A=0,E=0,v=0;const T=p.matrixWorldInverse;for(let P=0,I=l.length;P<I;P++){const k=l[P];if(k.isDirectionalLight){const K=r.directional[d];K.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),K.direction.sub(i),K.direction.transformDirection(T),d++}else if(k.isSpotLight){const K=r.spot[A];K.position.setFromMatrixPosition(k.matrixWorld),K.position.applyMatrix4(T),K.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),K.direction.sub(i),K.direction.transformDirection(T),A++}else if(k.isRectAreaLight){const K=r.rectArea[E];K.position.setFromMatrixPosition(k.matrixWorld),K.position.applyMatrix4(T),a.identity(),s.copy(k.matrixWorld),s.premultiply(T),a.extractRotation(s),K.halfWidth.set(k.width*.5,0,0),K.halfHeight.set(0,k.height*.5,0),K.halfWidth.applyMatrix4(a),K.halfHeight.applyMatrix4(a),E++}else if(k.isPointLight){const K=r.point[_];K.position.setFromMatrixPosition(k.matrixWorld),K.position.applyMatrix4(T),_++}else if(k.isHemisphereLight){const K=r.hemi[v];K.direction.setFromMatrixPosition(k.matrixWorld),K.direction.transformDirection(T),v++}}}return{setup:u,setupView:f,state:r}}function l_(o,e){const t=new X1(o,e),n=[],r=[];function i(){n.length=0,r.length=0}function s(p){n.push(p)}function a(p){r.push(p)}function u(p){t.setup(n,p)}function f(p){t.setupView(n,p)}return{init:i,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:u,setupLightsView:f,pushLight:s,pushShadow:a}}function Y1(o,e){let t=new WeakMap;function n(i,s=0){const a=t.get(i);let u;return a===void 0?(u=new l_(o,e),t.set(i,[u])):s>=a.length?(u=new l_(o,e),a.push(u)):u=a[s],u}function r(){t=new WeakMap}return{get:n,dispose:r}}class $1 extends Ss{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=YE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Z1 extends Ss{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ge,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Q1=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eB=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tB(o,e,t){let n=new wh;const r=new Yr,i=new Yr,s=new Yi,a=new $1({depthPacking:$E}),u=new Z1,f={},l=t.maxTextureSize,p={0:cs,1:ua,2:nf},d=new Ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yr},radius:{value:4}},vertexShader:Q1,fragmentShader:eB}),_=d.clone();_.defines.HORIZONTAL_PASS=1;const A=new gs;A.setAttribute("position",new xo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ss(A,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dg,this.render=function(k,K,ee){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||k.length===0)return;const me=o.getRenderTarget(),Z=o.getActiveCubeFace(),re=o.getActiveMipmapLevel(),de=o.state;de.setBlending(aa),de.buffers.color.setClear(1,1,1,1),de.buffers.depth.setTest(!0),de.setScissorTest(!1);for(let Ie=0,Pe=k.length;Ie<Pe;Ie++){const we=k[Ie],Te=we.shadow;if(Te===void 0){console.warn("THREE.WebGLShadowMap:",we,"has no shadow.");continue}if(Te.autoUpdate===!1&&Te.needsUpdate===!1)continue;r.copy(Te.mapSize);const Se=Te.getFrameExtents();if(r.multiply(Se),i.copy(Te.mapSize),(r.x>l||r.y>l)&&(r.x>l&&(i.x=Math.floor(l/Se.x),r.x=i.x*Se.x,Te.mapSize.x=i.x),r.y>l&&(i.y=Math.floor(l/Se.y),r.y=i.y*Se.y,Te.mapSize.y=i.y)),Te.map===null){const He=this.type!==uc?{minFilter:To,magFilter:To}:{};Te.map=new Ka(r.x,r.y,He),Te.map.texture.name=we.name+".shadowMap",Te.camera.updateProjectionMatrix()}o.setRenderTarget(Te.map),o.clear();const Oe=Te.getViewportCount();for(let He=0;He<Oe;He++){const j=Te.getViewport(He);s.set(i.x*j.x,i.y*j.y,i.x*j.z,i.y*j.w),de.viewport(s),Te.updateMatrices(we,He),n=Te.getFrustum(),I(K,ee,Te.camera,we,this.type)}Te.isPointLightShadow!==!0&&this.type===uc&&T(Te,ee),Te.needsUpdate=!1}v.needsUpdate=!1,o.setRenderTarget(me,Z,re)};function T(k,K){const ee=e.update(E);d.defines.VSM_SAMPLES!==k.blurSamples&&(d.defines.VSM_SAMPLES=k.blurSamples,_.defines.VSM_SAMPLES=k.blurSamples,d.needsUpdate=!0,_.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new Ka(r.x,r.y)),d.uniforms.shadow_pass.value=k.map.texture,d.uniforms.resolution.value=k.mapSize,d.uniforms.radius.value=k.radius,o.setRenderTarget(k.mapPass),o.clear(),o.renderBufferDirect(K,null,ee,d,E,null),_.uniforms.shadow_pass.value=k.mapPass.texture,_.uniforms.resolution.value=k.mapSize,_.uniforms.radius.value=k.radius,o.setRenderTarget(k.map),o.clear(),o.renderBufferDirect(K,null,ee,_,E,null)}function P(k,K,ee,me,Z,re){let de=null;const Ie=ee.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(Ie!==void 0)de=Ie;else if(de=ee.isPointLight===!0?u:a,o.localClippingEnabled&&K.clipShadows===!0&&Array.isArray(K.clippingPlanes)&&K.clippingPlanes.length!==0||K.displacementMap&&K.displacementScale!==0||K.alphaMap&&K.alphaTest>0||K.map&&K.alphaTest>0){const Pe=de.uuid,we=K.uuid;let Te=f[Pe];Te===void 0&&(Te={},f[Pe]=Te);let Se=Te[we];Se===void 0&&(Se=de.clone(),Te[we]=Se),de=Se}return de.visible=K.visible,de.wireframe=K.wireframe,re===uc?de.side=K.shadowSide!==null?K.shadowSide:K.side:de.side=K.shadowSide!==null?K.shadowSide:p[K.side],de.alphaMap=K.alphaMap,de.alphaTest=K.alphaTest,de.map=K.map,de.clipShadows=K.clipShadows,de.clippingPlanes=K.clippingPlanes,de.clipIntersection=K.clipIntersection,de.displacementMap=K.displacementMap,de.displacementScale=K.displacementScale,de.displacementBias=K.displacementBias,de.wireframeLinewidth=K.wireframeLinewidth,de.linewidth=K.linewidth,ee.isPointLight===!0&&de.isMeshDistanceMaterial===!0&&(de.referencePosition.setFromMatrixPosition(ee.matrixWorld),de.nearDistance=me,de.farDistance=Z),de}function I(k,K,ee,me,Z){if(k.visible===!1)return;if(k.layers.test(K.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&Z===uc)&&(!k.frustumCulled||n.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,k.matrixWorld);const Ie=e.update(k),Pe=k.material;if(Array.isArray(Pe)){const we=Ie.groups;for(let Te=0,Se=we.length;Te<Se;Te++){const Oe=we[Te],He=Pe[Oe.materialIndex];if(He&&He.visible){const j=P(k,He,me,ee.near,ee.far,Z);o.renderBufferDirect(ee,null,Ie,j,k,Oe)}}}else if(Pe.visible){const we=P(k,Pe,me,ee.near,ee.far,Z);o.renderBufferDirect(ee,null,Ie,we,k,null)}}const de=k.children;for(let Ie=0,Pe=de.length;Ie<Pe;Ie++)I(de[Ie],K,ee,me,Z)}}function nB(o,e,t){const n=t.isWebGL2;function r(){let Fe=!1;const rt=new Yi;let Tt=null;const Qt=new Yi(0,0,0,0);return{setMask:function(En){Tt!==En&&!Fe&&(o.colorMask(En,En,En,En),Tt=En)},setLocked:function(En){Fe=En},setClear:function(En,Kr,ki,Hi,$i){$i===!0&&(En*=Hi,Kr*=Hi,ki*=Hi),rt.set(En,Kr,ki,Hi),Qt.equals(rt)===!1&&(o.clearColor(En,Kr,ki,Hi),Qt.copy(rt))},reset:function(){Fe=!1,Tt=null,Qt.set(-1,0,0,0)}}}function i(){let Fe=!1,rt=null,Tt=null,Qt=null;return{setTest:function(En){En?In(2929):Xt(2929)},setMask:function(En){rt!==En&&!Fe&&(o.depthMask(En),rt=En)},setFunc:function(En){if(Tt!==En){switch(En){case vE:o.depthFunc(512);break;case AE:o.depthFunc(519);break;case bE:o.depthFunc(513);break;case hd:o.depthFunc(515);break;case EE:o.depthFunc(514);break;case TE:o.depthFunc(518);break;case wE:o.depthFunc(516);break;case CE:o.depthFunc(517);break;default:o.depthFunc(515)}Tt=En}},setLocked:function(En){Fe=En},setClear:function(En){Qt!==En&&(o.clearDepth(En),Qt=En)},reset:function(){Fe=!1,rt=null,Tt=null,Qt=null}}}function s(){let Fe=!1,rt=null,Tt=null,Qt=null,En=null,Kr=null,ki=null,Hi=null,$i=null;return{setTest:function(li){Fe||(li?In(2960):Xt(2960))},setMask:function(li){rt!==li&&!Fe&&(o.stencilMask(li),rt=li)},setFunc:function(li,so,ji){(Tt!==li||Qt!==so||En!==ji)&&(o.stencilFunc(li,so,ji),Tt=li,Qt=so,En=ji)},setOp:function(li,so,ji){(Kr!==li||ki!==so||Hi!==ji)&&(o.stencilOp(li,so,ji),Kr=li,ki=so,Hi=ji)},setLocked:function(li){Fe=li},setClear:function(li){$i!==li&&(o.clearStencil(li),$i=li)},reset:function(){Fe=!1,rt=null,Tt=null,Qt=null,En=null,Kr=null,ki=null,Hi=null,$i=null}}}const a=new r,u=new i,f=new s,l=new WeakMap,p=new WeakMap;let d={},_={},A=new WeakMap,E=[],v=null,T=!1,P=null,I=null,k=null,K=null,ee=null,me=null,Z=null,re=!1,de=null,Ie=null,Pe=null,we=null,Te=null;const Se=o.getParameter(35661);let Oe=!1,He=0;const j=o.getParameter(7938);j.indexOf("WebGL")!==-1?(He=parseFloat(/^WebGL (\d)/.exec(j)[1]),Oe=He>=1):j.indexOf("OpenGL ES")!==-1&&(He=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),Oe=He>=2);let ht=null,Qe={};const Je=o.getParameter(3088),ze=o.getParameter(2978),ut=new Yi().fromArray(Je),ke=new Yi().fromArray(ze);function L(Fe,rt,Tt){const Qt=new Uint8Array(4),En=o.createTexture();o.bindTexture(Fe,En),o.texParameteri(Fe,10241,9728),o.texParameteri(Fe,10240,9728);for(let Kr=0;Kr<Tt;Kr++)o.texImage2D(rt+Kr,0,6408,1,1,0,6408,5121,Qt);return En}const nt={};nt[3553]=L(3553,3553,1),nt[34067]=L(34067,34069,6),a.setClear(0,0,0,1),u.setClear(1),f.setClear(0),In(2929),u.setFunc(hd),Ai(!1),oi(tm),In(2884),Cr(aa);function In(Fe){d[Fe]!==!0&&(o.enable(Fe),d[Fe]=!0)}function Xt(Fe){d[Fe]!==!1&&(o.disable(Fe),d[Fe]=!1)}function Pn(Fe,rt){return _[Fe]!==rt?(o.bindFramebuffer(Fe,rt),_[Fe]=rt,n&&(Fe===36009&&(_[36160]=rt),Fe===36160&&(_[36009]=rt)),!0):!1}function vt(Fe,rt){let Tt=E,Qt=!1;if(Fe)if(Tt=A.get(rt),Tt===void 0&&(Tt=[],A.set(rt,Tt)),Fe.isWebGLMultipleRenderTargets){const En=Fe.texture;if(Tt.length!==En.length||Tt[0]!==36064){for(let Kr=0,ki=En.length;Kr<ki;Kr++)Tt[Kr]=36064+Kr;Tt.length=En.length,Qt=!0}}else Tt[0]!==36064&&(Tt[0]=36064,Qt=!0);else Tt[0]!==1029&&(Tt[0]=1029,Qt=!0);Qt&&(t.isWebGL2?o.drawBuffers(Tt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Tt))}function dn(Fe){return v!==Fe?(o.useProgram(Fe),v=Fe,!0):!1}const Yt={[vu]:32774,[uE]:32778,[cE]:32779};if(n)Yt[om]=32775,Yt[sm]=32776;else{const Fe=e.get("EXT_blend_minmax");Fe!==null&&(Yt[om]=Fe.MIN_EXT,Yt[sm]=Fe.MAX_EXT)}const yn={[lE]:0,[fE]:1,[dE]:768,[Rg]:770,[yE]:776,[_E]:774,[pE]:772,[hE]:769,[Ig]:771,[gE]:775,[mE]:773};function Cr(Fe,rt,Tt,Qt,En,Kr,ki,Hi){if(Fe===aa){T===!0&&(Xt(3042),T=!1);return}if(T===!1&&(In(3042),T=!0),Fe!==aE){if(Fe!==P||Hi!==re){if((I!==vu||ee!==vu)&&(o.blendEquation(32774),I=vu,ee=vu),Hi)switch(Fe){case wu:o.blendFuncSeparate(1,771,1,771);break;case nm:o.blendFunc(1,1);break;case rm:o.blendFuncSeparate(0,769,0,1);break;case im:o.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}else switch(Fe){case wu:o.blendFuncSeparate(770,771,1,771);break;case nm:o.blendFunc(770,1);break;case rm:o.blendFuncSeparate(0,769,0,1);break;case im:o.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}k=null,K=null,me=null,Z=null,P=Fe,re=Hi}return}En=En||rt,Kr=Kr||Tt,ki=ki||Qt,(rt!==I||En!==ee)&&(o.blendEquationSeparate(Yt[rt],Yt[En]),I=rt,ee=En),(Tt!==k||Qt!==K||Kr!==me||ki!==Z)&&(o.blendFuncSeparate(yn[Tt],yn[Qt],yn[Kr],yn[ki]),k=Tt,K=Qt,me=Kr,Z=ki),P=Fe,re=!1}function Qr(Fe,rt){Fe.side===nf?Xt(2884):In(2884);let Tt=Fe.side===cs;rt&&(Tt=!Tt),Ai(Tt),Fe.blending===wu&&Fe.transparent===!1?Cr(aa):Cr(Fe.blending,Fe.blendEquation,Fe.blendSrc,Fe.blendDst,Fe.blendEquationAlpha,Fe.blendSrcAlpha,Fe.blendDstAlpha,Fe.premultipliedAlpha),u.setFunc(Fe.depthFunc),u.setTest(Fe.depthTest),u.setMask(Fe.depthWrite),a.setMask(Fe.colorWrite);const Qt=Fe.stencilWrite;f.setTest(Qt),Qt&&(f.setMask(Fe.stencilWriteMask),f.setFunc(Fe.stencilFunc,Fe.stencilRef,Fe.stencilFuncMask),f.setOp(Fe.stencilFail,Fe.stencilZFail,Fe.stencilZPass)),xn(Fe.polygonOffset,Fe.polygonOffsetFactor,Fe.polygonOffsetUnits),Fe.alphaToCoverage===!0?In(32926):Xt(32926)}function Ai(Fe){de!==Fe&&(Fe?o.frontFace(2304):o.frontFace(2305),de=Fe)}function oi(Fe){Fe!==iE?(In(2884),Fe!==Ie&&(Fe===tm?o.cullFace(1029):Fe===oE?o.cullFace(1028):o.cullFace(1032))):Xt(2884),Ie=Fe}function qr(Fe){Fe!==Pe&&(Oe&&o.lineWidth(Fe),Pe=Fe)}function xn(Fe,rt,Tt){Fe?(In(32823),(we!==rt||Te!==Tt)&&(o.polygonOffset(rt,Tt),we=rt,Te=Tt)):Xt(32823)}function ei(Fe){Fe?In(3089):Xt(3089)}function ir(Fe){Fe===void 0&&(Fe=33984+Se-1),ht!==Fe&&(o.activeTexture(Fe),ht=Fe)}function Ae(Fe,rt,Tt){Tt===void 0&&(ht===null?Tt=33984+Se-1:Tt=ht);let Qt=Qe[Tt];Qt===void 0&&(Qt={type:void 0,texture:void 0},Qe[Tt]=Qt),(Qt.type!==Fe||Qt.texture!==rt)&&(ht!==Tt&&(o.activeTexture(Tt),ht=Tt),o.bindTexture(Fe,rt||nt[Fe]),Qt.type=Fe,Qt.texture=rt)}function fe(){const Fe=Qe[ht];Fe!==void 0&&Fe.type!==void 0&&(o.bindTexture(Fe.type,null),Fe.type=void 0,Fe.texture=void 0)}function ot(){try{o.compressedTexImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function wt(){try{o.compressedTexImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Et(){try{o.texSubImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Lt(){try{o.texSubImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function bn(){try{o.compressedTexSubImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ee(){try{o.compressedTexSubImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ve(){try{o.texStorage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function jt(){try{o.texStorage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Zt(){try{o.texImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function St(){try{o.texImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ut(Fe){ut.equals(Fe)===!1&&(o.scissor(Fe.x,Fe.y,Fe.z,Fe.w),ut.copy(Fe))}function sn(Fe){ke.equals(Fe)===!1&&(o.viewport(Fe.x,Fe.y,Fe.z,Fe.w),ke.copy(Fe))}function Fn(Fe,rt){let Tt=p.get(rt);Tt===void 0&&(Tt=new WeakMap,p.set(rt,Tt));let Qt=Tt.get(Fe);Qt===void 0&&(Qt=o.getUniformBlockIndex(rt,Fe.name),Tt.set(Fe,Qt))}function or(Fe,rt){const Qt=p.get(rt).get(Fe);l.get(rt)!==Qt&&(o.uniformBlockBinding(rt,Qt,Fe.__bindingPointIndex),l.set(rt,Qt))}function zr(){o.disable(3042),o.disable(2884),o.disable(2929),o.disable(32823),o.disable(3089),o.disable(2960),o.disable(32926),o.blendEquation(32774),o.blendFunc(1,0),o.blendFuncSeparate(1,0,1,0),o.colorMask(!0,!0,!0,!0),o.clearColor(0,0,0,0),o.depthMask(!0),o.depthFunc(513),o.clearDepth(1),o.stencilMask(4294967295),o.stencilFunc(519,0,4294967295),o.stencilOp(7680,7680,7680),o.clearStencil(0),o.cullFace(1029),o.frontFace(2305),o.polygonOffset(0,0),o.activeTexture(33984),o.bindFramebuffer(36160,null),n===!0&&(o.bindFramebuffer(36009,null),o.bindFramebuffer(36008,null)),o.useProgram(null),o.lineWidth(1),o.scissor(0,0,o.canvas.width,o.canvas.height),o.viewport(0,0,o.canvas.width,o.canvas.height),d={},ht=null,Qe={},_={},A=new WeakMap,E=[],v=null,T=!1,P=null,I=null,k=null,K=null,ee=null,me=null,Z=null,re=!1,de=null,Ie=null,Pe=null,we=null,Te=null,ut.set(0,0,o.canvas.width,o.canvas.height),ke.set(0,0,o.canvas.width,o.canvas.height),a.reset(),u.reset(),f.reset()}return{buffers:{color:a,depth:u,stencil:f},enable:In,disable:Xt,bindFramebuffer:Pn,drawBuffers:vt,useProgram:dn,setBlending:Cr,setMaterial:Qr,setFlipSided:Ai,setCullFace:oi,setLineWidth:qr,setPolygonOffset:xn,setScissorTest:ei,activeTexture:ir,bindTexture:Ae,unbindTexture:fe,compressedTexImage2D:ot,compressedTexImage3D:wt,texImage2D:Zt,texImage3D:St,updateUBOMapping:Fn,uniformBlockBinding:or,texStorage2D:Ve,texStorage3D:jt,texSubImage2D:Et,texSubImage3D:Lt,compressedTexSubImage2D:bn,compressedTexSubImage3D:Ee,scissor:Ut,viewport:sn,reset:zr}}function rB(o,e,t,n,r,i,s){const a=r.isWebGL2,u=r.maxTextures,f=r.maxCubemapSize,l=r.maxTextureSize,p=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,_=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),A=new WeakMap;let E;const v=new WeakMap;let T=!1;try{T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function P(Ae,fe){return T?new OffscreenCanvas(Ae,fe):Sc("canvas")}function I(Ae,fe,ot,wt){let Et=1;if((Ae.width>wt||Ae.height>wt)&&(Et=wt/Math.max(Ae.width,Ae.height)),Et<1||fe===!0)if(typeof HTMLImageElement<"u"&&Ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ae instanceof ImageBitmap){const Lt=fe?Ol:Math.floor,bn=Lt(Et*Ae.width),Ee=Lt(Et*Ae.height);E===void 0&&(E=P(bn,Ee));const Ve=ot?P(bn,Ee):E;return Ve.width=bn,Ve.height=Ee,Ve.getContext("2d").drawImage(Ae,0,0,bn,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+bn+"x"+Ee+")."),Ve}else return"data"in Ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),Ae;return Ae}function k(Ae){return vd(Ae.width)&&vd(Ae.height)}function K(Ae){return a?!1:Ae.wrapS!==is||Ae.wrapT!==is||Ae.minFilter!==To&&Ae.minFilter!==qo}function ee(Ae,fe){return Ae.generateMipmaps&&fe&&Ae.minFilter!==To&&Ae.minFilter!==qo}function me(Ae){o.generateMipmap(Ae)}function Z(Ae,fe,ot,wt,Et=!1){if(a===!1)return fe;if(Ae!==null){if(o[Ae]!==void 0)return o[Ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ae+"'")}let Lt=fe;return fe===6403&&(ot===5126&&(Lt=33326),ot===5131&&(Lt=33325),ot===5121&&(Lt=33321)),fe===33319&&(ot===5126&&(Lt=33328),ot===5131&&(Lt=33327),ot===5121&&(Lt=33323)),fe===6408&&(ot===5126&&(Lt=34836),ot===5131&&(Lt=34842),ot===5121&&(Lt=wt===Vi&&Et===!1?35907:32856),ot===32819&&(Lt=32854),ot===32820&&(Lt=32855)),(Lt===33325||Lt===33326||Lt===33327||Lt===33328||Lt===34842||Lt===34836)&&e.get("EXT_color_buffer_float"),Lt}function re(Ae,fe,ot){return ee(Ae,ot)===!0||Ae.isFramebufferTexture&&Ae.minFilter!==To&&Ae.minFilter!==qo?Math.log2(Math.max(fe.width,fe.height))+1:Ae.mipmaps!==void 0&&Ae.mipmaps.length>0?Ae.mipmaps.length:Ae.isCompressedTexture&&Array.isArray(Ae.image)?fe.mipmaps.length:1}function de(Ae){return Ae===To||Ae===_d||Ae===Cl?9728:9729}function Ie(Ae){const fe=Ae.target;fe.removeEventListener("dispose",Ie),we(fe),fe.isVideoTexture&&A.delete(fe)}function Pe(Ae){const fe=Ae.target;fe.removeEventListener("dispose",Pe),Se(fe)}function we(Ae){const fe=n.get(Ae);if(fe.__webglInit===void 0)return;const ot=Ae.source,wt=v.get(ot);if(wt){const Et=wt[fe.__cacheKey];Et.usedTimes--,Et.usedTimes===0&&Te(Ae),Object.keys(wt).length===0&&v.delete(ot)}n.remove(Ae)}function Te(Ae){const fe=n.get(Ae);o.deleteTexture(fe.__webglTexture);const ot=Ae.source,wt=v.get(ot);delete wt[fe.__cacheKey],s.memory.textures--}function Se(Ae){const fe=Ae.texture,ot=n.get(Ae),wt=n.get(fe);if(wt.__webglTexture!==void 0&&(o.deleteTexture(wt.__webglTexture),s.memory.textures--),Ae.depthTexture&&Ae.depthTexture.dispose(),Ae.isWebGLCubeRenderTarget)for(let Et=0;Et<6;Et++)o.deleteFramebuffer(ot.__webglFramebuffer[Et]),ot.__webglDepthbuffer&&o.deleteRenderbuffer(ot.__webglDepthbuffer[Et]);else{if(o.deleteFramebuffer(ot.__webglFramebuffer),ot.__webglDepthbuffer&&o.deleteRenderbuffer(ot.__webglDepthbuffer),ot.__webglMultisampledFramebuffer&&o.deleteFramebuffer(ot.__webglMultisampledFramebuffer),ot.__webglColorRenderbuffer)for(let Et=0;Et<ot.__webglColorRenderbuffer.length;Et++)ot.__webglColorRenderbuffer[Et]&&o.deleteRenderbuffer(ot.__webglColorRenderbuffer[Et]);ot.__webglDepthRenderbuffer&&o.deleteRenderbuffer(ot.__webglDepthRenderbuffer)}if(Ae.isWebGLMultipleRenderTargets)for(let Et=0,Lt=fe.length;Et<Lt;Et++){const bn=n.get(fe[Et]);bn.__webglTexture&&(o.deleteTexture(bn.__webglTexture),s.memory.textures--),n.remove(fe[Et])}n.remove(fe),n.remove(Ae)}let Oe=0;function He(){Oe=0}function j(){const Ae=Oe;return Ae>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Ae+" texture units while this GPU supports only "+u),Oe+=1,Ae}function ht(Ae){const fe=[];return fe.push(Ae.wrapS),fe.push(Ae.wrapT),fe.push(Ae.wrapR||0),fe.push(Ae.magFilter),fe.push(Ae.minFilter),fe.push(Ae.anisotropy),fe.push(Ae.internalFormat),fe.push(Ae.format),fe.push(Ae.type),fe.push(Ae.generateMipmaps),fe.push(Ae.premultiplyAlpha),fe.push(Ae.flipY),fe.push(Ae.unpackAlignment),fe.push(Ae.encoding),fe.join()}function Qe(Ae,fe){const ot=n.get(Ae);if(Ae.isVideoTexture&&ei(Ae),Ae.isRenderTargetTexture===!1&&Ae.version>0&&ot.__version!==Ae.version){const wt=Ae.image;if(wt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xt(ot,Ae,fe);return}}t.bindTexture(3553,ot.__webglTexture,33984+fe)}function Je(Ae,fe){const ot=n.get(Ae);if(Ae.version>0&&ot.__version!==Ae.version){Xt(ot,Ae,fe);return}t.bindTexture(35866,ot.__webglTexture,33984+fe)}function ze(Ae,fe){const ot=n.get(Ae);if(Ae.version>0&&ot.__version!==Ae.version){Xt(ot,Ae,fe);return}t.bindTexture(32879,ot.__webglTexture,33984+fe)}function ut(Ae,fe){const ot=n.get(Ae);if(Ae.version>0&&ot.__version!==Ae.version){Pn(ot,Ae,fe);return}t.bindTexture(34067,ot.__webglTexture,33984+fe)}const ke={[Ru]:10497,[is]:33071,[Ll]:33648},L={[To]:9728,[_d]:9984,[Cl]:9986,[qo]:9729,[Lg]:9985,[Va]:9987};function nt(Ae,fe,ot){if(ot?(o.texParameteri(Ae,10242,ke[fe.wrapS]),o.texParameteri(Ae,10243,ke[fe.wrapT]),(Ae===32879||Ae===35866)&&o.texParameteri(Ae,32882,ke[fe.wrapR]),o.texParameteri(Ae,10240,L[fe.magFilter]),o.texParameteri(Ae,10241,L[fe.minFilter])):(o.texParameteri(Ae,10242,33071),o.texParameteri(Ae,10243,33071),(Ae===32879||Ae===35866)&&o.texParameteri(Ae,32882,33071),(fe.wrapS!==is||fe.wrapT!==is)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),o.texParameteri(Ae,10240,de(fe.magFilter)),o.texParameteri(Ae,10241,de(fe.minFilter)),fe.minFilter!==To&&fe.minFilter!==qo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const wt=e.get("EXT_texture_filter_anisotropic");if(fe.magFilter===To||fe.minFilter!==Cl&&fe.minFilter!==Va||fe.type===oa&&e.has("OES_texture_float_linear")===!1||a===!1&&fe.type===Ec&&e.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||n.get(fe).__currentAnisotropy)&&(o.texParameterf(Ae,wt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,r.getMaxAnisotropy())),n.get(fe).__currentAnisotropy=fe.anisotropy)}}function In(Ae,fe){let ot=!1;Ae.__webglInit===void 0&&(Ae.__webglInit=!0,fe.addEventListener("dispose",Ie));const wt=fe.source;let Et=v.get(wt);Et===void 0&&(Et={},v.set(wt,Et));const Lt=ht(fe);if(Lt!==Ae.__cacheKey){Et[Lt]===void 0&&(Et[Lt]={texture:o.createTexture(),usedTimes:0},s.memory.textures++,ot=!0),Et[Lt].usedTimes++;const bn=Et[Ae.__cacheKey];bn!==void 0&&(Et[Ae.__cacheKey].usedTimes--,bn.usedTimes===0&&Te(fe)),Ae.__cacheKey=Lt,Ae.__webglTexture=Et[Lt].texture}return ot}function Xt(Ae,fe,ot){let wt=3553;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(wt=35866),fe.isData3DTexture&&(wt=32879);const Et=In(Ae,fe),Lt=fe.source;t.bindTexture(wt,Ae.__webglTexture,33984+ot);const bn=n.get(Lt);if(Lt.version!==bn.__version||Et===!0){t.activeTexture(33984+ot),o.pixelStorei(37440,fe.flipY),o.pixelStorei(37441,fe.premultiplyAlpha),o.pixelStorei(3317,fe.unpackAlignment),o.pixelStorei(37443,0);const Ee=K(fe)&&k(fe.image)===!1;let Ve=I(fe.image,Ee,!1,l);Ve=ir(fe,Ve);const jt=k(Ve)||a,Zt=i.convert(fe.format,fe.encoding);let St=i.convert(fe.type),Ut=Z(fe.internalFormat,Zt,St,fe.encoding,fe.isVideoTexture);nt(wt,fe,jt);let sn;const Fn=fe.mipmaps,or=a&&fe.isVideoTexture!==!0,zr=bn.__version===void 0||Et===!0,Fe=re(fe,Ve,jt);if(fe.isDepthTexture)Ut=6402,a?fe.type===oa?Ut=36012:fe.type===Ra?Ut=33190:fe.type===Cu?Ut=35056:Ut=33189:fe.type===oa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===Oa&&Ut===6402&&fe.type!==Og&&fe.type!==Ra&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=Ra,St=i.convert(fe.type)),fe.format===Iu&&Ut===6402&&(Ut=34041,fe.type!==Cu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=Cu,St=i.convert(fe.type))),zr&&(or?t.texStorage2D(3553,1,Ut,Ve.width,Ve.height):t.texImage2D(3553,0,Ut,Ve.width,Ve.height,0,Zt,St,null));else if(fe.isDataTexture)if(Fn.length>0&&jt){or&&zr&&t.texStorage2D(3553,Fe,Ut,Fn[0].width,Fn[0].height);for(let rt=0,Tt=Fn.length;rt<Tt;rt++)sn=Fn[rt],or?t.texSubImage2D(3553,rt,0,0,sn.width,sn.height,Zt,St,sn.data):t.texImage2D(3553,rt,Ut,sn.width,sn.height,0,Zt,St,sn.data);fe.generateMipmaps=!1}else or?(zr&&t.texStorage2D(3553,Fe,Ut,Ve.width,Ve.height),t.texSubImage2D(3553,0,0,0,Ve.width,Ve.height,Zt,St,Ve.data)):t.texImage2D(3553,0,Ut,Ve.width,Ve.height,0,Zt,St,Ve.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){or&&zr&&t.texStorage3D(35866,Fe,Ut,Fn[0].width,Fn[0].height,Ve.depth);for(let rt=0,Tt=Fn.length;rt<Tt;rt++)sn=Fn[rt],fe.format!==os?Zt!==null?or?t.compressedTexSubImage3D(35866,rt,0,0,0,sn.width,sn.height,Ve.depth,Zt,sn.data,0,0):t.compressedTexImage3D(35866,rt,Ut,sn.width,sn.height,Ve.depth,0,sn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):or?t.texSubImage3D(35866,rt,0,0,0,sn.width,sn.height,Ve.depth,Zt,St,sn.data):t.texImage3D(35866,rt,Ut,sn.width,sn.height,Ve.depth,0,Zt,St,sn.data)}else{or&&zr&&t.texStorage2D(3553,Fe,Ut,Fn[0].width,Fn[0].height);for(let rt=0,Tt=Fn.length;rt<Tt;rt++)sn=Fn[rt],fe.format!==os?Zt!==null?or?t.compressedTexSubImage2D(3553,rt,0,0,sn.width,sn.height,Zt,sn.data):t.compressedTexImage2D(3553,rt,Ut,sn.width,sn.height,0,sn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):or?t.texSubImage2D(3553,rt,0,0,sn.width,sn.height,Zt,St,sn.data):t.texImage2D(3553,rt,Ut,sn.width,sn.height,0,Zt,St,sn.data)}else if(fe.isDataArrayTexture)or?(zr&&t.texStorage3D(35866,Fe,Ut,Ve.width,Ve.height,Ve.depth),t.texSubImage3D(35866,0,0,0,0,Ve.width,Ve.height,Ve.depth,Zt,St,Ve.data)):t.texImage3D(35866,0,Ut,Ve.width,Ve.height,Ve.depth,0,Zt,St,Ve.data);else if(fe.isData3DTexture)or?(zr&&t.texStorage3D(32879,Fe,Ut,Ve.width,Ve.height,Ve.depth),t.texSubImage3D(32879,0,0,0,0,Ve.width,Ve.height,Ve.depth,Zt,St,Ve.data)):t.texImage3D(32879,0,Ut,Ve.width,Ve.height,Ve.depth,0,Zt,St,Ve.data);else if(fe.isFramebufferTexture){if(zr)if(or)t.texStorage2D(3553,Fe,Ut,Ve.width,Ve.height);else{let rt=Ve.width,Tt=Ve.height;for(let Qt=0;Qt<Fe;Qt++)t.texImage2D(3553,Qt,Ut,rt,Tt,0,Zt,St,null),rt>>=1,Tt>>=1}}else if(Fn.length>0&&jt){or&&zr&&t.texStorage2D(3553,Fe,Ut,Fn[0].width,Fn[0].height);for(let rt=0,Tt=Fn.length;rt<Tt;rt++)sn=Fn[rt],or?t.texSubImage2D(3553,rt,0,0,Zt,St,sn):t.texImage2D(3553,rt,Ut,Zt,St,sn);fe.generateMipmaps=!1}else or?(zr&&t.texStorage2D(3553,Fe,Ut,Ve.width,Ve.height),t.texSubImage2D(3553,0,0,0,Zt,St,Ve)):t.texImage2D(3553,0,Ut,Zt,St,Ve);ee(fe,jt)&&me(wt),bn.__version=Lt.version,fe.onUpdate&&fe.onUpdate(fe)}Ae.__version=fe.version}function Pn(Ae,fe,ot){if(fe.image.length!==6)return;const wt=In(Ae,fe),Et=fe.source;t.bindTexture(34067,Ae.__webglTexture,33984+ot);const Lt=n.get(Et);if(Et.version!==Lt.__version||wt===!0){t.activeTexture(33984+ot),o.pixelStorei(37440,fe.flipY),o.pixelStorei(37441,fe.premultiplyAlpha),o.pixelStorei(3317,fe.unpackAlignment),o.pixelStorei(37443,0);const bn=fe.isCompressedTexture||fe.image[0].isCompressedTexture,Ee=fe.image[0]&&fe.image[0].isDataTexture,Ve=[];for(let rt=0;rt<6;rt++)!bn&&!Ee?Ve[rt]=I(fe.image[rt],!1,!0,f):Ve[rt]=Ee?fe.image[rt].image:fe.image[rt],Ve[rt]=ir(fe,Ve[rt]);const jt=Ve[0],Zt=k(jt)||a,St=i.convert(fe.format,fe.encoding),Ut=i.convert(fe.type),sn=Z(fe.internalFormat,St,Ut,fe.encoding),Fn=a&&fe.isVideoTexture!==!0,or=Lt.__version===void 0||wt===!0;let zr=re(fe,jt,Zt);nt(34067,fe,Zt);let Fe;if(bn){Fn&&or&&t.texStorage2D(34067,zr,sn,jt.width,jt.height);for(let rt=0;rt<6;rt++){Fe=Ve[rt].mipmaps;for(let Tt=0;Tt<Fe.length;Tt++){const Qt=Fe[Tt];fe.format!==os?St!==null?Fn?t.compressedTexSubImage2D(34069+rt,Tt,0,0,Qt.width,Qt.height,St,Qt.data):t.compressedTexImage2D(34069+rt,Tt,sn,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fn?t.texSubImage2D(34069+rt,Tt,0,0,Qt.width,Qt.height,St,Ut,Qt.data):t.texImage2D(34069+rt,Tt,sn,Qt.width,Qt.height,0,St,Ut,Qt.data)}}}else{Fe=fe.mipmaps,Fn&&or&&(Fe.length>0&&zr++,t.texStorage2D(34067,zr,sn,Ve[0].width,Ve[0].height));for(let rt=0;rt<6;rt++)if(Ee){Fn?t.texSubImage2D(34069+rt,0,0,0,Ve[rt].width,Ve[rt].height,St,Ut,Ve[rt].data):t.texImage2D(34069+rt,0,sn,Ve[rt].width,Ve[rt].height,0,St,Ut,Ve[rt].data);for(let Tt=0;Tt<Fe.length;Tt++){const En=Fe[Tt].image[rt].image;Fn?t.texSubImage2D(34069+rt,Tt+1,0,0,En.width,En.height,St,Ut,En.data):t.texImage2D(34069+rt,Tt+1,sn,En.width,En.height,0,St,Ut,En.data)}}else{Fn?t.texSubImage2D(34069+rt,0,0,0,St,Ut,Ve[rt]):t.texImage2D(34069+rt,0,sn,St,Ut,Ve[rt]);for(let Tt=0;Tt<Fe.length;Tt++){const Qt=Fe[Tt];Fn?t.texSubImage2D(34069+rt,Tt+1,0,0,St,Ut,Qt.image[rt]):t.texImage2D(34069+rt,Tt+1,sn,St,Ut,Qt.image[rt])}}}ee(fe,Zt)&&me(34067),Lt.__version=Et.version,fe.onUpdate&&fe.onUpdate(fe)}Ae.__version=fe.version}function vt(Ae,fe,ot,wt,Et){const Lt=i.convert(ot.format,ot.encoding),bn=i.convert(ot.type),Ee=Z(ot.internalFormat,Lt,bn,ot.encoding);n.get(fe).__hasExternalTextures||(Et===32879||Et===35866?t.texImage3D(Et,0,Ee,fe.width,fe.height,fe.depth,0,Lt,bn,null):t.texImage2D(Et,0,Ee,fe.width,fe.height,0,Lt,bn,null)),t.bindFramebuffer(36160,Ae),xn(fe)?d.framebufferTexture2DMultisampleEXT(36160,wt,Et,n.get(ot).__webglTexture,0,qr(fe)):(Et===3553||Et>=34069&&Et<=34074)&&o.framebufferTexture2D(36160,wt,Et,n.get(ot).__webglTexture,0),t.bindFramebuffer(36160,null)}function dn(Ae,fe,ot){if(o.bindRenderbuffer(36161,Ae),fe.depthBuffer&&!fe.stencilBuffer){let wt=33189;if(ot||xn(fe)){const Et=fe.depthTexture;Et&&Et.isDepthTexture&&(Et.type===oa?wt=36012:Et.type===Ra&&(wt=33190));const Lt=qr(fe);xn(fe)?d.renderbufferStorageMultisampleEXT(36161,Lt,wt,fe.width,fe.height):o.renderbufferStorageMultisample(36161,Lt,wt,fe.width,fe.height)}else o.renderbufferStorage(36161,wt,fe.width,fe.height);o.framebufferRenderbuffer(36160,36096,36161,Ae)}else if(fe.depthBuffer&&fe.stencilBuffer){const wt=qr(fe);ot&&xn(fe)===!1?o.renderbufferStorageMultisample(36161,wt,35056,fe.width,fe.height):xn(fe)?d.renderbufferStorageMultisampleEXT(36161,wt,35056,fe.width,fe.height):o.renderbufferStorage(36161,34041,fe.width,fe.height),o.framebufferRenderbuffer(36160,33306,36161,Ae)}else{const wt=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Et=0;Et<wt.length;Et++){const Lt=wt[Et],bn=i.convert(Lt.format,Lt.encoding),Ee=i.convert(Lt.type),Ve=Z(Lt.internalFormat,bn,Ee,Lt.encoding),jt=qr(fe);ot&&xn(fe)===!1?o.renderbufferStorageMultisample(36161,jt,Ve,fe.width,fe.height):xn(fe)?d.renderbufferStorageMultisampleEXT(36161,jt,Ve,fe.width,fe.height):o.renderbufferStorage(36161,Ve,fe.width,fe.height)}}o.bindRenderbuffer(36161,null)}function Yt(Ae,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Ae),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),Qe(fe.depthTexture,0);const wt=n.get(fe.depthTexture).__webglTexture,Et=qr(fe);if(fe.depthTexture.format===Oa)xn(fe)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,wt,0,Et):o.framebufferTexture2D(36160,36096,3553,wt,0);else if(fe.depthTexture.format===Iu)xn(fe)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,wt,0,Et):o.framebufferTexture2D(36160,33306,3553,wt,0);else throw new Error("Unknown depthTexture format")}function yn(Ae){const fe=n.get(Ae),ot=Ae.isWebGLCubeRenderTarget===!0;if(Ae.depthTexture&&!fe.__autoAllocateDepthBuffer){if(ot)throw new Error("target.depthTexture not supported in Cube render targets");Yt(fe.__webglFramebuffer,Ae)}else if(ot){fe.__webglDepthbuffer=[];for(let wt=0;wt<6;wt++)t.bindFramebuffer(36160,fe.__webglFramebuffer[wt]),fe.__webglDepthbuffer[wt]=o.createRenderbuffer(),dn(fe.__webglDepthbuffer[wt],Ae,!1)}else t.bindFramebuffer(36160,fe.__webglFramebuffer),fe.__webglDepthbuffer=o.createRenderbuffer(),dn(fe.__webglDepthbuffer,Ae,!1);t.bindFramebuffer(36160,null)}function Cr(Ae,fe,ot){const wt=n.get(Ae);fe!==void 0&&vt(wt.__webglFramebuffer,Ae,Ae.texture,36064,3553),ot!==void 0&&yn(Ae)}function Qr(Ae){const fe=Ae.texture,ot=n.get(Ae),wt=n.get(fe);Ae.addEventListener("dispose",Pe),Ae.isWebGLMultipleRenderTargets!==!0&&(wt.__webglTexture===void 0&&(wt.__webglTexture=o.createTexture()),wt.__version=fe.version,s.memory.textures++);const Et=Ae.isWebGLCubeRenderTarget===!0,Lt=Ae.isWebGLMultipleRenderTargets===!0,bn=k(Ae)||a;if(Et){ot.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)ot.__webglFramebuffer[Ee]=o.createFramebuffer()}else{if(ot.__webglFramebuffer=o.createFramebuffer(),Lt)if(r.drawBuffers){const Ee=Ae.texture;for(let Ve=0,jt=Ee.length;Ve<jt;Ve++){const Zt=n.get(Ee[Ve]);Zt.__webglTexture===void 0&&(Zt.__webglTexture=o.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Ae.samples>0&&xn(Ae)===!1){const Ee=Lt?fe:[fe];ot.__webglMultisampledFramebuffer=o.createFramebuffer(),ot.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ot.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Ee.length;Ve++){const jt=Ee[Ve];ot.__webglColorRenderbuffer[Ve]=o.createRenderbuffer(),o.bindRenderbuffer(36161,ot.__webglColorRenderbuffer[Ve]);const Zt=i.convert(jt.format,jt.encoding),St=i.convert(jt.type),Ut=Z(jt.internalFormat,Zt,St,jt.encoding,Ae.isXRRenderTarget===!0),sn=qr(Ae);o.renderbufferStorageMultisample(36161,sn,Ut,Ae.width,Ae.height),o.framebufferRenderbuffer(36160,36064+Ve,36161,ot.__webglColorRenderbuffer[Ve])}o.bindRenderbuffer(36161,null),Ae.depthBuffer&&(ot.__webglDepthRenderbuffer=o.createRenderbuffer(),dn(ot.__webglDepthRenderbuffer,Ae,!0)),t.bindFramebuffer(36160,null)}}if(Et){t.bindTexture(34067,wt.__webglTexture),nt(34067,fe,bn);for(let Ee=0;Ee<6;Ee++)vt(ot.__webglFramebuffer[Ee],Ae,fe,36064,34069+Ee);ee(fe,bn)&&me(34067),t.unbindTexture()}else if(Lt){const Ee=Ae.texture;for(let Ve=0,jt=Ee.length;Ve<jt;Ve++){const Zt=Ee[Ve],St=n.get(Zt);t.bindTexture(3553,St.__webglTexture),nt(3553,Zt,bn),vt(ot.__webglFramebuffer,Ae,Zt,36064+Ve,3553),ee(Zt,bn)&&me(3553)}t.unbindTexture()}else{let Ee=3553;(Ae.isWebGL3DRenderTarget||Ae.isWebGLArrayRenderTarget)&&(a?Ee=Ae.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ee,wt.__webglTexture),nt(Ee,fe,bn),vt(ot.__webglFramebuffer,Ae,fe,36064,Ee),ee(fe,bn)&&me(Ee),t.unbindTexture()}Ae.depthBuffer&&yn(Ae)}function Ai(Ae){const fe=k(Ae)||a,ot=Ae.isWebGLMultipleRenderTargets===!0?Ae.texture:[Ae.texture];for(let wt=0,Et=ot.length;wt<Et;wt++){const Lt=ot[wt];if(ee(Lt,fe)){const bn=Ae.isWebGLCubeRenderTarget?34067:3553,Ee=n.get(Lt).__webglTexture;t.bindTexture(bn,Ee),me(bn),t.unbindTexture()}}}function oi(Ae){if(a&&Ae.samples>0&&xn(Ae)===!1){const fe=Ae.isWebGLMultipleRenderTargets?Ae.texture:[Ae.texture],ot=Ae.width,wt=Ae.height;let Et=16384;const Lt=[],bn=Ae.stencilBuffer?33306:36096,Ee=n.get(Ae),Ve=Ae.isWebGLMultipleRenderTargets===!0;if(Ve)for(let jt=0;jt<fe.length;jt++)t.bindFramebuffer(36160,Ee.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064+jt,36161,null),t.bindFramebuffer(36160,Ee.__webglFramebuffer),o.framebufferTexture2D(36009,36064+jt,3553,null,0);t.bindFramebuffer(36008,Ee.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ee.__webglFramebuffer);for(let jt=0;jt<fe.length;jt++){Lt.push(36064+jt),Ae.depthBuffer&&Lt.push(bn);const Zt=Ee.__ignoreDepthValues!==void 0?Ee.__ignoreDepthValues:!1;if(Zt===!1&&(Ae.depthBuffer&&(Et|=256),Ae.stencilBuffer&&(Et|=1024)),Ve&&o.framebufferRenderbuffer(36008,36064,36161,Ee.__webglColorRenderbuffer[jt]),Zt===!0&&(o.invalidateFramebuffer(36008,[bn]),o.invalidateFramebuffer(36009,[bn])),Ve){const St=n.get(fe[jt]).__webglTexture;o.framebufferTexture2D(36009,36064,3553,St,0)}o.blitFramebuffer(0,0,ot,wt,0,0,ot,wt,Et,9728),_&&o.invalidateFramebuffer(36008,Lt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ve)for(let jt=0;jt<fe.length;jt++){t.bindFramebuffer(36160,Ee.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064+jt,36161,Ee.__webglColorRenderbuffer[jt]);const Zt=n.get(fe[jt]).__webglTexture;t.bindFramebuffer(36160,Ee.__webglFramebuffer),o.framebufferTexture2D(36009,36064+jt,3553,Zt,0)}t.bindFramebuffer(36009,Ee.__webglMultisampledFramebuffer)}}function qr(Ae){return Math.min(p,Ae.samples)}function xn(Ae){const fe=n.get(Ae);return a&&Ae.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function ei(Ae){const fe=s.render.frame;A.get(Ae)!==fe&&(A.set(Ae,fe),Ae.update())}function ir(Ae,fe){const ot=Ae.encoding,wt=Ae.format,Et=Ae.type;return Ae.isCompressedTexture===!0||Ae.isVideoTexture===!0||Ae.format===yd||ot!==za&&(ot===Vi?a===!1?e.has("EXT_sRGB")===!0&&wt===os?(Ae.format=yd,Ae.minFilter=qo,Ae.generateMipmaps=!1):fe=Wg.sRGBToLinear(fe):(wt!==os||Et!==ja)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ot)),fe}this.allocateTextureUnit=j,this.resetTextureUnits=He,this.setTexture2D=Qe,this.setTexture2DArray=Je,this.setTexture3D=ze,this.setTextureCube=ut,this.rebindTextures=Cr,this.setupRenderTarget=Qr,this.updateRenderTargetMipmap=Ai,this.updateMultisampleRenderTarget=oi,this.setupDepthRenderbuffer=yn,this.setupFrameBufferTexture=vt,this.useMultisampledRTT=xn}function iB(o,e,t){const n=t.isWebGL2;function r(i,s=null){let a;if(i===ja)return 5121;if(i===OE)return 32819;if(i===NE)return 32820;if(i===PE)return 5120;if(i===FE)return 5122;if(i===Og)return 5123;if(i===LE)return 5124;if(i===Ra)return 5125;if(i===oa)return 5126;if(i===Ec)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(i===UE)return 6406;if(i===os)return 6408;if(i===kE)return 6409;if(i===HE)return 6410;if(i===Oa)return 6402;if(i===Iu)return 34041;if(i===GE)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(i===yd)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(i===WE)return 6403;if(i===VE)return 36244;if(i===jE)return 33319;if(i===zE)return 33320;if(i===KE)return 36249;if(i===gf||i===yf||i===vf||i===Af)if(s===Vi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===gf)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===yf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===vf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Af)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===gf)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===yf)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===vf)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Af)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===am||i===um||i===cm||i===lm)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===am)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===um)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===cm)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===lm)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===JE)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===fm||i===dm)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===fm)return s===Vi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===dm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===hm||i===pm||i===mm||i===_m||i===gm||i===ym||i===vm||i===Am||i===bm||i===Em||i===Tm||i===wm||i===Cm||i===Sm)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===hm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===pm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===mm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===_m)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===gm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ym)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===vm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Am)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===bm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Em)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Tm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===wm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Cm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Sm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Bm)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===Bm)return s===Vi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return i===Cu?n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):o[i]!==void 0?o[i]:null}return{convert:r}}class oB extends Ho{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Pa extends oo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sB={type:"move"};class Kf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Pa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Pa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Pa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const E of e.hand.values()){const v=t.getJointPose(E,n),T=this._getHandJoint(f,E);v!==null&&(T.matrix.fromArray(v.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=v.radius),T.visible=v!==null}const l=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],d=l.position.distanceTo(p.position),_=.02,A=.005;f.inputState.pinching&&d>_+A?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&d<=_-A&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),i!==null&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&i!==null&&(r=i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(sB)))}return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=i!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Pa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class aB extends Bo{constructor(e,t,n,r,i,s,a,u,f,l){if(l=l!==void 0?l:Oa,l!==Oa&&l!==Iu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&l===Oa&&(n=Ra),n===void 0&&l===Iu&&(n=Cu),super(null,r,i,s,a,u,l,n,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:To,this.minFilter=u!==void 0?u:To,this.flipY=!1,this.generateMipmaps=!1}}class uB extends Ya{constructor(e,t){super();const n=this;let r=null,i=1,s=null,a="local-floor",u=null,f=null,l=null,p=null,d=null,_=null;const A=t.getContextAttributes();let E=null,v=null;const T=[],P=[],I=new Set,k=new Map,K=new Ho;K.layers.enable(1),K.viewport=new Yi;const ee=new Ho;ee.layers.enable(2),ee.viewport=new Yi;const me=[K,ee],Z=new oB;Z.layers.enable(1),Z.layers.enable(2);let re=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Je){let ze=T[Je];return ze===void 0&&(ze=new Kf,T[Je]=ze),ze.getTargetRaySpace()},this.getControllerGrip=function(Je){let ze=T[Je];return ze===void 0&&(ze=new Kf,T[Je]=ze),ze.getGripSpace()},this.getHand=function(Je){let ze=T[Je];return ze===void 0&&(ze=new Kf,T[Je]=ze),ze.getHandSpace()};function Ie(Je){const ze=P.indexOf(Je.inputSource);if(ze===-1)return;const ut=T[ze];ut!==void 0&&ut.dispatchEvent({type:Je.type,data:Je.inputSource})}function Pe(){r.removeEventListener("select",Ie),r.removeEventListener("selectstart",Ie),r.removeEventListener("selectend",Ie),r.removeEventListener("squeeze",Ie),r.removeEventListener("squeezestart",Ie),r.removeEventListener("squeezeend",Ie),r.removeEventListener("end",Pe),r.removeEventListener("inputsourceschange",we);for(let Je=0;Je<T.length;Je++){const ze=P[Je];ze!==null&&(P[Je]=null,T[Je].disconnect(ze))}re=null,de=null,e.setRenderTarget(E),d=null,p=null,l=null,r=null,v=null,Qe.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Je){i=Je,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Je){a=Je,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Je){u=Je},this.getBaseLayer=function(){return p!==null?p:d},this.getBinding=function(){return l},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(Je){if(r=Je,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",Ie),r.addEventListener("selectstart",Ie),r.addEventListener("selectend",Ie),r.addEventListener("squeeze",Ie),r.addEventListener("squeezestart",Ie),r.addEventListener("squeezeend",Ie),r.addEventListener("end",Pe),r.addEventListener("inputsourceschange",we),A.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ze={antialias:r.renderState.layers===void 0?A.antialias:!0,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,ze),r.updateRenderState({baseLayer:d}),v=new Ka(d.framebufferWidth,d.framebufferHeight,{format:os,type:ja,encoding:e.outputEncoding,stencilBuffer:A.stencil})}else{let ze=null,ut=null,ke=null;A.depth&&(ke=A.stencil?35056:33190,ze=A.stencil?Iu:Oa,ut=A.stencil?Cu:Ra);const L={colorFormat:32856,depthFormat:ke,scaleFactor:i};l=new XRWebGLBinding(r,t),p=l.createProjectionLayer(L),r.updateRenderState({layers:[p]}),v=new Ka(p.textureWidth,p.textureHeight,{format:os,type:ja,depthTexture:new aB(p.textureWidth,p.textureHeight,ut,void 0,void 0,void 0,void 0,void 0,void 0,ze),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0});const nt=e.properties.get(v);nt.__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),u=null,s=await r.requestReferenceSpace(a),Qe.setContext(r),Qe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function we(Je){for(let ze=0;ze<Je.removed.length;ze++){const ut=Je.removed[ze],ke=P.indexOf(ut);ke>=0&&(P[ke]=null,T[ke].disconnect(ut))}for(let ze=0;ze<Je.added.length;ze++){const ut=Je.added[ze];let ke=P.indexOf(ut);if(ke===-1){for(let nt=0;nt<T.length;nt++)if(nt>=P.length){P.push(ut),ke=nt;break}else if(P[nt]===null){P[nt]=ut,ke=nt;break}if(ke===-1)break}const L=T[ke];L&&L.connect(ut)}}const Te=new Ge,Se=new Ge;function Oe(Je,ze,ut){Te.setFromMatrixPosition(ze.matrixWorld),Se.setFromMatrixPosition(ut.matrixWorld);const ke=Te.distanceTo(Se),L=ze.projectionMatrix.elements,nt=ut.projectionMatrix.elements,In=L[14]/(L[10]-1),Xt=L[14]/(L[10]+1),Pn=(L[9]+1)/L[5],vt=(L[9]-1)/L[5],dn=(L[8]-1)/L[0],Yt=(nt[8]+1)/nt[0],yn=In*dn,Cr=In*Yt,Qr=ke/(-dn+Yt),Ai=Qr*-dn;ze.matrixWorld.decompose(Je.position,Je.quaternion,Je.scale),Je.translateX(Ai),Je.translateZ(Qr),Je.matrixWorld.compose(Je.position,Je.quaternion,Je.scale),Je.matrixWorldInverse.copy(Je.matrixWorld).invert();const oi=In+Qr,qr=Xt+Qr,xn=yn-Ai,ei=Cr+(ke-Ai),ir=Pn*Xt/qr*oi,Ae=vt*Xt/qr*oi;Je.projectionMatrix.makePerspective(xn,ei,ir,Ae,oi,qr)}function He(Je,ze){ze===null?Je.matrixWorld.copy(Je.matrix):Je.matrixWorld.multiplyMatrices(ze.matrixWorld,Je.matrix),Je.matrixWorldInverse.copy(Je.matrixWorld).invert()}this.updateCamera=function(Je){if(r===null)return;Z.near=ee.near=K.near=Je.near,Z.far=ee.far=K.far=Je.far,(re!==Z.near||de!==Z.far)&&(r.updateRenderState({depthNear:Z.near,depthFar:Z.far}),re=Z.near,de=Z.far);const ze=Je.parent,ut=Z.cameras;He(Z,ze);for(let L=0;L<ut.length;L++)He(ut[L],ze);Z.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Je.matrix.copy(Z.matrix),Je.matrix.decompose(Je.position,Je.quaternion,Je.scale);const ke=Je.children;for(let L=0,nt=ke.length;L<nt;L++)ke[L].updateMatrixWorld(!0);ut.length===2?Oe(Z,K,ee):Z.projectionMatrix.copy(K.projectionMatrix)},this.getCamera=function(){return Z},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(Je){p!==null&&(p.fixedFoveation=Je),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Je)},this.getPlanes=function(){return I};let j=null;function ht(Je,ze){if(f=ze.getViewerPose(u||s),_=ze,f!==null){const ut=f.views;d!==null&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let ke=!1;ut.length!==Z.cameras.length&&(Z.cameras.length=0,ke=!0);for(let L=0;L<ut.length;L++){const nt=ut[L];let In=null;if(d!==null)In=d.getViewport(nt);else{const Pn=l.getViewSubImage(p,nt);In=Pn.viewport,L===0&&(e.setRenderTargetTextures(v,Pn.colorTexture,p.ignoreDepthValues?void 0:Pn.depthStencilTexture),e.setRenderTarget(v))}let Xt=me[L];Xt===void 0&&(Xt=new Ho,Xt.layers.enable(L),Xt.viewport=new Yi,me[L]=Xt),Xt.matrix.fromArray(nt.transform.matrix),Xt.projectionMatrix.fromArray(nt.projectionMatrix),Xt.viewport.set(In.x,In.y,In.width,In.height),L===0&&Z.matrix.copy(Xt.matrix),ke===!0&&Z.cameras.push(Xt)}}for(let ut=0;ut<T.length;ut++){const ke=P[ut],L=T[ut];ke!==null&&L!==void 0&&L.update(ke,ze,u||s)}if(j&&j(Je,ze),ze.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:ze.detectedPlanes});let ut=null;for(const ke of I)ze.detectedPlanes.has(ke)||(ut===null&&(ut=[]),ut.push(ke));if(ut!==null)for(const ke of ut)I.delete(ke),k.delete(ke),n.dispatchEvent({type:"planeremoved",data:ke});for(const ke of ze.detectedPlanes)if(!I.has(ke))I.add(ke),k.set(ke,ze.lastChangedTime),n.dispatchEvent({type:"planeadded",data:ke});else{const L=k.get(ke);ke.lastChangedTime>L&&(k.set(ke,ke.lastChangedTime),n.dispatchEvent({type:"planechanged",data:ke}))}}_=null}const Qe=new $g;Qe.setAnimationLoop(ht),this.setAnimationLoop=function(Je){j=Je},this.dispose=function(){}}}function cB(o,e){function t(E,v){v.color.getRGB(E.fogColor.value,qg(o)),v.isFog?(E.fogNear.value=v.near,E.fogFar.value=v.far):v.isFogExp2&&(E.fogDensity.value=v.density)}function n(E,v,T,P,I){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(E,v):v.isMeshToonMaterial?(r(E,v),l(E,v)):v.isMeshPhongMaterial?(r(E,v),f(E,v)):v.isMeshStandardMaterial?(r(E,v),p(E,v),v.isMeshPhysicalMaterial&&d(E,v,I)):v.isMeshMatcapMaterial?(r(E,v),_(E,v)):v.isMeshDepthMaterial?r(E,v):v.isMeshDistanceMaterial?(r(E,v),A(E,v)):v.isMeshNormalMaterial?r(E,v):v.isLineBasicMaterial?(i(E,v),v.isLineDashedMaterial&&s(E,v)):v.isPointsMaterial?a(E,v,T,P):v.isSpriteMaterial?u(E,v):v.isShadowMaterial?(E.color.value.copy(v.color),E.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(E,v){E.opacity.value=v.opacity,v.color&&E.diffuse.value.copy(v.color),v.emissive&&E.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(E.map.value=v.map),v.alphaMap&&(E.alphaMap.value=v.alphaMap),v.bumpMap&&(E.bumpMap.value=v.bumpMap,E.bumpScale.value=v.bumpScale,v.side===cs&&(E.bumpScale.value*=-1)),v.displacementMap&&(E.displacementMap.value=v.displacementMap,E.displacementScale.value=v.displacementScale,E.displacementBias.value=v.displacementBias),v.emissiveMap&&(E.emissiveMap.value=v.emissiveMap),v.normalMap&&(E.normalMap.value=v.normalMap,E.normalScale.value.copy(v.normalScale),v.side===cs&&E.normalScale.value.negate()),v.specularMap&&(E.specularMap.value=v.specularMap),v.alphaTest>0&&(E.alphaTest.value=v.alphaTest);const T=e.get(v).envMap;if(T&&(E.envMap.value=T,E.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=v.reflectivity,E.ior.value=v.ior,E.refractionRatio.value=v.refractionRatio),v.lightMap){E.lightMap.value=v.lightMap;const k=o.physicallyCorrectLights!==!0?Math.PI:1;E.lightMapIntensity.value=v.lightMapIntensity*k}v.aoMap&&(E.aoMap.value=v.aoMap,E.aoMapIntensity.value=v.aoMapIntensity);let P;v.map?P=v.map:v.specularMap?P=v.specularMap:v.displacementMap?P=v.displacementMap:v.normalMap?P=v.normalMap:v.bumpMap?P=v.bumpMap:v.roughnessMap?P=v.roughnessMap:v.metalnessMap?P=v.metalnessMap:v.alphaMap?P=v.alphaMap:v.emissiveMap?P=v.emissiveMap:v.clearcoatMap?P=v.clearcoatMap:v.clearcoatNormalMap?P=v.clearcoatNormalMap:v.clearcoatRoughnessMap?P=v.clearcoatRoughnessMap:v.iridescenceMap?P=v.iridescenceMap:v.iridescenceThicknessMap?P=v.iridescenceThicknessMap:v.specularIntensityMap?P=v.specularIntensityMap:v.specularColorMap?P=v.specularColorMap:v.transmissionMap?P=v.transmissionMap:v.thicknessMap?P=v.thicknessMap:v.sheenColorMap?P=v.sheenColorMap:v.sheenRoughnessMap&&(P=v.sheenRoughnessMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),E.uvTransform.value.copy(P.matrix));let I;v.aoMap?I=v.aoMap:v.lightMap&&(I=v.lightMap),I!==void 0&&(I.isWebGLRenderTarget&&(I=I.texture),I.matrixAutoUpdate===!0&&I.updateMatrix(),E.uv2Transform.value.copy(I.matrix))}function i(E,v){E.diffuse.value.copy(v.color),E.opacity.value=v.opacity}function s(E,v){E.dashSize.value=v.dashSize,E.totalSize.value=v.dashSize+v.gapSize,E.scale.value=v.scale}function a(E,v,T,P){E.diffuse.value.copy(v.color),E.opacity.value=v.opacity,E.size.value=v.size*T,E.scale.value=P*.5,v.map&&(E.map.value=v.map),v.alphaMap&&(E.alphaMap.value=v.alphaMap),v.alphaTest>0&&(E.alphaTest.value=v.alphaTest);let I;v.map?I=v.map:v.alphaMap&&(I=v.alphaMap),I!==void 0&&(I.matrixAutoUpdate===!0&&I.updateMatrix(),E.uvTransform.value.copy(I.matrix))}function u(E,v){E.diffuse.value.copy(v.color),E.opacity.value=v.opacity,E.rotation.value=v.rotation,v.map&&(E.map.value=v.map),v.alphaMap&&(E.alphaMap.value=v.alphaMap),v.alphaTest>0&&(E.alphaTest.value=v.alphaTest);let T;v.map?T=v.map:v.alphaMap&&(T=v.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),E.uvTransform.value.copy(T.matrix))}function f(E,v){E.specular.value.copy(v.specular),E.shininess.value=Math.max(v.shininess,1e-4)}function l(E,v){v.gradientMap&&(E.gradientMap.value=v.gradientMap)}function p(E,v){E.roughness.value=v.roughness,E.metalness.value=v.metalness,v.roughnessMap&&(E.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(E.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(E.envMapIntensity.value=v.envMapIntensity)}function d(E,v,T){E.ior.value=v.ior,v.sheen>0&&(E.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),E.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(E.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(E.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(E.clearcoat.value=v.clearcoat,E.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(E.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(E.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),E.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===cs&&E.clearcoatNormalScale.value.negate())),v.iridescence>0&&(E.iridescence.value=v.iridescence,E.iridescenceIOR.value=v.iridescenceIOR,E.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(E.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(E.transmission.value=v.transmission,E.transmissionSamplerMap.value=T.texture,E.transmissionSamplerSize.value.set(T.width,T.height),v.transmissionMap&&(E.transmissionMap.value=v.transmissionMap),E.thickness.value=v.thickness,v.thicknessMap&&(E.thicknessMap.value=v.thicknessMap),E.attenuationDistance.value=v.attenuationDistance,E.attenuationColor.value.copy(v.attenuationColor)),E.specularIntensity.value=v.specularIntensity,E.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(E.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(E.specularColorMap.value=v.specularColorMap)}function _(E,v){v.matcap&&(E.matcap.value=v.matcap)}function A(E,v){E.referencePosition.value.copy(v.referencePosition),E.nearDistance.value=v.nearDistance,E.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function lB(o,e,t,n){let r={},i={},s=[];const a=t.isWebGL2?o.getParameter(35375):0;function u(P,I){const k=I.program;n.uniformBlockBinding(P,k)}function f(P,I){let k=r[P.id];k===void 0&&(A(P),k=l(P),r[P.id]=k,P.addEventListener("dispose",v));const K=I.program;n.updateUBOMapping(P,K);const ee=e.render.frame;i[P.id]!==ee&&(d(P),i[P.id]=ee)}function l(P){const I=p();P.__bindingPointIndex=I;const k=o.createBuffer(),K=P.__size,ee=P.usage;return o.bindBuffer(35345,k),o.bufferData(35345,K,ee),o.bindBuffer(35345,null),o.bindBufferBase(35345,I,k),k}function p(){for(let P=0;P<a;P++)if(s.indexOf(P)===-1)return s.push(P),P;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(P){const I=r[P.id],k=P.uniforms,K=P.__cache;o.bindBuffer(35345,I);for(let ee=0,me=k.length;ee<me;ee++){const Z=k[ee];if(_(Z,ee,K)===!0){const re=Z.__offset,de=Array.isArray(Z.value)?Z.value:[Z.value];let Ie=0;for(let Pe=0;Pe<de.length;Pe++){const we=de[Pe],Te=E(we);typeof we=="number"?(Z.__data[0]=we,o.bufferSubData(35345,re+Ie,Z.__data)):we.isMatrix3?(Z.__data[0]=we.elements[0],Z.__data[1]=we.elements[1],Z.__data[2]=we.elements[2],Z.__data[3]=we.elements[0],Z.__data[4]=we.elements[3],Z.__data[5]=we.elements[4],Z.__data[6]=we.elements[5],Z.__data[7]=we.elements[0],Z.__data[8]=we.elements[6],Z.__data[9]=we.elements[7],Z.__data[10]=we.elements[8],Z.__data[11]=we.elements[0]):(we.toArray(Z.__data,Ie),Ie+=Te.storage/Float32Array.BYTES_PER_ELEMENT)}o.bufferSubData(35345,re,Z.__data)}}o.bindBuffer(35345,null)}function _(P,I,k){const K=P.value;if(k[I]===void 0){if(typeof K=="number")k[I]=K;else{const ee=Array.isArray(K)?K:[K],me=[];for(let Z=0;Z<ee.length;Z++)me.push(ee[Z].clone());k[I]=me}return!0}else if(typeof K=="number"){if(k[I]!==K)return k[I]=K,!0}else{const ee=Array.isArray(k[I])?k[I]:[k[I]],me=Array.isArray(K)?K:[K];for(let Z=0;Z<ee.length;Z++){const re=ee[Z];if(re.equals(me[Z])===!1)return re.copy(me[Z]),!0}}return!1}function A(P){const I=P.uniforms;let k=0;const K=16;let ee=0;for(let me=0,Z=I.length;me<Z;me++){const re=I[me],de={boundary:0,storage:0},Ie=Array.isArray(re.value)?re.value:[re.value];for(let Pe=0,we=Ie.length;Pe<we;Pe++){const Te=Ie[Pe],Se=E(Te);de.boundary+=Se.boundary,de.storage+=Se.storage}if(re.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=k,me>0){ee=k%K;const Pe=K-ee;ee!==0&&Pe-de.boundary<0&&(k+=K-ee,re.__offset=k)}k+=de.storage}return ee=k%K,ee>0&&(k+=K-ee),P.__size=k,P.__cache={},this}function E(P){const I={boundary:0,storage:0};return typeof P=="number"?(I.boundary=4,I.storage=4):P.isVector2?(I.boundary=8,I.storage=8):P.isVector3||P.isColor?(I.boundary=16,I.storage=12):P.isVector4?(I.boundary=16,I.storage=16):P.isMatrix3?(I.boundary=48,I.storage=48):P.isMatrix4?(I.boundary=64,I.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),I}function v(P){const I=P.target;I.removeEventListener("dispose",v);const k=s.indexOf(I.__bindingPointIndex);s.splice(k,1),o.deleteBuffer(r[I.id]),delete r[I.id],delete i[I.id]}function T(){for(const P in r)o.deleteBuffer(r[P]);s=[],r={},i={}}return{bind:u,update:f,dispose:T}}function fB(){const o=Sc("canvas");return o.style.display="block",o}function ny(o={}){this.isWebGLRenderer=!0;const e=o.canvas!==void 0?o.canvas:fB(),t=o.context!==void 0?o.context:null,n=o.depth!==void 0?o.depth:!0,r=o.stencil!==void 0?o.stencil:!0,i=o.antialias!==void 0?o.antialias:!1,s=o.premultipliedAlpha!==void 0?o.premultipliedAlpha:!0,a=o.preserveDrawingBuffer!==void 0?o.preserveDrawingBuffer:!1,u=o.powerPreference!==void 0?o.powerPreference:"default",f=o.failIfMajorPerformanceCaveat!==void 0?o.failIfMajorPerformanceCaveat:!1;let l;t!==null?l=t.getContextAttributes().alpha:l=o.alpha!==void 0?o.alpha:!1;let p=null,d=null;const _=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=za,this.physicallyCorrectLights=!1,this.toneMapping=js,this.toneMappingExposure=1;const E=this;let v=!1,T=0,P=0,I=null,k=-1,K=null;const ee=new Yi,me=new Yi;let Z=null,re=e.width,de=e.height,Ie=1,Pe=null,we=null;const Te=new Yi(0,0,re,de),Se=new Yi(0,0,re,de);let Oe=!1;const He=new wh;let j=!1,ht=!1,Qe=null;const Je=new Ei,ze=new Yr,ut=new Ge,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function L(){return I===null?Ie:1}let nt=t;function In(ge,qe){for(let at=0;at<ge.length;at++){const Ne=ge[at],ft=e.getContext(Ne,qe);if(ft!==null)return ft}return null}try{const ge={alpha:!0,depth:n,stencil:r,antialias:i,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${bh}`),e.addEventListener("webglcontextlost",Ut,!1),e.addEventListener("webglcontextrestored",sn,!1),e.addEventListener("webglcontextcreationerror",Fn,!1),nt===null){const qe=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&qe.shift(),nt=In(qe,ge),nt===null)throw In(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}nt.getShaderPrecisionFormat===void 0&&(nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){throw console.error("THREE.WebGLRenderer: "+ge.message),ge}let Xt,Pn,vt,dn,Yt,yn,Cr,Qr,Ai,oi,qr,xn,ei,ir,Ae,fe,ot,wt,Et,Lt,bn,Ee,Ve,jt;function Zt(){Xt=new ES(nt),Pn=new _S(nt,Xt,o),Xt.init(Pn),Ee=new iB(nt,Xt,Pn),vt=new nB(nt,Xt,Pn),dn=new CS,Yt=new W1,yn=new rB(nt,Xt,vt,Yt,Pn,Ee,dn),Cr=new yS(E),Qr=new bS(E),Ai=new FT(nt,Pn),Ve=new pS(nt,Xt,Ai,Pn),oi=new TS(nt,Ai,dn,Ve),qr=new MS(nt,oi,Ai,dn),Et=new xS(nt,Pn,yn),fe=new gS(Yt),xn=new H1(E,Cr,Qr,Xt,Pn,Ve,fe),ei=new cB(E,Yt),ir=new j1,Ae=new Y1(Xt,Pn),wt=new hS(E,Cr,Qr,vt,qr,l,s),ot=new tB(E,qr,Pn),jt=new lB(nt,dn,Pn,vt),Lt=new mS(nt,Xt,dn,Pn),bn=new wS(nt,Xt,dn,Pn),dn.programs=xn.programs,E.capabilities=Pn,E.extensions=Xt,E.properties=Yt,E.renderLists=ir,E.shadowMap=ot,E.state=vt,E.info=dn}Zt();const St=new uB(E,nt);this.xr=St,this.getContext=function(){return nt},this.getContextAttributes=function(){return nt.getContextAttributes()},this.forceContextLoss=function(){const ge=Xt.get("WEBGL_lose_context");ge&&ge.loseContext()},this.forceContextRestore=function(){const ge=Xt.get("WEBGL_lose_context");ge&&ge.restoreContext()},this.getPixelRatio=function(){return Ie},this.setPixelRatio=function(ge){ge!==void 0&&(Ie=ge,this.setSize(re,de,!1))},this.getSize=function(ge){return ge.set(re,de)},this.setSize=function(ge,qe,at){if(St.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}re=ge,de=qe,e.width=Math.floor(ge*Ie),e.height=Math.floor(qe*Ie),at!==!1&&(e.style.width=ge+"px",e.style.height=qe+"px"),this.setViewport(0,0,ge,qe)},this.getDrawingBufferSize=function(ge){return ge.set(re*Ie,de*Ie).floor()},this.setDrawingBufferSize=function(ge,qe,at){re=ge,de=qe,Ie=at,e.width=Math.floor(ge*at),e.height=Math.floor(qe*at),this.setViewport(0,0,ge,qe)},this.getCurrentViewport=function(ge){return ge.copy(ee)},this.getViewport=function(ge){return ge.copy(Te)},this.setViewport=function(ge,qe,at,Ne){ge.isVector4?Te.set(ge.x,ge.y,ge.z,ge.w):Te.set(ge,qe,at,Ne),vt.viewport(ee.copy(Te).multiplyScalar(Ie).floor())},this.getScissor=function(ge){return ge.copy(Se)},this.setScissor=function(ge,qe,at,Ne){ge.isVector4?Se.set(ge.x,ge.y,ge.z,ge.w):Se.set(ge,qe,at,Ne),vt.scissor(me.copy(Se).multiplyScalar(Ie).floor())},this.getScissorTest=function(){return Oe},this.setScissorTest=function(ge){vt.setScissorTest(Oe=ge)},this.setOpaqueSort=function(ge){Pe=ge},this.setTransparentSort=function(ge){we=ge},this.getClearColor=function(ge){return ge.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor.apply(wt,arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha.apply(wt,arguments)},this.clear=function(ge=!0,qe=!0,at=!0){let Ne=0;ge&&(Ne|=16384),qe&&(Ne|=256),at&&(Ne|=1024),nt.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ut,!1),e.removeEventListener("webglcontextrestored",sn,!1),e.removeEventListener("webglcontextcreationerror",Fn,!1),ir.dispose(),Ae.dispose(),Yt.dispose(),Cr.dispose(),Qr.dispose(),qr.dispose(),Ve.dispose(),jt.dispose(),xn.dispose(),St.dispose(),St.removeEventListener("sessionstart",Qt),St.removeEventListener("sessionend",En),Qe&&(Qe.dispose(),Qe=null),Kr.stop()};function Ut(ge){ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function sn(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const ge=dn.autoReset,qe=ot.enabled,at=ot.autoUpdate,Ne=ot.needsUpdate,ft=ot.type;Zt(),dn.autoReset=ge,ot.enabled=qe,ot.autoUpdate=at,ot.needsUpdate=Ne,ot.type=ft}function Fn(ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ge.statusMessage)}function or(ge){const qe=ge.target;qe.removeEventListener("dispose",or),zr(qe)}function zr(ge){Fe(ge),Yt.remove(ge)}function Fe(ge){const qe=Yt.get(ge).programs;qe!==void 0&&(qe.forEach(function(at){xn.releaseProgram(at)}),ge.isShaderMaterial&&xn.releaseShaderCache(ge))}this.renderBufferDirect=function(ge,qe,at,Ne,ft,Mn){qe===null&&(qe=ke);const Bn=ft.isMesh&&ft.matrixWorld.determinant()<0,mr=en(ge,qe,at,Ne,ft);vt.setMaterial(Ne,Bn);let gr=at.index,Gr=1;Ne.wireframe===!0&&(gr=oi.getWireframeAttribute(at),Gr=2);const yr=at.drawRange,_r=at.attributes.position;let ti=yr.start*Gr,Wi=(yr.start+yr.count)*Gr;Mn!==null&&(ti=Math.max(ti,Mn.start*Gr),Wi=Math.min(Wi,(Mn.start+Mn.count)*Gr)),gr!==null?(ti=Math.max(ti,0),Wi=Math.min(Wi,gr.count)):_r!=null&&(ti=Math.max(ti,0),Wi=Math.min(Wi,_r.count));const zi=Wi-ti;if(zi<0||zi===1/0)return;Ve.setup(ft,Ne,mr,at,gr);let Zi,Ue=Lt;if(gr!==null&&(Zi=Ai.get(gr),Ue=bn,Ue.setIndex(Zi)),ft.isMesh)Ne.wireframe===!0?(vt.setLineWidth(Ne.wireframeLinewidth*L()),Ue.setMode(1)):Ue.setMode(4);else if(ft.isLine){let c=Ne.linewidth;c===void 0&&(c=1),vt.setLineWidth(c*L()),ft.isLineSegments?Ue.setMode(1):ft.isLineLoop?Ue.setMode(2):Ue.setMode(3)}else ft.isPoints?Ue.setMode(0):ft.isSprite&&Ue.setMode(4);if(ft.isInstancedMesh)Ue.renderInstances(ti,zi,ft.count);else if(at.isInstancedBufferGeometry){const c=at._maxInstanceCount!==void 0?at._maxInstanceCount:1/0,Xe=Math.min(at.instanceCount,c);Ue.renderInstances(ti,zi,Xe)}else Ue.render(ti,zi)},this.compile=function(ge,qe){function at(Ne,ft,Mn){Ne.transparent===!0&&Ne.side===$c?(Ne.side=cs,Ne.needsUpdate=!0,ji(Ne,ft,Mn),Ne.side=ua,Ne.needsUpdate=!0,ji(Ne,ft,Mn),Ne.side=$c):ji(Ne,ft,Mn)}d=Ae.get(ge),d.init(),A.push(d),ge.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(qe.layers)&&(d.pushLight(Ne),Ne.castShadow&&d.pushShadow(Ne))}),d.setupLights(E.physicallyCorrectLights),ge.traverse(function(Ne){const ft=Ne.material;if(ft)if(Array.isArray(ft))for(let Mn=0;Mn<ft.length;Mn++){const Bn=ft[Mn];at(Bn,ge,Ne)}else at(ft,ge,Ne)}),A.pop(),d=null};let rt=null;function Tt(ge){rt&&rt(ge)}function Qt(){Kr.stop()}function En(){Kr.start()}const Kr=new $g;Kr.setAnimationLoop(Tt),typeof self<"u"&&Kr.setContext(self),this.setAnimationLoop=function(ge){rt=ge,St.setAnimationLoop(ge),ge===null?Kr.stop():Kr.start()},St.addEventListener("sessionstart",Qt),St.addEventListener("sessionend",En),this.render=function(ge,qe){if(qe!==void 0&&qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),qe.parent===null&&qe.matrixWorldAutoUpdate===!0&&qe.updateMatrixWorld(),St.enabled===!0&&St.isPresenting===!0&&(St.cameraAutoUpdate===!0&&St.updateCamera(qe),qe=St.getCamera()),ge.isScene===!0&&ge.onBeforeRender(E,ge,qe,I),d=Ae.get(ge,A.length),d.init(),A.push(d),Je.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),He.setFromProjectionMatrix(Je),ht=this.localClippingEnabled,j=fe.init(this.clippingPlanes,ht,qe),p=ir.get(ge,_.length),p.init(),_.push(p),ki(ge,qe,0,E.sortObjects),p.finish(),E.sortObjects===!0&&p.sort(Pe,we),j===!0&&fe.beginShadows();const at=d.state.shadowsArray;if(ot.render(at,ge,qe),j===!0&&fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),wt.render(p,ge),d.setupLights(E.physicallyCorrectLights),qe.isArrayCamera){const Ne=qe.cameras;for(let ft=0,Mn=Ne.length;ft<Mn;ft++){const Bn=Ne[ft];Hi(p,ge,Bn,Bn.viewport)}}else Hi(p,ge,qe);I!==null&&(yn.updateMultisampleRenderTarget(I),yn.updateRenderTargetMipmap(I)),ge.isScene===!0&&ge.onAfterRender(E,ge,qe),Ve.resetDefaultState(),k=-1,K=null,A.pop(),A.length>0?d=A[A.length-1]:d=null,_.pop(),_.length>0?p=_[_.length-1]:p=null};function ki(ge,qe,at,Ne){if(ge.visible===!1)return;if(ge.layers.test(qe.layers)){if(ge.isGroup)at=ge.renderOrder;else if(ge.isLOD)ge.autoUpdate===!0&&ge.update(qe);else if(ge.isLight)d.pushLight(ge),ge.castShadow&&d.pushShadow(ge);else if(ge.isSprite){if(!ge.frustumCulled||He.intersectsSprite(ge)){Ne&&ut.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(Je);const Bn=qr.update(ge),mr=ge.material;mr.visible&&p.push(ge,Bn,mr,at,ut.z,null)}}else if((ge.isMesh||ge.isLine||ge.isPoints)&&(ge.isSkinnedMesh&&ge.skeleton.frame!==dn.render.frame&&(ge.skeleton.update(),ge.skeleton.frame=dn.render.frame),!ge.frustumCulled||He.intersectsObject(ge))){Ne&&ut.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(Je);const Bn=qr.update(ge),mr=ge.material;if(Array.isArray(mr)){const gr=Bn.groups;for(let Gr=0,yr=gr.length;Gr<yr;Gr++){const _r=gr[Gr],ti=mr[_r.materialIndex];ti&&ti.visible&&p.push(ge,Bn,ti,at,ut.z,_r)}}else mr.visible&&p.push(ge,Bn,mr,at,ut.z,null)}}const Mn=ge.children;for(let Bn=0,mr=Mn.length;Bn<mr;Bn++)ki(Mn[Bn],qe,at,Ne)}function Hi(ge,qe,at,Ne){const ft=ge.opaque,Mn=ge.transmissive,Bn=ge.transparent;d.setupLightsView(at),Mn.length>0&&$i(ft,qe,at),Ne&&vt.viewport(ee.copy(Ne)),ft.length>0&&li(ft,qe,at),Mn.length>0&&li(Mn,qe,at),Bn.length>0&&li(Bn,qe,at),vt.buffers.depth.setTest(!0),vt.buffers.depth.setMask(!0),vt.buffers.color.setMask(!0),vt.setPolygonOffset(!1)}function $i(ge,qe,at){const Ne=Pn.isWebGL2;Qe===null&&(Qe=new Ka(1,1,{generateMipmaps:!0,type:Xt.has("EXT_color_buffer_half_float")?Ec:ja,minFilter:Va,samples:Ne&&i===!0?4:0})),E.getDrawingBufferSize(ze),Ne?Qe.setSize(ze.x,ze.y):Qe.setSize(Ol(ze.x),Ol(ze.y));const ft=E.getRenderTarget();E.setRenderTarget(Qe),E.clear();const Mn=E.toneMapping;E.toneMapping=js,li(ge,qe,at),E.toneMapping=Mn,yn.updateMultisampleRenderTarget(Qe),yn.updateRenderTargetMipmap(Qe),E.setRenderTarget(ft)}function li(ge,qe,at){const Ne=qe.isScene===!0?qe.overrideMaterial:null;for(let ft=0,Mn=ge.length;ft<Mn;ft++){const Bn=ge[ft],mr=Bn.object,gr=Bn.geometry,Gr=Ne===null?Bn.material:Ne,yr=Bn.group;mr.layers.test(at.layers)&&so(mr,qe,at,gr,Gr,yr)}}function so(ge,qe,at,Ne,ft,Mn){ge.onBeforeRender(E,qe,at,Ne,ft,Mn),ge.modelViewMatrix.multiplyMatrices(at.matrixWorldInverse,ge.matrixWorld),ge.normalMatrix.getNormalMatrix(ge.modelViewMatrix),ft.onBeforeRender(E,qe,at,Ne,ge,Mn),ft.transparent===!0&&ft.side===$c?(ft.side=cs,ft.needsUpdate=!0,E.renderBufferDirect(at,qe,Ne,ft,ge,Mn),ft.side=ua,ft.needsUpdate=!0,E.renderBufferDirect(at,qe,Ne,ft,ge,Mn),ft.side=$c):E.renderBufferDirect(at,qe,Ne,ft,ge,Mn),ge.onAfterRender(E,qe,at,Ne,ft,Mn)}function ji(ge,qe,at){qe.isScene!==!0&&(qe=ke);const Ne=Yt.get(ge),ft=d.state.lights,Mn=d.state.shadowsArray,Bn=ft.state.version,mr=xn.getParameters(ge,ft.state,Mn,qe,at),gr=xn.getProgramCacheKey(mr);let Gr=Ne.programs;Ne.environment=ge.isMeshStandardMaterial?qe.environment:null,Ne.fog=qe.fog,Ne.envMap=(ge.isMeshStandardMaterial?Qr:Cr).get(ge.envMap||Ne.environment),Gr===void 0&&(ge.addEventListener("dispose",or),Gr=new Map,Ne.programs=Gr);let yr=Gr.get(gr);if(yr!==void 0){if(Ne.currentProgram===yr&&Ne.lightsStateVersion===Bn)return mo(ge,mr),yr}else mr.uniforms=xn.getUniforms(ge),ge.onBuild(at,mr,E),ge.onBeforeCompile(mr,E),yr=xn.acquireProgram(mr,gr),Gr.set(gr,yr),Ne.uniforms=mr.uniforms;const _r=Ne.uniforms;(!ge.isShaderMaterial&&!ge.isRawShaderMaterial||ge.clipping===!0)&&(_r.clippingPlanes=fe.uniform),mo(ge,mr),Ne.needsLights=no(ge),Ne.lightsStateVersion=Bn,Ne.needsLights&&(_r.ambientLightColor.value=ft.state.ambient,_r.lightProbe.value=ft.state.probe,_r.directionalLights.value=ft.state.directional,_r.directionalLightShadows.value=ft.state.directionalShadow,_r.spotLights.value=ft.state.spot,_r.spotLightShadows.value=ft.state.spotShadow,_r.rectAreaLights.value=ft.state.rectArea,_r.ltc_1.value=ft.state.rectAreaLTC1,_r.ltc_2.value=ft.state.rectAreaLTC2,_r.pointLights.value=ft.state.point,_r.pointLightShadows.value=ft.state.pointShadow,_r.hemisphereLights.value=ft.state.hemi,_r.directionalShadowMap.value=ft.state.directionalShadowMap,_r.directionalShadowMatrix.value=ft.state.directionalShadowMatrix,_r.spotShadowMap.value=ft.state.spotShadowMap,_r.spotLightMatrix.value=ft.state.spotLightMatrix,_r.spotLightMap.value=ft.state.spotLightMap,_r.pointShadowMap.value=ft.state.pointShadowMap,_r.pointShadowMatrix.value=ft.state.pointShadowMatrix);const ti=yr.getUniforms(),Wi=Bl.seqWithValue(ti.seq,_r);return Ne.currentProgram=yr,Ne.uniformsList=Wi,yr}function mo(ge,qe){const at=Yt.get(ge);at.outputEncoding=qe.outputEncoding,at.instancing=qe.instancing,at.skinning=qe.skinning,at.morphTargets=qe.morphTargets,at.morphNormals=qe.morphNormals,at.morphColors=qe.morphColors,at.morphTargetsCount=qe.morphTargetsCount,at.numClippingPlanes=qe.numClippingPlanes,at.numIntersection=qe.numClipIntersection,at.vertexAlphas=qe.vertexAlphas,at.vertexTangents=qe.vertexTangents,at.toneMapping=qe.toneMapping}function en(ge,qe,at,Ne,ft){qe.isScene!==!0&&(qe=ke),yn.resetTextureUnits();const Mn=qe.fog,Bn=Ne.isMeshStandardMaterial?qe.environment:null,mr=I===null?E.outputEncoding:I.isXRRenderTarget===!0?I.texture.encoding:za,gr=(Ne.isMeshStandardMaterial?Qr:Cr).get(Ne.envMap||Bn),Gr=Ne.vertexColors===!0&&!!at.attributes.color&&at.attributes.color.itemSize===4,yr=!!Ne.normalMap&&!!at.attributes.tangent,_r=!!at.morphAttributes.position,ti=!!at.morphAttributes.normal,Wi=!!at.morphAttributes.color,zi=Ne.toneMapped?E.toneMapping:js,Zi=at.morphAttributes.position||at.morphAttributes.normal||at.morphAttributes.color,Ue=Zi!==void 0?Zi.length:0,c=Yt.get(Ne),Xe=d.state.lights;if(j===!0&&(ht===!0||ge!==K)){const tn=ge===K&&Ne.id===k;fe.setState(Ne,ge,tn)}let et=!1;Ne.version===c.__version?(c.needsLights&&c.lightsStateVersion!==Xe.state.version||c.outputEncoding!==mr||ft.isInstancedMesh&&c.instancing===!1||!ft.isInstancedMesh&&c.instancing===!0||ft.isSkinnedMesh&&c.skinning===!1||!ft.isSkinnedMesh&&c.skinning===!0||c.envMap!==gr||Ne.fog===!0&&c.fog!==Mn||c.numClippingPlanes!==void 0&&(c.numClippingPlanes!==fe.numPlanes||c.numIntersection!==fe.numIntersection)||c.vertexAlphas!==Gr||c.vertexTangents!==yr||c.morphTargets!==_r||c.morphNormals!==ti||c.morphColors!==Wi||c.toneMapping!==zi||Pn.isWebGL2===!0&&c.morphTargetsCount!==Ue)&&(et=!0):(et=!0,c.__version=Ne.version);let it=c.currentProgram;et===!0&&(it=ji(Ne,qe,ft));let je=!1,Kt=!1,Mt=!1;const xt=it.getUniforms(),Jt=c.uniforms;if(vt.useProgram(it.program)&&(je=!0,Kt=!0,Mt=!0),Ne.id!==k&&(k=Ne.id,Kt=!0),je||K!==ge){if(xt.setValue(nt,"projectionMatrix",ge.projectionMatrix),Pn.logarithmicDepthBuffer&&xt.setValue(nt,"logDepthBufFC",2/(Math.log(ge.far+1)/Math.LN2)),K!==ge&&(K=ge,Kt=!0,Mt=!0),Ne.isShaderMaterial||Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshStandardMaterial||Ne.envMap){const tn=xt.map.cameraPosition;tn!==void 0&&tn.setValue(nt,ut.setFromMatrixPosition(ge.matrixWorld))}(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&xt.setValue(nt,"isOrthographic",ge.isOrthographicCamera===!0),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial||Ne.isShadowMaterial||ft.isSkinnedMesh)&&xt.setValue(nt,"viewMatrix",ge.matrixWorldInverse)}if(ft.isSkinnedMesh){xt.setOptional(nt,ft,"bindMatrix"),xt.setOptional(nt,ft,"bindMatrixInverse");const tn=ft.skeleton;tn&&(Pn.floatVertexTextures?(tn.boneTexture===null&&tn.computeBoneTexture(),xt.setValue(nt,"boneTexture",tn.boneTexture,yn),xt.setValue(nt,"boneTextureSize",tn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const hn=at.morphAttributes;if((hn.position!==void 0||hn.normal!==void 0||hn.color!==void 0&&Pn.isWebGL2===!0)&&Et.update(ft,at,Ne,it),(Kt||c.receiveShadow!==ft.receiveShadow)&&(c.receiveShadow=ft.receiveShadow,xt.setValue(nt,"receiveShadow",ft.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(Jt.envMap.value=gr,Jt.flipEnvMap.value=gr.isCubeTexture&&gr.isRenderTargetTexture===!1?-1:1),Kt&&(xt.setValue(nt,"toneMappingExposure",E.toneMappingExposure),c.needsLights&&Mo(Jt,Mt),Mn&&Ne.fog===!0&&ei.refreshFogUniforms(Jt,Mn),ei.refreshMaterialUniforms(Jt,Ne,Ie,de,Qe),Bl.upload(nt,c.uniformsList,Jt,yn)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(Bl.upload(nt,c.uniformsList,Jt,yn),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&xt.setValue(nt,"center",ft.center),xt.setValue(nt,"modelViewMatrix",ft.modelViewMatrix),xt.setValue(nt,"normalMatrix",ft.normalMatrix),xt.setValue(nt,"modelMatrix",ft.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const tn=Ne.uniformsGroups;for(let vn=0,pn=tn.length;vn<pn;vn++)if(Pn.isWebGL2){const Ot=tn[vn];jt.update(Ot,it),jt.bind(Ot,it)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return it}function Mo(ge,qe){ge.ambientLightColor.needsUpdate=qe,ge.lightProbe.needsUpdate=qe,ge.directionalLights.needsUpdate=qe,ge.directionalLightShadows.needsUpdate=qe,ge.pointLights.needsUpdate=qe,ge.pointLightShadows.needsUpdate=qe,ge.spotLights.needsUpdate=qe,ge.spotLightShadows.needsUpdate=qe,ge.rectAreaLights.needsUpdate=qe,ge.hemisphereLights.needsUpdate=qe}function no(ge){return ge.isMeshLambertMaterial||ge.isMeshToonMaterial||ge.isMeshPhongMaterial||ge.isMeshStandardMaterial||ge.isShadowMaterial||ge.isShaderMaterial&&ge.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(ge,qe,at){Yt.get(ge.texture).__webglTexture=qe,Yt.get(ge.depthTexture).__webglTexture=at;const Ne=Yt.get(ge);Ne.__hasExternalTextures=!0,Ne.__hasExternalTextures&&(Ne.__autoAllocateDepthBuffer=at===void 0,Ne.__autoAllocateDepthBuffer||Xt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ge,qe){const at=Yt.get(ge);at.__webglFramebuffer=qe,at.__useDefaultFramebuffer=qe===void 0},this.setRenderTarget=function(ge,qe=0,at=0){I=ge,T=qe,P=at;let Ne=!0,ft=null,Mn=!1,Bn=!1;if(ge){const gr=Yt.get(ge);gr.__useDefaultFramebuffer!==void 0?(vt.bindFramebuffer(36160,null),Ne=!1):gr.__webglFramebuffer===void 0?yn.setupRenderTarget(ge):gr.__hasExternalTextures&&yn.rebindTextures(ge,Yt.get(ge.texture).__webglTexture,Yt.get(ge.depthTexture).__webglTexture);const Gr=ge.texture;(Gr.isData3DTexture||Gr.isDataArrayTexture||Gr.isCompressedArrayTexture)&&(Bn=!0);const yr=Yt.get(ge).__webglFramebuffer;ge.isWebGLCubeRenderTarget?(ft=yr[qe],Mn=!0):Pn.isWebGL2&&ge.samples>0&&yn.useMultisampledRTT(ge)===!1?ft=Yt.get(ge).__webglMultisampledFramebuffer:ft=yr,ee.copy(ge.viewport),me.copy(ge.scissor),Z=ge.scissorTest}else ee.copy(Te).multiplyScalar(Ie).floor(),me.copy(Se).multiplyScalar(Ie).floor(),Z=Oe;if(vt.bindFramebuffer(36160,ft)&&Pn.drawBuffers&&Ne&&vt.drawBuffers(ge,ft),vt.viewport(ee),vt.scissor(me),vt.setScissorTest(Z),Mn){const gr=Yt.get(ge.texture);nt.framebufferTexture2D(36160,36064,34069+qe,gr.__webglTexture,at)}else if(Bn){const gr=Yt.get(ge.texture),Gr=qe||0;nt.framebufferTextureLayer(36160,36064,gr.__webglTexture,at||0,Gr)}k=-1},this.readRenderTargetPixels=function(ge,qe,at,Ne,ft,Mn,Bn){if(!(ge&&ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mr=Yt.get(ge).__webglFramebuffer;if(ge.isWebGLCubeRenderTarget&&Bn!==void 0&&(mr=mr[Bn]),mr){vt.bindFramebuffer(36160,mr);try{const gr=ge.texture,Gr=gr.format,yr=gr.type;if(Gr!==os&&Ee.convert(Gr)!==nt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const _r=yr===Ec&&(Xt.has("EXT_color_buffer_half_float")||Pn.isWebGL2&&Xt.has("EXT_color_buffer_float"));if(yr!==ja&&Ee.convert(yr)!==nt.getParameter(35738)&&!(yr===oa&&(Pn.isWebGL2||Xt.has("OES_texture_float")||Xt.has("WEBGL_color_buffer_float")))&&!_r){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}qe>=0&&qe<=ge.width-Ne&&at>=0&&at<=ge.height-ft&&nt.readPixels(qe,at,Ne,ft,Ee.convert(Gr),Ee.convert(yr),Mn)}finally{const gr=I!==null?Yt.get(I).__webglFramebuffer:null;vt.bindFramebuffer(36160,gr)}}},this.copyFramebufferToTexture=function(ge,qe,at=0){const Ne=Math.pow(2,-at),ft=Math.floor(qe.image.width*Ne),Mn=Math.floor(qe.image.height*Ne);yn.setTexture2D(qe,0),nt.copyTexSubImage2D(3553,at,0,0,ge.x,ge.y,ft,Mn),vt.unbindTexture()},this.copyTextureToTexture=function(ge,qe,at,Ne=0){const ft=qe.image.width,Mn=qe.image.height,Bn=Ee.convert(at.format),mr=Ee.convert(at.type);yn.setTexture2D(at,0),nt.pixelStorei(37440,at.flipY),nt.pixelStorei(37441,at.premultiplyAlpha),nt.pixelStorei(3317,at.unpackAlignment),qe.isDataTexture?nt.texSubImage2D(3553,Ne,ge.x,ge.y,ft,Mn,Bn,mr,qe.image.data):qe.isCompressedTexture?nt.compressedTexSubImage2D(3553,Ne,ge.x,ge.y,qe.mipmaps[0].width,qe.mipmaps[0].height,Bn,qe.mipmaps[0].data):nt.texSubImage2D(3553,Ne,ge.x,ge.y,Bn,mr,qe.image),Ne===0&&at.generateMipmaps&&nt.generateMipmap(3553),vt.unbindTexture()},this.copyTextureToTexture3D=function(ge,qe,at,Ne,ft=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Mn=ge.max.x-ge.min.x+1,Bn=ge.max.y-ge.min.y+1,mr=ge.max.z-ge.min.z+1,gr=Ee.convert(Ne.format),Gr=Ee.convert(Ne.type);let yr;if(Ne.isData3DTexture)yn.setTexture3D(Ne,0),yr=32879;else if(Ne.isDataArrayTexture)yn.setTexture2DArray(Ne,0),yr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}nt.pixelStorei(37440,Ne.flipY),nt.pixelStorei(37441,Ne.premultiplyAlpha),nt.pixelStorei(3317,Ne.unpackAlignment);const _r=nt.getParameter(3314),ti=nt.getParameter(32878),Wi=nt.getParameter(3316),zi=nt.getParameter(3315),Zi=nt.getParameter(32877),Ue=at.isCompressedTexture?at.mipmaps[0]:at.image;nt.pixelStorei(3314,Ue.width),nt.pixelStorei(32878,Ue.height),nt.pixelStorei(3316,ge.min.x),nt.pixelStorei(3315,ge.min.y),nt.pixelStorei(32877,ge.min.z),at.isDataTexture||at.isData3DTexture?nt.texSubImage3D(yr,ft,qe.x,qe.y,qe.z,Mn,Bn,mr,gr,Gr,Ue.data):at.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),nt.compressedTexSubImage3D(yr,ft,qe.x,qe.y,qe.z,Mn,Bn,mr,gr,Ue.data)):nt.texSubImage3D(yr,ft,qe.x,qe.y,qe.z,Mn,Bn,mr,gr,Gr,Ue),nt.pixelStorei(3314,_r),nt.pixelStorei(32878,ti),nt.pixelStorei(3316,Wi),nt.pixelStorei(3315,zi),nt.pixelStorei(32877,Zi),ft===0&&Ne.generateMipmaps&&nt.generateMipmap(yr),vt.unbindTexture()},this.initTexture=function(ge){ge.isCubeTexture?yn.setTextureCube(ge,0):ge.isData3DTexture?yn.setTexture3D(ge,0):ge.isDataArrayTexture||ge.isCompressedArrayTexture?yn.setTexture2DArray(ge,0):yn.setTexture2D(ge,0),vt.unbindTexture()},this.resetState=function(){T=0,P=0,I=null,vt.reset(),Ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class dB extends ny{}dB.prototype.isWebGL1Renderer=!0;class hB extends oo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class pB{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=gd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=_s()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const No=new Ge;class xh{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)No.fromBufferAttribute(this,t),No.applyMatrix4(e),this.setXYZ(t,No.x,No.y,No.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)No.fromBufferAttribute(this,t),No.applyNormalMatrix(e),this.setXYZ(t,No.x,No.y,No.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)No.fromBufferAttribute(this,t),No.transformDirection(e),this.setXYZ(t,No.x,No.y,No.z);return this}setX(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ws(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ws(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ws(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ws(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array),i=Xi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return new xo(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const f_=new Ge,d_=new Yi,h_=new Yi,mB=new Ge,p_=new Ei;class _B extends ss{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ei,this.bindMatrixInverse=new Ei}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yi,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;d_.fromBufferAttribute(r.attributes.skinIndex,e),h_.fromBufferAttribute(r.attributes.skinWeight,e),f_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const s=h_.getComponent(i);if(s!==0){const a=d_.getComponent(i);p_.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(mB.copy(f_).applyMatrix4(p_),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ry extends oo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gB extends Bo{constructor(e=null,t=1,n=1,r,i,s,a,u,f=To,l=To,p,d){super(null,s,a,u,f,l,r,i,p,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const m_=new Ei,yB=new Ei;class Mh{constructor(e=[],t=[]){this.uuid=_s(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ei)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ei;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=e.length;i<s;i++){const a=e[i]?e[i].matrixWorld:yB;m_.multiplyMatrices(a,t[i]),m_.toArray(n,i*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Mh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Gg(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new gB(t,e,e,os,oa);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const i=e.bones[n];let s=t[i];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),s=new ry),this.bones.push(s),this.boneInverses.push(new Ei().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const s=t[r];e.bones.push(s.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class __ extends xo{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const g_=new Ei,y_=new Ei,_l=[],vB=new Ei,ec=new ss;class AB extends ss{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new __(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let r=0;r<n;r++)this.setMatrixAt(r,vB)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ec.geometry=this.geometry,ec.material=this.material,ec.material!==void 0)for(let i=0;i<r;i++){this.getMatrixAt(i,g_),y_.multiplyMatrices(n,g_),ec.matrixWorld=y_,ec.raycast(e,_l);for(let s=0,a=_l.length;s<a;s++){const u=_l[s];u.instanceId=i,u.object=this,t.push(u)}_l.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new __(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class iy extends Ss{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new yi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const v_=new Ge,A_=new Ge,b_=new Ei,Jf=new Th,gl=new Uu;class Dh extends oo{constructor(e=new gs,t=new iy){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,i=t.count;r<i;r++)v_.fromBufferAttribute(t,r-1),A_.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=v_.distanceTo(A_);e.setAttribute("lineDistance",new zs(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),gl.copy(n.boundingSphere),gl.applyMatrix4(r),gl.radius+=i,e.ray.intersectsSphere(gl)===!1)return;b_.copy(r).invert(),Jf.copy(e.ray).applyMatrix4(b_);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=new Ge,l=new Ge,p=new Ge,d=new Ge,_=this.isLineSegments?2:1,A=n.index,v=n.attributes.position;if(A!==null){const T=Math.max(0,s.start),P=Math.min(A.count,s.start+s.count);for(let I=T,k=P-1;I<k;I+=_){const K=A.getX(I),ee=A.getX(I+1);if(f.fromBufferAttribute(v,K),l.fromBufferAttribute(v,ee),Jf.distanceSqToSegment(f,l,d,p)>u)continue;d.applyMatrix4(this.matrixWorld);const Z=e.ray.origin.distanceTo(d);Z<e.near||Z>e.far||t.push({distance:Z,point:p.clone().applyMatrix4(this.matrixWorld),index:I,face:null,faceIndex:null,object:this})}}else{const T=Math.max(0,s.start),P=Math.min(v.count,s.start+s.count);for(let I=T,k=P-1;I<k;I+=_){if(f.fromBufferAttribute(v,I),l.fromBufferAttribute(v,I+1),Jf.distanceSqToSegment(f,l,d,p)>u)continue;d.applyMatrix4(this.matrixWorld);const ee=e.ray.origin.distanceTo(d);ee<e.near||ee>e.far||t.push({distance:ee,point:p.clone().applyMatrix4(this.matrixWorld),index:I,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}const E_=new Ge,T_=new Ge;class bB extends Dh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,i=t.count;r<i;r+=2)E_.fromBufferAttribute(t,r),T_.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+E_.distanceTo(T_);e.setAttribute("lineDistance",new zs(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class EB extends Dh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oy extends Ss{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new yi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const w_=new Ei,bd=new Th,yl=new Uu,vl=new Ge;class TB extends oo{constructor(e=new gs,t=new oy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),yl.copy(n.boundingSphere),yl.applyMatrix4(r),yl.radius+=i,e.ray.intersectsSphere(yl)===!1)return;w_.copy(r).invert(),bd.copy(e.ray).applyMatrix4(w_);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=n.index,p=n.attributes.position;if(f!==null){const d=Math.max(0,s.start),_=Math.min(f.count,s.start+s.count);for(let A=d,E=_;A<E;A++){const v=f.getX(A);vl.fromBufferAttribute(p,v),C_(vl,v,u,r,e,t,this)}}else{const d=Math.max(0,s.start),_=Math.min(p.count,s.start+s.count);for(let A=d,E=_;A<E;A++)vl.fromBufferAttribute(p,A),C_(vl,A,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}function C_(o,e,t,n,r,i,s){const a=bd.distanceSqToPoint(o);if(a<t){const u=new Ge;bd.closestPointToPoint(o,u),u.applyMatrix4(n);const f=r.ray.origin.distanceTo(u);if(f<r.near||f>r.far)return;i.push({distance:f,distanceToRay:Math.sqrt(a),point:u,index:e,face:null,object:s})}}class Rh extends Ss{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ug,this.normalScale=new Yr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Za extends Rh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Yr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Po(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new yi(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new yi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new yi(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function $s(o,e,t){return sy(o)?new o.constructor(o.subarray(e,t!==void 0?t:o.length)):o.slice(e,t)}function Al(o,e,t){return!o||!t&&o.constructor===e?o:typeof e.BYTES_PER_ELEMENT=="number"?new e(o):Array.prototype.slice.call(o)}function sy(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)}function wB(o){function e(r,i){return o[r]-o[i]}const t=o.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function S_(o,e,t){const n=o.length,r=new o.constructor(n);for(let i=0,s=0;s!==n;++i){const a=t[i]*e;for(let u=0;u!==e;++u)r[s++]=o[a+u]}return r}function ay(o,e,t,n){let r=1,i=o[0];for(;i!==void 0&&i[n]===void 0;)i=o[r++];if(i===void 0)return;let s=i[n];if(s!==void 0)if(Array.isArray(s))do s=i[n],s!==void 0&&(e.push(i.time),t.push.apply(t,s)),i=o[r++];while(i!==void 0);else if(s.toArray!==void 0)do s=i[n],s!==void 0&&(e.push(i.time),s.toArray(t,t.length)),i=o[r++];while(i!==void 0);else do s=i[n],s!==void 0&&(e.push(i.time),t.push(s)),i=o[r++];while(i!==void 0)}class Nc{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=i)){const a=t[1];e<a&&(n=2,i=a);for(let u=n-2;;){if(i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0;break n}break e}for(;n<s;){const a=n+s>>>1;e<t[a]?s=a:n=a+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CB extends Nc{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xm,endingEnd:xm}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],u=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Mm:i=e,a=2*t-n;break;case Dm:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Mm:s=e,u=2*n-t;break;case Dm:s=1,u=n+r[1]-r[0];break;default:s=e-1,u=t}const f=(n-t)*.5,l=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(u-n),this._offsetPrev=i*l,this._offsetNext=s*l}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,l=this._offsetPrev,p=this._offsetNext,d=this._weightPrev,_=this._weightNext,A=(n-t)/(r-t),E=A*A,v=E*A,T=-d*v+2*d*E-d*A,P=(1+d)*v+(-1.5-2*d)*E+(-.5+d)*A+1,I=(-1-_)*v+(1.5+_)*E+.5*A,k=_*v-_*E;for(let K=0;K!==a;++K)i[K]=T*s[l+K]+P*s[f+K]+I*s[u+K]+k*s[p+K];return i}}class SB extends Nc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,l=(n-t)/(r-t),p=1-l;for(let d=0;d!==a;++d)i[d]=s[f+d]*p+s[u+d]*l;return i}}class BB extends Nc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ds{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Al(t,this.TimeBufferType),this.values=Al(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Al(e.times,Array),values:Al(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new BB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Tc:t=this.InterpolantFactoryMethodDiscrete;break;case Pu:t=this.InterpolantFactoryMethodLinear;break;case bf:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tc;case this.InterpolantFactoryMethodLinear:return Pu;case this.InterpolantFactoryMethodSmooth:return bf}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;s!==-1&&n[s]>t;)--s;if(++s,i!==0||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const a=this.getValueSize();this.times=$s(n,i,s),this.values=$s(this.values,i*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==i;a++){const u=n[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),e=!1;break}if(s!==null&&s>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,s),e=!1;break}s=u}if(r!==void 0&&sy(r))for(let a=0,u=r.length;a!==u;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=$s(this.times),t=$s(this.values),n=this.getValueSize(),r=this.getInterpolation()===bf,i=e.length-1;let s=1;for(let a=1;a<i;++a){let u=!1;const f=e[a],l=e[a+1];if(f!==l&&(a!==1||f!==e[0]))if(r)u=!0;else{const p=a*n,d=p-n,_=p+n;for(let A=0;A!==n;++A){const E=t[p+A];if(E!==t[d+A]||E!==t[_+A]){u=!0;break}}}if(u){if(a!==s){e[s]=e[a];const p=a*n,d=s*n;for(let _=0;_!==n;++_)t[d+_]=t[p+_]}++s}}if(i>0){e[s]=e[i];for(let a=i*n,u=s*n,f=0;f!==n;++f)t[u+f]=t[a+f];++s}return s!==e.length?(this.times=$s(e,0,s),this.values=$s(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=$s(this.times,0),t=$s(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ds.prototype.TimeBufferType=Float32Array;Ds.prototype.ValueBufferType=Float32Array;Ds.prototype.DefaultInterpolation=Pu;class ku extends Ds{}ku.prototype.ValueTypeName="bool";ku.prototype.ValueBufferType=Array;ku.prototype.DefaultInterpolation=Tc;ku.prototype.InterpolantFactoryMethodLinear=void 0;ku.prototype.InterpolantFactoryMethodSmooth=void 0;class uy extends Ds{}uy.prototype.ValueTypeName="color";class Bc extends Ds{}Bc.prototype.ValueTypeName="number";class xB extends Nc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=(n-t)/(r-t);let f=e*a;for(let l=f+a;f!==l;f+=4)Ms.slerpFlat(i,0,s,f-a,s,f,u);return i}}class qa extends Ds{InterpolantFactoryMethodLinear(e){return new xB(this.times,this.values,this.getValueSize(),e)}}qa.prototype.ValueTypeName="quaternion";qa.prototype.DefaultInterpolation=Pu;qa.prototype.InterpolantFactoryMethodSmooth=void 0;class Hu extends Ds{}Hu.prototype.ValueTypeName="string";Hu.prototype.ValueBufferType=Array;Hu.prototype.DefaultInterpolation=Tc;Hu.prototype.InterpolantFactoryMethodLinear=void 0;Hu.prototype.InterpolantFactoryMethodSmooth=void 0;class xc extends Ds{}xc.prototype.ValueTypeName="vector";class MB{constructor(e,t=-1,n,r=qE){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=_s(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(RB(n[s]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,s=n.length;i!==s;++i)t.push(Ds.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let a=0;a<i;a++){let u=[],f=[];u.push((a+i-1)%i,a,(a+1)%i),f.push(0,1,0);const l=wB(u);u=S_(u,1,l),f=S_(f,1,l),!r&&u[0]===0&&(u.push(i),f.push(f[0])),s.push(new Bc(".morphTargetInfluences["+t[a].name+"]",u,f).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,u=e.length;a<u;a++){const f=e[a],l=f.name.match(i);if(l&&l.length>1){const p=l[1];let d=r[p];d||(r[p]=d=[]),d.push(f)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(p,d,_,A,E){if(_.length!==0){const v=[],T=[];ay(_,v,T,A),v.length!==0&&E.push(new p(d,v,T))}},r=[],i=e.name||"default",s=e.fps||30,a=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const d=f[p].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const _={};let A;for(A=0;A<d.length;A++)if(d[A].morphTargets)for(let E=0;E<d[A].morphTargets.length;E++)_[d[A].morphTargets[E]]=-1;for(const E in _){const v=[],T=[];for(let P=0;P!==d[A].morphTargets.length;++P){const I=d[A];v.push(I.time),T.push(I.morphTarget===E?1:0)}r.push(new Bc(".morphTargetInfluence["+E+"]",v,T))}u=_.length*s}else{const _=".bones["+t[p].name+"]";n(xc,_+".position",d,"pos",r),n(qa,_+".quaternion",d,"rot",r),n(xc,_+".scale",d,"scl",r)}}return r.length===0?null:new this(i,u,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function DB(o){switch(o.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bc;case"vector":case"vector2":case"vector3":case"vector4":return xc;case"color":return uy;case"quaternion":return qa;case"bool":case"boolean":return ku;case"string":return Hu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+o)}function RB(o){if(o.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=DB(o.type);if(o.times===void 0){const t=[],n=[];ay(o.keys,t,n,"value"),o.times=t,o.values=n}return e.parse!==void 0?e.parse(o):new e(o.name,o.times,o.values,o.interpolation)}const Lu={enabled:!1,files:{},add:function(o,e){this.enabled!==!1&&(this.files[o]=e)},get:function(o){if(this.enabled!==!1)return this.files[o]},remove:function(o){delete this.files[o]},clear:function(){this.files={}}};class IB{constructor(e,t,n){const r=this;let i=!1,s=0,a=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(l){a++,i===!1&&r.onStart!==void 0&&r.onStart(l,s,a),i=!0},this.itemEnd=function(l){s++,r.onProgress!==void 0&&r.onProgress(l,s,a),s===a&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(l){r.onError!==void 0&&r.onError(l)},this.resolveURL=function(l){return u?u(l):l},this.setURLModifier=function(l){return u=l,this},this.addHandler=function(l,p){return f.push(l,p),this},this.removeHandler=function(l){const p=f.indexOf(l);return p!==-1&&f.splice(p,2),this},this.getHandler=function(l){for(let p=0,d=f.length;p<d;p+=2){const _=f[p],A=f[p+1];if(_.global&&(_.lastIndex=0),_.test(l))return A}return null}}}const PB=new IB;class Wu{constructor(e){this.manager=e!==void 0?e:PB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ns={};class FB extends Error{constructor(e,t){super(e),this.response=t}}class Nl extends Wu{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Lu.get(e);if(i!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(Ns[e]!==void 0){Ns[e].push({onLoad:t,onProgress:n,onError:r});return}Ns[e]=[],Ns[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const l=Ns[e],p=f.body.getReader(),d=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),_=d?parseInt(d):0,A=_!==0;let E=0;const v=new ReadableStream({start(T){P();function P(){p.read().then(({done:I,value:k})=>{if(I)T.close();else{E+=k.byteLength;const K=new ProgressEvent("progress",{lengthComputable:A,loaded:E,total:_});for(let ee=0,me=l.length;ee<me;ee++){const Z=l[ee];Z.onProgress&&Z.onProgress(K)}T.enqueue(k),P()}})}}});return new Response(v)}else throw new FB(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(l=>new DOMParser().parseFromString(l,a));case"json":return f.json();default:if(a===void 0)return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),d=p&&p[1]?p[1].toLowerCase():void 0,_=new TextDecoder(d);return f.arrayBuffer().then(A=>_.decode(A))}}}).then(f=>{Lu.add(e,f);const l=Ns[e];delete Ns[e];for(let p=0,d=l.length;p<d;p++){const _=l[p];_.onLoad&&_.onLoad(f)}}).catch(f=>{const l=Ns[e];if(l===void 0)throw this.manager.itemError(e),f;delete Ns[e];for(let p=0,d=l.length;p<d;p++){const _=l[p];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class LB extends Wu{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Lu.get(e);if(s!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(s),i.manager.itemEnd(e)},0),s;const a=Sc("img");function u(){l(),Lu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function f(p){l(),r&&r(p),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",u,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class OB extends Wu{constructor(e){super(e)}load(e,t,n,r){const i=new Bo,s=new LB(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){i.image=a,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i}}class sf extends oo{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new yi(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const qf=new Ei,B_=new Ge,x_=new Ge;class Ih{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yr(512,512),this.map=null,this.mapPass=null,this.matrix=new Ei,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wh,this._frameExtents=new Yr(1,1),this._viewportCount=1,this._viewports=[new Yi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;B_.setFromMatrixPosition(e.matrixWorld),t.position.copy(B_),x_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(x_),t.updateMatrixWorld(),qf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qf),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qf)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class NB extends Ih{constructor(){super(new Ho(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Cc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class UB extends sf{constructor(e,t,n=0,r=Math.PI/3,i=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.target=new oo,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new NB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const M_=new Ei,tc=new Ge,Xf=new Ge;class GB extends Ih{constructor(){super(new Ho(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Yr(4,2),this._viewportCount=6,this._viewports=[new Yi(2,1,1,1),new Yi(0,1,1,1),new Yi(3,1,1,1),new Yi(1,1,1,1),new Yi(3,0,1,1),new Yi(1,0,1,1)],this._cubeDirections=[new Ge(1,0,0),new Ge(-1,0,0),new Ge(0,0,1),new Ge(0,0,-1),new Ge(0,1,0),new Ge(0,-1,0)],this._cubeUps=[new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,0,1),new Ge(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),tc.setFromMatrixPosition(e.matrixWorld),n.position.copy(tc),Xf.copy(n.position),Xf.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Xf),n.updateMatrixWorld(),r.makeTranslation(-tc.x,-tc.y,-tc.z),M_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(M_)}}class kB extends sf{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new GB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class HB extends Ih{constructor(){super(new Sh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ed extends sf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.target=new oo,this.shadow=new HB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class WB extends sf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ua{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class VB extends Wu{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Lu.get(e);if(s!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(s),i.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(u){Lu.add(e,u),t&&t(u),i.manager.itemEnd(e)}).catch(function(u){r&&r(u),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}}const Ph="\\[\\]\\.:\\/",jB=new RegExp("["+Ph+"]","g"),Fh="[^"+Ph+"]",zB="[^"+Ph.replace("\\.","")+"]",KB=/((?:WC+[\/:])*)/.source.replace("WC",Fh),JB=/(WCOD+)?/.source.replace("WCOD",zB),qB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fh),XB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fh),YB=new RegExp("^"+KB+JB+qB+XB+"$"),$B=["material","materials","bones","map"];class ZB{constructor(e,t,n){const r=n||Ji.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Ji{constructor(e,t,n){this.path=t,this.parsedPath=n||Ji.parseTrackName(t),this.node=Ji.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ji.Composite(e,t,n):new Ji(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jB,"")}static parseTrackName(e){const t=YB.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const i=n.nodeName.substring(r+1);$B.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(i){for(let s=0;s<i.length;s++){const a=i[s];if(a.name===t||a.uuid===t)return a;const u=n(a.children);if(u)return u}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Ji.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let f=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let l=0;l<e.length;l++)if(e[l].name===f){f=l;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else s.fromArray!==void 0&&s.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ji.Composite=ZB;Ji.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ji.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ji.prototype.GetterByBindingType=[Ji.prototype._getValue_direct,Ji.prototype._getValue_array,Ji.prototype._getValue_arrayElement,Ji.prototype._getValue_toArray];Ji.prototype.SetterByBindingTypeAndVersioning=[[Ji.prototype._setValue_direct,Ji.prototype._setValue_direct_setNeedsUpdate,Ji.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_array,Ji.prototype._setValue_array_setNeedsUpdate,Ji.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_arrayElement,Ji.prototype._setValue_arrayElement_setNeedsUpdate,Ji.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_fromArray,Ji.prototype._setValue_fromArray_setNeedsUpdate,Ji.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class D_{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Po(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bh);const R_={type:"change"},Yf={type:"start"},I_={type:"end"};class QB extends Ya{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ge,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:tu.ROTATE,MIDDLE:tu.DOLLY,RIGHT:tu.PAN},this.touches={ONE:nu.ROTATE,TWO:nu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ee){Ee.addEventListener("keydown",ir),this._domElementKeyEvents=Ee},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(R_),n.update(),i=r.NONE},this.update=function(){const Ee=new Ge,Ve=new Ms().setFromUnitVectors(e.up,new Ge(0,1,0)),jt=Ve.clone().invert(),Zt=new Ge,St=new Ms,Ut=2*Math.PI;return function(){const Fn=n.object.position;Ee.copy(Fn).sub(n.target),Ee.applyQuaternion(Ve),a.setFromVector3(Ee),n.autoRotate&&i===r.NONE&&re(me()),n.enableDamping?(a.theta+=u.theta*n.dampingFactor,a.phi+=u.phi*n.dampingFactor):(a.theta+=u.theta,a.phi+=u.phi);let or=n.minAzimuthAngle,zr=n.maxAzimuthAngle;return isFinite(or)&&isFinite(zr)&&(or<-Math.PI?or+=Ut:or>Math.PI&&(or-=Ut),zr<-Math.PI?zr+=Ut:zr>Math.PI&&(zr-=Ut),or<=zr?a.theta=Math.max(or,Math.min(zr,a.theta)):a.theta=a.theta>(or+zr)/2?Math.max(or,a.theta):Math.min(zr,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=f,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(l,n.dampingFactor):n.target.add(l),Ee.setFromSpherical(a),Ee.applyQuaternion(jt),Fn.copy(n.target).add(Ee),n.object.lookAt(n.target),n.enableDamping===!0?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,l.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),l.set(0,0,0)),f=1,p||Zt.distanceToSquared(n.object.position)>s||8*(1-St.dot(n.object.quaternion))>s?(n.dispatchEvent(R_),Zt.copy(n.object.position),St.copy(n.object.quaternion),p=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ot),n.domElement.removeEventListener("pointerdown",Cr),n.domElement.removeEventListener("pointercancel",oi),n.domElement.removeEventListener("wheel",ei),n.domElement.removeEventListener("pointermove",Qr),n.domElement.removeEventListener("pointerup",Ai),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ir)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const s=1e-6,a=new D_,u=new D_;let f=1;const l=new Ge;let p=!1;const d=new Yr,_=new Yr,A=new Yr,E=new Yr,v=new Yr,T=new Yr,P=new Yr,I=new Yr,k=new Yr,K=[],ee={};function me(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Z(){return Math.pow(.95,n.zoomSpeed)}function re(Ee){u.theta-=Ee}function de(Ee){u.phi-=Ee}const Ie=function(){const Ee=new Ge;return function(jt,Zt){Ee.setFromMatrixColumn(Zt,0),Ee.multiplyScalar(-jt),l.add(Ee)}}(),Pe=function(){const Ee=new Ge;return function(jt,Zt){n.screenSpacePanning===!0?Ee.setFromMatrixColumn(Zt,1):(Ee.setFromMatrixColumn(Zt,0),Ee.crossVectors(n.object.up,Ee)),Ee.multiplyScalar(jt),l.add(Ee)}}(),we=function(){const Ee=new Ge;return function(jt,Zt){const St=n.domElement;if(n.object.isPerspectiveCamera){const Ut=n.object.position;Ee.copy(Ut).sub(n.target);let sn=Ee.length();sn*=Math.tan(n.object.fov/2*Math.PI/180),Ie(2*jt*sn/St.clientHeight,n.object.matrix),Pe(2*Zt*sn/St.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(Ie(jt*(n.object.right-n.object.left)/n.object.zoom/St.clientWidth,n.object.matrix),Pe(Zt*(n.object.top-n.object.bottom)/n.object.zoom/St.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function Te(Ee){n.object.isPerspectiveCamera?f/=Ee:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*Ee)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Se(Ee){n.object.isPerspectiveCamera?f*=Ee:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/Ee)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Oe(Ee){d.set(Ee.clientX,Ee.clientY)}function He(Ee){P.set(Ee.clientX,Ee.clientY)}function j(Ee){E.set(Ee.clientX,Ee.clientY)}function ht(Ee){_.set(Ee.clientX,Ee.clientY),A.subVectors(_,d).multiplyScalar(n.rotateSpeed);const Ve=n.domElement;re(2*Math.PI*A.x/Ve.clientHeight),de(2*Math.PI*A.y/Ve.clientHeight),d.copy(_),n.update()}function Qe(Ee){I.set(Ee.clientX,Ee.clientY),k.subVectors(I,P),k.y>0?Te(Z()):k.y<0&&Se(Z()),P.copy(I),n.update()}function Je(Ee){v.set(Ee.clientX,Ee.clientY),T.subVectors(v,E).multiplyScalar(n.panSpeed),we(T.x,T.y),E.copy(v),n.update()}function ze(Ee){Ee.deltaY<0?Se(Z()):Ee.deltaY>0&&Te(Z()),n.update()}function ut(Ee){let Ve=!1;switch(Ee.code){case n.keys.UP:Ee.ctrlKey||Ee.metaKey||Ee.shiftKey?de(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):we(0,n.keyPanSpeed),Ve=!0;break;case n.keys.BOTTOM:Ee.ctrlKey||Ee.metaKey||Ee.shiftKey?de(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):we(0,-n.keyPanSpeed),Ve=!0;break;case n.keys.LEFT:Ee.ctrlKey||Ee.metaKey||Ee.shiftKey?re(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):we(n.keyPanSpeed,0),Ve=!0;break;case n.keys.RIGHT:Ee.ctrlKey||Ee.metaKey||Ee.shiftKey?re(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):we(-n.keyPanSpeed,0),Ve=!0;break}Ve&&(Ee.preventDefault(),n.update())}function ke(){if(K.length===1)d.set(K[0].pageX,K[0].pageY);else{const Ee=.5*(K[0].pageX+K[1].pageX),Ve=.5*(K[0].pageY+K[1].pageY);d.set(Ee,Ve)}}function L(){if(K.length===1)E.set(K[0].pageX,K[0].pageY);else{const Ee=.5*(K[0].pageX+K[1].pageX),Ve=.5*(K[0].pageY+K[1].pageY);E.set(Ee,Ve)}}function nt(){const Ee=K[0].pageX-K[1].pageX,Ve=K[0].pageY-K[1].pageY,jt=Math.sqrt(Ee*Ee+Ve*Ve);P.set(0,jt)}function In(){n.enableZoom&&nt(),n.enablePan&&L()}function Xt(){n.enableZoom&&nt(),n.enableRotate&&ke()}function Pn(Ee){if(K.length==1)_.set(Ee.pageX,Ee.pageY);else{const jt=bn(Ee),Zt=.5*(Ee.pageX+jt.x),St=.5*(Ee.pageY+jt.y);_.set(Zt,St)}A.subVectors(_,d).multiplyScalar(n.rotateSpeed);const Ve=n.domElement;re(2*Math.PI*A.x/Ve.clientHeight),de(2*Math.PI*A.y/Ve.clientHeight),d.copy(_)}function vt(Ee){if(K.length===1)v.set(Ee.pageX,Ee.pageY);else{const Ve=bn(Ee),jt=.5*(Ee.pageX+Ve.x),Zt=.5*(Ee.pageY+Ve.y);v.set(jt,Zt)}T.subVectors(v,E).multiplyScalar(n.panSpeed),we(T.x,T.y),E.copy(v)}function dn(Ee){const Ve=bn(Ee),jt=Ee.pageX-Ve.x,Zt=Ee.pageY-Ve.y,St=Math.sqrt(jt*jt+Zt*Zt);I.set(0,St),k.set(0,Math.pow(I.y/P.y,n.zoomSpeed)),Te(k.y),P.copy(I)}function Yt(Ee){n.enableZoom&&dn(Ee),n.enablePan&&vt(Ee)}function yn(Ee){n.enableZoom&&dn(Ee),n.enableRotate&&Pn(Ee)}function Cr(Ee){n.enabled!==!1&&(K.length===0&&(n.domElement.setPointerCapture(Ee.pointerId),n.domElement.addEventListener("pointermove",Qr),n.domElement.addEventListener("pointerup",Ai)),wt(Ee),Ee.pointerType==="touch"?Ae(Ee):qr(Ee))}function Qr(Ee){n.enabled!==!1&&(Ee.pointerType==="touch"?fe(Ee):xn(Ee))}function Ai(Ee){Et(Ee),K.length===0&&(n.domElement.releasePointerCapture(Ee.pointerId),n.domElement.removeEventListener("pointermove",Qr),n.domElement.removeEventListener("pointerup",Ai)),n.dispatchEvent(I_),i=r.NONE}function oi(Ee){Et(Ee)}function qr(Ee){let Ve;switch(Ee.button){case 0:Ve=n.mouseButtons.LEFT;break;case 1:Ve=n.mouseButtons.MIDDLE;break;case 2:Ve=n.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case tu.DOLLY:if(n.enableZoom===!1)return;He(Ee),i=r.DOLLY;break;case tu.ROTATE:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(n.enablePan===!1)return;j(Ee),i=r.PAN}else{if(n.enableRotate===!1)return;Oe(Ee),i=r.ROTATE}break;case tu.PAN:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(n.enableRotate===!1)return;Oe(Ee),i=r.ROTATE}else{if(n.enablePan===!1)return;j(Ee),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(Yf)}function xn(Ee){switch(i){case r.ROTATE:if(n.enableRotate===!1)return;ht(Ee);break;case r.DOLLY:if(n.enableZoom===!1)return;Qe(Ee);break;case r.PAN:if(n.enablePan===!1)return;Je(Ee);break}}function ei(Ee){n.enabled===!1||n.enableZoom===!1||i!==r.NONE||(Ee.preventDefault(),n.dispatchEvent(Yf),ze(Ee),n.dispatchEvent(I_))}function ir(Ee){n.enabled===!1||n.enablePan===!1||ut(Ee)}function Ae(Ee){switch(Lt(Ee),K.length){case 1:switch(n.touches.ONE){case nu.ROTATE:if(n.enableRotate===!1)return;ke(),i=r.TOUCH_ROTATE;break;case nu.PAN:if(n.enablePan===!1)return;L(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case nu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;In(),i=r.TOUCH_DOLLY_PAN;break;case nu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Xt(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(Yf)}function fe(Ee){switch(Lt(Ee),i){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;Pn(Ee),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;vt(Ee),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Yt(Ee),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;yn(Ee),n.update();break;default:i=r.NONE}}function ot(Ee){n.enabled!==!1&&Ee.preventDefault()}function wt(Ee){K.push(Ee)}function Et(Ee){delete ee[Ee.pointerId];for(let Ve=0;Ve<K.length;Ve++)if(K[Ve].pointerId==Ee.pointerId){K.splice(Ve,1);return}}function Lt(Ee){let Ve=ee[Ee.pointerId];Ve===void 0&&(Ve=new Yr,ee[Ee.pointerId]=Ve),Ve.set(Ee.pageX,Ee.pageY)}function bn(Ee){const Ve=Ee.pointerId===K[0].pointerId?K[1]:K[0];return ee[Ve.pointerId]}n.domElement.addEventListener("contextmenu",ot),n.domElement.addEventListener("pointerdown",Cr),n.domElement.addEventListener("pointercancel",oi),n.domElement.addEventListener("wheel",ei,{passive:!1}),this.update()}}class ex extends Wu{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ox(t)}),this.register(function(t){return new dx(t)}),this.register(function(t){return new hx(t)}),this.register(function(t){return new ax(t)}),this.register(function(t){return new ux(t)}),this.register(function(t){return new cx(t)}),this.register(function(t){return new lx(t)}),this.register(function(t){return new ix(t)}),this.register(function(t){return new fx(t)}),this.register(function(t){return new sx(t)}),this.register(function(t){return new nx(t)}),this.register(function(t){return new px(t)}),this.register(function(t){return new mx(t)})}load(e,t,n,r){const i=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=Ua.extractUrlBase(e),this.manager.itemStart(e);const a=function(f){r?r(f):console.error(f),i.manager.itemError(e),i.manager.itemEnd(e)},u=new Nl(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{i.parse(f,s,function(l){t(l),i.manager.itemEnd(e)},a)}catch(l){a(l)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},a={};if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ua.decodeText(new Uint8Array(e,0,4))===cy){try{s[Gi.KHR_BINARY_GLTF]=new _x(e)}catch(l){r&&r(l);return}i=JSON.parse(s[Gi.KHR_BINARY_GLTF].content)}else i=JSON.parse(Ua.decodeText(new Uint8Array(e)));else i=e;if(i.asset===void 0||i.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new Mx(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const l=this.pluginCallbacks[f](u);a[l.name]=l,s[l.name]=!0}if(i.extensionsUsed)for(let f=0;f<i.extensionsUsed.length;++f){const l=i.extensionsUsed[f],p=i.extensionsRequired||[];switch(l){case Gi.KHR_MATERIALS_UNLIT:s[l]=new rx;break;case Gi.KHR_DRACO_MESH_COMPRESSION:s[l]=new gx(i,this.dracoLoader);break;case Gi.KHR_TEXTURE_TRANSFORM:s[l]=new yx;break;case Gi.KHR_MESH_QUANTIZATION:s[l]=new vx;break;default:p.indexOf(l)>=0&&a[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function tx(){let o={};return{get:function(e){return o[e]},add:function(e,t){o[e]=t},remove:function(e){delete o[e]},removeAll:function(){o={}}}}const Gi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class nx{constructor(e){this.parser=e,this.name=Gi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,u=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let f;const l=new yi(16777215);u.color!==void 0&&l.fromArray(u.color);const p=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new Ed(l),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new kB(l),f.distance=p;break;case"spot":f=new UB(l),f.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,ia(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(f),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(u){return n._getNodeRef(t.cache,a,u)})}}class rx{constructor(){this.name=Gi.KHR_MATERIALS_UNLIT}getMaterialType(){return Ia}extendParams(e,t,n){const r=[];e.color=new yi(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const s=i.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}i.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",i.baseColorTexture,Vi))}return Promise.all(r)}}class ix{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class ox{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Yr(a,a)}return Promise.all(i)}}class sx{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class ax{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new yi(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];return s.sheenColorFactor!==void 0&&t.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Vi)),s.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class ux{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class cx{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new yi(a[0],a[1],a[2]),Promise.all(i)}}class lx{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class fx{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new yi(a[0],a[1],a[2]),s.specularColorTexture!==void 0&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,Vi)),Promise.all(i)}}class dx{constructor(e){this.parser=e,this.name=Gi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class hx{constructor(e){this.parser=e,this.name=Gi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],a=r.images[s.source];let u=n.textureLoader;if(a.uri){const f=n.options.manager.getHandler(a.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,s.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class px{constructor(e){this.name=Gi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const u=r.byteOffset||0,f=r.byteLength||0,l=r.count,p=r.byteStride,d=new Uint8Array(a,u,f);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(l,p,d,r.mode,r.filter).then(function(_){return _.buffer}):s.ready.then(function(){const _=new ArrayBuffer(l*p);return s.decodeGltfBuffer(new Uint8Array(_),l,p,d,r.mode,r.filter),_})})}else return null}}class mx{constructor(e){this.name=Gi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const f of r.primitives)if(f.mode!==ns.TRIANGLES&&f.mode!==ns.TRIANGLE_STRIP&&f.mode!==ns.TRIANGLE_FAN&&f.mode!==void 0)return null;const s=n.extensions[this.name].attributes,a=[],u={};for(const f in s)a.push(this.parser.getDependency("accessor",s[f]).then(l=>(u[f]=l,u[f])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(f=>{const l=f.pop(),p=l.isGroup?l.children:[l],d=f[0].count,_=[];for(const A of p){const E=new Ei,v=new Ge,T=new Ms,P=new Ge(1,1,1),I=new AB(A.geometry,A.material,d);for(let k=0;k<d;k++)u.TRANSLATION&&v.fromBufferAttribute(u.TRANSLATION,k),u.ROTATION&&T.fromBufferAttribute(u.ROTATION,k),u.SCALE&&P.fromBufferAttribute(u.SCALE,k),I.setMatrixAt(k,E.compose(v,T,P));for(const k in u)k!=="TRANSLATION"&&k!=="ROTATION"&&k!=="SCALE"&&A.geometry.setAttribute(k,u[k]);oo.prototype.copy.call(I,A),I.frustumCulled=!1,this.parser.assignFinalMaterial(I),_.push(I)}return l.isGroup?(l.clear(),l.add(..._),l):_[0]}))}}const cy="glTF",nc=12,P_={JSON:1313821514,BIN:5130562};class _x{constructor(e){this.name=Gi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,nc);if(this.header={magic:Ua.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cy)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-nc,r=new DataView(e,nc);let i=0;for(;i<n;){const s=r.getUint32(i,!0);i+=4;const a=r.getUint32(i,!0);if(i+=4,a===P_.JSON){const u=new Uint8Array(e,nc+i,s);this.content=Ua.decodeText(u)}else if(a===P_.BIN){const u=nc+i;this.body=e.slice(u,u+s)}i+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gx{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},u={},f={};for(const l in s){const p=Td[l]||l.toLowerCase();a[p]=s[l]}for(const l in e.attributes){const p=Td[l]||l.toLowerCase();if(s[l]!==void 0){const d=n.accessors[e.attributes[l]],_=Su[d.componentType];f[p]=_.name,u[p]=d.normalized===!0}}return t.getDependency("bufferView",i).then(function(l){return new Promise(function(p){r.decodeDracoFile(l,function(d){for(const _ in d.attributes){const A=d.attributes[_],E=u[_];E!==void 0&&(A.normalized=E)}p(d)},a,f)})})}}class yx{constructor(){this.name=Gi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class vx{constructor(){this.name=Gi.KHR_MESH_QUANTIZATION}}class ly extends Nc{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[i+s];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=a*2,f=a*3,l=r-t,p=(n-t)/l,d=p*p,_=d*p,A=e*f,E=A-f,v=-2*_+3*d,T=_-d,P=1-v,I=T-d+p;for(let k=0;k!==a;k++){const K=s[E+k+a],ee=s[E+k+u]*l,me=s[A+k+a],Z=s[A+k]*l;i[k]=P*K+I*ee+v*me+T*Z}return i}}const Ax=new Ms;class bx extends ly{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return Ax.fromArray(i).normalize().toArray(i),i}}const ns={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Su={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},F_={9728:To,9729:qo,9984:_d,9985:Lg,9986:Cl,9987:Va},L_={33071:is,33648:Ll,10497:Ru},$f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Td={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zs={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ex={CUBICSPLINE:void 0,LINEAR:Pu,STEP:Tc},Zf={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Tx(o){return o.DefaultMaterial===void 0&&(o.DefaultMaterial=new Rh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ua})),o.DefaultMaterial}function rc(o,e,t){for(const n in t.extensions)o[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ia(o,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(o.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function wx(o,e,t){let n=!1,r=!1,i=!1;for(let f=0,l=e.length;f<l;f++){const p=e[f];if(p.POSITION!==void 0&&(n=!0),p.NORMAL!==void 0&&(r=!0),p.COLOR_0!==void 0&&(i=!0),n&&r&&i)break}if(!n&&!r&&!i)return Promise.resolve(o);const s=[],a=[],u=[];for(let f=0,l=e.length;f<l;f++){const p=e[f];if(n){const d=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):o.attributes.position;s.push(d)}if(r){const d=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):o.attributes.normal;a.push(d)}if(i){const d=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):o.attributes.color;u.push(d)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(u)]).then(function(f){const l=f[0],p=f[1],d=f[2];return n&&(o.morphAttributes.position=l),r&&(o.morphAttributes.normal=p),i&&(o.morphAttributes.color=d),o.morphTargetsRelative=!0,o})}function Cx(o,e){if(o.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)o.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(o.morphTargetInfluences.length===t.length){o.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)o.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Sx(o){const e=o.extensions&&o.extensions[Gi.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+O_(e.attributes):t=o.indices+":"+O_(o.attributes)+":"+o.mode,t}function O_(o){let e="";const t=Object.keys(o).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+o[t[n]]+";";return e}function wd(o){switch(o){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Bx(o){return o.search(/\.jpe?g($|\?)/i)>0||o.search(/^data\:image\/jpeg/)===0?"image/jpeg":o.search(/\.webp($|\?)/i)>0||o.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const xx=new Ei;class Mx{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tx,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&i<98?this.textureLoader=new OB(this.options.manager):this.textureLoader=new VB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Nl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){const a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:n,userData:{}};rc(i,a,r),ia(a,r),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r].joints;for(let a=0,u=s.length;a<u;a++)e[s[a]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(s,a)=>{const u=this.associations.get(s);u!=null&&this.associations.set(a,u);for(const[f,l]of s.children.entries())i(l,a.children[f])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":r=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(i,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(i,s){n.load(Ua.resolveURL(t.uri,r.path),i,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,i=t.byteOffset||0;return n.slice(i,i+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const s=$f[r.type],a=Su[r.componentType],u=r.normalized===!0,f=new a(r.count*s);return Promise.resolve(new xo(f,s,u))}const i=[];return r.bufferView!==void 0?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),r.sparse!==void 0&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(s){const a=s[0],u=$f[r.type],f=Su[r.componentType],l=f.BYTES_PER_ELEMENT,p=l*u,d=r.byteOffset||0,_=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,A=r.normalized===!0;let E,v;if(_&&_!==p){const T=Math.floor(d/_),P="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count;let I=t.cache.get(P);I||(E=new f(a,T*_,r.count*_/l),I=new pB(E,_/l),t.cache.add(P,I)),v=new xh(I,u,d%_/l,A)}else a===null?E=new f(r.count*u):E=new f(a,d,r.count*u),v=new xo(E,u,A);if(r.sparse!==void 0){const T=$f.SCALAR,P=Su[r.sparse.indices.componentType],I=r.sparse.indices.byteOffset||0,k=r.sparse.values.byteOffset||0,K=new P(s[1],I,r.sparse.count*T),ee=new f(s[2],k,r.sparse.count*u);a!==null&&(v=new xo(v.array.slice(),v.itemSize,v.normalized));for(let me=0,Z=K.length;me<Z;me++){const re=K[me];if(v.setX(re,ee[me*u]),u>=2&&v.setY(re,ee[me*u+1]),u>=3&&v.setZ(re,ee[me*u+2]),u>=4&&v.setW(re,ee[me*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,s=t.images[i];let a=this.textureLoader;if(s.uri){const u=n.manager.getHandler(s.uri);u!==null&&(a=u)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],a=i.images[t],u=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(t,n).then(function(l){l.flipY=!1,l.name=s.name||a.name||"";const d=(i.samplers||{})[s.sampler]||{};return l.magFilter=F_[d.magFilter]||qo,l.minFilter=F_[d.minFilter]||Va,l.wrapS=L_[d.wrapS]||Ru,l.wrapT=L_[d.wrapT]||Ru,r.associations.set(l,{textures:e}),l}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const s=r.images[e],a=self.URL||self.webkitURL;let u=s.uri||"",f=!1;if(s.bufferView!==void 0)u=n.getDependency("bufferView",s.bufferView).then(function(p){f=!0;const d=new Blob([p],{type:s.mimeType});return u=a.createObjectURL(d),u});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(u).then(function(p){return new Promise(function(d,_){let A=d;t.isImageBitmapLoader===!0&&(A=function(E){const v=new Bo(E);v.needsUpdate=!0,d(v)}),t.load(Ua.resolveURL(p,i.path),A,void 0,_)})}).then(function(p){return f===!0&&a.revokeObjectURL(u),p.userData.mimeType=s.mimeType||Bx(s.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),p});return this.sourceCache[e]=l,l}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[Gi.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[Gi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const u=i.associations.get(s);s=i.extensions[Gi.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),i.associations.set(s,u)}}return r!==void 0&&(s.encoding=r),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let u=this.cache.get(a);u||(u=new oy,Ss.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(a,u)),n=u}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let u=this.cache.get(a);u||(u=new iy,Ss.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(a,u)),n=u}if(r||i||s){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let u=this.cache.get(a);u||(u=n.clone(),i&&(u.vertexColors=!0),s&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(a,u),this.associations.set(u,this.associations.get(n))),n=u}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return Rh}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let s;const a={},u=i.extensions||{},f=[];if(u[Gi.KHR_MATERIALS_UNLIT]){const p=r[Gi.KHR_MATERIALS_UNLIT];s=p.getMaterialType(),f.push(p.extendParams(a,i,t))}else{const p=i.pbrMetallicRoughness||{};if(a.color=new yi(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const d=p.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}p.baseColorTexture!==void 0&&f.push(t.assignTexture(a,"map",p.baseColorTexture,Vi)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),f.push(t.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),s=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}i.doubleSided===!0&&(a.side=nf);const l=i.alphaMode||Zf.OPAQUE;if(l===Zf.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===Zf.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&s!==Ia&&(f.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new Yr(1,1),i.normalTexture.scale!==void 0)){const p=i.normalTexture.scale;a.normalScale.set(p,p)}return i.occlusionTexture!==void 0&&s!==Ia&&(f.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&s!==Ia&&(a.emissive=new yi().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&s!==Ia&&f.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,Vi)),Promise.all(f).then(function(){const p=new s(a);return i.name&&(p.name=i.name),ia(p,i),t.associations.set(p,{materials:e}),i.extensions&&rc(r,p,i),p})}createUniqueName(e){const t=Ji.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(a){return n[Gi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(u){return N_(u,a,t)})}const s=[];for(let a=0,u=e.length;a<u;a++){const f=e[a],l=Sx(f),p=r[l];if(p)s.push(p.promise);else{let d;f.extensions&&f.extensions[Gi.KHR_DRACO_MESH_COMPRESSION]?d=i(f):d=N_(new gs,f,t),r[l]={primitive:f,promise:d},s.push(d)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],s=i.primitives,a=[];for(let u=0,f=s.length;u<f;u++){const l=s[u].material===void 0?Tx(this.cache):this.getDependency("material",s[u].material);a.push(l)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(u){const f=u.slice(0,u.length-1),l=u[u.length-1],p=[];for(let _=0,A=l.length;_<A;_++){const E=l[_],v=s[_];let T;const P=f[_];if(v.mode===ns.TRIANGLES||v.mode===ns.TRIANGLE_STRIP||v.mode===ns.TRIANGLE_FAN||v.mode===void 0)T=i.isSkinnedMesh===!0?new _B(E,P):new ss(E,P),T.isSkinnedMesh===!0&&!T.geometry.attributes.skinWeight.normalized&&T.normalizeSkinWeights(),v.mode===ns.TRIANGLE_STRIP?T.geometry=U_(T.geometry,XE):v.mode===ns.TRIANGLE_FAN&&(T.geometry=U_(T.geometry,Ng));else if(v.mode===ns.LINES)T=new bB(E,P);else if(v.mode===ns.LINE_STRIP)T=new Dh(E,P);else if(v.mode===ns.LINE_LOOP)T=new EB(E,P);else if(v.mode===ns.POINTS)T=new TB(E,P);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(T.geometry.morphAttributes).length>0&&Cx(T,i),T.name=t.createUniqueName(i.name||"mesh_"+e),ia(T,i),v.extensions&&rc(r,T,v),t.assignFinalMaterial(T),p.push(T)}for(let _=0,A=p.length;_<A;_++)t.associations.set(p[_],{meshes:e,primitives:_});if(p.length===1)return p[0];const d=new Pa;t.associations.set(d,{meshes:e});for(let _=0,A=p.length;_<A;_++)d.add(p[_]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ho(hT.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Sh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ia(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this.getDependency("node",t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const i=r.pop(),s=r,a=[],u=[];for(let f=0,l=s.length;f<l;f++){const p=s[f];if(p){a.push(p);const d=new Ei;i!==null&&d.fromArray(i.array,f*16),u.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new Mh(a,u)})}loadAnimation(e){const n=this.json.animations[e],r=[],i=[],s=[],a=[],u=[];for(let f=0,l=n.channels.length;f<l;f++){const p=n.channels[f],d=n.samplers[p.sampler],_=p.target,A=_.node,E=n.parameters!==void 0?n.parameters[d.input]:d.input,v=n.parameters!==void 0?n.parameters[d.output]:d.output;r.push(this.getDependency("node",A)),i.push(this.getDependency("accessor",E)),s.push(this.getDependency("accessor",v)),a.push(d),u.push(_)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(s),Promise.all(a),Promise.all(u)]).then(function(f){const l=f[0],p=f[1],d=f[2],_=f[3],A=f[4],E=[];for(let T=0,P=l.length;T<P;T++){const I=l[T],k=p[T],K=d[T],ee=_[T],me=A[T];if(I===void 0)continue;I.updateMatrix();let Z;switch(Zs[me.path]){case Zs.weights:Z=Bc;break;case Zs.rotation:Z=qa;break;case Zs.position:case Zs.scale:default:Z=xc;break}const re=I.name?I.name:I.uuid,de=ee.interpolation!==void 0?Ex[ee.interpolation]:Pu,Ie=[];Zs[me.path]===Zs.weights?I.traverse(function(we){we.morphTargetInfluences&&Ie.push(we.name?we.name:we.uuid)}):Ie.push(re);let Pe=K.array;if(K.normalized){const we=wd(Pe.constructor),Te=new Float32Array(Pe.length);for(let Se=0,Oe=Pe.length;Se<Oe;Se++)Te[Se]=Pe[Se]*we;Pe=Te}for(let we=0,Te=Ie.length;we<Te;we++){const Se=new Z(Ie[we]+"."+Zs[me.path],k.array,Pe,de);ee.interpolation==="CUBICSPLINE"&&(Se.createInterpolant=function(He){const j=this instanceof qa?bx:ly;return new j(this.times,this.values,this.getValueSize()/3,He)},Se.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push(Se)}}const v=n.name?n.name:"animation_"+e;return new MB(v,void 0,E)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(i){const s=n._getNodeRef(n.meshCache,r.mesh,i);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let u=0,f=r.weights.length;u<f;u++)a.morphTargetInfluences[u]=r.weights[u]}),s})}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],s=i.name?r.createUniqueName(i.name):"";return function(){const a=[],u=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});u&&a.push(u),i.camera!==void 0&&a.push(r.getDependency("camera",i.camera).then(function(d){return r._getNodeRef(r.cameraCache,i.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){a.push(d)});const f=[],l=i.children||[];for(let d=0,_=l.length;d<_;d++)f.push(r.getDependency("node",l[d]));const p=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([Promise.all(a),Promise.all(f),p])}().then(function(a){const u=a[0],f=a[1],l=a[2];let p;if(i.isBone===!0?p=new ry:u.length>1?p=new Pa:u.length===1?p=u[0]:p=new oo,p!==u[0])for(let d=0,_=u.length;d<_;d++)p.add(u[d]);if(i.name&&(p.userData.name=i.name,p.name=s),ia(p,i),i.extensions&&rc(n,p,i),i.matrix!==void 0){const d=new Ei;d.fromArray(i.matrix),p.applyMatrix4(d)}else i.translation!==void 0&&p.position.fromArray(i.translation),i.rotation!==void 0&&p.quaternion.fromArray(i.rotation),i.scale!==void 0&&p.scale.fromArray(i.scale);r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,l!==null&&p.traverse(function(d){d.isSkinnedMesh&&d.bind(l,xx)});for(let d=0,_=f.length;d<_;d++)p.add(f[d]);return p})}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new Pa;n.name&&(i.name=r.createUniqueName(n.name)),ia(i,n),n.extensions&&rc(t,i,n);const s=n.nodes||[],a=[];for(let u=0,f=s.length;u<f;u++)a.push(r.getDependency("node",s[u]));return Promise.all(a).then(function(u){for(let l=0,p=u.length;l<p;l++)i.add(u[l]);const f=l=>{const p=new Map;for(const[d,_]of r.associations)(d instanceof Ss||d instanceof Bo)&&p.set(d,_);return l.traverse(d=>{const _=r.associations.get(d);_!=null&&p.set(d,_)}),p};return r.associations=f(i),i})}}function Dx(o,e,t){const n=e.attributes,r=new $a;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],u=a.min,f=a.max;if(u!==void 0&&f!==void 0){if(r.set(new Ge(u[0],u[1],u[2]),new Ge(f[0],f[1],f[2])),a.normalized){const l=wd(Su[a.componentType]);r.min.multiplyScalar(l),r.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const a=new Ge,u=new Ge;for(let f=0,l=i.length;f<l;f++){const p=i[f];if(p.POSITION!==void 0){const d=t.json.accessors[p.POSITION],_=d.min,A=d.max;if(_!==void 0&&A!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(A[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(A[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(A[2]))),d.normalized){const E=wd(Su[d.componentType]);u.multiplyScalar(E)}a.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}o.boundingBox=r;const s=new Uu;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,o.boundingSphere=s}function N_(o,e,t){const n=e.attributes,r=[];function i(s,a){return t.getDependency("accessor",s).then(function(u){o.setAttribute(a,u)})}for(const s in n){const a=Td[s]||s.toLowerCase();a in o.attributes||r.push(i(n[s],a))}if(e.indices!==void 0&&!o.index){const s=t.getDependency("accessor",e.indices).then(function(a){o.setIndex(a)});r.push(s)}return ia(o,e),Dx(o,e,t),Promise.all(r).then(function(){return e.targets!==void 0?wx(o,e.targets,t):o})}function U_(o,e){let t=o.getIndex();if(t===null){const s=[],a=o.getAttribute("position");if(a!==void 0){for(let u=0;u<a.count;u++)s.push(u);o.setIndex(s),t=o.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),o}const n=t.count-2,r=[];if(e===Ng)for(let s=1;s<=n;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<n;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=o.clone();return i.setIndex(r),i}const Qf=new WeakMap;class Rx extends Wu{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new Nl(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,s=>{this.decodeDracoFile(s,t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(Qf.has(e)){const u=Qf.get(e);if(u.key===n)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(i,s).then(u=>(r=u,new Promise((f,l)=>{r._callbacks[i]={resolve:f,reject:l},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return a.catch(()=>!0).then(()=>{r&&i&&this._releaseTask(r,i)}),Qf.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new gs;e.index&&t.setIndex(new xo(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,s=r.array,a=r.itemSize;t.setAttribute(i,new xo(s,a))}return t}_loadLibrary(e,t){const n=new Nl(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,i)=>{n.load(e,r,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const i=Ix.toString(),s=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(i){const s=i.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,i){return r._taskLoad>i._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Ix(){let o,e;onmessage=function(s){const a=s.data;switch(a.type){case"init":o=a.decoderConfig,e=new Promise(function(l){o.onModuleLoaded=function(p){l({draco:p})},DracoDecoderModule(o)});break;case"decode":const u=a.buffer,f=a.taskConfig;e.then(l=>{const p=l.draco,d=new p.Decoder,_=new p.DecoderBuffer;_.Init(new Int8Array(u),u.byteLength);try{const A=t(p,d,_,f),E=A.attributes.map(v=>v.array.buffer);A.index&&E.push(A.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:A},E)}catch(A){console.error(A),self.postMessage({type:"error",id:a.id,error:A.message})}finally{p.destroy(_),p.destroy(d)}});break}};function t(s,a,u,f){const l=f.attributeIDs,p=f.attributeTypes;let d,_;const A=a.GetEncodedGeometryType(u);if(A===s.TRIANGULAR_MESH)d=new s.Mesh,_=a.DecodeBufferToMesh(u,d);else if(A===s.POINT_CLOUD)d=new s.PointCloud,_=a.DecodeBufferToPointCloud(u,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const E={index:null,attributes:[]};for(const v in l){const T=self[p[v]];let P,I;if(f.useUniqueIDs)I=l[v],P=a.GetAttributeByUniqueId(d,I);else{if(I=a.GetAttributeId(d,s[l[v]]),I===-1)continue;P=a.GetAttribute(d,I)}E.attributes.push(r(s,a,d,v,T,P))}return A===s.TRIANGULAR_MESH&&(E.index=n(s,a,d)),s.destroy(d),E}function n(s,a,u){const l=u.num_faces()*3,p=l*4,d=s._malloc(p);a.GetTrianglesUInt32Array(u,p,d);const _=new Uint32Array(s.HEAPF32.buffer,d,l).slice();return s._free(d),{array:_,itemSize:1}}function r(s,a,u,f,l,p){const d=p.num_components(),A=u.num_points()*d,E=A*l.BYTES_PER_ELEMENT,v=i(s,l),T=s._malloc(E);a.GetAttributeDataArrayForAllPoints(u,p,v,E,T);const P=new l(s.HEAPF32.buffer,T,A).slice();return s._free(T),{name:f,array:P,itemSize:d}}function i(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}const xl=400,Ml=400;function Px(o,e){const t=new QB(o,e.domElement);return t.listenToKeyEvents(window),t.enableDamping=!0,t.dampingFactor=.05,t.screenSpacePanning=!0,t.minDistance=1,t.maxDistance=500,t.maxPolarAngle=Math.PI,t.autoRotate=!0,t}function Fx(){const o=new Ed(16777215,.8*Math.PI);o.position.set(.5,0,.866);const e=new Ed(16777215,.8*Math.PI);e.position.set(-.5,0,-.866);const t=new WB(16777215,.3);return[o,e,t]}function Lx(){const o=new ny({antialias:!0});return o.outputEncoding=Vi,o.physicallyCorrectLights=!0,o.setPixelRatio(window.devicePixelRatio),o.setSize(xl,Ml),o.setClearColor(13421772),o}function G_(){const o=new hB;o.background=new yi(1644825);const e=Lx(),t=new Ho(60,xl/Ml,1,1e3),n=Px(t,e);Fx().forEach(a=>o.add(a)),window.addEventListener("resize",r);function r(){t.aspect=xl/Ml,t.updateProjectionMatrix(),e.setSize(xl,Ml)}function i(){requestAnimationFrame(i),n.update(),s()}const s=()=>e.render(o,t);return{scene:o,camera:t,renderer:e,animate:i}}function Ox(){const o=new ex,e=new Rx;return e.setDecoderPath("/gltf-optimizer/"),o.setDRACOLoader(e),o}async function ed(o,e){const n=await Ox().loadAsync(o),r=new $a().setFromObject(n.scene),i=r.getSize(new Ge).length(),s=r.getCenter(new Ge);return n.scene.position.x=-s.x,n.scene.position.y=-s.y,n.scene.position.z=-s.z,e.near=i/100,e.far=i*100,e.updateProjectionMatrix(),e.position.copy(s),e.position.x+=i/2,e.position.y+=i/5,e.position.z+=i/2,e.lookAt(s),n}function Nx(o){let e,t,n,r;return e=new em({props:{id:"article1",fileName:o[2],size:o[4],scene:o[0]}}),n=new em({props:{id:"article2",fileName:o[3],size:o[5],scene:o[1]}}),{c(){ea(e.$$.fragment),t=Ro(),ea(n.$$.fragment)},l(i){ta(e.$$.fragment,i),t=Io(i),ta(n.$$.fragment,i)},m(i,s){na(e,i,s),io(i,t,s),na(n,i,s),r=!0},p(i,s){const a={};s&4&&(a.fileName=i[2]),s&16&&(a.size=i[4]),s&1&&(a.scene=i[0]),e.$set(a);const u={};s&8&&(u.fileName=i[3]),s&32&&(u.size=i[5]),s&2&&(u.scene=i[1]),n.$set(u)},i(i){r||(Gs(e.$$.fragment,i),Gs(n.$$.fragment,i),r=!0)},o(i){ks(e.$$.fragment,i),ks(n.$$.fragment,i),r=!1},d(i){ra(e,i),i&&Dr(t),ra(n,i)}}}function Ux(o){let e,t,n,r,i,s,a,u,f,l,p,d,_,A,E,v,T,P,I;n=new K0({}),i=new j0({}),a=new H0({props:{onChangeFile:o[11]}}),l=new eE({props:{disabled:o[6],onClick:o[12]}});function k(re){o[14](re)}function K(re){o[15](re)}function ee(re){o[16](re)}function me(re){o[17](re)}let Z={reCompress:o[13],disabledReCompress:o[6]};return o[7]!==void 0&&(Z.emissiveStrength=o[7]),o[8]!==void 0&&(Z.weld=o[8]),o[9]!==void 0&&(Z.simplify=o[9]),o[10]!==void 0&&(Z.texture=o[10]),d=new rE({props:Z}),Uc.push(()=>Gc(d,"emissiveStrength",k,o[7])),Uc.push(()=>Gc(d,"weld",K,o[8])),Uc.push(()=>Gc(d,"simplify",ee,o[9])),Uc.push(()=>Gc(d,"texture",me,o[10])),P=new X0({props:{$$slots:{default:[Nx]},$$scope:{ctx:o}}}),{c(){e=xi("meta"),t=Ro(),ea(n.$$.fragment),r=Ro(),ea(i.$$.fragment),s=Ro(),ea(a.$$.fragment),u=Ro(),f=xi("div"),ea(l.$$.fragment),p=Ro(),ea(d.$$.fragment),T=Ro(),ea(P.$$.fragment),this.h()},l(re){const de=_y("svelte-17er649",document.head);e=Mi(de,"META",{name:!0,content:!0,class:!0}),de.forEach(Dr),t=Io(re),ta(n.$$.fragment,re),r=Io(re),ta(i.$$.fragment,re),s=Io(re),ta(a.$$.fragment,re),u=Io(re),f=Mi(re,"DIV",{style:!0,class:!0});var Ie=to(f);ta(l.$$.fragment,Ie),Ie.forEach(Dr),p=Io(re),ta(d.$$.fragment,re),T=Io(re),ta(P.$$.fragment,re),this.h()},h(){document.title="Online glTF optimizer",er(e,"name","description"),er(e,"content","Optimize your glTF. Compress to Draco and convert texture to WebP"),er(e,"class","svelte-sdhtho"),kc(f,"display","flex"),kc(f,"justify-content","center"),kc(f,"align-items","center"),kc(f,"margin","20px"),er(f,"class","svelte-sdhtho")},m(re,de){jr(document.head,e),io(re,t,de),na(n,re,de),io(re,r,de),na(i,re,de),io(re,s,de),na(a,re,de),io(re,u,de),io(re,f,de),na(l,f,null),io(re,p,de),na(d,re,de),io(re,T,de),na(P,re,de),I=!0},p(re,[de]){const Ie={};de&64&&(Ie.disabled=re[6]),l.$set(Ie);const Pe={};de&64&&(Pe.disabledReCompress=re[6]),!_&&de&128&&(_=!0,Pe.emissiveStrength=re[7],Hc(()=>_=!1)),!A&&de&256&&(A=!0,Pe.weld=re[8],Hc(()=>A=!1)),!E&&de&512&&(E=!0,Pe.simplify=re[9],Hc(()=>E=!1)),!v&&de&1024&&(v=!0,Pe.texture=re[10],Hc(()=>v=!1)),d.$set(Pe);const we={};de&67108927&&(we.$$scope={dirty:de,ctx:re}),P.$set(we)},i(re){I||(Gs(n.$$.fragment,re),Gs(i.$$.fragment,re),Gs(a.$$.fragment,re),Gs(l.$$.fragment,re),Gs(d.$$.fragment,re),Gs(P.$$.fragment,re),I=!0)},o(re){ks(n.$$.fragment,re),ks(i.$$.fragment,re),ks(a.$$.fragment,re),ks(l.$$.fragment,re),ks(d.$$.fragment,re),ks(P.$$.fragment,re),I=!1},d(re){Dr(e),re&&Dr(t),ra(n,re),re&&Dr(r),ra(i,re),re&&Dr(s),ra(a,re),re&&Dr(u),re&&Dr(f),ra(l),re&&Dr(p),ra(d,re),re&&Dr(T),ra(P,re)}}}const k_="compressed.glb";function Gx(o,e,t){let n,r,i,s,a,u,f,l="",p="",d="",_="",A,E,v=!0,T,P=1,I={tolerance:1e-4},k={enabled:!1,ratio:.75,error:.01},K={resize:{resolution:1024,filter:"LANCZOS3"}};Cd(()=>{const{scene:we,camera:Te,renderer:Se,animate:Oe}=G_(),{scene:He,camera:j,renderer:ht,animate:Qe}=G_();r=we,i=He,s=Te,a=j,t(0,u=Se.domElement),t(1,f=ht.domElement),Oe(),Qe()});async function ee(we){n=we[0],t(2,l=n.name),t(3,p=k_),t(4,d=_f(n.size,{base:2,standard:"jedec"}));const Te=URL.createObjectURL(n);A=await ed(Te,s),r.add(A.scene),T=await dd.web(new Uint8Array(await n.arrayBuffer()),{emissiveStrength:P,transform:{simplify:k,weld:I,texture:K}});const Se=URL.createObjectURL(new Blob([T]));t(5,_=_f(T.byteLength,{base:2,standard:"jedec"})),E=await ed(Se,a),i.add(E.scene),t(6,v=!1)}function me(){U0({fileName:k_,arrayBuffer:T})}async function Z(){i.remove(E.scene),T=await dd.web(new Uint8Array(await n.arrayBuffer()),{emissiveStrength:P,transform:{simplify:k,weld:I,texture:K}});const we=URL.createObjectURL(new Blob([T]));t(5,_=_f(T.byteLength,{base:2,standard:"jedec"})),E=await ed(we,a),i.add(E.scene)}function re(we){P=we,t(7,P)}function de(we){I=we,t(8,I)}function Ie(we){k=we,t(9,k)}function Pe(we){K=we,t(10,K)}return[u,f,l,p,d,_,v,P,I,k,K,ee,me,Z,re,de,Ie,Pe]}class aD extends ca{constructor(e){super(),la(this,e,Gx,Ux,fa,{})}}export{aD as default};
