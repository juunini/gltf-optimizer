import{S as ca,i as la,s as fa,k as xi,q as wo,l as Bi,m as to,r as Co,h as Rr,n as Qn,b as io,G as zr,I as ko,J as Oh,B as Vo,K as H_,o as Cd,L as Nh,M as fy,C as dy,D as hy,E as py,F as my,f as Gs,t as ks,a as Ro,c as Io,u as Uh,N as W_,O as vs,P as ws,Q as Uc,R as Gc,w as ea,T as _y,x as ta,p as kc,y as na,U as Hc,z as ra}from"../../chunks/index-b9b514d9.js";var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ou(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var i=Function.bind.apply(e,r);return new i}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(n){var r=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return o[n]}})}),t}var Sd={},Ul={},Mc={};class xd{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;return n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t),this}removeEventListener(e,t){if(this._listeners===void 0)return this;const n=this._listeners[e];if(n!==void 0){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}return this}dispatchEvent(e){if(this._listeners===void 0)return this;const t=this._listeners[e.type];if(t!==void 0){const n=t.slice(0);for(let r=0,i=n.length;r<i;r++)n[r].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}let Ga=class extends xd{constructor(e,t,n,r={}){if(super(),this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=t,this._child=n,this._attributes=r,!t.isOnGraph(n))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._disposed=!0,this.dispatchEvent({type:"dispose",target:this}),super.dispose())}isDisposed(){return this._disposed}},V_=class extends xd{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){return this.listParentEdges(e).map(t=>t.getParent())}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){return this.listChildEdges(e).map(t=>t.getChild())}disconnectParents(e,t){let n=this.listParentEdges(e);return t&&(n=n.filter(r=>t(r.getParent()))),n.forEach(r=>r.dispose()),this}createEdge(e,t,n,r){return this._registerEdge(new Ga(e,t,n,r))}_registerEdge(e){this._edges.add(e);const t=e.getParent();this._parentEdges.has(t)||this._parentEdges.set(t,new Set),this._parentEdges.get(t).add(e);const n=e.getChild();return this._childEdges.has(n)||this._childEdges.set(n,new Set),this._childEdges.get(n).add(e),e.addEventListener("dispose",()=>this._removeEdge(e)),e}_removeEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}};function lc(){return lc=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},lc.apply(this,arguments)}function td(o){return o instanceof Ga}function ic(o){return Array.isArray(o)&&o[0]instanceof Ga}function oc(o){return!!(o&&typeof o=="object"&&Object.values(o)[0]instanceof Ga)}const Ki=Symbol("attributes"),Au=Symbol("immutableKeys");let j_=class extends xd{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[Ki]=void 0,this[Au]=void 0,this.graph=e,this[Au]=new Set,this[Ki]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),t={};for(const n in e){const r=e[n];if(r instanceof j_){const i=this.graph.createEdge(n,this,r);i.addEventListener("dispose",()=>r.dispose()),this[Au].add(n),t[n]=i}else t[n]=r}return t}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,t){for(const n in this[Ki]){const r=this[Ki][n];if(td(r)){const i=r;i.getChild()===e&&this.setRef(n,t,i.getAttributes())}else if(ic(r)){const i=r.find(s=>s.getChild()===e);if(i){const s=i.getAttributes();this.removeRef(n,e).addRef(n,t,s)}}else if(oc(r)){const i=r;for(const s in i){const a=i[s];a.getChild()===e&&this.setRefMap(n,s,t,a.getAttributes())}}}return this}get(e){return this[Ki][e]}set(e,t){return this[Ki][e]=t,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const t=this[Ki][e];return t?t.getChild():null}setRef(e,t,n){if(this[Au].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[Ki][e];if(r&&r.dispose(),!t)return this;const i=this.graph.createEdge(e,this,t,n);return i.addEventListener("dispose",()=>{delete this[Ki][e],this.dispatchEvent({type:"change",attribute:e})}),this[Ki][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this[Ki][e].map(t=>t.getChild())}addRef(e,t,n){const r=this.graph.createEdge(e,this,t,n),i=this[Ki][e];return i.push(r),r.addEventListener("dispose",()=>{const s=i.filter(a=>a!==r);i.length=0;for(const a of s)i.push(a);this.dispatchEvent({type:"change",attribute:e})}),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,t){return this[Ki][e].filter(n=>n.getChild()===t).forEach(n=>n.dispose()),this}listRefMapKeys(e){return Object.keys(this[Ki][e])}listRefMapValues(e){return Object.values(this[Ki][e]).map(t=>t.getChild())}getRefMap(e,t){const n=this[Ki][e];return n[t]?n[t].getChild():null}setRefMap(e,t,n,r){const i=this[Ki][e],s=i[t];if(s&&s.dispose(),!n)return this;r=Object.assign(r||{},{key:t});const a=this.graph.createEdge(e,this,n,lc({},r,{key:t}));return a.addEventListener("dispose",()=>{delete i[t],this.dispatchEvent({type:"change",attribute:e,key:t})}),i[t]=a,this.dispatchEvent({type:"change",attribute:e,key:t})}dispatchEvent(e){return super.dispatchEvent(lc({},e,{target:this})),this.graph.dispatchEvent(lc({},e,{target:this,type:`node:${e.type}`})),this}};var gy=1e-6,xs=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var o=0,e=arguments.length;e--;)o+=arguments[e]*arguments[e];return Math.sqrt(o)});function Dc(){var o=new xs(3);return xs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function bl(o){var e=o[0],t=o[1],n=o[2];return Math.hypot(e,t,n)}function Gh(o,e,t){var n=new xs(3);return n[0]=o,n[1]=e,n[2]=t,n}function nd(o,e,t){return o[0]=Math.min(e[0],t[0]),o[1]=Math.min(e[1],t[1]),o[2]=Math.min(e[2],t[2]),o}function rd(o,e,t){return o[0]=Math.max(e[0],t[0]),o[1]=Math.max(e[1],t[1]),o[2]=Math.max(e[2],t[2]),o}function kh(o,e,t){return o[0]=e[0]*t,o[1]=e[1]*t,o[2]=e[2]*t,o}function Gl(o,e){var t=e[0],n=e[1],r=e[2],i=t*t+n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),o[0]=e[0]*i,o[1]=e[1]*i,o[2]=e[2]*i,o}function yy(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]}function af(o,e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],u=t[2];return o[0]=r*u-i*a,o[1]=i*s-n*u,o[2]=n*a-r*s,o}function Bd(o,e,t){var n=e[0],r=e[1],i=e[2],s=t[3]*n+t[7]*r+t[11]*i+t[15];return s=s||1,o[0]=(t[0]*n+t[4]*r+t[8]*i+t[12])/s,o[1]=(t[1]*n+t[5]*r+t[9]*i+t[13])/s,o[2]=(t[2]*n+t[6]*r+t[10]*i+t[14])/s,o}function vy(o,e,t){var n=e[0],r=e[1],i=e[2];return o[0]=n*t[0]+r*t[3]+i*t[6],o[1]=n*t[1]+r*t[4]+i*t[7],o[2]=n*t[2]+r*t[5]+i*t[8],o}var Ay=bl;(function(){var o=Dc();return function(e,t,n,r,i,s){var a,u;for(t||(t=3),n||(n=0),r?u=Math.min(r*t+n,e.length):u=e.length,a=n;a<u;a+=t)o[0]=e[a],o[1]=e[a+1],o[2]=e[a+2],i(o,o,s),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2];return e}})();function by(o,e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=e[9],d=e[10],_=e[11],A=e[12],E=e[13],v=e[14],T=e[15],I=t*a-n*s,R=t*u-r*s,k=t*f-i*s,K=n*u-r*a,ee=n*f-i*a,_e=r*f-i*u,Q=l*E-p*A,ne=l*v-d*A,de=l*T-_*A,Ie=p*v-d*E,Pe=p*T-_*E,Te=d*T-_*v,Ee=I*Te-R*Pe+k*Ie+K*de-ee*ne+_e*Q;return Ee?(Ee=1/Ee,o[0]=(a*Te-u*Pe+f*Ie)*Ee,o[1]=(r*Pe-n*Te-i*Ie)*Ee,o[2]=(E*_e-v*ee+T*K)*Ee,o[3]=(d*ee-p*_e-_*K)*Ee,o[4]=(u*de-s*Te-f*ne)*Ee,o[5]=(t*Te-r*de+i*ne)*Ee,o[6]=(v*k-A*_e-T*R)*Ee,o[7]=(l*_e-d*k+_*R)*Ee,o[8]=(s*Pe-a*de+f*Q)*Ee,o[9]=(n*de-t*Pe-i*Q)*Ee,o[10]=(A*ee-E*k+T*I)*Ee,o[11]=(p*k-l*ee-_*I)*Ee,o[12]=(a*ne-s*Ie-u*Q)*Ee,o[13]=(t*Ie-n*ne+r*Q)*Ee,o[14]=(E*R-A*K-v*I)*Ee,o[15]=(l*K-p*R+d*I)*Ee,o):null}function Ey(o){var e=o[0],t=o[1],n=o[2],r=o[3],i=o[4],s=o[5],a=o[6],u=o[7],f=o[8],l=o[9],p=o[10],d=o[11],_=o[12],A=o[13],E=o[14],v=o[15],T=e*s-t*i,I=e*a-n*i,R=e*u-r*i,k=t*a-n*s,K=t*u-r*s,ee=n*u-r*a,_e=f*A-l*_,Q=f*E-p*_,ne=f*v-d*_,de=l*E-p*A,Ie=l*v-d*A,Pe=p*v-d*E;return T*Pe-I*Ie+R*de+k*ne-K*Q+ee*_e}function Md(o,e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],u=e[5],f=e[6],l=e[7],p=e[8],d=e[9],_=e[10],A=e[11],E=e[12],v=e[13],T=e[14],I=e[15],R=t[0],k=t[1],K=t[2],ee=t[3];return o[0]=R*n+k*a+K*p+ee*E,o[1]=R*r+k*u+K*d+ee*v,o[2]=R*i+k*f+K*_+ee*T,o[3]=R*s+k*l+K*A+ee*I,R=t[4],k=t[5],K=t[6],ee=t[7],o[4]=R*n+k*a+K*p+ee*E,o[5]=R*r+k*u+K*d+ee*v,o[6]=R*i+k*f+K*_+ee*T,o[7]=R*s+k*l+K*A+ee*I,R=t[8],k=t[9],K=t[10],ee=t[11],o[8]=R*n+k*a+K*p+ee*E,o[9]=R*r+k*u+K*d+ee*v,o[10]=R*i+k*f+K*_+ee*T,o[11]=R*s+k*l+K*A+ee*I,R=t[12],k=t[13],K=t[14],ee=t[15],o[12]=R*n+k*a+K*p+ee*E,o[13]=R*r+k*u+K*d+ee*v,o[14]=R*i+k*f+K*_+ee*T,o[15]=R*s+k*l+K*A+ee*I,o}function Ty(o,e){return o[0]=e[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function wy(o,e){var t=e[0],n=e[1],r=e[2],i=e[4],s=e[5],a=e[6],u=e[8],f=e[9],l=e[10];return o[0]=Math.hypot(t,n,r),o[1]=Math.hypot(i,s,a),o[2]=Math.hypot(u,f,l),o}function Cy(o,e){var t=new xs(3);wy(t,e);var n=1/t[0],r=1/t[1],i=1/t[2],s=e[0]*n,a=e[1]*r,u=e[2]*i,f=e[4]*n,l=e[5]*r,p=e[6]*i,d=e[8]*n,_=e[9]*r,A=e[10]*i,E=s+l+A,v=0;return E>0?(v=Math.sqrt(E+1)*2,o[3]=.25*v,o[0]=(p-_)/v,o[1]=(d-u)/v,o[2]=(a-f)/v):s>l&&s>A?(v=Math.sqrt(1+s-l-A)*2,o[3]=(p-_)/v,o[0]=.25*v,o[1]=(a+f)/v,o[2]=(d+u)/v):l>A?(v=Math.sqrt(1+l-s-A)*2,o[3]=(d-u)/v,o[0]=(a+f)/v,o[1]=.25*v,o[2]=(p+_)/v):(v=Math.sqrt(1+A-s-l)*2,o[3]=(a-f)/v,o[0]=(d+u)/v,o[1]=(p+_)/v,o[2]=.25*v),o}function Sy(o,e,t,n){var r=e[0],i=e[1],s=e[2],a=e[3],u=r+r,f=i+i,l=s+s,p=r*u,d=r*f,_=r*l,A=i*f,E=i*l,v=s*l,T=a*u,I=a*f,R=a*l,k=n[0],K=n[1],ee=n[2];return o[0]=(1-(A+v))*k,o[1]=(d+R)*k,o[2]=(_-I)*k,o[3]=0,o[4]=(d-R)*K,o[5]=(1-(p+v))*K,o[6]=(E+T)*K,o[7]=0,o[8]=(_+I)*ee,o[9]=(E-T)*ee,o[10]=(1-(p+A))*ee,o[11]=0,o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=1,o}const xy="v2.5.1",Dd="@glb.bin";var lt,yc,ms,ho,Jo,Dl;function Rc(o){const e={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]},t=o.propertyType===lt.NODE?[o]:o.listChildren();for(const n of t)n.traverse(r=>{const i=r.getMesh();if(!i)return;const s=By(i,r.getWorldMatrix());id(s.min,e),id(s.max,e)});return e}function By(o,e){const t={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]};for(const n of o.listPrimitives()){const r=n.getAttribute("POSITION");if(!r)continue;let i=[0,0,0],s=[0,0,0];for(let a=0;a<r.getCount();a++)i=r.getElement(a,i),s=Bd(s,i,e),id(s,t)}return t}function id(o,e){for(let t=0;t<3;t++)e.min[t]=Math.min(o[t],e.min[t]),e.max[t]=Math.max(o[t],e.max[t])}(function(o){o.ACCESSOR="Accessor",o.ANIMATION="Animation",o.ANIMATION_CHANNEL="AnimationChannel",o.ANIMATION_SAMPLER="AnimationSampler",o.BUFFER="Buffer",o.CAMERA="Camera",o.MATERIAL="Material",o.MESH="Mesh",o.PRIMITIVE="Primitive",o.PRIMITIVE_TARGET="PrimitiveTarget",o.NODE="Node",o.ROOT="Root",o.SCENE="Scene",o.SKIN="Skin",o.TEXTURE="Texture",o.TEXTURE_INFO="TextureInfo"})(lt||(lt={})),function(o){o.INTERLEAVED="interleaved",o.SEPARATE="separate"}(yc||(yc={})),function(o){o.ARRAY_BUFFER="ARRAY_BUFFER",o.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",o.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",o.OTHER="OTHER"}(ms||(ms={})),function(o){o[o.R=4096]="R",o[o.G=256]="G",o[o.B=16]="B",o[o.A=1]="A"}(ho||(ho={})),function(o){o.GLTF="GLTF",o.GLB="GLB"}(Jo||(Jo={}));class ii{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const t=atob(e.split(",")[1]),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}{const t=e.split(",")[1],n=e.indexOf("base64")>=0;return Buffer.from(t,n?"base64":"utf8")}}static encodeText(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Buffer.from(e)}static decodeText(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}static concat(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}static pad(e,t=0){const n=this.padNumber(e.byteLength);if(n===e.byteLength)return e;const r=new Uint8Array(n);if(r.set(e),t!==0)for(let i=e.byteLength;i<n;i++)r[i]=t;return r}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;let n=e.byteLength;for(;n--;)if(e[n]!==t[n])return!1;return!0}static toView(e,t=0,n=1/0){return new Uint8Array(e.buffer,e.byteOffset+t,Math.min(e.byteLength,n))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}let Wo=class{static hexToFactor(e,t){e=Math.floor(e);const n=t;return n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[n,r,i]=this.convertLinearToSRGB(e,t);return 255*n<<16^255*r<<8^255*i<<0}static convertSRGBToLinear(e,t){const n=e,r=t;for(let i=0;i<3;i++)r[i]=n[i]<.04045?.0773993808*n[i]:Math.pow(.9478672986*n[i]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const n=e,r=t;for(let i=0;i<3;i++)r[i]=n[i]<.0031308?12.92*n[i]:1.055*Math.pow(n[i],.41666)-.055;return t}},Rd=class{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const t=new DataView(e.buffer,e.byteOffset);return ii.decodeText(e.slice(12,16))===Rd.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}};Rd.PNG_FRIED_CHUNK_NAME="CgBI";let as=class{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let n=0;const r=this.getSize(e,t);if(!r)return null;for(;r[0]>1||r[1]>1;)n+=r[0]*r[1]*4,r[0]=Math.max(Math.floor(r[0]/2),1),r[1]=Math.max(Math.floor(r[1]/2),1);return n+=4,n}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":`image/${e}`}};function My(o,e){if(e>o.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(o.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return o}as.impls={"image/jpeg":new class{match(o){return o.length>=3&&o[0]===255&&o[1]===216&&o[2]===255}getSize(o){let e,t,n=new DataView(o.buffer,o.byteOffset+4);for(;n.byteLength;){if(e=n.getUint16(0,!1),My(n,e),t=n.getUint8(e+1),t===192||t===193||t===194)return[n.getUint16(e+7,!1),n.getUint16(e+5,!1)];n=new DataView(o.buffer,n.byteOffset+e+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(o){return 3}},"image/png":new Rd};let Vs=class{static basename(e){const t=e.split(/[\\/]/).pop();return t.substring(0,t.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const t=e.match(/data:(image\/\w+)/)[1];return as.mimeTypeToExtension(t)}return e.startsWith("data:model/gltf+json")?"gltf":e.startsWith("data:model/gltf-binary")?"glb":e.startsWith("data:application/")?"bin":e.split(/[\\/]/).pop().split(/[.]/).pop()}};function Hh(o){return Object.prototype.toString.call(o)==="[object Object]"}function Da(o){if(Hh(o)===!1)return!1;const e=o.constructor;if(e===void 0)return!0;const t=e.prototype;return Hh(t)!==!1&&Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")!==!1}(function(o){o[o.SILENT=4]="SILENT",o[o.ERROR=3]="ERROR",o[o.WARN=2]="WARN",o[o.INFO=1]="INFO",o[o.DEBUG=0]="DEBUG"})(Dl||(Dl={}));let $o=class{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=$o.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=$o.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=$o.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=$o.Verbosity.ERROR&&console.error(e)}};$o.Verbosity=Dl,$o.DEFAULT_INSTANCE=new $o($o.Verbosity.INFO);let bi=class{static identity(e){return e}static eq(e,t,n=1e-5){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>n)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,n,r){let i=bl([e[0],e[1],e[2]]);const s=bl([e[4],e[5],e[6]]),a=bl([e[8],e[9],e[10]]);Ey(e)<0&&(i=-i),t[0]=e[12],t[1]=e[13],t[2]=e[14];const u=e.slice(),f=1/i,l=1/s,p=1/a;u[0]*=f,u[1]*=f,u[2]*=f,u[4]*=l,u[5]*=l,u[6]*=l,u[8]*=p,u[9]*=p,u[10]*=p,Cy(n,u),r[0]=i,r[1]=s,r[2]=a}static compose(e,t,n,r){const i=r,s=t[0],a=t[1],u=t[2],f=t[3],l=s+s,p=a+a,d=u+u,_=s*l,A=s*p,E=s*d,v=a*p,T=a*d,I=u*d,R=f*l,k=f*p,K=f*d,ee=n[0],_e=n[1],Q=n[2];return i[0]=(1-(v+I))*ee,i[1]=(A+K)*ee,i[2]=(E-k)*ee,i[3]=0,i[4]=(A-K)*_e,i[5]=(1-(_+I))*_e,i[6]=(T+R)*_e,i[7]=0,i[8]=(E+k)*Q,i[9]=(T-R)*Q,i[10]=(1-(_+v))*Q,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}};function Dy(o,e){if(!!o!=!!e)return!1;const t=o.getChild(),n=e.getChild();return t===n||t.equals(n)}function Ry(o,e){if(!!o!=!!e||o.length!==e.length)return!1;for(let t=0;t<o.length;t++){const n=o[t],r=e[t];if(n.getChild()!==r.getChild()&&!n.getChild().equals(r.getChild()))return!1}return!0}function Iy(o,e){if(!!o!=!!e)return!1;const t=Object.keys(o),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r in o){const i=o[r],s=e[r];if(!!i!=!!s)return!1;const a=i.getChild(),u=s.getChild();if(a!==u&&!a.equals(u))return!1}return!0}function z_(o,e){if(o===e)return!0;if(!!o!=!!e||!o||!e||o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(o[t]!==e[t])return!1;return!0}function K_(o,e){if(o===e)return!0;if(!!o!=!!e)return!1;if(!Da(o)||!Da(e))return o===e;const t=o,n=e;let r,i=0,s=0;for(r in t)i++;for(r in n)s++;if(i!==s)return!1;for(r in t){const a=t[r],u=n[r];if(Rl(a)&&Rl(u)){if(!z_(a,u))return!1}else if(Da(a)&&Da(u)){if(!K_(a,u))return!1}else if(a!==u)return!1}return!0}function Rl(o){return Array.isArray(o)||ArrayBuffer.isView(o)}const Wh="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",Vh=new Set,Py=function(){let o="";for(let e=0;e<6;e++)o+=Wh.charAt(Math.floor(Math.random()*Wh.length));return o},fc=function(){for(let o=0;o<999;o++){const e=Py();if(!Vh.has(e))return Vh.add(e),e}return""};let So=class{static dirname(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substring(0,t+1)}static basename(e){return Vs.basename(new URL(e,"https://null.example").pathname)}static extension(e){return Vs.extension(new URL(e,"https://null.example").pathname)}static resolve(e,t){if(!this.isRelativePath(t))return t;const n=e.split("/"),r=t.split("/");n.pop();for(let i=0;i<r.length;i++)r[i]!=="."&&(r[i]===".."?n.pop():n.push(r[i]));return n.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}};So.DEFAULT_INIT={},So.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const Bs=o=>o,Fy=new Set;let kl=class extends j_{constructor(e,t=""){super(e),this[Ki].name=t,this.init(),this.dispatchEvent({type:"create"})}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){return new this.constructor(this.graph).copy(this,Bs)}copy(e,t=Bs){for(const n in this[Ki]){const r=this[Ki][n];if(r instanceof Ga)this[Au].has(n)||r.dispose();else if(ic(r))for(const i of r)i.dispose();else if(oc(r))for(const i in r)r[i].dispose()}for(const n in e[Ki]){const r=this[Ki][n],i=e[Ki][n];if(i instanceof Ga)this[Au].has(n)?r.getChild().copy(t(i.getChild()),t):this.setRef(n,t(i.getChild()),i.getAttributes());else if(ic(i))for(const s of i)this.addRef(n,t(s.getChild()),s.getAttributes());else if(oc(i))for(const s in i){const a=i[s];this.setRefMap(n,s,t(a.getChild()),a.getAttributes())}else this[Ki][n]=Da(i)?JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.slice():i}return this}equals(e,t=Fy){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const n in this[Ki]){if(t.has(n))continue;const r=this[Ki][n],i=e[Ki][n];if(td(r)||td(i)){if(!Dy(r,i))return!1}else if(ic(r)||ic(i)){if(!Ry(r,i))return!1}else if(oc(r)||oc(i)){if(!Iy(r,i))return!1}else if(Da(r)||Da(i)){if(!K_(r,i))return!1}else if(Rl(r)||Rl(i)){if(!z_(r,i))return!1}else if(r!==i)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}},Fo=class extends kl{getDefaults(){return Object.assign(super.getDefaults(),{extensions:{}})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,t){return t&&t.t(this),this.setRefMap("extensions",e,t)}listExtensions(){return this.listRefMapValues("extensions")}},wn=class extends Fo{constructor(...e){super(...e),this.i=bi.identity,this.o=bi.identity}init(){this.propertyType=lt.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:wn.Type.SCALAR,componentType:wn.ComponentType.FLOAT,normalized:!1,buffer:null})}copy(e,t=Bs){return super.copy(e,t),this.i=e.i,this.o=e.o,this}static getElementSize(e){switch(e){case wn.Type.SCALAR:return 1;case wn.Type.VEC2:return 2;case wn.Type.VEC3:return 3;case wn.Type.VEC4:case wn.Type.MAT2:return 4;case wn.Type.MAT3:return 9;case wn.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case wn.ComponentType.BYTE:case wn.ComponentType.UNSIGNED_BYTE:return 1;case wn.ComponentType.SHORT:case wn.ComponentType.UNSIGNED_SHORT:return 2;case wn.ComponentType.UNSIGNED_INT:case wn.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let n=0;n<t;n++)e[n]=this.o(e[n]);return e}getMin(e){const t=this.get("array"),n=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=1/0;for(let i=0;i<n*r;i+=r)for(let s=0;s<r;s++){const a=t[i+s];Number.isFinite(a)&&(e[s]=Math.min(e[s],a))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let n=0;n<t;n++)e[n]=this.o(e[n]);return e}getMax(e){const t=this.get("array"),n=this.getCount(),r=this.getElementSize();for(let i=0;i<r;i++)e[i]=-1/0;for(let i=0;i<n*r;i+=r)for(let s=0;s<r;s++){const a=t[i+s];Number.isFinite(a)&&(e[s]=Math.max(e[s],a))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return wn.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e),e?(this.o=t=>bi.denormalize(t,this.get("componentType")),this.i=t=>bi.normalize(t,this.get("componentType"))):(this.o=bi.identity,this.i=bi.identity),this}getScalar(e){const t=this.getElementSize();return this.o(this.get("array")[e*t])}setScalar(e,t){return this.get("array")[e*this.getElementSize()]=this.i(t),this}getElement(e,t){const n=this.getElementSize(),r=this.get("array");for(let i=0;i<n;i++)t[i]=this.o(r[e*n+i]);return t}setElement(e,t){const n=this.getElementSize(),r=this.get("array");for(let i=0;i<n;i++)r[e*n+i]=this.i(t[i]);return this}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?function(t){switch(t.constructor){case Float32Array:return wn.ComponentType.FLOAT;case Uint32Array:return wn.ComponentType.UNSIGNED_INT;case Uint16Array:return wn.ComponentType.UNSIGNED_SHORT;case Uint8Array:return wn.ComponentType.UNSIGNED_BYTE;case Int16Array:return wn.ComponentType.SHORT;case Int8Array:return wn.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):wn.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}};wn.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},wn.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};let Id=class extends Fo{init(){this.propertyType=lt.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:[],samplers:[]})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}},da=class extends Fo{init(){this.propertyType=lt.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}};da.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};let Xa=class extends Fo{init(){this.propertyType=lt.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:Xa.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:ms.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:ms.OTHER})}};Xa.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};let Pd=class extends Fo{init(){this.propertyType=lt.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}},ka=class extends Fo{init(){this.propertyType=lt.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:ka.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:2*Math.PI*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}};ka.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};let uo=class extends kl{t(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}};uo.EXTENSION_NAME=void 0;let Qi=class extends Fo{init(){this.propertyType=lt.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Qi.WrapMode.REPEAT,wrapT:Qi.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}};Qi.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Qi.MagFilter={NEAREST:9728,LINEAR:9729},Qi.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Wc,G:Vc,B:jc,A:Ly}=ho;let Ks=class extends Fo{init(){this.propertyType=lt.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:Ks.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Qi(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Qi(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Qi(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Qi(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Qi(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const t=this.get("baseColorFactor").slice();return t[3]=e,this.set("baseColorFactor",t)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorHex(){return Wo.factorToHex(this.get("baseColorFactor"))}setBaseColorHex(e){const t=this.get("baseColorFactor").slice();return this.set("baseColorFactor",Wo.hexToFactor(e,t))}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Wc|Vc|jc|Ly})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveHex(){return Wo.factorToHex(this.get("emissiveFactor"))}setEmissiveHex(e){const t=this.get("emissiveFactor").slice();return this.set("emissiveFactor",Wo.hexToFactor(e,t))}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Wc|Vc|jc})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Wc|Vc|jc})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Wc})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Vc|jc})}};Ks.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};let Fd=class extends Fo{init(){this.propertyType=lt.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:[]})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}},Nu=class extends Fo{constructor(...e){super(...e),this.u=null}init(){this.propertyType=lt.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:[]})}copy(e,t=Bs){if(t===Bs)throw new Error("Node cannot be copied.");return super.copy(e,t)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return bi.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const t=this.get("translation").slice(),n=this.get("rotation").slice(),r=this.get("scale").slice();return bi.decompose(e,t,n,r),this.set("translation",t).set("rotation",n).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return bi.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return bi.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return bi.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r instanceof Nu;r=r.u)e.push(r);let t;const n=e.pop().getMatrix();for(;t=e.pop();)Md(n,n,t.getMatrix());return n}addChild(e){e.u&&e.u.removeChild(e),this.addRef("children",e),e.u=this;const t=this[Ki].children;return t[t.length-1].addEventListener("dispose",()=>e.u=null),this}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParent(){return this.u}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}},ao=class extends Fo{init(){this.propertyType=lt.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:ao.Mode.TRIANGLES,material:null,indices:null,attributes:{},targets:[]})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:ms.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:ms.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}};ao.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};let Ld=class extends kl{init(){this.propertyType=lt.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:ms.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}};function Ko(){return(Ko=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}).apply(this,arguments)}let Hl=class extends Fo{init(){this.propertyType=lt.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:[]})}copy(e,t=Bs){if(t===Bs)throw new Error("Scene cannot be copied.");return super.copy(e,t)}addChild(e){e.u&&e.u.removeChild(e),this.addRef("children",e),e.u=this;const t=this[Ki].children;return t[t.length-1].addEventListener("dispose",()=>e.u=null),this}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}},Od=class extends Fo{init(){this.propertyType=lt.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:[]})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:ms.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}},Ha=class extends Fo{init(){this.propertyType=lt.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||as.extensionToMimeType(Vs.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e),this.set("mimeType",as.extensionToMimeType(Vs.extension(e))),this}getImage(){return this.get("image")}setImage(e){return this.set("image",ii.assertView(e))}getSize(){const e=this.get("image");return e?as.getSize(e,this.getMimeType()):null}},Wa=class extends Fo{init(){this.propertyType=lt.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:"glTF-Transform v2.5.1",version:"2.0"},defaultScene:null,accessors:[],animations:[],buffers:[],cameras:[],materials:[],meshes:[],nodes:[],scenes:[],skins:[],textures:[]})}constructor(e){super(e),this.h=new Set,e.addEventListener("node:create",t=>{this.l(t.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=Bs){if(t===Bs)throw new Error("Root cannot be copied.");this.set("asset",Ko({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Ko({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?t(e.getDefaultScene()):null);for(const n of e.listRefMapKeys("extensions")){const r=e.getExtension(n);this.setExtension(n,t(r))}return this}l(e){return e instanceof Hl?this.addRef("scenes",e):e instanceof Nu?this.addRef("nodes",e):e instanceof ka?this.addRef("cameras",e):e instanceof Od?this.addRef("skins",e):e instanceof Fd?this.addRef("meshes",e):e instanceof Ks?this.addRef("materials",e):e instanceof Ha?this.addRef("textures",e):e instanceof Id?this.addRef("animations",e):e instanceof wn?this.addRef("accessors",e):e instanceof Pd&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this.h)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}g(e){return this.h.add(e),this}p(e){return this.h.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}},Nd=class{constructor(){this.m=new V_,this.v=new Wa(this.m),this.T=$o.DEFAULT_INSTANCE}getRoot(){return this.v}getGraph(){return this.m}getLogger(){return this.T}setLogger(e){return this.T=e,this}clone(){return new Nd().setLogger(this.T).merge(this)}merge(e){for(const i of e.getRoot().listExtensionsUsed()){const s=this.createExtension(i.constructor);i.isRequired()&&s.setRequired(!0)}const t=new Set,n=new Map;t.add(e.v),n.set(e.v,this.v);for(const i of e.m.listEdges())for(const s of[i.getParent(),i.getChild()]){if(t.has(s))continue;let a;a=s.propertyType===lt.TEXTURE_INFO?s:new s.constructor(this.m),n.set(s,a),t.add(s)}const r=i=>{const s=n.get(i);if(!s)throw new Error("Could resolve property.");return s};for(const i of t){const s=n.get(i);if(!s)throw new Error("Could resolve property.");s.propertyType!==lt.TEXTURE_INFO&&s.copy(i,r)}return this}async transform(...e){const t=e.map(n=>n.name);for(const n of e)await n(this,{stack:t});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(n=>n.extensionName===t)||new e(this)}createScene(e=""){return new Hl(this.m,e)}createNode(e=""){return new Nu(this.m,e)}createCamera(e=""){return new ka(this.m,e)}createSkin(e=""){return new Od(this.m,e)}createMesh(e=""){return new Fd(this.m,e)}createPrimitive(){return new ao(this.m)}createPrimitiveTarget(e=""){return new Ld(this.m,e)}createMaterial(e=""){return new Ks(this.m,e)}createTexture(e=""){return new Ha(this.m,e)}createAnimation(e=""){return new Id(this.m,e)}createAnimationChannel(e=""){return new da(this.m,e)}createAnimationSampler(e=""){return new Xa(this.m,e)}createAccessor(e="",t=null){return t||(t=this.getRoot().listBuffers()[0]),new wn(this.m,e).setBuffer(t)}createBuffer(e=""){return new Pd(this.m,e)}},co=class{constructor(e){this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.document=void 0,this.required=!1,this.properties=new Set,this.S=void 0,this.document=e,e.getRoot().g(this),this.S=n=>{const r=n,i=r.target;i instanceof uo&&i.extensionName===this.extensionName&&(r.type==="node:create"&&this.M(i),r.type==="node:dispose"&&this.I(i))};const t=e.getGraph();t.addEventListener("node:create",this.S),t.addEventListener("node:dispose",this.S)}dispose(){this.document.getRoot().p(this);const e=this.document.getGraph();e.removeEventListener("node:create",this.S),e.removeEventListener("node:dispose",this.S);for(const t of this.properties)t.dispose()}static register(){}isRequired(){return this.required}setRequired(e){return this.required=e,this}listProperties(){return Array.from(this.properties)}M(e){return this.properties.add(e),this}I(e){return this.properties.delete(e),this}install(e,t){return this}preread(e,t){return this}prewrite(e,t){return this}};co.EXTENSION_NAME=void 0;let J_=class{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),t.texCoord!==void 0&&e.setTexCoord(t.texCoord),t.extras!==void 0&&e.setExtras(t.extras);const n=this.jsonDoc.json.textures[t.index];if(n.sampler===void 0)return;const r=this.jsonDoc.json.samplers[n.sampler];r.magFilter!==void 0&&e.setMagFilter(r.magFilter),r.minFilter!==void 0&&e.setMinFilter(r.minFilter),r.wrapS!==void 0&&e.setWrapS(r.wrapS),r.wrapT!==void 0&&e.setWrapT(r.wrapT)}};const od={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jh={logger:$o.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function zc(o,e){const t=e.bufferViews[o.bufferView],n=e.jsonDoc.json.bufferViews[o.bufferView],r=od[o.componentType],i=wn.getElementSize(o.type),s=r.BYTES_PER_ELEMENT;if(n.byteStride!==void 0&&n.byteStride!==i*s)return function(u,f){const l=f.bufferViews[u.bufferView],p=f.jsonDoc.json.bufferViews[u.bufferView],d=od[u.componentType],_=wn.getElementSize(u.type),A=d.BYTES_PER_ELEMENT,E=u.byteOffset||0,v=new d(u.count*_),T=new DataView(l.buffer,l.byteOffset,l.byteLength),I=p.byteStride;for(let R=0;R<u.count;R++)for(let k=0;k<_;k++){const K=E+R*I+k*A;let ee;switch(u.componentType){case wn.ComponentType.FLOAT:ee=T.getFloat32(K,!0);break;case wn.ComponentType.UNSIGNED_INT:ee=T.getUint32(K,!0);break;case wn.ComponentType.UNSIGNED_SHORT:ee=T.getUint16(K,!0);break;case wn.ComponentType.UNSIGNED_BYTE:ee=T.getUint8(K);break;case wn.ComponentType.SHORT:ee=T.getInt16(K,!0);break;case wn.ComponentType.BYTE:ee=T.getInt8(K);break;default:throw new Error(`Unexpected componentType "${u.componentType}".`)}v[R*_+k]=ee}return v}(o,e);const a=t.byteOffset+(o.byteOffset||0);return new r(t.buffer.slice(a,a+o.count*i*s))}var dc;(function(o){o[o.ARRAY_BUFFER=34962]="ARRAY_BUFFER",o[o.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(dc||(dc={}));let us=class{constructor(e,t,n){this.N=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.O=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.N=e,this.jsonDoc=t,this.options=n;const r=e.getRoot(),i=r.listBuffers().length,s=r.listTextures().length;this.bufferURIGenerator=new zh(i>1,()=>n.basename||"buffer"),this.imageURIGenerator=new zh(s>1,a=>function(u,f){const l=u.getGraph().listParentEdges(f).find(p=>p.getParent()!==u.getRoot());return l?l.getName().replace(/texture$/i,""):""}(e,a)||n.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,t){const n={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},r=JSON.stringify(n);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(n));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},s=JSON.stringify(i);this.textureDefIndexMap.has(s)||(this.textureDefIndexMap.set(s,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(s)};return t.getTexCoord()!==0&&(a.texCoord=t.getTexCoord()),Object.keys(t.getExtras()).length>0&&(a.extras=t.getExtras()),this.textureInfoDefMap.set(t,a),a}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.N.getGraph().listParentEdges(e).some(n=>n.getName()==="attributes"&&n.getAttributes().key==="POSITION"||n.getName()==="input")&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,n){if(this.options.format===Jo.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const r=as.mimeTypeToExtension(n.getMimeType());e.uri=this.imageURIGenerator.createURI(n,r),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.O.get(e);if(t)return t;for(const n of this.N.getGraph().listParentEdges(e)){const{usage:r}=n.getAttributes();if(r)return r;n.getParent().propertyType!==lt.ROOT&&this.N.getLogger().warn(`Missing attribute ".usage" on edge, "${n.getName()}".`)}return us.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const n=this.O.get(e);if(n&&n!==t)throw new Error(`Accessor with usage "${n}" cannot be reused as "${t}".`);return this.O.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,n]of Array.from(this.O.entries()))e[n]=e[n]||[],e[n].push(t);return e}};us.BufferViewTarget=dc,us.BufferViewUsage=ms,us.USAGE_TO_TARGET={[ms.ARRAY_BUFFER]:dc.ARRAY_BUFFER,[ms.ELEMENT_ARRAY_BUFFER]:dc.ELEMENT_ARRAY_BUFFER};let zh=class{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=t}createURI(e,t){if(e.getURI())return e.getURI();if(this.multiple){const n=this.basename(e);return this.counter[n]=this.counter[n]||1,`${n}_${this.counter[n]++}.${t}`}return`${this.basename(e)}.${t}`}};const{BufferViewUsage:uf}=us;var Il;(function(o){o[o.JSON=1313821514]="JSON",o[o.BIN=5130562]="BIN"})(Il||(Il={}));let Wl=class{constructor(){this.T=$o.DEFAULT_INSTANCE,this.h=new Set,this.C={},this.F=yc.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this.T=e,this}registerExtensions(e){for(const t of e)this.h.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.C,e),this}setVertexLayout(e){return this.F=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||this.detectFormat(e)===Jo.GLB?this.P(e):this.U(e)}async readJSON(e){return e=this.j(e),this.L(e),class{static read(t,n=jh){const r=Ko({},jh,n),{json:i}=t,s=new Nd;this.validate(t,r);const a=new J_(t),u=i.asset,f=s.getRoot().getAsset();u.copyright&&(f.copyright=u.copyright),u.extras&&(f.extras=u.extras),i.extras!==void 0&&s.getRoot().setExtras(Ko({},i.extras));const l=i.extensionsUsed||[],p=i.extensionsRequired||[];for(const I of r.extensions)if(l.includes(I.EXTENSION_NAME)){const R=s.createExtension(I).setRequired(p.includes(I.EXTENSION_NAME));for(const k of R.readDependencies)R.install(k,r.dependencies[k])}const d=i.buffers||[];s.getRoot().listExtensionsUsed().filter(I=>I.prereadTypes.includes(lt.BUFFER)).forEach(I=>I.preread(a,lt.BUFFER)),a.buffers=d.map(I=>{const R=s.createBuffer(I.name);return I.extras&&R.setExtras(I.extras),I.uri&&I.uri.indexOf("__")!==0&&R.setURI(I.uri),R}),a.bufferViewBuffers=(i.bufferViews||[]).map((I,R)=>{if(!a.bufferViews[R]){const k=t.json.buffers[I.buffer];a.bufferViews[R]=ii.toView(k.uri?t.resources[k.uri]:t.resources["@glb.bin"],I.byteOffset||0,I.byteLength)}return a.buffers[I.buffer]}),a.accessors=(i.accessors||[]).map(I=>{const R=s.createAccessor(I.name,a.bufferViewBuffers[I.bufferView]).setType(I.type);if(I.extras&&R.setExtras(I.extras),I.normalized!==void 0&&R.setNormalized(I.normalized),I.bufferView===void 0&&!I.sparse)return R;let k;return k=I.sparse!==void 0?function(K,ee){const _e=od[K.componentType],Q=wn.getElementSize(K.type);let ne;ne=K.bufferView!==void 0?zc(K,ee):new _e(K.count*Q);const de=K.sparse,Ie=de.count,Pe=Ko({},K,de.indices,{count:Ie,type:"SCALAR"}),Te=Ko({},K,de.values,{count:Ie}),Ee=zc(Pe,ee),Se=zc(Te,ee);for(let Oe=0;Oe<Pe.count;Oe++)for(let We=0;We<Q;We++)ne[Ee[Oe]*Q+We]=Se[Oe*Q+We];return ne}(I,a):zc(I,a),R.setArray(k),R});const _=i.images||[],A=i.textures||[];s.getRoot().listExtensionsUsed().filter(I=>I.prereadTypes.includes(lt.TEXTURE)).forEach(I=>I.preread(a,lt.TEXTURE)),a.textures=_.map(I=>{const R=s.createTexture(I.name);if(I.extras&&R.setExtras(I.extras),I.bufferView!==void 0){const k=i.bufferViews[I.bufferView],K=t.json.buffers[k.buffer],ee=k.byteOffset||0,_e=(K.uri?t.resources[K.uri]:t.resources["@glb.bin"]).slice(ee,ee+k.byteLength);R.setImage(_e)}else I.uri!==void 0&&(R.setImage(t.resources[I.uri]),I.uri.indexOf("__")!==0&&R.setURI(I.uri));if(I.mimeType!==void 0)R.setMimeType(I.mimeType);else if(I.uri){const k=Vs.extension(I.uri);R.setMimeType(as.extensionToMimeType(k))}return R}),a.materials=(i.materials||[]).map(I=>{const R=s.createMaterial(I.name);I.extras&&R.setExtras(I.extras),I.alphaMode!==void 0&&R.setAlphaMode(I.alphaMode),I.alphaCutoff!==void 0&&R.setAlphaCutoff(I.alphaCutoff),I.doubleSided!==void 0&&R.setDoubleSided(I.doubleSided);const k=I.pbrMetallicRoughness||{};if(k.baseColorFactor!==void 0&&R.setBaseColorFactor(k.baseColorFactor),I.emissiveFactor!==void 0&&R.setEmissiveFactor(I.emissiveFactor),k.metallicFactor!==void 0&&R.setMetallicFactor(k.metallicFactor),k.roughnessFactor!==void 0&&R.setRoughnessFactor(k.roughnessFactor),k.baseColorTexture!==void 0){const K=k.baseColorTexture;R.setBaseColorTexture(a.textures[A[K.index].source]),a.setTextureInfo(R.getBaseColorTextureInfo(),K)}if(I.emissiveTexture!==void 0){const K=I.emissiveTexture;R.setEmissiveTexture(a.textures[A[K.index].source]),a.setTextureInfo(R.getEmissiveTextureInfo(),K)}if(I.normalTexture!==void 0){const K=I.normalTexture;R.setNormalTexture(a.textures[A[K.index].source]),a.setTextureInfo(R.getNormalTextureInfo(),K),I.normalTexture.scale!==void 0&&R.setNormalScale(I.normalTexture.scale)}if(I.occlusionTexture!==void 0){const K=I.occlusionTexture;R.setOcclusionTexture(a.textures[A[K.index].source]),a.setTextureInfo(R.getOcclusionTextureInfo(),K),I.occlusionTexture.strength!==void 0&&R.setOcclusionStrength(I.occlusionTexture.strength)}if(k.metallicRoughnessTexture!==void 0){const K=k.metallicRoughnessTexture;R.setMetallicRoughnessTexture(a.textures[A[K.index].source]),a.setTextureInfo(R.getMetallicRoughnessTextureInfo(),K)}return R});const E=i.meshes||[];s.getRoot().listExtensionsUsed().filter(I=>I.prereadTypes.includes(lt.PRIMITIVE)).forEach(I=>I.preread(a,lt.PRIMITIVE)),a.meshes=E.map(I=>{const R=s.createMesh(I.name);return I.extras&&R.setExtras(I.extras),I.weights!==void 0&&R.setWeights(I.weights),(I.primitives||[]).forEach(k=>{const K=s.createPrimitive();k.extras&&K.setExtras(k.extras),k.material!==void 0&&K.setMaterial(a.materials[k.material]),k.mode!==void 0&&K.setMode(k.mode);for(const[_e,Q]of Object.entries(k.attributes||{}))K.setAttribute(_e,a.accessors[Q]);k.indices!==void 0&&K.setIndices(a.accessors[k.indices]);const ee=I.extras&&I.extras.targetNames||[];(k.targets||[]).forEach((_e,Q)=>{const ne=ee[Q]||Q.toString(),de=s.createPrimitiveTarget(ne);for(const[Ie,Pe]of Object.entries(_e))de.setAttribute(Ie,a.accessors[Pe]);K.addTarget(de)}),R.addPrimitive(K)}),R}),a.cameras=(i.cameras||[]).map(I=>{const R=s.createCamera(I.name).setType(I.type);if(I.extras&&R.setExtras(I.extras),I.type===ka.Type.PERSPECTIVE){const k=I.perspective;R.setYFov(k.yfov),R.setZNear(k.znear),k.zfar!==void 0&&R.setZFar(k.zfar),k.aspectRatio!==void 0&&R.setAspectRatio(k.aspectRatio)}else{const k=I.orthographic;R.setZNear(k.znear).setZFar(k.zfar).setXMag(k.xmag).setYMag(k.ymag)}return R});const v=i.nodes||[];s.getRoot().listExtensionsUsed().filter(I=>I.prereadTypes.includes(lt.NODE)).forEach(I=>I.preread(a,lt.NODE)),a.nodes=v.map(I=>{const R=s.createNode(I.name);if(I.extras&&R.setExtras(I.extras),I.translation!==void 0&&R.setTranslation(I.translation),I.rotation!==void 0&&R.setRotation(I.rotation),I.scale!==void 0&&R.setScale(I.scale),I.matrix!==void 0){const k=[0,0,0],K=[0,0,0,1],ee=[1,1,1];bi.decompose(I.matrix,k,K,ee),R.setTranslation(k),R.setRotation(K),R.setScale(ee)}return I.weights!==void 0&&R.setWeights(I.weights),R}),a.skins=(i.skins||[]).map(I=>{const R=s.createSkin(I.name);I.extras&&R.setExtras(I.extras),I.inverseBindMatrices!==void 0&&R.setInverseBindMatrices(a.accessors[I.inverseBindMatrices]),I.skeleton!==void 0&&R.setSkeleton(a.nodes[I.skeleton]);for(const k of I.joints)R.addJoint(a.nodes[k]);return R}),v.map((I,R)=>{const k=a.nodes[R];(I.children||[]).forEach(K=>k.addChild(a.nodes[K])),I.mesh!==void 0&&k.setMesh(a.meshes[I.mesh]),I.camera!==void 0&&k.setCamera(a.cameras[I.camera]),I.skin!==void 0&&k.setSkin(a.skins[I.skin])}),a.animations=(i.animations||[]).map(I=>{const R=s.createAnimation(I.name);I.extras&&R.setExtras(I.extras);const k=(I.samplers||[]).map(K=>{const ee=s.createAnimationSampler().setInput(a.accessors[K.input]).setOutput(a.accessors[K.output]).setInterpolation(K.interpolation||Xa.Interpolation.LINEAR);return K.extras&&ee.setExtras(K.extras),R.addSampler(ee),ee});return(I.channels||[]).forEach(K=>{const ee=s.createAnimationChannel().setSampler(k[K.sampler]).setTargetPath(K.target.path);K.target.node!==void 0&&ee.setTargetNode(a.nodes[K.target.node]),K.extras&&ee.setExtras(K.extras),R.addChannel(ee)}),R});const T=i.scenes||[];return s.getRoot().listExtensionsUsed().filter(I=>I.prereadTypes.includes(lt.SCENE)).forEach(I=>I.preread(a,lt.SCENE)),a.scenes=T.map(I=>{const R=s.createScene(I.name);return I.extras&&R.setExtras(I.extras),(I.nodes||[]).map(k=>a.nodes[k]).forEach(k=>R.addChild(k)),R}),i.scene!==void 0&&s.getRoot().setDefaultScene(a.scenes[i.scene]),s.getRoot().listExtensionsUsed().forEach(I=>I.read(a)),s}static validate(t,n){const r=t.json;if(r.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${r.asset.version}".`);if(r.extensionsRequired){for(const i of r.extensionsRequired)if(!n.extensions.find(s=>s.EXTENSION_NAME===i))throw new Error(`Missing required extension, "${i}".`)}if(r.extensionsUsed)for(const i of r.extensionsUsed)n.extensions.find(s=>s.EXTENSION_NAME===i)||n.logger.warn(`Missing optional extension, "${i}".`)}}.read(e,{extensions:Array.from(this.h),dependencies:this.C,logger:this.T})}async binaryToJSON(e){const t=this._(ii.assertView(e));this.L(t);const n=t.json;if(n.buffers&&n.buffers.some(r=>function(i,s){return s.uri!==void 0&&!(s.uri in i.resources)}(t,r)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(n.images&&n.images.some(r=>function(i,s){return s.uri!==void 0&&!(s.uri in i.resources)&&s.bufferView===void 0}(t,r)))throw new Error("Cannot resolve external images with binaryToJSON().");return t}async readBinary(e){return this.readJSON(await this.binaryToJSON(ii.assertView(e)))}async writeJSON(e,t={}){if(t.format===Jo.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return class{static write(n,r){const i=n.getRoot(),s={asset:Ko({generator:"glTF-Transform v2.5.1"},i.getAsset()),extras:Ko({},i.getExtras())},a={json:s,resources:{}},u=new us(n,a,r),f=r.logger||$o.DEFAULT_INSTANCE,l=new Set(r.extensions.map(T=>T.EXTENSION_NAME)),p=n.getRoot().listExtensionsUsed().filter(T=>l.has(T.extensionName)),d=n.getRoot().listExtensionsRequired().filter(T=>l.has(T.extensionName));p.length<n.getRoot().listExtensionsUsed().length&&f.warn("Some extensions were not registered for I/O, and will not be written.");for(const T of p)for(const I of T.writeDependencies)T.install(I,r.dependencies[I]);function _(T,I,R,k){const K=[];let ee=0;for(const Q of T){const ne=u.createAccessorDef(Q);ne.bufferView=s.bufferViews.length;const de=Q.getArray(),Ie=ii.pad(ii.toView(de));ne.byteOffset=ee,ee+=Ie.byteLength,K.push(Ie),u.accessorIndexMap.set(Q,s.accessors.length),s.accessors.push(ne)}const _e={buffer:I,byteOffset:R,byteLength:ii.concat(K).byteLength};return k&&(_e.target=k),s.bufferViews.push(_e),{buffers:K,byteLength:ee}}function A(T,I,R){const k=T[0].getCount();let K=0;for(const ne of T){const de=u.createAccessorDef(ne);de.bufferView=s.bufferViews.length,de.byteOffset=K;const Ie=ne.getElementSize(),Pe=ne.getComponentSize();K+=ii.padNumber(Ie*Pe),u.accessorIndexMap.set(ne,s.accessors.length),s.accessors.push(de)}const ee=k*K,_e=new ArrayBuffer(ee),Q=new DataView(_e);for(let ne=0;ne<k;ne++){let de=0;for(const Ie of T){const Pe=Ie.getElementSize(),Te=Ie.getComponentSize(),Ee=Ie.getComponentType(),Se=Ie.getArray();for(let Oe=0;Oe<Pe;Oe++){const We=ne*K+de+Oe*Te,j=Se[ne*Pe+Oe];switch(Ee){case wn.ComponentType.FLOAT:Q.setFloat32(We,j,!0);break;case wn.ComponentType.BYTE:Q.setInt8(We,j);break;case wn.ComponentType.SHORT:Q.setInt16(We,j,!0);break;case wn.ComponentType.UNSIGNED_BYTE:Q.setUint8(We,j);break;case wn.ComponentType.UNSIGNED_SHORT:Q.setUint16(We,j,!0);break;case wn.ComponentType.UNSIGNED_INT:Q.setUint32(We,j,!0);break;default:throw new Error("Unexpected component type: "+Ee)}}de+=ii.padNumber(Pe*Te)}}return s.bufferViews.push({buffer:I,byteOffset:R,byteLength:ee,byteStride:K,target:us.BufferViewTarget.ARRAY_BUFFER}),{byteLength:ee,buffers:[new Uint8Array(_e)]}}const E=new Map;for(const T of n.getGraph().listEdges()){if(T.getParent()===i)continue;const I=T.getChild();if(I instanceof wn){const R=E.get(I)||[];R.push(T),E.set(I,R)}}if(s.accessors=[],s.bufferViews=[],s.samplers=[],s.textures=[],s.images=i.listTextures().map((T,I)=>{const R=u.createPropertyDef(T);T.getMimeType()&&(R.mimeType=T.getMimeType());const k=T.getImage();return k&&u.createImageData(R,k,T),u.imageIndexMap.set(T,I),R}),p.filter(T=>T.prewriteTypes.includes(lt.ACCESSOR)).forEach(T=>T.prewrite(u,lt.ACCESSOR)),i.listAccessors().forEach(T=>{const I=u.accessorUsageGroupedByParent,R=u.accessorParents;if(u.accessorIndexMap.has(T))return;const k=E.get(T)||[],K=u.getAccessorUsage(T);if(u.addAccessorToUsageGroup(T,K),I.has(K)){const ee=k[0].getParent(),_e=R.get(ee)||new Set;_e.add(T),R.set(ee,_e)}}),p.filter(T=>T.prewriteTypes.includes(lt.BUFFER)).forEach(T=>T.prewrite(u,lt.BUFFER)),(i.listAccessors().length>0||i.listTextures().length>0||u.otherBufferViews.size>0)&&i.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");s.buffers=[],i.listBuffers().forEach((T,I)=>{const R=u.createPropertyDef(T),k=u.accessorUsageGroupedByParent,K=u.accessorParents,ee=T.listParents().filter(Pe=>Pe instanceof wn),_e=new Set(ee),Q=[],ne=s.buffers.length;let de=0;const Ie=u.listAccessorUsageGroups();for(const Pe in Ie)if(k.has(Pe))for(const Te of Array.from(K.values())){const Ee=Array.from(Te).filter(Se=>_e.has(Se)).filter(Se=>u.getAccessorUsage(Se)===Pe);if(Ee.length)if(Pe!==uf.ARRAY_BUFFER||r.vertexLayout===yc.INTERLEAVED){const Se=Pe===uf.ARRAY_BUFFER?A(Ee,ne,de):_(Ee,ne,de);de+=Se.byteLength,Q.push(...Se.buffers)}else for(const Se of Ee){const Oe=A([Se],ne,de);de+=Oe.byteLength,Q.push(...Oe.buffers)}}else{const Te=Ie[Pe].filter(Se=>_e.has(Se));if(!Te.length)continue;const Ee=_(Te,ne,de,Pe===uf.ELEMENT_ARRAY_BUFFER?us.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);de+=Ee.byteLength,Q.push(...Ee.buffers)}if(u.imageBufferViews.length&&I===0){for(let Pe=0;Pe<u.imageBufferViews.length;Pe++)if(s.bufferViews[s.images[Pe].bufferView].byteOffset=de,de+=u.imageBufferViews[Pe].byteLength,Q.push(u.imageBufferViews[Pe]),de%8){const Te=8-de%8;de+=Te,Q.push(new Uint8Array(Te))}}if(u.otherBufferViews.has(T))for(const Pe of u.otherBufferViews.get(T))s.bufferViews.push({buffer:ne,byteOffset:de,byteLength:Pe.byteLength}),u.otherBufferViewsIndexMap.set(Pe,s.bufferViews.length-1),de+=Pe.byteLength,Q.push(Pe);if(de){let Pe;r.format===Jo.GLB?Pe="@glb.bin":(Pe=u.bufferURIGenerator.createURI(T,"bin"),R.uri=Pe),R.byteLength=de,a.resources[Pe]=ii.concat(Q)}s.buffers.push(R),u.bufferIndexMap.set(T,I)}),i.listAccessors().find(T=>!T.getBuffer())&&f.warn("Skipped writing one or more Accessors: no Buffer assigned."),s.materials=i.listMaterials().map((T,I)=>{const R=u.createPropertyDef(T);if(T.getAlphaMode()!==Ks.AlphaMode.OPAQUE&&(R.alphaMode=T.getAlphaMode()),T.getAlphaMode()===Ks.AlphaMode.MASK&&(R.alphaCutoff=T.getAlphaCutoff()),T.getDoubleSided()&&(R.doubleSided=!0),R.pbrMetallicRoughness={},bi.eq(T.getBaseColorFactor(),[1,1,1,1])||(R.pbrMetallicRoughness.baseColorFactor=T.getBaseColorFactor()),bi.eq(T.getEmissiveFactor(),[0,0,0])||(R.emissiveFactor=T.getEmissiveFactor()),T.getRoughnessFactor()!==1&&(R.pbrMetallicRoughness.roughnessFactor=T.getRoughnessFactor()),T.getMetallicFactor()!==1&&(R.pbrMetallicRoughness.metallicFactor=T.getMetallicFactor()),T.getBaseColorTexture()){const k=T.getBaseColorTexture(),K=T.getBaseColorTextureInfo();R.pbrMetallicRoughness.baseColorTexture=u.createTextureInfoDef(k,K)}if(T.getEmissiveTexture()){const k=T.getEmissiveTexture(),K=T.getEmissiveTextureInfo();R.emissiveTexture=u.createTextureInfoDef(k,K)}if(T.getNormalTexture()){const k=T.getNormalTexture(),K=T.getNormalTextureInfo(),ee=u.createTextureInfoDef(k,K);T.getNormalScale()!==1&&(ee.scale=T.getNormalScale()),R.normalTexture=ee}if(T.getOcclusionTexture()){const k=T.getOcclusionTexture(),K=T.getOcclusionTextureInfo(),ee=u.createTextureInfoDef(k,K);T.getOcclusionStrength()!==1&&(ee.strength=T.getOcclusionStrength()),R.occlusionTexture=ee}if(T.getMetallicRoughnessTexture()){const k=T.getMetallicRoughnessTexture(),K=T.getMetallicRoughnessTextureInfo();R.pbrMetallicRoughness.metallicRoughnessTexture=u.createTextureInfoDef(k,K)}return u.materialIndexMap.set(T,I),R}),s.meshes=i.listMeshes().map((T,I)=>{const R=u.createPropertyDef(T);let k=null;return R.primitives=T.listPrimitives().map(K=>{const ee={attributes:{}};ee.mode=K.getMode();const _e=K.getMaterial();_e&&(ee.material=u.materialIndexMap.get(_e)),Object.keys(K.getExtras()).length&&(ee.extras=K.getExtras());const Q=K.getIndices();Q&&(ee.indices=u.accessorIndexMap.get(Q));for(const ne of K.listSemantics())ee.attributes[ne]=u.accessorIndexMap.get(K.getAttribute(ne));for(const ne of K.listTargets()){const de={};for(const Ie of ne.listSemantics())de[Ie]=u.accessorIndexMap.get(ne.getAttribute(Ie));ee.targets=ee.targets||[],ee.targets.push(de)}return K.listTargets().length&&!k&&(k=K.listTargets().map(ne=>ne.getName())),ee}),T.getWeights().length&&(R.weights=T.getWeights()),k&&(R.extras=R.extras||{},R.extras.targetNames=k),u.meshIndexMap.set(T,I),R}),s.cameras=i.listCameras().map((T,I)=>{const R=u.createPropertyDef(T);if(R.type=T.getType(),R.type===ka.Type.PERSPECTIVE){R.perspective={znear:T.getZNear(),zfar:T.getZFar(),yfov:T.getYFov()};const k=T.getAspectRatio();k!==null&&(R.perspective.aspectRatio=k)}else R.orthographic={znear:T.getZNear(),zfar:T.getZFar(),xmag:T.getXMag(),ymag:T.getYMag()};return u.cameraIndexMap.set(T,I),R}),s.nodes=i.listNodes().map((T,I)=>{const R=u.createPropertyDef(T);return bi.eq(T.getTranslation(),[0,0,0])||(R.translation=T.getTranslation()),bi.eq(T.getRotation(),[0,0,0,1])||(R.rotation=T.getRotation()),bi.eq(T.getScale(),[1,1,1])||(R.scale=T.getScale()),T.getWeights().length&&(R.weights=T.getWeights()),u.nodeIndexMap.set(T,I),R}),s.skins=i.listSkins().map((T,I)=>{const R=u.createPropertyDef(T),k=T.getInverseBindMatrices();k&&(R.inverseBindMatrices=u.accessorIndexMap.get(k));const K=T.getSkeleton();return K&&(R.skeleton=u.nodeIndexMap.get(K)),R.joints=T.listJoints().map(ee=>u.nodeIndexMap.get(ee)),u.skinIndexMap.set(T,I),R}),i.listNodes().forEach((T,I)=>{const R=s.nodes[I],k=T.getMesh();k&&(R.mesh=u.meshIndexMap.get(k));const K=T.getCamera();K&&(R.camera=u.cameraIndexMap.get(K));const ee=T.getSkin();ee&&(R.skin=u.skinIndexMap.get(ee)),T.listChildren().length>0&&(R.children=T.listChildren().map(_e=>u.nodeIndexMap.get(_e)))}),s.animations=i.listAnimations().map((T,I)=>{const R=u.createPropertyDef(T),k=new Map;return R.samplers=T.listSamplers().map((K,ee)=>{const _e=u.createPropertyDef(K);return _e.input=u.accessorIndexMap.get(K.getInput()),_e.output=u.accessorIndexMap.get(K.getOutput()),_e.interpolation=K.getInterpolation(),k.set(K,ee),_e}),R.channels=T.listChannels().map(K=>{const ee=u.createPropertyDef(K);return ee.sampler=k.get(K.getSampler()),ee.target={node:u.nodeIndexMap.get(K.getTargetNode()),path:K.getTargetPath()},ee}),u.animationIndexMap.set(T,I),R}),s.scenes=i.listScenes().map((T,I)=>{const R=u.createPropertyDef(T);return R.nodes=T.listChildren().map(k=>u.nodeIndexMap.get(k)),u.sceneIndexMap.set(T,I),R});const v=i.getDefaultScene();return v&&(s.scene=i.listScenes().indexOf(v)),s.extensionsUsed=p.map(T=>T.extensionName),s.extensionsRequired=d.map(T=>T.extensionName),p.forEach(T=>T.write(u)),function(T){const I=[];for(const R in T){const k=T[R];(Array.isArray(k)&&k.length===0||k===null||k===""||k&&typeof k=="object"&&Object.keys(k).length===0)&&I.push(R)}for(const R of I)delete T[R]}(s),a}}.write(e,{format:t.format||Jo.GLTF,basename:t.basename||"",logger:this.T,vertexLayout:this.F,dependencies:Ko({},this.C),extensions:Array.from(this.h)})}async writeBinary(e){const{json:t,resources:n}=await this.writeJSON(e,{format:Jo.GLB}),r=new Uint32Array([1179937895,2,12]),i=JSON.stringify(t),s=ii.pad(ii.encodeText(i),32),a=ii.toView(new Uint32Array([s.byteLength,1313821514])),u=ii.concat([a,s]);r[r.length-1]+=u.byteLength;const f=Object.values(n)[0];if(!f||!f.byteLength)return ii.concat([ii.toView(r),u]);const l=ii.pad(f,0),p=ii.toView(new Uint32Array([l.byteLength,5130562])),d=ii.concat([p,l]);return r[r.length-1]+=d.byteLength,ii.concat([ii.toView(r),u,d])}detectFormat(e){return(So.isAbsoluteURL(e)?So.extension(e):Vs.extension(e))==="glb"?Jo.GLB:Jo.GLTF}async U(e){this.lastReadBytes=0;const t=await this.readURI(e,"text");this.lastReadBytes+=t.length;const n={json:JSON.parse(t),resources:{}};return await this.D(n,this.dirname(e)),this.L(n),n}async P(e){const t=await this.readURI(e,"view");this.lastReadBytes=t.byteLength;const n=this._(t);return await this.D(n,this.dirname(e)),this.L(n),n}async D(e,t){var n=this;const r=[...e.json.images||[],...e.json.buffers||[]].map(async function(i){const s=i.uri;if(!s||s.match(/data:/))return Promise.resolve();e.resources[s]=await n.readURI(n.resolve(t,s),"view"),n.lastReadBytes+=e.resources[s].byteLength});await Promise.all(r)}L(e){function t(n){if(n.uri){if(n.uri in e.resources)ii.assertView(e.resources[n.uri]);else if(n.uri.match(/data:/)){const r=`__${fc()}.${Vs.extension(n.uri)}`;e.resources[r]=ii.createBufferFromDataURI(n.uri),n.uri=r}}}(e.json.images||[]).forEach(n=>{if(n.bufferView===void 0&&n.uri===void 0)throw new Error("Missing resource URI or buffer view.");t(n)}),(e.json.buffers||[]).forEach(t)}j(e){const{images:t,buffers:n}=e.json;return e={json:Ko({},e.json),resources:Ko({},e.resources)},t&&(e.json.images=t.map(r=>Ko({},r))),n&&(e.json.buffers=n.map(r=>Ko({},r))),e}_(e){const t=new Uint32Array(e.buffer,e.byteOffset,3);if(t[0]!==1179937895)throw new Error("Invalid glTF asset.");if(t[1]!==2)throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==Il.JSON)throw new Error("Missing required GLB JSON chunk.");const r=n[0],i=ii.decodeText(ii.toView(e,20,r)),s=JSON.parse(i),a=20+r;if(e.byteLength<=a)return{json:s,resources:{}};const u=new Uint32Array(e.buffer,e.byteOffset+a,2);if(u[1]!==Il.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:s,resources:{"@glb.bin":ii.toView(e,a+8,u[0])}}}},Oy=class extends Wl{constructor(e=null,t=So.DEFAULT_INIT){super(),this.k=void 0,this.J=void 0,this.$=void 0,this.V=void 0,this.q=!1,this.k=require("fs").promises,this.J=require("path"),this.$=e,this.V=t}setAllowHTTP(e){if(e&&!this.$)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this.q=e,this}async readURI(e,t){if(So.isAbsoluteURL(e)){if(!this.q||!this.$)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");const n=await this.$(e,this.V);switch(t){case"view":return new Uint8Array(await n.arrayBuffer());case"text":return n.text()}}else switch(t){case"view":return this.k.readFile(e);case"text":return this.k.readFile(e,"utf8")}}resolve(e,t){return So.isAbsoluteURL(e)||So.isAbsoluteURL(t)?So.resolve(e,t):this.J.resolve(e,t)}dirname(e){return So.isAbsoluteURL(e)?So.dirname(e):this.J.dirname(e)}async write(e,t){await(!!e.match(/\.glb$/)?this.W(e,t):this.H(e,t))}async H(e,t){var n=this;this.lastWriteBytes=0;const{json:r,resources:i}=await this.writeJSON(t,{format:Jo.GLTF,basename:Vs.basename(e)}),{k:s,J:a}=this,u=a.dirname(e),f=JSON.stringify(r,null,2);this.lastWriteBytes+=f.length,await s.writeFile(e,f);const l=Object.keys(i).map(async function(p){if(So.isAbsoluteURL(p)){if(So.extension(p)==="bin")throw new Error(`Cannot write buffer to path "${p}".`);return}const d=Buffer.from(i[p]);await s.writeFile(a.join(u,p),d),n.lastWriteBytes+=d.byteLength});await Promise.all(l)}async W(e,t){const n=Buffer.from(await this.writeBinary(t));await this.k.writeFile(e,n),this.lastWriteBytes=n.byteLength}},Ny=class extends Wl{constructor(e){super(),this.J=void 0,this.J=e}async readURI(e,t){switch(t){case"view":return Deno.readFile(e);case"text":return Deno.readTextFile(e)}}resolve(e,t){return this.J.resolve(e,t)}dirname(e){return this.J.dirname(e)}},Uy=class extends Wl{constructor(e=So.DEFAULT_INIT){super(),this.V=void 0,this.V=e}async readURI(e,t){const n=await fetch(e,this.V);switch(t){case"view":return new Uint8Array(await n.arrayBuffer());case"text":return n.text()}}resolve(e,t){return So.resolve(e,t)}dirname(e){return So.dirname(e)}detectFormat(e){return So.extension(e)==="glb"?Jo.GLB:Jo.GLTF}};const Gy=Object.freeze(Object.defineProperty({__proto__:null,Accessor:wn,Animation:Id,AnimationChannel:da,AnimationSampler:Xa,Buffer:Pd,BufferUtils:ii,COPY_IDENTITY:Bs,Camera:ka,ColorUtils:Wo,DenoIO:Ny,Document:Nd,ExtensibleProperty:Fo,Extension:co,ExtensionProperty:uo,FileUtils:Vs,get Format(){return Jo},GLB_BUFFER:Dd,Graph:V_,GraphEdge:Ga,ImageUtils:as,Logger:$o,Material:Ks,MathUtils:bi,Mesh:Fd,Node:Nu,NodeIO:Oy,PlatformIO:Wl,Primitive:ao,PrimitiveTarget:Ld,Property:kl,get PropertyType(){return lt},ReaderContext:J_,Root:Wa,Scene:Hl,Skin:Od,Texture:Ha,get TextureChannel(){return ho},TextureInfo:Qi,VERSION:xy,get Verbosity(){return Dl},get VertexLayout(){return yc},WebIO:Uy,WriterContext:us,bounds:Rc,uuid:fc},Symbol.toStringTag,{value:"Module"})),ky=0,Hy=0,Wy=0,Vy=2,jy=0,q_=163,X_=166,zy=0,Ky=2,Jy=1,qy=64,Xy=0;class Yy{constructor(){this.vkFormat=Xy,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=ky,this.levels=[],this.dataFormatDescriptor=[{vendorId:Wy,descriptorType:Hy,descriptorBlockSize:0,versionNumber:Vy,colorModel:jy,colorPrimaries:Jy,transferFunction:Ky,flags:zy,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Vu{constructor(e,t,n,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),n=e+2**32*t;return this._offset+=8,n}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const Lo=[171,75,84,88,32,50,48,187,13,10,26,10];function Kh(o){return typeof TextDecoder<"u"?new TextDecoder().decode(o):Buffer.from(o).toString("utf8")}function El(o){const e=new Uint8Array(o.buffer,o.byteOffset,Lo.length);if(e[0]!==Lo[0]||e[1]!==Lo[1]||e[2]!==Lo[2]||e[3]!==Lo[3]||e[4]!==Lo[4]||e[5]!==Lo[5]||e[6]!==Lo[6]||e[7]!==Lo[7]||e[8]!==Lo[8]||e[9]!==Lo[9]||e[10]!==Lo[10]||e[11]!==Lo[11])throw new Error("Missing KTX 2.0 identifier.");const t=new Yy,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new Vu(o,Lo.length,n,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const i=r._nextUint32();t.supercompressionScheme=r._nextUint32();const s=r._nextUint32(),a=r._nextUint32(),u=r._nextUint32(),f=r._nextUint32(),l=r._nextUint64(),p=r._nextUint64(),d=i*3*8,_=new Vu(o,Lo.length+n,d,!0);for(let Qe=0;Qe<i;Qe++)t.levels.push({levelData:new Uint8Array(o.buffer,o.byteOffset+_._nextUint64(),_._nextUint64()),uncompressedByteLength:_._nextUint64()});const A=new Vu(o,s,a,!0),E={vendorId:A._skip(4)._nextUint16(),descriptorType:A._nextUint16(),versionNumber:A._nextUint16(),descriptorBlockSize:A._nextUint16(),colorModel:A._nextUint8(),colorPrimaries:A._nextUint8(),transferFunction:A._nextUint8(),flags:A._nextUint8(),texelBlockDimension:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],bytesPlane:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],samples:[]},v=6,T=4,I=(E.descriptorBlockSize/4-v)/T;for(let Qe=0;Qe<I;Qe++){const Je={bitOffset:A._nextUint16(),bitLength:A._nextUint8(),channelType:A._nextUint8(),samplePosition:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Je.channelType&qy?(Je.sampleLower=A._nextInt32(),Je.sampleUpper=A._nextInt32()):(Je.sampleLower=A._nextUint32(),Je.sampleUpper=A._nextUint32()),E.samples[Qe]=Je}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(E);const R=new Vu(o,u,f,!0);for(;R._offset<f;){const Qe=R._nextUint32(),Je=R._scan(Qe),ze=Kh(Je),ct=R._scan(Qe-Je.byteLength);t.keyValue[ze]=ze.match(/^ktx/i)?Kh(ct):ct,R._offset%4&&R._skip(4-R._offset%4)}if(p<=0)return t;const k=new Vu(o,l,p,!0),K=k._nextUint16(),ee=k._nextUint16(),_e=k._nextUint32(),Q=k._nextUint32(),ne=k._nextUint32(),de=k._nextUint32(),Ie=[];for(let Qe=0;Qe<i;Qe++)Ie.push({imageFlags:k._nextUint32(),rgbSliceByteOffset:k._nextUint32(),rgbSliceByteLength:k._nextUint32(),alphaSliceByteOffset:k._nextUint32(),alphaSliceByteLength:k._nextUint32()});const Pe=l+k._offset,Te=Pe+_e,Ee=Te+Q,Se=Ee+ne,Oe=new Uint8Array(o.buffer,o.byteOffset+Pe,_e),We=new Uint8Array(o.buffer,o.byteOffset+Te,Q),j=new Uint8Array(o.buffer,o.byteOffset+Ee,ne),_t=new Uint8Array(o.buffer,o.byteOffset+Se,de);return t.globalData={endpointCount:K,selectorCount:ee,imageDescs:Ie,endpointsData:Oe,selectorsData:We,tablesData:j,extendedData:_t},t}const $y="INSTANCE_ATTRIBUTE";class Ud extends uo{init(){this.extensionName="EXT_mesh_gpu_instancing",this.propertyType="InstancedMesh",this.parentTypes=[lt.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:"INSTANCE_ATTRIBUTE"})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}Ud.EXTENSION_NAME="EXT_mesh_gpu_instancing";const _a="EXT_mesh_gpu_instancing";class Vl extends co{constructor(...e){super(...e),this.extensionName=_a,this.provideTypes=[lt.NODE],this.prewriteTypes=[lt.ACCESSOR]}createInstancedMesh(){return new Ud(this.document.getGraph())}read(e){return(e.jsonDoc.json.nodes||[]).forEach((t,n)=>{if(!t.extensions||!t.extensions[_a])return;const r=t.extensions[_a],i=this.createInstancedMesh();for(const s in r.attributes)i.setAttribute(s,e.accessors[r.attributes[s]]);e.nodes[n].setExtension(_a,i)}),this}prewrite(e){e.accessorUsageGroupedByParent.add("INSTANCE_ATTRIBUTE");for(const t of this.properties)for(const n of t.listAttributes())e.addAccessorToUsageGroup(n,"INSTANCE_ATTRIBUTE");return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listNodes().forEach(n=>{const r=n.getExtension(_a);if(r){const i=e.nodeIndexMap.get(n),s=t.json.nodes[i],a={attributes:{}};r.listSemantics().forEach(u=>{const f=r.getAttribute(u);a.attributes[u]=e.accessorIndexMap.get(f)}),s.extensions=s.extensions||{},s.extensions[_a]=a}}),this}}function sa(){return(sa=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}).apply(this,arguments)}var vc,Eu,fo;Vl.EXTENSION_NAME=_a,function(o){o.QUANTIZE="quantize",o.FILTER="filter"}(vc||(vc={})),function(o){o.ATTRIBUTES="ATTRIBUTES",o.TRIANGLES="TRIANGLES",o.INDICES="INDICES"}(Eu||(Eu={})),function(o){o.NONE="NONE",o.OCTAHEDRAL="OCTAHEDRAL",o.QUATERNION="QUATERNION",o.EXPONENTIAL="EXPONENTIAL"}(fo||(fo={}));const{BYTE:Zy,SHORT:Jh,FLOAT:Qy}=wn.ComponentType,{normalize:qh,denormalize:cf}=bi;function ev(o,e,t,n){const{filter:r,bits:i}=n,s={array:o.getArray(),byteStride:o.getElementSize()*o.getComponentSize(),componentType:o.getComponentType(),normalized:o.getNormalized()};if(t!==Eu.ATTRIBUTES)return s;if(r!==fo.NONE){let a=o.getNormalized()?function(u){const f=u.getComponentType(),l=u.getArray(),p=new Float32Array(l.length);for(let d=0;d<l.length;d++)p[d]=cf(l[d],f);return p}(o):new Float32Array(s.array);switch(r){case fo.EXPONENTIAL:s.byteStride=4*o.getElementSize(),s.componentType=Qy,s.normalized=!1,s.array=e.encodeFilterExp(a,o.getCount(),s.byteStride,i);break;case fo.OCTAHEDRAL:s.byteStride=i>8?8:4,s.componentType=i>8?Jh:Zy,s.normalized=!0,a=o.getElementSize()===3?function(u){const f=new Float32Array(4*u.length/3);for(let l=0,p=u.length/3;l<p;l++)f[4*l]=u[3*l],f[4*l+1]=u[3*l+1],f[4*l+2]=u[3*l+2];return f}(a):a,s.array=e.encodeFilterOct(a,o.getCount(),s.byteStride,i);break;case fo.QUATERNION:s.byteStride=8,s.componentType=Jh,s.normalized=!0,s.array=e.encodeFilterQuat(a,o.getCount(),s.byteStride,i);break;default:throw new Error("Invalid filter.")}s.min=o.getMin([]),s.max=o.getMax([]),o.getNormalized()&&(s.min=s.min.map(u=>cf(u,o.getComponentType())),s.max=s.max.map(u=>cf(u,o.getComponentType()))),s.normalized&&(s.min=s.min.map(u=>qh(u,s.componentType)),s.max=s.max.map(u=>qh(u,s.componentType)))}else s.byteStride%4&&(s.array=function(a,u){const f=ii.padNumber(a.BYTES_PER_ELEMENT*u)/a.BYTES_PER_ELEMENT,l=new a.constructor(a.length/u*f);for(let p=0;p*u<a.length;p++)for(let d=0;d<u;d++)l[p*f+d]=a[p*u+d];return l}(s.array,o.getElementSize()),s.byteStride=s.array.byteLength/o.getCount());return s}function tv(o,e){return e===us.BufferViewUsage.ELEMENT_ARRAY_BUFFER?o.listParents().some(t=>t instanceof ao&&t.getMode()===ao.Mode.TRIANGLES)?Eu.TRIANGLES:Eu.INDICES:Eu.ATTRIBUTES}function nv(o,e){const t=e.getGraph().listParentEdges(o).filter(n=>!(n.getParent()instanceof Wa));for(const n of t){const r=n.getName(),i=n.getAttributes().key||"";if(r==="indices")return{filter:fo.NONE};if(r==="attributes"){if(i==="POSITION")return{filter:fo.NONE};if(i==="TEXCOORD_0")return{filter:fo.NONE};if(i==="NORMAL")return{filter:fo.OCTAHEDRAL,bits:8};if(i==="TANGENT")return{filter:fo.OCTAHEDRAL,bits:8};if(i.startsWith("JOINTS_"))return{filter:fo.NONE};if(i.startsWith("WEIGHTS_"))return{filter:fo.NONE}}if(r==="output"){const s=Y_(o);return s==="rotation"?{filter:fo.QUATERNION,bits:16}:s==="translation"||s==="scale"?{filter:fo.EXPONENTIAL,bits:12}:{filter:fo.NONE}}if(r==="input")return{filter:fo.NONE};if(r==="inverseBindMatrices")return{filter:fo.NONE}}return{filter:fo.NONE}}function Y_(o){for(const e of o.listParents())if(e instanceof Xa){for(const t of e.listParents())if(t instanceof da)return t.getTargetPath()}return null}const Uo="EXT_meshopt_compression",Xh={method:vc.QUANTIZE};class Fa extends co{constructor(...e){super(...e),this.extensionName=Uo,this.prereadTypes=[lt.BUFFER,lt.PRIMITIVE],this.prewriteTypes=[lt.BUFFER,lt.ACCESSOR],this.readDependencies=["meshopt.decoder"],this.writeDependencies=["meshopt.encoder"],this._decoder=null,this._decoderFallbackBufferMap=new Map,this._encoder=null,this._encoderOptions=Xh,this._encoderFallbackBuffer=null,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={}}install(e,t){return e==="meshopt.decoder"&&(this._decoder=t),e==="meshopt.encoder"&&(this._encoder=t),this}setEncoderOptions(e){return this._encoderOptions=sa({},Xh,e),this}preread(e,t){if(!this._decoder){if(!this.isRequired())return this;throw new Error(`[${Uo}] Please install extension dependency, "meshopt.decoder".`)}if(!this._decoder.supported){if(!this.isRequired())return this;throw new Error(`[${Uo}]: Missing WASM support.`)}return t===lt.BUFFER?this._prereadBuffers(e):t===lt.PRIMITIVE&&this._prereadPrimitives(e),this}_prereadBuffers(e){const t=e.jsonDoc;(t.json.bufferViews||[]).forEach((n,r)=>{if(!n.extensions||!n.extensions[Uo])return;const i=n.extensions[Uo],s=i.byteOffset||0,a=i.byteLength||0,u=i.count,f=i.byteStride,l=new Uint8Array(u*f),p=t.json.buffers[i.buffer],d=ii.toView(p.uri?t.resources[p.uri]:t.resources[Dd],s,a);this._decoder.decodeGltfBuffer(l,u,f,d,i.mode,i.filter),e.bufferViews[r]=l})}_prereadPrimitives(e){const t=e.jsonDoc;(t.json.bufferViews||[]).forEach(n=>{var r;n.extensions&&n.extensions[Uo]&&(r=t.json.buffers[n.buffer]).extensions&&r.extensions.EXT_meshopt_compression&&r.extensions.EXT_meshopt_compression.fallback&&this._decoderFallbackBufferMap.set(e.buffers[n.buffer],e.buffers[n.extensions[Uo].buffer])})}read(e){if(!this.isRequired())return this;for(const[t,n]of this._decoderFallbackBufferMap){for(const r of t.listParents())r instanceof wn&&r.swap(t,n);t.dispose()}return this}prewrite(e,t){return t===lt.ACCESSOR?this._prewriteAccessors(e):t===lt.BUFFER&&this._prewriteBuffers(e),this}_prewriteAccessors(e){const t=e.jsonDoc.json,n=this._encoder,r=this._encoderOptions,i=this.document.createBuffer(),s=this.document.getRoot().listBuffers().indexOf(i);this._encoderFallbackBuffer=i,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={};for(const a of this.document.getRoot().listAccessors()){if(Y_(a)==="weights")continue;const u=e.getAccessorUsage(a),f=tv(a,u),l=r.method===vc.FILTER?nv(a,this.document):{filter:fo.NONE},p=ev(a,n,f,l),{array:d,byteStride:_}=p,A=a.getBuffer();if(!A)throw new Error(`${Uo}: Missing buffer for accessor.`);const E=this.document.getRoot().listBuffers().indexOf(A),v=[u,f,l.filter,_,E].join(":");let T=this._encoderBufferViews[v],I=this._encoderBufferViewData[v],R=this._encoderBufferViewAccessors[v];T&&I||(R=this._encoderBufferViewAccessors[v]=[],I=this._encoderBufferViewData[v]=[],T=this._encoderBufferViews[v]={buffer:s,target:us.USAGE_TO_TARGET[u],byteOffset:0,byteLength:0,byteStride:u===us.BufferViewUsage.ARRAY_BUFFER?_:void 0,extensions:{[Uo]:{buffer:E,byteOffset:0,byteLength:0,mode:f,filter:l.filter!==fo.NONE?l.filter:void 0,byteStride:_,count:0}}});const k=e.createAccessorDef(a);k.componentType=p.componentType,k.normalized=p.normalized,k.byteOffset=T.byteLength,k.min&&p.min&&(k.min=p.min),k.max&&p.max&&(k.max=p.max),e.accessorIndexMap.set(a,t.accessors.length),t.accessors.push(k),R.push(k),I.push(new Uint8Array(d.buffer,d.byteOffset,d.byteLength)),T.byteLength+=d.byteLength,T.extensions.EXT_meshopt_compression.count+=a.getCount()}}_prewriteBuffers(e){const t=this._encoder;for(const n in this._encoderBufferViews){const r=this._encoderBufferViews[n],i=this._encoderBufferViewData[n],s=this.document.getRoot().listBuffers()[r.extensions[Uo].buffer],a=e.otherBufferViews.get(s)||[],{count:u,byteStride:f,mode:l}=r.extensions[Uo],p=ii.concat(i),d=t.encodeGltfBuffer(p,u,f,l),_=ii.pad(d);r.extensions[Uo].byteLength=d.byteLength,i.length=0,i.push(_),a.push(_),e.otherBufferViews.set(s,a)}}write(e){let t=0;for(const s in this._encoderBufferViews){const a=this._encoderBufferViews[s],u=e.otherBufferViewsIndexMap.get(this._encoderBufferViewData[s][0]),f=this._encoderBufferViewAccessors[s];for(const d of f)d.bufferView=u;const l=e.jsonDoc.json.bufferViews[u],p=l.byteOffset||0;Object.assign(l,a),l.byteOffset=t,l.extensions[Uo].byteOffset=p,t+=ii.padNumber(a.byteLength)}const n=this._encoderFallbackBuffer,r=e.bufferIndexMap.get(n),i=e.jsonDoc.json.buffers[r];return i.byteLength=t,i.extensions={[Uo]:{fallback:!0}},n.dispose(),this}}Fa.EXTENSION_NAME=Uo,Fa.EncoderMethod=vc;const sc="EXT_texture_webp";class rv{match(e){return e.length>=12&&e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80}getSize(e){const t=ii.decodeText(e.slice(0,4)),n=ii.decodeText(e.slice(8,12));if(t!=="RIFF"||n!=="WEBP")return null;const r=new DataView(e.buffer,e.byteOffset);let i=12;for(;i<r.byteLength;){const s=ii.decodeText(new Uint8Array([r.getUint8(i),r.getUint8(i+1),r.getUint8(i+2),r.getUint8(i+3)])),a=r.getUint32(i+4,!0);if(s==="VP8 ")return[16383&r.getInt16(i+14,!0),16383&r.getInt16(i+16,!0)];if(s==="VP8L"){const u=r.getUint8(i+9),f=r.getUint8(i+10),l=r.getUint8(i+11);return[1+((63&f)<<8|u),1+((15&r.getUint8(i+12))<<10|l<<2|(192&f)>>6)]}i+=8+a+a%2}return null}getChannels(e){return 4}}class jl extends co{constructor(...e){super(...e),this.extensionName=sc,this.prereadTypes=[lt.TEXTURE]}static register(){as.registerFormat("image/webp",new rv)}preread(e){return(e.jsonDoc.json.textures||[]).forEach(t=>{t.extensions&&t.extensions[sc]&&(t.source=t.extensions[sc].source)}),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach(n=>{if(n.getMimeType()==="image/webp"){const r=e.imageIndexMap.get(n);(t.json.textures||[]).forEach(i=>{i.source===r&&(i.extensions=i.extensions||{},i.extensions[sc]={source:i.source},delete i.source)})}}),this}}jl.EXTENSION_NAME=sc;const Yh="KHR_draco_mesh_compression";let yo,$_,Z_,zo;function iv(o,e){const t=new yo.DecoderBuffer;try{if(t.Init(e,e.length),o.GetEncodedGeometryType(t)!==yo.TRIANGULAR_MESH)throw new Error(`[${Yh}] Unknown geometry type.`);const n=new yo.Mesh;if(!o.DecodeBufferToMesh(t,n).ok()||n.ptr===0)throw new Error(`[${Yh}] Decoding failure.`);return n}finally{yo.destroy(t)}}function ov(o,e){const t=3*e.num_faces();let n,r;if(e.num_points()<=65534){const i=t*Uint16Array.BYTES_PER_ELEMENT;n=yo._malloc(i),o.GetTrianglesUInt16Array(e,i,n),r=new Uint16Array(yo.HEAPU16.buffer,n,t).slice()}else{const i=t*Uint32Array.BYTES_PER_ELEMENT;n=yo._malloc(i),o.GetTrianglesUInt32Array(e,i,n),r=new Uint32Array(yo.HEAPU32.buffer,n,t).slice()}return yo._free(n),r}function sv(o,e,t,n){const r=Z_[n.componentType],i=$_[n.componentType],s=t.num_components(),a=e.num_points()*s,u=a*i.BYTES_PER_ELEMENT,f=yo._malloc(u);o.GetAttributeDataArrayForAllPoints(e,t,r,u,f);const l=new i(yo.HEAPF32.buffer,f,a).slice();return yo._free(f),l}var Ac,rs;(function(o){o[o.EDGEBREAKER=1]="EDGEBREAKER",o[o.SEQUENTIAL=0]="SEQUENTIAL"})(Ac||(Ac={})),function(o){o.POSITION="POSITION",o.NORMAL="NORMAL",o.COLOR="COLOR",o.TEX_COORD="TEX_COORD",o.GENERIC="GENERIC"}(rs||(rs={}));const Q_={[rs.POSITION]:14,[rs.NORMAL]:10,[rs.COLOR]:8,[rs.TEX_COORD]:12,[rs.GENERIC]:12},$h={decodeSpeed:5,encodeSpeed:5,method:Ac.EDGEBREAKER,quantizationBits:Q_,quantizationVolume:"mesh"};function av(o,e=$h){const t=sa({},$h,e);t.quantizationBits=sa({},Q_,e.quantizationBits);const n=new zo.Encoder,r=new zo.MeshBuilder,i=new zo.Mesh,s={},a=new zo.DracoInt8Array;for(const A of o.listSemantics()){const E=o.getAttribute(A),v=uv(A),T=cv(r,E.getComponentType(),i,zo[v],E.getCount(),E.getElementSize(),E.getArray());if(T===-1)throw new Error(`Error compressing "${A}" attribute.`);if(s[A]=T,t.quantizationVolume==="mesh"||A!=="POSITION")n.SetAttributeQuantization(zo[v],t.quantizationBits[v]);else{if(typeof t.quantizationVolume!="object")throw new Error("Invalid quantization volume state.");{const{quantizationVolume:I}=t,R=Math.max(I.max[0]-I.min[0],I.max[1]-I.min[1],I.max[2]-I.min[2]);n.SetAttributeExplicitQuantization(zo[v],t.quantizationBits[v],E.getElementSize(),I.min,R)}}}const u=o.getIndices();if(!u)throw new Tl("Primitive must have indices.");r.AddFacesToMesh(i,u.getCount()/3,u.getArray()),n.SetSpeedOptions(t.encodeSpeed,t.decodeSpeed),n.SetTrackEncodedProperties(!0),t.method===Ac.SEQUENTIAL||o.listTargets().length>0?n.SetEncodingMethod(zo.MESH_SEQUENTIAL_ENCODING):n.SetEncodingMethod(zo.MESH_EDGEBREAKER_ENCODING);const f=n.EncodeMeshToDracoBuffer(i,a);if(f<=0)throw new Tl("Error applying Draco compression.");const l=new Uint8Array(f);for(let A=0;A<f;++A)l[A]=a.GetValue(A);const p=o.getAttribute("POSITION").getCount(),d=n.GetNumberOfEncodedPoints(),_=3*n.GetNumberOfEncodedFaces();if(o.listTargets().length>0&&d!==p)throw new Tl('Compression reduced vertex count unexpectedly, corrupting morph targets. Applying the "weld" function before compression may resolve the issue.');return zo.destroy(a),zo.destroy(i),zo.destroy(r),zo.destroy(n),{numVertices:d,numIndices:_,data:l,attributeIDs:s}}function uv(o){return o==="POSITION"?rs.POSITION:o==="NORMAL"?rs.NORMAL:o.startsWith("COLOR_")?rs.COLOR:o.startsWith("TEXCOORD_")?rs.TEX_COORD:rs.GENERIC}function cv(o,e,t,n,r,i,s){switch(e){case wn.ComponentType.UNSIGNED_BYTE:return o.AddUInt8Attribute(t,n,r,i,s);case wn.ComponentType.BYTE:return o.AddInt8Attribute(t,n,r,i,s);case wn.ComponentType.UNSIGNED_SHORT:return o.AddUInt16Attribute(t,n,r,i,s);case wn.ComponentType.SHORT:return o.AddInt16Attribute(t,n,r,i,s);case wn.ComponentType.UNSIGNED_INT:return o.AddUInt32Attribute(t,n,r,i,s);case wn.ComponentType.FLOAT:return o.AddFloatAttribute(t,n,r,i,s);default:throw new Error(`Unexpected component type, "${e}".`)}}let Tl=class extends Error{};const lo="KHR_draco_mesh_compression";let La=class extends co{constructor(...e){super(...e),this.extensionName=lo,this.prereadTypes=[lt.PRIMITIVE],this.prewriteTypes=[lt.ACCESSOR],this.readDependencies=["draco3d.decoder"],this.writeDependencies=["draco3d.encoder"],this._decoderModule=null,this._encoderModule=null,this._encoderOptions={}}install(e,t){return e==="draco3d.decoder"&&(this._decoderModule=t,yo=this._decoderModule,$_={[wn.ComponentType.FLOAT]:Float32Array,[wn.ComponentType.UNSIGNED_INT]:Uint32Array,[wn.ComponentType.UNSIGNED_SHORT]:Uint16Array,[wn.ComponentType.UNSIGNED_BYTE]:Uint8Array,[wn.ComponentType.SHORT]:Int16Array,[wn.ComponentType.BYTE]:Int8Array},Z_={[wn.ComponentType.FLOAT]:yo.DT_FLOAT32,[wn.ComponentType.UNSIGNED_INT]:yo.DT_UINT32,[wn.ComponentType.UNSIGNED_SHORT]:yo.DT_UINT16,[wn.ComponentType.UNSIGNED_BYTE]:yo.DT_UINT8,[wn.ComponentType.SHORT]:yo.DT_INT16,[wn.ComponentType.BYTE]:yo.DT_INT8}),e==="draco3d.encoder"&&(this._encoderModule=t,zo=this._encoderModule),this}setEncoderOptions(e){return this._encoderOptions=e,this}preread(e){if(!this._decoderModule)throw new Error(`[${lo}] Please install extension dependency, "draco3d.decoder".`);const t=this.document.getLogger(),n=e.jsonDoc,r=new Map;try{const i=n.json.meshes||[];for(const s of i)for(const a of s.primitives){if(!a.extensions||!a.extensions[lo])continue;const u=a.extensions[lo];let[f,l]=r.get(u.bufferView)||[];if(!l||!f){const p=n.json.bufferViews[u.bufferView],d=n.json.buffers[p.buffer],_=ii.toView(d.uri?n.resources[d.uri]:n.resources[Dd],p.byteOffset||0,p.byteLength);f=new this._decoderModule.Decoder,l=iv(f,_),r.set(u.bufferView,[f,l]),t.debug(`[${lo}] Decompressed ${_.byteLength} bytes.`)}for(const p in a.attributes){const d=e.jsonDoc.json.accessors[a.attributes[p]],_=f.GetAttributeByUniqueId(l,u.attributes[p]),A=sv(f,l,_,d);e.accessors[a.attributes[p]].setArray(A)}a.indices!==void 0&&e.accessors[a.indices].setArray(ov(f,l))}}finally{for(const[i,s]of Array.from(r.values()))this._decoderModule.destroy(i),this._decoderModule.destroy(s)}return this}read(e){return this}prewrite(e,t){if(!this._encoderModule)throw new Error(`[${lo}] Please install extension dependency, "draco3d.encoder".`);const n=this.document.getLogger();n.debug(`[${lo}] Compression options: ${JSON.stringify(this._encoderOptions)}`);const r=function(a){const u=a.getLogger(),f=new Set,l=new Set;for(const v of a.getRoot().listMeshes())for(const T of v.listPrimitives())T.getIndices()?T.getMode()!==ao.Mode.TRIANGLES?(l.add(T),u.warn(`[${lo}] Skipping Draco compression on non-TRIANGLES primitive.`)):f.add(T):(l.add(T),u.warn(`[${lo}] Skipping Draco compression on non-indexed primitive.`));const p=a.getRoot().listAccessors(),d=new Map;for(let v=0;v<p.length;v++)d.set(p[v],v);const _=new Map,A=new Set,E=new Map;for(const v of Array.from(f)){let T=Zh(v,d);if(A.has(T))E.set(v,T);else{if(_.has(v.getIndices())){const I=v.getIndices(),R=I.clone();d.set(R,a.getRoot().listAccessors().length-1),v.swap(I,R)}for(const I of v.listAttributes())if(_.has(I)){const R=I.clone();d.set(R,a.getRoot().listAccessors().length-1),v.swap(I,R)}T=Zh(v,d),A.add(T),E.set(v,T),_.set(v.getIndices(),T);for(const I of v.listAttributes())_.set(I,T)}}for(const v of Array.from(_.keys())){const T=new Set(v.listParents().map(I=>I.propertyType));if(T.size!==2||!T.has(lt.PRIMITIVE)||!T.has(lt.ROOT))throw new Error(`[${lo}] Compressed accessors must only be used as indices or vertex attributes.`)}for(const v of Array.from(f)){const T=E.get(v),I=v.getIndices();if(_.get(I)!==T||v.listAttributes().some(R=>_.get(R)!==T))throw new Error(`[${lo}] Draco primitives must share all, or no, accessors.`)}for(const v of Array.from(l)){const T=v.getIndices();if(_.has(T)||v.listAttributes().some(I=>_.has(I)))throw new Error(`[${lo}] Accessor cannot be shared by compressed and uncompressed primitives.`)}return E}(this.document),i=new Map;let s="mesh";this._encoderOptions.quantizationVolume==="scene"&&(this.document.getRoot().listScenes().length!==1?n.warn(`[${lo}]: quantizationVolume=scene requires exactly 1 scene.`):s=Rc(this.document.getRoot().listScenes().pop()));for(const a of Array.from(r.keys())){const u=r.get(a);if(!u)throw new Error("Unexpected primitive.");if(i.has(u)){i.set(u,i.get(u));continue}const f=a.getIndices(),l=e.jsonDoc.json.accessors;let p;try{p=av(a,sa({},this._encoderOptions,{quantizationVolume:s}))}catch(A){if(A instanceof Tl){n.warn(`[${lo}]: ${A.message} Skipping primitive compression.`);continue}throw A}i.set(u,p);const d=e.createAccessorDef(f);d.count=p.numIndices,e.accessorIndexMap.set(f,l.length),l.push(d);for(const A of a.listSemantics()){const E=a.getAttribute(A),v=e.createAccessorDef(E);v.count=p.numVertices,e.accessorIndexMap.set(E,l.length),l.push(v)}const _=a.getAttribute("POSITION").getBuffer()||this.document.getRoot().listBuffers()[0];e.otherBufferViews.has(_)||e.otherBufferViews.set(_,[]),e.otherBufferViews.get(_).push(p.data)}return n.debug(`[${lo}] Compressed ${r.size} primitives.`),e.extensionData[lo]={primitiveHashMap:r,primitiveEncodingMap:i},this}write(e){const t=e.extensionData[lo];for(const n of this.document.getRoot().listMeshes()){const r=e.jsonDoc.json.meshes[e.meshIndexMap.get(n)];for(let i=0;i<n.listPrimitives().length;i++){const s=n.listPrimitives()[i],a=r.primitives[i],u=t.primitiveHashMap.get(s);if(!u)continue;const f=t.primitiveEncodingMap.get(u);f&&(a.extensions=a.extensions||{},a.extensions[lo]={bufferView:e.otherBufferViewsIndexMap.get(f.data),attributes:f.attributeIDs})}}if(!t.primitiveHashMap.size){const n=e.jsonDoc.json;n.extensionsUsed=(n.extensionsUsed||[]).filter(r=>r!==lo),n.extensionsRequired=(n.extensionsRequired||[]).filter(r=>r!==lo)}return this}};function Zh(o,e){const t=[],n=o.getIndices();t.push(e.get(n));for(const r of o.listAttributes())t.push(e.get(r));return t.sort().join("|")}La.EXTENSION_NAME=lo,La.EncoderMethod=Ac;let xu=class extends uo{init(){this.extensionName="KHR_lights_punctual",this.propertyType="Light",this.parentTypes=[lt.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{color:[1,1,1],intensity:1,type:xu.Type.POINT,range:null,innerConeAngle:0,outerConeAngle:Math.PI/4})}getColor(){return this.get("color")}setColor(e){return this.set("color",e)}getColorHex(){return Wo.factorToHex(this.getColor())}setColorHex(e){const t=this.getColor().slice();return Wo.hexToFactor(e,t),this.setColor(t)}getIntensity(){return this.get("intensity")}setIntensity(e){return this.set("intensity",e)}getType(){return this.get("type")}setType(e){return this.set("type",e)}getRange(){return this.get("range")}setRange(e){return this.set("range",e)}getInnerConeAngle(){return this.get("innerConeAngle")}setInnerConeAngle(e){return this.set("innerConeAngle",e)}getOuterConeAngle(){return this.get("outerConeAngle")}setOuterConeAngle(e){return this.set("outerConeAngle",e)}};xu.EXTENSION_NAME="KHR_lights_punctual",xu.Type={POINT:"point",SPOT:"spot",DIRECTIONAL:"directional"};const As="KHR_lights_punctual";let Gd=class extends co{constructor(...e){super(...e),this.extensionName=As}createLight(e=""){return new xu(this.document.getGraph(),e)}read(e){const t=e.jsonDoc;if(!t.json.extensions||!t.json.extensions[As])return this;const n=(t.json.extensions[As].lights||[]).map(r=>{var i,s;const a=this.createLight().setName(r.name||"").setType(r.type);return r.color!==void 0&&a.setColor(r.color),r.intensity!==void 0&&a.setIntensity(r.intensity),r.range!==void 0&&a.setRange(r.range),((i=r.spot)==null?void 0:i.innerConeAngle)!==void 0&&a.setInnerConeAngle(r.spot.innerConeAngle),((s=r.spot)==null?void 0:s.outerConeAngle)!==void 0&&a.setOuterConeAngle(r.spot.outerConeAngle),a});return t.json.nodes.forEach((r,i)=>{r.extensions&&r.extensions[As]&&e.nodes[i].setExtension(As,n[r.extensions[As].light])}),this}write(e){const t=e.jsonDoc;if(this.properties.size===0)return this;const n=[],r=new Map;for(const i of this.properties){const s=i,a={type:s.getType()};bi.eq(s.getColor(),[1,1,1])||(a.color=s.getColor()),s.getIntensity()!==1&&(a.intensity=s.getIntensity()),s.getRange()!=null&&(a.range=s.getRange()),s.getName()&&(a.name=s.getName()),s.getType()===xu.Type.SPOT&&(a.spot={innerConeAngle:s.getInnerConeAngle(),outerConeAngle:s.getOuterConeAngle()}),n.push(a),r.set(s,n.length-1)}return this.document.getRoot().listNodes().forEach(i=>{const s=i.getExtension(As);if(s){const a=e.nodeIndexMap.get(i),u=t.json.nodes[a];u.extensions=u.extensions||{},u.extensions[As]={light:r.get(s)}}}),t.json.extensions=t.json.extensions||{},t.json.extensions[As]={lights:n},this}};Gd.EXTENSION_NAME=As;const{R:Qh,G:ep,B:lv}=ho;let kd=class extends uo{init(){this.extensionName="KHR_materials_clearcoat",this.propertyType="Clearcoat",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{clearcoatFactor:0,clearcoatTexture:null,clearcoatTextureInfo:new Qi(this.graph,"clearcoatTextureInfo"),clearcoatRoughnessFactor:0,clearcoatRoughnessTexture:null,clearcoatRoughnessTextureInfo:new Qi(this.graph,"clearcoatRoughnessTextureInfo"),clearcoatNormalScale:1,clearcoatNormalTexture:null,clearcoatNormalTextureInfo:new Qi(this.graph,"clearcoatNormalTextureInfo")})}getClearcoatFactor(){return this.get("clearcoatFactor")}setClearcoatFactor(e){return this.set("clearcoatFactor",e)}getClearcoatTexture(){return this.getRef("clearcoatTexture")}getClearcoatTextureInfo(){return this.getRef("clearcoatTexture")?this.getRef("clearcoatTextureInfo"):null}setClearcoatTexture(e){return this.setRef("clearcoatTexture",e,{channels:Qh})}getClearcoatRoughnessFactor(){return this.get("clearcoatRoughnessFactor")}setClearcoatRoughnessFactor(e){return this.set("clearcoatRoughnessFactor",e)}getClearcoatRoughnessTexture(){return this.getRef("clearcoatRoughnessTexture")}getClearcoatRoughnessTextureInfo(){return this.getRef("clearcoatRoughnessTexture")?this.getRef("clearcoatRoughnessTextureInfo"):null}setClearcoatRoughnessTexture(e){return this.setRef("clearcoatRoughnessTexture",e,{channels:ep})}getClearcoatNormalScale(){return this.get("clearcoatNormalScale")}setClearcoatNormalScale(e){return this.set("clearcoatNormalScale",e)}getClearcoatNormalTexture(){return this.getRef("clearcoatNormalTexture")}getClearcoatNormalTextureInfo(){return this.getRef("clearcoatNormalTexture")?this.getRef("clearcoatNormalTextureInfo"):null}setClearcoatNormalTexture(e){return this.setRef("clearcoatNormalTexture",e,{channels:Qh|ep|lv})}};kd.EXTENSION_NAME="KHR_materials_clearcoat";const ga="KHR_materials_clearcoat";let Hd=class extends co{constructor(...e){super(...e),this.extensionName=ga}createClearcoat(){return new kd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[ga]){const s=this.createClearcoat();e.materials[i].setExtension(ga,s);const a=r.extensions[ga];if(a.clearcoatFactor!==void 0&&s.setClearcoatFactor(a.clearcoatFactor),a.clearcoatRoughnessFactor!==void 0&&s.setClearcoatRoughnessFactor(a.clearcoatRoughnessFactor),a.clearcoatTexture!==void 0){const u=a.clearcoatTexture;s.setClearcoatTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getClearcoatTextureInfo(),u)}if(a.clearcoatRoughnessTexture!==void 0){const u=a.clearcoatRoughnessTexture;s.setClearcoatRoughnessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getClearcoatRoughnessTextureInfo(),u)}if(a.clearcoatNormalTexture!==void 0){const u=a.clearcoatNormalTexture;s.setClearcoatNormalTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getClearcoatNormalTextureInfo(),u),u.scale!==void 0&&s.setClearcoatNormalScale(u.scale)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(ga);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[ga]={clearcoatFactor:r.getClearcoatFactor(),clearcoatRoughnessFactor:r.getClearcoatRoughnessFactor()};if(r.getClearcoatTexture()){const u=r.getClearcoatTexture(),f=r.getClearcoatTextureInfo();a.clearcoatTexture=e.createTextureInfoDef(u,f)}if(r.getClearcoatRoughnessTexture()){const u=r.getClearcoatRoughnessTexture(),f=r.getClearcoatRoughnessTextureInfo();a.clearcoatRoughnessTexture=e.createTextureInfoDef(u,f)}if(r.getClearcoatNormalTexture()){const u=r.getClearcoatNormalTexture(),f=r.getClearcoatNormalTextureInfo();a.clearcoatNormalTexture=e.createTextureInfoDef(u,f),r.getClearcoatNormalScale()!==1&&(a.clearcoatNormalTexture.scale=r.getClearcoatNormalScale())}}}),this}};Hd.EXTENSION_NAME=ga;let Wd=class extends uo{init(){this.extensionName="KHR_materials_emissive_strength",this.propertyType="EmissiveStrength",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{emissiveStrength:1})}getEmissiveStrength(){return this.get("emissiveStrength")}setEmissiveStrength(e){return this.set("emissiveStrength",e)}};Wd.EXTENSION_NAME="KHR_materials_emissive_strength";const ya="KHR_materials_emissive_strength";let Vd=class extends co{constructor(...e){super(...e),this.extensionName=ya}createEmissiveStrength(){return new Wd(this.document.getGraph())}read(e){return(e.jsonDoc.json.materials||[]).forEach((t,n)=>{if(t.extensions&&t.extensions[ya]){const r=this.createEmissiveStrength();e.materials[n].setExtension(ya,r);const i=t.extensions[ya];i.emissiveStrength!==void 0&&r.setEmissiveStrength(i.emissiveStrength)}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(ya);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[ya]={emissiveStrength:r.getEmissiveStrength()}}}),this}};Vd.EXTENSION_NAME=ya;let jd=class extends uo{init(){this.extensionName="KHR_materials_ior",this.propertyType="IOR",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{ior:0})}getIOR(){return this.get("ior")}setIOR(e){return this.set("ior",e)}};jd.EXTENSION_NAME="KHR_materials_ior";const va="KHR_materials_ior";let zl=class extends co{constructor(...e){super(...e),this.extensionName=va}createIOR(){return new jd(this.document.getGraph())}read(e){return(e.jsonDoc.json.materials||[]).forEach((t,n)=>{if(t.extensions&&t.extensions[va]){const r=this.createIOR();e.materials[n].setExtension(va,r);const i=t.extensions[va];i.ior!==void 0&&r.setIOR(i.ior)}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(va);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[va]={ior:r.getIOR()}}}),this}};zl.EXTENSION_NAME=va;const{R:fv,G:dv}=ho;let zd=class extends uo{init(){this.extensionName="KHR_materials_iridescence",this.propertyType="Iridescence",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{iridescenceFactor:0,iridescenceTexture:null,iridescenceTextureInfo:new Qi(this.graph,"iridescenceTextureInfo"),iridescenceIOR:1.3,iridescenceThicknessMinimum:100,iridescenceThicknessMaximum:400,iridescenceThicknessTexture:null,iridescenceThicknessTextureInfo:new Qi(this.graph,"iridescenceThicknessTextureInfo")})}getIridescenceFactor(){return this.get("iridescenceFactor")}setIridescenceFactor(e){return this.set("iridescenceFactor",e)}getIridescenceTexture(){return this.getRef("iridescenceTexture")}getIridescenceTextureInfo(){return this.getRef("iridescenceTexture")?this.getRef("iridescenceTextureInfo"):null}setIridescenceTexture(e){return this.setRef("iridescenceTexture",e,{channels:fv})}getIridescenceIOR(){return this.get("iridescenceIOR")}setIridescenceIOR(e){return this.set("iridescenceIOR",e)}getIridescenceThicknessMinimum(){return this.get("iridescenceThicknessMinimum")}setIridescenceThicknessMinimum(e){return this.set("iridescenceThicknessMinimum",e)}getIridescenceThicknessMaximum(){return this.get("iridescenceThicknessMaximum")}setIridescenceThicknessMaximum(e){return this.set("iridescenceThicknessMaximum",e)}getIridescenceThicknessTexture(){return this.getRef("iridescenceThicknessTexture")}getIridescenceThicknessTextureInfo(){return this.getRef("iridescenceThicknessTexture")?this.getRef("iridescenceThicknessTextureInfo"):null}setIridescenceThicknessTexture(e){return this.setRef("iridescenceThicknessTexture",e,{channels:dv})}};zd.EXTENSION_NAME="KHR_materials_iridescence";const Aa="KHR_materials_iridescence";let Kd=class extends co{constructor(...e){super(...e),this.extensionName=Aa}createIridescence(){return new zd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Aa]){const s=this.createIridescence();e.materials[i].setExtension(Aa,s);const a=r.extensions[Aa];if(a.iridescenceFactor!==void 0&&s.setIridescenceFactor(a.iridescenceFactor),a.iridescenceIor!==void 0&&s.setIridescenceIOR(a.iridescenceIor),a.iridescenceThicknessMinimum!==void 0&&s.setIridescenceThicknessMinimum(a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&s.setIridescenceThicknessMaximum(a.iridescenceThicknessMaximum),a.iridescenceTexture!==void 0){const u=a.iridescenceTexture;s.setIridescenceTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getIridescenceTextureInfo(),u)}if(a.iridescenceThicknessTexture!==void 0){const u=a.iridescenceThicknessTexture;s.setIridescenceThicknessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getIridescenceThicknessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Aa);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Aa]={};if(r.getIridescenceFactor()>0&&(a.iridescenceFactor=r.getIridescenceFactor()),r.getIridescenceIOR()!==1.3&&(a.iridescenceIor=r.getIridescenceIOR()),r.getIridescenceThicknessMinimum()!==100&&(a.iridescenceThicknessMinimum=r.getIridescenceThicknessMinimum()),r.getIridescenceThicknessMaximum()!==400&&(a.iridescenceThicknessMaximum=r.getIridescenceThicknessMaximum()),r.getIridescenceTexture()){const u=r.getIridescenceTexture(),f=r.getIridescenceTextureInfo();a.iridescenceTexture=e.createTextureInfoDef(u,f)}if(r.getIridescenceThicknessTexture()){const u=r.getIridescenceThicknessTexture(),f=r.getIridescenceThicknessTextureInfo();a.iridescenceThicknessTexture=e.createTextureInfoDef(u,f)}}}),this}};Kd.EXTENSION_NAME=Aa;const{R:tp,G:np,B:rp,A:ip}=ho;let Jd=class extends uo{init(){this.extensionName="KHR_materials_pbrSpecularGlossiness",this.propertyType="PBRSpecularGlossiness",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseFactor:[1,1,1,1],diffuseTexture:null,diffuseTextureInfo:new Qi(this.graph,"diffuseTextureInfo"),specularFactor:[1,1,1],glossinessFactor:1,specularGlossinessTexture:null,specularGlossinessTextureInfo:new Qi(this.graph,"specularGlossinessTextureInfo")})}getDiffuseFactor(){return this.get("diffuseFactor")}setDiffuseFactor(e){return this.set("diffuseFactor",e)}getDiffuseHex(){return Wo.factorToHex(this.getDiffuseFactor())}setDiffuseHex(e){const t=this.getDiffuseFactor().slice();return this.setDiffuseFactor(Wo.hexToFactor(e,t))}getDiffuseTexture(){return this.getRef("diffuseTexture")}getDiffuseTextureInfo(){return this.getRef("diffuseTexture")?this.getRef("diffuseTextureInfo"):null}setDiffuseTexture(e){return this.setRef("diffuseTexture",e,{channels:tp|np|rp|ip})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getGlossinessFactor(){return this.get("glossinessFactor")}setGlossinessFactor(e){return this.set("glossinessFactor",e)}getSpecularGlossinessTexture(){return this.getRef("specularGlossinessTexture")}getSpecularGlossinessTextureInfo(){return this.getRef("specularGlossinessTexture")?this.getRef("specularGlossinessTextureInfo"):null}setSpecularGlossinessTexture(e){return this.setRef("specularGlossinessTexture",e,{channels:tp|np|rp|ip})}};Jd.EXTENSION_NAME="KHR_materials_pbrSpecularGlossiness";const ba="KHR_materials_pbrSpecularGlossiness";let Kl=class extends co{constructor(...e){super(...e),this.extensionName=ba}createPBRSpecularGlossiness(){return new Jd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[ba]){const s=this.createPBRSpecularGlossiness();e.materials[i].setExtension(ba,s);const a=r.extensions[ba];if(a.diffuseFactor!==void 0&&s.setDiffuseFactor(a.diffuseFactor),a.specularFactor!==void 0&&s.setSpecularFactor(a.specularFactor),a.glossinessFactor!==void 0&&s.setGlossinessFactor(a.glossinessFactor),a.diffuseTexture!==void 0){const u=a.diffuseTexture;s.setDiffuseTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getDiffuseTextureInfo(),u)}if(a.specularGlossinessTexture!==void 0){const u=a.specularGlossinessTexture;s.setSpecularGlossinessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSpecularGlossinessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(ba);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[ba]={diffuseFactor:r.getDiffuseFactor(),specularFactor:r.getSpecularFactor(),glossinessFactor:r.getGlossinessFactor()};if(r.getDiffuseTexture()){const u=r.getDiffuseTexture(),f=r.getDiffuseTextureInfo();a.diffuseTexture=e.createTextureInfoDef(u,f)}if(r.getSpecularGlossinessTexture()){const u=r.getSpecularGlossinessTexture(),f=r.getSpecularGlossinessTextureInfo();a.specularGlossinessTexture=e.createTextureInfoDef(u,f)}}}),this}};Kl.EXTENSION_NAME=ba;const{R:hv,G:pv,B:mv,A:_v}=ho;let qd=class extends uo{init(){this.extensionName="KHR_materials_sheen",this.propertyType="Sheen",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{sheenColorFactor:[0,0,0],sheenColorTexture:null,sheenColorTextureInfo:new Qi(this.graph,"sheenColorTextureInfo"),sheenRoughnessFactor:0,sheenRoughnessTexture:null,sheenRoughnessTextureInfo:new Qi(this.graph,"sheenRoughnessTextureInfo")})}getSheenColorFactor(){return this.get("sheenColorFactor")}getSheenColorHex(){return Wo.factorToHex(this.getSheenColorFactor())}setSheenColorFactor(e){return this.set("sheenColorFactor",e)}setSheenColorHex(e){const t=this.getSheenColorFactor().slice();return this.set("sheenColorFactor",Wo.hexToFactor(e,t))}getSheenColorTexture(){return this.getRef("sheenColorTexture")}getSheenColorTextureInfo(){return this.getRef("sheenColorTexture")?this.getRef("sheenColorTextureInfo"):null}setSheenColorTexture(e){return this.setRef("sheenColorTexture",e,{channels:hv|pv|mv})}getSheenRoughnessFactor(){return this.get("sheenRoughnessFactor")}setSheenRoughnessFactor(e){return this.set("sheenRoughnessFactor",e)}getSheenRoughnessTexture(){return this.getRef("sheenRoughnessTexture")}getSheenRoughnessTextureInfo(){return this.getRef("sheenRoughnessTexture")?this.getRef("sheenRoughnessTextureInfo"):null}setSheenRoughnessTexture(e){return this.setRef("sheenRoughnessTexture",e,{channels:_v})}};qd.EXTENSION_NAME="KHR_materials_sheen";const Ea="KHR_materials_sheen";let Xd=class extends co{constructor(...e){super(...e),this.extensionName=Ea}createSheen(){return new qd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Ea]){const s=this.createSheen();e.materials[i].setExtension(Ea,s);const a=r.extensions[Ea];if(a.sheenColorFactor!==void 0&&s.setSheenColorFactor(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&s.setSheenRoughnessFactor(a.sheenRoughnessFactor),a.sheenColorTexture!==void 0){const u=a.sheenColorTexture;s.setSheenColorTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSheenColorTextureInfo(),u)}if(a.sheenRoughnessTexture!==void 0){const u=a.sheenRoughnessTexture;s.setSheenRoughnessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSheenRoughnessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Ea);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Ea]={sheenColorFactor:r.getSheenColorFactor(),sheenRoughnessFactor:r.getSheenRoughnessFactor()};if(r.getSheenColorTexture()){const u=r.getSheenColorTexture(),f=r.getSheenColorTextureInfo();a.sheenColorTexture=e.createTextureInfoDef(u,f)}if(r.getSheenRoughnessTexture()){const u=r.getSheenRoughnessTexture(),f=r.getSheenRoughnessTextureInfo();a.sheenRoughnessTexture=e.createTextureInfoDef(u,f)}}}),this}};Xd.EXTENSION_NAME=Ea;const{R:gv,G:yv,B:vv,A:Av}=ho;let Yd=class extends uo{init(){this.extensionName="KHR_materials_specular",this.propertyType="Specular",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{specularFactor:1,specularTexture:null,specularTextureInfo:new Qi(this.graph,"specularTextureInfo"),specularColorFactor:[1,1,1],specularColorTexture:null,specularColorTextureInfo:new Qi(this.graph,"specularColorTextureInfo")})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getSpecularColorFactor(){return this.get("specularColorFactor")}setSpecularColorFactor(e){return this.set("specularColorFactor",e)}getSpecularColorHex(){return Wo.factorToHex(this.getSpecularColorFactor())}setSpecularColorHex(e){const t=this.getSpecularColorFactor().slice();return this.set("specularColorFactor",Wo.hexToFactor(e,t))}getSpecularTexture(){return this.getRef("specularTexture")}getSpecularTextureInfo(){return this.getRef("specularTexture")?this.getRef("specularTextureInfo"):null}setSpecularTexture(e){return this.setRef("specularTexture",e,{channels:Av})}getSpecularColorTexture(){return this.getRef("specularColorTexture")}getSpecularColorTextureInfo(){return this.getRef("specularColorTexture")?this.getRef("specularColorTextureInfo"):null}setSpecularColorTexture(e){return this.setRef("specularColorTexture",e,{channels:gv|yv|vv})}};Yd.EXTENSION_NAME="KHR_materials_specular";const Ta="KHR_materials_specular";let Jl=class extends co{constructor(...e){super(...e),this.extensionName=Ta}createSpecular(){return new Yd(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Ta]){const s=this.createSpecular();e.materials[i].setExtension(Ta,s);const a=r.extensions[Ta];if(a.specularFactor!==void 0&&s.setSpecularFactor(a.specularFactor),a.specularColorFactor!==void 0&&s.setSpecularColorFactor(a.specularColorFactor),a.specularTexture!==void 0){const u=a.specularTexture;s.setSpecularTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSpecularTextureInfo(),u)}if(a.specularColorTexture!==void 0){const u=a.specularColorTexture;s.setSpecularColorTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getSpecularColorTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Ta);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Ta]={};if(r.getSpecularFactor()!==1&&(a.specularFactor=r.getSpecularFactor()),bi.eq(r.getSpecularColorFactor(),[1,1,1])||(a.specularColorFactor=r.getSpecularColorFactor()),r.getSpecularTexture()){const u=r.getSpecularTexture(),f=r.getSpecularTextureInfo();a.specularTexture=e.createTextureInfoDef(u,f)}if(r.getSpecularColorTexture()){const u=r.getSpecularColorTexture(),f=r.getSpecularColorTextureInfo();a.specularColorTexture=e.createTextureInfoDef(u,f)}}}),this}};Jl.EXTENSION_NAME=Ta;const{R:bv}=ho;let $d=class extends uo{init(){this.extensionName="KHR_materials_transmission",this.propertyType="Transmission",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{transmissionFactor:0,transmissionTexture:null,transmissionTextureInfo:new Qi(this.graph,"transmissionTextureInfo")})}getTransmissionFactor(){return this.get("transmissionFactor")}setTransmissionFactor(e){return this.set("transmissionFactor",e)}getTransmissionTexture(){return this.getRef("transmissionTexture")}getTransmissionTextureInfo(){return this.getRef("transmissionTexture")?this.getRef("transmissionTextureInfo"):null}setTransmissionTexture(e){return this.setRef("transmissionTexture",e,{channels:bv})}};$d.EXTENSION_NAME="KHR_materials_transmission";const wa="KHR_materials_transmission";let Zd=class extends co{constructor(...e){super(...e),this.extensionName=wa}createTransmission(){return new $d(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[wa]){const s=this.createTransmission();e.materials[i].setExtension(wa,s);const a=r.extensions[wa];if(a.transmissionFactor!==void 0&&s.setTransmissionFactor(a.transmissionFactor),a.transmissionTexture!==void 0){const u=a.transmissionTexture;s.setTransmissionTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getTransmissionTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(wa);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[wa]={transmissionFactor:r.getTransmissionFactor()};if(r.getTransmissionTexture()){const u=r.getTransmissionTexture(),f=r.getTransmissionTextureInfo();a.transmissionTexture=e.createTextureInfoDef(u,f)}}}),this}};Zd.EXTENSION_NAME=wa;let Qd=class extends uo{init(){this.extensionName="KHR_materials_unlit",this.propertyType="Unlit",this.parentTypes=[lt.MATERIAL]}};Qd.EXTENSION_NAME="KHR_materials_unlit";const gu="KHR_materials_unlit";let ql=class extends co{constructor(...e){super(...e),this.extensionName=gu}createUnlit(){return new Qd(this.document.getGraph())}read(e){return(e.jsonDoc.json.materials||[]).forEach((t,n)=>{t.extensions&&t.extensions[gu]&&e.materials[n].setExtension(gu,this.createUnlit())}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{if(n.getExtension(gu)){const r=e.materialIndexMap.get(n),i=t.json.materials[r];i.extensions=i.extensions||{},i.extensions[gu]={}}}),this}};ql.EXTENSION_NAME=gu;let eh=class extends uo{init(){this.extensionName="KHR_materials_variants",this.propertyType="Mapping",this.parentTypes=["MappingList"]}getDefaults(){return Object.assign(super.getDefaults(),{material:null,variants:[]})}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}addVariant(e){return this.addRef("variants",e)}removeVariant(e){return this.removeRef("variants",e)}listVariants(){return this.listRefs("variants")}};eh.EXTENSION_NAME="KHR_materials_variants";let th=class extends uo{init(){this.extensionName="KHR_materials_variants",this.propertyType="MappingList",this.parentTypes=[lt.PRIMITIVE]}getDefaults(){return Object.assign(super.getDefaults(),{mappings:[]})}addMapping(e){return this.addRef("mappings",e)}removeMapping(e){return this.removeRef("mappings",e)}listMappings(){return this.listRefs("mappings")}};th.EXTENSION_NAME="KHR_materials_variants";let Pl=class extends uo{init(){this.extensionName="KHR_materials_variants",this.propertyType="Variant",this.parentTypes=["MappingList"]}};Pl.EXTENSION_NAME="KHR_materials_variants";const bs="KHR_materials_variants";let nh=class extends co{constructor(...e){super(...e),this.extensionName=bs}createMappingList(){return new th(this.document.getGraph())}createVariant(e=""){return new Pl(this.document.getGraph(),e)}createMapping(){return new eh(this.document.getGraph())}listVariants(){return Array.from(this.properties).filter(e=>e instanceof Pl)}read(e){const t=e.jsonDoc;if(!t.json.extensions||!t.json.extensions[bs])return this;const n=(t.json.extensions[bs].variants||[]).map(r=>this.createVariant().setName(r.name||""));return(t.json.meshes||[]).forEach((r,i)=>{const s=e.meshes[i];(r.primitives||[]).forEach((a,u)=>{if(!a.extensions||!a.extensions[bs])return;const f=this.createMappingList(),l=a.extensions[bs];for(const p of l.mappings){const d=this.createMapping();p.material!==void 0&&d.setMaterial(e.materials[p.material]);for(const _ of p.variants||[])d.addVariant(n[_]);f.addMapping(d)}s.listPrimitives()[u].setExtension(bs,f)})}),this}write(e){const t=e.jsonDoc,n=this.listVariants();if(!n.length)return this;const r=[],i=new Map;for(const s of n)i.set(s,r.length),r.push(e.createPropertyDef(s));for(const s of this.document.getRoot().listMeshes()){const a=e.meshIndexMap.get(s);s.listPrimitives().forEach((u,f)=>{const l=u.getExtension(bs);if(!l)return;const p=e.jsonDoc.json.meshes[a].primitives[f],d=l.listMappings().map(_=>{const A=e.createPropertyDef(_),E=_.getMaterial();return E&&(A.material=e.materialIndexMap.get(E)),A.variants=_.listVariants().map(v=>i.get(v)),A});p.extensions=p.extensions||{},p.extensions[bs]={mappings:d}})}return t.json.extensions=t.json.extensions||{},t.json.extensions[bs]={variants:r},this}};nh.EXTENSION_NAME=bs;const{G:Ev}=ho;let rh=class extends uo{init(){this.extensionName="KHR_materials_volume",this.propertyType="Volume",this.parentTypes=[lt.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{thicknessFactor:0,thicknessTexture:null,thicknessTextureInfo:new Qi(this.graph,"thicknessTexture"),attenuationDistance:1/0,attenuationColor:[1,1,1]})}getThicknessFactor(){return this.get("thicknessFactor")}setThicknessFactor(e){return this.set("thicknessFactor",e)}getThicknessTexture(){return this.getRef("thicknessTexture")}getThicknessTextureInfo(){return this.getRef("thicknessTexture")?this.getRef("thicknessTextureInfo"):null}setThicknessTexture(e){return this.setRef("thicknessTexture",e,{channels:Ev})}getAttenuationDistance(){return this.get("attenuationDistance")}setAttenuationDistance(e){return this.set("attenuationDistance",e)}getAttenuationColor(){return this.get("attenuationColor")}setAttenuationColor(e){return this.set("attenuationColor",e)}getAttenuationColorHex(){return Wo.factorToHex(this.getAttenuationColor())}setAttenuationColorHex(e){const t=this.getAttenuationColor().slice();return this.set("attenuationColor",Wo.hexToFactor(e,t))}};rh.EXTENSION_NAME="KHR_materials_volume";const Ca="KHR_materials_volume";let ih=class extends co{constructor(...e){super(...e),this.extensionName=Ca}createVolume(){return new rh(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.textures||[];return(t.json.materials||[]).forEach((r,i)=>{if(r.extensions&&r.extensions[Ca]){const s=this.createVolume();e.materials[i].setExtension(Ca,s);const a=r.extensions[Ca];if(a.thicknessFactor!==void 0&&s.setThicknessFactor(a.thicknessFactor),a.attenuationDistance!==void 0&&s.setAttenuationDistance(a.attenuationDistance),a.attenuationColor!==void 0&&s.setAttenuationColor(a.attenuationColor),a.thicknessTexture!==void 0){const u=a.thicknessTexture;s.setThicknessTexture(e.textures[n[u.index].source]),e.setTextureInfo(s.getThicknessTextureInfo(),u)}}}),this}write(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(n=>{const r=n.getExtension(Ca);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const a=s.extensions[Ca]={};if(r.getThicknessFactor()>0&&(a.thicknessFactor=r.getThicknessFactor()),Number.isFinite(r.getAttenuationDistance())&&(a.attenuationDistance=r.getAttenuationDistance()),bi.eq(r.getAttenuationColor(),[1,1,1])||(a.attenuationColor=r.getAttenuationColor()),r.getThicknessTexture()){const u=r.getThicknessTexture(),f=r.getThicknessTextureInfo();a.thicknessTexture=e.createTextureInfoDef(u,f)}}}),this}};ih.EXTENSION_NAME=Ca;const eg="KHR_mesh_quantization";let Ic=class extends co{constructor(...e){super(...e),this.extensionName=eg}read(e){return this}write(e){return this}};Ic.EXTENSION_NAME=eg;const ac="KHR_texture_basisu";let Tv=class{match(e){return e[0]===171&&e[1]===75&&e[2]===84&&e[3]===88&&e[4]===32&&e[5]===50&&e[6]===48&&e[7]===187&&e[8]===13&&e[9]===10&&e[10]===26&&e[11]===10}getSize(e){const t=El(e);return[t.pixelWidth,t.pixelHeight]}getChannels(e){const t=El(e).dataFormatDescriptor[0];if(t.colorModel===q_)return t.samples.length===2&&(15&t.samples[1].channelType)==15?4:3;if(t.colorModel===X_)return(15&t.samples[0].channelType)==3?4:3;throw new Error(`Unexpected KTX2 colorModel, "${t.colorModel}".`)}getGPUByteLength(e){const t=El(e),n=this.getChannels(e)>3;let r=0;for(let i=0;i<t.levels.length;i++){const s=t.levels[i];r+=s.uncompressedByteLength?s.uncompressedByteLength:Math.max(1,Math.floor(t.pixelWidth/Math.pow(2,i)))/4*(Math.max(1,Math.floor(t.pixelHeight/Math.pow(2,i)))/4)*(n?16:8)}return r}},oh=class extends co{constructor(...e){super(...e),this.extensionName=ac,this.prereadTypes=[lt.TEXTURE]}static register(){as.registerFormat("image/ktx2",new Tv)}preread(e){return e.jsonDoc.json.textures.forEach(t=>{t.extensions&&t.extensions[ac]&&(t.source=t.extensions[ac].source)}),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach(n=>{if(n.getMimeType()==="image/ktx2"){const r=e.imageIndexMap.get(n);t.json.textures.forEach(i=>{i.source===r&&(i.extensions=i.extensions||{},i.extensions[ac]={source:i.source},delete i.source)})}}),this}};oh.EXTENSION_NAME=ac;let sh=class extends uo{init(){this.extensionName="KHR_texture_transform",this.propertyType="Transform",this.parentTypes=[lt.TEXTURE_INFO]}getDefaults(){return Object.assign(super.getDefaults(),{offset:[0,0],rotation:0,scale:[1,1],texCoord:null})}getOffset(){return this.get("offset")}setOffset(e){return this.set("offset",e)}getRotation(){return this.get("rotation")}setRotation(e){return this.set("rotation",e)}getScale(){return this.get("scale")}setScale(e){return this.set("scale",e)}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}};sh.EXTENSION_NAME="KHR_texture_transform";const Sa="KHR_texture_transform";let ah=class extends co{constructor(...e){super(...e),this.extensionName=Sa}createTransform(){return new sh(this.document.getGraph())}read(e){for(const[t,n]of Array.from(e.textureInfos.entries())){if(!n.extensions||!n.extensions[Sa])continue;const r=this.createTransform(),i=n.extensions[Sa];i.offset!==void 0&&r.setOffset(i.offset),i.rotation!==void 0&&r.setRotation(i.rotation),i.scale!==void 0&&r.setScale(i.scale),i.texCoord!==void 0&&r.setTexCoord(i.texCoord),t.setExtension(Sa,r)}return this}write(e){const t=Array.from(e.textureInfoDefMap.entries());for(const[n,r]of t){const i=n.getExtension(Sa);if(!i)continue;r.extensions=r.extensions||{};const s={},a=bi.eq;a(i.getOffset(),[0,0])||(s.offset=i.getOffset()),i.getRotation()!==0&&(s.rotation=i.getRotation()),a(i.getScale(),[1,1])||(s.scale=i.getScale()),i.getTexCoord()!=null&&(s.texCoord=i.getTexCoord()),r.extensions[Sa]=s}return this}};ah.EXTENSION_NAME=Sa;const wv=[lt.ROOT,lt.SCENE,lt.NODE,lt.MESH,lt.MATERIAL,lt.TEXTURE,lt.ANIMATION];let uh=class extends uo{init(){this.extensionName="KHR_xmp_json_ld",this.propertyType="Packet",this.parentTypes=wv}getDefaults(){return Object.assign(super.getDefaults(),{context:{},properties:{}})}getContext(){return this.get("context")}setContext(e){return this.set("context",sa({},e))}listProperties(){return Object.keys(this.get("properties"))}getProperty(e){const t=this.get("properties");return e in t?t[e]:null}setProperty(e,t){this._assertContext(e);const n=sa({},this.get("properties"));return t?n[e]=t:delete n[e],this.set("properties",n)}toJSONLD(){return sa({"@context":lf(this.get("context"))},lf(this.get("properties")))}fromJSONLD(e){const t=(e=lf(e))["@context"];return t&&this.set("context",t),delete e["@context"],this.set("properties",e)}_assertContext(e){if(!(e.split(":")[0]in this.get("context")))throw new Error(`KHR_xmp_json_ld: Missing context for term, "${e}".`)}};function lf(o){return JSON.parse(JSON.stringify(o))}uh.EXTENSION_NAME="KHR_xmp_json_ld";const Us="KHR_xmp_json_ld";let ch=class extends co{constructor(...e){super(...e),this.extensionName=Us}createPacket(){return new uh(this.document.getGraph())}listPackets(){return Array.from(this.properties)}read(e){var t;const n=(t=e.jsonDoc.json.extensions)==null?void 0:t[Us];if(!n||!n.packets)return this;const r=e.jsonDoc.json,i=this.document.getRoot(),s=n.packets.map(f=>this.createPacket().fromJSONLD(f)),a=[[r.asset],r.scenes,r.nodes,r.meshes,r.materials,r.images,r.animations],u=[[i],i.listScenes(),i.listNodes(),i.listMeshes(),i.listMaterials(),i.listTextures(),i.listAnimations()];for(let f=0;f<a.length;f++){const l=a[f]||[];for(let p=0;p<l.length;p++){const d=l[p];d.extensions&&d.extensions[Us]&&u[f][p].setExtension(Us,s[d.extensions[Us].packet])}}return this}write(e){const{json:t}=e.jsonDoc,n=[];for(const r of this.properties){n.push(r.toJSONLD());for(const i of r.listParents()){let s;switch(i.propertyType){case lt.ROOT:s=t.asset;break;case lt.SCENE:s=t.scenes[e.sceneIndexMap.get(i)];break;case lt.NODE:s=t.nodes[e.nodeIndexMap.get(i)];break;case lt.MESH:s=t.meshes[e.meshIndexMap.get(i)];break;case lt.MATERIAL:s=t.materials[e.materialIndexMap.get(i)];break;case lt.TEXTURE:s=t.images[e.imageIndexMap.get(i)];break;case lt.ANIMATION:s=t.animations[e.animationIndexMap.get(i)];break;default:s=null,this.document.getLogger().warn(`[${Us}]: Unsupported parent property, "${i.propertyType}"`)}s&&(s.extensions=s.extensions||{},s.extensions[Us]={packet:n.length-1})}}return n.length>0&&(t.extensions=t.extensions||{},t.extensions[Us]={packets:n}),this}};ch.EXTENSION_NAME=Us;const tg=[La,Gd,Hd,Vd,zl,Kd,Kl,Jl,Xd,Zd,ql,nh,ih,Ic,oh,ah,ch],Cv=[Vl,Fa,jl,...tg],Sv=Object.freeze(Object.defineProperty({__proto__:null,ALL_EXTENSIONS:Cv,Clearcoat:kd,DracoMeshCompression:La,EmissiveStrength:Wd,INSTANCE_ATTRIBUTE:$y,IOR:jd,InstancedMesh:Ud,Iridescence:zd,KHRONOS_EXTENSIONS:tg,Light:xu,LightsPunctual:Gd,Mapping:eh,MappingList:th,MaterialsClearcoat:Hd,MaterialsEmissiveStrength:Vd,MaterialsIOR:zl,MaterialsIridescence:Kd,MaterialsPBRSpecularGlossiness:Kl,MaterialsSheen:Xd,MaterialsSpecular:Jl,MaterialsTransmission:Zd,MaterialsUnlit:ql,MaterialsVariants:nh,MaterialsVolume:ih,MeshGPUInstancing:Vl,MeshQuantization:Ic,MeshoptCompression:Fa,PBRSpecularGlossiness:Jd,Packet:uh,Sheen:qd,Specular:Yd,TextureBasisu:oh,TextureTransform:ah,TextureWebP:jl,Transform:sh,Transmission:$d,Unlit:Qd,Variant:Pl,Volume:rh,XMP:ch},Symbol.toStringTag,{value:"Module"})),lh=Ou(Sv);var go={};Object.defineProperty(go,"__esModule",{value:!0});go.TEXTURE_RESIZE_FILTER=go.TEXTURE_RESIZE_RESOLUTION=go.SIMPLIFY_ERROR=go.SIMPLIFY_RATIO=go.SIMPLIFY=go.WELD_TOLERANCE=go.DRACO_METHOD=go.EMISSIVE_STRENGTH=void 0;go.EMISSIVE_STRENGTH=1;go.DRACO_METHOD="edgebreaker";go.WELD_TOLERANCE=1e-4;go.SIMPLIFY=!0;go.SIMPLIFY_RATIO=.75;go.SIMPLIFY_ERROR=.01;go.TEXTURE_RESIZE_RESOLUTION=1024;go.TEXTURE_RESIZE_FILTER="LANCZOS3";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.setEmissiveStrength=void 0;var op=lh,xv=go;function Bv(o,e){e===void 0&&(e=xv.EMISSIVE_STRENGTH);var t=o.createExtension(op.MaterialsEmissiveStrength),n=t.createEmissiveStrength().setEmissiveStrength(e);o.createExtension(op.TextureWebP).setRequired(!0),o.getRoot().listMaterials().forEach(function(r){r.setExtension("KHR_materials_emissive_strength",n)})}Mc.setEmissiveStrength=Bv;var Xl={};function Ai(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sd={},Mv={get exports(){return sd},set exports(o){sd=o}};const Dv={},Rv=Object.freeze(Object.defineProperty({__proto__:null,default:Dv},Symbol.toStringTag,{value:"Module"})),ri=Ou(Rv);(function(o,e){var t=t||{};t.scope={},t.arrayIteratorImpl=function(r){var i=0;return function(){return i<r.length?{done:!1,value:r[i++]}:{done:!0}}},t.arrayIterator=function(r){return{next:t.arrayIteratorImpl(r)}},t.makeIterator=function(r){var i=typeof Symbol<"u"&&Symbol.iterator&&r[Symbol.iterator];return i?i.call(r):t.arrayIterator(r)},t.ASSUME_ES5=!1,t.ASSUME_NO_NATIVE_MAP=!1,t.ASSUME_NO_NATIVE_SET=!1,t.SIMPLE_FROUND_POLYFILL=!1,t.ISOLATE_POLYFILLS=!1,t.FORCE_POLYFILL_PROMISE=!1,t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,t.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof gi=="object"&&gi];for(var i=0;i<r.length;++i){var s=r[i];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},t.global=t.getGlobal(gi),t.defineProperty=t.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,i,s){return r==Array.prototype||r==Object.prototype||(r[i]=s.value),r},t.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",t.TRUST_ES6_POLYFILLS=!t.ISOLATE_POLYFILLS||t.IS_SYMBOL_NATIVE,t.polyfills={},t.propertyToPolyfillSymbol={},t.POLYFILL_PREFIX="$jscp$",t.polyfill=function(r,i,s,a){i&&(t.ISOLATE_POLYFILLS?t.polyfillIsolated(r,i,s,a):t.polyfillUnisolated(r,i,s,a))},t.polyfillUnisolated=function(r,i,s,a){for(s=t.global,r=r.split("."),a=0;a<r.length-1;a++){var u=r[a];if(!(u in s))return;s=s[u]}r=r[r.length-1],a=s[r],i=i(a),i!=a&&i!=null&&t.defineProperty(s,r,{configurable:!0,writable:!0,value:i})},t.polyfillIsolated=function(r,i,s,a){var u=r.split(".");r=u.length===1,a=u[0],a=!r&&a in t.polyfills?t.polyfills:t.global;for(var f=0;f<u.length-1;f++){var l=u[f];if(!(l in a))return;a=a[l]}u=u[u.length-1],s=t.IS_SYMBOL_NATIVE&&s==="es6"?a[u]:null,i=i(s),i!=null&&(r?t.defineProperty(t.polyfills,u,{configurable:!0,writable:!0,value:i}):i!==s&&(t.propertyToPolyfillSymbol[u]===void 0&&(s=1e9*Math.random()>>>0,t.propertyToPolyfillSymbol[u]=t.IS_SYMBOL_NATIVE?t.global.Symbol(u):t.POLYFILL_PREFIX+s+"$"+u),t.defineProperty(a,t.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:i})))},t.polyfill("Promise",function(r){function i(){this.batch_=null}function s(l){return l instanceof u?l:new u(function(p,d){p(l)})}if(r&&(!(t.FORCE_POLYFILL_PROMISE||t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&typeof t.global.PromiseRejectionEvent>"u")||!t.global.Promise||t.global.Promise.toString().indexOf("[native code]")===-1))return r;i.prototype.asyncExecute=function(l){if(this.batch_==null){this.batch_=[];var p=this;this.asyncExecuteFunction(function(){p.executeBatch_()})}this.batch_.push(l)};var a=t.global.setTimeout;i.prototype.asyncExecuteFunction=function(l){a(l,0)},i.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var l=this.batch_;this.batch_=[];for(var p=0;p<l.length;++p){var d=l[p];l[p]=null;try{d()}catch(_){this.asyncThrow_(_)}}}this.batch_=null},i.prototype.asyncThrow_=function(l){this.asyncExecuteFunction(function(){throw l})};var u=function(l){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var p=this.createResolveAndReject_();try{l(p.resolve,p.reject)}catch(d){p.reject(d)}};u.prototype.createResolveAndReject_=function(){function l(_){return function(A){d||(d=!0,_.call(p,A))}}var p=this,d=!1;return{resolve:l(this.resolveTo_),reject:l(this.reject_)}},u.prototype.resolveTo_=function(l){if(l===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(l instanceof u)this.settleSameAsPromise_(l);else{e:switch(typeof l){case"object":var p=l!=null;break e;case"function":p=!0;break e;default:p=!1}p?this.resolveToNonPromiseObj_(l):this.fulfill_(l)}},u.prototype.resolveToNonPromiseObj_=function(l){var p=void 0;try{p=l.then}catch(d){this.reject_(d);return}typeof p=="function"?this.settleSameAsThenable_(p,l):this.fulfill_(l)},u.prototype.reject_=function(l){this.settle_(2,l)},u.prototype.fulfill_=function(l){this.settle_(1,l)},u.prototype.settle_=function(l,p){if(this.state_!=0)throw Error("Cannot settle("+l+", "+p+"): Promise already settled in state"+this.state_);this.state_=l,this.result_=p,this.state_===2&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},u.prototype.scheduleUnhandledRejectionCheck_=function(){var l=this;a(function(){if(l.notifyUnhandledRejection_()){var p=t.global.console;typeof p<"u"&&p.error(l.result_)}},1)},u.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var l=t.global.CustomEvent,p=t.global.Event,d=t.global.dispatchEvent;return typeof d>"u"?!0:(typeof l=="function"?l=new l("unhandledrejection",{cancelable:!0}):typeof p=="function"?l=new p("unhandledrejection",{cancelable:!0}):(l=t.global.document.createEvent("CustomEvent"),l.initCustomEvent("unhandledrejection",!1,!0,l)),l.promise=this,l.reason=this.result_,d(l))},u.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var l=0;l<this.onSettledCallbacks_.length;++l)f.asyncExecute(this.onSettledCallbacks_[l]);this.onSettledCallbacks_=null}};var f=new i;return u.prototype.settleSameAsPromise_=function(l){var p=this.createResolveAndReject_();l.callWhenSettled_(p.resolve,p.reject)},u.prototype.settleSameAsThenable_=function(l,p){var d=this.createResolveAndReject_();try{l.call(p,d.resolve,d.reject)}catch(_){d.reject(_)}},u.prototype.then=function(l,p){function d(v,T){return typeof v=="function"?function(I){try{_(v(I))}catch(R){A(R)}}:T}var _,A,E=new u(function(v,T){_=v,A=T});return this.callWhenSettled_(d(l,_),d(p,A)),E},u.prototype.catch=function(l){return this.then(void 0,l)},u.prototype.callWhenSettled_=function(l,p){function d(){switch(_.state_){case 1:l(_.result_);break;case 2:p(_.result_);break;default:throw Error("Unexpected state: "+_.state_)}}var _=this;this.onSettledCallbacks_==null?f.asyncExecute(d):this.onSettledCallbacks_.push(d),this.isRejectionHandled_=!0},u.resolve=s,u.reject=function(l){return new u(function(p,d){d(l)})},u.race=function(l){return new u(function(p,d){for(var _=t.makeIterator(l),A=_.next();!A.done;A=_.next())s(A.value).callWhenSettled_(p,d)})},u.all=function(l){var p=t.makeIterator(l),d=p.next();return d.done?s([]):new u(function(_,A){function E(I){return function(R){v[I]=R,T--,T==0&&_(v)}}var v=[],T=0;do v.push(void 0),T++,s(d.value).callWhenSettled_(E(v.length-1),A),d=p.next();while(!d.done)})},u},"es6","es3"),t.owns=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.assign=t.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(r,i){for(var s=1;s<arguments.length;s++){var a=arguments[s];if(a)for(var u in a)t.owns(a,u)&&(r[u]=a[u])}return r},t.polyfill("Object.assign",function(r){return r||t.assign},"es6","es3"),t.checkStringArgs=function(r,i,s){if(r==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return r+""},t.polyfill("String.prototype.startsWith",function(r){return r||function(i,s){var a=t.checkStringArgs(this,i,"startsWith");i+="";var u=a.length,f=i.length;s=Math.max(0,Math.min(s|0,a.length));for(var l=0;l<f&&s<u;)if(a[s++]!=i[l++])return!1;return l>=f}},"es6","es3"),t.polyfill("Array.prototype.copyWithin",function(r){function i(s){return s=Number(s),s===1/0||s===-1/0?s:s|0}return r||function(s,a,u){var f=this.length;if(s=i(s),a=i(a),u=u===void 0?f:i(u),s=0>s?Math.max(f+s,0):Math.min(s,f),a=0>a?Math.max(f+a,0):Math.min(a,f),u=0>u?Math.max(f+u,0):Math.min(u,f),s<a)for(;a<u;)a in this?this[s++]=this[a++]:(delete this[s++],a++);else for(u=Math.min(u,f+a-s),s+=u-a;u>a;)--u in this?this[--s]=this[u]:delete this[--s];return this}},"es6","es3"),t.typedArrayCopyWithin=function(r){return r||Array.prototype.copyWithin},t.polyfill("Int8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8ClampedArray.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float64Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5");var n=function(){var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){function s($){return j.locateFile?j.locateFile($,Fn):Fn+$}function a($){Li=$,j.HEAP8=Sr=new Int8Array($),j.HEAP16=vi=new Int16Array($),j.HEAP32=ar=new Int32Array($),j.HEAPU8=Mn=new Uint8Array($),j.HEAPU16=new Uint16Array($),j.HEAPU32=Ae=new Uint32Array($),j.HEAPF32=fe=new Float32Array($),j.HEAPF64=new Float64Array($)}function u($){throw j.onAbort&&j.onAbort($),$="Aborted("+$+")",vn($),yi=!0,$=new WebAssembly.RuntimeError($+". Build with -sASSERTIONS for more info."),Qe($),$}function f($){try{if($==Ne&&Cr)return new Uint8Array(Cr);if(dn)return dn($);throw"both async and sync fetching of the wasm failed"}catch(oe){u(oe)}}function l(){if(!Cr&&(He||P)){if(typeof fetch=="function"&&!Ne.startsWith("file://"))return fetch(Ne,{credentials:"same-origin"}).then(function($){if(!$.ok)throw"failed to load wasm binary file at '"+Ne+"'";return $.arrayBuffer()}).catch(function(){return f(Ne)});if($t)return new Promise(function($,oe){$t(Ne,function(pe){$(new Uint8Array(pe))},oe)})}return Promise.resolve().then(function(){return f(Ne)})}function p($){for(;0<$.length;)$.shift()(j)}function d($){this.excPtr=$,this.ptr=$-24,this.set_type=function(oe){Ae[this.ptr+4>>2]=oe},this.get_type=function(){return Ae[this.ptr+4>>2]},this.set_destructor=function(oe){Ae[this.ptr+8>>2]=oe},this.get_destructor=function(){return Ae[this.ptr+8>>2]},this.set_refcount=function(oe){ar[this.ptr>>2]=oe},this.set_caught=function(oe){Sr[this.ptr+12>>0]=oe?1:0},this.get_caught=function(){return Sr[this.ptr+12>>0]!=0},this.set_rethrown=function(oe){Sr[this.ptr+13>>0]=oe?1:0},this.get_rethrown=function(){return Sr[this.ptr+13>>0]!=0},this.init=function(oe,pe){this.set_adjusted_ptr(0),this.set_type(oe),this.set_destructor(pe),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){ar[this.ptr>>2]+=1},this.release_ref=function(){var oe=ar[this.ptr>>2];return ar[this.ptr>>2]=oe-1,oe===1},this.set_adjusted_ptr=function(oe){Ae[this.ptr+16>>2]=oe},this.get_adjusted_ptr=function(){return Ae[this.ptr+16>>2]},this.get_exception_ptr=function(){if($r(this.get_type()))return Ae[this.excPtr>>2];var oe=this.get_adjusted_ptr();return oe!==0?oe:this.excPtr}}function _($){function oe(){if(!er&&(er=!0,j.calledRun=!0,!yi)){if(Nt=!0,p(St),_t(j),j.onRuntimeInitialized&&j.onRuntimeInitialized(),j.postRun)for(typeof j.postRun=="function"&&(j.postRun=[j.postRun]);j.postRun.length;)Dt.unshift(j.postRun.shift());p(Dt)}}if(!(0<_n)){if(j.preRun)for(typeof j.preRun=="function"&&(j.preRun=[j.preRun]);j.preRun.length;)ot.unshift(j.preRun.shift());p(ot),0<_n||(j.setStatus?(j.setStatus("Running..."),setTimeout(function(){setTimeout(function(){j.setStatus("")},1),oe()},1)):oe())}}function A(){}function E($){return($||A).__cache__}function v($,oe){var pe=E(oe),Me=pe[$];return Me||(Me=Object.create((oe||A).prototype),Me.ptr=$,pe[$]=Me)}function T($){if(typeof $=="string"){for(var oe=0,pe=0;pe<$.length;++pe){var Me=$.charCodeAt(pe);127>=Me?oe++:2047>=Me?oe+=2:55296<=Me&&57343>=Me?(oe+=4,++pe):oe+=3}if(oe=Array(oe+1),pe=0,Me=oe.length,0<Me){Me=pe+Me-1;for(var Ze=0;Ze<$.length;++Ze){var ft=$.charCodeAt(Ze);if(55296<=ft&&57343>=ft){var Sn=$.charCodeAt(++Ze);ft=65536+((ft&1023)<<10)|Sn&1023}if(127>=ft){if(pe>=Me)break;oe[pe++]=ft}else{if(2047>=ft){if(pe+1>=Me)break;oe[pe++]=192|ft>>6}else{if(65535>=ft){if(pe+2>=Me)break;oe[pe++]=224|ft>>12}else{if(pe+3>=Me)break;oe[pe++]=240|ft>>18,oe[pe++]=128|ft>>12&63}oe[pe++]=128|ft>>6&63}oe[pe++]=128|ft&63}}oe[pe]=0}return $=st.alloc(oe,Sr),st.copy(oe,Sr,$),$}return $}function I($){if(typeof $=="object"){var oe=st.alloc($,Sr);return st.copy($,Sr,oe),oe}return $}function R($){if(typeof $=="object"){var oe=st.alloc($,vi);return st.copy($,vi,oe),oe}return $}function k($){if(typeof $=="object"){var oe=st.alloc($,ar);return st.copy($,ar,oe),oe}return $}function K($){if(typeof $=="object"){var oe=st.alloc($,fe);return st.copy($,fe,oe),oe}return $}function ee(){throw"cannot construct a VoidPtr, no constructor in IDL"}function _e(){this.ptr=Bt(),E(_e)[this.ptr]=this}function Q(){this.ptr=Qt(),E(Q)[this.ptr]=this}function ne(){this.ptr=ki(),E(ne)[this.ptr]=this}function de(){this.ptr=so(),E(de)[this.ptr]=this}function Ie(){this.ptr=ye(),E(Ie)[this.ptr]=this}function Pe(){this.ptr=ut(),E(Pe)[this.ptr]=this}function Te(){this.ptr=Bn(),E(Te)[this.ptr]=this}function Ee(){this.ptr=ei(),E(Ee)[this.ptr]=this}function Se(){this.ptr=It(),E(Se)[this.ptr]=this}function Oe(){this.ptr=Hr(),E(Oe)[this.ptr]=this}function We($){$&&typeof $=="object"&&($=$.ptr),this.ptr=mn($),E(We)[this.ptr]=this}i=i||{};var j=typeof i<"u"?i:{},_t,Qe;j.ready=new Promise(function($,oe){_t=$,Qe=oe});var Je=!1,ze=!1;j.onRuntimeInitialized=function(){Je=!0,ze&&typeof j.onModuleLoaded=="function"&&j.onModuleLoaded(j)},j.onModuleParsed=function(){ze=!0,Je&&typeof j.onModuleLoaded=="function"&&j.onModuleLoaded(j)},j.isVersionSupported=function($){return typeof $!="string"?!1:($=$.split("."),2>$.length||3<$.length?!1:$[0]==1&&0<=$[1]&&5>=$[1]?!0:!($[0]!=0||10<$[1]))};var ct=Object.assign({},j),He=typeof window=="object",P=typeof importScripts=="function",nt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Fn="";if(nt){if(Fn=P?ri.dirname(Fn)+"/":__dirname+"/",typeof Ai=="function")var Yt=ri,kn=ri;var Et=function($,oe){return $=kn.normalize($),Yt.readFileSync($,oe?void 0:"utf8")},dn=function($){return $=Et($,!0),$.buffer||($=new Uint8Array($)),$},$t=function($,oe,pe){$=kn.normalize($),Yt.readFile($,function(Me,Ze){Me?pe(Me):oe(Ze.buffer)})};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),j.inspect=function(){return"[Emscripten Module object]"}}else(He||P)&&(P?Fn=self.location.href:typeof document<"u"&&document.currentScript&&(Fn=document.currentScript.src),r&&(Fn=r),Fn=Fn.indexOf("blob:")!==0?Fn.substr(0,Fn.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Et=function($){var oe=new XMLHttpRequest;return oe.open("GET",$,!1),oe.send(null),oe.responseText},P&&(dn=function($){var oe=new XMLHttpRequest;return oe.open("GET",$,!1),oe.responseType="arraybuffer",oe.send(null),new Uint8Array(oe.response)}),$t=function($,oe,pe){var Me=new XMLHttpRequest;Me.open("GET",$,!0),Me.responseType="arraybuffer",Me.onload=function(){Me.status==200||Me.status==0&&Me.response?oe(Me.response):pe()},Me.onerror=pe,Me.send(null)});j.print||console.log.bind(console);var vn=j.printErr||console.warn.bind(console);Object.assign(j,ct),ct=null;var Cr;j.wasmBinary&&(Cr=j.wasmBinary),typeof WebAssembly!="object"&&u("no native wasm support detected");var Qr,yi=!1,Li,Sr,Mn,vi,ar,Ae,fe,ot=[],St=[],Dt=[],Nt=!1,_n=0,Ce=null,Ne="draco_encoder.wasm";Ne.startsWith("data:application/octet-stream;base64,")||(Ne=s(Ne));var Jt={c:function($){return fr($+24)+24},b:function($,oe,pe){throw new d($).init(oe,pe),$},a:function(){u("")},e:function($,oe,pe){Mn.copyWithin($,oe,oe+pe)},d:function($){var oe=Mn.length;if($>>>=0,2147483648<$)return!1;for(var pe=1;4>=pe;pe*=2){var Me=oe*(1+.2/pe);Me=Math.min(Me,$+100663296);var Ze=Math;Me=Math.max($,Me),Ze=Ze.min.call(Ze,2147483648,Me+(65536-Me%65536)%65536);e:{try{Qr.grow(Ze-Li.byteLength+65535>>>16),a(Qr.buffer);var ft=1;break e}catch{}ft=void 0}if(ft)return!0}return!1}};(function(){function $(Ze,ft){j.asm=Ze.exports,Qr=j.asm.f,a(Qr.buffer),St.unshift(j.asm.g),_n--,j.monitorRunDependencies&&j.monitorRunDependencies(_n),_n==0&&Ce&&(Ze=Ce,Ce=null,Ze())}function oe(Ze){$(Ze.instance)}function pe(Ze){return l().then(function(ft){return WebAssembly.instantiate(ft,Me)}).then(function(ft){return ft}).then(Ze,function(ft){vn("failed to asynchronously prepare wasm: "+ft),u(ft)})}var Me={a:Jt};if(_n++,j.monitorRunDependencies&&j.monitorRunDependencies(_n),j.instantiateWasm)try{return j.instantiateWasm(Me,$)}catch(Ze){vn("Module.instantiateWasm callback failed with error: "+Ze),Qe(Ze)}return function(){return Cr||typeof WebAssembly.instantiateStreaming!="function"||Ne.startsWith("data:application/octet-stream;base64,")||Ne.startsWith("file://")||nt||typeof fetch!="function"?pe(oe):fetch(Ne,{credentials:"same-origin"}).then(function(Ze){return WebAssembly.instantiateStreaming(Ze,Me).then(oe,function(ft){return vn("wasm streaming compile failed: "+ft),vn("falling back to ArrayBuffer instantiation"),pe(oe)})})}().catch(Qe),{}})(),j.___wasm_call_ctors=function(){return(j.___wasm_call_ctors=j.asm.g).apply(null,arguments)};var Zt=j._emscripten_bind_VoidPtr___destroy___0=function(){return(Zt=j._emscripten_bind_VoidPtr___destroy___0=j.asm.i).apply(null,arguments)},Bt=j._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(Bt=j._emscripten_bind_GeometryAttribute_GeometryAttribute_0=j.asm.j).apply(null,arguments)},zt=j._emscripten_bind_GeometryAttribute___destroy___0=function(){return(zt=j._emscripten_bind_GeometryAttribute___destroy___0=j.asm.k).apply(null,arguments)},Qt=j._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(Qt=j._emscripten_bind_PointAttribute_PointAttribute_0=j.asm.l).apply(null,arguments)},rr=j._emscripten_bind_PointAttribute_size_0=function(){return(rr=j._emscripten_bind_PointAttribute_size_0=j.asm.m).apply(null,arguments)},Cn=j._emscripten_bind_PointAttribute_attribute_type_0=function(){return(Cn=j._emscripten_bind_PointAttribute_attribute_type_0=j.asm.n).apply(null,arguments)},Kr=j._emscripten_bind_PointAttribute_data_type_0=function(){return(Kr=j._emscripten_bind_PointAttribute_data_type_0=j.asm.o).apply(null,arguments)},Fe=j._emscripten_bind_PointAttribute_num_components_0=function(){return(Fe=j._emscripten_bind_PointAttribute_num_components_0=j.asm.p).apply(null,arguments)},rt=j._emscripten_bind_PointAttribute_normalized_0=function(){return(rt=j._emscripten_bind_PointAttribute_normalized_0=j.asm.q).apply(null,arguments)},Ct=j._emscripten_bind_PointAttribute_byte_stride_0=function(){return(Ct=j._emscripten_bind_PointAttribute_byte_stride_0=j.asm.r).apply(null,arguments)},en=j._emscripten_bind_PointAttribute_byte_offset_0=function(){return(en=j._emscripten_bind_PointAttribute_byte_offset_0=j.asm.s).apply(null,arguments)},En=j._emscripten_bind_PointAttribute_unique_id_0=function(){return(En=j._emscripten_bind_PointAttribute_unique_id_0=j.asm.t).apply(null,arguments)},Jr=j._emscripten_bind_PointAttribute___destroy___0=function(){return(Jr=j._emscripten_bind_PointAttribute___destroy___0=j.asm.u).apply(null,arguments)},ki=j._emscripten_bind_PointCloud_PointCloud_0=function(){return(ki=j._emscripten_bind_PointCloud_PointCloud_0=j.asm.v).apply(null,arguments)},Hi=j._emscripten_bind_PointCloud_num_attributes_0=function(){return(Hi=j._emscripten_bind_PointCloud_num_attributes_0=j.asm.w).apply(null,arguments)},$i=j._emscripten_bind_PointCloud_num_points_0=function(){return($i=j._emscripten_bind_PointCloud_num_points_0=j.asm.x).apply(null,arguments)},ci=j._emscripten_bind_PointCloud___destroy___0=function(){return(ci=j._emscripten_bind_PointCloud___destroy___0=j.asm.y).apply(null,arguments)},so=j._emscripten_bind_Mesh_Mesh_0=function(){return(so=j._emscripten_bind_Mesh_Mesh_0=j.asm.z).apply(null,arguments)},ji=j._emscripten_bind_Mesh_num_faces_0=function(){return(ji=j._emscripten_bind_Mesh_num_faces_0=j.asm.A).apply(null,arguments)},mo=j._emscripten_bind_Mesh_num_attributes_0=function(){return(mo=j._emscripten_bind_Mesh_num_attributes_0=j.asm.B).apply(null,arguments)},tn=j._emscripten_bind_Mesh_num_points_0=function(){return(tn=j._emscripten_bind_Mesh_num_points_0=j.asm.C).apply(null,arguments)},Mo=j._emscripten_bind_Mesh_set_num_points_1=function(){return(Mo=j._emscripten_bind_Mesh_set_num_points_1=j.asm.D).apply(null,arguments)},no=j._emscripten_bind_Mesh___destroy___0=function(){return(no=j._emscripten_bind_Mesh___destroy___0=j.asm.E).apply(null,arguments)},ye=j._emscripten_bind_Metadata_Metadata_0=function(){return(ye=j._emscripten_bind_Metadata_Metadata_0=j.asm.F).apply(null,arguments)},qe=j._emscripten_bind_Metadata___destroy___0=function(){return(qe=j._emscripten_bind_Metadata___destroy___0=j.asm.G).apply(null,arguments)},ut=j._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(ut=j._emscripten_bind_DracoInt8Array_DracoInt8Array_0=j.asm.H).apply(null,arguments)},Ue=j._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(Ue=j._emscripten_bind_DracoInt8Array_GetValue_1=j.asm.I).apply(null,arguments)},ht=j._emscripten_bind_DracoInt8Array_size_0=function(){return(ht=j._emscripten_bind_DracoInt8Array_size_0=j.asm.J).apply(null,arguments)},Dn=j._emscripten_bind_DracoInt8Array___destroy___0=function(){return(Dn=j._emscripten_bind_DracoInt8Array___destroy___0=j.asm.K).apply(null,arguments)},Bn=j._emscripten_bind_MetadataBuilder_MetadataBuilder_0=function(){return(Bn=j._emscripten_bind_MetadataBuilder_MetadataBuilder_0=j.asm.L).apply(null,arguments)},_r=j._emscripten_bind_MetadataBuilder_AddStringEntry_3=function(){return(_r=j._emscripten_bind_MetadataBuilder_AddStringEntry_3=j.asm.M).apply(null,arguments)},yr=j._emscripten_bind_MetadataBuilder_AddIntEntry_3=function(){return(yr=j._emscripten_bind_MetadataBuilder_AddIntEntry_3=j.asm.N).apply(null,arguments)},kr=j._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=function(){return(kr=j._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=j.asm.O).apply(null,arguments)},vr=j._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=function(){return(vr=j._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=j.asm.P).apply(null,arguments)},gr=j._emscripten_bind_MetadataBuilder___destroy___0=function(){return(gr=j._emscripten_bind_MetadataBuilder___destroy___0=j.asm.Q).apply(null,arguments)},ei=j._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=function(){return(ei=j._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=j.asm.R).apply(null,arguments)},Wi=j._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=function(){return(Wi=j._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=j.asm.S).apply(null,arguments)},zi=j._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=function(){return(zi=j._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=j.asm.T).apply(null,arguments)},Zi=j._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=function(){return(Zi=j._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=j.asm.U).apply(null,arguments)},Ge=j._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=function(){return(Ge=j._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=j.asm.V).apply(null,arguments)},c=j._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=function(){return(c=j._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=j.asm.W).apply(null,arguments)},Xe=j._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=function(){return(Xe=j._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=j.asm.X).apply(null,arguments)},et=j._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=function(){return(et=j._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=j.asm.Y).apply(null,arguments)},it=j._emscripten_bind_PointCloudBuilder_AddMetadata_2=function(){return(it=j._emscripten_bind_PointCloudBuilder_AddMetadata_2=j.asm.Z).apply(null,arguments)},je=j._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=function(){return(je=j._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=j.asm._).apply(null,arguments)},qt=j._emscripten_bind_PointCloudBuilder___destroy___0=function(){return(qt=j._emscripten_bind_PointCloudBuilder___destroy___0=j.asm.$).apply(null,arguments)},It=j._emscripten_bind_MeshBuilder_MeshBuilder_0=function(){return(It=j._emscripten_bind_MeshBuilder_MeshBuilder_0=j.asm.aa).apply(null,arguments)},Rt=j._emscripten_bind_MeshBuilder_AddFacesToMesh_3=function(){return(Rt=j._emscripten_bind_MeshBuilder_AddFacesToMesh_3=j.asm.ba).apply(null,arguments)},Xt=j._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=function(){return(Xt=j._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=j.asm.ca).apply(null,arguments)},hn=j._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=function(){return(hn=j._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=j.asm.da).apply(null,arguments)},nn=j._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=function(){return(nn=j._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=j.asm.ea).apply(null,arguments)},An=j._emscripten_bind_MeshBuilder_AddFloatAttribute_5=function(){return(An=j._emscripten_bind_MeshBuilder_AddFloatAttribute_5=j.asm.fa).apply(null,arguments)},pn=j._emscripten_bind_MeshBuilder_AddInt8Attribute_5=function(){return(pn=j._emscripten_bind_MeshBuilder_AddInt8Attribute_5=j.asm.ga).apply(null,arguments)},Ut=j._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=function(){return(Ut=j._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=j.asm.ha).apply(null,arguments)},Gt=j._emscripten_bind_MeshBuilder_AddInt16Attribute_5=function(){return(Gt=j._emscripten_bind_MeshBuilder_AddInt16Attribute_5=j.asm.ia).apply(null,arguments)},on=j._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=function(){return(on=j._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=j.asm.ja).apply(null,arguments)},lr=j._emscripten_bind_MeshBuilder_AddInt32Attribute_5=function(){return(lr=j._emscripten_bind_MeshBuilder_AddInt32Attribute_5=j.asm.ka).apply(null,arguments)},Pr=j._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=function(){return(Pr=j._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=j.asm.la).apply(null,arguments)},Tn=j._emscripten_bind_MeshBuilder_AddMetadata_2=function(){return(Tn=j._emscripten_bind_MeshBuilder_AddMetadata_2=j.asm.ma).apply(null,arguments)},qr=j._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=function(){return(qr=j._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=j.asm.na).apply(null,arguments)},xr=j._emscripten_bind_MeshBuilder___destroy___0=function(){return(xr=j._emscripten_bind_MeshBuilder___destroy___0=j.asm.oa).apply(null,arguments)},Hr=j._emscripten_bind_Encoder_Encoder_0=function(){return(Hr=j._emscripten_bind_Encoder_Encoder_0=j.asm.pa).apply(null,arguments)},oi=j._emscripten_bind_Encoder_SetEncodingMethod_1=function(){return(oi=j._emscripten_bind_Encoder_SetEncodingMethod_1=j.asm.qa).apply(null,arguments)},ti=j._emscripten_bind_Encoder_SetAttributeQuantization_2=function(){return(ti=j._emscripten_bind_Encoder_SetAttributeQuantization_2=j.asm.ra).apply(null,arguments)},Mi=j._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=function(){return(Mi=j._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=j.asm.sa).apply(null,arguments)},Ti=j._emscripten_bind_Encoder_SetSpeedOptions_2=function(){return(Ti=j._emscripten_bind_Encoder_SetSpeedOptions_2=j.asm.ta).apply(null,arguments)},Di=j._emscripten_bind_Encoder_SetTrackEncodedProperties_1=function(){return(Di=j._emscripten_bind_Encoder_SetTrackEncodedProperties_1=j.asm.ua).apply(null,arguments)},Ri=j._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=function(){return(Ri=j._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=j.asm.va).apply(null,arguments)},Ii=j._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=function(){return(Ii=j._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=j.asm.wa).apply(null,arguments)},li=j._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=function(){return(li=j._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=j.asm.xa).apply(null,arguments)},fi=j._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=function(){return(fi=j._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=j.asm.ya).apply(null,arguments)},di=j._emscripten_bind_Encoder___destroy___0=function(){return(di=j._emscripten_bind_Encoder___destroy___0=j.asm.za).apply(null,arguments)},mn=j._emscripten_bind_ExpertEncoder_ExpertEncoder_1=function(){return(mn=j._emscripten_bind_ExpertEncoder_ExpertEncoder_1=j.asm.Aa).apply(null,arguments)},Ln=j._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=function(){return(Ln=j._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=j.asm.Ba).apply(null,arguments)},At=j._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=function(){return(At=j._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=j.asm.Ca).apply(null,arguments)},cn=j._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=function(){return(cn=j._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=j.asm.Da).apply(null,arguments)},Wt=j._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=function(){return(Wt=j._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=j.asm.Ea).apply(null,arguments)},Ke=j._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=function(){return(Ke=j._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=j.asm.Fa).apply(null,arguments)},gt=j._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=function(){return(gt=j._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=j.asm.Ga).apply(null,arguments)},$n=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=function(){return($n=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=j.asm.Ha).apply(null,arguments)},vt=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=function(){return(vt=j._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=j.asm.Ia).apply(null,arguments)},Pt=j._emscripten_bind_ExpertEncoder___destroy___0=function(){return(Pt=j._emscripten_bind_ExpertEncoder___destroy___0=j.asm.Ja).apply(null,arguments)},an=j._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(an=j._emscripten_enum_draco_GeometryAttribute_Type_INVALID=j.asm.Ka).apply(null,arguments)},Wr=j._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(Wr=j._emscripten_enum_draco_GeometryAttribute_Type_POSITION=j.asm.La).apply(null,arguments)},Vr=j._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(Vr=j._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=j.asm.Ma).apply(null,arguments)},On=j._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(On=j._emscripten_enum_draco_GeometryAttribute_Type_COLOR=j.asm.Na).apply(null,arguments)},Fr=j._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Fr=j._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=j.asm.Oa).apply(null,arguments)},si=j._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(si=j._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=j.asm.Pa).apply(null,arguments)},hi=j._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(hi=j._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=j.asm.Qa).apply(null,arguments)},wi=j._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(wi=j._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=j.asm.Ra).apply(null,arguments)},Lr=j._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Lr=j._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=j.asm.Sa).apply(null,arguments)},Yr=j._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=function(){return(Yr=j._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=j.asm.Ta).apply(null,arguments)},Rn=j._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=function(){return(Rn=j._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=j.asm.Ua).apply(null,arguments)},fr=j._malloc=function(){return(fr=j._malloc=j.asm.Va).apply(null,arguments)};j._free=function(){return(j._free=j.asm.Wa).apply(null,arguments)};var $r=j.___cxa_is_pointer_type=function(){return($r=j.___cxa_is_pointer_type=j.asm.Xa).apply(null,arguments)};j.___start_em_js=19116,j.___stop_em_js=19214;var er;if(Ce=function $(){er||_(),er||(Ce=$)},j.preInit)for(typeof j.preInit=="function"&&(j.preInit=[j.preInit]);0<j.preInit.length;)j.preInit.pop()();_(),A.prototype=Object.create(A.prototype),A.prototype.constructor=A,A.prototype.__class__=A,A.__cache__={},j.WrapperObject=A,j.getCache=E,j.wrapPointer=v,j.castObject=function($,oe){return v($.ptr,oe)},j.NULL=v(0),j.destroy=function($){if(!$.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";$.__destroy__(),delete E($.__class__)[$.ptr]},j.compare=function($,oe){return $.ptr===oe.ptr},j.getPointer=function($){return $.ptr},j.getClass=function($){return $.__class__};var st={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(st.needed){for(var $=0;$<st.temps.length;$++)j._free(st.temps[$]);st.temps.length=0,j._free(st.buffer),st.buffer=0,st.size+=st.needed,st.needed=0}st.buffer||(st.size+=128,st.buffer=j._malloc(st.size),st.buffer||u(void 0)),st.pos=0},alloc:function($,oe){return st.buffer||u(void 0),$=$.length*oe.BYTES_PER_ELEMENT,$=$+7&-8,st.pos+$>=st.size?(0<$||u(void 0),st.needed+=$,oe=j._malloc($),st.temps.push(oe)):(oe=st.buffer+st.pos,st.pos+=$),oe},copy:function($,oe,pe){switch(pe>>>=0,oe.BYTES_PER_ELEMENT){case 2:pe>>>=1;break;case 4:pe>>>=2;break;case 8:pe>>>=3}for(var Me=0;Me<$.length;Me++)oe[pe+Me]=$[Me]}};return ee.prototype=Object.create(A.prototype),ee.prototype.constructor=ee,ee.prototype.__class__=ee,ee.__cache__={},j.VoidPtr=ee,ee.prototype.__destroy__=ee.prototype.__destroy__=function(){Zt(this.ptr)},_e.prototype=Object.create(A.prototype),_e.prototype.constructor=_e,_e.prototype.__class__=_e,_e.__cache__={},j.GeometryAttribute=_e,_e.prototype.__destroy__=_e.prototype.__destroy__=function(){zt(this.ptr)},Q.prototype=Object.create(A.prototype),Q.prototype.constructor=Q,Q.prototype.__class__=Q,Q.__cache__={},j.PointAttribute=Q,Q.prototype.size=Q.prototype.size=function(){return rr(this.ptr)},Q.prototype.attribute_type=Q.prototype.attribute_type=function(){return Cn(this.ptr)},Q.prototype.data_type=Q.prototype.data_type=function(){return Kr(this.ptr)},Q.prototype.num_components=Q.prototype.num_components=function(){return Fe(this.ptr)},Q.prototype.normalized=Q.prototype.normalized=function(){return!!rt(this.ptr)},Q.prototype.byte_stride=Q.prototype.byte_stride=function(){return Ct(this.ptr)},Q.prototype.byte_offset=Q.prototype.byte_offset=function(){return en(this.ptr)},Q.prototype.unique_id=Q.prototype.unique_id=function(){return En(this.ptr)},Q.prototype.__destroy__=Q.prototype.__destroy__=function(){Jr(this.ptr)},ne.prototype=Object.create(A.prototype),ne.prototype.constructor=ne,ne.prototype.__class__=ne,ne.__cache__={},j.PointCloud=ne,ne.prototype.num_attributes=ne.prototype.num_attributes=function(){return Hi(this.ptr)},ne.prototype.num_points=ne.prototype.num_points=function(){return $i(this.ptr)},ne.prototype.__destroy__=ne.prototype.__destroy__=function(){ci(this.ptr)},de.prototype=Object.create(A.prototype),de.prototype.constructor=de,de.prototype.__class__=de,de.__cache__={},j.Mesh=de,de.prototype.num_faces=de.prototype.num_faces=function(){return ji(this.ptr)},de.prototype.num_attributes=de.prototype.num_attributes=function(){return mo(this.ptr)},de.prototype.num_points=de.prototype.num_points=function(){return tn(this.ptr)},de.prototype.set_num_points=de.prototype.set_num_points=function($){var oe=this.ptr;$&&typeof $=="object"&&($=$.ptr),Mo(oe,$)},de.prototype.__destroy__=de.prototype.__destroy__=function(){no(this.ptr)},Ie.prototype=Object.create(A.prototype),Ie.prototype.constructor=Ie,Ie.prototype.__class__=Ie,Ie.__cache__={},j.Metadata=Ie,Ie.prototype.__destroy__=Ie.prototype.__destroy__=function(){qe(this.ptr)},Pe.prototype=Object.create(A.prototype),Pe.prototype.constructor=Pe,Pe.prototype.__class__=Pe,Pe.__cache__={},j.DracoInt8Array=Pe,Pe.prototype.GetValue=Pe.prototype.GetValue=function($){var oe=this.ptr;return $&&typeof $=="object"&&($=$.ptr),Ue(oe,$)},Pe.prototype.size=Pe.prototype.size=function(){return ht(this.ptr)},Pe.prototype.__destroy__=Pe.prototype.__destroy__=function(){Dn(this.ptr)},Te.prototype=Object.create(A.prototype),Te.prototype.constructor=Te,Te.prototype.__class__=Te,Te.__cache__={},j.MetadataBuilder=Te,Te.prototype.AddStringEntry=Te.prototype.AddStringEntry=function($,oe,pe){var Me=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe=oe&&typeof oe=="object"?oe.ptr:T(oe),pe=pe&&typeof pe=="object"?pe.ptr:T(pe),!!_r(Me,$,oe,pe)},Te.prototype.AddIntEntry=Te.prototype.AddIntEntry=function($,oe,pe){var Me=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe=oe&&typeof oe=="object"?oe.ptr:T(oe),pe&&typeof pe=="object"&&(pe=pe.ptr),!!yr(Me,$,oe,pe)},Te.prototype.AddIntEntryArray=Te.prototype.AddIntEntryArray=function($,oe,pe,Me){var Ze=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe=oe&&typeof oe=="object"?oe.ptr:T(oe),typeof pe=="object"&&(pe=k(pe)),Me&&typeof Me=="object"&&(Me=Me.ptr),!!kr(Ze,$,oe,pe,Me)},Te.prototype.AddDoubleEntry=Te.prototype.AddDoubleEntry=function($,oe,pe){var Me=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe=oe&&typeof oe=="object"?oe.ptr:T(oe),pe&&typeof pe=="object"&&(pe=pe.ptr),!!vr(Me,$,oe,pe)},Te.prototype.__destroy__=Te.prototype.__destroy__=function(){gr(this.ptr)},Ee.prototype=Object.create(A.prototype),Ee.prototype.constructor=Ee,Ee.prototype.__class__=Ee,Ee.__cache__={},j.PointCloudBuilder=Ee,Ee.prototype.AddFloatAttribute=Ee.prototype.AddFloatAttribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=K(Ze)),Wi(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddInt8Attribute=Ee.prototype.AddInt8Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=I(Ze)),zi(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddUInt8Attribute=Ee.prototype.AddUInt8Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=I(Ze)),Zi(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddInt16Attribute=Ee.prototype.AddInt16Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=R(Ze)),Ge(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddUInt16Attribute=Ee.prototype.AddUInt16Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=R(Ze)),c(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddInt32Attribute=Ee.prototype.AddInt32Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=k(Ze)),Xe(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddUInt32Attribute=Ee.prototype.AddUInt32Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=k(Ze)),et(ft,$,oe,pe,Me,Ze)},Ee.prototype.AddMetadata=Ee.prototype.AddMetadata=function($,oe){var pe=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),!!it(pe,$,oe)},Ee.prototype.SetMetadataForAttribute=Ee.prototype.SetMetadataForAttribute=function($,oe,pe){var Me=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),!!je(Me,$,oe,pe)},Ee.prototype.__destroy__=Ee.prototype.__destroy__=function(){qt(this.ptr)},Se.prototype=Object.create(A.prototype),Se.prototype.constructor=Se,Se.prototype.__class__=Se,Se.__cache__={},j.MeshBuilder=Se,Se.prototype.AddFacesToMesh=Se.prototype.AddFacesToMesh=function($,oe,pe){var Me=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),typeof pe=="object"&&(pe=k(pe)),!!Rt(Me,$,oe,pe)},Se.prototype.AddFloatAttributeToMesh=Se.prototype.AddFloatAttributeToMesh=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=K(Ze)),Xt(ft,$,oe,pe,Me,Ze)},Se.prototype.AddInt32AttributeToMesh=Se.prototype.AddInt32AttributeToMesh=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=k(Ze)),hn(ft,$,oe,pe,Me,Ze)},Se.prototype.AddMetadataToMesh=Se.prototype.AddMetadataToMesh=function($,oe){var pe=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),!!nn(pe,$,oe)},Se.prototype.AddFloatAttribute=Se.prototype.AddFloatAttribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=K(Ze)),An(ft,$,oe,pe,Me,Ze)},Se.prototype.AddInt8Attribute=Se.prototype.AddInt8Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=I(Ze)),pn(ft,$,oe,pe,Me,Ze)},Se.prototype.AddUInt8Attribute=Se.prototype.AddUInt8Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=I(Ze)),Ut(ft,$,oe,pe,Me,Ze)},Se.prototype.AddInt16Attribute=Se.prototype.AddInt16Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=R(Ze)),Gt(ft,$,oe,pe,Me,Ze)},Se.prototype.AddUInt16Attribute=Se.prototype.AddUInt16Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=R(Ze)),on(ft,$,oe,pe,Me,Ze)},Se.prototype.AddInt32Attribute=Se.prototype.AddInt32Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=k(Ze)),lr(ft,$,oe,pe,Me,Ze)},Se.prototype.AddUInt32Attribute=Se.prototype.AddUInt32Attribute=function($,oe,pe,Me,Ze){var ft=this.ptr;return st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Me&&typeof Me=="object"&&(Me=Me.ptr),typeof Ze=="object"&&(Ze=k(Ze)),Pr(ft,$,oe,pe,Me,Ze)},Se.prototype.AddMetadata=Se.prototype.AddMetadata=function($,oe){var pe=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),!!Tn(pe,$,oe)},Se.prototype.SetMetadataForAttribute=Se.prototype.SetMetadataForAttribute=function($,oe,pe){var Me=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),!!qr(Me,$,oe,pe)},Se.prototype.__destroy__=Se.prototype.__destroy__=function(){xr(this.ptr)},Oe.prototype=Object.create(A.prototype),Oe.prototype.constructor=Oe,Oe.prototype.__class__=Oe,Oe.__cache__={},j.Encoder=Oe,Oe.prototype.SetEncodingMethod=Oe.prototype.SetEncodingMethod=function($){var oe=this.ptr;$&&typeof $=="object"&&($=$.ptr),oi(oe,$)},Oe.prototype.SetAttributeQuantization=Oe.prototype.SetAttributeQuantization=function($,oe){var pe=this.ptr;$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),ti(pe,$,oe)},Oe.prototype.SetAttributeExplicitQuantization=Oe.prototype.SetAttributeExplicitQuantization=function($,oe,pe,Me,Ze){var ft=this.ptr;st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),typeof Me=="object"&&(Me=K(Me)),Ze&&typeof Ze=="object"&&(Ze=Ze.ptr),Mi(ft,$,oe,pe,Me,Ze)},Oe.prototype.SetSpeedOptions=Oe.prototype.SetSpeedOptions=function($,oe){var pe=this.ptr;$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),Ti(pe,$,oe)},Oe.prototype.SetTrackEncodedProperties=Oe.prototype.SetTrackEncodedProperties=function($){var oe=this.ptr;$&&typeof $=="object"&&($=$.ptr),Di(oe,$)},Oe.prototype.EncodeMeshToDracoBuffer=Oe.prototype.EncodeMeshToDracoBuffer=function($,oe){var pe=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),Ri(pe,$,oe)},Oe.prototype.EncodePointCloudToDracoBuffer=Oe.prototype.EncodePointCloudToDracoBuffer=function($,oe,pe){var Me=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),Ii(Me,$,oe,pe)},Oe.prototype.GetNumberOfEncodedPoints=Oe.prototype.GetNumberOfEncodedPoints=function(){return li(this.ptr)},Oe.prototype.GetNumberOfEncodedFaces=Oe.prototype.GetNumberOfEncodedFaces=function(){return fi(this.ptr)},Oe.prototype.__destroy__=Oe.prototype.__destroy__=function(){di(this.ptr)},We.prototype=Object.create(A.prototype),We.prototype.constructor=We,We.prototype.__class__=We,We.__cache__={},j.ExpertEncoder=We,We.prototype.SetEncodingMethod=We.prototype.SetEncodingMethod=function($){var oe=this.ptr;$&&typeof $=="object"&&($=$.ptr),Ln(oe,$)},We.prototype.SetAttributeQuantization=We.prototype.SetAttributeQuantization=function($,oe){var pe=this.ptr;$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),At(pe,$,oe)},We.prototype.SetAttributeExplicitQuantization=We.prototype.SetAttributeExplicitQuantization=function($,oe,pe,Me,Ze){var ft=this.ptr;st.prepare(),$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),pe&&typeof pe=="object"&&(pe=pe.ptr),typeof Me=="object"&&(Me=K(Me)),Ze&&typeof Ze=="object"&&(Ze=Ze.ptr),cn(ft,$,oe,pe,Me,Ze)},We.prototype.SetSpeedOptions=We.prototype.SetSpeedOptions=function($,oe){var pe=this.ptr;$&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),Wt(pe,$,oe)},We.prototype.SetTrackEncodedProperties=We.prototype.SetTrackEncodedProperties=function($){var oe=this.ptr;$&&typeof $=="object"&&($=$.ptr),Ke(oe,$)},We.prototype.EncodeToDracoBuffer=We.prototype.EncodeToDracoBuffer=function($,oe){var pe=this.ptr;return $&&typeof $=="object"&&($=$.ptr),oe&&typeof oe=="object"&&(oe=oe.ptr),gt(pe,$,oe)},We.prototype.GetNumberOfEncodedPoints=We.prototype.GetNumberOfEncodedPoints=function(){return $n(this.ptr)},We.prototype.GetNumberOfEncodedFaces=We.prototype.GetNumberOfEncodedFaces=function(){return vt(this.ptr)},We.prototype.__destroy__=We.prototype.__destroy__=function(){Pt(this.ptr)},function(){function $(){j.INVALID=an(),j.POSITION=Wr(),j.NORMAL=Vr(),j.COLOR=On(),j.TEX_COORD=Fr(),j.GENERIC=si(),j.INVALID_GEOMETRY_TYPE=hi(),j.POINT_CLOUD=wi(),j.TRIANGULAR_MESH=Lr(),j.MESH_SEQUENTIAL_ENCODING=Yr(),j.MESH_EDGEBREAKER_ENCODING=Rn()}Nt?$():St.unshift($)}(),typeof j.onModuleParsed=="function"&&j.onModuleParsed(),i.ready}}();o.exports=n})(Mv);var ad={},Iv={get exports(){return ad},set exports(o){ad=o}};(function(o,e){var t=t||{};t.scope={},t.arrayIteratorImpl=function(r){var i=0;return function(){return i<r.length?{done:!1,value:r[i++]}:{done:!0}}},t.arrayIterator=function(r){return{next:t.arrayIteratorImpl(r)}},t.makeIterator=function(r){var i=typeof Symbol<"u"&&Symbol.iterator&&r[Symbol.iterator];return i?i.call(r):t.arrayIterator(r)},t.ASSUME_ES5=!1,t.ASSUME_NO_NATIVE_MAP=!1,t.ASSUME_NO_NATIVE_SET=!1,t.SIMPLE_FROUND_POLYFILL=!1,t.ISOLATE_POLYFILLS=!1,t.FORCE_POLYFILL_PROMISE=!1,t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,t.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof gi=="object"&&gi];for(var i=0;i<r.length;++i){var s=r[i];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},t.global=t.getGlobal(gi),t.defineProperty=t.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,i,s){return r==Array.prototype||r==Object.prototype||(r[i]=s.value),r},t.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",t.TRUST_ES6_POLYFILLS=!t.ISOLATE_POLYFILLS||t.IS_SYMBOL_NATIVE,t.polyfills={},t.propertyToPolyfillSymbol={},t.POLYFILL_PREFIX="$jscp$",t.polyfill=function(r,i,s,a){i&&(t.ISOLATE_POLYFILLS?t.polyfillIsolated(r,i,s,a):t.polyfillUnisolated(r,i,s,a))},t.polyfillUnisolated=function(r,i,s,a){for(s=t.global,r=r.split("."),a=0;a<r.length-1;a++){var u=r[a];if(!(u in s))return;s=s[u]}r=r[r.length-1],a=s[r],i=i(a),i!=a&&i!=null&&t.defineProperty(s,r,{configurable:!0,writable:!0,value:i})},t.polyfillIsolated=function(r,i,s,a){var u=r.split(".");r=u.length===1,a=u[0],a=!r&&a in t.polyfills?t.polyfills:t.global;for(var f=0;f<u.length-1;f++){var l=u[f];if(!(l in a))return;a=a[l]}u=u[u.length-1],s=t.IS_SYMBOL_NATIVE&&s==="es6"?a[u]:null,i=i(s),i!=null&&(r?t.defineProperty(t.polyfills,u,{configurable:!0,writable:!0,value:i}):i!==s&&(t.propertyToPolyfillSymbol[u]===void 0&&(s=1e9*Math.random()>>>0,t.propertyToPolyfillSymbol[u]=t.IS_SYMBOL_NATIVE?t.global.Symbol(u):t.POLYFILL_PREFIX+s+"$"+u),t.defineProperty(a,t.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:i})))},t.polyfill("Promise",function(r){function i(){this.batch_=null}function s(l){return l instanceof u?l:new u(function(p,d){p(l)})}if(r&&(!(t.FORCE_POLYFILL_PROMISE||t.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&typeof t.global.PromiseRejectionEvent>"u")||!t.global.Promise||t.global.Promise.toString().indexOf("[native code]")===-1))return r;i.prototype.asyncExecute=function(l){if(this.batch_==null){this.batch_=[];var p=this;this.asyncExecuteFunction(function(){p.executeBatch_()})}this.batch_.push(l)};var a=t.global.setTimeout;i.prototype.asyncExecuteFunction=function(l){a(l,0)},i.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var l=this.batch_;this.batch_=[];for(var p=0;p<l.length;++p){var d=l[p];l[p]=null;try{d()}catch(_){this.asyncThrow_(_)}}}this.batch_=null},i.prototype.asyncThrow_=function(l){this.asyncExecuteFunction(function(){throw l})};var u=function(l){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var p=this.createResolveAndReject_();try{l(p.resolve,p.reject)}catch(d){p.reject(d)}};u.prototype.createResolveAndReject_=function(){function l(_){return function(A){d||(d=!0,_.call(p,A))}}var p=this,d=!1;return{resolve:l(this.resolveTo_),reject:l(this.reject_)}},u.prototype.resolveTo_=function(l){if(l===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(l instanceof u)this.settleSameAsPromise_(l);else{e:switch(typeof l){case"object":var p=l!=null;break e;case"function":p=!0;break e;default:p=!1}p?this.resolveToNonPromiseObj_(l):this.fulfill_(l)}},u.prototype.resolveToNonPromiseObj_=function(l){var p=void 0;try{p=l.then}catch(d){this.reject_(d);return}typeof p=="function"?this.settleSameAsThenable_(p,l):this.fulfill_(l)},u.prototype.reject_=function(l){this.settle_(2,l)},u.prototype.fulfill_=function(l){this.settle_(1,l)},u.prototype.settle_=function(l,p){if(this.state_!=0)throw Error("Cannot settle("+l+", "+p+"): Promise already settled in state"+this.state_);this.state_=l,this.result_=p,this.state_===2&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},u.prototype.scheduleUnhandledRejectionCheck_=function(){var l=this;a(function(){if(l.notifyUnhandledRejection_()){var p=t.global.console;typeof p<"u"&&p.error(l.result_)}},1)},u.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var l=t.global.CustomEvent,p=t.global.Event,d=t.global.dispatchEvent;return typeof d>"u"?!0:(typeof l=="function"?l=new l("unhandledrejection",{cancelable:!0}):typeof p=="function"?l=new p("unhandledrejection",{cancelable:!0}):(l=t.global.document.createEvent("CustomEvent"),l.initCustomEvent("unhandledrejection",!1,!0,l)),l.promise=this,l.reason=this.result_,d(l))},u.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var l=0;l<this.onSettledCallbacks_.length;++l)f.asyncExecute(this.onSettledCallbacks_[l]);this.onSettledCallbacks_=null}};var f=new i;return u.prototype.settleSameAsPromise_=function(l){var p=this.createResolveAndReject_();l.callWhenSettled_(p.resolve,p.reject)},u.prototype.settleSameAsThenable_=function(l,p){var d=this.createResolveAndReject_();try{l.call(p,d.resolve,d.reject)}catch(_){d.reject(_)}},u.prototype.then=function(l,p){function d(v,T){return typeof v=="function"?function(I){try{_(v(I))}catch(R){A(R)}}:T}var _,A,E=new u(function(v,T){_=v,A=T});return this.callWhenSettled_(d(l,_),d(p,A)),E},u.prototype.catch=function(l){return this.then(void 0,l)},u.prototype.callWhenSettled_=function(l,p){function d(){switch(_.state_){case 1:l(_.result_);break;case 2:p(_.result_);break;default:throw Error("Unexpected state: "+_.state_)}}var _=this;this.onSettledCallbacks_==null?f.asyncExecute(d):this.onSettledCallbacks_.push(d),this.isRejectionHandled_=!0},u.resolve=s,u.reject=function(l){return new u(function(p,d){d(l)})},u.race=function(l){return new u(function(p,d){for(var _=t.makeIterator(l),A=_.next();!A.done;A=_.next())s(A.value).callWhenSettled_(p,d)})},u.all=function(l){var p=t.makeIterator(l),d=p.next();return d.done?s([]):new u(function(_,A){function E(I){return function(R){v[I]=R,T--,T==0&&_(v)}}var v=[],T=0;do v.push(void 0),T++,s(d.value).callWhenSettled_(E(v.length-1),A),d=p.next();while(!d.done)})},u},"es6","es3"),t.owns=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.assign=t.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(r,i){for(var s=1;s<arguments.length;s++){var a=arguments[s];if(a)for(var u in a)t.owns(a,u)&&(r[u]=a[u])}return r},t.polyfill("Object.assign",function(r){return r||t.assign},"es6","es3"),t.checkStringArgs=function(r,i,s){if(r==null)throw new TypeError("The 'this' value for String.prototype."+s+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+s+" must not be a regular expression");return r+""},t.polyfill("String.prototype.startsWith",function(r){return r||function(i,s){var a=t.checkStringArgs(this,i,"startsWith");i+="";var u=a.length,f=i.length;s=Math.max(0,Math.min(s|0,a.length));for(var l=0;l<f&&s<u;)if(a[s++]!=i[l++])return!1;return l>=f}},"es6","es3"),t.polyfill("Array.prototype.copyWithin",function(r){function i(s){return s=Number(s),s===1/0||s===-1/0?s:s|0}return r||function(s,a,u){var f=this.length;if(s=i(s),a=i(a),u=u===void 0?f:i(u),s=0>s?Math.max(f+s,0):Math.min(s,f),a=0>a?Math.max(f+a,0):Math.min(a,f),u=0>u?Math.max(f+u,0):Math.min(u,f),s<a)for(;a<u;)a in this?this[s++]=this[a++]:(delete this[s++],a++);else for(u=Math.min(u,f+a-s),s+=u-a;u>a;)--u in this?this[--s]=this[u]:delete this[--s];return this}},"es6","es3"),t.typedArrayCopyWithin=function(r){return r||Array.prototype.copyWithin},t.polyfill("Int8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint8ClampedArray.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint16Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Int32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Uint32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float32Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5"),t.polyfill("Float64Array.prototype.copyWithin",t.typedArrayCopyWithin,"es6","es5");var n=function(){var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){function s(U){return P.locateFile?P.locateFile(U,Cr):Cr+U}function a(U,q,ue){var Re=q+ue;for(ue=q;U[ue]&&!(ue>=Re);)++ue;if(16<ue-q&&U.buffer&&St)return St.decode(U.subarray(q,ue));for(Re="";q<ue;){var pt=U[q++];if(pt&128){var yt=U[q++]&63;if((pt&224)==192)Re+=String.fromCharCode((pt&31)<<6|yt);else{var jt=U[q++]&63;pt=(pt&240)==224?(pt&15)<<12|yt<<6|jt:(pt&7)<<18|yt<<12|jt<<6|U[q++]&63,65536>pt?Re+=String.fromCharCode(pt):(pt-=65536,Re+=String.fromCharCode(55296|pt>>10,56320|pt&1023))}}else Re+=String.fromCharCode(pt)}return Re}function u(U,q){return U?a(_n,U,q):""}function f(U){Dt=U,P.HEAP8=Nt=new Int8Array(U),P.HEAP16=new Int16Array(U),P.HEAP32=Ce=new Int32Array(U),P.HEAPU8=_n=new Uint8Array(U),P.HEAPU16=new Uint16Array(U),P.HEAPU32=Ne=new Uint32Array(U),P.HEAPF32=new Float32Array(U),P.HEAPF64=new Float64Array(U)}function l(U){throw P.onAbort&&P.onAbort(U),U="Aborted("+U+")",ar(U),ot=!0,U=new WebAssembly.RuntimeError(U+". Build with -sASSERTIONS for more info."),Fn(U),U}function p(U){try{if(U==Cn&&Ae)return new Uint8Array(Ae);if(Sr)return Sr(U);throw"both async and sync fetching of the wasm failed"}catch(q){l(q)}}function d(){if(!Ae&&(dn||$t)){if(typeof fetch=="function"&&!Cn.startsWith("file://"))return fetch(Cn,{credentials:"same-origin"}).then(function(U){if(!U.ok)throw"failed to load wasm binary file at '"+Cn+"'";return U.arrayBuffer()}).catch(function(){return p(Cn)});if(Mn)return new Promise(function(U,q){Mn(Cn,function(ue){U(new Uint8Array(ue))},q)})}return Promise.resolve().then(function(){return p(Cn)})}function _(U){for(;0<U.length;)U.shift()(P)}function A(U){this.excPtr=U,this.ptr=U-24,this.set_type=function(q){Ne[this.ptr+4>>2]=q},this.get_type=function(){return Ne[this.ptr+4>>2]},this.set_destructor=function(q){Ne[this.ptr+8>>2]=q},this.get_destructor=function(){return Ne[this.ptr+8>>2]},this.set_refcount=function(q){Ce[this.ptr>>2]=q},this.set_caught=function(q){Nt[this.ptr+12>>0]=q?1:0},this.get_caught=function(){return Nt[this.ptr+12>>0]!=0},this.set_rethrown=function(q){Nt[this.ptr+13>>0]=q?1:0},this.get_rethrown=function(){return Nt[this.ptr+13>>0]!=0},this.init=function(q,ue){this.set_adjusted_ptr(0),this.set_type(q),this.set_destructor(ue),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Ce[this.ptr>>2]+=1},this.release_ref=function(){var q=Ce[this.ptr>>2];return Ce[this.ptr>>2]=q-1,q===1},this.set_adjusted_ptr=function(q){Ne[this.ptr+16>>2]=q},this.get_adjusted_ptr=function(){return Ne[this.ptr+16>>2]},this.get_exception_ptr=function(){if(se(this.get_type()))return Ne[this.excPtr>>2];var q=this.get_adjusted_ptr();return q!==0?q:this.excPtr}}function E(U){function q(){if(!be&&(be=!0,P.calledRun=!0,!ot)){if(zt=!0,_(Zt),nt(P),P.onRuntimeInitialized&&P.onRuntimeInitialized(),P.postRun)for(typeof P.postRun=="function"&&(P.postRun=[P.postRun]);P.postRun.length;)Bt.unshift(P.postRun.shift());_(Bt)}}if(!(0<Qt)){if(P.preRun)for(typeof P.preRun=="function"&&(P.preRun=[P.preRun]);P.preRun.length;)Jt.unshift(P.preRun.shift());_(Jt),0<Qt||(P.setStatus?(P.setStatus("Running..."),setTimeout(function(){setTimeout(function(){P.setStatus("")},1),q()},1)):q())}}function v(){}function T(U){return(U||v).__cache__}function I(U,q){var ue=T(q),Re=ue[U];return Re||(Re=Object.create((q||v).prototype),Re.ptr=U,ue[U]=Re)}function R(U){if(typeof U=="string"){for(var q=0,ue=0;ue<U.length;++ue){var Re=U.charCodeAt(ue);127>=Re?q++:2047>=Re?q+=2:55296<=Re&&57343>=Re?(q+=4,++ue):q+=3}if(q=Array(q+1),ue=0,Re=q.length,0<Re){Re=ue+Re-1;for(var pt=0;pt<U.length;++pt){var yt=U.charCodeAt(pt);if(55296<=yt&&57343>=yt){var jt=U.charCodeAt(++pt);yt=65536+((yt&1023)<<10)|jt&1023}if(127>=yt){if(ue>=Re)break;q[ue++]=yt}else{if(2047>=yt){if(ue+1>=Re)break;q[ue++]=192|yt>>6}else{if(65535>=yt){if(ue+2>=Re)break;q[ue++]=224|yt>>12}else{if(ue+3>=Re)break;q[ue++]=240|yt>>18,q[ue++]=128|yt>>12&63}q[ue++]=128|yt>>6&63}q[ue++]=128|yt&63}}q[ue]=0}return U=De.alloc(q,Nt),De.copy(q,Nt,U),U}return U}function k(U){if(typeof U=="object"){var q=De.alloc(U,Nt);return De.copy(U,Nt,q),q}return U}function K(){throw"cannot construct a VoidPtr, no constructor in IDL"}function ee(){this.ptr=Ct(),T(ee)[this.ptr]=this}function _e(){this.ptr=Jr(),T(_e)[this.ptr]=this}function Q(){this.ptr=$i(),T(Q)[this.ptr]=this}function ne(){this.ptr=so(),T(ne)[this.ptr]=this}function de(){this.ptr=Dn(),T(de)[this.ptr]=this}function Ie(){this.ptr=gr(),T(Ie)[this.ptr]=this}function Pe(){this.ptr=Zi(),T(Pe)[this.ptr]=this}function Te(){this.ptr=et(),T(Te)[this.ptr]=this}function Ee(){this.ptr=Rt(),T(Ee)[this.ptr]=this}function Se(){throw"cannot construct a Status, no constructor in IDL"}function Oe(){this.ptr=Ut(),T(Oe)[this.ptr]=this}function We(){this.ptr=Pr(),T(We)[this.ptr]=this}function j(){this.ptr=Hr(),T(j)[this.ptr]=this}function _t(){this.ptr=Ti(),T(_t)[this.ptr]=this}function Qe(){this.ptr=li(),T(Qe)[this.ptr]=this}function Je(){this.ptr=Ln(),T(Je)[this.ptr]=this}function ze(){this.ptr=Ke(),T(ze)[this.ptr]=this}function ct(){this.ptr=Pt(),T(ct)[this.ptr]=this}function He(){this.ptr=Lr(),T(He)[this.ptr]=this}i=i||{};var P=typeof i<"u"?i:{},nt,Fn;P.ready=new Promise(function(U,q){nt=U,Fn=q});var Yt=!1,kn=!1;P.onRuntimeInitialized=function(){Yt=!0,kn&&typeof P.onModuleLoaded=="function"&&P.onModuleLoaded(P)},P.onModuleParsed=function(){kn=!0,Yt&&typeof P.onModuleLoaded=="function"&&P.onModuleLoaded(P)},P.isVersionSupported=function(U){return typeof U!="string"?!1:(U=U.split("."),2>U.length||3<U.length?!1:U[0]==1&&0<=U[1]&&5>=U[1]?!0:!(U[0]!=0||10<U[1]))};var Et=Object.assign({},P),dn=typeof window=="object",$t=typeof importScripts=="function",vn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Cr="";if(vn){if(Cr=$t?ri.dirname(Cr)+"/":__dirname+"/",typeof Ai=="function")var Qr=ri,yi=ri;var Li=function(U,q){return U=yi.normalize(U),Qr.readFileSync(U,q?void 0:"utf8")},Sr=function(U){return U=Li(U,!0),U.buffer||(U=new Uint8Array(U)),U},Mn=function(U,q,ue){U=yi.normalize(U),Qr.readFile(U,function(Re,pt){Re?ue(Re):q(pt.buffer)})};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),P.inspect=function(){return"[Emscripten Module object]"}}else(dn||$t)&&($t?Cr=self.location.href:typeof document<"u"&&document.currentScript&&(Cr=document.currentScript.src),r&&(Cr=r),Cr=Cr.indexOf("blob:")!==0?Cr.substr(0,Cr.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Li=function(U){var q=new XMLHttpRequest;return q.open("GET",U,!1),q.send(null),q.responseText},$t&&(Sr=function(U){var q=new XMLHttpRequest;return q.open("GET",U,!1),q.responseType="arraybuffer",q.send(null),new Uint8Array(q.response)}),Mn=function(U,q,ue){var Re=new XMLHttpRequest;Re.open("GET",U,!0),Re.responseType="arraybuffer",Re.onload=function(){Re.status==200||Re.status==0&&Re.response?q(Re.response):ue()},Re.onerror=ue,Re.send(null)});var vi=P.print||console.log.bind(console),ar=P.printErr||console.warn.bind(console);Object.assign(P,Et),Et=null;var Ae;P.wasmBinary&&(Ae=P.wasmBinary),typeof WebAssembly!="object"&&l("no native wasm support detected");var fe,ot=!1,St=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Dt,Nt,_n,Ce,Ne,Jt=[],Zt=[],Bt=[],zt=!1,Qt=0,rr=null,Cn="draco_decoder.wasm";Cn.startsWith("data:application/octet-stream;base64,")||(Cn=s(Cn));var Kr=[null,[],[]],Fe={c:function(U){return H(U+24)+24},b:function(U,q,ue){throw new A(U).init(q,ue),U},a:function(){l("")},h:function(U,q,ue){_n.copyWithin(U,q,q+ue)},f:function(U){var q=_n.length;if(U>>>=0,2147483648<U)return!1;for(var ue=1;4>=ue;ue*=2){var Re=q*(1+.2/ue);Re=Math.min(Re,U+100663296);var pt=Math;Re=Math.max(U,Re),pt=pt.min.call(pt,2147483648,Re+(65536-Re%65536)%65536);e:{try{fe.grow(pt-Dt.byteLength+65535>>>16),f(fe.buffer);var yt=1;break e}catch{}yt=void 0}if(yt)return!0}return!1},g:function(U){return 52},e:function(U,q,ue,Re,pt){return 70},d:function(U,q,ue,Re){for(var pt=0,yt=0;yt<ue;yt++){var jt=Ne[q>>2],wt=Ne[q+4>>2];q+=8;for(var Ht=0;Ht<wt;Ht++){var Pn=_n[jt+Ht],pr=Kr[U];Pn===0||Pn===10?((U===1?vi:ar)(a(pr,0)),pr.length=0):pr.push(Pn)}pt+=wt}return Ne[Re>>2]=pt,0}};(function(){function U(pt,yt){P.asm=pt.exports,fe=P.asm.i,f(fe.buffer),Zt.unshift(P.asm.j),Qt--,P.monitorRunDependencies&&P.monitorRunDependencies(Qt),Qt==0&&rr&&(pt=rr,rr=null,pt())}function q(pt){U(pt.instance)}function ue(pt){return d().then(function(yt){return WebAssembly.instantiate(yt,Re)}).then(function(yt){return yt}).then(pt,function(yt){ar("failed to asynchronously prepare wasm: "+yt),l(yt)})}var Re={a:Fe};if(Qt++,P.monitorRunDependencies&&P.monitorRunDependencies(Qt),P.instantiateWasm)try{return P.instantiateWasm(Re,U)}catch(pt){ar("Module.instantiateWasm callback failed with error: "+pt),Fn(pt)}return function(){return Ae||typeof WebAssembly.instantiateStreaming!="function"||Cn.startsWith("data:application/octet-stream;base64,")||Cn.startsWith("file://")||vn||typeof fetch!="function"?ue(q):fetch(Cn,{credentials:"same-origin"}).then(function(pt){return WebAssembly.instantiateStreaming(pt,Re).then(q,function(yt){return ar("wasm streaming compile failed: "+yt),ar("falling back to ArrayBuffer instantiation"),ue(q)})})}().catch(Fn),{}})(),P.___wasm_call_ctors=function(){return(P.___wasm_call_ctors=P.asm.j).apply(null,arguments)};var rt=P._emscripten_bind_VoidPtr___destroy___0=function(){return(rt=P._emscripten_bind_VoidPtr___destroy___0=P.asm.l).apply(null,arguments)},Ct=P._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(Ct=P._emscripten_bind_DecoderBuffer_DecoderBuffer_0=P.asm.m).apply(null,arguments)},en=P._emscripten_bind_DecoderBuffer_Init_2=function(){return(en=P._emscripten_bind_DecoderBuffer_Init_2=P.asm.n).apply(null,arguments)},En=P._emscripten_bind_DecoderBuffer___destroy___0=function(){return(En=P._emscripten_bind_DecoderBuffer___destroy___0=P.asm.o).apply(null,arguments)},Jr=P._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(Jr=P._emscripten_bind_AttributeTransformData_AttributeTransformData_0=P.asm.p).apply(null,arguments)},ki=P._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(ki=P._emscripten_bind_AttributeTransformData_transform_type_0=P.asm.q).apply(null,arguments)},Hi=P._emscripten_bind_AttributeTransformData___destroy___0=function(){return(Hi=P._emscripten_bind_AttributeTransformData___destroy___0=P.asm.r).apply(null,arguments)},$i=P._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return($i=P._emscripten_bind_GeometryAttribute_GeometryAttribute_0=P.asm.s).apply(null,arguments)},ci=P._emscripten_bind_GeometryAttribute___destroy___0=function(){return(ci=P._emscripten_bind_GeometryAttribute___destroy___0=P.asm.t).apply(null,arguments)},so=P._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(so=P._emscripten_bind_PointAttribute_PointAttribute_0=P.asm.u).apply(null,arguments)},ji=P._emscripten_bind_PointAttribute_size_0=function(){return(ji=P._emscripten_bind_PointAttribute_size_0=P.asm.v).apply(null,arguments)},mo=P._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(mo=P._emscripten_bind_PointAttribute_GetAttributeTransformData_0=P.asm.w).apply(null,arguments)},tn=P._emscripten_bind_PointAttribute_attribute_type_0=function(){return(tn=P._emscripten_bind_PointAttribute_attribute_type_0=P.asm.x).apply(null,arguments)},Mo=P._emscripten_bind_PointAttribute_data_type_0=function(){return(Mo=P._emscripten_bind_PointAttribute_data_type_0=P.asm.y).apply(null,arguments)},no=P._emscripten_bind_PointAttribute_num_components_0=function(){return(no=P._emscripten_bind_PointAttribute_num_components_0=P.asm.z).apply(null,arguments)},ye=P._emscripten_bind_PointAttribute_normalized_0=function(){return(ye=P._emscripten_bind_PointAttribute_normalized_0=P.asm.A).apply(null,arguments)},qe=P._emscripten_bind_PointAttribute_byte_stride_0=function(){return(qe=P._emscripten_bind_PointAttribute_byte_stride_0=P.asm.B).apply(null,arguments)},ut=P._emscripten_bind_PointAttribute_byte_offset_0=function(){return(ut=P._emscripten_bind_PointAttribute_byte_offset_0=P.asm.C).apply(null,arguments)},Ue=P._emscripten_bind_PointAttribute_unique_id_0=function(){return(Ue=P._emscripten_bind_PointAttribute_unique_id_0=P.asm.D).apply(null,arguments)},ht=P._emscripten_bind_PointAttribute___destroy___0=function(){return(ht=P._emscripten_bind_PointAttribute___destroy___0=P.asm.E).apply(null,arguments)},Dn=P._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(Dn=P._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=P.asm.F).apply(null,arguments)},Bn=P._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(Bn=P._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=P.asm.G).apply(null,arguments)},_r=P._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(_r=P._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=P.asm.H).apply(null,arguments)},yr=P._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(yr=P._emscripten_bind_AttributeQuantizationTransform_min_value_1=P.asm.I).apply(null,arguments)},kr=P._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(kr=P._emscripten_bind_AttributeQuantizationTransform_range_0=P.asm.J).apply(null,arguments)},vr=P._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(vr=P._emscripten_bind_AttributeQuantizationTransform___destroy___0=P.asm.K).apply(null,arguments)},gr=P._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(gr=P._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=P.asm.L).apply(null,arguments)},ei=P._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(ei=P._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=P.asm.M).apply(null,arguments)},Wi=P._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(Wi=P._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=P.asm.N).apply(null,arguments)},zi=P._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(zi=P._emscripten_bind_AttributeOctahedronTransform___destroy___0=P.asm.O).apply(null,arguments)},Zi=P._emscripten_bind_PointCloud_PointCloud_0=function(){return(Zi=P._emscripten_bind_PointCloud_PointCloud_0=P.asm.P).apply(null,arguments)},Ge=P._emscripten_bind_PointCloud_num_attributes_0=function(){return(Ge=P._emscripten_bind_PointCloud_num_attributes_0=P.asm.Q).apply(null,arguments)},c=P._emscripten_bind_PointCloud_num_points_0=function(){return(c=P._emscripten_bind_PointCloud_num_points_0=P.asm.R).apply(null,arguments)},Xe=P._emscripten_bind_PointCloud___destroy___0=function(){return(Xe=P._emscripten_bind_PointCloud___destroy___0=P.asm.S).apply(null,arguments)},et=P._emscripten_bind_Mesh_Mesh_0=function(){return(et=P._emscripten_bind_Mesh_Mesh_0=P.asm.T).apply(null,arguments)},it=P._emscripten_bind_Mesh_num_faces_0=function(){return(it=P._emscripten_bind_Mesh_num_faces_0=P.asm.U).apply(null,arguments)},je=P._emscripten_bind_Mesh_num_attributes_0=function(){return(je=P._emscripten_bind_Mesh_num_attributes_0=P.asm.V).apply(null,arguments)},qt=P._emscripten_bind_Mesh_num_points_0=function(){return(qt=P._emscripten_bind_Mesh_num_points_0=P.asm.W).apply(null,arguments)},It=P._emscripten_bind_Mesh___destroy___0=function(){return(It=P._emscripten_bind_Mesh___destroy___0=P.asm.X).apply(null,arguments)},Rt=P._emscripten_bind_Metadata_Metadata_0=function(){return(Rt=P._emscripten_bind_Metadata_Metadata_0=P.asm.Y).apply(null,arguments)},Xt=P._emscripten_bind_Metadata___destroy___0=function(){return(Xt=P._emscripten_bind_Metadata___destroy___0=P.asm.Z).apply(null,arguments)},hn=P._emscripten_bind_Status_code_0=function(){return(hn=P._emscripten_bind_Status_code_0=P.asm._).apply(null,arguments)},nn=P._emscripten_bind_Status_ok_0=function(){return(nn=P._emscripten_bind_Status_ok_0=P.asm.$).apply(null,arguments)},An=P._emscripten_bind_Status_error_msg_0=function(){return(An=P._emscripten_bind_Status_error_msg_0=P.asm.aa).apply(null,arguments)},pn=P._emscripten_bind_Status___destroy___0=function(){return(pn=P._emscripten_bind_Status___destroy___0=P.asm.ba).apply(null,arguments)},Ut=P._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(Ut=P._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=P.asm.ca).apply(null,arguments)},Gt=P._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(Gt=P._emscripten_bind_DracoFloat32Array_GetValue_1=P.asm.da).apply(null,arguments)},on=P._emscripten_bind_DracoFloat32Array_size_0=function(){return(on=P._emscripten_bind_DracoFloat32Array_size_0=P.asm.ea).apply(null,arguments)},lr=P._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(lr=P._emscripten_bind_DracoFloat32Array___destroy___0=P.asm.fa).apply(null,arguments)},Pr=P._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(Pr=P._emscripten_bind_DracoInt8Array_DracoInt8Array_0=P.asm.ga).apply(null,arguments)},Tn=P._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(Tn=P._emscripten_bind_DracoInt8Array_GetValue_1=P.asm.ha).apply(null,arguments)},qr=P._emscripten_bind_DracoInt8Array_size_0=function(){return(qr=P._emscripten_bind_DracoInt8Array_size_0=P.asm.ia).apply(null,arguments)},xr=P._emscripten_bind_DracoInt8Array___destroy___0=function(){return(xr=P._emscripten_bind_DracoInt8Array___destroy___0=P.asm.ja).apply(null,arguments)},Hr=P._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(Hr=P._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=P.asm.ka).apply(null,arguments)},oi=P._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(oi=P._emscripten_bind_DracoUInt8Array_GetValue_1=P.asm.la).apply(null,arguments)},ti=P._emscripten_bind_DracoUInt8Array_size_0=function(){return(ti=P._emscripten_bind_DracoUInt8Array_size_0=P.asm.ma).apply(null,arguments)},Mi=P._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(Mi=P._emscripten_bind_DracoUInt8Array___destroy___0=P.asm.na).apply(null,arguments)},Ti=P._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(Ti=P._emscripten_bind_DracoInt16Array_DracoInt16Array_0=P.asm.oa).apply(null,arguments)},Di=P._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(Di=P._emscripten_bind_DracoInt16Array_GetValue_1=P.asm.pa).apply(null,arguments)},Ri=P._emscripten_bind_DracoInt16Array_size_0=function(){return(Ri=P._emscripten_bind_DracoInt16Array_size_0=P.asm.qa).apply(null,arguments)},Ii=P._emscripten_bind_DracoInt16Array___destroy___0=function(){return(Ii=P._emscripten_bind_DracoInt16Array___destroy___0=P.asm.ra).apply(null,arguments)},li=P._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(li=P._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=P.asm.sa).apply(null,arguments)},fi=P._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(fi=P._emscripten_bind_DracoUInt16Array_GetValue_1=P.asm.ta).apply(null,arguments)},di=P._emscripten_bind_DracoUInt16Array_size_0=function(){return(di=P._emscripten_bind_DracoUInt16Array_size_0=P.asm.ua).apply(null,arguments)},mn=P._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(mn=P._emscripten_bind_DracoUInt16Array___destroy___0=P.asm.va).apply(null,arguments)},Ln=P._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(Ln=P._emscripten_bind_DracoInt32Array_DracoInt32Array_0=P.asm.wa).apply(null,arguments)},At=P._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(At=P._emscripten_bind_DracoInt32Array_GetValue_1=P.asm.xa).apply(null,arguments)},cn=P._emscripten_bind_DracoInt32Array_size_0=function(){return(cn=P._emscripten_bind_DracoInt32Array_size_0=P.asm.ya).apply(null,arguments)},Wt=P._emscripten_bind_DracoInt32Array___destroy___0=function(){return(Wt=P._emscripten_bind_DracoInt32Array___destroy___0=P.asm.za).apply(null,arguments)},Ke=P._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(Ke=P._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=P.asm.Aa).apply(null,arguments)},gt=P._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(gt=P._emscripten_bind_DracoUInt32Array_GetValue_1=P.asm.Ba).apply(null,arguments)},$n=P._emscripten_bind_DracoUInt32Array_size_0=function(){return($n=P._emscripten_bind_DracoUInt32Array_size_0=P.asm.Ca).apply(null,arguments)},vt=P._emscripten_bind_DracoUInt32Array___destroy___0=function(){return(vt=P._emscripten_bind_DracoUInt32Array___destroy___0=P.asm.Da).apply(null,arguments)},Pt=P._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(Pt=P._emscripten_bind_MetadataQuerier_MetadataQuerier_0=P.asm.Ea).apply(null,arguments)},an=P._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(an=P._emscripten_bind_MetadataQuerier_HasEntry_2=P.asm.Fa).apply(null,arguments)},Wr=P._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(Wr=P._emscripten_bind_MetadataQuerier_GetIntEntry_2=P.asm.Ga).apply(null,arguments)},Vr=P._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Vr=P._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=P.asm.Ha).apply(null,arguments)},On=P._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(On=P._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=P.asm.Ia).apply(null,arguments)},Fr=P._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(Fr=P._emscripten_bind_MetadataQuerier_GetStringEntry_2=P.asm.Ja).apply(null,arguments)},si=P._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(si=P._emscripten_bind_MetadataQuerier_NumEntries_1=P.asm.Ka).apply(null,arguments)},hi=P._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(hi=P._emscripten_bind_MetadataQuerier_GetEntryName_2=P.asm.La).apply(null,arguments)},wi=P._emscripten_bind_MetadataQuerier___destroy___0=function(){return(wi=P._emscripten_bind_MetadataQuerier___destroy___0=P.asm.Ma).apply(null,arguments)},Lr=P._emscripten_bind_Decoder_Decoder_0=function(){return(Lr=P._emscripten_bind_Decoder_Decoder_0=P.asm.Na).apply(null,arguments)},Yr=P._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(Yr=P._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=P.asm.Oa).apply(null,arguments)},Rn=P._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return(Rn=P._emscripten_bind_Decoder_DecodeArrayToMesh_3=P.asm.Pa).apply(null,arguments)},fr=P._emscripten_bind_Decoder_GetAttributeId_2=function(){return(fr=P._emscripten_bind_Decoder_GetAttributeId_2=P.asm.Qa).apply(null,arguments)},$r=P._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return($r=P._emscripten_bind_Decoder_GetAttributeIdByName_2=P.asm.Ra).apply(null,arguments)},er=P._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(er=P._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=P.asm.Sa).apply(null,arguments)},st=P._emscripten_bind_Decoder_GetAttribute_2=function(){return(st=P._emscripten_bind_Decoder_GetAttribute_2=P.asm.Ta).apply(null,arguments)},$=P._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return($=P._emscripten_bind_Decoder_GetAttributeByUniqueId_2=P.asm.Ua).apply(null,arguments)},oe=P._emscripten_bind_Decoder_GetMetadata_1=function(){return(oe=P._emscripten_bind_Decoder_GetMetadata_1=P.asm.Va).apply(null,arguments)},pe=P._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return(pe=P._emscripten_bind_Decoder_GetAttributeMetadata_2=P.asm.Wa).apply(null,arguments)},Me=P._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(Me=P._emscripten_bind_Decoder_GetFaceFromMesh_3=P.asm.Xa).apply(null,arguments)},Ze=P._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(Ze=P._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=P.asm.Ya).apply(null,arguments)},ft=P._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(ft=P._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=P.asm.Za).apply(null,arguments)},Sn=P._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(Sn=P._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=P.asm._a).apply(null,arguments)},dr=P._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(dr=P._emscripten_bind_Decoder_GetAttributeFloat_3=P.asm.$a).apply(null,arguments)},Wn=P._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return(Wn=P._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=P.asm.ab).apply(null,arguments)},ni=P._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(ni=P._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=P.asm.bb).apply(null,arguments)},ur=P._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(ur=P._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=P.asm.cb).apply(null,arguments)},Br=P._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(Br=P._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=P.asm.db).apply(null,arguments)},Ir=P._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(Ir=P._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=P.asm.eb).apply(null,arguments)},Er=P._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(Er=P._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=P.asm.fb).apply(null,arguments)},hr=P._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(hr=P._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=P.asm.gb).apply(null,arguments)},cr=P._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(cr=P._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=P.asm.hb).apply(null,arguments)},Vt=P._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(Vt=P._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=P.asm.ib).apply(null,arguments)},ln=P._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(ln=P._emscripten_bind_Decoder_SkipAttributeTransform_1=P.asm.jb).apply(null,arguments)},Nn=P._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(Nn=P._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=P.asm.kb).apply(null,arguments)},gn=P._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(gn=P._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=P.asm.lb).apply(null,arguments)},Ft=P._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(Ft=P._emscripten_bind_Decoder_DecodeBufferToMesh_2=P.asm.mb).apply(null,arguments)},Jn=P._emscripten_bind_Decoder___destroy___0=function(){return(Jn=P._emscripten_bind_Decoder___destroy___0=P.asm.nb).apply(null,arguments)},Ar=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(Ar=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=P.asm.ob).apply(null,arguments)},xn=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(xn=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=P.asm.pb).apply(null,arguments)},qn=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(qn=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=P.asm.qb).apply(null,arguments)},nr=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(nr=P._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=P.asm.rb).apply(null,arguments)},Mt=P._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(Mt=P._emscripten_enum_draco_GeometryAttribute_Type_INVALID=P.asm.sb).apply(null,arguments)},Vn=P._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(Vn=P._emscripten_enum_draco_GeometryAttribute_Type_POSITION=P.asm.tb).apply(null,arguments)},yn=P._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(yn=P._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=P.asm.ub).apply(null,arguments)},In=P._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(In=P._emscripten_enum_draco_GeometryAttribute_Type_COLOR=P.asm.vb).apply(null,arguments)},Un=P._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Un=P._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=P.asm.wb).apply(null,arguments)},ir=P._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(ir=P._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=P.asm.xb).apply(null,arguments)},Mr=P._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(Mr=P._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=P.asm.yb).apply(null,arguments)},fn=P._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(fn=P._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=P.asm.zb).apply(null,arguments)},Xn=P._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Xn=P._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=P.asm.Ab).apply(null,arguments)},Gn=P._emscripten_enum_draco_DataType_DT_INVALID=function(){return(Gn=P._emscripten_enum_draco_DataType_DT_INVALID=P.asm.Bb).apply(null,arguments)},Lt=P._emscripten_enum_draco_DataType_DT_INT8=function(){return(Lt=P._emscripten_enum_draco_DataType_DT_INT8=P.asm.Cb).apply(null,arguments)},or=P._emscripten_enum_draco_DataType_DT_UINT8=function(){return(or=P._emscripten_enum_draco_DataType_DT_UINT8=P.asm.Db).apply(null,arguments)},Or=P._emscripten_enum_draco_DataType_DT_INT16=function(){return(Or=P._emscripten_enum_draco_DataType_DT_INT16=P.asm.Eb).apply(null,arguments)},bn=P._emscripten_enum_draco_DataType_DT_UINT16=function(){return(bn=P._emscripten_enum_draco_DataType_DT_UINT16=P.asm.Fb).apply(null,arguments)},Tr=P._emscripten_enum_draco_DataType_DT_INT32=function(){return(Tr=P._emscripten_enum_draco_DataType_DT_INT32=P.asm.Gb).apply(null,arguments)},jn=P._emscripten_enum_draco_DataType_DT_UINT32=function(){return(jn=P._emscripten_enum_draco_DataType_DT_UINT32=P.asm.Hb).apply(null,arguments)},Nr=P._emscripten_enum_draco_DataType_DT_INT64=function(){return(Nr=P._emscripten_enum_draco_DataType_DT_INT64=P.asm.Ib).apply(null,arguments)},pi=P._emscripten_enum_draco_DataType_DT_UINT64=function(){return(pi=P._emscripten_enum_draco_DataType_DT_UINT64=P.asm.Jb).apply(null,arguments)},Ur=P._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(Ur=P._emscripten_enum_draco_DataType_DT_FLOAT32=P.asm.Kb).apply(null,arguments)},Dr=P._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(Dr=P._emscripten_enum_draco_DataType_DT_FLOAT64=P.asm.Lb).apply(null,arguments)},ai=P._emscripten_enum_draco_DataType_DT_BOOL=function(){return(ai=P._emscripten_enum_draco_DataType_DT_BOOL=P.asm.Mb).apply(null,arguments)},Oi=P._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(Oi=P._emscripten_enum_draco_DataType_DT_TYPES_COUNT=P.asm.Nb).apply(null,arguments)},ui=P._emscripten_enum_draco_StatusCode_OK=function(){return(ui=P._emscripten_enum_draco_StatusCode_OK=P.asm.Ob).apply(null,arguments)},Pi=P._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(Pi=P._emscripten_enum_draco_StatusCode_DRACO_ERROR=P.asm.Pb).apply(null,arguments)},Ci=P._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(Ci=P._emscripten_enum_draco_StatusCode_IO_ERROR=P.asm.Qb).apply(null,arguments)},Ni=P._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(Ni=P._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=P.asm.Rb).apply(null,arguments)},Si=P._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(Si=P._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=P.asm.Sb).apply(null,arguments)},b=P._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(b=P._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=P.asm.Tb).apply(null,arguments)},H=P._malloc=function(){return(H=P._malloc=P.asm.Ub).apply(null,arguments)};P._free=function(){return(P._free=P.asm.Vb).apply(null,arguments)};var se=P.___cxa_is_pointer_type=function(){return(se=P.___cxa_is_pointer_type=P.asm.Wb).apply(null,arguments)};P.___start_em_js=15856,P.___stop_em_js=15954;var be;if(rr=function U(){be||E(),be||(rr=U)},P.preInit)for(typeof P.preInit=="function"&&(P.preInit=[P.preInit]);0<P.preInit.length;)P.preInit.pop()();E(),v.prototype=Object.create(v.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},P.WrapperObject=v,P.getCache=T,P.wrapPointer=I,P.castObject=function(U,q){return I(U.ptr,q)},P.NULL=I(0),P.destroy=function(U){if(!U.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";U.__destroy__(),delete T(U.__class__)[U.ptr]},P.compare=function(U,q){return U.ptr===q.ptr},P.getPointer=function(U){return U.ptr},P.getClass=function(U){return U.__class__};var De={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(De.needed){for(var U=0;U<De.temps.length;U++)P._free(De.temps[U]);De.temps.length=0,P._free(De.buffer),De.buffer=0,De.size+=De.needed,De.needed=0}De.buffer||(De.size+=128,De.buffer=P._malloc(De.size),De.buffer||l(void 0)),De.pos=0},alloc:function(U,q){return De.buffer||l(void 0),U=U.length*q.BYTES_PER_ELEMENT,U=U+7&-8,De.pos+U>=De.size?(0<U||l(void 0),De.needed+=U,q=P._malloc(U),De.temps.push(q)):(q=De.buffer+De.pos,De.pos+=U),q},copy:function(U,q,ue){switch(ue>>>=0,q.BYTES_PER_ELEMENT){case 2:ue>>>=1;break;case 4:ue>>>=2;break;case 8:ue>>>=3}for(var Re=0;Re<U.length;Re++)q[ue+Re]=U[Re]}};return K.prototype=Object.create(v.prototype),K.prototype.constructor=K,K.prototype.__class__=K,K.__cache__={},P.VoidPtr=K,K.prototype.__destroy__=K.prototype.__destroy__=function(){rt(this.ptr)},ee.prototype=Object.create(v.prototype),ee.prototype.constructor=ee,ee.prototype.__class__=ee,ee.__cache__={},P.DecoderBuffer=ee,ee.prototype.Init=ee.prototype.Init=function(U,q){var ue=this.ptr;De.prepare(),typeof U=="object"&&(U=k(U)),q&&typeof q=="object"&&(q=q.ptr),en(ue,U,q)},ee.prototype.__destroy__=ee.prototype.__destroy__=function(){En(this.ptr)},_e.prototype=Object.create(v.prototype),_e.prototype.constructor=_e,_e.prototype.__class__=_e,_e.__cache__={},P.AttributeTransformData=_e,_e.prototype.transform_type=_e.prototype.transform_type=function(){return ki(this.ptr)},_e.prototype.__destroy__=_e.prototype.__destroy__=function(){Hi(this.ptr)},Q.prototype=Object.create(v.prototype),Q.prototype.constructor=Q,Q.prototype.__class__=Q,Q.__cache__={},P.GeometryAttribute=Q,Q.prototype.__destroy__=Q.prototype.__destroy__=function(){ci(this.ptr)},ne.prototype=Object.create(v.prototype),ne.prototype.constructor=ne,ne.prototype.__class__=ne,ne.__cache__={},P.PointAttribute=ne,ne.prototype.size=ne.prototype.size=function(){return ji(this.ptr)},ne.prototype.GetAttributeTransformData=ne.prototype.GetAttributeTransformData=function(){return I(mo(this.ptr),_e)},ne.prototype.attribute_type=ne.prototype.attribute_type=function(){return tn(this.ptr)},ne.prototype.data_type=ne.prototype.data_type=function(){return Mo(this.ptr)},ne.prototype.num_components=ne.prototype.num_components=function(){return no(this.ptr)},ne.prototype.normalized=ne.prototype.normalized=function(){return!!ye(this.ptr)},ne.prototype.byte_stride=ne.prototype.byte_stride=function(){return qe(this.ptr)},ne.prototype.byte_offset=ne.prototype.byte_offset=function(){return ut(this.ptr)},ne.prototype.unique_id=ne.prototype.unique_id=function(){return Ue(this.ptr)},ne.prototype.__destroy__=ne.prototype.__destroy__=function(){ht(this.ptr)},de.prototype=Object.create(v.prototype),de.prototype.constructor=de,de.prototype.__class__=de,de.__cache__={},P.AttributeQuantizationTransform=de,de.prototype.InitFromAttribute=de.prototype.InitFromAttribute=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),!!Bn(q,U)},de.prototype.quantization_bits=de.prototype.quantization_bits=function(){return _r(this.ptr)},de.prototype.min_value=de.prototype.min_value=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),yr(q,U)},de.prototype.range=de.prototype.range=function(){return kr(this.ptr)},de.prototype.__destroy__=de.prototype.__destroy__=function(){vr(this.ptr)},Ie.prototype=Object.create(v.prototype),Ie.prototype.constructor=Ie,Ie.prototype.__class__=Ie,Ie.__cache__={},P.AttributeOctahedronTransform=Ie,Ie.prototype.InitFromAttribute=Ie.prototype.InitFromAttribute=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),!!ei(q,U)},Ie.prototype.quantization_bits=Ie.prototype.quantization_bits=function(){return Wi(this.ptr)},Ie.prototype.__destroy__=Ie.prototype.__destroy__=function(){zi(this.ptr)},Pe.prototype=Object.create(v.prototype),Pe.prototype.constructor=Pe,Pe.prototype.__class__=Pe,Pe.__cache__={},P.PointCloud=Pe,Pe.prototype.num_attributes=Pe.prototype.num_attributes=function(){return Ge(this.ptr)},Pe.prototype.num_points=Pe.prototype.num_points=function(){return c(this.ptr)},Pe.prototype.__destroy__=Pe.prototype.__destroy__=function(){Xe(this.ptr)},Te.prototype=Object.create(v.prototype),Te.prototype.constructor=Te,Te.prototype.__class__=Te,Te.__cache__={},P.Mesh=Te,Te.prototype.num_faces=Te.prototype.num_faces=function(){return it(this.ptr)},Te.prototype.num_attributes=Te.prototype.num_attributes=function(){return je(this.ptr)},Te.prototype.num_points=Te.prototype.num_points=function(){return qt(this.ptr)},Te.prototype.__destroy__=Te.prototype.__destroy__=function(){It(this.ptr)},Ee.prototype=Object.create(v.prototype),Ee.prototype.constructor=Ee,Ee.prototype.__class__=Ee,Ee.__cache__={},P.Metadata=Ee,Ee.prototype.__destroy__=Ee.prototype.__destroy__=function(){Xt(this.ptr)},Se.prototype=Object.create(v.prototype),Se.prototype.constructor=Se,Se.prototype.__class__=Se,Se.__cache__={},P.Status=Se,Se.prototype.code=Se.prototype.code=function(){return hn(this.ptr)},Se.prototype.ok=Se.prototype.ok=function(){return!!nn(this.ptr)},Se.prototype.error_msg=Se.prototype.error_msg=function(){return u(An(this.ptr))},Se.prototype.__destroy__=Se.prototype.__destroy__=function(){pn(this.ptr)},Oe.prototype=Object.create(v.prototype),Oe.prototype.constructor=Oe,Oe.prototype.__class__=Oe,Oe.__cache__={},P.DracoFloat32Array=Oe,Oe.prototype.GetValue=Oe.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),Gt(q,U)},Oe.prototype.size=Oe.prototype.size=function(){return on(this.ptr)},Oe.prototype.__destroy__=Oe.prototype.__destroy__=function(){lr(this.ptr)},We.prototype=Object.create(v.prototype),We.prototype.constructor=We,We.prototype.__class__=We,We.__cache__={},P.DracoInt8Array=We,We.prototype.GetValue=We.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),Tn(q,U)},We.prototype.size=We.prototype.size=function(){return qr(this.ptr)},We.prototype.__destroy__=We.prototype.__destroy__=function(){xr(this.ptr)},j.prototype=Object.create(v.prototype),j.prototype.constructor=j,j.prototype.__class__=j,j.__cache__={},P.DracoUInt8Array=j,j.prototype.GetValue=j.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),oi(q,U)},j.prototype.size=j.prototype.size=function(){return ti(this.ptr)},j.prototype.__destroy__=j.prototype.__destroy__=function(){Mi(this.ptr)},_t.prototype=Object.create(v.prototype),_t.prototype.constructor=_t,_t.prototype.__class__=_t,_t.__cache__={},P.DracoInt16Array=_t,_t.prototype.GetValue=_t.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),Di(q,U)},_t.prototype.size=_t.prototype.size=function(){return Ri(this.ptr)},_t.prototype.__destroy__=_t.prototype.__destroy__=function(){Ii(this.ptr)},Qe.prototype=Object.create(v.prototype),Qe.prototype.constructor=Qe,Qe.prototype.__class__=Qe,Qe.__cache__={},P.DracoUInt16Array=Qe,Qe.prototype.GetValue=Qe.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),fi(q,U)},Qe.prototype.size=Qe.prototype.size=function(){return di(this.ptr)},Qe.prototype.__destroy__=Qe.prototype.__destroy__=function(){mn(this.ptr)},Je.prototype=Object.create(v.prototype),Je.prototype.constructor=Je,Je.prototype.__class__=Je,Je.__cache__={},P.DracoInt32Array=Je,Je.prototype.GetValue=Je.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),At(q,U)},Je.prototype.size=Je.prototype.size=function(){return cn(this.ptr)},Je.prototype.__destroy__=Je.prototype.__destroy__=function(){Wt(this.ptr)},ze.prototype=Object.create(v.prototype),ze.prototype.constructor=ze,ze.prototype.__class__=ze,ze.__cache__={},P.DracoUInt32Array=ze,ze.prototype.GetValue=ze.prototype.GetValue=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),gt(q,U)},ze.prototype.size=ze.prototype.size=function(){return $n(this.ptr)},ze.prototype.__destroy__=ze.prototype.__destroy__=function(){vt(this.ptr)},ct.prototype=Object.create(v.prototype),ct.prototype.constructor=ct,ct.prototype.__class__=ct,ct.__cache__={},P.MetadataQuerier=ct,ct.prototype.HasEntry=ct.prototype.HasEntry=function(U,q){var ue=this.ptr;return De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),!!an(ue,U,q)},ct.prototype.GetIntEntry=ct.prototype.GetIntEntry=function(U,q){var ue=this.ptr;return De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),Wr(ue,U,q)},ct.prototype.GetIntEntryArray=ct.prototype.GetIntEntryArray=function(U,q,ue){var Re=this.ptr;De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),ue&&typeof ue=="object"&&(ue=ue.ptr),Vr(Re,U,q,ue)},ct.prototype.GetDoubleEntry=ct.prototype.GetDoubleEntry=function(U,q){var ue=this.ptr;return De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),On(ue,U,q)},ct.prototype.GetStringEntry=ct.prototype.GetStringEntry=function(U,q){var ue=this.ptr;return De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),u(Fr(ue,U,q))},ct.prototype.NumEntries=ct.prototype.NumEntries=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),si(q,U)},ct.prototype.GetEntryName=ct.prototype.GetEntryName=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),u(hi(ue,U,q))},ct.prototype.__destroy__=ct.prototype.__destroy__=function(){wi(this.ptr)},He.prototype=Object.create(v.prototype),He.prototype.constructor=He,He.prototype.__class__=He,He.__cache__={},P.Decoder=He,He.prototype.DecodeArrayToPointCloud=He.prototype.DecodeArrayToPointCloud=function(U,q,ue){var Re=this.ptr;return De.prepare(),typeof U=="object"&&(U=k(U)),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),I(Yr(Re,U,q,ue),Se)},He.prototype.DecodeArrayToMesh=He.prototype.DecodeArrayToMesh=function(U,q,ue){var Re=this.ptr;return De.prepare(),typeof U=="object"&&(U=k(U)),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),I(Rn(Re,U,q,ue),Se)},He.prototype.GetAttributeId=He.prototype.GetAttributeId=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),fr(ue,U,q)},He.prototype.GetAttributeIdByName=He.prototype.GetAttributeIdByName=function(U,q){var ue=this.ptr;return De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),$r(ue,U,q)},He.prototype.GetAttributeIdByMetadataEntry=He.prototype.GetAttributeIdByMetadataEntry=function(U,q,ue){var Re=this.ptr;return De.prepare(),U&&typeof U=="object"&&(U=U.ptr),q=q&&typeof q=="object"?q.ptr:R(q),ue=ue&&typeof ue=="object"?ue.ptr:R(ue),er(Re,U,q,ue)},He.prototype.GetAttribute=He.prototype.GetAttribute=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),I(st(ue,U,q),ne)},He.prototype.GetAttributeByUniqueId=He.prototype.GetAttributeByUniqueId=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),I($(ue,U,q),ne)},He.prototype.GetMetadata=He.prototype.GetMetadata=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),I(oe(q,U),Ee)},He.prototype.GetAttributeMetadata=He.prototype.GetAttributeMetadata=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),I(pe(ue,U,q),Ee)},He.prototype.GetFaceFromMesh=He.prototype.GetFaceFromMesh=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Me(Re,U,q,ue)},He.prototype.GetTriangleStripsFromMesh=He.prototype.GetTriangleStripsFromMesh=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),Ze(ue,U,q)},He.prototype.GetTrianglesUInt16Array=He.prototype.GetTrianglesUInt16Array=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!ft(Re,U,q,ue)},He.prototype.GetTrianglesUInt32Array=He.prototype.GetTrianglesUInt32Array=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Sn(Re,U,q,ue)},He.prototype.GetAttributeFloat=He.prototype.GetAttributeFloat=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!dr(Re,U,q,ue)},He.prototype.GetAttributeFloatForAllPoints=He.prototype.GetAttributeFloatForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Wn(Re,U,q,ue)},He.prototype.GetAttributeIntForAllPoints=He.prototype.GetAttributeIntForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!ni(Re,U,q,ue)},He.prototype.GetAttributeInt8ForAllPoints=He.prototype.GetAttributeInt8ForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!ur(Re,U,q,ue)},He.prototype.GetAttributeUInt8ForAllPoints=He.prototype.GetAttributeUInt8ForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Br(Re,U,q,ue)},He.prototype.GetAttributeInt16ForAllPoints=He.prototype.GetAttributeInt16ForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Ir(Re,U,q,ue)},He.prototype.GetAttributeUInt16ForAllPoints=He.prototype.GetAttributeUInt16ForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!Er(Re,U,q,ue)},He.prototype.GetAttributeInt32ForAllPoints=He.prototype.GetAttributeInt32ForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!hr(Re,U,q,ue)},He.prototype.GetAttributeUInt32ForAllPoints=He.prototype.GetAttributeUInt32ForAllPoints=function(U,q,ue){var Re=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),!!cr(Re,U,q,ue)},He.prototype.GetAttributeDataArrayForAllPoints=He.prototype.GetAttributeDataArrayForAllPoints=function(U,q,ue,Re,pt){var yt=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),ue&&typeof ue=="object"&&(ue=ue.ptr),Re&&typeof Re=="object"&&(Re=Re.ptr),pt&&typeof pt=="object"&&(pt=pt.ptr),!!Vt(yt,U,q,ue,Re,pt)},He.prototype.SkipAttributeTransform=He.prototype.SkipAttributeTransform=function(U){var q=this.ptr;U&&typeof U=="object"&&(U=U.ptr),ln(q,U)},He.prototype.GetEncodedGeometryType_Deprecated=He.prototype.GetEncodedGeometryType_Deprecated=function(U){var q=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),Nn(q,U)},He.prototype.DecodeBufferToPointCloud=He.prototype.DecodeBufferToPointCloud=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),I(gn(ue,U,q),Se)},He.prototype.DecodeBufferToMesh=He.prototype.DecodeBufferToMesh=function(U,q){var ue=this.ptr;return U&&typeof U=="object"&&(U=U.ptr),q&&typeof q=="object"&&(q=q.ptr),I(Ft(ue,U,q),Se)},He.prototype.__destroy__=He.prototype.__destroy__=function(){Jn(this.ptr)},function(){function U(){P.ATTRIBUTE_INVALID_TRANSFORM=Ar(),P.ATTRIBUTE_NO_TRANSFORM=xn(),P.ATTRIBUTE_QUANTIZATION_TRANSFORM=qn(),P.ATTRIBUTE_OCTAHEDRON_TRANSFORM=nr(),P.INVALID=Mt(),P.POSITION=Vn(),P.NORMAL=yn(),P.COLOR=In(),P.TEX_COORD=Un(),P.GENERIC=ir(),P.INVALID_GEOMETRY_TYPE=Mr(),P.POINT_CLOUD=fn(),P.TRIANGULAR_MESH=Xn(),P.DT_INVALID=Gn(),P.DT_INT8=Lt(),P.DT_UINT8=or(),P.DT_INT16=Or(),P.DT_UINT16=bn(),P.DT_INT32=Tr(),P.DT_UINT32=jn(),P.DT_INT64=Nr(),P.DT_UINT64=pi(),P.DT_FLOAT32=Ur(),P.DT_FLOAT64=Dr(),P.DT_BOOL=ai(),P.DT_TYPES_COUNT=Oi(),P.OK=ui(),P.DRACO_ERROR=Pi(),P.IO_ERROR=Ci(),P.INVALID_PARAMETER=Ni(),P.UNSUPPORTED_VERSION=Si(),P.UNKNOWN_VERSION=b()}zt?U():Zt.unshift(U)}(),typeof P.onModuleParsed=="function"&&P.onModuleParsed(),P.Decoder.prototype.GetEncodedGeometryType=function(U){if(U.__class__&&U.__class__===P.DecoderBuffer)return P.Decoder.prototype.GetEncodedGeometryType_Deprecated(U);if(8>U.byteLength)return P.INVALID_GEOMETRY_TYPE;switch(U[7]){case 0:return P.POINT_CLOUD;case 1:return P.TRIANGULAR_MESH;default:return P.INVALID_GEOMETRY_TYPE}},i.ready}}();o.exports=n})(Iv);var Pv=sd,Fv=ad,ng={createEncoderModule:Pv,createDecoderModule:Fv};const fh=Ou(Gy);var Lv=function(){var o="B9h79tEBBBENQ9gEUEU9gEUB9gBB9gVUUUUUEU9gDUUEU9gLUUUUEU9gVUUUUUB9gLUUUUB9gIUUUEU9gD99UE99I8ayDILEVLEVLOOOOORRVBWWBEdddLVE9wEIIVIEBEOWEUEC+g/KEKR/QIhO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwvBE8f9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwv9C9v919u9kBDe9tw79o9v9wT9fw9u9j9v9kw9WwvTw949Wwv79p9v9uBIy9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwvBL8e9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwv9C9v919u9kBV8a9tw79o9v9wT9fw9u9j9v9kw69u9kw949Wwv79p9v9uBOe9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jwBRA9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jw9C9v919u9kBWl9tw79o9v9wT9fw9u9j9v9kws9p2Twv9P9jTBdk9tw79o9v9wT9fw9u9j9v9kws9p2Twv9R919hTBQl9tw79o9v9wT9fw9u9j9v9kws9p2Twvt949wBKe9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9owBpA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9ow9TTv9p9wBSA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBZL79iv9rBhdWEBCEKDxcQ+1tyDBK/hKEyU8jJJJJBCJO9rGV8kJJJJBCBHODNALCEFAE0MBABCBrB+Q+KJJBC+gEv86BBAVCJDFCBCJDZ+TJJJB8aDNAItMBAVCJDFADALZmJJJB8aKABAEFHRABCEFHWAVALFCBCBCJDAL9rALCfE0eZ+TJJJB8aAVAVCJDFALZmJJJBHdCJ/ABAL9uHEDNDNALtMBAEC/wfBgGECJDAECJD6eHQCBHKINAKAI9PMEAdCJLFCBCJDZ+TJJJB8aAQAIAK9rAKAQFAI6eGXCSFGECL4CIFCD4HMADAKAL2FHpDNDNDNDNDNAEC9wgGStMBCBHZCEHhApHoAWHaXEKDNAXtMBCBHaCEHhApHcINAdAaFrBBHxAcHECBHOINAdCJLFAOFAErBBGqAx9rGxCETAxCkTCk91CR4786BBAEALFHEAqHxAOCEFGOAX9HMBKARAW9rAM6MIAWCBAMZ+TJJJBGEtMIAEAMFHWAcCEFHcAaCEFGaAL6HhAaAL9HMBXVKKARAW9rAM6MOAWCBAMZ+TJJJB8aCEHEINAWGxAMFHWALAEGOsMLDNARAW9rAM6MBAOCEFHEAWCBAMZ+TJJJB8aAxMEKKCBHWAOAL6MOXIKINDNAXtMBAdAZFrBBHxCBHEAoHOINAdCJLFAEFAOrBBGqAx9rGxCETAxCkTCk91CR4786BBAOALFHOAqHxAECEFGEAX9HMBKKARAa9rAM6MEARAaCBAMZ+TJJJBGlAMFGW9rCk6MDCBHkAdCJLFHcINAdCJLFAkFHyCWH8aCZHaCEHqINDNDNAqCE9HMBCUHOAyrBBMECBHODNINAOGECSsMEAECEFHOAcAEFCEFrBBtMBKKCUCBAECS6eHOXEKAqCETC/+fffEgHOCUAqTCU7CfEgHxCBHEINAOAxAcAEFrBB9NFHOAECEFGECZ9HMBKKAOAaAOAa6GEeHaAqA8aAEeH8aAqCETGqCW6MBKDNDNDNDNA8aCUFpDIEBKAlAkCO4FGEAErBBCDCIA8aCLseAkCI4COgTv86BBA8aCW9HMEAWAy8pBB83BBAWCWFAyCWF8pBB83BBAWCZFHWXDKAlAkCO4FGEAErBBCEAkCI4COgTv86BBKDNCWA8a9tGeMBINAWCB86BBAWCEFHWXBKKCUA8aTCU7HqCBH3AcH5INA5HEAeHxCBHOINAErBBGaAqAaAqCfEgGy6eAOCfEgA8aTvHOAECEFHEAxCUFGxMBKAWAO86BBA5AeFH5AWCEFHWA3AeFG3CZ6MBKCBHEINDNAcAEFrBBGOAy6MBAWAO86BBAWCEFHWKAECEFGECZ9HMBKKDNAkCZFGkAS9PMBAcCZFHcARAW9rCl0MEKKAkAS6MEAWtMEAoCEFHoAZCEFGZAL6HhAWHaAZALsMIXBKKCBHWAhCEgtMEXLKCBHWAhCEgMIKAdApAXCUFAL2FALZmJJJB8aAXAKFHKAWMBKCBHOXDKCBHOARAW9rCAALALCA6e6MEDNALC8f0MBAWCBCAAL9rGEZ+TJJJBAEFHWKAWAdCJDFALZmJJJBALFAB9rHOXEKCBHOKAVCJOF8kJJJJBAOK9HEEUAECAAECA0eABCJ/ABAE9uC/wfBgGDCJDADCJD6eGDFCUFAD9uAE2ADCL4CIFCD4ADv2FCEFKMBCBABbD+Q+KJJBK/YSE3U8jJJJJBC/AE9rGL8kJJJJBCBHVDNAICI9uGOChFAE0MBABCBYDn+KJJBGVC/gEv86BBALC/ABFCfECJEZ+TJJJB8aALCuFGR9CU83IBALC8wFGW9CU83IBALCYFGd9CU83IBALCAFGQ9CU83IBALCkFGK9CU83IBALCZFGX9CU83IBAL9CU83IWAL9CU83IBABAEFC9wFHMABCEFGpAOFHEDNAItMBCMCSAVCB9KGSeHZAVCE9IHhCBHoCBHaCBHcCBHxCBHqINDNAEAM9NMBCBHVXIKAqCUFHVADAcCDTFGOYDBHlAOCWFYDBHkAOCLFYDBHyCBH8aDNDNINALC/ABFAVCSgCITFGOYDLHeDNDNDNAOYDBGOAl9HMBAeAysMEKDNAOAy9HMBAeAk9HMBA8aCEFH8aXEKAOAk9HMEAeAl9HMEA8aCDFH8aKA8aC870MDAxCUFHVADA8aCIgCX2GOC+Y1JJBFYDBAcFCDTFYDBHeADAOCn1JJBFYDBAcFCDTFYDBHkADAOC+Q1JJBFYDBAcFCDTFYDBHlCBHODNINDNALAVCSgCDTFYDBAe9HMBAOHyXDKCUHyAVCUFHVAOCEFGOCZ9HMBKKAyCB9KAyAZ9IgGVCU7AeAosGOgH3DNDNDNDNDNAyCBCSAOeAVeGVCS9HMBAhMBAeAeAaAeCEFAasGVeGaCEFsMECMCSAVeHVKApAVA8aCDTC/wEgv86BBAVCS9HMEAeAa9rGVCETAVC8f917HVINAEAVCfB0CRTAVCfBgv86BBAECEFHEAVCJE6HOAVCR4HVAOtMBKAeHaXDKCpHVApA8aCDTCpv86BBAeHaKAVtMBAVAZ9IMEKALAxCDTFAebDBAxCEFCSgHxKAoA3FHoALC/ABFAqCITFGVAkbDLAVAebDBALC/ABFAqCEFCSgGVCITFGOAebDLAOAlbDBAVCEFHOXIKAVCUFHVA8aCLFG8aC/AB9HMBKKDNADCEAkAosCETAyAoseCX2GVC+Q1JJBFYDBAcFCDTFYDBGltADAVCn1JJBFYDBAcFCDTFYDBG8aCEsgADAVC+Y1JJBFYDBAcFCDTFYDBGyCDsgAoCB9HgASgG5CE9HMBAR9CU83IBAW9CU83IBAd9CU83IBAQ9CU83IBAK9CU83IBAX9CU83IBAL9CU83IWAL9CU83IBCBHoKCBHeAxCUFGVHODNINDNALAOCSgCDTFYDBA8a9HMBAeHkXDKCUHkAOCUFHOAeCEFGeCZ9HMBKKCBHODNINDNALAVCSgCDTFYDBAy9HMBAOHeXDKCUHeAVCUFHVAOCEFGOCZ9HMBKKAoAlAosG8eFH3DNDNAkCM0MBAkCEFHkXEKCBCSA8aA3sGVeHkA3AVFH3KDNDNAeCM0MBAeCEFHeXEKCBCSAyA3sGVeHeA3AVFH3KC9+CUA8eeH8fAeAkCLTvHOCBHVDNDNDNINAVCJ1JJBFrBBAOCfEgsMEAVCEFGVCZ9HMBXDKKAlAo9HAVCM0vA5vMBApAVC/wEv86BBXEKApA8f86BBAEAO86BBAECEFHEKDNA8eMBAlAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKAlHaKDNAkCS9HMBA8aAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKA8aHaKDNAeCS9HMBAyAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKAyHaKALAxCDTFAlbDBAxCEFCSgHVDNDNAkpZBEEEEEEEEEEEEEEBEKALAVCDTFA8abDBAxCDFCSgHVKDNDNAepZBEEEEEEEEEEEEEEBEKALAVCDTFAybDBAVCEFCSgHVKALC/ABFAqCITFGOAlbDLAOA8abDBALC/ABFAqCEFCSgCITFGOA8abDLAOAybDBALC/ABFAqCDFCSgCITFGOAybDLAOAlbDBAqCIFHOAVHxA3HoKApCEFHpAOCSgHqAcCIFGcAI6MBKKCBHVAEAM0MBCBHVINAEAVFAVCJ1JJBFrBB86BBAVCEFGVCZ9HMBKAEAB9rAVFHVKALC/AEF8kJJJJBAVKzEEUCBHDDNINADCEFGDC8f0MECEADTAE6MBKKADCRFCfEgCR9uCI2CDFABCI9u2ChFKMBCBABbDn+KJJBK+cDEWU8jJJJJBCZ9rHLCBHVDNAICVFAE0MBCBHOABCBrBn+KJJBC/QEv86BBAL9CB83IWABCEFHRABAEFC98FHWDNAItMBCBHdINDNARAW6MBCBSKADAdCDTFYDBGQALCWFAOAQALCWFAOCDTFYDB9rGEAEC8f91GEFAE7C507GOCDTFGKYDB9rGEC8e91C9+gAECDT7AOvHEINARAECfB0GVCRTAECfBgv86BBAECR4HEARCEFHRAVMBKAKAQbDBAdCEFGdAI9HMBKKCBHVARAW0MBARCBbBBARAB9rCLFHVKAVKbEEUCBHDDNINADCEFGDC8f0MECEADTAE6MBKKADCWFCfEgCR9uAB2CVFK+DVLI99DUI99LUDNAEtMBCUADCETCUFTCU7+yHVDNDNCUAICUFTCU7+yGOjBBBzmGR+LjBBB9P9dtMBAR+oHWXEKCJJJJ94HWKCBHICBHdINALCLFiDBGRjBBBBjBBJzALiDBGQ+LAR+LmALCWFiDBGK+LmGR+VARjBBBB9beGRnHXAQARnHRALCXFiDBHQDNDNAKjBBBB9gtMBAXHKXEKjBBJzAR+L+TGKAK+MAXjBBBB9geHKjBBJzAX+L+TGXAX+MARjBBBB9geHRKDNDNAQjBBJ+/AQjBBJ+/9geGXjBBJzAXjBBJz9feAVnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHMXEKCJJJJ94HMKDNDNAKjBBJ+/AKjBBJ+/9geGQjBBJzAQjBBJz9feAOnjBBBzjBBB+/AKjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHpXEKCJJJJ94HpKDNDNARjBBJ+/ARjBBJ+/9geGQjBBJzAQjBBJz9feAOnjBBBzjBBB+/ARjBBBB9gemGR+LjBBB9P9dtMBAR+oHSXEKCJJJJ94HSKDNDNADCL9HMBABAdFGZAS86BBAZCIFAM86BBAZCDFAW86BBAZCEFAp86BBXEKABAIFGZAS87EBAZCOFAM87EBAZCLFAW87EBAZCDFAp87EBKALCZFHLAICWFHIAdCLFHdAECUFGEMBKKK/KLLD99EUD99EUDNAEtMBDNDNCUAICUFTCU7+yGVjBBBzmGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKAIC/8fIgHRINABCOFCICDALCLFiDB+LALiDB+L9eGIALCWFiDB+LALAICDTFiDB+L9eeGIALCXFiDB+LALAICDTFiDB+L9eeGIARv87EBDNDNALAICEFCIgCDTFiDBj/zL+1znjBBJ+/jBBJzALAICDTFiDBjBBBB9deGOnGWjBBJ+/AWjBBJ+/9geGdjBBJzAdjBBJz9feAVnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHQXEKCJJJJ94HQKABAQ87EBDNDNAOALAICDFCIgCDTFiDBj/zL+1znnGWjBBJ+/AWjBBJ+/9geGdjBBJzAdjBBJz9feAVnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHQXEKCJJJJ94HQKABCDFAQ87EBDNDNAOALAICUFCIgCDTFiDBj/zL+1znnGOjBBJ+/AOjBBJ+/9geGWjBBJzAWjBBJz9feAVnjBBBzjBBB+/AOjBBBB9gemGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKABCLFAI87EBABCWFHBALCZFHLAECUFGEMBKKK+7DDWUE998jJJJJBCZ9rGV8kJJJJBDNAEtMBADCL6MBCEAI9rHOADCD4GDCEADCE0eHRADCDTHWCBHdINC+cUHDALHIARHQINAIiDBAVCXFZ+XJJJB8aAVYDXGKADADAK9IeHDAICLFHIAQCUFGQMBKAOADFGICkTHKCBHDCBAI9rHXARHIINDNDNALADFiDBGMAXZ+WJJJBjBBBzjBBB+/AMjBBBB9gemGM+LjBBB9P9dtMBAM+oHQXEKCJJJJ94HQKABADFAQCfffRgAKvbDBADCLFHDAICUFGIMBKABAWFHBALAWFHLAdCEFGdAE9HMBKKAVCZF8kJJJJBK/tKDcUI998jJJJJBC+QD9rGV8kJJJJBAVC+oEFCBC/kBZ+TJJJB8aCBHODNADtMBCBHOAItMBDNABAE9HMBAVCUADCDTGOADCffffI0eCBYD1+KJJBhJJJJBBGEbD+oEAVCEbD1DAEABAOZmJJJB8aKAVC+YEFCWFCBbDBAV9CB83I+YEAVC+YEFAEADAIAVC+oEFZ+NJJJBCUAICDTGRAICffffI0eGWCBYD1+KJJBhJJJJBBHOAVC+oEFAVYD1DGdCDTFAObDBAVAdCEFGQbD1DAOAVYD+YEGKARZmJJJBHXAVC+oEFAQCDTFADCI9uGMCBYD1+KJJBhJJJJBBGObDBAVAdCDFGRbD1DAOCBAMZ+TJJJBHpAVC+oEFARCDTFAWCBYD1+KJJBhJJJJBBGSbDBAVAdCIFGQbD1DAXHOASHRINARALiDBALAOYDBGWCWAWCW6eCDTFC/EBFiDBmuDBAOCLFHOARCLFHRAICUFGIMBKAVC+oEFAQCDTFCUAMCDTADCffff970eCBYD1+KJJBhJJJJBBGQbDBAVAdCLFbD1DDNADCI6MBAMCEAMCE0eHIAEHOAQHRINARASAOYDBCDTFiDBASAOCLFYDBCDTFiDBmASAOCWFYDBCDTFiDBmuDBAOCXFHOARCLFHRAICUFGIMBKKAVC/MBFHZAVYD+cEHhAVYD+gEHoAVHOCBHWCBHRCBHaCEHcINAOHxCIHqAEARCI2GlCDTFGOCWFYDBHkAOYDBHDABAaCX2FGICLFAOCLFYDBGdbDBAIADbDBAICWFAkbDBApARFCE86BBAZAkbDWAZAdbDLAZADbDBAQARCDTFCBbDBDNAWtMBCIHqAxHIINDNAIYDBGOADsMBAOAdsMBAOAksMBAZAqCDTFAObDBAqCEFHqKAICLFHIAWCUFGWMBKKAaCEFHaAXADCDTFGOAOYDBCUFbDBAXAdCDTFGOAOYDBCUFbDBAXAkCDTFGOAOYDBCUFbDBCBHWINAoAhAEAWAlFCDTFYDBCDTGIFYDBCDTFGkHOAKAIFGdYDBGDHIDNADtMBDNINAOYDBARsMEAOCLFHOAICUFGItMDXBKKAOADCDTAkFC98FYDBbDBAdAdYDBCUFbDBKAWCEFGWCI9HMBKDNDNDNAqtMBCUHRjBBBBHyCBHOINASAZAOCDTFYDBCDTGIFGWiDBH8aAWALCBAOCEFGdAOCS0eCDTFiDBALAXAIFYDBGOCWAOCW6eCDTFC/EBFiDBmGeuDBDNAKAIFYDBGWtMBAeA8a+THeAoAhAIFYDBCDTFHOAWCDTHIINAQAOYDBGWCDTFGDAeADiDBmG8auDBA8aAyAyA8a9dGDeHyAWARADeHRAOCLFHOAIC98FGIMBKKAdHOAdAq9HMBKARCU9HMEKAcAM9PMEINDNApAcFrBBMBAcHRXDKAMAcCEFGc9HMBXDKKAqCZAqCZ6eHWAZHOAxHZARCU9HMEKKAVYD1DHOKAOCDTAVC+oEFFC98FHRDNINAOtMEARYDBCBYD+E+KJJBh+BJJJBBARC98FHRAOCUFHOXBKKAVC+QDF8kJJJJBK/uLEVUCUAICDTGVAICffffI0eGOCBYD1+KJJBhJJJJBBHRALALYD9gGWCDTFARbDBALAWCEFbD9gABARbDBAOCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDLCUADCDTADCffffI0eCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDWABYDBCBAVZ+TJJJB8aADCI9uHWDNADtMBABYDBHOAEHLADHRINAOALYDBCDTFGVAVYDBCEFbDBALCLFHLARCUFGRMBKKDNAItMBABYDBHLABYDLHRCBHVAIHOINARAVbDBARCLFHRALYDBAVFHVALCLFHLAOCUFGOMBKKDNADCI6MBAWCEAWCE0eHdABYDLHRABYDWHVCBHLINAECWFYDBHOAECLFYDBHDARAEYDBCDTFGWAWYDBGWCEFbDBAVAWCDTFALbDBARADCDTFGDADYDBGDCEFbDBAVADCDTFALbDBARAOCDTFGOAOYDBGOCEFbDBAVAOCDTFALbDBAECXFHEAdALCEFGL9HMBKKDNAItMBABYDLHEABYDBHLINAEAEYDBALYDB9rbDBALCLFHLAECLFHEAICUFGIMBKKKqBABAEADAIC+01JJBZ+MJJJBKqBABAEADAIC+c+JJJBZ+MJJJBK9dEEUABCfEAICDTZ+TJJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD+M+KJJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD+M+KJJBFGDbD+M+KJJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKKXBABAEZ+YJJJBK+BEEIUDNAB+8GDCl4GICfEgGLCfEsMBDNALMBDNABjBBBB9cMBAECBbDBABSKABjBBJ9fnAEZ+XJJJBHBAEAEYDBCNFbDBABSKAEAICfEgC+CUFbDBADCfff+D94gCJJJ/4Iv++HBKABK+gEBDNDNAECJE9IMBABjBBBUnHBDNAECfE9PMBAEC+BUFHEXDKABjBBBUnHBAECPDAECPD6eC+C9+FHEXEKAEC+BU9KMBABjBBJXnHBDNAEC+b9+9NMBAEC/mBFHEXEKABjBBJXnHBAEC+299AEC+2990eC/MEFHEKABAEClTCJJJ/8IF++nKK+eDDBCJWK+EDB4+H9W9n94+p+Gw+J9o+YE9pBBBBBBEBBBDBBBEBBBDBBBBBBBDBBBBBBBEBBBBBBB+L29Hz/69+9Kz/n/76z/RG97z/Z/O9Xz8j/b85z/+/U9Yz/B/K9hz+2/z9dz9E+L9Mz59a8kz+R/t3z+a+Zyz79ohz/J4++8++y+d9v8+BBBB9S+49+z8r+Hbz9m9m/m8+l/Z/O8+/8+pg89Q/X+j878r+Hq8++m+b/E87BBBBBBJzBBJzBBJz+e/v/n8++y+dSz9I/h/68+XD/r8+/H0838+/w+nOzBBBB+wv9o8+UF888+9I/h/68+9C9g/l89/N/M9M89/d8kO8+BBBBF+8Tz9M836zs+2azl/Zpzz818ez9E+LXz/u98f8+819e/68+BC+EQKXEBBBDBBBAwBB",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var t,n=WebAssembly.instantiate(r(o),{}).then(function(d){t=d.instance,t.exports.__wasm_call_ctors(),t.exports.meshopt_encodeVertexVersion(0),t.exports.meshopt_encodeIndexVersion(1)});function r(d){for(var _=new Uint8Array(d.length),A=0;A<d.length;++A){var E=d.charCodeAt(A);_[A]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}for(var v=0,A=0;A<d.length;++A)_[v++]=_[A]<60?e[_[A]]:(_[A]-60)*64+_[++A];return _.buffer.slice(0,v)}function i(d){if(!d)throw new Error("Assertion failed")}function s(d){return new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}function a(d,_,A){var E=t.exports.sbrk,v=E(d.length*4),T=E(_*4),I=new Uint8Array(t.exports.memory.buffer),R=s(d);I.set(R,v),A&&A(v,v,d.length,_);var k=t.exports.meshopt_optimizeVertexFetchRemap(T,v,d.length,_);I=new Uint8Array(t.exports.memory.buffer);var K=new Uint32Array(_);new Uint8Array(K.buffer).set(I.subarray(T,T+_*4)),R.set(I.subarray(v,v+d.length*4)),E(v-E(0));for(var ee=0;ee<d.length;++ee)d[ee]=K[d[ee]];return[K,k]}function u(d,_,A,E,v){var T=t.exports.sbrk,I=T(_),R=T(E*v),k=new Uint8Array(t.exports.memory.buffer);k.set(s(A),R);var K=d(I,_,R,E,v),ee=new Uint8Array(K);return ee.set(k.subarray(I,I+K)),T(I-T(0)),ee}function f(d){for(var _=0,A=0;A<d.length;++A){var E=d[A];_=_<E?E:_}return _}function l(d,_){if(i(_==2||_==4),_==4)return new Uint32Array(d.buffer,d.byteOffset,d.byteLength/4);var A=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/2);return new Uint32Array(A)}function p(d,_,A,E,v,T){var I=t.exports.sbrk,R=I(A*E),k=I(A*T),K=new Uint8Array(t.exports.memory.buffer);K.set(s(_),k),d(R,A,E,v,k);var ee=new Uint8Array(A*E);return ee.set(K.subarray(R,R+A*E)),I(R-I(0)),ee}return{ready:n,supported:!0,reorderMesh:function(d,_,A){var E=_?A?t.exports.meshopt_optimizeVertexCacheStrip:t.exports.meshopt_optimizeVertexCache:void 0;return a(d,f(d)+1,E)},encodeVertexBuffer:function(d,_,A){i(A>0&&A<=256),i(A%4==0);var E=t.exports.meshopt_encodeVertexBufferBound(_,A);return u(t.exports.meshopt_encodeVertexBuffer,E,d,_,A)},encodeIndexBuffer:function(d,_,A){i(A==2||A==4),i(_%3==0);var E=l(d,A),v=t.exports.meshopt_encodeIndexBufferBound(_,f(E)+1);return u(t.exports.meshopt_encodeIndexBuffer,v,E,_,4)},encodeIndexSequence:function(d,_,A){i(A==2||A==4);var E=l(d,A),v=t.exports.meshopt_encodeIndexSequenceBound(_,f(E)+1);return u(t.exports.meshopt_encodeIndexSequence,v,E,_,4)},encodeGltfBuffer:function(d,_,A,E){var v={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return i(v[E]),v[E](d,_,A)},encodeFilterOct:function(d,_,A,E){return i(A==4||A==8),i(E>=1&&E<=16),p(t.exports.meshopt_encodeFilterOct,d,_,A,E,16)},encodeFilterQuat:function(d,_,A,E){return i(A==8),i(E>=4&&E<=16),p(t.exports.meshopt_encodeFilterQuat,d,_,A,E,16)},encodeFilterExp:function(d,_,A,E){return i(A>0&&A%4==0),i(E>=1&&E<=24),p(t.exports.meshopt_encodeFilterExp,d,_,A,E,A)}}}(),Ov=function(){var o="B9h79tEBBBE8fV9gBB9gVUUUUUEU9gIUUUB9gEUEU9gIUUUEUIKQBEEEDDDILLVIEBEOWEUEC+Q/IEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBEy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBDe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBIl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBLk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBOL79iv9rBRQ+p8yQDBK/3SEZU8jJJJJBCJ/EB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rADZ1JJJBHWCJ/ABAD9uHOAICEFHLDNADtMBAOC/wfBgGOCJDAOCJD6eHdCBHQINAQAE9PMEAdAEAQ9rAQAdFAE6eGKCSFGOCL4CIFCD4HXDNDNDNDNAOC9wgGMtMBCBHpCEHSAWCJDFHZALHhINARAh9rAX6MIDNARAhAXFGL9rCk6MBCZHOINAWCJ/CBFAOGIFGOC9wFHoDNDNDNDNDNAhAIC9wFGaCO4FrBBAaCI4COg4CIgpLBEDIBKAo9CB83IBAoCWF9CB83IBXIKAoALrBLALrBBGaCO4GcAcCIsGce86BBAOCgFALCLFAcFGorBBAaCL4CIgGcAcCIsGce86BBAOCvFAoAcFGorBBAaCD4CIgGcAcCIsGce86BBAOC7FAoAcFGorBBAaCIgGaAaCIsGae86BBAOCTFAoAaFGarBBALrBEGoCO4GcAcCIsGce86BBAOC91FAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOC4FAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOC93FAaAcFGarBBAoCIgGoAoCIsGoe86BBAOC94FAaAoFGarBBALrBDGoCO4GcAcCIsGce86BBAOC95FAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOC96FAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOC97FAaAcFGarBBAoCIgGoAoCIsGoe86BBAOC98FAaAoFGorBBALrBIGLCO4GaAaCIsGae86BBAOC99FAoAaFGorBBALCL4CIgGaAaCIsGae86BBAOC9+FAoAaFGorBBALCD4CIgGaAaCIsGae86BBAOCUFAoAaFGOrBBALCIgGLALCIsGLe86BBAOALFHLXDKAoALrBWALrBBGaCL4GcAcCSsGce86BBAOCgFALCWFAcFGorBBAaCSgGaAaCSsGae86BBAOCvFAoAaFGorBBALrBEGaCL4GcAcCSsGce86BBAOC7FAoAcFGorBBAaCSgGaAaCSsGae86BBAOCTFAoAaFGorBBALrBDGaCL4GcAcCSsGce86BBAOC91FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC4FAoAaFGorBBALrBIGaCL4GcAcCSsGce86BBAOC93FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC94FAoAaFGorBBALrBLGaCL4GcAcCSsGce86BBAOC95FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC96FAoAaFGorBBALrBVGaCL4GcAcCSsGce86BBAOC97FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC98FAoAaFGorBBALrBOGaCL4GcAcCSsGce86BBAOC99FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC9+FAoAaFGorBBALrBRGLCL4GaAaCSsGae86BBAOCUFAoAaFGOrBBALCSgGLALCSsGLe86BBAOALFHLXEKAoAL8pBB83BBAoCWFALCWF8pBB83BBALCZFHLKDNAIAM9PMBAICZFHOARAL9rCl0MEKKAIAM6MIALtMIDNAKtMBAWApFrBBHoCBHOAZHIINAIAWCJ/CBFAOFrBBGaCE4CBAaCEg9r7AoFGo86BBAIADFHIAOCEFGOAK9HMBKKAZCEFHZApCEFGpAD6HSALHhApAD9HMEXVKKCBHLASCEgMDXIKALAXAD2FHcDNAKtMBCBHhCEHSAWCJDFHMINARAL9rAX6MIALtMDALAXFHLAWAhFrBBHoCBHOAMHIINAIAWCJ/CBFAOFrBBGaCE4CBAaCEg9r7AoFGo86BBAIADFHIAOCEFGOAK9HMBKAMCEFHMAhCEFGhAD6HSAhAD9HMBKAcHLXIKCBHOCEHSINARAL9rAX6MDALtMEALAXFHLAOCEFGOAD6HSADAO9HMBKAcHLXDKCBHLASCEgtMEKC9+HOXIKABAQAD2FAWCJDFAKAD2Z1JJJB8aAWAWCJDFAKCUFAD2FADZ1JJJB8aAKAQFHQALMBKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/EBF8kJJJJBAOK/YZEhU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJEZ+JJJJB8aAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHODNAEtMBCMCSAdCEseHKCBHXCBHMCBHdCBHICBHLINDNAOAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFALARCL4CU7FCSgCITFGpYDLHSApYDBHZDNARCSgGpAK9PMBAVAIARCU7FCSgCDTFYDBAXApeHRAptHpDNDNADCD9HMBABAdCETFGhAZ87EBAhCDFAS87EBAhCLFAR87EBXEKABAdCDTFGhAZbDBAhCLFASbDBAhCWFARbDBKAXApFHXAVC/ABFALCITFGhARbDBAhASbDLAVAICDTFARbDBAVC/ABFALCEFCSgGLCITFGhAZbDBAhARbDLAIApFHIALCEFHLXDKDNDNApCSsMBAMApFApC987FCEFHMXEKAOCEFHRAO8sBBGpCfEgHhDNDNApCU9MMBARHOXEKAOCVFHOAhCfBgHhCRHpDNINAR8sBBGoCfBgApTAhvHhAoCU9KMEARCEFHRApCRFGpC8j9HMBXDKKARCEFHOKAhCE4CBAhCEg9r7AMFHMKDNDNADCD9HMBABAdCETFGRAZ87EBARCDFAS87EBARCLFAM87EBXEKABAdCDTFGRAZbDBARCLFASbDBARCWFAMbDBKAVC/ABFALCITFGRAMbDBARASbDLAVAICDTFAMbDBAVC/ABFALCEFCSgGLCITFGRAZbDBARAMbDLAICEFHIALCEFHLXEKDNARCPE0MBAXCEFGoAVAIAQARCSgFrBBGpCL49rCSgCDTFYDBApCZ6GheHRAVAIAp9rCSgCDTFYDBAoAhFGSApCSgGoeHpAotHoDNDNADCD9HMBABAdCETFGZAX87EBAZCDFAR87EBAZCLFAp87EBXEKABAdCDTFGZAXbDBAZCLFARbDBAZCWFApbDBKAVAICDTFAXbDBAVC/ABFALCITFGZARbDBAZAXbDLAVAICEFGICSgCDTFARbDBAVC/ABFALCEFCSgCITFGZApbDBAZARbDLAVAIAhFCSgGICDTFApbDBAVC/ABFALCDFCSgGLCITFGRAXbDBARApbDLALCEFHLAIAoFHIASAoFHXXEKAXCBAOrBBGZeGaARC/+EsGRFHSAZCSgHcAZCL4HxDNDNAZCS0MBASCEFHoXEKASHoAVAIAx9rCSgCDTFYDBHSKDNDNAcMBAoCEFHXXEKAoHXAVAIAZ9rCSgCDTFYDBHoKDNDNARtMBAOCEFHRXEKAOCDFHRAO8sBEGhCfEgHpDNAhCU9KMBAOCOFHaApCfBgHpCRHODNINAR8sBBGhCfBgAOTApvHpAhCU9KMEARCEFHRAOCRFGOC8j9HMBKAaHRXEKARCEFHRKApCE4CBApCEg9r7AMFGMHaKDNDNAxCSsMBARHpXEKARCEFHpAR8sBBGOCfEgHhDNAOCU9KMBARCVFHSAhCfBgHhCRHODNINAp8sBBGRCfBgAOTAhvHhARCU9KMEApCEFHpAOCRFGOC8j9HMBKASHpXEKApCEFHpKAhCE4CBAhCEg9r7AMFGMHSKDNDNAcCSsMBApHOXEKApCEFHOAp8sBBGRCfEgHhDNARCU9KMBApCVFHoAhCfBgHhCRHRDNINAO8sBBGpCfBgARTAhvHhApCU9KMEAOCEFHOARCRFGRC8j9HMBKAoHOXEKAOCEFHOKAhCE4CBAhCEg9r7AMFGMHoKDNDNADCD9HMBABAdCETFGRAa87EBARCDFAS87EBARCLFAo87EBXEKABAdCDTFGRAabDBARCLFASbDBARCWFAobDBKAVC/ABFALCITFGRASbDBARAabDLAVAICDTFAabDBAVC/ABFALCEFCSgCITFGRAobDBARASbDLAVAICEFGICSgCDTFASbDBAVC/ABFALCDFCSgCITFGRAabDBARAobDLAVAIAZCZ6AxCSsvFGICSgCDTFAobDBAIActAcCSsvFHIALCIFHLKAWCEFHWALCSgHLAICSgHIAdCIFGdAE6MBKKCBC99AOAQseHOKAVC/AEF8kJJJJBAOK+LLEVU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHRAIALFC98FHWDNAEtMBDNADCDsMBCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCDTFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGLbDBAOALbDBAdCEFGdAE9HMBXDKKCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCETFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGL87EBAOALbDBAdCEFGdAE9HMBKKCBC99ARAWseHOKAOK+lVOEUE99DUD99EUD99DNDNADCL9HMBAEtMEINDNDNABCDFGD8sBB+yAB8sBBGI+yGL+L+TABCEFGV8sBBGO+yGR+L+TGWjBB/+9CAWAWnjBBBBAWAWjBBBB9gGdeGQ+MGKAQAICB9IeALmGWAWnAKAQAOCB9IeARmGQAQnmm+R+VGLnjBBBzjBBB+/AdemGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKADAI86BBDNDNAQALnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHDXEKCJJJJ94HDKAVAD86BBDNDNAWALnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD86BBABCLFHBAECUFGEMBXDKKAEtMBINDNDNABCLFGD8uEB+yAB8uEBGI+yGL+L+TABCDFGV8uEBGO+yGR+L+TGWjB/+fsAWAWnjBBBBAWAWjBBBB9gGdeGQ+MGKAQAICB9IeALmGWAWnAKAQAOCB9IeARmGQAQnmm+R+VGLnjBBBzjBBB+/AdemGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKADAI87EBDNDNAQALnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHDXEKCJJJJ94HDKAVAD87EBDNDNAWALnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD87EBABCWFHBAECUFGEMBKKK/SILIUI99IUE99DNAEtMBCBHIABHLINDNDNj/zL81zALCOF8uEBGVCIv+y+VGOAL8uEB+ynGRjB/+fsnjBBBzjBBB+/ARjBBBB9gemGW+LjBBB9P9dtMBAW+oHdXEKCJJJJ94HdKALCLF8uEBHQALCDF8uEBHKABAVCEFCIgAIvCETFAd87EBDNDNAOAK+ynGWjB/+fsnjBBBzjBBB+/AWjBBBB9gemGX+LjBBB9P9dtMBAX+oHKXEKCJJJJ94HKKABAVCDFCIgAIvCETFAK87EBDNDNAOAQ+ynGOjB/+fsnjBBBzjBBB+/AOjBBBB9gemGX+LjBBB9P9dtMBAX+oHQXEKCJJJJ94HQKABAVCUFCIgAIvCETFAQ87EBDNDNjBBJzARARn+TAWAWn+TAOAOn+TGRjBBBBARjBBBB9ge+RjB/+fsnjBBBzmGR+LjBBB9P9dtMBAR+oHQXEKCJJJJ94HQKABAVCIgAIvCETFAQ87EBALCWFHLAICLFHIAECUFGEMBKKK9MBDNADCD4AE2GEtMBINABABYDBGDCWTCW91+yADCE91CJJJ/8IFCJJJ98g++nuDBABCLFHBAECUFGEMBKKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABKKKEBCJWKLZ9kBB",e="B9h79tEBBBEkL9gBB9gVUUUUUEU9gIUUUB9gEUEUIKQBBEBEEDDDILVE9wEEEVIEBEOWEUEC+Q/aEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBDy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBLe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBOk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBRl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBWL79iv9rBdQ/T9TQLBZIK9+EVU8jJJJJBCZ9rHBCBHEINCBHDCBHIINABCWFADFAICJUAEAD4CEgGLe86BBAIALFHIADCEFGDCW9HMBKAEC+Q+YJJBFAI86BBAECITC+Q1JJBFAB8pIW83IBAECEFGECJD9HMBKK/H8jLhUD97EUO978jJJJJBCJ/KB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rAD/8QBBCJ/ABAD9uHOAICEFHLDNADtMBAOC/wfBgGOCJDAOCJD6eHWCBHdINAdAE9PMEAWAEAd9rAdAWFAE6eGQCSFGOC9wgGKCI2HXAKCETHMAOCL4CIFCD4HpABAdAD2FHSCBHZDNINCEHhALHoCBHaDNINARAo9rAp6MIAVCJ/CBFAaAK2FHcAoApFHLCBHIDNAKC/AB6MBARAL9rC/gB6MBCBHOINAcAOFHIDNDNDNDNDNAoAOCO4FrBBGxCIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLBXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLBALCZFHLKDNDNDNDNDNAxCD4CIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLZXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLZALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLZALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLZALCZFHLKDNDNDNDNDNAxCL4CIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLAXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLAALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLAALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLAALCZFHLKDNDNDNDNDNAxCO4pLBEDIBKAIPXBBBBBBBBBBBBBBBBPKL8wXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBAxC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKL8wALCLFAyPqBFAxC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBAxC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKL8wALCWFAyPqBFAxC+Q+YJJBFrBBFHLXEKAIALPBBBPKL8wALCZFHLKAOC/ABFHIAOCJEFAK0MEAIHOARAL9rC/fB0MBKKDNDNAIAK9PMBAICI4HOINARAL9rCk6MDAcAIFHxDNDNDNDNDNAoAICO4FrBBAOCOg4CIgpLBEDIBKAxPXBBBBBBBBBBBBBBBBPKLBXIKAxALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAxALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAxALPBBBPKLBALCZFHLKAOCDFHOAICZFGIAK6MBKKALtMBAaCI6HhALHoAaCEFGOHaAOCLsMDXEKKCBHLAhCEgMDKDNAKtMBAVCJDFAZFHIAVAZFPBDBHyCBHxINAIAVCJ/CBFAxFGOPBLBGlCEP9tAlPXEEEEEEEEEEEEEEEEGqP9OP9hP9RGlAOAKFPBLBG8aCEP9tA8aAqP9OP9hP9RG8aPMBZEhDoIaLcVxOqRlGeAOAMFPBLBG3CEP9tA3AqP9OP9hP9RG3AOAXFPBLBG5CEP9tA5AqP9OP9hP9RG5PMBZEhDoIaLcVxOqRlG8ePMBEZhDIoaLVcxORqlGqAqPMBEDIBEDIBEDIBEDIAyP9uGyP9aDBBAIADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAeA8ePMWdkyQK8aeXM35pS8e8fGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAlA8aPMWkdyQ8aKeX3M5p8eS8fGlA3A5PMWkdyQ8aKeX3M5p8eS8fG8aPMBEZhDIoaLVcxORqlGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAlA8aPMWdkyQK8aeXM35pS8e8fGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFHIAxCZFGxAK6MBKKAZCLFGZAD6MBKASAVCJDFAQAD2/8QBBAVAVCJDFAQCUFAD2FAD/8QBBAQAdFHdC9+HOALMEXIKKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/KBF8kJJJJBAOKWBZ+BJJJBK/UZEhU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJE/8KBAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHODNAEtMBCMCSAdCEseHKCBHXCBHMCBHdCBHICBHLINDNAOAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFALARCL4CU7FCSgCITFGpYDLHSApYDBHZDNARCSgGpAK9PMBAVAIARCU7FCSgCDTFYDBAXApeHRAptHpDNDNADCD9HMBABAdCETFGhAZ87EBAhCDFAS87EBAhCLFAR87EBXEKABAdCDTFGhAZbDBAhCLFASbDBAhCWFARbDBKAXApFHXAVC/ABFALCITFGhARbDBAhASbDLAVAICDTFARbDBAVC/ABFALCEFCSgGLCITFGhAZbDBAhARbDLAIApFHIALCEFHLXDKDNDNApCSsMBAMApFApC987FCEFHMXEKAOCEFHRAO8sBBGpCfEgHhDNDNApCU9MMBARHOXEKAOCVFHOAhCfBgHhCRHpDNINAR8sBBGoCfBgApTAhvHhAoCU9KMEARCEFHRApCRFGpC8j9HMBXDKKARCEFHOKAhCE4CBAhCEg9r7AMFHMKDNDNADCD9HMBABAdCETFGRAZ87EBARCDFAS87EBARCLFAM87EBXEKABAdCDTFGRAZbDBARCLFASbDBARCWFAMbDBKAVC/ABFALCITFGRAMbDBARASbDLAVAICDTFAMbDBAVC/ABFALCEFCSgGLCITFGRAZbDBARAMbDLAICEFHIALCEFHLXEKDNARCPE0MBAXCEFGoAVAIAQARCSgFrBBGpCL49rCSgCDTFYDBApCZ6GheHRAVAIAp9rCSgCDTFYDBAoAhFGSApCSgGoeHpAotHoDNDNADCD9HMBABAdCETFGZAX87EBAZCDFAR87EBAZCLFAp87EBXEKABAdCDTFGZAXbDBAZCLFARbDBAZCWFApbDBKAVAICDTFAXbDBAVC/ABFALCITFGZARbDBAZAXbDLAVAICEFGICSgCDTFARbDBAVC/ABFALCEFCSgCITFGZApbDBAZARbDLAVAIAhFCSgGICDTFApbDBAVC/ABFALCDFCSgGLCITFGRAXbDBARApbDLALCEFHLAIAoFHIASAoFHXXEKAXCBAOrBBGZeGaARC/+EsGRFHSAZCSgHcAZCL4HxDNDNAZCS0MBASCEFHoXEKASHoAVAIAx9rCSgCDTFYDBHSKDNDNAcMBAoCEFHXXEKAoHXAVAIAZ9rCSgCDTFYDBHoKDNDNARtMBAOCEFHRXEKAOCDFHRAO8sBEGhCfEgHpDNAhCU9KMBAOCOFHaApCfBgHpCRHODNINAR8sBBGhCfBgAOTApvHpAhCU9KMEARCEFHRAOCRFGOC8j9HMBKAaHRXEKARCEFHRKApCE4CBApCEg9r7AMFGMHaKDNDNAxCSsMBARHpXEKARCEFHpAR8sBBGOCfEgHhDNAOCU9KMBARCVFHSAhCfBgHhCRHODNINAp8sBBGRCfBgAOTAhvHhARCU9KMEApCEFHpAOCRFGOC8j9HMBKASHpXEKApCEFHpKAhCE4CBAhCEg9r7AMFGMHSKDNDNAcCSsMBApHOXEKApCEFHOAp8sBBGRCfEgHhDNARCU9KMBApCVFHoAhCfBgHhCRHRDNINAO8sBBGpCfBgARTAhvHhApCU9KMEAOCEFHOARCRFGRC8j9HMBKAoHOXEKAOCEFHOKAhCE4CBAhCEg9r7AMFGMHoKDNDNADCD9HMBABAdCETFGRAa87EBARCDFAS87EBARCLFAo87EBXEKABAdCDTFGRAabDBARCLFASbDBARCWFAobDBKAVC/ABFALCITFGRASbDBARAabDLAVAICDTFAabDBAVC/ABFALCEFCSgCITFGRAobDBARASbDLAVAICEFGICSgCDTFASbDBAVC/ABFALCDFCSgCITFGRAabDBARAobDLAVAIAZCZ6AxCSsvFGICSgCDTFAobDBAIActAcCSsvFHIALCIFHLKAWCEFHWALCSgHLAICSgHIAdCIFGdAE6MBKKCBC99AOAQseHOKAVC/AEF8kJJJJBAOK+LLEVU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHRAIALFC98FHWDNAEtMBDNADCDsMBCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCDTFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGLbDBAOALbDBAdCEFGdAE9HMBXDKKCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCETFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGL87EBAOALbDBAdCEFGdAE9HMBKKCBC99ARAWseHOKAOK+epLIUO97EUE978jJJJJBCA9rHIDNDNADCL9HMBDNAEC98gGLtMBCBHVABHDINADADPBBBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdPXBBBBBBBBBBBBBBBBP+2EGQARPXBBBJBBBJBBBJBBBJGKP9OP9RP/kEGRPXBB/+9CBB/+9CBB/+9CBB/+9CARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEPXBBN0BBN0BBN0BBN0GQP/kEPXfBBBfBBBfBBBfBBBP9OAOPXBBBfBBBfBBBfBBBfP9OP9QARAWP/mEAQP/kECWP+rEPXBfBBBfBBBfBBBfBBP9OP9QAdAWP/mEAQP/kECZP+rEPXBBfBBBfBBBfBBBfBP9OP9QPKBBADCZFHDAVCLFGVAL6MBKKALAE9PMEAIAECIgGVCDTGDvCBCZAD9r/8KBAIABALCDTFGLAD/8QBBDNAVtMBAIAIPBLBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdPXBBBBBBBBBBBBBBBBP+2EGQARPXBBBJBBBJBBBJBBBJGKP9OP9RP/kEGRPXBB/+9CBB/+9CBB/+9CBB/+9CARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEPXBBN0BBN0BBN0BBN0GQP/kEPXfBBBfBBBfBBBfBBBP9OAOPXBBBfBBBfBBBfBBBfP9OP9QARAWP/mEAQP/kECWP+rEPXBfBBBfBBBfBBBfBBP9OP9QAdAWP/mEAQP/kECZP+rEPXBBfBBBfBBBfBBBfBP9OP9QPKLBKALAIAD/8QBBSKDNAEC98gGXtMBCBHVABHDINADCZFGLALPBBBGOPXBBBBBBffBBBBBBffGKP9OADPBBBGdAOPMLVORXMpScxql358e8fPXfUBBfUBBfUBBfUBBP9OP/6EAdAOPMBEDIWdQKZhoaky8aeGOCZP+sEP/6EGRP/gEAOCZP+rECZP+sEP/6EGWP/gEP/kEP/lEGOPXB/+fsB/+fsB/+fsB/+fsAWAOPXBBBBBBBBBBBBBBBBP+2EGQAWPXBBBJBBBJBBBJBBBJGMP9OP9RP/kEGWAWP/mEAOAOP/mEARAQARAMP9OP9RP/kEGOAOP/mEP/kEP/kEP/jEP/nEGRP/mEPXBBN0BBN0BBN0BBN0GQP/kECZP+rEAWARP/mEAQP/kEPXffBBffBBffBBffBBP9OP9QGWAOARP/mEAQP/kEPXffBBffBBffBBffBBP9OGOPMWdkyQK8aeXM35pS8e8fP9QPKBBADAdAKP9OAWAOPMBEZhDIoaLVcxORqlP9QPKBBADCAFHDAVCLFGVAX6MBKKAXAE9PMBAIAECIgGVCITGDFCBCAAD9r/8KBAIABAXCITFGLAD/8QBBDNAVtMBAIAIPBLZGOPXBBBBBBffBBBBBBffGKP9OAIPBLBGdAOPMLVORXMpScxql358e8fPXfUBBfUBBfUBBfUBBP9OP/6EAdAOPMBEDIWdQKZhoaky8aeGOCZP+sEP/6EGRP/gEAOCZP+rECZP+sEP/6EGWP/gEP/kEP/lEGOPXB/+fsB/+fsB/+fsB/+fsAWAOPXBBBBBBBBBBBBBBBBP+2EGQAWPXBBBJBBBJBBBJBBBJGMP9OP9RP/kEGWAWP/mEAOAOP/mEARAQARAMP9OP9RP/kEGOAOP/mEP/kEP/kEP/jEP/nEGRP/mEPXBBN0BBN0BBN0BBN0GQP/kECZP+rEAWARP/mEAQP/kEPXffBBffBBffBBffBBP9OP9QGWAOARP/mEAQP/kEPXffBBffBBffBBffBBP9OGOPMWdkyQK8aeXM35pS8e8fP9QPKLZAIAdAKP9OAWAOPMBEZhDIoaLVcxORqlP9QPKLBKALAIAD/8QBBKK/4WLLUE97EUV978jJJJJBC8w9rHIDNAEC98gGLtMBCBHVABHOINAIAOPBBBGRAOCZFGWPBBBGdPMLVORXMpScxql358e8fGQCZP+sEGKCLP+rEPKLBAOPXBBJzBBJzBBJzBBJzPX/zL81z/zL81z/zL81z/zL81zAKPXIBBBIBBBIBBBIBBBP9QP/6EP/nEGKARAdPMBEDIWdQKZhoaky8aeGRCZP+rECZP+sEP/6EP/mEGdAdP/mEAKARCZP+sEP/6EP/mEGXAXP/mEAKAQCZP+rECZP+sEP/6EP/mEGQAQP/mEP/kEP/kEP/lEPXBBBBBBBBBBBBBBBBP+4EP/jEPXB/+fsB/+fsB/+fsB/+fsGKP/mEPXBBN0BBN0BBN0BBN0GRP/kEPXffBBffBBffBBffBBGMP9OAXAKP/mEARP/kECZP+rEP9QGXAQAKP/mEARP/kECZP+rEAdAKP/mEARP/kEAMP9OP9QGKPMBEZhDIoaLVcxORqlGRP5BAIPBLBPeB+t+J83IBAOCWFARP5EAIPBLBPeE+t+J83IBAWAXAKPMWdkyQK8aeXM35pS8e8fGKP5BAIPBLBPeD+t+J83IBAOCkFAKP5EAIPBLBPeI+t+J83IBAOCAFHOAVCLFGVAL6MBKKDNALAE9PMBAIAECIgGVCITGOFCBCAAO9r/8KBAIABALCITFGWAO/8QBBDNAVtMBAIAIPBLBGRAIPBLZGdPMLVORXMpScxql358e8fGQCZP+sEGKCLP+rEPKLAAIPXBBJzBBJzBBJzBBJzPX/zL81z/zL81z/zL81z/zL81zAKPXIBBBIBBBIBBBIBBBP9QP/6EP/nEGKARAdPMBEDIWdQKZhoaky8aeGRCZP+rECZP+sEP/6EP/mEGdAdP/mEAKARCZP+sEP/6EP/mEGXAXP/mEAKAQCZP+rECZP+sEP/6EP/mEGQAQP/mEP/kEP/kEP/lEPXBBBBBBBBBBBBBBBBP+4EP/jEPXB/+fsB/+fsB/+fsB/+fsGKP/mEPXBBN0BBN0BBN0BBN0GRP/kEPXffBBffBBffBBffBBGMP9OAXAKP/mEARP/kECZP+rEP9QGXAQAKP/mEARP/kECZP+rEAdAKP/mEARP/kEAMP9OP9QGKPMBEZhDIoaLVcxORqlGRP5BAIPBLAPeB+t+J83IBAIARP5EAIPBLAPeE+t+J83IWAIAXAKPMWdkyQK8aeXM35pS8e8fGKP5BAIPBLAPeD+t+J83IZAIAKP5EAIPBLAPeI+t+J83IkKAWAIAO/8QBBKK+pDDIUE978jJJJJBC/AB9rHIDNADCD4AE2GLC98gGVtMBCBHDABHEINAEAEPBBBGOCWP+rECWP+sEP/6EAOCEP+sEPXBBJzBBJzBBJzBBJzP+uEPXBBJfBBJfBBJfBBJfP9OP/mEPKBBAECZFHEADCLFGDAV6MBKKDNAVAL9PMBAIALCIgGDCDTGEvCBC/ABAE9r/8KBAIABAVCDTFGVAE/8QBBDNADtMBAIAIPBLBGOCWP+rECWP+sEP/6EAOCEP+sEPXBBJzBBJzBBJzBBJzP+uEPXBBJfBBJfBBJfBBJfP9OP/mEPKLBKAVAIAE/8QBBKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIKKKEBCJWKLZ9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=o;WebAssembly.validate(t)&&(r=e);var i,s=WebAssembly.instantiate(a(r),{}).then(function(p){i=p.instance,i.exports.__wasm_call_ctors()});function a(p){for(var d=new Uint8Array(p.length),_=0;_<p.length;++_){var A=p.charCodeAt(_);d[_]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}for(var E=0,_=0;_<p.length;++_)d[E++]=d[_]<60?n[d[_]]:(d[_]-60)*64+d[++_];return d.buffer.slice(0,E)}function u(p,d,_,A,E,v){var T=i.exports.sbrk,I=_+3&-4,R=T(I*A),k=T(E.length),K=new Uint8Array(i.exports.memory.buffer);K.set(E,k);var ee=p(R,_,A,k,E.length);if(ee==0&&v&&v(R,I,A),d.set(K.subarray(R,R+_*A)),T(R-T(0)),ee!=0)throw new Error("Malformed buffer data: "+ee)}var f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:s,supported:!0,decodeVertexBuffer:function(p,d,_,A,E){u(i.exports.meshopt_decodeVertexBuffer,p,d,_,A,i.exports[f[E]])},decodeIndexBuffer:function(p,d,_,A){u(i.exports.meshopt_decodeIndexBuffer,p,d,_,A)},decodeIndexSequence:function(p,d,_,A){u(i.exports.meshopt_decodeIndexSequence,p,d,_,A)},decodeGltfBuffer:function(p,d,_,A,E,v){u(i.exports[l[E]],p,d,_,A,i.exports[f[v]])}}}(),Nv=function(){var o="B9h79tEBBBECd9gEUEU9gEUB9gBB9gQUUUUUUU99UUEU9gVUUUUUB9gLUUUUE999gIUUUE999gLUUUUEU9gIUUUEUIMXDILVORBWWBEWLVE9wEIIVIEBEOWEUECJ/JEKR7OO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BBZ9tw79o9v9wT9f79p9t9w29p9m95BEx9tw79o9v9wT9f79p9t9w29p9m959T9j9h2wBLA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBVL79iv9rBOdWEBCEKDdQQ+stXDBK/48yIkUp99hU8jJJJJBCJ/BB9rGQ8kJJJJBAQCkFCBC/kBZ1JJJB8aCUALCDTGKALCffffI0eGXCBYD/s1JJBhJJJJBBHMAQCkFAQYD94GpCDTFAMbDBAQAMbDWAQApCEFbD94AXCBYD/s1JJBhJJJJBBHSAQCkFAQYD94GpCDTFASbDBAQASbDXAQApCEFbD94CUADCITADCffffE0eCBYD/s1JJBhJJJJBBHZAQCkFAQYD94GpCDTFAZbDBAQAZbDZAQApCEFbD94AQCWFAEADALCBZ+CJJJBAXCBYD/s1JJBhJJJJBBHhAQCkFAQYD94GpCDTFAhbDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHoAQCkFAQYD94GpCDTFAobDBAQApCEFbD94ALCD4ALFHaCEHcINAcGpCETHcApAa6MBKCBHxCUApCDTGaApCffffI0eCBYD/s1JJBhJJJJBBHcAQCkFAQYD94GqCDTFAcbDBAQAqCEFbD94AcCfEAaZ1JJJBHlDNALtMBAVCD4HkApCUFHqINAIAxAk2CDTFGyYDLGpCh4Ap7C+f+B+dd2AyYDBGpCh4Ap7C/d/o+b8j27AyYDWGpCh4Ap7C+3f/n8n27HaCBHpDNDNINAlAaAqgGaCDTFG8aYDBGcCUsMEAIAcAk2CDTFAyCXZ+LJJJBtMDApCEFGpAaFHaApAq9NMBXDKKA8aAxbDBAxHcKAhAxCDTFAcbDBAxCEFGxAL9HMBKCBHpAoHcINAcApbDBAcCLFHcALApCEFGp9HMBKCBHpAhHcAoHaINDNApAcYDBGqsMBAaAoAqCDTFGqYDBbDBAqApbDBKAcCLFHcAaCLFHaALApCEFGp9HMBKKCBHaALCBYD/s1JJBhJJJJBBHyAQCkFAQYD94GpCDTFAybDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHpAQCkFAQYD94GcCDTFApbDBAQAcCEFbD94AXCBYD/s1JJBhJJJJBBHcAQCkFAQYD94GqCDTFAcbDBAQAqCEFbD94ApCfEAKZ1JJJBHeAcCfEAKZ1JJJBH3DNALtMBAZCWFH5INDNAMAaCDTGpFYDBG8etMBAZASApFYDBCITFH8fA3ApFHAAeApFHxCBHkINDNDNA8fAkCITFYDBGlAa9HMBAxAabDBAAAabDBXEKDNAMAlCDTGKFYDBGHtMBAZASAKFYDBCITGpFYDBAasMEAHCUFH8aA5ApFHcCBHpINA8aApsMEApCEFHpAcYDBHqAcCWFHcAqAa9HMBKApAH6MEKA3AKFGpAaAlApYDBCUsebDBAxAlAaAxYDBCUsebDBKAkCEFGkA8e9HMBKKAaCEFGaAL9HMBKAhHcAoHaA3HqAeHkCBHpINDNDNApAcYDBG8a9HMBDNApAaYDBG8a9HMBAkYDBH8aDNAqYDBGlCU9HMBA8aCU9HMBAyApFCB86BBXIKAyApFHxDNApAlsMBApA8asMBAxCE86BBXIKAxCL86BBXDKDNApAoA8aCDTGlFYDB9HMBDNAqYDBGxCUsMBApAxsMBAkYDBGKCUsMBApAKsMBA3AlFYDBG8eCUsMBA8eA8asMBAeAlFYDBGlCUsMBAlA8asMBDNAhAxCDTFYDBAhAlCDTFYDB9HMBAhAKCDTFYDBAhA8eCDTFYDB9HMBAyApFCD86BBXLKAyApFCL86BBXIKAyApFCL86BBXDKAyApFCL86BBXEKAyApFAyA8aFrBB86BBKAcCLFHcAaCLFHaAqCLFHqAkCLFHkALApCEFGp9HMBKAWCEgtMBAyHpALHcINDNAprBBCE9HMBApCL86BBKApCEFHpAcCUFGcMBKKCBHkCUALCX2ALC/V+q/V+qE0eCBYD/s1JJBhJJJJBBHMAQCkFAQYD94GpCDTFAMbDBAQApCEFbD94AMAIALAVZ+DJJJB8aCUALC8s2GcALC/d/o/F8u0eCBYD/s1JJBhJJJJBBHpAQCkFAQYD94GaCDTFApbDBAQAaCEFbD94ApCBAcZ1JJJBHZDNADtMBAEHcINDNAMAcCLFYDBG8aCX2FGpiDBAMAcYDBGlCX2FGaiDBGG+TG8jAMAcCWFYDBGxCX2FGqCLFiDBAaCLFiDBG8k+TG8lnAqiDBAG+TG8mApCLFiDBA8k+TG8nn+TGYAYnA8nAqCWFiDBAaCWFiDBG8p+TGinA8lApCWFiDBA8p+TG8nn+TG8lA8lnA8nA8mnAiA8jn+TG8jA8jnmm+RG8mjBBBB9etMBAYA8m+VHYA8jA8m+VH8jA8lA8m+VH8lKAZAhAlCDTFYDBC8s2FGpA8lA8m+RG8mA8lnnG8nApiDBmuDBApA8jA8mA8jnG8rnGiApiDLmuDLApAYA8mAYnG8snGrApiDWmuDWApA8rA8lnG8rApiDXmuDXApA8sA8lnG8uApiDZmuDZApA8sA8jnG8sApiDcmuDcApA8lA8mAYA8pnA8lAGnA8kA8jnmm+MG8knGGnG8lApiDkmuDkApA8jAGnG8jApiD3muD3ApAYAGnGYApiDAmuDAApAGA8knGGApiD8kmuD8kApA8mApiDYmuDYAZAhA8aCDTFYDBC8s2FGpA8nApiDBmuDBApAiApiDLmuDLApArApiDWmuDWApA8rApiDXmuDXApA8uApiDZmuDZApA8sApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApAYApiDAmuDAApAGApiD8kmuD8kApA8mApiDYmuDYAZAhAxCDTFYDBC8s2FGpA8nApiDBmuDBApAiApiDLmuDLApArApiDWmuDWApA8rApiDXmuDXApA8uApiDZmuDZApA8sApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApAYApiDAmuDAApAGApiD8kmuD8kApA8mApiDYmuDYAcCXFHcAkCIFGkAD6MBKCBH8aAEHxINCBHcINAyAEAcC+81JJBFYDBGlA8aFCDTFYDBGaFrBBHpDNDNAyAxAcFYDBGqFrBBGkC99FCfEgCPE0MBApCEsMBApCD9HMEKDNAkCUFCfEgCE0MBAeAqCDTFYDBAa9HMEKDNApCUFCfEgCE0MBA3AaCDTFYDBAq9HMEKDNAkCV2ApFC+g1JJBFrBBtMBAhAaCDTFYDBAhAqCDTFYDB0MEKjBBACjBBJzApCEseH8mAkCEsHKAEAlCDTC+81JJBFYDBA8aFCDTFYDBHlDNAMAaCX2FGpCWFiDBAMAqCX2FGkCWFiDBG8k+TG8lA8lnApiDBAkiDBG8p+TG8jA8jnApCLFiDBAkCLFiDBG8n+TGYAYnmm+RGGjBBBB9etMBA8lAG+VH8lAYAG+VHYA8jAG+VH8jKjBBACA8mAKeH8sDNAMAlCX2FGpiDWA8k+TG8mA8lA8mA8lnApiDBA8p+TGrA8jnAYApiDLA8n+TG8rnmmGin+TG8mA8mnArA8jAin+TG8lA8lnA8rAYAin+TG8jA8jnmm+RGYjBBBB9etMBA8mAY+VH8mA8jAY+VH8jA8lAY+VH8lKAZAhAqCDTFYDBC8s2FGpA8lA8sAGnGYA8lnnGiApiDBmuDBApA8jAYA8jnG8snGrApiDLmuDLApA8mAYA8mnGGnG8rApiDWmuDWApA8sA8lnG8sApiDXmuDXApAGA8lnG8uApiDZmuDZApAGA8jnG8vApiDcmuDcApA8lAYA8mA8knA8lA8pnA8nA8jnmm+MG8knGGnG8lApiDkmuDkApA8jAGnG8jApiD3muD3ApA8mAGnG8mApiDAmuDAApAGA8knGGApiD8kmuD8kApAYApiDYmuDYAZAhAaCDTFYDBC8s2FGpAiApiDBmuDBApArApiDLmuDLApA8rApiDWmuDWApA8sApiDXmuDXApA8uApiDZmuDZApA8vApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApA8mApiDAmuDAApAGApiD8kmuD8kApAYApiDYmuDYKAcCLFGcCX9HMBKAxCXFHxA8aCIFG8aAD6MBKKDNABAEsMBABAEADCDTZ+HJJJB8aKCUADCX2ADC/V+q/V+qE0eCBYD/s1JJBhJJJJBBHAAQCkFAQYD94GpCDTFAAbDBAQApCEFbD94CUADCDTADCffffI0eCBYD/s1JJBhJJJJBBH5AQCkFAQYD94GpCDTFA5bDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHIAQCkFAQYD94GpCDTFAIbDBAQApCEFbD94ALCBYD/s1JJBhJJJJBBH8wAQCkFAQYD94GpCDTFA8wbDBAQApCEFbD94jBBBBHrDNADAO9NMBARARnH8sAACWFH8xAQYDZH8yAQYDXH8zAQYDWH80jBBBBHrINAQCWFABADGSALAhZ+CJJJBCBHHABHxCBHKINCBHpINDNAhAxApFYDBGaCDTGEFYDBGkAhABApC+81JJBFYDBAKFCDTFYDBGcCDTFYDBG8asMBAyAcFrBBGlCV2AyAaFrBBGqFC/Q1JJBFrBBGDAqCV2AlFG8eC/Q1JJBFrBBG8fvCfEgtMBDNA8eC+g1JJBFrBBtMBA8aAk0MEKDNAqAl9HMBAqCUFCfEgCE0MBAeAEFYDBAc9HMEKAAAHCX2FGqAcAaA8fCfEgGkebDLAqAaAcAkebDBAqADA8fgCfEgCB9HbDWAHCEFHHKApCLFGpCX9HMBKAxCXFHxAKCIFGKAS6MBKDNDNAHtMBAAHcAHH8aINAcCWFGljBBBBjBBJzAZAhAcYDBGaCDTFYDBC8s2FGpiDYG8l+VA8ljBBBB9beApiDWAMAcCLFGEYDBGqCX2FGkCWFiDBG8lnApiDZAkiDBG8jnApiDAmG8mA8mmmA8lnApiDLAkCLFiDBG8mnApiDcA8lnApiD3mG8lA8lmmA8mnApiDBA8jnApiDXA8mnApiDkmG8lA8lmmA8jnApiD8kmmm+LnGYjBBBBjBBJzAZAhAqAaAlYDBGkeGlCDTFYDBC8s2FGpiDYG8l+VA8ljBBBB9beApiDWAMAaAqAkeGxCX2FGkCWFiDBG8lnApiDZAkiDBG8jnApiDAmG8mA8mmmA8lnApiDLAkCLFiDBG8mnApiDcA8lnApiD3mG8lA8lmmA8mnApiDBA8jnApiDXA8mnApiDkmG8lA8lmmA8jnApiD8kmmm+LnG8lAYA8l9fGpeuDBAEAqAxApebDBAcAaAlApebDBAcCXFHcA8aCUFG8aMBKAQCJEFCBCJ/ABZ1JJJB8aA8xHpAHHcINAQCJEFApYDBCo4C/8zgFGaAaYDBCEFbDBApCXFHpAcCUFGcMBKCBHpCBHcINAQCJEFApFGaYDBHqAaAcbDBAqAcFHcApCLFGpCJ/AB9HMBKCBHpA8xHcINAQCJEFAcYDBCo4C/8zgFGaAaYDBGaCEFbDBA5AaCDTFApbDBAcCXFHcAHApCEFGp9HMBKASAO9rGaCI9uH81DNALtMBCBHpAIHcINAcApbDBAcCLFHcALApCEFGp9HMBKKCBHbA8wCBALZ1JJJBH83AaCo9uHuA81CE4H85CBH86CBHKDNINAAA5AKCDTFYDBCX2FGxiDWG8jA8s9eMEA86A819PMEjffUUH8lDNA85AH9PMBAAA5A85CDTFYDBCX2FiDWjBB/AznH8lKDNA8jA8l9etMBA86Au0MDKDNA83AhAxYDLG87CDTG88FYDBGaFG89rBBA83AhAxYDBGECDTG8+FYDBGzFGNrBBvMBDNA80AzCDTGpFYDBGqtMBA8yA8zApFYDBCITFHpAMAaCX2FG8eCWFHDA8eCLFHXAMAzCX2FG8fCWFHVA8fCLFHWCBHcCEHlDNINDNAIApYDBCDTFYDBGkAasMBAIApCLFYDBCDTFYDBG8aAasMBAMA8aCX2FG8aiDBAMAkCX2FGkiDBG8m+TG8lAWiDBAkCLFiDBGY+TGGnA8fiDBA8m+TG8kA8aCLFiDBAY+TG8jn+TA8lAXiDBAY+TG8pnA8eiDBA8m+TG8nA8jn+TnA8jAViDBAkCWFiDBGY+TGinAGA8aCWFiDBAY+TG8mn+TA8jADiDBAY+TGYnA8pA8mn+TnA8mA8knAiA8ln+TA8mA8nnAYA8ln+TnmmjBBBB9dMDKApCWFHpAcCEFGcAq6HlAqAc9HMBKKAlCEgtMBA85CEFH85XEKAxCWFHqAZAaC8s2FGpAZAzC8s2FGciDBApiDBmuDBApAciDLApiDLmuDLApAciDWApiDWmuDWApAciDXApiDXmuDXApAciDZApiDZmuDZApAciDcApiDcmuDcApAciDkApiDkmuDkApAciD3ApiD3muD3ApAciDAApiDAmuDAApAciD8kApiD8kmuD8kApAciDYApiDYmuDYDNDNDNDNAyAEFGcrBBC9+FpDEBDKAEHpINAIApCDTGpFAabDBAoApFYDBGpAE9HMBXIKKAoA88FYDBHpAoA8+FYDBHEAIA8+FA87bDBApH87KAIAECDTFA87bDBKANCE86BBA89CE86BBAqiDBG8lArArA8l9deHrAbCEFHbCECDAcrBBCEseA86FH86KAKCEFGKAH9HMBKKAbtMBDNALtMBCBHcAeHpINDNApYDBGaCUsMBDNAcAIAaCDTGqFYDBGa9HMBAeAqFYDBHaKApAabDBKApCLFHpALAcCEFGc9HMBKCBHcA3HpINDNApYDBGaCUsMBDNAcAIAaCDTGqFYDBGa9HMBA3AqFYDBHaKApAabDBKApCLFHpALAcCEFGc9HMBKKCBHDABHpCBHkINDNAIApYDBCDTFYDBGcAIApCLFYDBCDTFYDBGasMBAcAIApCWFYDBCDTFYDBGqsMBAaAqsMBABADCDTFG8aAcbDBA8aCLFAabDBA8aCWFAqbDBADCIFHDKApCXFHpAkCIFGkAS9PMDXBKKASHDXDKADAO0MBKKDNAdtMBAdAr+RuDBKAQYD94GpCDTAQCkFFC98FHhDNINAptMEAhYDBCBYD/w1JJBh+BJJJBBAhC98FHhApCUFHpXBKKAQCJ/BBF8kJJJJBADK/PLEOUABYDBCBAICDTZ1JJJB8aADCI9uHVDNADtMBABYDBHODNALtMBAEHRADHWINAOALARYDBCDTFYDBCDTFGdAdYDBCEFbDBARCLFHRAWCUFGWMBXDKKAEHRADHWINAOARYDBCDTFGdAdYDBCEFbDBARCLFHRAWCUFGWMBKKDNAItMBABYDBHRABYDLHWCBHdAIHOINAWAdbDBAWCLFHWARYDBAdFHdARCLFHRAOCUFGOMBKKDNADCI6MBAVCEAVCE0eHQABYDLHVABYDWHRINAECWFYDBHWAECLFYDBHdAEYDBHODNALtMBALAWCDTFYDBHWALAdCDTFYDBHdALAOCDTFYDBHOKARAVAOCDTFGDYDBCITFAdbDBARADYDBCITFAWbDLADADYDBCEFbDBARAVAdCDTFGDYDBCITFAWbDBARADYDBCITFAObDLADADYDBCEFbDBARAVAWCDTFGWYDBCITFAObDBARAWYDBCITFAdbDLAWAWYDBCEFbDBAECXFHEAQCUFGQMBKKDNAItMBABYDLHRABYDBHWINARARYDBAWYDB9rbDBAWCLFHWARCLFHRAICUFGIMBKKK+3LDOUV998jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNADtMBAICD4HVDNABtMBAVCDTHOCBHRAEHWINABARCX2FGIAEARAV2CDTFGdiDBuDBAIAdiDLuDLAIAdiDWuDWCBHIINALCZFAIFGdAWAIFiDBGQAdiDBGKAKAQ9eeuDBALAIFGdAQAdiDBGKAKAQ9deuDBAICLFGICX9HMBKAWAOFHWARCEFGRAD9HMBXDKKAVCDTHRCBHWINCBHIINALCZFAIFGdAEAIFiDBGQAdiDBGKAKAQ9eeuDBALAIFGdAQAdiDBGKAKAQ9deuDBAICLFGICX9HMBKAEARFHEAWCEFGWAD9HMBKKALiDBALiDZGK+TjBBBB+XGQALiDLALiDcGX+TGMAMAQ9deGQALiDWALiDkGM+TGpApAQ9deHpDNABtMBADtMBjBBBBjBBJzAp+VApjBBBB9beHQINABAQABiDBAK+TnuDBABCLFGIAQAIiDBAX+TnuDBABCWFGIAQAIiDBAM+TnuDBABCXFHBADCUFGDMBKKApK+qDIDUI99DUCBHI8jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNDNAEMBjBBJfHVjBBJfHOjBBJfHRXEKADCD4CDTHWINCBHDINALCZFADFGdABADFiDBGOAdiDBGRARAO9eeuDBALADFGdAOAdiDBGRARAO9deuDBADCLFGDCX9HMBKABAWFHBAICEFGIAE9HMBKALiDWALiDk+THRALiDLALiDc+THOALiDBALiDZ+THVKAVjBBBB+XGVAOAOAV9deGOARARAO9deK9dEEUABCfEAICDTZ1JJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD/01JJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD/01JJBFGDbD/01JJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKK6EIUCBHIDNADtMBDNINABrBBGLAErBBGV9HMEAECEFHEABCEFHBADCUFGDMBXDKKALAV9rHIKAIKK+CEDBCJWK9pffUUffUUffUUffUfffUfffUfBBBBBBBBEEEBEEBEBBEEEBEBBBBBEBEBBBBBEBBBDBBBBBBBBBBBBBBBEEEEEBEBBBBBEBBBBBEEBBBBBBC/sWKXEBBBDBBBJ9kBB",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var t,n=WebAssembly.instantiate(r(o),{}).then(function(d){t=d.instance,t.exports.__wasm_call_ctors()});function r(d){for(var _=new Uint8Array(d.length),A=0;A<d.length;++A){var E=d.charCodeAt(A);_[A]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}for(var v=0,A=0;A<d.length;++A)_[v++]=_[A]<60?e[_[A]]:(_[A]-60)*64+_[++A];return _.buffer.slice(0,v)}function i(d){if(!d)throw new Error("Assertion failed")}function s(d){return new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}function a(d,_){var A=t.exports.sbrk,E=A(d.length*4),v=A(_*4),T=new Uint8Array(t.exports.memory.buffer),I=s(d);T.set(I,E);var R=t.exports.meshopt_optimizeVertexFetchRemap(v,E,d.length,_);T=new Uint8Array(t.exports.memory.buffer);var k=new Uint32Array(_);new Uint8Array(k.buffer).set(T.subarray(v,v+_*4)),I.set(T.subarray(E,E+d.length*4)),A(E-A(0));for(var K=0;K<d.length;++K)d[K]=k[d[K]];return[k,R]}function u(d){for(var _=0,A=0;A<d.length;++A){var E=d[A];_=_<E?E:_}return _}function f(d,_,A,E,v,T,I,R,k){var K=t.exports.sbrk,ee=K(4),_e=K(A*4),Q=K(v*T),ne=K(A*4),de=new Uint8Array(t.exports.memory.buffer);de.set(s(E),Q),de.set(s(_),ne);var Ie=d(_e,ne,A,Q,v,T,I,R,k,ee);de=new Uint8Array(t.exports.memory.buffer);var Pe=new Uint32Array(Ie);s(Pe).set(de.subarray(_e,_e+Ie*4));var Te=new Float32Array(1);return s(Te).set(de.subarray(ee,ee+4)),K(ee-K(0)),[Pe,Te[0]]}function l(d,_,A,E){var v=t.exports.sbrk,T=v(A*E),I=new Uint8Array(t.exports.memory.buffer);I.set(s(_),T);var R=d(T,A,E);return v(T-v(0)),R}var p={LockBorder:1};return{ready:n,supported:!0,compactMesh:function(d){i(d instanceof Uint32Array||d instanceof Int32Array||d instanceof Uint16Array||d instanceof Int16Array),i(d.length%3==0);var _=d.BYTES_PER_ELEMENT==4?d:new Uint32Array(d);return a(_,u(d)+1)},simplify:function(d,_,A,E,v,T){i(d instanceof Uint32Array||d instanceof Int32Array||d instanceof Uint16Array||d instanceof Int16Array),i(d.length%3==0),i(_ instanceof Float32Array),i(_.length%A==0),i(A>=3),i(E%3==0);for(var I=0,R=0;R<(T?T.length:0);++R)I|=p[T[R]];var k=d.BYTES_PER_ELEMENT==4?d:new Uint32Array(d),K=f(t.exports.meshopt_simplify,k,d.length,_,_.length,A*4,E,v,I);return K[0]=d instanceof Uint32Array?K[0]:new d.constructor(K[0]),K},getScale:function(d,_){return i(d instanceof Float32Array),i(d.length%_==0),l(t.exports.meshopt_simplifyScale,d,d.length,_*4)}}}();const Uv=Object.freeze(Object.defineProperty({__proto__:null,MeshoptDecoder:Ov,MeshoptEncoder:Lv,MeshoptSimplifier:Nv},Symbol.toStringTag,{value:"Module"})),dh=Ou(Uv);var Gv=gi&&gi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},kv=gi&&gi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Hv=gi&&gi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.nodeIO=void 0;var sp=Hv(ng),Wv=fh,ap=dh,ju=lh;function Vv(){return Gv(this,void 0,void 0,function(){var o,e,t,n,r;return kv(this,function(i){switch(i.label){case 0:return e=(o=new Wv.NodeIO().registerExtensions([ju.DracoMeshCompression,ju.MaterialsSpecular,ju.MaterialsEmissiveStrength,ju.TextureWebP,ju.TextureTransform])).registerDependencies,r={},t="draco3d.decoder",[4,sp.default.createDecoderModule()];case 1:return r[t]=i.sent(),n="draco3d.encoder",[4,sp.default.createEncoderModule()];case 2:return[2,e.apply(o,[(r[n]=i.sent(),r["meshopt.decoder"]=ap.MeshoptDecoder,r["meshopt.encoder"]=ap.MeshoptEncoder,r)])]}})})}Xl.nodeIO=Vv;var Pc={};function jv(o){for(var e=new Array(o),t=0;t<o;++t)e[t]=t;return e}var zv=jv;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Kv=function(o){return o!=null&&(rg(o)||Jv(o)||!!o._isBuffer)};function rg(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function Jv(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&rg(o.slice(0,0))}var qv=zv,Xv=Kv,Yv=typeof Float64Array<"u";function $v(o,e){return o[0]-e[0]}function Zv(){var o=this.stride,e=new Array(o.length),t;for(t=0;t<e.length;++t)e[t]=[Math.abs(o[t]),t];e.sort($v);var n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=e[t][1];return n}function Qv(o,e){var t=["View",e,"d",o].join("");e<0&&(t="View_Nil"+o);var n=o==="generic";if(e===-1){var r="function "+t+"(a){this.data=a;};var proto="+t+".prototype;proto.dtype='"+o+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+t+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+t+"(a){return new "+t+"(a);}",E=new Function(r);return E()}else if(e===0){var r="function "+t+"(a,d) {this.data = a;this.offset = d};var proto="+t+".prototype;proto.dtype='"+o+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+t+"_copy() {return new "+t+"(this.data,this.offset)};proto.pick=function "+t+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+t+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+t+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+t+"(a,b,c,d){return new "+t+"(a,d)}",E=new Function("TrivialArray",r);return E(Fl[o][0])}var r=["'use strict'"],i=qv(e),s=i.map(function(v){return"i"+v}),a="this.offset+"+i.map(function(v){return"this.stride["+v+"]*i"+v}).join("+"),u=i.map(function(v){return"b"+v}).join(","),f=i.map(function(v){return"c"+v}).join(",");r.push("function "+t+"(a,"+u+","+f+",d){this.data=a","this.shape=["+u+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+t+".prototype","proto.dtype='"+o+"'","proto.dimension="+e),r.push("Object.defineProperty(proto,'size',{get:function "+t+"_size(){return "+i.map(function(v){return"this.shape["+v+"]"}).join("*"),"}})"),e===1?r.push("proto.order=[0]"):(r.push("Object.defineProperty(proto,'order',{get:"),e<4?(r.push("function "+t+"_order(){"),e===2?r.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&r.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):r.push("ORDER})")),r.push("proto.set=function "+t+"_set("+s.join(",")+",v){"),n?r.push("return this.data.set("+a+",v)}"):r.push("return this.data["+a+"]=v}"),r.push("proto.get=function "+t+"_get("+s.join(",")+"){"),n?r.push("return this.data.get("+a+")}"):r.push("return this.data["+a+"]}"),r.push("proto.index=function "+t+"_index(",s.join(),"){return "+a+"}"),r.push("proto.hi=function "+t+"_hi("+s.join(",")+"){return new "+t+"(this.data,"+i.map(function(v){return["(typeof i",v,"!=='number'||i",v,"<0)?this.shape[",v,"]:i",v,"|0"].join("")}).join(",")+","+i.map(function(v){return"this.stride["+v+"]"}).join(",")+",this.offset)}");var l=i.map(function(v){return"a"+v+"=this.shape["+v+"]"}),p=i.map(function(v){return"c"+v+"=this.stride["+v+"]"});r.push("proto.lo=function "+t+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+p.join(","));for(var d=0;d<e;++d)r.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");r.push("return new "+t+"(this.data,"+i.map(function(v){return"a"+v}).join(",")+","+i.map(function(v){return"c"+v}).join(",")+",b)}"),r.push("proto.step=function "+t+"_step("+s.join(",")+"){var "+i.map(function(v){return"a"+v+"=this.shape["+v+"]"}).join(",")+","+i.map(function(v){return"b"+v+"=this.stride["+v+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)r.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");r.push("return new "+t+"(this.data,"+i.map(function(v){return"a"+v}).join(",")+","+i.map(function(v){return"b"+v}).join(",")+",c)}");for(var _=new Array(e),A=new Array(e),d=0;d<e;++d)_[d]="a[i"+d+"]",A[d]="b[i"+d+"]";r.push("proto.transpose=function "+t+"_transpose("+s+"){"+s.map(function(v,T){return v+"=("+v+"===undefined?"+T+":"+v+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+t+"(this.data,"+_.join(",")+","+A.join(",")+",this.offset)}"),r.push("proto.pick=function "+t+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)r.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");r.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),r.push("return function construct_"+t+"(data,shape,stride,offset){return new "+t+"(data,"+i.map(function(v){return"shape["+v+"]"}).join(",")+","+i.map(function(v){return"stride["+v+"]"}).join(",")+",offset)}");var E=new Function("CTOR_LIST","ORDER",r.join(`
`));return E(Fl[o],Zv)}function eA(o){if(Xv(o))return"buffer";if(Yv)switch(Object.prototype.toString.call(o)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(o)?"array":"generic"}var Fl={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function tA(o,e,t,n){if(o===void 0){var f=Fl.array[0];return f([])}else typeof o=="number"&&(o=[o]);e===void 0&&(e=[o.length]);var r=e.length;if(t===void 0){t=new Array(r);for(var i=r-1,s=1;i>=0;--i)t[i]=s,s*=e[i]}if(n===void 0){n=0;for(var i=0;i<r;++i)t[i]<0&&(n-=(e[i]-1)*t[i])}for(var a=eA(o),u=Fl[a];u.length<=r+1;)u.push(Qv(a,u.length-1));var f=u[r+1];return f(o,e,t,n)}var ts=tA,Qs={};function nA(o,e){for(var t=1,n=o.length,r=o[0],i=o[0],s=1;s<n;++s)if(i=r,r=o[s],e(r,i)){if(s===t){t++;continue}o[t++]=r}return o.length=t,o}function rA(o){for(var e=1,t=o.length,n=o[0],r=o[0],i=1;i<t;++i,r=n)if(r=n,n=o[i],n!==r){if(i===e){e++;continue}o[e++]=n}return o.length=e,o}function iA(o,e,t){return o.length===0?o:e?(t||o.sort(e),nA(o,e)):(t||o.sort(),rA(o))}var oA=iA,sA=oA;function ig(o,e,t){var n=o.length,r=e.arrayArgs.length,i=e.indexArgs.length>0,s=[],a=[],u=0,f=0,l,p;for(l=0;l<n;++l)a.push(["i",l,"=0"].join(""));for(p=0;p<r;++p)for(l=0;l<n;++l)f=u,u=o[l],l===0?a.push(["d",p,"s",l,"=t",p,"p",u].join("")):a.push(["d",p,"s",l,"=(t",p,"p",u,"-s",f,"*t",p,"p",f,")"].join(""));for(a.length>0&&s.push("var "+a.join(",")),l=n-1;l>=0;--l)u=o[l],s.push(["for(i",l,"=0;i",l,"<s",u,";++i",l,"){"].join(""));for(s.push(t),l=0;l<n;++l){for(f=u,u=o[l],p=0;p<r;++p)s.push(["p",p,"+=d",p,"s",l].join(""));i&&(l>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",u,"]"].join(""))),s.push("}")}return s.join(`
`)}function aA(o,e,t,n){for(var r=e.length,i=t.arrayArgs.length,s=t.blockSize,a=t.indexArgs.length>0,u=[],f=0;f<i;++f)u.push(["var offset",f,"=p",f].join(""));for(var f=o;f<r;++f)u.push(["for(var j"+f+"=SS[",e[f],"]|0;j",f,">0;){"].join("")),u.push(["if(j",f,"<",s,"){"].join("")),u.push(["s",e[f],"=j",f].join("")),u.push(["j",f,"=0"].join("")),u.push(["}else{s",e[f],"=",s].join("")),u.push(["j",f,"-=",s,"}"].join("")),a&&u.push(["index[",e[f],"]=j",f].join(""));for(var f=0;f<i;++f){for(var l=["offset"+f],p=o;p<r;++p)l.push(["j",p,"*t",f,"p",e[p]].join(""));u.push(["p",f,"=(",l.join("+"),")"].join(""))}u.push(ig(e,t,n));for(var f=o;f<r;++f)u.push("}");return u.join(`
`)}function uA(o){for(var e=0,t=o[0].length;e<t;){for(var n=1;n<o.length;++n)if(o[n][e]!==o[0][e])return e;++e}return e}function ff(o,e,t){for(var n=o.body,r=[],i=[],s=0;s<o.args.length;++s){var a=o.args[s];if(!(a.count<=0)){var u=new RegExp(a.name,"g"),f="",l=e.arrayArgs.indexOf(s);switch(e.argTypes[s]){case"offset":var p=e.offsetArgIndex.indexOf(s),d=e.offsetArgs[p];l=d.array,f="+q"+p;case"array":f="p"+l+f;var _="l"+s,A="a"+l;if(e.arrayBlockIndices[l]===0)a.count===1?t[l]==="generic"?a.lvalue?(r.push(["var ",_,"=",A,".get(",f,")"].join("")),n=n.replace(u,_),i.push([A,".set(",f,",",_,")"].join(""))):n=n.replace(u,[A,".get(",f,")"].join("")):n=n.replace(u,[A,"[",f,"]"].join("")):t[l]==="generic"?(r.push(["var ",_,"=",A,".get(",f,")"].join("")),n=n.replace(u,_),a.lvalue&&i.push([A,".set(",f,",",_,")"].join(""))):(r.push(["var ",_,"=",A,"[",f,"]"].join("")),n=n.replace(u,_),a.lvalue&&i.push([A,"[",f,"]=",_].join("")));else{for(var E=[a.name],v=[f],T=0;T<Math.abs(e.arrayBlockIndices[l]);T++)E.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(T+1)+"*t"+l+"b"+T);if(u=new RegExp(E.join(""),"g"),f=v.join("+"),t[l]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[A,"[",f,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(s));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape");break}}}return[r.join(`
`),n,i.join(`
`)].join(`
`).trim()}function cA(o){for(var e=new Array(o.length),t=!0,n=0;n<o.length;++n){var r=o[n],i=r.match(/\d+/);i?i=i[0]:i="",r.charAt(0)===0?e[n]="u"+r.charAt(1)+i:e[n]=r.charAt(0)+i,n>0&&(t=t&&e[n]===e[n-1])}return t?e[0]:e.join("")}function lA(o,e){for(var t=e[1].length-Math.abs(o.arrayBlockIndices[0])|0,n=new Array(o.arrayArgs.length),r=new Array(o.arrayArgs.length),i=0;i<o.arrayArgs.length;++i)r[i]=e[2*i],n[i]=e[2*i+1];for(var s=[],a=[],u=[],f=[],l=[],i=0;i<o.arrayArgs.length;++i){o.arrayBlockIndices[i]<0?(u.push(0),f.push(t),s.push(t),a.push(t+o.arrayBlockIndices[i])):(u.push(o.arrayBlockIndices[i]),f.push(o.arrayBlockIndices[i]+t),s.push(0),a.push(o.arrayBlockIndices[i]));for(var p=[],d=0;d<n[i].length;d++)u[i]<=n[i][d]&&n[i][d]<f[i]&&p.push(n[i][d]-u[i]);l.push(p)}for(var _=["SS"],A=["'use strict'"],E=[],d=0;d<t;++d)E.push(["s",d,"=SS[",d,"]"].join(""));for(var i=0;i<o.arrayArgs.length;++i){_.push("a"+i),_.push("t"+i),_.push("p"+i);for(var d=0;d<t;++d)E.push(["t",i,"p",d,"=t",i,"[",u[i]+d,"]"].join(""));for(var d=0;d<Math.abs(o.arrayBlockIndices[i]);++d)E.push(["t",i,"b",d,"=t",i,"[",s[i]+d,"]"].join(""))}for(var i=0;i<o.scalarArgs.length;++i)_.push("Y"+i);if(o.shapeArgs.length>0&&E.push("shape=SS.slice(0)"),o.indexArgs.length>0){for(var v=new Array(t),i=0;i<t;++i)v[i]="0";E.push(["index=[",v.join(","),"]"].join(""))}for(var i=0;i<o.offsetArgs.length;++i){for(var T=o.offsetArgs[i],I=[],d=0;d<T.offset.length;++d)T.offset[d]!==0&&(T.offset[d]===1?I.push(["t",T.array,"p",d].join("")):I.push([T.offset[d],"*t",T.array,"p",d].join("")));I.length===0?E.push("q"+i+"=0"):E.push(["q",i,"=",I.join("+")].join(""))}var R=sA([].concat(o.pre.thisVars).concat(o.body.thisVars).concat(o.post.thisVars));E=E.concat(R),E.length>0&&A.push("var "+E.join(","));for(var i=0;i<o.arrayArgs.length;++i)A.push("p"+i+"|=0");o.pre.body.length>3&&A.push(ff(o.pre,o,r));var k=ff(o.body,o,r),K=uA(l);K<t?A.push(aA(K,l[0],o,k)):A.push(ig(l[0],o,k)),o.post.body.length>3&&A.push(ff(o.post,o,r)),o.debug&&console.log("-----Generated cwise routine for ",e,`:
`+A.join(`
`)+`
----------`);var ee=[o.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",K,cA(r)].join(""),_e=new Function(["function ",ee,"(",_.join(","),"){",A.join(`
`),"} return ",ee].join(""));return _e()}var fA=lA,dA=fA;function hA(o){var e=["'use strict'","var CACHED={}"],t=[],n=o.funcName+"_cwise_thunk";e.push(["return function ",n,"(",o.shimArgs.join(","),"){"].join(""));for(var r=[],i=[],s=[["array",o.arrayArgs[0],".shape.slice(",Math.max(0,o.arrayBlockIndices[0]),o.arrayBlockIndices[0]<0?","+o.arrayBlockIndices[0]+")":")"].join("")],a=[],u=[],f=0;f<o.arrayArgs.length;++f){var l=o.arrayArgs[f];t.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),r.push("t"+l),r.push("r"+l),i.push("t"+l),i.push("r"+l+".join()"),s.push("array"+l+".data"),s.push("array"+l+".stride"),s.push("array"+l+".offset|0"),f>0&&(a.push("array"+o.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(o.arrayBlockIndices[0])-Math.abs(o.arrayBlockIndices[f]))),u.push("array"+o.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,o.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,o.arrayBlockIndices[f])+"]"))}o.arrayArgs.length>1&&(e.push("if (!("+a.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+o.arrayArgs[0]+".shape.length-"+Math.abs(o.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var f=0;f<o.scalarArgs.length;++f)s.push("scalar"+o.scalarArgs[f]);t.push(["type=[",i.join(","),"].join()"].join("")),t.push("proc=CACHED[type]"),e.push("var "+t.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",r.join(","),"])}","return proc(",s.join(","),")}"].join("")),o.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var p=new Function("compile",e.join(`
`));return p(dA.bind(void 0,o))}var pA=hA,mA=pA;function _A(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function gA(o){var e=new _A;e.pre=o.pre,e.body=o.body,e.post=o.post;var t=o.args.slice(0);e.argTypes=t;for(var n=0;n<t.length;++n){var r=t[n];if(r==="array"||typeof r=="object"&&r.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(r.blockIndices?r.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(r==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(r==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(r==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof r=="object"&&r.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:r.array,offset:r.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+t[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>t.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>t.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>t.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!o.printCode||!!o.debug,e.funcName=o.funcName||"cwise",e.blockSize=o.blockSize||64,mA(e)}var yA=gA;(function(o){var e=yA,t={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return t;for(var _=0;_<d.args.length;++_){var A=d.args[_];_===0?d.args[_]={name:A,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[_]={name:A,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function r(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function i(d){for(var _=[],A=0;A<d.args.length;++A)_.push("a"+A);var E=new Function("P",["return function ",d.funcName,"_ndarrayops(",_.join(","),") {P(",_.join(","),");return a0}"].join(""));return E(r(d))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in s){var _=s[d];o[d]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+_+"c"},funcName:d}),o[d+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+_+"=b"},rvalue:!0,funcName:d+"eq"}),o[d+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+_+"s"},funcName:d+"s"}),o[d+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+_+"=s"},rvalue:!0,funcName:d+"seq"})}})();var a={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in a){var _=a[d];o[d]=i({args:["array","array"],body:{args:["a","b"],body:"a="+_+"b"},funcName:d}),o[d+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+_+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in u){var _=u[d];o[d]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+_+"c"},funcName:d}),o[d+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+_+"s"},funcName:d+"s"}),o[d+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+_+"b"},rvalue:!0,count:2,funcName:d+"eq"}),o[d+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+_+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<f.length;++d){var _=f[d];o[_]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:_}),o[_+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"eq"})}})();var l=["max","min","atan2","pow"];(function(){for(var d=0;d<l.length;++d){var _=l[d];o[_]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:_}),o[_+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:_+"s"}),o[_+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"eq"}),o[_+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"seq"})}})();var p=["atan2","pow"];(function(){for(var d=0;d<p.length;++d){var _=p[d];o[_+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:_+"op"}),o[_+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:_+"ops"}),o[_+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"opeq"}),o[_+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"opseq"})}})(),o.any=e({args:["array"],pre:t,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),o.all=e({args:["array"],pre:t,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),o.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),o.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),o.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),o.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),o.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),o.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),o.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),o.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),o.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),o.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),o.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),o.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),o.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),o.equals=e({args:["array","array"],pre:t,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Qs);function vA(o,e,t={}){const n=document.createElement("canvas");n.width=o.shape[0],n.height=o.shape[1];const r=n.getContext("2d"),i=r.getImageData(0,0,n.width,n.height);try{og(o,i.data)}catch(a){return hh.from(Promise.reject(a))}r.putImageData(i,0,0);const s=t.quality?t.quality/100:void 0;switch(e){case"canvas":return n;case"jpg":case"jpeg":return up(n,"image/jpeg",s);case"png":return up(n,"image/png");default:throw new Error("[ndarray-pixels] Unsupported file type: "+e)}}function up(o,e,t){const n=new Promise((r,i)=>{o.toBlob(async s=>{s?r(new Uint8Array(await s.arrayBuffer())):i(new Error("[ndarray-pixels] Failed to canvas.toBlob()."))},e,t)});return hh.from(n)}function og(o,e,t=-1){if(o.shape.length===4)return og(o.pick(t),e,0);if(o.shape.length===3)if(o.shape[2]===3)Qs.assign(ts(e,[o.shape[0],o.shape[1],3],[4,4*o.shape[0],1]),o),Qs.assigns(ts(e,[o.shape[0]*o.shape[1]],[4],3),255);else if(o.shape[2]===4)Qs.assign(ts(e,[o.shape[0],o.shape[1],4],[4,4*o.shape[0],1]),o);else{if(o.shape[2]!==1)throw new Error("[ndarray-pixels] Incompatible array shape.");Qs.assign(ts(e,[o.shape[0],o.shape[1],3],[4,4*o.shape[0],1]),ts(o.data,[o.shape[0],o.shape[1],3],[o.stride[0],o.stride[1],0],o.offset)),Qs.assigns(ts(e,[o.shape[0]*o.shape[1]],[4],3),255)}else{if(o.shape.length!==2)throw new Error("[ndarray-pixels] Incompatible array shape.");Qs.assign(ts(e,[o.shape[0],o.shape[1],3],[4,4*o.shape[0],1]),ts(o.data,[o.shape[0],o.shape[1],3],[o.stride[0],o.stride[1],0],o.offset)),Qs.assigns(ts(e,[o.shape[0]*o.shape[1]],[4],3),255)}return e}let hh=class{constructor(e){this._promise=void 0,this._promise=e}on(e,t){return e==="data"?this._promise.then(t):e==="error"?this._promise.catch(t):e==="end"&&this._promise.finally(t),this}static from(e){return new hh(e)}};async function sg(o,e){return o instanceof Uint8Array&&typeof Buffer<"u"&&(o=Buffer.from(o)),new Promise((t,n)=>{(function(r,i,s){if(s=s||i,r instanceof Uint8Array){if(typeof i!="string")throw new Error("[ndarray-pixels] Type must be given for Uint8Array image data");const u=new Blob([r],{type:i});r=URL.createObjectURL(u)}const a=new Image;a.crossOrigin="anonymous",a.onload=function(){URL.revokeObjectURL(r);const u=document.createElement("canvas");u.width=a.width,u.height=a.height;const f=u.getContext("2d");f.drawImage(a,0,0);const l=f.getImageData(0,0,a.width,a.height);s(null,ts(new Uint8Array(l.data),[a.width,a.height,4],[4,4*a.width,1],0))},a.onerror=u=>{URL.revokeObjectURL(r),s(u)},a.src=r})(o,e,(r,i)=>{i&&!r?t(i):n(r)})})}async function ag(o,e){return new Promise((t,n)=>{const r=[],i=e.replace("image/","");vA(o,i).on("data",s=>r.push(s)).on("end",()=>t(function(s){let a=0;for(const l of s)a+=l.byteLength;const u=new Uint8Array(a);let f=0;for(const l of s)u.set(l,f),f+=l.byteLength;return u}(r))).on("error",s=>n(s))})}function ug(){var o=new xs(9);return xs!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function AA(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[4],o[4]=e[5],o[5]=e[6],o[6]=e[8],o[7]=e[9],o[8]=e[10],o}function bA(o,e){if(o===e){var t=e[1],n=e[2],r=e[5];o[1]=e[3],o[2]=e[6],o[3]=t,o[5]=e[7],o[6]=n,o[7]=r}else o[0]=e[0],o[1]=e[3],o[2]=e[6],o[3]=e[1],o[4]=e[4],o[5]=e[7],o[6]=e[2],o[7]=e[5],o[8]=e[8];return o}function EA(o,e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=l*s-a*f,d=-l*i+a*u,_=f*i-s*u,A=t*p+n*d+r*_;return A?(A=1/A,o[0]=p*A,o[1]=(-l*n+r*f)*A,o[2]=(a*n-r*s)*A,o[3]=d*A,o[4]=(l*t-r*u)*A,o[5]=(-a*t+r*i)*A,o[6]=_*A,o[7]=(-f*t+n*u)*A,o[8]=(s*t-n*i)*A,o):null}function cg(){var o=new xs(4);return xs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),o}function TA(o,e){var t=e[0],n=e[1],r=e[2],i=e[3],s=t*t+n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),o[0]=t*s,o[1]=n*s,o[2]=r*s,o[3]=i*s,o}function wA(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]}(function(){var o=cg();return function(e,t,n,r,i,s){var a,u;for(t||(t=4),n||(n=0),r?u=Math.min(r*t+n,e.length):u=e.length,a=n;a<u;a+=t)o[0]=e[a],o[1]=e[a+1],o[2]=e[a+2],o[3]=e[a+3],i(o,o,s),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2],e[a+3]=o[3];return e}})();function cp(){var o=new xs(4);return xs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function CA(o,e,t){t=t*.5;var n=Math.sin(t);return o[0]=n*e[0],o[1]=n*e[1],o[2]=n*e[2],o[3]=Math.cos(t),o}function lp(o,e){var t=xA(o,e);return Math.acos(2*t*t-1)}function wl(o,e,t,n){var r=e[0],i=e[1],s=e[2],a=e[3],u=t[0],f=t[1],l=t[2],p=t[3],d,_,A,E,v;return _=r*u+i*f+s*l+a*p,_<0&&(_=-_,u=-u,f=-f,l=-l,p=-p),1-_>gy?(d=Math.acos(_),A=Math.sin(d),E=Math.sin((1-n)*d)/A,v=Math.sin(n*d)/A):(E=1-n,v=n),o[0]=E*r+v*u,o[1]=E*i+v*f,o[2]=E*s+v*l,o[3]=E*a+v*p,o}function SA(o,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),o[3]=.5*n,n=.5/n,o[0]=(e[5]-e[7])*n,o[1]=(e[6]-e[2])*n,o[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[r*3+r]-e[i*3+i]-e[s*3+s]+1),o[r]=.5*n,n=.5/n,o[3]=(e[i*3+s]-e[s*3+i])*n,o[i]=(e[i*3+r]+e[r*3+i])*n,o[s]=(e[s*3+r]+e[r*3+s])*n}return o}var xA=wA,lg=TA;(function(){var o=Dc(),e=Gh(1,0,0),t=Gh(0,1,0);return function(n,r,i){var s=yy(r,i);return s<-.999999?(af(o,e,r),Ay(o)<1e-6&&af(o,t,r),Gl(o,o),CA(n,o,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(af(o,r,i),n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=1+s,lg(n,n))}})();(function(){var o=cp(),e=cp();return function(t,n,r,i,s,a){return wl(o,n,s,a),wl(e,r,i,a),wl(t,o,e,2*a*(1-a)),t}})();(function(){var o=ug();return function(e,t,n,r){return o[0]=n[0],o[3]=n[1],o[6]=n[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-t[0],o[5]=-t[1],o[8]=-t[2],lg(e,SA(e,o))}})();const BA=(o,e)=>{if(o<=-e||o>=e)return 0;const t=o*Math.PI;return Math.sin(t)/t*Math.sin(t/e)/(t/e)},fp=o=>Math.round(16383*o),dp=(o,e,t,n,r)=>{const i=r?2:3,s=1/t,a=Math.min(1,t),u=i/a,f=Math.floor(2*(u+1)),l=new Int16Array((f+2)*e);let p=0;for(let d=0;d<e;d++){const _=(d+.5)*s+n,A=Math.max(0,Math.floor(_-u)),E=Math.min(o-1,Math.ceil(_+u)),v=E-A+1,T=new Float32Array(v),I=new Int16Array(v);let R=0,k=0;for(let ne=A;ne<=E;ne++){const de=BA((ne+.5-_)*a,i);R+=de,T[k]=de,k++}let K=0;for(let ne=0;ne<T.length;ne++){const de=T[ne]/R;K+=de,I[ne]=fp(de)}I[e>>1]+=fp(1-K);let ee=0;for(;ee<I.length&&I[ee]===0;)ee++;let _e=I.length-1;for(;_e>0&&I[_e]===0;)_e--;const Q=_e-ee+1;l[p++]=A+ee,l[p++]=Q,l.set(I.subarray(ee,_e+1),p),p+=Q}return l},Kc=o=>o<0?0:o>255?255:o,hp=(o,e,t)=>{const[n,r]=o.shape,[i]=e.shape;for(let s=0;s<r;s++){const a=s;let u=0;for(let f=0;f<i;f++){let l=t[u++],p=0,d=0,_=0,A=0;for(let E=t[u++];E>0;E--){const v=t[u++];p+=v*o.get(l,s,0),d+=v*o.get(l,s,1),_+=v*o.get(l,s,2),A+=v*o.get(l,s,3),l++}e.set(f,a,0,Kc(p+8192>>14)),e.set(f,a,1,Kc(d+8192>>14)),e.set(f,a,2,Kc(_+8192>>14)),e.set(f,a,3,Kc(A+8192>>14))}}};var Bu;function fg(o,e,t){const[n,r]=o.shape,[i,s]=e.shape,a=s/r,u=dp(n,i,i/n,0,t===Bu.LANCZOS_2),f=dp(r,s,a,0,t===Bu.LANCZOS_2),l=ts(new Uint8Array(i*r*4),[r,i,4]),p=l.transpose(1,0),d=e.transpose(1,0);hp(o,p,u),hp(l,d,f)}function MA(o,e){fg(o,e,Bu.LANCZOS_3)}function DA(o,e){fg(o,e,Bu.LANCZOS_2)}(function(o){o[o.LANCZOS_3=3]="LANCZOS_3",o[o.LANCZOS_2=2]="LANCZOS_2"})(Bu||(Bu={}));function qi(){return(qi=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}).apply(this,arguments)}function bo(o,e){return Object.defineProperty(e,"name",{value:o}),e}function ph(o,e,t){return!!o&&o.stack.lastIndexOf(e)<o.stack.lastIndexOf(t)}async function pp(o,e,t){if(!o)return null;const n=o.getImage();if(!n)return null;const r=await sg(n,o.getMimeType());for(let s=0;s<r.shape[0];++s)for(let a=0;a<r.shape[1];++a)t(r,s,a);const i=await ag(r,"image/png");return e.setImage(i).setMimeType("image/png")}class mp{constructor(){this._map=new Map}get size(){return this._map.size}has(e){return this._map.has(e)}add(e,t){let n=this._map.get(e);return n||(n=new Set,this._map.set(e,n)),n.add(t),this}get(e){return this._map.get(e)||new Set}keys(){return this._map.keys()}}function _p(o,e=2){if(o===0)return"0 Bytes";const t=e<0?0:e,n=Math.floor(Math.log(o)/Math.log(1e3));return parseFloat((o/Math.pow(1e3,n)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function gp(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function mh(o,e){return`${gp(o)}  ${gp(e)} (${function(t,n,r=2){return(t>n?"":"+")+(Math.abs(t-n)/t*100).toFixed(r)+"%"}(o,e)})`}function _h(o){const e=[];for(const t of o.listAttributes())e.push(t);for(const t of o.listTargets())for(const n of t.listAttributes())e.push(n);return Array.from(new Set(e))}function RA(o,e,t){o.swap(e,t);for(const n of o.listTargets())n.swap(e,t)}function dg(o,e,t){const n=o.getElementSize(),r=o.getCount(),i=o.getArray(),s=i.slice(0,t*n);for(let a=0;a<r;a++)for(let u=0;u<n;u++)s[e[a]*n+u]=i[a*n+u];o.setArray(s)}function yu(o,e=o){const t=e<=65534?new Uint16Array(o):new Uint32Array(o);for(let n=0;n<t.length;n++)t[n]=n;return t}const yp={pivot:"center"};function IA(o=yp){const e=qi({},yp,o);return bo("center",t=>{const n=t.getLogger(),r=t.getRoot(),i=r.listAnimations().length>0||r.listSkins().length>0;t.getRoot().listScenes().forEach((s,a)=>{let u;if(n.debug(`center: Scene ${a+1} / ${r.listScenes().length}.`),typeof e.pivot=="string"){const l=Rc(s);u=[(l.max[0]-l.min[0])/2+l.min[0],(l.max[1]-l.min[1])/2+l.min[1],(l.max[2]-l.min[2])/2+l.min[2]],e.pivot==="above"&&(u[1]=l.max[1]),e.pivot==="below"&&(u[1]=l.min[1])}else u=e.pivot;n.debug(`center: Pivot "${u.join(", ")}".`);const f=[-1*u[0],-1*u[1],-1*u[2]];if(i){n.debug("center: Model contains animation or skin. Adding a wrapper node.");const l=t.createNode("Pivot").setTranslation(f);s.listChildren().forEach(p=>l.addChild(p)),s.addChild(l)}else n.debug("center: Skipping wrapper, offsetting all root nodes."),s.listChildren().forEach(l=>{const p=l.getTranslation();l.setTranslation([p[0]+f[0],p[1]+f[1],p[2]+f[2]])})}),n.debug("center: Complete.")})}const Jc="colorspace";function PA(o){return bo(Jc,e=>{const t=e.getLogger();if(o.inputEncoding==="linear")return void t.info(`${Jc}: Vertex colors already linear. Skipping conversion.`);if(o.inputEncoding!=="sRGB")return void t.error(`${Jc}: Unknown input encoding "${o.inputEncoding}"  should be "sRGB" or "linear". Skipping conversion.`);const n=new Set;function r(s){return s<.04045?.0773993808*s:Math.pow(.9478672986*s+.0521327014,2.4)}function i(s){const a=[0,0,0];let u;for(let f=0;u=s.getAttribute(`COLOR_${f}`);f++)if(!n.has(u)){for(let l=0;l<u.getCount();l++)u.getElement(l,a),a[0]=r(a[0]),a[1]=r(a[1]),a[2]=r(a[2]),u.setElement(l,a);n.add(u)}}e.getRoot().listMeshes().forEach(s=>s.listPrimitives().forEach(i)),t.debug(`${Jc}: Complete.`)})}const df={propertyTypes:[lt.ACCESSOR,lt.MESH,lt.TEXTURE,lt.MATERIAL]},Fc=function(o=df){const e=qi({},df,o),t=new Set(e.propertyTypes);for(const n of e.propertyTypes)if(!df.propertyTypes.includes(n))throw new Error(`dedup: Unsupported deduplication on type "${n}".`);return bo("dedup",n=>{const r=n.getLogger();t.has(lt.ACCESSOR)&&function(i,s){const a=new Set,u=new Set,f=new Set,l=new Set,p=s.getRoot().listMeshes();p.forEach(T=>{T.listPrimitives().forEach(I=>{I.listAttributes().forEach(k=>u.add(k));const R=I.getIndices();R&&a.add(R)})});for(const T of s.getRoot().listAnimations())for(const I of T.listSamplers()){const R=I.getInput(),k=I.getOutput();R&&f.add(R),k&&l.add(k)}function d(T){const I=new Map;for(let R=0;R<T.length;R++){const k=T[R],K=ii.toView(k.getArray());if(!I.has(k))for(let ee=0;ee<T.length;ee++){const _e=T[ee];k!==_e&&(I.has(_e)||k.getType()===_e.getType()&&k.getComponentType()===_e.getComponentType()&&k.getCount()===_e.getCount()&&k.getNormalized()===_e.getNormalized()&&ii.equals(K,ii.toView(_e.getArray()))&&I.set(_e,k))}}return I}const _=d(Array.from(a));i.debug(`dedup: Found ${_.size} duplicates among ${a.size} indices.`);const A=d(Array.from(u));i.debug(`dedup: Found ${A.size} duplicates among ${u.size} attributes.`);const E=d(Array.from(f)),v=d(Array.from(l));i.debug(`dedup: Found ${E.size+v.size} duplicates among ${f.size+l.size} animation accessors.`),p.forEach(T=>{T.listPrimitives().forEach(I=>{I.listAttributes().forEach(k=>{A.has(k)&&I.swap(k,A.get(k))});const R=I.getIndices();R&&_.has(R)&&I.swap(R,_.get(R))})}),Array.from(_.keys()).forEach(T=>T.dispose()),Array.from(A.keys()).forEach(T=>T.dispose());for(const T of s.getRoot().listAnimations())for(const I of T.listSamplers()){const R=I.getInput(),k=I.getOutput();R&&E.has(R)&&I.swap(R,E.get(R)),k&&v.has(k)&&I.swap(k,v.get(k))}Array.from(E.keys()).forEach(T=>T.dispose()),Array.from(v.keys()).forEach(T=>T.dispose())}(r,n),t.has(lt.TEXTURE)&&function(i,s){const a=s.getRoot(),u=a.listTextures(),f=new Map;for(let l=0;l<u.length;l++){const p=u[l],d=p.getImage();if(!f.has(p))for(let _=0;_<u.length;_++){const A=u[_],E=A.getImage();if(p===A||f.has(A)||p.getMimeType()!==A.getMimeType())continue;const v=p.getSize(),T=A.getSize();v&&T&&v[0]===T[0]&&v[1]===T[1]&&d&&E&&ii.equals(d,E)&&f.set(A,p)}}i.debug(`dedup: Found ${f.size} duplicates among ${a.listTextures().length} textures.`),Array.from(f.entries()).forEach(([l,p])=>{l.listParents().forEach(d=>{d instanceof Wa||d.swap(l,p)}),l.dispose()})}(r,n),t.has(lt.MATERIAL)&&function(i,s){const a=s.getRoot(),u=a.listMaterials(),f=new Map,l=new Set(["name"]);for(let p=0;p<u.length;p++){const d=u[p];if(!f.has(d))for(let _=0;_<u.length;_++){const A=u[_];d!==A&&(f.has(A)||d.equals(A,l)&&f.set(A,d))}}i.debug(`dedup: Found ${f.size} duplicates among ${a.listMaterials().length} materials.`),Array.from(f.entries()).forEach(([p,d])=>{p.listParents().forEach(_=>{_ instanceof Wa||_.swap(p,d)}),p.dispose()})}(r,n),t.has(lt.MESH)&&function(i,s){const a=s.getRoot(),u=new Map;a.listAccessors().forEach((p,d)=>u.set(p,d)),a.listMaterials().forEach((p,d)=>u.set(p,d));const f=a.listMeshes().length,l=new Map;for(const p of a.listMeshes()){const d=[];for(const A of p.listPrimitives())d.push(hg(A,u));const _=d.join(";");if(l.has(_)){const A=l.get(_);p.listParents().forEach(E=>{E.propertyType!==lt.ROOT&&E.swap(p,A)}),p.dispose()}else l.set(_,p)}i.debug(`dedup: Found ${f-l.size} duplicates among ${f} meshes.`)}(r,n),r.debug("dedup: Complete.")})};function hg(o,e){const t=[];for(const n of o.listSemantics()){const r=o.getAttribute(n);t.push(n+":"+e.get(r))}if(o instanceof ao){const n=o.getIndices();n&&t.push("indices:"+e.get(n));const r=o.getMaterial();r&&t.push("material:"+e.get(r)),t.push("mode:"+o.getMode());for(const i of o.listTargets())t.push("target:"+hg(i,e))}return t.join(",")}const vp={pattern:/^((?!JOINTS_).)*$/};function FA(o=vp){const e=qi({},vp,o);return bo("dequantize",t=>{const n=t.getLogger();for(const r of t.getRoot().listMeshes())for(const i of r.listPrimitives())LA(i,e);t.createExtension(Ic).dispose(),n.debug("dequantize: Complete.")})}function LA(o,e){for(const t of o.listSemantics())Ap(t,o.getAttribute(t),e);for(const t of o.listTargets())for(const n of t.listSemantics())Ap(n,t.getAttribute(n),e)}function Ap(o,e,t){if(!e.getArray()||!t.pattern.test(o)||e.getComponentSize()>=4)return;const n=e.getArray(),r=new Float32Array(n.length);for(let i=0,s=e.getCount(),a=[];i<s;i++)a=e.getElement(i,a),e.setArray(r).setElement(i,a).setArray(n);e.setArray(r).setNormalized(!1)}const pg={method:"edgebreaker",encodeSpeed:5,decodeSpeed:5,quantizePosition:14,quantizeNormal:10,quantizeColor:8,quantizeTexcoord:12,quantizeGeneric:12,quantizationVolume:"mesh"},OA=o=>{const e=qi({},pg,o);return t=>{t.createExtension(La).setRequired(!0).setEncoderOptions({method:e.method==="edgebreaker"?La.EncoderMethod.EDGEBREAKER:La.EncoderMethod.SEQUENTIAL,encodeSpeed:e.encodeSpeed,decodeSpeed:e.decodeSpeed,quantizationBits:{POSITION:e.quantizePosition,NORMAL:e.quantizeNormal,COLOR:e.quantizeColor,TEX_COORD:e.quantizeTexcoord,GENERIC:e.quantizeGeneric},quantizationVolume:e.quantizationVolume})}};function NA(o){return{scenes:UA(o),meshes:GA(o),materials:kA(o),textures:HA(o),animations:WA(o)}}function UA(o){return{properties:o.getRoot().listScenes().map(e=>{const t=e.listChildren()[0],n=Rc(e);return{name:e.getName(),rootName:t?t.getName():"",bboxMin:bp(n.min),bboxMax:bp(n.max)}})}}function GA(o){return{properties:o.getRoot().listMeshes().map(e=>{const t=e.listParents().filter(l=>l.propertyType!==lt.ROOT).length;let n=0,r=0;const i=new Set,s=new Set,a=new Set;e.listPrimitives().forEach(l=>{for(const d of l.listSemantics()){const _=l.getAttribute(d);i.add(d+":"+Ep(_)),a.add(_)}for(const d of l.listTargets())d.listAttributes().forEach(_=>a.add(_));const p=l.getIndices();p&&(s.add(Ep(p)),a.add(p)),r+=l.listAttributes()[0].getCount(),n+=function(d){const _=d.getIndices(),A=d.getAttribute("POSITION");switch(d.getMode()){case ao.Mode.POINTS:return A.getCount();case ao.Mode.LINES:return _?_.getCount()/2:A.getCount()/2;case ao.Mode.LINE_LOOP:return A.getCount();case ao.Mode.LINE_STRIP:return A.getCount()-1;case ao.Mode.TRIANGLES:return _?_.getCount()/3:A.getCount()/3;case ao.Mode.TRIANGLE_STRIP:case ao.Mode.TRIANGLE_FAN:return A.getCount()-2;default:throw new Error("Unexpected mode: "+d.getMode())}}(l)});let u=0;Array.from(a).forEach(l=>u+=l.getArray().byteLength);const f=e.listPrimitives().map(l=>VA[l.getMode()]);return{name:e.getName(),mode:Array.from(new Set(f)),primitives:e.listPrimitives().length,glPrimitives:n,vertices:r,indices:Array.from(s).sort(),attributes:Array.from(i).sort(),instances:t,size:u}})}}function kA(o){return{properties:o.getRoot().listMaterials().map(e=>{const t=e.listParents().filter(i=>i.propertyType!==lt.ROOT).length,n=new Set(e.listExtensions()),r=o.getGraph().listEdges().filter(i=>{const s=i.getChild(),a=i.getParent();return s instanceof Ha&&a===e||!!(s instanceof Ha&&a instanceof uo&&n.has(a))}).map(i=>i.getName());return{name:e.getName(),instances:t,textures:r,alphaMode:e.getAlphaMode(),doubleSided:e.getDoubleSided()}})}}function HA(o){return{properties:o.getRoot().listTextures().map(e=>{const t=e.listParents().filter(s=>s.propertyType!==lt.ROOT).length,n=o.getGraph().listParentEdges(e).filter(s=>s.getParent().propertyType!==lt.ROOT).map(s=>s.getName()),r=as.getSize(e.getImage(),e.getMimeType());let i="";if(e.getMimeType()==="image/ktx2"){const s=El(e.getImage()).dataFormatDescriptor[0];s.colorModel===q_?i="ETC1S":s.colorModel===X_&&(i="UASTC")}return{name:e.getName(),uri:e.getURI(),slots:Array.from(new Set(n)),instances:t,mimeType:e.getMimeType(),compression:i,resolution:r?r.join("x"):"",size:e.getImage().byteLength,gpuSize:as.getMemSize(e.getImage(),e.getMimeType())}})}}function WA(o){return{properties:o.getRoot().listAnimations().map(e=>{let t=1/0,n=-1/0;e.listSamplers().forEach(a=>{const u=a.getInput();u&&(t=Math.min(t,u.getMin([])[0]),n=Math.max(n,u.getMax([])[0]))});let r=0,i=0;const s=new Set;return e.listSamplers().forEach(a=>{const u=a.getInput(),f=a.getOutput();u&&(i+=u.getCount(),s.add(u),f&&s.add(f))}),Array.from(s).forEach(a=>{r+=a.getArray().byteLength}),{name:e.getName(),channels:e.listChannels().length,samplers:e.listSamplers().length,duration:Math.round(1e3*(n-t))/1e3,keyframes:i,size:r}})}}const VA=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"],jA={Float32Array:"f32",Uint32Array:"u32",Uint16Array:"u16",Uint8Array:"u8",Int32Array:"i32",Int16Array:"i16",Int8Array:"i8"};function bp(o){for(let e=0;e<o.length;e++)o[e].toFixed&&(o[e]=Number(o[e].toFixed(5)));return o}function Ep(o){const e=o.getArray();return(jA[e.constructor.name]||"?")+(o.getNormalized()?"_norm":"")}const Tp={};function zA(o=Tp){return qi({},Tp,o),bo("instance",e=>{const t=e.getLogger(),n=e.getRoot(),r=e.createExtension(Vl);if(n.listAnimations().length)return t.warn("instance: Instancing is not currently supported for animated models."),void t.debug("instance: Complete.");let i=0,s=0;for(const a of n.listScenes()){const u=new Map;a.traverse(l=>{const p=l.getMesh();p&&u.set(p,(u.get(p)||new Set).add(l))});const f=[];for(const l of Array.from(u.keys())){const p=Array.from(u.get(l));if(p.length<2||p.some(k=>k.getSkin()))continue;const d=JA(e,r,l,p.length),_=d.getAttribute("TRANSLATION"),A=d.getAttribute("ROTATION"),E=d.getAttribute("SCALE"),v=e.createNode().setMesh(l).setExtension("EXT_mesh_gpu_instancing",d);a.addChild(v);let T=!1,I=!1,R=!1;for(let k=0;k<p.length;k++){let K,ee,_e;const Q=p[k];_.setElement(k,K=Q.getWorldTranslation()),A.setElement(k,ee=Q.getWorldRotation()),E.setElement(k,_e=Q.getWorldScale()),bi.eq(K,[0,0,0])||(T=!0),bi.eq(ee,[0,0,0,1])||(I=!0),bi.eq(_e,[1,1,1])||(R=!0),Q.setMesh(null),f.push(Q)}T||_.dispose(),I||A.dispose(),R||E.dispose(),KA(f,t),i++,s+=p.length}}t.info(i>0?`instance: Created ${i} batches, with ${s} total instances.`:"instance: No meshes with multiple parent nodes were found."),r.listProperties().length===0&&r.dispose(),t.debug("instance: Complete.")})}function KA(o,e){let t,n=0;for(;t=o.pop();){if(t.listChildren().length||t.getCamera()||t.getMesh()||t.getSkin()||t.listExtensions().length)continue;const r=t.getParent();r instanceof Nu&&o.push(r),t.dispose(),n++}e.debug(`instance: Removed ${n} unused nodes.`)}function JA(o,e,t,n){const r=t.listPrimitives()[0].getAttribute("POSITION").getBuffer(),i=o.createAccessor().setType("VEC3").setArray(new Float32Array(3*n)).setBuffer(r),s=o.createAccessor().setType("VEC4").setArray(new Float32Array(4*n)).setBuffer(r),a=o.createAccessor().setType("VEC3").setArray(new Float32Array(3*n)).setBuffer(r);return e.createInstancedMesh().setAttribute("TRANSLATION",i).setAttribute("ROTATION",s).setAttribute("SCALE",a)}const wp={propertyTypes:[lt.NODE,lt.SKIN,lt.MESH,lt.CAMERA,lt.PRIMITIVE,lt.PRIMITIVE_TARGET,lt.ANIMATION,lt.MATERIAL,lt.TEXTURE,lt.ACCESSOR,lt.BUFFER],keepLeaves:!1,keepAttributes:!0},Yl=function(o=wp){const e=qi({},wp,o),t=new Set(e.propertyTypes);return bo("prune",n=>{const r=n.getLogger(),i=n.getRoot(),s=n.getGraph(),a={};if(t.has(lt.NODE)&&!e.keepLeaves&&i.listScenes().forEach(function d(_){if(_.listChildren().forEach(d),_ instanceof Hl)return;const A=s.listParentEdges(_).some(E=>{const v=E.getParent().propertyType;return v!==lt.ROOT&&v!==lt.SCENE&&v!==lt.NODE});s.listChildren(_).length!==0||A||(_.dispose(),p(_))}),t.has(lt.NODE)&&i.listNodes().forEach(u),t.has(lt.SKIN)&&i.listSkins().forEach(u),t.has(lt.MESH)&&i.listMeshes().forEach(u),t.has(lt.CAMERA)&&i.listCameras().forEach(u),t.has(lt.PRIMITIVE)&&f(s,lt.PRIMITIVE),t.has(lt.PRIMITIVE_TARGET)&&f(s,lt.PRIMITIVE_TARGET),!e.keepAttributes&&t.has(lt.ACCESSOR))for(const d of i.listMeshes())for(const _ of d.listPrimitives()){const A=mg(n,_.getMaterial()),E=qA(_,A);l(_,E),_.listTargets().forEach(v=>l(v,E))}if(t.has(lt.ANIMATION))for(const d of i.listAnimations()){for(const _ of d.listChannels())_.getTargetNode()||(_.dispose(),p(_));if(d.listChannels().length)d.listSamplers().forEach(u);else{const _=d.listSamplers();u(d),_.forEach(u)}}if(t.has(lt.MATERIAL)&&i.listMaterials().forEach(u),t.has(lt.TEXTURE)&&i.listTextures().forEach(u),t.has(lt.ACCESSOR)&&i.listAccessors().forEach(u),t.has(lt.BUFFER)&&i.listBuffers().forEach(u),Object.keys(a).length){const d=Object.keys(a).map(_=>`${_} (${a[_]})`).join(", ");r.info(`prune: Removed types... ${d}`)}else r.info("prune: No unused properties found.");function u(d){d.listParents().filter(_=>!(_ instanceof Wa||_ instanceof da)).length||(d.dispose(),p(d))}function f(d,_){d.listEdges().map(A=>A.getParent()).filter(A=>A.propertyType===_).forEach(u)}function l(d,_){for(const A of _)d.setAttribute(A,null)}function p(d){a[d.propertyType]=a[d.propertyType]||0,a[d.propertyType]++}r.debug("prune: Complete.")})};function qA(o,e){const t=[];for(const n of o.listSemantics())n!=="TANGENT"||e.has(n)?(n.startsWith("TEXCOORD_")&&!e.has(n)||n.startsWith("COLOR_")&&n!=="COLOR_0")&&t.push(n):t.push(n);return t}function mg(o,e,t=new Set){if(!e)return t;const n=o.getGraph().listChildEdges(e),r=new Set;for(const i of n)i.getChild()instanceof Ha&&r.add(i.getName());for(const i of n){const s=i.getName(),a=i.getChild();a instanceof Qi&&r.has(s.replace(/Info$/,""))&&t.add(`TEXCOORD_${a.getTexCoord()}`),a instanceof Ha&&s.match(/normalTexture/i)&&t.add("TANGENT"),a instanceof uo&&mg(o,a,t)}return t}const XA={target:"size"};function _g(o){const e=qi({},XA,o),t=e.encoder;if(!t)throw new Error('reorder: encoder dependency required  install "meshoptimizer".');return bo("reorder",async n=>{const r=n.getLogger();await t.ready;const i=gg(n);for(const s of i.indicesToAttributes.keys()){const a=s.clone();let u=a.getArray().slice();u instanceof Uint32Array||(u=new Uint32Array(u));const[f,l]=t.reorderMesh(u,i.indicesToMode.get(s)===ao.Mode.TRIANGLES,e.target==="size");a.setArray(l<=65534?new Uint16Array(u):u);for(const p of i.indicesToAttributes.get(s)){const d=p.clone();dg(d,f,l);for(const _ of i.attributesToPrimitives.get(p))if(_.getIndices()===s&&_.swap(s,a),_.getIndices()===a){_.swap(p,d);for(const A of _.listTargets())A.swap(p,d)}}}await n.transform(Yl({propertyTypes:[lt.ACCESSOR]})),i.indicesToAttributes.size?r.debug("reorder: Complete."):r.warn("reorder: No qualifying primitives found; may need to weld first.")})}function gg(o){const e=new mp,t=new Map,n=new mp;for(const r of o.getRoot().listMeshes())for(const i of r.listPrimitives()){const s=i.getIndices();if(s){t.set(s,i.getMode());for(const a of _h(i))e.add(s,a),n.add(a,i)}}return{indicesToAttributes:e,indicesToMode:t,attributesToPrimitives:n}}function yg(o,e=1/0){if(Number.isFinite(e)&&e%4||e<=0)throw new Error("Limit must be positive multiple of four.");const t=o.getAttribute("POSITION").getCount(),n=o.listSemantics().filter(f=>f.startsWith("WEIGHTS_")).length,r=new Uint16Array(4*n),i=new Float32Array(4*n),s=new Float32Array(4*n),a=new Uint32Array(4*n),u=new Uint32Array(4*n);for(let f=0;f<t;f++){qc(o,f,"WEIGHTS",i),qc(o,f,"JOINTS",a);for(let l=0;l<4*n;l++)r[l]=l;r.sort((l,p)=>i[l]>i[p]?-1:1);for(let l=0;l<r.length;l++)s[l]=i[r[l]],u[l]=a[r[l]];Xc(o,f,"WEIGHTS",s),Xc(o,f,"JOINTS",u)}for(let f=n;4*f>e;f--){const l=o.getAttribute("WEIGHTS_"+(f-1)),p=o.getAttribute("JOINTS_"+(f-1));o.setAttribute("WEIGHTS_"+(f-1),null),o.setAttribute("JOINTS_"+(f-1),null),l.listParents().length===1&&l.dispose(),p.listParents().length===1&&p.dispose()}(function(f){if(!function(k){const K=k.listSemantics().filter(Q=>Q.startsWith("WEIGHTS_")).map(Q=>k.getAttribute(Q)),ee=K.map(Q=>Q.getNormalized()),_e=K.map(Q=>Q.getComponentType());return new Set(ee).size===1&&new Set(_e).size===1}(f))return;const l=f.getAttribute("POSITION").getCount(),p=f.listSemantics().filter(k=>k.startsWith("WEIGHTS_")).length,d=f.getAttribute("WEIGHTS_0"),_=d.getArray(),A=d.getComponentType(),E=d.getNormalized(),v=E?A:void 0,T=E?bi.denormalize(1,A):Number.EPSILON,I=new Uint32Array(4*p).fill(0),R=_.slice(0,4*p).fill(0);for(let k=0;k<l;k++){qc(f,k,"JOINTS",I),qc(f,k,"WEIGHTS",R,v);let K=Cp(R,v);if(K!==0){if(Math.abs(1-K)>T)for(let ee=0;ee<R.length;ee++)if(E){const _e=bi.normalize(R[ee]/K,A);R[ee]=bi.denormalize(_e,A)}else R[ee]/=K;if(K=Cp(R,v),E&&K!==1){for(let ee=R.length-1;ee>=0;ee--)if(R[ee]>0){R[ee]+=bi.normalize(1-K,A);break}}for(let ee=R.length-1;ee>=0;ee--)R[ee]===0&&(I[ee]=0);Xc(f,k,"JOINTS",I),Xc(f,k,"WEIGHTS",R,v)}}})(o)}function qc(o,e,t,n,r){let i;const s=[0,0,0,0];for(let a=0;i=o.getAttribute(`${t}_${a}`);a++){i.getElement(e,s);for(let u=0;u<4;u++)n[4*a+u]=r?bi.normalize(s[u],r):s[u]}return n}function Xc(o,e,t,n,r){let i;const s=[0,0,0,0];for(let a=0;i=o.getAttribute(`${t}_${a}`);a++){for(let u=0;u<4;u++)s[u]=r?bi.denormalize(n[4*a+u],r):n[4*a+u];i.setElement(e,s)}}function Cp(o,e){let t=0;for(let n=0;n<o.length;n++)t+=e?bi.denormalize(o[n],e):o[n];return t}const YA=[Int8Array,Int16Array,Int32Array],{TRANSLATION:$A,ROTATION:ZA,SCALE:QA,WEIGHTS:eb}=da.TargetPath,tb=[$A,ZA,QA],ud={pattern:/.*/,quantizationVolume:"mesh",quantizePosition:14,quantizeNormal:10,quantizeTexcoord:12,quantizeColor:8,quantizeWeight:8,quantizeGeneric:12,normalizeWeights:!0},vg=(o=ud)=>{const e=qi({},ud,o);return bo("quantize",async t=>{const n=t.getLogger(),r=t.getRoot();let i;t.createExtension(Ic).setRequired(!0),e.quantizationVolume==="scene"&&(i=xp(function(s){const a=s[0];for(const u of s)nd(a.min,a.min,u.min),rd(a.max,a.max,u.max);return a}(r.listMeshes().map(Bp))));for(const s of t.getRoot().listMeshes()){e.quantizationVolume==="mesh"&&(i=xp(Bp(s))),i&&e.pattern.test("POSITION")&&(nb(t,s,i),ib(s,1/i.scale));for(const a of s.listPrimitives()){Sp(t,a,i,e);for(const u of a.listTargets())Sp(t,u,i,e)}}await t.transform(Yl({propertyTypes:[lt.ACCESSOR,lt.SKIN,lt.MATERIAL]}),Fc({propertyTypes:[lt.ACCESSOR,lt.MATERIAL]})),n.debug("quantize: Complete.")})};function Sp(o,e,t,n){const r=o.getLogger();for(const i of e.listSemantics()){if(!n.pattern.test(i))continue;const s=e.getAttribute(i),{bits:a,ctor:u}=sb(i,s,r,n);if(!u)continue;if(a<8||a>16)throw new Error("quantize: Requires bits = 816.");if(s.getComponentSize()<=a/8)continue;const f=s.clone();if(i==="POSITION"){const l=t.scale,p=[];e instanceof ao?by(p,gh(t)):Ty(p,[1/l,1/l,1/l]);for(let d=0,_=[0,0,0],A=f.getCount();d<A;d++)f.getElement(d,_),f.setElement(d,Bd(_,_,p))}ob(f,u,a),e.swap(s,f)}if(n.normalizeWeights&&e.getAttribute("WEIGHTS_0")&&yg(e,1/0),e instanceof ao&&e.getIndices()&&e.listAttributes().length&&e.listAttributes()[0].getCount()<65535){const i=e.getIndices();i.setArray(new Uint16Array(i.getArray()))}}function xp(o){const{min:e,max:t}=o,n=Math.max((t[0]-e[0])/2,(t[1]-e[1])/2,(t[2]-e[2])/2);return{offset:[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2,e[2]+(t[2]-e[2])/2],scale:n}}function nb(o,e,t){const n=gh(t);for(const r of e.listParents()){if(!(r instanceof Nu))continue;const i=r.listParents().filter(l=>l instanceof da),s=i.some(l=>tb.includes(l.getTargetPath())),a=r.listChildren().length>0;if(r.getSkin()){r.setSkin(rb(r.getSkin(),t));continue}let u;a||s?(u=o.createNode("").setMesh(e),r.addChild(u).setMesh(null),i.filter(l=>l.getTargetPath()===eb).forEach(l=>l.setTargetNode(u))):u=r;const f=u.getMatrix();Md(f,f,n),u.setMatrix(f)}}function rb(o,e){o=o.clone();const t=gh(e),n=o.getInverseBindMatrices().clone(),r=[];for(let i=0,s=n.getCount();i<s;i++)n.getElement(i,r),Md(r,r,t),n.setElement(i,r);return o.setInverseBindMatrices(n)}function ib(o,e){for(const t of o.listPrimitives()){let n=t.getMaterial();if(!n)continue;let r=n.getExtension("KHR_materials_volume");!r||r.getThicknessFactor()<=0||(r=r.clone().setThicknessFactor(r.getThicknessFactor()*e),n=n.clone().setExtension("KHR_materials_volume",r),t.setMaterial(n))}}function ob(o,e,t){const n=new e(o.getArray().length),r=YA.includes(e)?1:0,i=t-r,s=8*e.BYTES_PER_ELEMENT-r,a=Math.pow(2,i)-1,u=s-i,f=2*i-s;for(let l=0,p=0,d=[];l<o.getCount();l++){o.getElement(l,d);for(let _=0;_<d.length;_++){let A=Math.round(Math.abs(d[_])*a);A=A<<u|A>>f,n[p++]=A*Math.sign(d[_])}}o.setArray(n).setNormalized(!0)}function sb(o,e,t,n){const r=e.getMinNormalized([]),i=e.getMaxNormalized([]);let s,a;if(o==="POSITION")s=n.quantizePosition,a=s<=8?Int8Array:Int16Array;else if(o==="NORMAL"||o==="TANGENT")s=n.quantizeNormal,a=s<=8?Int8Array:Int16Array;else if(o.startsWith("COLOR_"))s=n.quantizeColor,a=s<=8?Uint8Array:Uint16Array;else if(o.startsWith("TEXCOORD_")){if(r.some(u=>u<0)||i.some(u=>u>1))return t.warn(`quantize: Skipping ${o}; out of [0,1] range.`),{bits:-1};s=n.quantizeTexcoord,a=s<=8?Uint8Array:Uint16Array}else{if(o.startsWith("JOINTS_"))return s=Math.max(...e.getMax([]))<=255?8:16,a=s<=8?Uint8Array:Uint16Array,e.getComponentSize()>s/8&&e.setArray(new a(e.getArray())),{bits:-1};if(o.startsWith("WEIGHTS_")){if(r.some(u=>u<0)||i.some(u=>u>1))return t.warn(`quantize: Skipping ${o}; out of [0,1] range.`),{bits:-1};s=n.quantizeWeight,a=s<=8?Uint8Array:Uint16Array}else{if(!o.startsWith("_"))throw new Error(`quantize: Unexpected semantic, "${o}".`);if(r.some(u=>u<-1)||i.some(u=>u>1))return t.warn(`quantize: Skipping ${o}; out of [-1,1] range.`),{bits:-1};s=n.quantizeGeneric,a=a=r.some(u=>u<0)?s<=8?Int8Array:Int16Array:s<=8?Uint8Array:Uint16Array}}return{bits:s,ctor:a}}function Bp(o){const e=[],t=[];for(const r of o.listPrimitives()){const i=r.getAttribute("POSITION");i&&e.push(i);for(const s of r.listTargets()){const a=s.getAttribute("POSITION");a&&t.push(a)}}if(e.length===0)throw new Error('quantize: Missing "POSITION" attribute.');const n=Mp(e,3);if(t.length>0){const{min:r,max:i}=Mp(t,3);nd(n.min,n.min,nd(r,kh(r,r,2),[0,0,0])),rd(n.max,n.max,rd(i,kh(i,i,2),[0,0,0]))}return n}function Mp(o,e){const t=new Array(e).fill(1/0),n=new Array(e).fill(-1/0),r=[],i=[];for(const s of o){s.getMinNormalized(r),s.getMaxNormalized(i);for(let a=0;a<e;a++)t[a]=Math.min(t[a],r[a]),n[a]=Math.max(n[a],i[a])}return{min:t,max:n}}function gh(o){return Sy([],[0,0,0,1],o.offset,[o.scale,o.scale,o.scale])}const Ag={level:"high"},ab=o=>{const e=qi({},Ag,o),t=e.encoder;if(!t)throw new Error('meshopt: encoder dependency required  install "meshoptimizer".');return async n=>{await n.transform(_g({encoder:t,target:"size"}),vg({pattern:e.level==="medium"?/.*/:/^(POSITION|TEXCOORD|JOINTS|WEIGHTS)(_\d+)?$/,quantizePosition:14,quantizeTexcoord:12,quantizeColor:8,quantizeNormal:8})),n.createExtension(Fa).setRequired(!0).setEncoderOptions({method:e.level==="medium"?Fa.EncoderMethod.QUANTIZE:Fa.EncoderMethod.FILTER})}},Dp={};function ub(o=Dp){return qi({},Dp,o),bo("metalRough",async e=>{const t=e.getLogger();if(!e.getRoot().listExtensionsUsed().map(a=>a.extensionName).includes("KHR_materials_pbrSpecularGlossiness"))return void t.warn("metalRough: KHR_materials_pbrSpecularGlossiness not found on document.");const n=e.createExtension(zl),r=e.createExtension(Jl),i=e.createExtension(Kl),s=new Set;for(const a of e.getRoot().listMaterials()){const u=a.getExtension("KHR_materials_pbrSpecularGlossiness");if(!u)continue;const f=r.createSpecular().setSpecularFactor(1).setSpecularColorFactor(u.getSpecularFactor());s.add(u.getSpecularGlossinessTexture()),s.add(a.getBaseColorTexture()),s.add(a.getMetallicRoughnessTexture()),a.setBaseColorFactor(u.getDiffuseFactor()).setMetallicFactor(0).setRoughnessFactor(1).setExtension("KHR_materials_ior",n.createIOR().setIOR(1e3)).setExtension("KHR_materials_specular",f);const l=u.getDiffuseTexture();l&&(a.setBaseColorTexture(l),a.getBaseColorTextureInfo().copy(u.getDiffuseTextureInfo()));const p=u.getSpecularGlossinessTexture();if(p){const d=u.getSpecularGlossinessTextureInfo(),_=e.createTexture();await pp(p,_,(v,T,I)=>{v.set(T,I,3,255)}),f.setSpecularTexture(_),f.setSpecularColorTexture(_),f.getSpecularTextureInfo().copy(d),f.getSpecularColorTextureInfo().copy(d);const A=u.getGlossinessFactor(),E=e.createTexture();await pp(p,E,(v,T,I)=>{const R=255-Math.round(v.get(T,I,3)*A);v.set(T,I,0,0),v.set(T,I,1,R),v.set(T,I,2,0),v.set(T,I,3,255)}),a.setMetallicRoughnessTexture(E),a.getMetallicRoughnessTextureInfo().copy(d)}else f.setSpecularColorFactor(u.getSpecularFactor()),a.setRoughnessFactor(1-u.getGlossinessFactor());a.setExtension("KHR_materials_pbrSpecularGlossiness",null)}i.dispose();for(const a of s)a&&a.listParents().length===1&&a.dispose();t.debug("metalRough: Complete.")})}const Rp={};function bg(o=Rp){return qi({},Rp,o),bo("unweld",e=>{const t=e.getLogger(),n=new Map;for(const r of e.getRoot().listMeshes())for(const i of r.listPrimitives()){const s=i.getIndices();if(!s)continue;const a=i.getAttribute("POSITION").getCount();for(const f of i.listAttributes())i.swap(f,Ip(f,s,t,n)),f.listParents().length===1&&f.dispose();for(const f of i.listTargets())for(const l of f.listAttributes())f.swap(l,Ip(l,s,t,n)),l.listParents().length===1&&l.dispose();const u=i.getAttribute("POSITION").getCount();t.debug(`unweld: ${mh(a,u)} vertices.`),i.setIndices(null),s.listParents().length===1&&s.dispose()}t.debug("unweld: Complete.")})}function Ip(o,e,t,n){if(n.has(o)&&n.get(o).has(e))return t.debug(`unweld: Cache hit for reused attribute, "${o.getName()}".`),n.get(o).get(e);const r=o.clone(),i=o.getArray().constructor;r.setArray(new i(e.getCount()*o.getElementSize()));const s=[];for(let a=0;a<e.getCount();a++)r.setElement(a,o.getElement(e.getScalar(a),s));return n.has(o)||n.set(o,new Map),n.get(o).set(e,r),r}const Pp={overwrite:!1};function cb(o=Pp){const e=qi({},Pp,o);return bo("normals",async t=>{const n=t.getLogger();let r=0;await t.transform(bg());for(const i of t.getRoot().listMeshes())for(const s of i.listPrimitives()){const a=s.getAttribute("POSITION");let u=s.getAttribute("NORMAL");if(e.overwrite&&u)u.dispose();else if(u){n.debug("normals: Skipping primitive: NORMAL found.");continue}u=t.createAccessor().setArray(new Float32Array(3*a.getCount())).setType("VEC3");const f=[0,0,0],l=[0,0,0],p=[0,0,0];for(let d=0;d<a.getCount();d+=3){a.getElement(d+0,f),a.getElement(d+1,l),a.getElement(d+2,p);const _=lb(f,l,p);u.setElement(d+0,_),u.setElement(d+1,_),u.setElement(d+2,_)}s.setAttribute("NORMAL",u),r++}r?n.debug("normals: Complete."):n.warn("normals: No qualifying primitives found. See debug output.")})}function lb(o,e,t){const n=[e[0]-o[0],e[1]-o[1],e[2]-o[2]],r=[t[0]-o[0],t[1]-o[1],t[2]-o[2]];return Gl([0,0,0],[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]])}const Fp={animations:!0,meshes:!0},fb=(o=Fp)=>{const e=qi({},Fp,o);return bo("partition",async t=>{const n=t.getLogger();e.meshes!==!1&&function(r,i,s){const a=new Set(r.getRoot().listBuffers().map(u=>u.getURI()));r.getRoot().listMeshes().forEach((u,f)=>{if(Array.isArray(s.meshes)&&!s.meshes.includes(u.getName()))return void i.debug(`partition: Skipping mesh #${f} with name "${u.getName()}".`);i.debug(`partition: Creating buffer for mesh "${u.getName()}".`);const l=r.createBuffer(u.getName()).setURI(Lp(u.getName()||"mesh",a));u.listPrimitives().forEach(p=>{const d=p.getIndices();d&&d.setBuffer(l),p.listAttributes().forEach(_=>_.setBuffer(l)),p.listTargets().forEach(_=>{_.listAttributes().forEach(A=>A.setBuffer(l))})})})}(t,n,e),e.animations!==!1&&function(r,i,s){const a=new Set(r.getRoot().listBuffers().map(u=>u.getURI()));r.getRoot().listAnimations().forEach((u,f)=>{if(Array.isArray(s.animations)&&!s.animations.includes(u.getName()))return void i.debug(`partition: Skipping animation #${f} with name "${u.getName()}".`);i.debug(`partition: Creating buffer for animation "${u.getName()}".`);const l=r.createBuffer(u.getName()).setURI(Lp(u.getName()||"animation",a));u.listSamplers().forEach(p=>{const d=p.getInput(),_=p.getOutput();d&&d.setBuffer(l),_&&_.setBuffer(l)})})}(t,n,e),e.meshes||e.animations||n.warn("partition: Select animations or meshes to create a partition."),await t.transform(Yl({propertyTypes:[lt.BUFFER]})),n.debug("partition: Complete.")})};function Lp(o,e){let t=`${o}.bin`,n=1;for(;e.has(t);)t=`${o}_${n++}.bin`;return t}const Op={tolerance:1e-4},db=(o=Op)=>{const e=qi({},Op,o);return bo("resample",async(t,n)=>{const r=new Set,i=t.getRoot().listAccessors().length,s=t.getLogger();let a=!1;for(const u of t.getRoot().listAnimations()){const f=new Map;for(const l of u.listChannels())f.set(l.getSampler(),l.getTargetPath());for(const l of u.listSamplers())f.get(l)!=="weights"?l.getInterpolation()!=="STEP"&&l.getInterpolation()!=="LINEAR"||(r.add(l.getInput()),r.add(l.getOutput()),hb(l,f.get(l),e)):a=!0}for(const u of Array.from(r.values()))u.listParents().some(f=>!(f instanceof Wa))||u.dispose();t.getRoot().listAccessors().length>i&&!ph(n,"resample","dedup")&&await t.transform(Fc({propertyTypes:[lt.ACCESSOR]})),a&&s.warn("resample: Skipped optimizing morph target keyframes, not yet supported."),s.debug("resample: Complete.")})};function hb(o,e,t){const n=o.getInput().clone(),r=o.getOutput().clone(),i=t.tolerance,s=o.getInterpolation(),a=n.getCount()-1,u=[],f=[],l=[],p=[];let d=1;for(let _=1;_<a;++_){const A=n.getScalar(d-1),E=n.getScalar(_),v=n.getScalar(_+1),T=(E-A)/(v-A);let I=!1;if(E!==v&&(_!==1||E!==n.getScalar(0)))if(r.getElement(d-1,p),r.getElement(_,f),r.getElement(_+1,l),s==="LINEAR"&&e==="rotation"){const R=wl(u,p,l,T),k=lp(p,f)+lp(f,l);I=!bi.eq(f,R,i)||k+Number.EPSILON>=Math.PI}else if(s==="LINEAR"){const R=mb(u,p,l,T);I=!bi.eq(f,R,i)}else s==="STEP"&&(I=!bi.eq(f,p)||!bi.eq(f,l));I&&(_!==d&&(n.setScalar(d,n.getScalar(_)),r.setElement(d,r.getElement(_,u))),d++)}a>0&&(n.setScalar(d,n.getScalar(a)),r.setElement(d,r.getElement(a,u)),d++),d!==n.getCount()?(n.setArray(n.getArray().slice(0,d)),r.setArray(r.getArray().slice(0,d*r.getElementSize())),o.setInput(n),o.setOutput(r)):(n.dispose(),r.dispose())}function pb(o,e,t){return o*(1-t)+e*t}function mb(o,e,t,n){for(let r=0;r<e.length;r++)o[r]=pb(e[r],t[r],n);return o}const Np={name:"",fps:10,pattern:/.*/,sort:!0};function _b(o=Np){const e=qi({},Np,o);return bo("sequence",t=>{const n=t.getLogger(),r=t.getRoot(),i=e.fps,s=r.listNodes().filter(f=>f.getName().match(e.pattern));e.sort&&s.sort((f,l)=>f.getName()>l.getName()?1:-1);const a=t.createAnimation(e.name),u=r.listBuffers()[0];s.forEach((f,l)=>{let p,d;l===0?(p=[l/i,(l+1)/i],d=[1,1,1,0,0,0]):l===s.length-1?(p=[(l-1)/i,l/i],d=[0,0,0,1,1,1]):(p=[(l-1)/i,l/i,(l+1)/i],d=[0,0,0,1,1,1,0,0,0]);const _=t.createAccessor().setArray(new Float32Array(p)).setBuffer(u),A=t.createAccessor().setArray(new Float32Array(d)).setBuffer(u).setType(wn.Type.VEC3),E=t.createAnimationSampler().setInterpolation(Xa.Interpolation.STEP).setInput(_).setOutput(A),v=t.createAnimationChannel().setTargetNode(f).setTargetPath(da.TargetPath.SCALE).setSampler(E);a.addSampler(E).addChannel(v)}),n.debug("sequence: Complete.")})}const cd={tolerance:1e-4,overwrite:!0};function Eg(o=cd){const e=qi({},cd,o);if(e.tolerance>.1||e.tolerance<0)throw new Error("weld: Requires 0  tolerance  0.1");return bo("weld",async(t,n)=>{const r=t.getLogger();for(const i of t.getRoot().listMeshes())for(const s of i.listPrimitives())Tg(t,s,e);ph(n,"weld","dedup")||await t.transform(Fc({propertyTypes:[lt.ACCESSOR]})),r.debug("weld: Complete.")})}function Tg(o,e,t){e.getIndices()&&!t.overwrite||e.getMode()!==ao.Mode.POINTS&&(t.tolerance===0?function(n,r){if(r.getIndices())return;const i=r.listAttributes()[0],s=i.getCount(),a=i.getBuffer(),u=n.createAccessor().setBuffer(a).setType(wn.Type.SCALAR).setArray(yu(s));r.setIndices(u)}(o,e):function(n,r,i){const s=n.getLogger(),a=r.getAttribute("POSITION"),u=r.getIndices()||n.createAccessor().setArray(yu(a.getCount())),f=new Uint32Array(new Set(u.getArray())),l=Math.max(i.tolerance,Number.EPSILON),p={};for(const ee of r.listSemantics()){const _e=r.getAttribute(ee);p[ee]=gb(ee,_e,l)}var d;s.debug(`weld: Tolerance thresholds: ${d=p,Object.entries(d).map(([ee,_e])=>`${ee}=${_e}`).join(", ")}`);const _=[0,0,0],A=[0,0,0];f.sort((ee,_e)=>(a.getElement(ee,_),a.getElement(_e,A),_[0]>A[0]?1:-1));const E=yu(f.length),v=yu(f.length),T=a.getCount();let I=0,R=0;for(let ee=0;ee<f.length;ee++){const _e=f[ee];for(let Q=ee-1;Q>=0;Q--){const ne=E[f[Q]];if(a.getElement(_e,_),a.getElement(ne,A),Math.abs(_[0]-A[0])>p.POSITION)break;R++;const de=r.listSemantics().every(Pe=>Gp(r.getAttribute(Pe),_e,ne,p[Pe])),Ie=r.listTargets().every(Pe=>Pe.listSemantics().every(Te=>Gp(Pe.getAttribute(Te),_e,ne,p[Te])));if(de&&Ie){E[_e]=ne;break}}v[_e]=E[_e]===_e?I++:v[E[_e]]}s.debug(`weld: Iterations per vertex: ${Math.round(R/f.length)} (avg)`),s.debug(`weld: ${mh(T,I)} vertices.`);const k=u.getCount(),K=yu(k,f.length);for(let ee=0;ee<k;ee++)K[ee]=v[u.getScalar(ee)];r.setIndices(u.clone().setArray(K)),u.listParents().length===1&&u.dispose();for(const ee of r.listAttributes())Up(r,ee,v,I);for(const ee of r.listTargets())for(const _e of ee.listAttributes())Up(ee,_e,v,I)}(o,e,t))}function Up(o,e,t,n){const r=(i=e.getArray(),s=n*e.getElementSize(),new i.constructor(s));var i,s;const a=e.clone().setArray(r),u=new Uint8Array(n);for(let f=0,l=[];f<t.length;f++)u[t[f]]||(a.setElement(t[f],e.getElement(f,l)),u[t[f]]=1);o.swap(e,a),e.listParents().length===1&&e.dispose()}const hc=[],pc=[];function gb(o,e,t){return o==="NORMAL"||o==="TANGENT"?.5:o.startsWith("COLOR_")?.01:o.startsWith("TEXCOORD_")?1e-4:o.startsWith("JOINTS_")?0:o.startsWith("WEIGHTS_")?.01:(hc.length=pc.length=0,e.getMinNormalized(hc),e.getMaxNormalized(pc),t*(Math.max(...pc)-Math.min(...hc)||1))}function Gp(o,e,t,n,r){o.getElement(e,hc),o.getElement(t,pc);for(let i=0,s=o.getElementSize();i<s;i++)if(Math.abs(hc[i]-pc[i])>n)return!1;return!0}const yh={ratio:.5,error:.001,lockBorder:!1},yb=o=>{const e=qi({},yh,o),t=e.simplifier;if(!t)throw new Error('simplify: simplifier dependency required  install "meshoptimizer".');return bo("simplify",async(n,r)=>{const i=n.getLogger();await t.ready,await n.transform(Eg({overwrite:!1}));for(const s of n.getRoot().listMeshes())for(const a of s.listPrimitives())a.getMode()===ao.Mode.TRIANGLES?wg(n,a,e):i.warn(`simplify: Skipping primitive of mesh "${s.getName()}": Requires TRIANGLES draw mode.`);ph(r,"simplify","dedup")||await n.transform(Fc({propertyTypes:[lt.ACCESSOR]})),i.debug("simplify: Complete.")})};function wg(o,e,t){const n=qi({},yh,t),r=n.simplifier,i=o.getLogger(),s=e.getAttribute("POSITION"),a=e.getIndices(),u=s.getCount();let f=s.getArray(),l=a.getArray();if(s.getComponentType()!==wn.ComponentType.FLOAT)if(s.getNormalized()){const T=f,I=new Float32Array(T.length);for(let R=0,k=s.getCount(),K=[];R<k;R++)K=s.getElement(R,K),s.setArray(I).setElement(R,K).setArray(T);f=I}else f=new Float32Array(f);a.getComponentType()!==wn.ComponentType.UNSIGNED_INT&&(l=new Uint32Array(l));const p=3*Math.floor(n.ratio*u/3),[d,_]=r.simplify(l,f,3,p,n.error,n.lockBorder?["LockBorder"]:[]),[A,E]=r.compactMesh(d);i.debug(`simplify: ${mh(s.getCount(),E)} vertices, error: ${_.toFixed(4)}.`);for(const T of _h(e)){const I=T.clone();dg(I,A,E),RA(e,T,I),T.listParents().length===1&&T.dispose()}const v=a.clone();return v.setArray(u<=65534?new Uint16Array(d):d),e.setIndices(v),a.listParents().length===1&&a.dispose(),e}function vb(o,e){const t=vh(o,e),n=[];return t&ho.R&&n.push(ho.R),t&ho.G&&n.push(ho.G),t&ho.B&&n.push(ho.B),t&ho.A&&n.push(ho.A),n}function vh(o,e){let t=0;for(const n of o.getGraph().listParentEdges(e)){const r=n.getParent();let{channels:i}=n.getAttributes();i&&n.getName()==="baseColorTexture"&&r instanceof Ks&&r.getAlphaMode()===Ks.AlphaMode.OPAQUE&&(i&=~ho.A),i?t|=i:r.propertyType!==lt.ROOT&&o.getLogger().warn(`Missing attribute ".channels" on edge, "${n.getName()}".`)}return t}function Ah(o,e){const t=o.getRoot(),n=o.getGraph().listParentEdges(e).filter(r=>r.getParent()!==t).map(r=>r.getName());return Array.from(new Set(n))}var Cs;(function(o){o.OXIPNG="oxipng",o.MOZJPEG="mozjpeg",o.WEBP="webp"})(Cs||(Cs={}));const Cg={[Cs.OXIPNG]:"image/png",[Cs.MOZJPEG]:"image/jpeg",[Cs.WEBP]:"image/webp"},$l={jobs:4,formats:/.*/,slots:/.*/,auto:!1},Ab=qi({},$l,{codec:Cs.WEBP}),bb=qi({},$l,{codec:Cs.MOZJPEG,formats:/^image\/jpeg$/}),Eb=qi({},$l,{codec:Cs.OXIPNG,formats:/^image\/png$/}),Tb=["image/jpeg","image/png","image/webp"];let Tu=null,ld=0;const wb=(o,e)=>(Tu||(Tu=new o.ImagePool(e)),ld++,Tu),Cb=()=>{ld--,Tu&&ld<=0&&(Tu.close(),Tu=null)},Zl=function(o){const e=qi({},$l,o),t=e.squoosh,n=e.codec;if(!t)throw new Error(`${n}: squoosh dependency required  install "@squoosh/lib".`);return async r=>{const i=r.getLogger(),s=r.getRoot().listTextures(),a=wb(t,e.jobs);await Promise.all(s.map(async(u,f)=>{const l=Ah(r,u),p=vh(r,u),d=u.getURI()||u.getName()||`${f+1}/${r.getRoot().listTextures().length}`,_=`${n}:texture(${d})`;if(!Tb.includes(u.getMimeType()))return void i.debug(`${_}: Skipping, unsupported texture type "${u.getMimeType()}".`);if(!e.formats.test(u.getMimeType()))return void i.debug(`${_}: Skipping, "${u.getMimeType()}" excluded by "formats" parameter.`);if(l.length&&!l.some(I=>e.slots.test(I)))return void i.debug(`${_}: Skipping, [${l.join(", ")}] excluded by "slots" parameter.`);if(e.codec===Cs.MOZJPEG&&p&ho.A)return void i.warn(`${_}: Skipping, [${l.join(", ")}] requires alpha channel.`);i.debug(`${_}: Slots  [${l.join(", ")}]`);const A=a.ingestImage(u.getImage()),E=u.getImage().byteLength;await A.encode({[e.codec]:e.auto?"auto":{}});const v=await A.encodedWith[e.codec];i.debug(`${_}: ${JSON.stringify(v.optionsUsed)}`),u.setImage(v.binary).setMimeType(Cg[e.codec]);const T=v.binary.byteLength;i.debug(`${_}: ${_p(E)}  ${_p(T)}`)})),Cb(),i.debug(`${n}: Complete.`)}},Sb=function(o){const e=qi({},Ab,o);return async t=>{await Zl(e)(t),t.getRoot().listTextures().some(n=>n.getMimeType()===Cg[Cs.WEBP])&&t.createExtension(jl).setRequired(!0)}},xb=function(o){const e=qi({},bb,o);return t=>Zl(e)(t)},Bb=function(o){const e=qi({},Eb,o);return t=>Zl(e)(t)},kp={overwrite:!1};function Mb(o=kp){if(!o.generateTangents)throw new Error('tangents: generateTangents callback required  install "mikktspace".');const e=qi({},kp,o);return bo("tangents",t=>{const n=t.getLogger(),r=new Map,i=new Map;let s=0;for(const a of t.getRoot().listMeshes()){const u=a.getName(),f=a.listPrimitives();for(let l=0;l<f.length;l++){const p=f[l];if(!Rb(p,n,u,l,e.overwrite))continue;const d=Db(p),_=p.getAttribute("POSITION").getArray(),A=p.getAttribute("NORMAL").getArray(),E=p.getAttribute(d).getArray(),v=r.get(_)||fc();r.set(_,v);const T=r.get(A)||fc();r.set(A,T);const I=r.get(E)||fc();r.set(E,I);const R=p.getAttribute("TANGENT");R&&R.listParents().length===2&&R.dispose();const k=`${v}|${T}|${I}`;let K=i.get(k);if(K){n.debug(`tangents: Found cache for primitive ${l} of mesh "${u}".`),p.setAttribute("TANGENT",K),s++;continue}n.debug(`tangents: Generating for primitive ${l} of mesh "${u}".`);const ee=p.getAttribute("POSITION").getBuffer(),_e=e.generateTangents(_ instanceof Float32Array?_:new Float32Array(_),A instanceof Float32Array?A:new Float32Array(A),E instanceof Float32Array?E:new Float32Array(E));for(let Q=3;Q<_e.length;Q+=4)_e[Q]*=-1;K=t.createAccessor().setBuffer(ee).setArray(_e).setType("VEC4"),p.setAttribute("TANGENT",K),i.set(k,K),s++}}s?n.debug("tangents: Complete."):n.warn("tangents: No qualifying primitives found. See debug output.")})}function Db(o){const e=o.getMaterial();if(!e)return"TEXCOORD_0";const t=e.getNormalTextureInfo();if(!t)return"TEXCOORD_0";const n=`TEXCOORD_${t.getTexCoord()}`;return o.getAttribute(n)?n:"TEXCOORD_0"}function Rb(o,e,t,n,r){return o.getMode()===ao.Mode.TRIANGLES&&o.getAttribute("POSITION")&&o.getAttribute("NORMAL")&&o.getAttribute("TEXCOORD_0")?o.getAttribute("TANGENT")&&!r?(e.debug(`tangents: Skipping primitive ${n} of mesh "${t}": TANGENT found.`),!1):!o.getIndices()||(e.warn(`tangents: Skipping primitive ${n} of mesh "${t}": primitives must be unwelded.`),!1):(e.debug(`tangents: Skipping primitive ${n} of mesh "${t}": primitives must have attributes=[POSITION, NORMAL, TEXCOORD_0] and mode=TRIANGLES.`),!1)}const Rs="textureResize";var bc;(function(o){o.LANCZOS3="lanczos3",o.LANCZOS2="lanczos2"})(bc||(bc={}));const fd={size:[2048,2048],filter:bc.LANCZOS3,pattern:null,slots:null};function Ib(o=fd){const e=qi({},fd,o);return bo(Rs,async t=>{const n=t.getLogger();for(const r of t.getRoot().listTextures()){const i=r.getName(),s=r.getURI();if(e.pattern&&!e.pattern.test(i)&&!e.pattern.test(s)){n.debug(`${Rs}: Skipping, excluded by "pattern" parameter.`);continue}if(r.getMimeType()!=="image/png"&&r.getMimeType()!=="image/jpeg"){n.warn(`${Rs}: Skipping, unsupported texture type "${r.getMimeType()}".`);continue}const a=Ah(t,r);if(e.slots&&!a.some(T=>{var I;return(I=e.slots)==null?void 0:I.test(T)})){n.debug(`${Rs}: Skipping, [${a.join(", ")}] excluded by "slots" parameter.`);continue}const[u,f]=e.size,[l,p]=r.getSize();if(l<=u&&p<=f){n.debug(`${Rs}: Skipping, not within size range.`);continue}let d=l,_=p;d>u&&(_=Math.floor(_*(u/d)),d=u),_>f&&(d=Math.floor(d*(f/_)),_=f);const A=r.getImage(),E=await sg(A,r.getMimeType()),v=ts(new Uint8Array(d*_*4),[d,_,4]);n.debug(`${Rs}: Resizing "${s||i}", ${E.shape}  ${v.shape}...`),n.debug(`${Rs}: Slots  [${a.join(", ")}]`);try{e.filter===bc.LANCZOS3?MA(E,v):DA(E,v)}catch(T){if(T instanceof Error){n.warn(`${Rs}: Failed to resize "${s||i}": "${T.message}".`);continue}throw T}r.setImage(await ag(v,r.getMimeType()))}n.debug(`${Rs}: Complete.`)})}function Pb(o,e,t=!1,n){for(const r of o.listPrimitives())if(r.listParents().some(i=>i.propertyType===lt.MESH&&i!==o)){const i=r.clone();o.swap(r,i);for(const s of i.listTargets()){const a=s.clone();i.swap(s,a)}}if(!t){const r=new Set([...o.listPrimitives(),...o.listPrimitives().flatMap(s=>s.listTargets())]),i=new Map;for(const s of o.listPrimitives())for(const a of _h(s))a.listParents().some(u=>(u instanceof ao||u instanceof Ld)&&!r.has(u))&&!i.has(a)&&i.set(a,a.clone());for(const s of r)for(const[a,u]of i)s.swap(a,u)}n=n||new Set;for(const r of o.listPrimitives())Sg(r,e,n)}function Sg(o,e,t=new Set){var n;const r=o.getAttribute("POSITION"),i=((n=o.getIndices())==null?void 0:n.getArray())||yu(r.getCount());r&&Hp(e,r,i,new Set(t));const s=o.getAttribute("NORMAL");s&&Wp(e,s,i,new Set(t));const a=o.getAttribute("TANGENT");a&&Vp(e,a,i,new Set(t));for(const u of o.listTargets()){const f=u.getAttribute("POSITION");f&&Hp(e,f,i,new Set(t));const l=u.getAttribute("NORMAL");l&&Wp(e,l,i,new Set(t));const p=u.getAttribute("TANGENT");p&&Vp(e,p,i,new Set(t))}for(let u=0;u<i.length;u++)t.add(i[u])}function Hp(o,e,t,n){const r=new Float32Array(3*e.getCount()),i=e.getElementSize();for(let a=0,u=[],f=e.getCount();a<f;a++)r.set(e.getElement(a,u),a*i);const s=Dc();for(let a=0;a<t.length;a++){const u=t[a];n.has(u)||(e.getElement(u,s),Bd(s,s,o),r.set(s,3*u),n.add(u))}e.setArray(r).setNormalized(!1)}function Wp(o,e,t,n){const r=ug();AA(r,o),EA(r,r),bA(r,r);const i=Dc();for(let s=0;s<t.length;s++){const a=t[s];n.has(a)||(e.getElement(a,i),vy(i,i,r),Gl(i,i),e.setElement(a,i),n.add(a))}}function Vp(o,e,t,n){const r=Dc(),i=cg();for(let s=0;s<t.length;s++){const a=t[s];if(n.has(a))continue;e.getElement(a,i);const[u,f,l]=i;r[0]=o[0]*u+o[4]*f+o[8]*l,r[1]=o[1]*u+o[5]*f+o[9]*l,r[2]=o[2]*u+o[6]*f+o[10]*l,Gl(r,r),i[0]=r[0],i[1]=r[1],i[2]=r[2],e.setElement(a,i),n.add(a)}}const Fb=()=>o=>{const e=o.createExtension(ql).createUnlit();o.getRoot().listMaterials().forEach(t=>{t.setExtension("KHR_materials_unlit",e)})},jp={},Lb=(o=jp)=>(qi({},jp,o),bo("unpartition",async e=>{const t=e.getLogger(),n=e.getRoot().listBuffers()[0];e.getRoot().listAccessors().forEach(r=>r.setBuffer(n)),e.getRoot().listBuffers().forEach((r,i)=>i>0?r.dispose():null),t.debug("unpartition: Complete.")}));function Ob(o,e){const t=o.getGraph(),n=[];for(const r of t.listParentEdges(e)){const i=r.getParent(),s=r.getName()+"Info";for(const a of t.listChildEdges(i)){const u=a.getChild();u instanceof Qi&&a.getName()===s&&n.push(u)}}return n}const Nb=Object.freeze(Object.defineProperty({__proto__:null,DRACO_DEFAULTS:pg,MESHOPT_DEFAULTS:Ag,QUANTIZE_DEFAULTS:ud,SIMPLIFY_DEFAULTS:yh,TEXTURE_RESIZE_DEFAULTS:fd,get TextureResizeFilter(){return bc},WELD_DEFAULTS:cd,bounds:Rc,center:IA,colorspace:PA,createLayoutPlan:gg,dedup:Fc,dequantize:FA,draco:OA,getTextureChannelMask:vh,inspect:NA,instance:zA,listTextureChannels:vb,listTextureInfo:Ob,listTextureSlots:Ah,meshopt:ab,metalRough:ub,mozjpeg:xb,normals:cb,oxipng:Bb,partition:fb,prune:Yl,quantize:vg,reorder:_g,resample:db,sequence:_b,simplify:yb,simplifyPrimitive:wg,sortPrimitiveWeights:yg,squoosh:Zl,tangents:Mb,textureResize:Ib,transformMesh:Pb,transformPrimitive:Sg,unlit:Fb,unpartition:Lb,unweld:bg,webp:Sb,weld:Eg,weldPrimitive:Tg},Symbol.toStringTag,{value:"Module"})),Ub=Ou(Nb);var Qa={},hf={},zp;function Gb(){if(zp)return hf;zp=1;var o=function(){return function(l){l=l||{};function t(){return Oe.buffer!=$t&&ar(Oe.buffer),vn}function n(){return Oe.buffer!=$t&&ar(Oe.buffer),Cr}function r(){return Oe.buffer!=$t&&ar(Oe.buffer),Qr}function i(){return Oe.buffer!=$t&&ar(Oe.buffer),yi}function s(){return Oe.buffer!=$t&&ar(Oe.buffer),Li}function a(){return Oe.buffer!=$t&&ar(Oe.buffer),Sr}function u(){return Oe.buffer!=$t&&ar(Oe.buffer),Mn}function f(){return Oe.buffer!=$t&&ar(Oe.buffer),vi}var l=typeof l<"u"?l:{},p,d;l.ready=new Promise(function(h,g){p=h,d=g});var _={},A;for(A in l)l.hasOwnProperty(A)&&(_[A]=l[A]);var E=function(h,g){throw g},v=typeof importScripts=="function",T=l.ENVIRONMENT_IS_PTHREAD||!1,I="";function R(h){return l.locateFile?l.locateFile(h,I):I+h}var k,K,ee,_e;{v?I=ri.dirname(I)+"/":I=__dirname+"/",k=function(g,B){return ee||(ee=ri),_e||(_e=ri),g=_e.normalize(g),ee.readFileSync(g,B?null:"utf8")},K=function(g){var B=k(g,!0);return B.buffer||(B=new Uint8Array(B)),_t(B.buffer),B},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),E=function(h){process.exit(h)},l.inspect=function(){return"[Emscripten Module object]"};var Q;try{Q=ri}catch(h){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),h}gi.Worker=Q.Worker}typeof performance>"u"&&(gi.performance=ri.performance);var ne=l.print||console.log.bind(console),de=l.printErr||console.warn.bind(console);for(A in _)_.hasOwnProperty(A)&&(l[A]=_[A]);_=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&(E=l.quit);var Ie=0,Pe=function(h){Ie=h},Te=function(){return Ie},Ee;l.wasmBinary&&(Ee=l.wasmBinary);var Se=l.noExitRuntime||!0;typeof WebAssembly!="object"&&Cn("no native wasm support detected");var Oe,We,j=!1;function _t(h,g){h||Cn("Assertion failed: "+g)}function Qe(h,g,B){for(var N=g+B,z="";!(g>=N);){var x=h[g++];if(!x)return z;if(!(x&128)){z+=String.fromCharCode(x);continue}var O=h[g++]&63;if((x&224)==192){z+=String.fromCharCode((x&31)<<6|O);continue}var Z=h[g++]&63;if((x&240)==224?x=(x&15)<<12|O<<6|Z:x=(x&7)<<18|O<<12|Z<<6|h[g++]&63,x<65536)z+=String.fromCharCode(x);else{var ce=x-65536;z+=String.fromCharCode(55296|ce>>10,56320|ce&1023)}}return z}function Je(h,g){return h?Qe(n(),h,g):""}function ze(h,g,B,N){if(!(N>0))return 0;for(var z=B,x=B+N-1,O=0;O<h.length;++O){var Z=h.charCodeAt(O);if(Z>=55296&&Z<=57343){var ce=h.charCodeAt(++O);Z=65536+((Z&1023)<<10)|ce&1023}if(Z<=127){if(B>=x)break;g[B++]=Z}else if(Z<=2047){if(B+1>=x)break;g[B++]=192|Z>>6,g[B++]=128|Z&63}else if(Z<=65535){if(B+2>=x)break;g[B++]=224|Z>>12,g[B++]=128|Z>>6&63,g[B++]=128|Z&63}else{if(B+3>=x)break;g[B++]=240|Z>>18,g[B++]=128|Z>>12&63,g[B++]=128|Z>>6&63,g[B++]=128|Z&63}}return g[B]=0,B-z}function ct(h,g,B){return ze(h,n(),g,B)}function He(h){for(var g=0,B=0;B<h.length;++B){var N=h.charCodeAt(B);N>=55296&&N<=57343&&(N=65536+((N&1023)<<10)|h.charCodeAt(++B)&1023),N<=127?++g:N<=2047?g+=2:N<=65535?g+=3:g+=4}return g}function P(h,g){for(var B="",N=0;!(N>=g/2);++N){var z=r()[h+N*2>>1];if(z==0)break;B+=String.fromCharCode(z)}return B}function nt(h,g,B){if(B===void 0&&(B=2147483647),B<2)return 0;B-=2;for(var N=g,z=B<h.length*2?B/2:h.length,x=0;x<z;++x){var O=h.charCodeAt(x);r()[g>>1]=O,g+=2}return r()[g>>1]=0,g-N}function Fn(h){return h.length*2}function Yt(h,g){for(var B=0,N="";!(B>=g/4);){var z=s()[h+B*4>>2];if(z==0)break;if(++B,z>=65536){var x=z-65536;N+=String.fromCharCode(55296|x>>10,56320|x&1023)}else N+=String.fromCharCode(z)}return N}function kn(h,g,B){if(B===void 0&&(B=2147483647),B<4)return 0;for(var N=g,z=N+B-4,x=0;x<h.length;++x){var O=h.charCodeAt(x);if(O>=55296&&O<=57343){var Z=h.charCodeAt(++x);O=65536+((O&1023)<<10)|Z&1023}if(s()[g>>2]=O,g+=4,g+4>z)break}return s()[g>>2]=0,g-N}function Et(h){for(var g=0,B=0;B<h.length;++B){var N=h.charCodeAt(B);N>=55296&&N<=57343&&++B,g+=4}return g}function dn(h,g){return h%g>0&&(h+=g-h%g),h}var $t,vn,Cr,Qr,yi,Li,Sr,Mn,vi;T&&($t=l.buffer);function ar(h){$t=h,l.HEAP8=vn=new Int8Array(h),l.HEAP16=Qr=new Int16Array(h),l.HEAP32=Li=new Int32Array(h),l.HEAPU8=Cr=new Uint8Array(h),l.HEAPU16=yi=new Uint16Array(h),l.HEAPU32=Sr=new Uint32Array(h),l.HEAPF32=Mn=new Float32Array(h),l.HEAPF64=vi=new Float64Array(h)}var Ae=l.INITIAL_MEMORY||16777216;if(T)Oe=l.wasmMemory,$t=l.buffer;else if(l.wasmMemory)Oe=l.wasmMemory;else if(Oe=new WebAssembly.Memory({initial:Ae/65536,maximum:2147483648/65536,shared:!0}),!(Oe.buffer instanceof SharedArrayBuffer))throw de("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Oe&&($t=Oe.buffer),Ae=$t.byteLength,ar($t);var fe,ot=[],St=[],Dt=[];function Nt(){if(!T){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Ne(l.preRun.shift());Hi(ot)}}function _n(){T||Hi(St)}function Ce(){if(!T){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)Zt(l.postRun.shift());Hi(Dt)}}function Ne(h){ot.unshift(h)}function Jt(h){St.unshift(h)}function Zt(h){Dt.unshift(h)}var Bt=0,zt=null;function Qt(h){_t(!T,"addRunDependency cannot be used in a pthread worker"),Bt++,l.monitorRunDependencies&&l.monitorRunDependencies(Bt)}function rr(h){if(Bt--,l.monitorRunDependencies&&l.monitorRunDependencies(Bt),Bt==0&&zt){var g=zt;zt=null,g()}}l.preloadedImages={},l.preloadedAudios={};function Cn(h){l.onAbort&&l.onAbort(h),T&&console.error("Pthread aborting at "+new Error().stack),h+="",de(h),j=!0,h="abort("+h+"). Build with -s ASSERTIONS=1 for more info.";var g=new WebAssembly.RuntimeError(h);throw d(g),g}var Kr="data:application/octet-stream;base64,";function Fe(h){return h.startsWith(Kr)}if(l.locateFile){var rt="avif_node_enc_mt.wasm";Fe(rt)||(rt=R(rt))}else var rt=new URL("avif_node_enc_mt.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("avif_node_enc_mt-143090b9.js",document.baseURI).href).toString();function Ct(h){try{if(h==rt&&Ee)return new Uint8Array(Ee);if(K)return K(h);throw"both async and sync fetching of the wasm failed"}catch(g){Cn(g)}}function en(){return!Ee&&v&&typeof fetch=="function"?fetch(rt,{credentials:"same-origin"}).then(function(h){if(!h.ok)throw"failed to load wasm binary file at '"+rt+"'";return h.arrayBuffer()}).catch(function(){return Ct(rt)}):Promise.resolve().then(function(){return Ct(rt)})}function En(){var h={a:se};function g(O,Z){var ce=O.exports;if(l.asm=ce,fe=l.asm.ja,Jt(l.asm.fa),tn.tlsInitFunctions.push(l.asm.ia),We=Z,!T){var V=tn.unusedWorkers.length;tn.unusedWorkers.forEach(function(S){tn.loadWasmModuleToWorker(S,function(){--V||rr()})})}}T||Qt();function B(O){g(O.instance,O.module)}function N(O){return en().then(function(Z){var ce=WebAssembly.instantiate(Z,h);return ce}).then(O,function(Z){de("failed to asynchronously prepare wasm: "+Z),Cn(Z)})}function z(){return!Ee&&typeof WebAssembly.instantiateStreaming=="function"&&!Fe(rt)&&typeof fetch=="function"?fetch(rt,{credentials:"same-origin"}).then(function(O){var Z=WebAssembly.instantiateStreaming(O,h);return Z.then(B,function(ce){return de("wasm streaming compile failed: "+ce),de("falling back to ArrayBuffer instantiation"),N(B)})}):N(B)}if(l.instantiateWasm)try{var x=l.instantiateWasm(h,g);return x}catch(O){return de("Module.instantiateWasm callback failed with error: "+O),!1}return z().catch(d),{}}var Jr={601124:function(){throw"Canceled!"},601142:function(h,g){setTimeout(function(){Re(h,g)},0)}};function ki(){tn.initRuntime()}function Hi(h){for(;h.length>0;){var g=h.shift();if(typeof g=="function"){g(l);continue}var B=g.func;typeof B=="number"?g.arg===void 0?fe.get(B)():fe.get(B)(g.arg):B(g.arg===void 0?null:g.arg)}}var $i={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function ci(h,g){if(h<=0||h>t().length||h&!0||g<0)return-28;if(g==0)return 0;g>=2147483647&&(g=1/0);var B=Atomics.load(s(),Kn>>2),N=0;if(B==h){var z=Atomics.compareExchange(s(),Kn>>2,B,0);if(z==B&&(--g,N=1,g<=0))return 1}var x=Atomics.notify(s(),h>>2,g);if(x>=0)return x+N;throw"Atomics.notify returned an unexpected value "+x}l._emscripten_futex_wake=ci;function so(h){if(T)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!h)throw"Internal Error! Null pthread_ptr in killThread!";s()[h+12>>2]=0;var g=tn.pthreads[h];g.worker.terminate(),tn.freeThreadData(g),tn.runningWorkers.splice(tn.runningWorkers.indexOf(g.worker),1),g.worker.pthread=void 0}function ji(h){if(T)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!h)throw"Internal Error! Null pthread_ptr in cancelThread!";var g=tn.pthreads[h];g.worker.postMessage({cmd:"cancel"})}function mo(h){if(T)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!h)throw"Internal Error! Null pthread_ptr in cleanupThread!";var g=tn.pthreads[h];if(g){s()[h+12>>2]=0;var B=g.worker;tn.returnWorkerToPool(B)}}var tn={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var h=navigator.hardwareConcurrency,g=0;g<h;++g)tn.allocateUnusedWorker()},initRuntime:function(){for(var h=be(228),g=0;g<228/4;++g)a()[h/4+g]=0;s()[h+12>>2]=h;var B=h+152;s()[B>>2]=B;for(var N=be(512),g=0;g<128;++g)a()[N/4+g]=0;Atomics.store(a(),h+100>>2,N),Atomics.store(a(),h+40>>2,h),Ht(h,!v,1),q(h)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;tn.threadExitHandlers.length>0;)tn.threadExitHandlers.pop()();T&&Pn()&&pr()},runExitHandlersAndDeinitThread:function(h,g){Atomics.store(a(),h+56>>2,1),Atomics.store(a(),h+60>>2,0),tn.runExitHandlers(),Atomics.store(a(),h+4>>2,g),Atomics.store(a(),h+0>>2,1),ci(h+0,2147483647),Ht(0,0,0)},setExitStatus:function(h){},threadExit:function(h){var g=Pn();g&&(tn.runExitHandlersAndDeinitThread(g,h),T&&postMessage({cmd:"exit"}))},threadCancel:function(){tn.runExitHandlersAndDeinitThread(Pn(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var h in tn.pthreads){var g=tn.pthreads[h];g&&g.worker&&tn.returnWorkerToPool(g.worker)}tn.pthreads={};for(var B=0;B<tn.unusedWorkers.length;++B){var N=tn.unusedWorkers[B];N.terminate()}tn.unusedWorkers=[];for(var B=0;B<tn.runningWorkers.length;++B){var N=tn.runningWorkers[B],g=N.pthread;tn.freeThreadData(g),N.terminate()}tn.runningWorkers=[]},freeThreadData:function(h){if(h){if(h.threadInfoStruct){var g=s()[h.threadInfoStruct+100>>2];s()[h.threadInfoStruct+100>>2]=0,De(g),De(h.threadInfoStruct)}h.threadInfoStruct=0,h.allocatedOwnStack&&h.stackBase&&De(h.stackBase),h.stackBase=0,h.worker&&(h.worker.pthread=null)}},returnWorkerToPool:function(h){tn.runWithoutMainThreadQueuedCalls(function(){delete tn.pthreads[h.pthread.threadInfoStruct],tn.unusedWorkers.push(h),tn.runningWorkers.splice(tn.runningWorkers.indexOf(h),1),tn.freeThreadData(h.pthread),h.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(h){s()[sn>>2]=0;try{h()}finally{s()[sn>>2]=1}},receiveObjectTransfer:function(h){},threadInit:function(){for(var h in tn.tlsInitFunctions)tn.tlsInitFunctions[h]()},loadWasmModuleToWorker:function(h,g){h.onmessage=function(B){var N=B.data,z=N.cmd;if(h.pthread&&(tn.currentProxiedOperationCallerThread=h.pthread.threadInfoStruct),N.targetThread&&N.targetThread!=Pn()){var x=tn.pthreads[N.targetThread];x?x.worker.postMessage(B.data,N.transferList):console.error('Internal error! Worker sent a message "'+z+'" to target pthread '+N.targetThread+", but that thread no longer exists!"),tn.currentProxiedOperationCallerThread=void 0;return}if(z==="processQueuedMainThreadWork")yt();else if(z==="spawnThread")ai(B.data);else if(z==="cleanupThread")mo(N.thread);else if(z==="killThread")so(N.thread);else if(z==="cancelThread")ji(N.thread);else if(z==="loaded")h.loaded=!0,g&&g(h),h.runPthread&&(h.runPthread(),delete h.runPthread);else if(z==="print")ne("Thread "+N.threadId+": "+N.text);else if(z==="printErr")de("Thread "+N.threadId+": "+N.text);else if(z==="alert")alert("Thread "+N.threadId+": "+N.text);else if(z==="exit"){var O=h.pthread&&Atomics.load(a(),h.pthread.threadInfoStruct+64>>2);O&&tn.returnWorkerToPool(h)}else if(z==="exitProcess")try{C(N.returnCode)}catch(Z){if(Z instanceof y)return;throw Z}else z==="cancelDone"?tn.returnWorkerToPool(h):z==="objectTransfer"?tn.receiveObjectTransfer(B.data):B.data.target==="setimmediate"?h.postMessage(B.data):de("worker sent an unknown command "+z);tn.currentProxiedOperationCallerThread=void 0},h.onerror=function(B){de("pthread sent an error! "+B.filename+":"+B.lineno+": "+B.message)},h.on("message",function(B){h.onmessage({data:B})}),h.on("error",function(B){h.onerror(B)}),h.on("exit",function(B){}),h.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob,wasmMemory:Oe,wasmModule:We})},allocateUnusedWorker:function(){if(!l.locateFile){tn.unusedWorkers.push(new Worker(new URL("avif_node_enc_mt.worker.js",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("avif_node_enc_mt-143090b9.js",document.baseURI).href)));return}var h=R("avif_node_enc_mt.worker.js");tn.unusedWorkers.push(new Worker(h))},getNewWorker:function(){return tn.unusedWorkers.length==0&&(tn.allocateUnusedWorker(),tn.loadWasmModuleToWorker(tn.unusedWorkers[0])),tn.unusedWorkers.pop()},busySpinWait:function(h){for(var g=performance.now()+h;performance.now()<g;);}};function Mo(h,g){jr(h,g),tr(h)}l.establishStackSpace=Mo;function no(h,g){return fe.get(h)(g)}l.invokeEntryPoint=no;var ye=0;function qe(){return Se||ye>0}l.keepRuntimeAlive=qe;function ut(h,g,B,N){Cn("Assertion failed: "+Je(h)+", at: "+[g?Je(g):"unknown filename",B,N?Je(N):"unknown function"])}var Ue;Ue=function(){var h=process.hrtime();return h[0]*1e3+h[1]/1e6};function ht(h,g){tn.threadExitHandlers.push(function(){fe.get(h)(g)})}function Dn(h,g){return ht(h,g)}var Bn={mappings:{},buffers:[null,[],[]],printChar:function(h,g){var B=Bn.buffers[h];g===0||g===10?((h===1?ne:de)(Qe(B,0)),B.length=0):B.push(g)},varargs:void 0,get:function(){Bn.varargs+=4;var h=s()[Bn.varargs-4>>2];return h},getStr:function(h){var g=Je(h);return g},get64:function(h,g){return h}};function _r(h,g,B){return T?cr(1,1,h,g,B):(Bn.varargs=B,0)}function yr(h,g,B){return T?cr(2,1,h,g,B):(Bn.varargs=B,0)}function kr(h,g,B){if(T)return cr(3,1,h,g,B);Bn.varargs=B}var vr={};function gr(h){for(;h.length;){var g=h.pop(),B=h.pop();B(g)}}function ei(h){return this.fromWireType(a()[h>>2])}var Wi={},zi={},Zi={},Ge=48,c=57;function Xe(h){if(h===void 0)return"_unknown";h=h.replace(/[^a-zA-Z0-9_]/g,"$");var g=h.charCodeAt(0);return g>=Ge&&g<=c?"_"+h:h}function et(h,g){return h=Xe(h),new Function("body","return function "+h+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(g)}function it(h,g){var B=et(g,function(N){this.name=g,this.message=N;var z=new Error(N).stack;z!==void 0&&(this.stack=this.toString()+`
`+z.replace(/^Error(:[^\n]*)?\n/,""))});return B.prototype=Object.create(h.prototype),B.prototype.constructor=B,B.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},B}var je=void 0;function qt(h){throw new je(h)}function It(h,g,B){h.forEach(function(Z){Zi[Z]=g});function N(Z){var ce=B(Z);ce.length!==h.length&&qt("Mismatched type converter count");for(var V=0;V<h.length;++V)on(h[V],ce[V])}var z=new Array(g.length),x=[],O=0;g.forEach(function(Z,ce){zi.hasOwnProperty(Z)?z[ce]=zi[Z]:(x.push(Z),Wi.hasOwnProperty(Z)||(Wi[Z]=[]),Wi[Z].push(function(){z[ce]=zi[Z],++O,O===x.length&&N(z)}))}),x.length===0&&N(z)}function Rt(h){var g=vr[h];delete vr[h];var B=g.rawConstructor,N=g.rawDestructor,z=g.fields,x=z.map(function(O){return O.getterReturnType}).concat(z.map(function(O){return O.setterArgumentType}));It([h],x,function(O){var Z={};return z.forEach(function(ce,V){var S=ce.fieldName,L=O[V],J=ce.getter,re=ce.getterContext,G=O[V+z.length],X=ce.setter,te=ce.setterContext;Z[S]={read:function(le){return L.fromWireType(J(re,le))},write:function(le,we){var $e=[];X(te,le,G.toWireType($e,we)),gr($e)}}}),[{name:g.name,fromWireType:function(ce){var V={};for(var S in Z)V[S]=Z[S].read(ce);return N(ce),V},toWireType:function(ce,V){for(var S in Z)if(!(S in V))throw new TypeError('Missing field:  "'+S+'"');var L=B();for(S in Z)Z[S].write(L,V[S]);return ce!==null&&ce.push(N,L),L},argPackAdvance:8,readValueFromPointer:ei,destructorFunction:N}]})}function Xt(h,g,B,N,z){}function hn(h){switch(h){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+h)}}function nn(){for(var h=new Array(256),g=0;g<256;++g)h[g]=String.fromCharCode(g);An=h}var An=void 0;function pn(h){for(var g="",B=h;n()[B];)g+=An[n()[B++]];return g}var Ut=void 0;function Gt(h){throw new Ut(h)}function on(h,g,B){if(B=B||{},!("argPackAdvance"in g))throw new TypeError("registerType registeredInstance requires argPackAdvance");var N=g.name;if(h||Gt('type "'+N+'" must have a positive integer typeid pointer'),zi.hasOwnProperty(h)){if(B.ignoreDuplicateRegistrations)return;Gt("Cannot register type '"+N+"' twice")}if(zi[h]=g,delete Zi[h],Wi.hasOwnProperty(h)){var z=Wi[h];delete Wi[h],z.forEach(function(x){x()})}}function lr(h,g,B,N,z){var x=hn(B);g=pn(g),on(h,{name:g,fromWireType:function(O){return!!O},toWireType:function(O,Z){return Z?N:z},argPackAdvance:8,readValueFromPointer:function(O){var Z;if(B===1)Z=t();else if(B===2)Z=r();else if(B===4)Z=s();else throw new TypeError("Unknown boolean type size: "+g);return this.fromWireType(Z[O>>x])},destructorFunction:null})}var Pr=[],Tn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function qr(h){h>4&&--Tn[h].refcount===0&&(Tn[h]=void 0,Pr.push(h))}function xr(){for(var h=0,g=5;g<Tn.length;++g)Tn[g]!==void 0&&++h;return h}function Hr(){for(var h=5;h<Tn.length;++h)if(Tn[h]!==void 0)return Tn[h];return null}function oi(){l.count_emval_handles=xr,l.get_first_emval=Hr}function ti(h){switch(h){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var g=Pr.length?Pr.pop():Tn.length;return Tn[g]={refcount:1,value:h},g}}}function Mi(h,g){g=pn(g),on(h,{name:g,fromWireType:function(B){var N=Tn[B].value;return qr(B),N},toWireType:function(B,N){return ti(N)},argPackAdvance:8,readValueFromPointer:ei,destructorFunction:null})}function Ti(h){if(h===null)return"null";var g=typeof h;return g==="object"||g==="array"||g==="function"?h.toString():""+h}function Di(h,g){switch(g){case 2:return function(B){return this.fromWireType(u()[B>>2])};case 3:return function(B){return this.fromWireType(f()[B>>3])};default:throw new TypeError("Unknown float type: "+h)}}function Ri(h,g,B){var N=hn(B);g=pn(g),on(h,{name:g,fromWireType:function(z){return z},toWireType:function(z,x){if(typeof x!="number"&&typeof x!="boolean")throw new TypeError('Cannot convert "'+Ti(x)+'" to '+this.name);return x},argPackAdvance:8,readValueFromPointer:Di(g,N),destructorFunction:null})}function Ii(h,g){if(!(h instanceof Function))throw new TypeError("new_ called with constructor type "+typeof h+" which is not a function");var B=et(h.name||"unknownFunctionName",function(){});B.prototype=h.prototype;var N=new B,z=h.apply(N,g);return z instanceof Object?z:N}function li(h,g,B,N,z){var x=g.length;x<2&&Gt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var O=g[1]!==null&&B!==null,Z=!1,ce=1;ce<g.length;++ce)if(g[ce]!==null&&g[ce].destructorFunction===void 0){Z=!0;break}for(var V=g[0].name!=="void",S="",L="",ce=0;ce<x-2;++ce)S+=(ce!==0?", ":"")+"arg"+ce,L+=(ce!==0?", ":"")+"arg"+ce+"Wired";var J="return function "+Xe(h)+"("+S+`) {
if (arguments.length !== `+(x-2)+`) {
throwBindingError('function `+h+" called with ' + arguments.length + ' arguments, expected "+(x-2)+` args!');
}
`;Z&&(J+=`var destructors = [];
`);var re=Z?"destructors":"null",G=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],X=[Gt,N,z,gr,g[0],g[1]];O&&(J+="var thisWired = classParam.toWireType("+re+`, this);
`);for(var ce=0;ce<x-2;++ce)J+="var arg"+ce+"Wired = argType"+ce+".toWireType("+re+", arg"+ce+"); // "+g[ce+2].name+`
`,G.push("argType"+ce),X.push(g[ce+2]);if(O&&(L="thisWired"+(L.length>0?", ":"")+L),J+=(V?"var rv = ":"")+"invoker(fn"+(L.length>0?", ":"")+L+`);
`,Z)J+=`runDestructors(destructors);
`;else for(var ce=O?1:2;ce<g.length;++ce){var te=ce===1?"thisWired":"arg"+(ce-2)+"Wired";g[ce].destructorFunction!==null&&(J+=te+"_dtor("+te+"); // "+g[ce].name+`
`,G.push(te+"_dtor"),X.push(g[ce].destructorFunction))}V&&(J+=`var ret = retType.fromWireType(rv);
return ret;
`),J+=`}
`,G.push(J);var le=Ii(Function,G).apply(null,X);return le}function fi(h,g,B){if(h[g].overloadTable===void 0){var N=h[g];h[g]=function(){return h[g].overloadTable.hasOwnProperty(arguments.length)||Gt("Function '"+B+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+h[g].overloadTable+")!"),h[g].overloadTable[arguments.length].apply(this,arguments)},h[g].overloadTable=[],h[g].overloadTable[N.argCount]=N}}function di(h,g,B){l.hasOwnProperty(h)?((B===void 0||l[h].overloadTable!==void 0&&l[h].overloadTable[B]!==void 0)&&Gt("Cannot register public name '"+h+"' twice"),fi(l,h,h),l.hasOwnProperty(B)&&Gt("Cannot register multiple overloads of a function with the same number of arguments ("+B+")!"),l[h].overloadTable[B]=g):(l[h]=g,B!==void 0&&(l[h].numArguments=B))}function mn(h,g){for(var B=[],N=0;N<h;N++)B.push(s()[(g>>2)+N]);return B}function Ln(h,g,B){l.hasOwnProperty(h)||qt("Replacing nonexistant public symbol"),l[h].overloadTable!==void 0&&B!==void 0?l[h].overloadTable[B]=g:(l[h]=g,l[h].argCount=B)}function At(h,g,B){var N=l["dynCall_"+h];return B&&B.length?N.apply(null,[g].concat(B)):N.call(null,g)}function cn(h,g,B){return h.includes("j")?At(h,g,B):fe.get(g).apply(null,B)}function Wt(h,g){var B=[];return function(){B.length=arguments.length;for(var N=0;N<arguments.length;N++)B[N]=arguments[N];return cn(h,g,B)}}function Ke(h,g){h=pn(h);function B(){return h.includes("j")?Wt(h,g):fe.get(g)}var N=B();return typeof N!="function"&&Gt("unknown function pointer with signature "+h+": "+g),N}var gt=void 0;function $n(h){var g=U(h),B=pn(g);return De(g),B}function vt(h,g){var B=[],N={};function z(x){if(!N[x]&&!zi[x]){if(Zi[x]){Zi[x].forEach(z);return}B.push(x),N[x]=!0}}throw g.forEach(z),new gt(h+": "+B.map($n).join([", "]))}function Pt(h,g,B,N,z,x){var O=mn(g,B);h=pn(h),z=Ke(N,z),di(h,function(){vt("Cannot call "+h+" due to unbound types",O)},g-1),It([],O,function(Z){var ce=[Z[0],null].concat(Z.slice(1));return Ln(h,li(h,ce,null,z,x),g-1),[]})}function an(h,g,B){switch(g){case 0:return B?function(z){return t()[z]}:function(z){return n()[z]};case 1:return B?function(z){return r()[z>>1]}:function(z){return i()[z>>1]};case 2:return B?function(z){return s()[z>>2]}:function(z){return a()[z>>2]};default:throw new TypeError("Unknown integer type: "+h)}}function Wr(h,g,B,N,z){g=pn(g),z===-1&&(z=4294967295);var x=hn(B),O=function(V){return V};if(N===0){var Z=32-8*B;O=function(V){return V<<Z>>>Z}}var ce=g.includes("unsigned");on(h,{name:g,fromWireType:O,toWireType:function(V,S){if(typeof S!="number"&&typeof S!="boolean")throw new TypeError('Cannot convert "'+Ti(S)+'" to '+this.name);if(S<N||S>z)throw new TypeError('Passing a number "'+Ti(S)+'" from JS side to C/C++ side to an argument of type "'+g+'", which is outside the valid range ['+N+", "+z+"]!");return ce?S>>>0:S|0},argPackAdvance:8,readValueFromPointer:an(g,x,N!==0),destructorFunction:null})}function Vr(h,g,B){var N=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],z=N[g];function x(O){O=O>>2;var Z=a(),ce=Z[O],V=Z[O+1];return new z($t,V,ce)}B=pn(B),on(h,{name:B,fromWireType:x,argPackAdvance:8,readValueFromPointer:x},{ignoreDuplicateRegistrations:!0})}function On(h,g){g=pn(g);var B=g==="std::string";on(h,{name:g,fromWireType:function(N){var z=a()[N>>2],x;if(B)for(var O=N+4,Z=0;Z<=z;++Z){var ce=N+4+Z;if(Z==z||n()[ce]==0){var V=ce-O,S=Je(O,V);x===void 0?x=S:(x+=String.fromCharCode(0),x+=S),O=ce+1}}else{for(var L=new Array(z),Z=0;Z<z;++Z)L[Z]=String.fromCharCode(n()[N+4+Z]);x=L.join("")}return De(N),x},toWireType:function(N,z){z instanceof ArrayBuffer&&(z=new Uint8Array(z));var x,O=typeof z=="string";O||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int8Array||Gt("Cannot pass non-string to std::string"),B&&O?x=function(){return He(z)}:x=function(){return z.length};var Z=x(),ce=be(4+Z+1);if(a()[ce>>2]=Z,B&&O)ct(z,ce+4,Z+1);else if(O)for(var V=0;V<Z;++V){var S=z.charCodeAt(V);S>255&&(De(ce),Gt("String has UTF-16 code units that do not fit in 8 bits")),n()[ce+4+V]=S}else for(var V=0;V<Z;++V)n()[ce+4+V]=z[V];return N!==null&&N.push(De,ce),ce},argPackAdvance:8,readValueFromPointer:ei,destructorFunction:function(N){De(N)}})}function Fr(h,g,B){B=pn(B);var N,z,x,O,Z;g===2?(N=P,z=nt,O=Fn,x=function(){return i()},Z=1):g===4&&(N=Yt,z=kn,O=Et,x=function(){return a()},Z=2),on(h,{name:B,fromWireType:function(ce){for(var V=a()[ce>>2],S=x(),L,J=ce+4,re=0;re<=V;++re){var G=ce+4+re*g;if(re==V||S[G>>Z]==0){var X=G-J,te=N(J,X);L===void 0?L=te:(L+=String.fromCharCode(0),L+=te),J=G+g}}return De(ce),L},toWireType:function(ce,V){typeof V!="string"&&Gt("Cannot pass non-string to C++ string type "+B);var S=O(V),L=be(4+S+g);return a()[L>>2]=S>>Z,z(V,L+4,S+g),ce!==null&&ce.push(De,L),L},argPackAdvance:8,readValueFromPointer:ei,destructorFunction:function(ce){De(ce)}})}function si(h,g,B,N,z,x){vr[h]={name:pn(g),rawConstructor:Ke(B,N),rawDestructor:Ke(z,x),fields:[]}}function hi(h,g,B,N,z,x,O,Z,ce,V){vr[h].fields.push({fieldName:pn(g),getterReturnType:B,getter:Ke(N,z),getterContext:x,setterArgumentType:O,setter:Ke(Z,ce),setterContext:V})}function wi(h,g){g=pn(g),on(h,{isVoid:!0,name:g,argPackAdvance:0,fromWireType:function(){},toWireType:function(B,N){}})}function Lr(h,g){if(h==g)postMessage({cmd:"processQueuedMainThreadWork"});else if(T)postMessage({targetThread:h,cmd:"processThreadQueue"});else{var B=tn.pthreads[h],N=B&&B.worker;if(!N)return;N.postMessage({cmd:"processThreadQueue"})}return 1}var Yr={};function Rn(h){var g=Yr[h];return g===void 0?pn(h):g}function fr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function $r(h){return h===0?ti(fr()):(h=Rn(h),ti(fr()[h]))}function er(h){h>4&&(Tn[h].refcount+=1)}function st(h,g){var B=zi[h];return B===void 0&&Gt(g+" has unknown type "+$n(h)),B}function $(h){for(var g="",B=0;B<h;++B)g+=(B!==0?", ":"")+"arg"+B;for(var N="return function emval_allocator_"+h+`(constructor, argTypes, args) {
`,B=0;B<h;++B)N+="var argType"+B+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+B+'], "parameter '+B+`");
var arg`+B+" = argType"+B+`.readValueFromPointer(args);
args += argType`+B+`['argPackAdvance'];
`;return N+="var obj = new constructor("+g+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",N)(st,l,ti)}var oe={};function pe(h){return h||Gt("Cannot use deleted val. handle = "+h),Tn[h].value}function Me(h,g,B,N){h=pe(h);var z=oe[g];return z||(z=$(g),oe[g]=z),z(h,B,N)}function Ze(){Cn()}var ft=[];function Sn(h,g){ft.length=0;var B;for(g>>=2;B=n()[h++];){var N=B<105;N&&g&1&&g++,ft.push(N?f()[g++>>1]:s()[g]),++g}return ft}function dr(h,g,B){var N=Sn(g,B);return Jr[h].apply(null,N)}function Wn(){}function ni(h,g){}function ur(h,g,B){if(h<=0||h>t().length||h&!0)return-28;{var N=Atomics.wait(s(),h>>2,g,B);if(N==="timed-out")return-73;if(N==="not-equal")return-6;if(N==="ok")return 0;throw"Atomics.wait returned an unexpected value "+N}}function Br(h,g){throw br(h,g||1),"longjmp"}function Ir(h,g){return Br(h,g)}function Er(h,g,B){n().copyWithin(h,g,g+B)}function hr(){return ri.cpus().length}function cr(h,g){for(var B=arguments.length-2,N=Zn(),z=B,x=zn(z*8),O=x>>3,Z=0;Z<B;Z++){var ce=arguments[2+Z];f()[O+Z]=ce}var V=jt(h,z,x,g);return tr(N),V}var Vt=[];function ln(h,g,B){Vt.length=g;for(var N=B>>3,z=0;z<g;z++)Vt[z]=f()[N+z];var x=h<0,O=x?Jr[-h-1]:H[h];return O.apply(null,Vt)}function Nn(h){try{return Oe.grow(h-$t.byteLength+65535>>>16),ar(Oe.buffer),1}catch{}}function gn(h){var g=n().length;if(h=h>>>0,h<=g)return!1;var B=2147483648;if(h>B)return!1;for(var N=1;N<=4;N*=2){var z=g*(1+.2/N);z=Math.min(z,h+100663296);var x=Math.min(B,dn(Math.max(h,z),65536)),O=Nn(x);if(O)return!0}return!1}var Ft={inEventHandler:0,removeAllEventListeners:function(){for(var h=Ft.eventHandlers.length-1;h>=0;--h)Ft._removeHandler(h);Ft.eventHandlers=[],Ft.deferredCalls=[]},registerRemoveEventListeners:function(){Ft.removeEventListenersRegistered||(Ft.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(h,g,B){function N(O,Z){if(O.length!=Z.length)return!1;for(var ce in O)if(O[ce]!=Z[ce])return!1;return!0}for(var z in Ft.deferredCalls){var x=Ft.deferredCalls[z];if(x.targetFunction==h&&N(x.argsList,B))return}Ft.deferredCalls.push({targetFunction:h,precedence:g,argsList:B}),Ft.deferredCalls.sort(function(O,Z){return O.precedence<Z.precedence})},removeDeferredCalls:function(h){for(var g=0;g<Ft.deferredCalls.length;++g)Ft.deferredCalls[g].targetFunction==h&&(Ft.deferredCalls.splice(g,1),--g)},canPerformEventHandlerRequests:function(){return Ft.inEventHandler&&Ft.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ft.canPerformEventHandlerRequests())for(var h=0;h<Ft.deferredCalls.length;++h){var g=Ft.deferredCalls[h];Ft.deferredCalls.splice(h,1),--h,g.targetFunction.apply(null,g.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(h,g){for(var B=0;B<Ft.eventHandlers.length;++B)Ft.eventHandlers[B].target==h&&(!g||g==Ft.eventHandlers[B].eventTypeString)&&Ft._removeHandler(B--)},_removeHandler:function(h){var g=Ft.eventHandlers[h];g.target.removeEventListener(g.eventTypeString,g.eventListenerFunc,g.useCapture),Ft.eventHandlers.splice(h,1)},registerOrRemoveHandler:function(h){var g=function(z){++Ft.inEventHandler,Ft.currentEventHandler=h,Ft.runDeferredCalls(),h.handlerFunc(z),Ft.runDeferredCalls(),--Ft.inEventHandler};if(h.callbackfunc)h.eventListenerFunc=g,h.target.addEventListener(h.eventTypeString,g,h.useCapture),Ft.eventHandlers.push(h),Ft.registerRemoveEventListeners();else for(var B=0;B<Ft.eventHandlers.length;++B)Ft.eventHandlers[B].target==h.target&&Ft.eventHandlers[B].eventTypeString==h.eventTypeString&&Ft._removeHandler(B--)},queueEventHandlerOnThread_iiii:function(h,g,B,N,z){var x=Zn(),O=zn(12);s()[O>>2]=B,s()[O+4>>2]=N,s()[O+8>>2]=z,wt(0,h,637534208,g,N,O),tr(x)},getTargetThreadForEventCallback:function(h){switch(h){case 1:return 0;case 2:return tn.currentProxiedOperationCallerThread;default:return h}},getNodeNameForTarget:function(h){return h?h==window?"#window":h==screen?"#screen":h&&h.nodeName?h.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Jn(h){var g=He(h)+1,B=be(g);return ct(h,B,g),B}function Ar(h,g,B,N){var z=Zn(),x=zn(12),O=0;g&&(O=Jn(g)),s()[x>>2]=O,s()[x+4>>2]=B,s()[x+8>>2]=N,wt(0,h,657457152,0,O,x),tr(z)}function xn(h,g,B,N){g=g?Je(g):"",Ar(h,g,B,N)}function qn(h){return h>2?Je(h):h}var nr=[0,typeof document<"u"?document:0,typeof window<"u"?window:0];function Mt(h){h=qn(h);var g=nr[h]||(typeof document<"u"?document.querySelector(h):void 0);return g}function Vn(h){return Mt(h)}function yn(h,g,B){var N=Vn(h);if(!N)return-4;if(N.canvasSharedPtr&&(s()[N.canvasSharedPtr>>2]=g,s()[N.canvasSharedPtr+4>>2]=B),N.offscreenCanvas||!N.controlTransferredOffscreen){N.offscreenCanvas&&(N=N.offscreenCanvas);var z=!1;if(N.GLctxObject&&N.GLctxObject.GLctx){var x=N.GLctxObject.GLctx.getParameter(2978);z=x[0]===0&&x[1]===0&&x[2]===N.width&&x[3]===N.height}N.width=g,N.height=B,z&&N.GLctxObject.GLctx.viewport(0,0,g,B)}else if(N.canvasSharedPtr){var O=s()[N.canvasSharedPtr+8>>2];return xn(O,h,g,B),1}else return-4;return 0}function In(h,g,B){return T?cr(4,1,h,g,B):yn(h,g,B)}function Un(h,g,B){var N=Vn(h);return N?yn(h,g,B):In(h,g,B)}function ir(h){}function Mr(h){var g=h.getExtension("ANGLE_instanced_arrays");if(g)return h.vertexAttribDivisor=function(B,N){g.vertexAttribDivisorANGLE(B,N)},h.drawArraysInstanced=function(B,N,z,x){g.drawArraysInstancedANGLE(B,N,z,x)},h.drawElementsInstanced=function(B,N,z,x,O){g.drawElementsInstancedANGLE(B,N,z,x,O)},1}function fn(h){var g=h.getExtension("OES_vertex_array_object");if(g)return h.createVertexArray=function(){return g.createVertexArrayOES()},h.deleteVertexArray=function(B){g.deleteVertexArrayOES(B)},h.bindVertexArray=function(B){g.bindVertexArrayOES(B)},h.isVertexArray=function(B){return g.isVertexArrayOES(B)},1}function Xn(h){var g=h.getExtension("WEBGL_draw_buffers");if(g)return h.drawBuffers=function(B,N){g.drawBuffersWEBGL(B,N)},1}function Gn(h){return!!(h.multiDrawWebgl=h.getExtension("WEBGL_multi_draw"))}var Lt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(g){Lt.lastError||(Lt.lastError=g)},getNewId:function(h){for(var g=Lt.counter++,B=h.length;B<g;B++)h[B]=null;return g},getSource:function(h,g,B,N){for(var z="",x=0;x<g;++x){var O=N?s()[N+x*4>>2]:-1;z+=Je(s()[B+x*4>>2],O<0?void 0:O)}return z},createContext:function(h,g){h.getContextSafariWebGL2Fixed||(h.getContextSafariWebGL2Fixed=h.getContext,h.getContext=function(z,x){var O=h.getContextSafariWebGL2Fixed(z,x);return z=="webgl"==O instanceof WebGLRenderingContext?O:null});var B=h.getContext("webgl",g);if(!B)return 0;var N=Lt.registerContext(B,g);return N},registerContext:function(h,g){var B=be(8);s()[B+4>>2]=Pn();var N={handle:B,attributes:g,version:g.majorVersion,GLctx:h};return h.canvas&&(h.canvas.GLctxObject=N),Lt.contexts[B]=N,(typeof g.enableExtensionsByDefault>"u"||g.enableExtensionsByDefault)&&Lt.initExtensions(N),B},makeContextCurrent:function(h){return Lt.currentContext=Lt.contexts[h],l.ctx=b=Lt.currentContext&&Lt.currentContext.GLctx,!(h&&!b)},getContext:function(h){return Lt.contexts[h]},deleteContext:function(h){Lt.currentContext===Lt.contexts[h]&&(Lt.currentContext=null),typeof Ft=="object"&&Ft.removeAllHandlersOnTarget(Lt.contexts[h].GLctx.canvas),Lt.contexts[h]&&Lt.contexts[h].GLctx.canvas&&(Lt.contexts[h].GLctx.canvas.GLctxObject=void 0),De(Lt.contexts[h].handle),Lt.contexts[h]=null},initExtensions:function(h){if(h||(h=Lt.currentContext),!h.initExtensionsDone){h.initExtensionsDone=!0;var g=h.GLctx;Mr(g),fn(g),Xn(g),g.disjointTimerQueryExt=g.getExtension("EXT_disjoint_timer_query"),Gn(g);var B=g.getSupportedExtensions()||[];B.forEach(function(N){!N.includes("lose_context")&&!N.includes("debug")&&g.getExtension(N)})}}},or=["default","low-power","high-performance"];function Or(h,g){var B=g>>2,N=s()[B+6],z={alpha:!!s()[B+0],depth:!!s()[B+1],stencil:!!s()[B+2],antialias:!!s()[B+3],premultipliedAlpha:!!s()[B+4],preserveDrawingBuffer:!!s()[B+5],powerPreference:or[N],failIfMajorPerformanceCaveat:!!s()[B+7],majorVersion:s()[B+8],minorVersion:s()[B+9],enableExtensionsByDefault:s()[B+10],explicitSwapControl:s()[B+11],proxyContextToMainThread:s()[B+12],renderViaOffscreenBackBuffer:s()[B+13]},x=Vn(h);if(!x||z.explicitSwapControl)return 0;var O=Lt.createContext(x,z);return O}function bn(h,g){return Or(h,g)}function Tr(h){return T?cr(5,1,h):0}function jn(h,g,B,N){if(T)return cr(6,1,h,g,B,N);var z=Bn.getStreamFromFD(h),x=Bn.doReadv(z,g,B);return s()[N>>2]=x,0}function Nr(h,g,B,N,z){if(T)return cr(7,1,h,g,B,N,z)}function pi(h,g,B,N){if(T)return cr(8,1,h,g,B,N);for(var z=0,x=0;x<B;x++){for(var O=s()[g+x*8>>2],Z=s()[g+(x*8+4)>>2],ce=0;ce<Z;ce++)Bn.printChar(h,n()[O+ce]);z+=Z}return s()[N>>2]=z,0}function Ur(){return Te()}function Dr(h){var g=tn.threadExitHandlers.pop();h&&g()}function ai(h){if(T)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var g=tn.getNewWorker();if(!g)return 6;if(g.pthread!==void 0)throw"Internal error!";if(!h.pthread_ptr)throw"Internal error, no pthread ptr!";tn.runningWorkers.push(g);for(var B=be(128*4),N=0;N<128;++N)s()[B+N*4>>2]=0;var z=h.stackBase+h.stackSize,x=tn.pthreads[h.pthread_ptr]={worker:g,stackBase:h.stackBase,stackSize:h.stackSize,allocatedOwnStack:h.allocatedOwnStack,threadInfoStruct:h.pthread_ptr},O=x.threadInfoStruct>>2;Atomics.store(a(),O+16,h.detached),Atomics.store(a(),O+25,B),Atomics.store(a(),O+10,x.threadInfoStruct),Atomics.store(a(),O+20,h.stackSize),Atomics.store(a(),O+19,z),Atomics.store(a(),O+26,h.stackSize),Atomics.store(a(),O+(104+8>>2),z),Atomics.store(a(),O+(104+12>>2),h.detached);var Z=Gr(),ce=Z+40;Atomics.store(a(),O+43,ce),g.pthread=x;var V={cmd:"run",start_routine:h.startRoutine,arg:h.arg,threadInfoStruct:h.pthread_ptr,stackBase:h.stackBase,stackSize:h.stackSize};return g.runPthread=function(){V.time=performance.now(),g.postMessage(V,h.transferList)},g.loaded&&(g.runPthread(),delete g.runPthread),0}function Oi(h,g,B,N){if(typeof SharedArrayBuffer>"u")return de("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!h)return de("pthread_create called with a null thread pointer!"),28;var z=[],x=0;if(T&&(z.length===0||x))return pt(687865856,h,g,B,N);var O=0,Z=0,ce=0;g&&g!=-1?(O=s()[g>>2],O+=81920,Z=s()[g+8>>2],ce=s()[g+12>>2]!==0):O=2097152;var V=Z==0;V?Z=Hn(16,O):(Z-=O,_t(Z>0));for(var S=be(228),L=0;L<57;++L)a()[(S>>2)+L]=0;s()[h>>2]=S,s()[S+12>>2]=S;var J=S+152;s()[J>>2]=J;var re={stackBase:Z,stackSize:O,allocatedOwnStack:V,detached:ce,startRoutine:B,pthread_ptr:S,arg:N,transferList:z};return T?(re.cmd="spawnThread",postMessage(re,z),0):ai(re)}function ui(){if(T){var h=Pn();if(h){var g=Atomics.load(a(),h+56>>2);if(!g){var B=Atomics.load(a(),h+0>>2);if(B==2)throw"Canceled!"}}}}function Pi(h,g,B){if(!h)return de("pthread_join attempted on a null thread pointer!"),$i.ESRCH;if(T&&Pn()==h)return de("PThread "+h+" is attempting to join to itself!"),$i.EDEADLK;if(!T&&ue()==h)return de("Main thread "+h+" is attempting to join to itself!"),$i.EDEADLK;var N=s()[h+12>>2];if(N!==h)return de("pthread_join attempted on thread "+h+", which does not point to a valid thread, or does not exist anymore!"),$i.ESRCH;var z=Atomics.load(a(),h+64>>2);if(z)return de("Attempted to join thread "+h+", which was already detached!"),$i.EINVAL;for(;;){var x=Atomics.load(a(),h+0>>2);if(x==1){var O=Atomics.load(a(),h+4>>2);return g&&(s()[g>>2]=O),Atomics.store(a(),h+64>>2,1),T?postMessage({cmd:"cleanupThread",thread:h}):mo(h),0}if(!B)return $i.EBUSY;ui(),T||yt(),ur(h+0,x,T?100:1)}}function Ci(h,g){return Pi(h,g,!0)}function Ni(h){Pe(h)}function Si(h){var g=Date.now()/1e3|0;return h&&(s()[h>>2]=g),g}T||tn.initMainThreadBlock(),je=l.InternalError=it(Error,"InternalError"),nn(),Ut=l.BindingError=it(Error,"BindingError"),oi(),gt=l.UnboundTypeError=it(Error,"UnboundTypeError");var b,H=[null,_r,yr,kr,In,Tr,jn,Nr,pi],se={k:ut,C:Dn,u:_r,P:yr,R:kr,F:Rt,I:Xt,aa:lr,$:Mi,z:Ri,E:Pt,j:Wr,g:Vr,A:On,r:Fr,K:si,h:hi,ba:wi,Z:Lr,o:qr,_:$r,D:er,Q:Me,i:Ze,y:dr,V:Wn,x:ni,l:ur,m:ci,p:Ue,e:Ir,M:Er,ea:hr,W:ln,N:gn,X:Un,w:ir,Y:bn,v:Tr,O:jn,H:Nr,S:pi,c:Ur,L:ki,q:at,s:Tt,t:xe,J:Ve,G:Ot,n:mr,f:ve,d:he,a:Oe||l.wasmMemory,T:Dr,U:ht,B:Oi,ca:Ci,b:Ni,da:Si};En(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.fa).apply(null,arguments)};var be=l._malloc=function(){return(be=l._malloc=l.asm.ga).apply(null,arguments)},De=l._free=function(){return(De=l._free=l.asm.ha).apply(null,arguments)};l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.ia).apply(null,arguments)};var U=l.___getTypeName=function(){return(U=l.___getTypeName=l.asm.ka).apply(null,arguments)};l.___embind_register_native_and_builtin_types=function(){return(l.___embind_register_native_and_builtin_types=l.asm.la).apply(null,arguments)},l._emscripten_current_thread_process_queued_calls=function(){return(l._emscripten_current_thread_process_queued_calls=l.asm.ma).apply(null,arguments)};var q=l._emscripten_register_main_browser_thread_id=function(){return(q=l._emscripten_register_main_browser_thread_id=l.asm.na).apply(null,arguments)},ue=l._emscripten_main_browser_thread_id=function(){return(ue=l._emscripten_main_browser_thread_id=l.asm.oa).apply(null,arguments)},Re=l.__emscripten_do_dispatch_to_thread=function(){return(Re=l.__emscripten_do_dispatch_to_thread=l.asm.pa).apply(null,arguments)},pt=l._emscripten_sync_run_in_main_thread_4=function(){return(pt=l._emscripten_sync_run_in_main_thread_4=l.asm.qa).apply(null,arguments)},yt=l._emscripten_main_thread_process_queued_calls=function(){return(yt=l._emscripten_main_thread_process_queued_calls=l.asm.ra).apply(null,arguments)},jt=l._emscripten_run_in_main_runtime_thread_js=function(){return(jt=l._emscripten_run_in_main_runtime_thread_js=l.asm.sa).apply(null,arguments)},wt=l.__emscripten_call_on_thread=function(){return(wt=l.__emscripten_call_on_thread=l.asm.ta).apply(null,arguments)},Ht=l.__emscripten_thread_init=function(){return(Ht=l.__emscripten_thread_init=l.asm.ua).apply(null,arguments)},Pn=l._pthread_self=function(){return(Pn=l._pthread_self=l.asm.va).apply(null,arguments)},pr=l.___pthread_tsd_run_dtors=function(){return(pr=l.___pthread_tsd_run_dtors=l.asm.wa).apply(null,arguments)},Gr=l._emscripten_get_global_libc=function(){return(Gr=l._emscripten_get_global_libc=l.asm.xa).apply(null,arguments)},Zn=l.stackSave=function(){return(Zn=l.stackSave=l.asm.ya).apply(null,arguments)},tr=l.stackRestore=function(){return(tr=l.stackRestore=l.asm.za).apply(null,arguments)},zn=l.stackAlloc=function(){return(zn=l.stackAlloc=l.asm.Aa).apply(null,arguments)},jr=l._emscripten_stack_set_limits=function(){return(jr=l._emscripten_stack_set_limits=l.asm.Ba).apply(null,arguments)},br=l._setThrew=function(){return(br=l._setThrew=l.asm.Ca).apply(null,arguments)},Hn=l._memalign=function(){return(Hn=l._memalign=l.asm.Da).apply(null,arguments)};l.dynCall_jiiiiiiiii=function(){return(l.dynCall_jiiiiiiiii=l.asm.Ea).apply(null,arguments)};var rn=l.dynCall_ijiii=function(){return(rn=l.dynCall_ijiii=l.asm.Fa).apply(null,arguments)};l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.Ga).apply(null,arguments)},l.dynCall_jiiiiiiii=function(){return(l.dynCall_jiiiiiiii=l.asm.Ha).apply(null,arguments)},l.dynCall_jiiiiii=function(){return(l.dynCall_jiiiiii=l.asm.Ia).apply(null,arguments)},l.dynCall_jiiiii=function(){return(l.dynCall_jiiiii=l.asm.Ja).apply(null,arguments)},l.dynCall_iiijii=function(){return(l.dynCall_iiijii=l.asm.Ka).apply(null,arguments)};var sn=l.__emscripten_allow_main_runtime_queued_calls=600816,Kn=l.__emscripten_main_thread_futex=897300;function mr(h,g){var B=Zn();try{fe.get(h)(g)}catch(N){if(tr(B),N!==N+0&&N!=="longjmp")throw N;br(1,0)}}function he(h,g,B,N,z){var x=Zn();try{fe.get(h)(g,B,N,z)}catch(O){if(tr(x),O!==O+0&&O!=="longjmp")throw O;br(1,0)}}function ve(h,g,B){var N=Zn();try{fe.get(h)(g,B)}catch(z){if(tr(N),z!==z+0&&z!=="longjmp")throw z;br(1,0)}}function xe(h,g,B,N,z,x,O,Z,ce,V){var S=Zn();try{return fe.get(h)(g,B,N,z,x,O,Z,ce,V)}catch(L){if(tr(S),L!==L+0&&L!=="longjmp")throw L;br(1,0)}}function Ve(h,g,B,N,z,x,O,Z,ce,V,S,L){var J=Zn();try{return fe.get(h)(g,B,N,z,x,O,Z,ce,V,S,L)}catch(re){if(tr(J),re!==re+0&&re!=="longjmp")throw re;br(1,0)}}function at(h,g,B,N,z){var x=Zn();try{return fe.get(h)(g,B,N,z)}catch(O){if(tr(x),O!==O+0&&O!=="longjmp")throw O;br(1,0)}}function Tt(h,g,B,N,z,x,O,Z,ce){var V=Zn();try{return fe.get(h)(g,B,N,z,x,O,Z,ce)}catch(S){if(tr(V),S!==S+0&&S!=="longjmp")throw S;br(1,0)}}function Ot(h,g,B,N,z,x){var O=Zn();try{return rn(h,g,B,N,z,x)}catch(Z){if(tr(O),Z!==Z+0&&Z!=="longjmp")throw Z;br(1,0)}}l.PThread=tn,l.PThread=tn,l.wasmMemory=Oe,l.ExitStatus=y;var D;function y(h){this.name="ExitStatus",this.message="Program terminated with exit("+h+")",this.status=h}zt=function h(){D||m(),D||(zt=h)};function m(h){if(Bt>0)return;if(T){p(l),_n(),postMessage({cmd:"loaded"});return}if(Nt(),Bt>0)return;function g(){D||(D=!0,l.calledRun=!0,!j&&(_n(),p(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),Ce()))}l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),g()},1)):g()}l.run=m;function C(h,g){if(!(g&&qe()&&h===0)){if(!g&&T)throw postMessage({cmd:"exitProcess",returnCode:h}),new y(h);qe()||(tn.terminateAllThreads(),l.onExit&&l.onExit(h),j=!0),E(h,new y(h))}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();return T&&(Se=!1,tn.initWorker()),m(),l.ready}}();return hf.default=o,hf}var mc={},kb={get exports(){return mc},set exports(o){mc=o}},Kp;function Hb(){return Kp||(Kp=1,function(o,e){(function(t,n){n(e)})(gi,function(t){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(b){return"Symbol("+b+")"};function r(){}var i=typeof self<"u"?self:typeof window<"u"?window:typeof gi<"u"?gi:void 0;function s(b){return typeof b=="object"&&b!==null||typeof b=="function"}var a=r,u=Promise,f=Promise.prototype.then,l=Promise.resolve.bind(u),p=Promise.reject.bind(u);function d(b){return new u(b)}function _(b){return l(b)}function A(b){return p(b)}function E(b,H,se){return f.call(b,H,se)}function v(b,H,se){E(E(b,H,se),void 0,a)}function T(b,H){v(b,H)}function I(b,H){v(b,void 0,H)}function R(b,H,se){return E(b,H,se)}function k(b){E(b,void 0,a)}var K=function(){var b=i&&i.queueMicrotask;if(typeof b=="function")return b;var H=_(void 0);return function(se){return E(H,se)}}();function ee(b,H,se){if(typeof b!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(b,H,se)}function _e(b,H,se){try{return _(ee(b,H,se))}catch(be){return A(be)}}var Q=function(){function b(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(b.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),b.prototype.push=function(H){var se=this._back,be=se;se._elements.length===16383&&(be={_elements:[],_next:void 0}),se._elements.push(H),be!==se&&(this._back=be,se._next=be),++this._size},b.prototype.shift=function(){var H=this._front,se=H,be=this._cursor,De=be+1,U=H._elements,q=U[be];return De===16384&&(se=H._next,De=0),--this._size,this._cursor=De,H!==se&&(this._front=se),U[be]=void 0,q},b.prototype.forEach=function(H){for(var se=this._cursor,be=this._front,De=be._elements;!(se===De.length&&be._next===void 0||se===De.length&&(se=0,(De=(be=be._next)._elements).length===0));)H(De[se]),++se},b.prototype.peek=function(){var H=this._front,se=this._cursor;return H._elements[se]},b}();function ne(b,H){b._ownerReadableStream=H,H._reader=b,H._state==="readable"?Te(b):H._state==="closed"?function(se){Te(se),Oe(se)}(b):Ee(b,H._storedError)}function de(b,H){return xn(b._ownerReadableStream,H)}function Ie(b){b._ownerReadableStream._state==="readable"?Se(b,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(H,se){Ee(H,se)}(b,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),b._ownerReadableStream._reader=void 0,b._ownerReadableStream=void 0}function Pe(b){return new TypeError("Cannot "+b+" a stream using a released reader")}function Te(b){b._closedPromise=d(function(H,se){b._closedPromise_resolve=H,b._closedPromise_reject=se})}function Ee(b,H){Te(b),Se(b,H)}function Se(b,H){b._closedPromise_reject!==void 0&&(k(b._closedPromise),b._closedPromise_reject(H),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0)}function Oe(b){b._closedPromise_resolve!==void 0&&(b._closedPromise_resolve(void 0),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0)}var We=n("[[AbortSteps]]"),j=n("[[ErrorSteps]]"),_t=n("[[CancelSteps]]"),Qe=n("[[PullSteps]]"),Je=Number.isFinite||function(b){return typeof b=="number"&&isFinite(b)},ze=Math.trunc||function(b){return b<0?Math.ceil(b):Math.floor(b)};function ct(b,H){if(b!==void 0&&typeof(se=b)!="object"&&typeof se!="function")throw new TypeError(H+" is not an object.");var se}function He(b,H){if(typeof b!="function")throw new TypeError(H+" is not a function.")}function P(b,H){if(!function(se){return typeof se=="object"&&se!==null||typeof se=="function"}(b))throw new TypeError(H+" is not an object.")}function nt(b,H,se){if(b===void 0)throw new TypeError("Parameter "+H+" is required in '"+se+"'.")}function Fn(b,H,se){if(b===void 0)throw new TypeError(H+" is required in '"+se+"'.")}function Yt(b){return Number(b)}function kn(b){return b===0?0:b}function Et(b,H){var se=Number.MAX_SAFE_INTEGER,be=Number(b);if(be=kn(be),!Je(be))throw new TypeError(H+" is not a finite number");if((be=function(De){return kn(ze(De))}(be))<0||be>se)throw new TypeError(H+" is outside the accepted range of 0 to "+se+", inclusive");return Je(be)&&be!==0?be:0}function dn(b,H){if(!Jn(b))throw new TypeError(H+" is not a ReadableStream.")}function $t(b){return new Mn(b)}function vn(b,H){b._reader._readRequests.push(H)}function Cr(b,H,se){var be=b._reader._readRequests.shift();se?be._closeSteps():be._chunkSteps(H)}function Qr(b){return b._reader._readRequests.length}function yi(b){var H=b._reader;return H!==void 0&&!!vi(H)}var Li,Sr,Mn=function(){function b(H){if(nt(H,1,"ReadableStreamDefaultReader"),dn(H,"First parameter"),Ar(H))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ne(this,H),this._readRequests=new Q}return Object.defineProperty(b.prototype,"closed",{get:function(){return vi(this)?this._closedPromise:A(Ae("closed"))},enumerable:!1,configurable:!0}),b.prototype.cancel=function(H){return H===void 0&&(H=void 0),vi(this)?this._ownerReadableStream===void 0?A(Pe("cancel")):de(this,H):A(Ae("cancel"))},b.prototype.read=function(){if(!vi(this))return A(Ae("read"));if(this._ownerReadableStream===void 0)return A(Pe("read from"));var H,se,be=d(function(De,U){H=De,se=U});return ar(this,{_chunkSteps:function(De){return H({value:De,done:!1})},_closeSteps:function(){return H({value:void 0,done:!0})},_errorSteps:function(De){return se(De)}}),be},b.prototype.releaseLock=function(){if(!vi(this))throw Ae("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ie(this)}},b}();function vi(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_readRequests")&&b instanceof Mn}function ar(b,H){var se=b._ownerReadableStream;se._disturbed=!0,se._state==="closed"?H._closeSteps():se._state==="errored"?H._errorSteps(se._storedError):se._readableStreamController[Qe](H)}function Ae(b){return new TypeError("ReadableStreamDefaultReader.prototype."+b+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(Mn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Mn.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),typeof n.asyncIterator=="symbol"&&((Li={})[n.asyncIterator]=function(){return this},Sr=Li,Object.defineProperty(Sr,n.asyncIterator,{enumerable:!1}));var fe=function(){function b(H,se){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=H,this._preventCancel=se}return b.prototype.next=function(){var H=this,se=function(){return H._nextSteps()};return this._ongoingPromise=this._ongoingPromise?R(this._ongoingPromise,se,se):se(),this._ongoingPromise},b.prototype.return=function(H){var se=this,be=function(){return se._returnSteps(H)};return this._ongoingPromise?R(this._ongoingPromise,be,be):be()},b.prototype._nextSteps=function(){var H=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var se,be,De=this._reader;if(De._ownerReadableStream===void 0)return A(Pe("iterate"));var U=d(function(q,ue){se=q,be=ue});return ar(De,{_chunkSteps:function(q){H._ongoingPromise=void 0,K(function(){return se({value:q,done:!1})})},_closeSteps:function(){H._ongoingPromise=void 0,H._isFinished=!0,Ie(De),se({value:void 0,done:!0})},_errorSteps:function(q){H._ongoingPromise=void 0,H._isFinished=!0,Ie(De),be(q)}}),U},b.prototype._returnSteps=function(H){if(this._isFinished)return Promise.resolve({value:H,done:!0});this._isFinished=!0;var se=this._reader;if(se._ownerReadableStream===void 0)return A(Pe("finish iterating"));if(!this._preventCancel){var be=de(se,H);return Ie(se),R(be,function(){return{value:H,done:!0}})}return Ie(se),_({value:H,done:!0})},b}(),ot={next:function(){return St(this)?this._asyncIteratorImpl.next():A(Dt("next"))},return:function(b){return St(this)?this._asyncIteratorImpl.return(b):A(Dt("return"))}};function St(b){if(!s(b)||!Object.prototype.hasOwnProperty.call(b,"_asyncIteratorImpl"))return!1;try{return b._asyncIteratorImpl instanceof fe}catch{return!1}}function Dt(b){return new TypeError("ReadableStreamAsyncIterator."+b+" can only be used on a ReadableSteamAsyncIterator")}Sr!==void 0&&Object.setPrototypeOf(ot,Sr);var Nt=Number.isNaN||function(b){return b!=b};function _n(b){return b.slice()}function Ce(b,H,se,be,De){new Uint8Array(b).set(new Uint8Array(se,be,De),H)}function Ne(b,H,se){if(b.slice)return b.slice(H,se);var be=se-H,De=new ArrayBuffer(be);return Ce(De,0,b,H,be),De}function Jt(b){var H=Ne(b.buffer,b.byteOffset,b.byteOffset+b.byteLength);return new Uint8Array(H)}function Zt(b){var H=b._queue.shift();return b._queueTotalSize-=H.size,b._queueTotalSize<0&&(b._queueTotalSize=0),H.value}function Bt(b,H,se){if(typeof(be=se)!="number"||Nt(be)||be<0||se===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var be;b._queue.push({value:H,size:se}),b._queueTotalSize+=se}function zt(b){b._queue=new Q,b._queueTotalSize=0}var Qt=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"view",{get:function(){if(!Kr(this))throw Dn("view");return this._view},enumerable:!1,configurable:!0}),b.prototype.respond=function(H){if(!Kr(this))throw Dn("respond");if(nt(H,1,"respond"),H=Et(H,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,ut(this._associatedReadableByteStreamController,H)},b.prototype.respondWithNewView=function(H){if(!Kr(this))throw Dn("respondWithNewView");if(nt(H,1,"respondWithNewView"),!ArrayBuffer.isView(H))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");H.buffer,Ue(this._associatedReadableByteStreamController,H)},b}();Object.defineProperties(Qt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var rr=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"byobRequest",{get:function(){if(!Cn(this))throw Bn("byobRequest");return ye(this)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!Cn(this))throw Bn("desiredSize");return qe(this)},enumerable:!1,configurable:!0}),b.prototype.close=function(){if(!Cn(this))throw Bn("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var H=this._controlledReadableByteStream._state;if(H!=="readable")throw new TypeError("The stream (in "+H+" state) is not in the readable state and cannot be closed");tn(this)},b.prototype.enqueue=function(H){if(!Cn(this))throw Bn("enqueue");if(nt(H,1,"enqueue"),!ArrayBuffer.isView(H))throw new TypeError("chunk must be an array buffer view");if(H.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(H.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var se=this._controlledReadableByteStream._state;if(se!=="readable")throw new TypeError("The stream (in "+se+" state) is not in the readable state and cannot be enqueued to");Mo(this,H)},b.prototype.error=function(H){if(H===void 0&&(H=void 0),!Cn(this))throw Bn("error");no(this,H)},b.prototype[_t]=function(H){rt(this),zt(this);var se=this._cancelAlgorithm(H);return mo(this),se},b.prototype[Qe]=function(H){var se=this._controlledReadableByteStream;if(this._queueTotalSize>0){var be=this._queue.shift();this._queueTotalSize-=be.byteLength,Hi(this);var De=new Uint8Array(be.buffer,be.byteOffset,be.byteLength);H._chunkSteps(De)}else{var U=this._autoAllocateChunkSize;if(U!==void 0){var q=void 0;try{q=new ArrayBuffer(U)}catch(Re){return void H._errorSteps(Re)}var ue={buffer:q,bufferByteLength:U,byteOffset:0,byteLength:U,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(ue)}vn(se,H),Fe(this)}},b}();function Cn(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledReadableByteStream")&&b instanceof rr}function Kr(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_associatedReadableByteStreamController")&&b instanceof Qt}function Fe(b){(function(H){var se=H._controlledReadableByteStream;return se._state!=="readable"||H._closeRequested||!H._started?!1:!!(yi(se)&&Qr(se)>0||vr(se)&&kr(se)>0||qe(H)>0)})(b)&&(b._pulling?b._pullAgain=!0:(b._pulling=!0,v(b._pullAlgorithm(),function(){b._pulling=!1,b._pullAgain&&(b._pullAgain=!1,Fe(b))},function(H){no(b,H)})))}function rt(b){$i(b),b._pendingPullIntos=new Q}function Ct(b,H){var se=!1;b._state==="closed"&&(se=!0);var be=en(H);H.readerType==="default"?Cr(b,be,se):function(De,U,q){var ue=De._reader._readIntoRequests.shift();q?ue._closeSteps(U):ue._chunkSteps(U)}(b,be,se)}function en(b){var H=b.bytesFilled,se=b.elementSize;return new b.viewConstructor(b.buffer,b.byteOffset,H/se)}function En(b,H,se,be){b._queue.push({buffer:H,byteOffset:se,byteLength:be}),b._queueTotalSize+=be}function Jr(b,H){var se=H.elementSize,be=H.bytesFilled-H.bytesFilled%se,De=Math.min(b._queueTotalSize,H.byteLength-H.bytesFilled),U=H.bytesFilled+De,q=U-U%se,ue=De,Re=!1;q>be&&(ue=q-H.bytesFilled,Re=!0);for(var pt=b._queue;ue>0;){var yt=pt.peek(),jt=Math.min(ue,yt.byteLength),wt=H.byteOffset+H.bytesFilled;Ce(H.buffer,wt,yt.buffer,yt.byteOffset,jt),yt.byteLength===jt?pt.shift():(yt.byteOffset+=jt,yt.byteLength-=jt),b._queueTotalSize-=jt,ki(b,jt,H),ue-=jt}return Re}function ki(b,H,se){se.bytesFilled+=H}function Hi(b){b._queueTotalSize===0&&b._closeRequested?(mo(b),qn(b._controlledReadableByteStream)):Fe(b)}function $i(b){b._byobRequest!==null&&(b._byobRequest._associatedReadableByteStreamController=void 0,b._byobRequest._view=null,b._byobRequest=null)}function ci(b){for(;b._pendingPullIntos.length>0;){if(b._queueTotalSize===0)return;var H=b._pendingPullIntos.peek();Jr(b,H)&&(ji(b),Ct(b._controlledReadableByteStream,H))}}function so(b,H){var se=b._pendingPullIntos.peek();$i(b),b._controlledReadableByteStream._state==="closed"?function(be,De){var U=be._controlledReadableByteStream;if(vr(U))for(;kr(U)>0;)Ct(U,ji(be))}(b):function(be,De,U){if(ki(0,De,U),!(U.bytesFilled<U.elementSize)){ji(be);var q=U.bytesFilled%U.elementSize;if(q>0){var ue=U.byteOffset+U.bytesFilled,Re=Ne(U.buffer,ue-q,ue);En(be,Re,0,Re.byteLength)}U.bytesFilled-=q,Ct(be._controlledReadableByteStream,U),ci(be)}}(b,H,se),Fe(b)}function ji(b){return b._pendingPullIntos.shift()}function mo(b){b._pullAlgorithm=void 0,b._cancelAlgorithm=void 0}function tn(b){var H=b._controlledReadableByteStream;if(!b._closeRequested&&H._state==="readable")if(b._queueTotalSize>0)b._closeRequested=!0;else{if(b._pendingPullIntos.length>0&&b._pendingPullIntos.peek().bytesFilled>0){var se=new TypeError("Insufficient bytes to fill elements in the given buffer");throw no(b,se),se}mo(b),qn(H)}}function Mo(b,H){var se=b._controlledReadableByteStream;if(!b._closeRequested&&se._state==="readable"){var be=H.buffer,De=H.byteOffset,U=H.byteLength,q=be;if(b._pendingPullIntos.length>0){var ue=b._pendingPullIntos.peek();ue.buffer,ue.buffer=ue.buffer}$i(b),yi(se)?Qr(se)===0?En(b,q,De,U):(b._pendingPullIntos.length>0&&ji(b),Cr(se,new Uint8Array(q,De,U),!1)):vr(se)?(En(b,q,De,U),ci(b)):En(b,q,De,U),Fe(b)}}function no(b,H){var se=b._controlledReadableByteStream;se._state==="readable"&&(rt(b),zt(b),mo(b),nr(se,H))}function ye(b){if(b._byobRequest===null&&b._pendingPullIntos.length>0){var H=b._pendingPullIntos.peek(),se=new Uint8Array(H.buffer,H.byteOffset+H.bytesFilled,H.byteLength-H.bytesFilled),be=Object.create(Qt.prototype);(function(De,U,q){De._associatedReadableByteStreamController=U,De._view=q})(be,b,se),b._byobRequest=be}return b._byobRequest}function qe(b){var H=b._controlledReadableByteStream._state;return H==="errored"?null:H==="closed"?0:b._strategyHWM-b._queueTotalSize}function ut(b,H){var se=b._pendingPullIntos.peek();if(b._controlledReadableByteStream._state==="closed"){if(H!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(H===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(se.bytesFilled+H>se.byteLength)throw new RangeError("bytesWritten out of range")}se.buffer=se.buffer,so(b,H)}function Ue(b,H){var se=b._pendingPullIntos.peek();if(b._controlledReadableByteStream._state==="closed"){if(H.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(H.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(se.byteOffset+se.bytesFilled!==H.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(se.bufferByteLength!==H.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(se.bytesFilled+H.byteLength>se.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var be=H.byteLength;se.buffer=H.buffer,so(b,be)}function ht(b,H,se,be,De,U,q){H._controlledReadableByteStream=b,H._pullAgain=!1,H._pulling=!1,H._byobRequest=null,H._queue=H._queueTotalSize=void 0,zt(H),H._closeRequested=!1,H._started=!1,H._strategyHWM=U,H._pullAlgorithm=be,H._cancelAlgorithm=De,H._autoAllocateChunkSize=q,H._pendingPullIntos=new Q,b._readableStreamController=H,v(_(se()),function(){H._started=!0,Fe(H)},function(ue){no(H,ue)})}function Dn(b){return new TypeError("ReadableStreamBYOBRequest.prototype."+b+" can only be used on a ReadableStreamBYOBRequest")}function Bn(b){return new TypeError("ReadableByteStreamController.prototype."+b+" can only be used on a ReadableByteStreamController")}function _r(b){return new gr(b)}function yr(b,H){b._reader._readIntoRequests.push(H)}function kr(b){return b._reader._readIntoRequests.length}function vr(b){var H=b._reader;return H!==void 0&&!!ei(H)}Object.defineProperties(rr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var gr=function(){function b(H){if(nt(H,1,"ReadableStreamBYOBReader"),dn(H,"First parameter"),Ar(H))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Cn(H._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ne(this,H),this._readIntoRequests=new Q}return Object.defineProperty(b.prototype,"closed",{get:function(){return ei(this)?this._closedPromise:A(zi("closed"))},enumerable:!1,configurable:!0}),b.prototype.cancel=function(H){return H===void 0&&(H=void 0),ei(this)?this._ownerReadableStream===void 0?A(Pe("cancel")):de(this,H):A(zi("cancel"))},b.prototype.read=function(H){if(!ei(this))return A(zi("read"));if(!ArrayBuffer.isView(H))return A(new TypeError("view must be an array buffer view"));if(H.byteLength===0)return A(new TypeError("view must have non-zero byteLength"));if(H.buffer.byteLength===0)return A(new TypeError("view's buffer must have non-zero byteLength"));if(H.buffer,this._ownerReadableStream===void 0)return A(Pe("read from"));var se,be,De=d(function(U,q){se=U,be=q});return Wi(this,H,{_chunkSteps:function(U){return se({value:U,done:!1})},_closeSteps:function(U){return se({value:U,done:!0})},_errorSteps:function(U){return be(U)}}),De},b.prototype.releaseLock=function(){if(!ei(this))throw zi("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ie(this)}},b}();function ei(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_readIntoRequests")&&b instanceof gr}function Wi(b,H,se){var be=b._ownerReadableStream;be._disturbed=!0,be._state==="errored"?se._errorSteps(be._storedError):function(De,U,q){var ue=De._controlledReadableByteStream,Re=1;U.constructor!==DataView&&(Re=U.constructor.BYTES_PER_ELEMENT);var pt=U.constructor,yt=U.buffer,jt={buffer:yt,bufferByteLength:yt.byteLength,byteOffset:U.byteOffset,byteLength:U.byteLength,bytesFilled:0,elementSize:Re,viewConstructor:pt,readerType:"byob"};if(De._pendingPullIntos.length>0)return De._pendingPullIntos.push(jt),void yr(ue,q);if(ue._state!=="closed"){if(De._queueTotalSize>0){if(Jr(De,jt)){var wt=en(jt);return Hi(De),void q._chunkSteps(wt)}if(De._closeRequested){var Ht=new TypeError("Insufficient bytes to fill elements in the given buffer");return no(De,Ht),void q._errorSteps(Ht)}}De._pendingPullIntos.push(jt),yr(ue,q),Fe(De)}else{var Pn=new pt(jt.buffer,jt.byteOffset,0);q._closeSteps(Pn)}}(be._readableStreamController,H,se)}function zi(b){return new TypeError("ReadableStreamBYOBReader.prototype."+b+" can only be used on a ReadableStreamBYOBReader")}function Zi(b,H){var se=b.highWaterMark;if(se===void 0)return H;if(Nt(se)||se<0)throw new RangeError("Invalid highWaterMark");return se}function Ge(b){var H=b.size;return H||function(){return 1}}function c(b,H){ct(b,H);var se=b==null?void 0:b.highWaterMark,be=b==null?void 0:b.size;return{highWaterMark:se===void 0?void 0:Yt(se),size:be===void 0?void 0:Xe(be,H+" has member 'size' that")}}function Xe(b,H){return He(b,H),function(se){return Yt(b(se))}}function et(b,H,se){return He(b,se),function(be){return _e(b,H,[be])}}function it(b,H,se){return He(b,se),function(){return _e(b,H,[])}}function je(b,H,se){return He(b,se),function(be){return ee(b,H,[be])}}function qt(b,H,se){return He(b,se),function(be,De){return _e(b,H,[be,De])}}function It(b,H){if(!An(b))throw new TypeError(H+" is not a WritableStream.")}Object.defineProperties(gr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(gr.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var Rt=typeof AbortController=="function",Xt=function(){function b(H,se){H===void 0&&(H={}),se===void 0&&(se={}),H===void 0?H=null:P(H,"First parameter");var be=c(se,"Second parameter"),De=function(q,ue){ct(q,ue);var Re=q==null?void 0:q.abort,pt=q==null?void 0:q.close,yt=q==null?void 0:q.start,jt=q==null?void 0:q.type,wt=q==null?void 0:q.write;return{abort:Re===void 0?void 0:et(Re,q,ue+" has member 'abort' that"),close:pt===void 0?void 0:it(pt,q,ue+" has member 'close' that"),start:yt===void 0?void 0:je(yt,q,ue+" has member 'start' that"),write:wt===void 0?void 0:qt(wt,q,ue+" has member 'write' that"),type:jt}}(H,"First parameter");if(nn(this),De.type!==void 0)throw new RangeError("Invalid type is specified");var U=Ge(be);(function(q,ue,Re,pt){var yt=Object.create(li.prototype),jt=function(){},wt=function(){return _(void 0)},Ht=function(){return _(void 0)},Pn=function(){return _(void 0)};ue.start!==void 0&&(jt=function(){return ue.start(yt)}),ue.write!==void 0&&(wt=function(pr){return ue.write(pr,yt)}),ue.close!==void 0&&(Ht=function(){return ue.close()}),ue.abort!==void 0&&(Pn=function(pr){return ue.abort(pr)}),di(q,yt,jt,wt,Ht,Pn,Re,pt)})(this,De,Zi(be,1),U)}return Object.defineProperty(b.prototype,"locked",{get:function(){if(!An(this))throw gt("locked");return pn(this)},enumerable:!1,configurable:!0}),b.prototype.abort=function(H){return H===void 0&&(H=void 0),An(this)?pn(this)?A(new TypeError("Cannot abort a stream that already has a writer")):Ut(this,H):A(gt("abort"))},b.prototype.close=function(){return An(this)?pn(this)?A(new TypeError("Cannot close a stream that already has a writer")):Tn(this)?A(new TypeError("Cannot close an already-closing stream")):Gt(this):A(gt("close"))},b.prototype.getWriter=function(){if(!An(this))throw gt("getWriter");return hn(this)},b}();function hn(b){return new Hr(b)}function nn(b){b._state="writable",b._storedError=void 0,b._writer=void 0,b._writableStreamController=void 0,b._writeRequests=new Q,b._inFlightWriteRequest=void 0,b._closeRequest=void 0,b._inFlightCloseRequest=void 0,b._pendingAbortRequest=void 0,b._backpressure=!1}function An(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_writableStreamController")&&b instanceof Xt}function pn(b){return b._writer!==void 0}function Ut(b,H){var se;if(b._state==="closed"||b._state==="errored")return _(void 0);b._writableStreamController._abortReason=H,(se=b._writableStreamController._abortController)===null||se===void 0||se.abort();var be=b._state;if(be==="closed"||be==="errored")return _(void 0);if(b._pendingAbortRequest!==void 0)return b._pendingAbortRequest._promise;var De=!1;be==="erroring"&&(De=!0,H=void 0);var U=d(function(q,ue){b._pendingAbortRequest={_promise:void 0,_resolve:q,_reject:ue,_reason:H,_wasAlreadyErroring:De}});return b._pendingAbortRequest._promise=U,De||lr(b,H),U}function Gt(b){var H=b._state;if(H==="closed"||H==="errored")return A(new TypeError("The stream (in "+H+" state) is not in the writable state and cannot be closed"));var se,be=d(function(U,q){var ue={_resolve:U,_reject:q};b._closeRequest=ue}),De=b._writer;return De!==void 0&&b._backpressure&&H==="writable"&&Lr(De),Bt(se=b._writableStreamController,Ii,0),At(se),be}function on(b,H){b._state!=="writable"?Pr(b):lr(b,H)}function lr(b,H){var se=b._writableStreamController;b._state="erroring",b._storedError=H;var be=b._writer;be!==void 0&&Ti(be,H),!function(De){return!(De._inFlightWriteRequest===void 0&&De._inFlightCloseRequest===void 0)}(b)&&se._started&&Pr(b)}function Pr(b){b._state="errored",b._writableStreamController[j]();var H=b._storedError;if(b._writeRequests.forEach(function(be){be._reject(H)}),b._writeRequests=new Q,b._pendingAbortRequest!==void 0){var se=b._pendingAbortRequest;if(b._pendingAbortRequest=void 0,se._wasAlreadyErroring)return se._reject(H),void qr(b);v(b._writableStreamController[We](se._reason),function(){se._resolve(),qr(b)},function(be){se._reject(be),qr(b)})}else qr(b)}function Tn(b){return b._closeRequest!==void 0||b._inFlightCloseRequest!==void 0}function qr(b){b._closeRequest!==void 0&&(b._closeRequest._reject(b._storedError),b._closeRequest=void 0);var H=b._writer;H!==void 0&&Vr(H,b._storedError)}function xr(b,H){var se=b._writer;se!==void 0&&H!==b._backpressure&&(H?function(be){Fr(be)}(se):Lr(se)),b._backpressure=H}Object.defineProperties(Xt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Xt.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});var Hr=function(){function b(H){if(nt(H,1,"WritableStreamDefaultWriter"),It(H,"First parameter"),pn(H))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=H,H._writer=this;var se,be=H._state;if(be==="writable")!Tn(H)&&H._backpressure?Fr(this):hi(this),an(this);else if(be==="erroring")si(this,H._storedError),an(this);else if(be==="closed")hi(this),an(se=this),On(se);else{var De=H._storedError;si(this,De),Wr(this,De)}}return Object.defineProperty(b.prototype,"closed",{get:function(){return oi(this)?this._closedPromise:A(vt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!oi(this))throw vt("desiredSize");if(this._ownerWritableStream===void 0)throw Pt("desiredSize");return function(H){var se=H._ownerWritableStream,be=se._state;return be==="errored"||be==="erroring"?null:be==="closed"?0:Ln(se._writableStreamController)}(this)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"ready",{get:function(){return oi(this)?this._readyPromise:A(vt("ready"))},enumerable:!1,configurable:!0}),b.prototype.abort=function(H){return H===void 0&&(H=void 0),oi(this)?this._ownerWritableStream===void 0?A(Pt("abort")):function(se,be){return Ut(se._ownerWritableStream,be)}(this,H):A(vt("abort"))},b.prototype.close=function(){if(!oi(this))return A(vt("close"));var H=this._ownerWritableStream;return H===void 0?A(Pt("close")):Tn(H)?A(new TypeError("Cannot close an already-closing stream")):ti(this)},b.prototype.releaseLock=function(){if(!oi(this))throw vt("releaseLock");this._ownerWritableStream!==void 0&&Di(this)},b.prototype.write=function(H){return H===void 0&&(H=void 0),oi(this)?this._ownerWritableStream===void 0?A(Pt("write to")):Ri(this,H):A(vt("write"))},b}();function oi(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_ownerWritableStream")&&b instanceof Hr}function ti(b){return Gt(b._ownerWritableStream)}function Mi(b,H){b._closedPromiseState==="pending"?Vr(b,H):function(se,be){Wr(se,be)}(b,H)}function Ti(b,H){b._readyPromiseState==="pending"?wi(b,H):function(se,be){si(se,be)}(b,H)}function Di(b){var H=b._ownerWritableStream,se=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ti(b,se),Mi(b,se),H._writer=void 0,b._ownerWritableStream=void 0}function Ri(b,H){var se=b._ownerWritableStream,be=se._writableStreamController,De=function(ue,Re){try{return ue._strategySizeAlgorithm(Re)}catch(pt){return cn(ue,pt),1}}(be,H);if(se!==b._ownerWritableStream)return A(Pt("write to"));var U=se._state;if(U==="errored")return A(se._storedError);if(Tn(se)||U==="closed")return A(new TypeError("The stream is closing or closed and cannot be written to"));if(U==="erroring")return A(se._storedError);var q=function(ue){return d(function(Re,pt){var yt={_resolve:Re,_reject:pt};ue._writeRequests.push(yt)})}(se);return function(ue,Re,pt){try{Bt(ue,Re,pt)}catch(jt){return void cn(ue,jt)}var yt=ue._controlledWritableStream;!Tn(yt)&&yt._state==="writable"&&xr(yt,Wt(ue)),At(ue)}(be,H,De),q}Object.defineProperties(Hr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Hr.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var Ii={},li=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"abortReason",{get:function(){if(!fi(this))throw $n("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"signal",{get:function(){if(!fi(this))throw $n("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),b.prototype.error=function(H){if(H===void 0&&(H=void 0),!fi(this))throw $n("error");this._controlledWritableStream._state==="writable"&&Ke(this,H)},b.prototype[We]=function(H){var se=this._abortAlgorithm(H);return mn(this),se},b.prototype[j]=function(){zt(this)},b}();function fi(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledWritableStream")&&b instanceof li}function di(b,H,se,be,De,U,q,ue){H._controlledWritableStream=b,b._writableStreamController=H,H._queue=void 0,H._queueTotalSize=void 0,zt(H),H._abortReason=void 0,H._abortController=function(){if(Rt)return new AbortController}(),H._started=!1,H._strategySizeAlgorithm=ue,H._strategyHWM=q,H._writeAlgorithm=be,H._closeAlgorithm=De,H._abortAlgorithm=U;var Re=Wt(H);xr(b,Re),v(_(se()),function(){H._started=!0,At(H)},function(pt){H._started=!0,on(b,pt)})}function mn(b){b._writeAlgorithm=void 0,b._closeAlgorithm=void 0,b._abortAlgorithm=void 0,b._strategySizeAlgorithm=void 0}function Ln(b){return b._strategyHWM-b._queueTotalSize}function At(b){var H=b._controlledWritableStream;if(b._started&&H._inFlightWriteRequest===void 0)if(H._state!=="erroring"){if(b._queue.length!==0){var se=b._queue.peek().value;se===Ii?function(be){var De=be._controlledWritableStream;(function(q){q._inFlightCloseRequest=q._closeRequest,q._closeRequest=void 0})(De),Zt(be);var U=be._closeAlgorithm();mn(be),v(U,function(){(function(q){q._inFlightCloseRequest._resolve(void 0),q._inFlightCloseRequest=void 0,q._state==="erroring"&&(q._storedError=void 0,q._pendingAbortRequest!==void 0&&(q._pendingAbortRequest._resolve(),q._pendingAbortRequest=void 0)),q._state="closed";var ue=q._writer;ue!==void 0&&On(ue)})(De)},function(q){(function(ue,Re){ue._inFlightCloseRequest._reject(Re),ue._inFlightCloseRequest=void 0,ue._pendingAbortRequest!==void 0&&(ue._pendingAbortRequest._reject(Re),ue._pendingAbortRequest=void 0),on(ue,Re)})(De,q)})}(b):function(be,De){var U=be._controlledWritableStream;(function(q){q._inFlightWriteRequest=q._writeRequests.shift()})(U),v(be._writeAlgorithm(De),function(){(function(Re){Re._inFlightWriteRequest._resolve(void 0),Re._inFlightWriteRequest=void 0})(U);var q=U._state;if(Zt(be),!Tn(U)&&q==="writable"){var ue=Wt(be);xr(U,ue)}At(be)},function(q){U._state==="writable"&&mn(be),function(ue,Re){ue._inFlightWriteRequest._reject(Re),ue._inFlightWriteRequest=void 0,on(ue,Re)}(U,q)})}(b,se)}}else Pr(H)}function cn(b,H){b._controlledWritableStream._state==="writable"&&Ke(b,H)}function Wt(b){return Ln(b)<=0}function Ke(b,H){var se=b._controlledWritableStream;mn(b),lr(se,H)}function gt(b){return new TypeError("WritableStream.prototype."+b+" can only be used on a WritableStream")}function $n(b){return new TypeError("WritableStreamDefaultController.prototype."+b+" can only be used on a WritableStreamDefaultController")}function vt(b){return new TypeError("WritableStreamDefaultWriter.prototype."+b+" can only be used on a WritableStreamDefaultWriter")}function Pt(b){return new TypeError("Cannot "+b+" a stream using a released writer")}function an(b){b._closedPromise=d(function(H,se){b._closedPromise_resolve=H,b._closedPromise_reject=se,b._closedPromiseState="pending"})}function Wr(b,H){an(b),Vr(b,H)}function Vr(b,H){b._closedPromise_reject!==void 0&&(k(b._closedPromise),b._closedPromise_reject(H),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0,b._closedPromiseState="rejected")}function On(b){b._closedPromise_resolve!==void 0&&(b._closedPromise_resolve(void 0),b._closedPromise_resolve=void 0,b._closedPromise_reject=void 0,b._closedPromiseState="resolved")}function Fr(b){b._readyPromise=d(function(H,se){b._readyPromise_resolve=H,b._readyPromise_reject=se}),b._readyPromiseState="pending"}function si(b,H){Fr(b),wi(b,H)}function hi(b){Fr(b),Lr(b)}function wi(b,H){b._readyPromise_reject!==void 0&&(k(b._readyPromise),b._readyPromise_reject(H),b._readyPromise_resolve=void 0,b._readyPromise_reject=void 0,b._readyPromiseState="rejected")}function Lr(b){b._readyPromise_resolve!==void 0&&(b._readyPromise_resolve(void 0),b._readyPromise_resolve=void 0,b._readyPromise_reject=void 0,b._readyPromiseState="fulfilled")}Object.defineProperties(li.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(li.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Yr=typeof DOMException<"u"?DOMException:void 0,Rn,fr=function(b){if(typeof b!="function"&&typeof b!="object")return!1;try{return new b,!0}catch{return!1}}(Yr)?Yr:((Rn=function(b,H){this.message=b||"",this.name=H||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}).prototype=Object.create(Error.prototype),Object.defineProperty(Rn.prototype,"constructor",{value:Rn,writable:!0,configurable:!0}),Rn);function $r(b,H,se,be,De,U){var q=$t(b),ue=hn(H);b._disturbed=!0;var Re=!1,pt=_(void 0);return d(function(yt,jt){var wt,Ht,Pn,pr;if(U!==void 0){if(wt=function(){var Hn=new fr("Aborted","AbortError"),rn=[];be||rn.push(function(){return H._state==="writable"?Ut(H,Hn):_(void 0)}),De||rn.push(function(){return b._state==="readable"?xn(b,Hn):_(void 0)}),zn(function(){return Promise.all(rn.map(function(sn){return sn()}))},!0,Hn)},U.aborted)return void wt();U.addEventListener("abort",wt)}if(tr(b,q._closedPromise,function(Hn){be?jr(!0,Hn):zn(function(){return Ut(H,Hn)},!0,Hn)}),tr(H,ue._closedPromise,function(Hn){De?jr(!0,Hn):zn(function(){return xn(b,Hn)},!0,Hn)}),Ht=b,Pn=q._closedPromise,pr=function(){se?jr():zn(function(){return function(Hn){var rn=Hn._ownerWritableStream,sn=rn._state;return Tn(rn)||sn==="closed"?_(void 0):sn==="errored"?A(rn._storedError):ti(Hn)}(ue)})},Ht._state==="closed"?pr():T(Pn,pr),Tn(H)||H._state==="closed"){var Gr=new TypeError("the destination writable stream closed before all data could be piped to it");De?jr(!0,Gr):zn(function(){return xn(b,Gr)},!0,Gr)}function Zn(){var Hn=pt;return E(pt,function(){return Hn!==pt?Zn():void 0})}function tr(Hn,rn,sn){Hn._state==="errored"?sn(Hn._storedError):I(rn,sn)}function zn(Hn,rn,sn){function Kn(){v(Hn(),function(){return br(rn,sn)},function(mr){return br(!0,mr)})}Re||(Re=!0,H._state!=="writable"||Tn(H)?Kn():T(Zn(),Kn))}function jr(Hn,rn){Re||(Re=!0,H._state!=="writable"||Tn(H)?br(Hn,rn):T(Zn(),function(){return br(Hn,rn)}))}function br(Hn,rn){Di(ue),Ie(q),U!==void 0&&U.removeEventListener("abort",wt),Hn?jt(rn):yt(void 0)}k(d(function(Hn,rn){(function sn(Kn){Kn?Hn():E(Re?_(!0):E(ue._readyPromise,function(){return d(function(mr,he){ar(q,{_chunkSteps:function(ve){pt=E(Ri(ue,ve),void 0,r),mr(!1)},_closeSteps:function(){return mr(!0)},_errorSteps:he})})}),sn,rn)})(!1)}))})}var er=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!st(this))throw ni("desiredSize");return Sn(this)},enumerable:!1,configurable:!0}),b.prototype.close=function(){if(!st(this))throw ni("close");if(!dr(this))throw new TypeError("The stream is not in a state that permits close");Me(this)},b.prototype.enqueue=function(H){if(H===void 0&&(H=void 0),!st(this))throw ni("enqueue");if(!dr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ze(this,H)},b.prototype.error=function(H){if(H===void 0&&(H=void 0),!st(this))throw ni("error");ft(this,H)},b.prototype[_t]=function(H){zt(this);var se=this._cancelAlgorithm(H);return pe(this),se},b.prototype[Qe]=function(H){var se=this._controlledReadableStream;if(this._queue.length>0){var be=Zt(this);this._closeRequested&&this._queue.length===0?(pe(this),qn(se)):$(this),H._chunkSteps(be)}else vn(se,H),$(this)},b}();function st(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledReadableStream")&&b instanceof er}function $(b){oe(b)&&(b._pulling?b._pullAgain=!0:(b._pulling=!0,v(b._pullAlgorithm(),function(){b._pulling=!1,b._pullAgain&&(b._pullAgain=!1,$(b))},function(H){ft(b,H)})))}function oe(b){var H=b._controlledReadableStream;return!!dr(b)&&!!b._started&&(!!(Ar(H)&&Qr(H)>0)||Sn(b)>0)}function pe(b){b._pullAlgorithm=void 0,b._cancelAlgorithm=void 0,b._strategySizeAlgorithm=void 0}function Me(b){if(dr(b)){var H=b._controlledReadableStream;b._closeRequested=!0,b._queue.length===0&&(pe(b),qn(H))}}function Ze(b,H){if(dr(b)){var se=b._controlledReadableStream;if(Ar(se)&&Qr(se)>0)Cr(se,H,!1);else{var be=void 0;try{be=b._strategySizeAlgorithm(H)}catch(De){throw ft(b,De),De}try{Bt(b,H,be)}catch(De){throw ft(b,De),De}}$(b)}}function ft(b,H){var se=b._controlledReadableStream;se._state==="readable"&&(zt(b),pe(b),nr(se,H))}function Sn(b){var H=b._controlledReadableStream._state;return H==="errored"?null:H==="closed"?0:b._strategyHWM-b._queueTotalSize}function dr(b){var H=b._controlledReadableStream._state;return!b._closeRequested&&H==="readable"}function Wn(b,H,se,be,De,U,q){H._controlledReadableStream=b,H._queue=void 0,H._queueTotalSize=void 0,zt(H),H._started=!1,H._closeRequested=!1,H._pullAgain=!1,H._pulling=!1,H._strategySizeAlgorithm=q,H._strategyHWM=U,H._pullAlgorithm=be,H._cancelAlgorithm=De,b._readableStreamController=H,v(_(se()),function(){H._started=!0,$(H)},function(ue){ft(H,ue)})}function ni(b){return new TypeError("ReadableStreamDefaultController.prototype."+b+" can only be used on a ReadableStreamDefaultController")}function ur(b,H){return Cn(b._readableStreamController)?function(se){var be,De,U,q,ue,Re=$t(se),pt=!1,yt=!1,jt=!1,wt=!1,Ht=!1,Pn=d(function(rn){ue=rn});function pr(rn){I(rn._closedPromise,function(sn){rn===Re&&(no(U._readableStreamController,sn),no(q._readableStreamController,sn),wt&&Ht||ue(void 0))})}function Gr(){ei(Re)&&(Ie(Re),pr(Re=$t(se))),ar(Re,{_chunkSteps:function(rn){K(function(){yt=!1,jt=!1;var sn=rn,Kn=rn;if(!wt&&!Ht)try{Kn=Jt(rn)}catch(mr){return no(U._readableStreamController,mr),no(q._readableStreamController,mr),void ue(xn(se,mr))}wt||Mo(U._readableStreamController,sn),Ht||Mo(q._readableStreamController,Kn),pt=!1,yt?tr():jt&&zn()})},_closeSteps:function(){pt=!1,wt||tn(U._readableStreamController),Ht||tn(q._readableStreamController),U._readableStreamController._pendingPullIntos.length>0&&ut(U._readableStreamController,0),q._readableStreamController._pendingPullIntos.length>0&&ut(q._readableStreamController,0),wt&&Ht||ue(void 0)},_errorSteps:function(){pt=!1}})}function Zn(rn,sn){vi(Re)&&(Ie(Re),pr(Re=_r(se)));var Kn=sn?q:U,mr=sn?U:q;Wi(Re,rn,{_chunkSteps:function(he){K(function(){yt=!1,jt=!1;var ve=sn?Ht:wt;if(sn?wt:Ht)ve||Ue(Kn._readableStreamController,he);else{var xe=void 0;try{xe=Jt(he)}catch(Ve){return no(Kn._readableStreamController,Ve),no(mr._readableStreamController,Ve),void ue(xn(se,Ve))}ve||Ue(Kn._readableStreamController,he),Mo(mr._readableStreamController,xe)}pt=!1,yt?tr():jt&&zn()})},_closeSteps:function(he){pt=!1;var ve=sn?Ht:wt,xe=sn?wt:Ht;ve||tn(Kn._readableStreamController),xe||tn(mr._readableStreamController),he!==void 0&&(ve||Ue(Kn._readableStreamController,he),!xe&&mr._readableStreamController._pendingPullIntos.length>0&&ut(mr._readableStreamController,0)),ve&&xe||ue(void 0)},_errorSteps:function(){pt=!1}})}function tr(){if(pt)return yt=!0,_(void 0);pt=!0;var rn=ye(U._readableStreamController);return rn===null?Gr():Zn(rn._view,!1),_(void 0)}function zn(){if(pt)return jt=!0,_(void 0);pt=!0;var rn=ye(q._readableStreamController);return rn===null?Gr():Zn(rn._view,!0),_(void 0)}function jr(rn){if(wt=!0,be=rn,Ht){var sn=_n([be,De]),Kn=xn(se,sn);ue(Kn)}return Pn}function br(rn){if(Ht=!0,De=rn,wt){var sn=_n([be,De]),Kn=xn(se,sn);ue(Kn)}return Pn}function Hn(){}return U=gn(Hn,tr,jr),q=gn(Hn,zn,br),pr(Re),[U,q]}(b):function(se,be){var De,U,q,ue,Re,pt=$t(se),yt=!1,jt=!1,wt=!1,Ht=!1,Pn=d(function(zn){Re=zn});function pr(){return yt?(jt=!0,_(void 0)):(yt=!0,ar(pt,{_chunkSteps:function(zn){K(function(){jt=!1;var jr=zn,br=zn;wt||Ze(q._readableStreamController,jr),Ht||Ze(ue._readableStreamController,br),yt=!1,jt&&pr()})},_closeSteps:function(){yt=!1,wt||Me(q._readableStreamController),Ht||Me(ue._readableStreamController),wt&&Ht||Re(void 0)},_errorSteps:function(){yt=!1}}),_(void 0))}function Gr(zn){if(wt=!0,De=zn,Ht){var jr=_n([De,U]),br=xn(se,jr);Re(br)}return Pn}function Zn(zn){if(Ht=!0,U=zn,wt){var jr=_n([De,U]),br=xn(se,jr);Re(br)}return Pn}function tr(){}return q=Nn(tr,pr,Gr),ue=Nn(tr,pr,Zn),I(pt._closedPromise,function(zn){ft(q._readableStreamController,zn),ft(ue._readableStreamController,zn),wt&&Ht||Re(void 0)}),[q,ue]}(b)}function Br(b,H,se){return He(b,se),function(be){return _e(b,H,[be])}}function Ir(b,H,se){return He(b,se),function(be){return _e(b,H,[be])}}function Er(b,H,se){return He(b,se),function(be){return ee(b,H,[be])}}function hr(b,H){if((b=""+b)!="bytes")throw new TypeError(H+" '"+b+"' is not a valid enumeration value for ReadableStreamType");return b}function cr(b,H){if((b=""+b)!="byob")throw new TypeError(H+" '"+b+"' is not a valid enumeration value for ReadableStreamReaderMode");return b}function Vt(b,H){ct(b,H);var se=b==null?void 0:b.preventAbort,be=b==null?void 0:b.preventCancel,De=b==null?void 0:b.preventClose,U=b==null?void 0:b.signal;return U!==void 0&&function(q,ue){if(!function(Re){if(typeof Re!="object"||Re===null)return!1;try{return typeof Re.aborted=="boolean"}catch{return!1}}(q))throw new TypeError(ue+" is not an AbortSignal.")}(U,H+" has member 'signal' that"),{preventAbort:Boolean(se),preventCancel:Boolean(be),preventClose:Boolean(De),signal:U}}Object.defineProperties(er.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(er.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var ln=function(){function b(H,se){H===void 0&&(H={}),se===void 0&&(se={}),H===void 0?H=null:P(H,"First parameter");var be=c(se,"Second parameter"),De=function(q,ue){ct(q,ue);var Re=q,pt=Re==null?void 0:Re.autoAllocateChunkSize,yt=Re==null?void 0:Re.cancel,jt=Re==null?void 0:Re.pull,wt=Re==null?void 0:Re.start,Ht=Re==null?void 0:Re.type;return{autoAllocateChunkSize:pt===void 0?void 0:Et(pt,ue+" has member 'autoAllocateChunkSize' that"),cancel:yt===void 0?void 0:Br(yt,Re,ue+" has member 'cancel' that"),pull:jt===void 0?void 0:Ir(jt,Re,ue+" has member 'pull' that"),start:wt===void 0?void 0:Er(wt,Re,ue+" has member 'start' that"),type:Ht===void 0?void 0:hr(Ht,ue+" has member 'type' that")}}(H,"First parameter");if(Ft(this),De.type==="bytes"){if(be.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");(function(q,ue,Re){var pt=Object.create(rr.prototype),yt=function(){},jt=function(){return _(void 0)},wt=function(){return _(void 0)};ue.start!==void 0&&(yt=function(){return ue.start(pt)}),ue.pull!==void 0&&(jt=function(){return ue.pull(pt)}),ue.cancel!==void 0&&(wt=function(Pn){return ue.cancel(Pn)});var Ht=ue.autoAllocateChunkSize;if(Ht===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ht(q,pt,yt,jt,wt,Re,Ht)})(this,De,Zi(be,0))}else{var U=Ge(be);(function(q,ue,Re,pt){var yt=Object.create(er.prototype),jt=function(){},wt=function(){return _(void 0)},Ht=function(){return _(void 0)};ue.start!==void 0&&(jt=function(){return ue.start(yt)}),ue.pull!==void 0&&(wt=function(){return ue.pull(yt)}),ue.cancel!==void 0&&(Ht=function(Pn){return ue.cancel(Pn)}),Wn(q,yt,jt,wt,Ht,Re,pt)})(this,De,Zi(be,1),U)}}return Object.defineProperty(b.prototype,"locked",{get:function(){if(!Jn(this))throw Mt("locked");return Ar(this)},enumerable:!1,configurable:!0}),b.prototype.cancel=function(H){return H===void 0&&(H=void 0),Jn(this)?Ar(this)?A(new TypeError("Cannot cancel a stream that already has a reader")):xn(this,H):A(Mt("cancel"))},b.prototype.getReader=function(H){if(H===void 0&&(H=void 0),!Jn(this))throw Mt("getReader");return function(se,be){ct(se,be);var De=se==null?void 0:se.mode;return{mode:De===void 0?void 0:cr(De,be+" has member 'mode' that")}}(H,"First parameter").mode===void 0?$t(this):_r(this)},b.prototype.pipeThrough=function(H,se){if(se===void 0&&(se={}),!Jn(this))throw Mt("pipeThrough");nt(H,1,"pipeThrough");var be=function(U,q){ct(U,q);var ue=U==null?void 0:U.readable;Fn(ue,"readable","ReadableWritablePair"),dn(ue,q+" has member 'readable' that");var Re=U==null?void 0:U.writable;return Fn(Re,"writable","ReadableWritablePair"),It(Re,q+" has member 'writable' that"),{readable:ue,writable:Re}}(H,"First parameter"),De=Vt(se,"Second parameter");if(Ar(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(pn(be.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return k($r(this,be.writable,De.preventClose,De.preventAbort,De.preventCancel,De.signal)),be.readable},b.prototype.pipeTo=function(H,se){if(se===void 0&&(se={}),!Jn(this))return A(Mt("pipeTo"));if(H===void 0)return A("Parameter 1 is required in 'pipeTo'.");if(!An(H))return A(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var be;try{be=Vt(se,"Second parameter")}catch(De){return A(De)}return Ar(this)?A(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):pn(H)?A(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):$r(this,H,be.preventClose,be.preventAbort,be.preventCancel,be.signal)},b.prototype.tee=function(){if(!Jn(this))throw Mt("tee");return _n(ur(this))},b.prototype.values=function(H){if(H===void 0&&(H=void 0),!Jn(this))throw Mt("values");var se,be,De,U,q,ue=function(Re,pt){ct(Re,pt);var yt=Re==null?void 0:Re.preventCancel;return{preventCancel:Boolean(yt)}}(H,"First parameter");return se=this,be=ue.preventCancel,De=$t(se),U=new fe(De,be),(q=Object.create(ot))._asyncIteratorImpl=U,q},b}();function Nn(b,H,se,be,De){be===void 0&&(be=1),De===void 0&&(De=function(){return 1});var U=Object.create(ln.prototype);return Ft(U),Wn(U,Object.create(er.prototype),b,H,se,be,De),U}function gn(b,H,se){var be=Object.create(ln.prototype);return Ft(be),ht(be,Object.create(rr.prototype),b,H,se,0,void 0),be}function Ft(b){b._state="readable",b._reader=void 0,b._storedError=void 0,b._disturbed=!1}function Jn(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_readableStreamController")&&b instanceof ln}function Ar(b){return b._reader!==void 0}function xn(b,H){if(b._disturbed=!0,b._state==="closed")return _(void 0);if(b._state==="errored")return A(b._storedError);qn(b);var se=b._reader;return se!==void 0&&ei(se)&&(se._readIntoRequests.forEach(function(be){be._closeSteps(void 0)}),se._readIntoRequests=new Q),R(b._readableStreamController[_t](H),r)}function qn(b){b._state="closed";var H=b._reader;H!==void 0&&(Oe(H),vi(H)&&(H._readRequests.forEach(function(se){se._closeSteps()}),H._readRequests=new Q))}function nr(b,H){b._state="errored",b._storedError=H;var se=b._reader;se!==void 0&&(Se(se,H),vi(se)?(se._readRequests.forEach(function(be){be._errorSteps(H)}),se._readRequests=new Q):(se._readIntoRequests.forEach(function(be){be._errorSteps(H)}),se._readIntoRequests=new Q))}function Mt(b){return new TypeError("ReadableStream.prototype."+b+" can only be used on a ReadableStream")}function Vn(b,H){ct(b,H);var se=b==null?void 0:b.highWaterMark;return Fn(se,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Yt(se)}}Object.defineProperties(ln.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ln.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),typeof n.asyncIterator=="symbol"&&Object.defineProperty(ln.prototype,n.asyncIterator,{value:ln.prototype.values,writable:!0,configurable:!0});var yn=function(b){return b.byteLength};try{Object.defineProperty(yn,"name",{value:"size",configurable:!0})}catch{}var In=function(){function b(H){nt(H,1,"ByteLengthQueuingStrategy"),H=Vn(H,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=H.highWaterMark}return Object.defineProperty(b.prototype,"highWaterMark",{get:function(){if(!ir(this))throw Un("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"size",{get:function(){if(!ir(this))throw Un("size");return yn},enumerable:!1,configurable:!0}),b}();function Un(b){return new TypeError("ByteLengthQueuingStrategy.prototype."+b+" can only be used on a ByteLengthQueuingStrategy")}function ir(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_byteLengthQueuingStrategyHighWaterMark")&&b instanceof In}Object.defineProperties(In.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(In.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var Mr=function(){return 1};try{Object.defineProperty(Mr,"name",{value:"size",configurable:!0})}catch{}var fn=function(){function b(H){nt(H,1,"CountQueuingStrategy"),H=Vn(H,"First parameter"),this._countQueuingStrategyHighWaterMark=H.highWaterMark}return Object.defineProperty(b.prototype,"highWaterMark",{get:function(){if(!Gn(this))throw Xn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"size",{get:function(){if(!Gn(this))throw Xn("size");return Mr},enumerable:!1,configurable:!0}),b}();function Xn(b){return new TypeError("CountQueuingStrategy.prototype."+b+" can only be used on a CountQueuingStrategy")}function Gn(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_countQueuingStrategyHighWaterMark")&&b instanceof fn}function Lt(b,H,se){return He(b,se),function(be){return _e(b,H,[be])}}function or(b,H,se){return He(b,se),function(be){return ee(b,H,[be])}}function Or(b,H,se){return He(b,se),function(be,De){return _e(b,H,[be,De])}}Object.defineProperties(fn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(fn.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var bn=function(){function b(H,se,be){H===void 0&&(H={}),se===void 0&&(se={}),be===void 0&&(be={}),H===void 0&&(H=null);var De=c(se,"Second parameter"),U=c(be,"Third parameter"),q=function(wt,Ht){ct(wt,Ht);var Pn=wt==null?void 0:wt.flush,pr=wt==null?void 0:wt.readableType,Gr=wt==null?void 0:wt.start,Zn=wt==null?void 0:wt.transform,tr=wt==null?void 0:wt.writableType;return{flush:Pn===void 0?void 0:Lt(Pn,wt,Ht+" has member 'flush' that"),readableType:pr,start:Gr===void 0?void 0:or(Gr,wt,Ht+" has member 'start' that"),transform:Zn===void 0?void 0:Or(Zn,wt,Ht+" has member 'transform' that"),writableType:tr}}(H,"First parameter");if(q.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(q.writableType!==void 0)throw new RangeError("Invalid writableType specified");var ue,Re=Zi(U,0),pt=Ge(U),yt=Zi(De,1),jt=Ge(De);(function(wt,Ht,Pn,pr,Gr,Zn){function tr(){return Ht}function zn(sn){return function(Kn,mr){var he=Kn._transformStreamController;return Kn._backpressure?R(Kn._backpressureChangePromise,function(){var ve=Kn._writable;if(ve._state==="erroring")throw ve._storedError;return ui(he,mr)}):ui(he,mr)}(wt,sn)}function jr(sn){return function(Kn,mr){return jn(Kn,mr),_(void 0)}(wt,sn)}function br(){return function(sn){var Kn=sn._readable,mr=sn._transformStreamController,he=mr._flushAlgorithm();return ai(mr),R(he,function(){if(Kn._state==="errored")throw Kn._storedError;Me(Kn._readableStreamController)},function(ve){throw jn(sn,ve),Kn._storedError})}(wt)}function Hn(){return function(sn){return pi(sn,!1),sn._backpressureChangePromise}(wt)}function rn(sn){return Nr(wt,sn),_(void 0)}wt._writable=function(sn,Kn,mr,he,ve,xe){ve===void 0&&(ve=1),xe===void 0&&(xe=function(){return 1});var Ve=Object.create(Xt.prototype);return nn(Ve),di(Ve,Object.create(li.prototype),sn,Kn,mr,he,ve,xe),Ve}(tr,zn,br,jr,Pn,pr),wt._readable=Nn(tr,Hn,rn,Gr,Zn),wt._backpressure=void 0,wt._backpressureChangePromise=void 0,wt._backpressureChangePromise_resolve=void 0,pi(wt,!0),wt._transformStreamController=void 0})(this,d(function(wt){ue=wt}),yt,jt,Re,pt),function(wt,Ht){var Pn=Object.create(Ur.prototype),pr=function(Zn){try{return Oi(Pn,Zn),_(void 0)}catch(tr){return A(tr)}},Gr=function(){return _(void 0)};Ht.transform!==void 0&&(pr=function(Zn){return Ht.transform(Zn,Pn)}),Ht.flush!==void 0&&(Gr=function(){return Ht.flush(Pn)}),function(Zn,tr,zn,jr){tr._controlledTransformStream=Zn,Zn._transformStreamController=tr,tr._transformAlgorithm=zn,tr._flushAlgorithm=jr}(wt,Pn,pr,Gr)}(this,q),q.start!==void 0?ue(q.start(this._transformStreamController)):ue(void 0)}return Object.defineProperty(b.prototype,"readable",{get:function(){if(!Tr(this))throw Ci("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"writable",{get:function(){if(!Tr(this))throw Ci("writable");return this._writable},enumerable:!1,configurable:!0}),b}();function Tr(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_transformStreamController")&&b instanceof bn}function jn(b,H){ft(b._readable._readableStreamController,H),Nr(b,H)}function Nr(b,H){ai(b._transformStreamController),cn(b._writable._writableStreamController,H),b._backpressure&&pi(b,!1)}function pi(b,H){b._backpressureChangePromise!==void 0&&b._backpressureChangePromise_resolve(),b._backpressureChangePromise=d(function(se){b._backpressureChangePromise_resolve=se}),b._backpressure=H}Object.defineProperties(bn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(bn.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});var Ur=function(){function b(){throw new TypeError("Illegal constructor")}return Object.defineProperty(b.prototype,"desiredSize",{get:function(){if(!Dr(this))throw Pi("desiredSize");return Sn(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),b.prototype.enqueue=function(H){if(H===void 0&&(H=void 0),!Dr(this))throw Pi("enqueue");Oi(this,H)},b.prototype.error=function(H){if(H===void 0&&(H=void 0),!Dr(this))throw Pi("error");var se;se=H,jn(this._controlledTransformStream,se)},b.prototype.terminate=function(){if(!Dr(this))throw Pi("terminate");(function(H){var se=H._controlledTransformStream;Me(se._readable._readableStreamController);var be=new TypeError("TransformStream terminated");Nr(se,be)})(this)},b}();function Dr(b){return!!s(b)&&!!Object.prototype.hasOwnProperty.call(b,"_controlledTransformStream")&&b instanceof Ur}function ai(b){b._transformAlgorithm=void 0,b._flushAlgorithm=void 0}function Oi(b,H){var se=b._controlledTransformStream,be=se._readable._readableStreamController;if(!dr(be))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ze(be,H)}catch(De){throw Nr(se,De),se._readable._storedError}(function(De){return!oe(De)})(be)!==se._backpressure&&pi(se,!0)}function ui(b,H){return R(b._transformAlgorithm(H),void 0,function(se){throw jn(b._controlledTransformStream,se),se})}function Pi(b){return new TypeError("TransformStreamDefaultController.prototype."+b+" can only be used on a TransformStreamDefaultController")}function Ci(b){return new TypeError("TransformStream.prototype."+b+" can only be used on a TransformStream")}Object.defineProperties(Ur.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Ur.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var Ni={ReadableStream:ln,ReadableStreamDefaultController:er,ReadableByteStreamController:rr,ReadableStreamBYOBRequest:Qt,ReadableStreamDefaultReader:Mn,ReadableStreamBYOBReader:gr,WritableStream:Xt,WritableStreamDefaultController:li,WritableStreamDefaultWriter:Hr,ByteLengthQueuingStrategy:In,CountQueuingStrategy:fn,TransformStream:bn,TransformStreamDefaultController:Ur};if(i!==void 0)for(var Si in Ni)Object.prototype.hasOwnProperty.call(Ni,Si)&&Object.defineProperty(i,Si,{value:Ni[Si],writable:!0,configurable:!0});t.ByteLengthQueuingStrategy=In,t.CountQueuingStrategy=fn,t.ReadableByteStreamController=rr,t.ReadableStream=ln,t.ReadableStreamBYOBReader=gr,t.ReadableStreamBYOBRequest=Qt,t.ReadableStreamDefaultController=er,t.ReadableStreamDefaultReader=Mn,t.TransformStream=bn,t.TransformStreamDefaultController=Ur,t.WritableStream=Xt,t.WritableStreamDefaultController=li,t.WritableStreamDefaultWriter=Hr,Object.defineProperty(t,"__esModule",{value:!0})})}(kb,mc)),mc}var Jp;function Wb(){if(Jp)return Qa;Jp=1,Object.defineProperty(Qa,"__esModule",{value:!0});var o=ri,e=ri,t=ri,n=ri,r=Gb(),i=Hb();function s(Ge){return Ge.startsWith("file://")&&(Ge=t.fileURLToPath(Ge)),Ge}function a(Ge,c,Xe=""){return Ge({locateFile(et){return et.endsWith(".wasm")?s(c):et.endsWith(".worker.js")?s(Xe):et}})}const u=()=>(async Ge=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(Ge)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));var f=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(G,X){Xe=G,et=X});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt="./this.program",It=function(G,X){throw X},Rt=!1,Xt="";function hn(G){return c.locateFile?c.locateFile(G,Xt):Xt+G}var nn,An,pn,Ut;Xt=__dirname+"/",nn=function(X,te){return pn||(pn=ri),Ut||(Ut=ri),X=Ut.normalize(X),pn.readFileSync(X,te?null:"utf8")},An=function(X){var te=nn(X,!0);return te.buffer||(te=new Uint8Array(te)),xr(te.buffer),te},process.argv.length>1&&(qt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),It=function(G){process.exit(G)},c.inspect=function(){return"[Emscripten Module object]"};var Gt=c.print||console.log.bind(console),on=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&(qt=c.thisProgram),c.quit&&(It=c.quit);var lr;c.wasmBinary&&(lr=c.wasmBinary);var Pr=c.noExitRuntime||!0;typeof WebAssembly!="object"&&Me("no native wasm support detected");var Tn,qr=!1;function xr(G,X){G||Me("Assertion failed: "+X)}var Hr=new TextDecoder("utf8");function oi(G,X,te){for(var le=X+te,we=X;G[we]&&!(we>=le);)++we;return Hr.decode(G.subarray?G.subarray(X,we):new Uint8Array(G.slice(X,we)))}function ti(G,X){if(!G)return"";for(var te=G+X,le=G;!(le>=te)&&gt[le];)++le;return Hr.decode(gt.subarray(G,le))}function Mi(G,X,te,le){if(!(le>0))return 0;for(var we=te,$e=te+le-1,dt=0;dt<G.length;++dt){var tt=G.charCodeAt(dt);if(tt>=55296&&tt<=57343){var mt=G.charCodeAt(++dt);tt=65536+((tt&1023)<<10)|mt&1023}if(tt<=127){if(te>=$e)break;X[te++]=tt}else if(tt<=2047){if(te+1>=$e)break;X[te++]=192|tt>>6,X[te++]=128|tt&63}else if(tt<=65535){if(te+2>=$e)break;X[te++]=224|tt>>12,X[te++]=128|tt>>6&63,X[te++]=128|tt&63}else{if(te+3>=$e)break;X[te++]=240|tt>>18,X[te++]=128|tt>>12&63,X[te++]=128|tt>>6&63,X[te++]=128|tt&63}}return X[te]=0,te-we}function Ti(G,X,te){return Mi(G,gt,X,te)}function Di(G){for(var X=0,te=0;te<G.length;++te){var le=G.charCodeAt(te);le>=55296&&le<=57343&&(le=65536+((le&1023)<<10)|G.charCodeAt(++te)&1023),le<=127?++X:le<=2047?X+=2:le<=65535?X+=3:X+=4}return X}var Ri=new TextDecoder("utf-16le");function Ii(G,X){for(var te=G,le=te>>1,we=le+X/2;!(le>=we)&&vt[le];)++le;return te=le<<1,Ri.decode(gt.subarray(G,te))}function li(G,X,te){if(te===void 0&&(te=2147483647),te<2)return 0;te-=2;for(var le=X,we=te<G.length*2?te/2:G.length,$e=0;$e<we;++$e){var dt=G.charCodeAt($e);$n[X>>1]=dt,X+=2}return $n[X>>1]=0,X-le}function fi(G){return G.length*2}function di(G,X){for(var te=0,le="";!(te>=X/4);){var we=Pt[G+te*4>>2];if(we==0)break;if(++te,we>=65536){var $e=we-65536;le+=String.fromCharCode(55296|$e>>10,56320|$e&1023)}else le+=String.fromCharCode(we)}return le}function mn(G,X,te){if(te===void 0&&(te=2147483647),te<4)return 0;for(var le=X,we=le+te-4,$e=0;$e<G.length;++$e){var dt=G.charCodeAt($e);if(dt>=55296&&dt<=57343){var tt=G.charCodeAt(++$e);dt=65536+((dt&1023)<<10)|tt&1023}if(Pt[X>>2]=dt,X+=4,X+4>we)break}return Pt[X>>2]=0,X-le}function Ln(G){for(var X=0,te=0;te<G.length;++te){var le=G.charCodeAt(te);le>=55296&&le<=57343&&++te,X+=4}return X}function At(G,X,te){for(var le=0;le<G.length;++le)Ke[X++>>0]=G.charCodeAt(le);te||(Ke[X>>0]=0)}function cn(G,X){return G%X>0&&(G+=X-G%X),G}var Wt,Ke,gt,$n,vt,Pt,an,Wr,Vr;function On(G){Wt=G,c.HEAP8=Ke=new Int8Array(G),c.HEAP16=$n=new Int16Array(G),c.HEAP32=Pt=new Int32Array(G),c.HEAPU8=gt=new Uint8Array(G),c.HEAPU16=vt=new Uint16Array(G),c.HEAPU32=an=new Uint32Array(G),c.HEAPF32=Wr=new Float32Array(G),c.HEAPF64=Vr=new Float64Array(G)}c.INITIAL_MEMORY;var Fr,si=[],hi=[],wi=[];function Lr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)fr(c.preRun.shift());ur(si)}function Yr(){ur(hi)}function Rn(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)er(c.postRun.shift());ur(wi)}function fr(G){si.unshift(G)}function $r(G){hi.unshift(G)}function er(G){wi.unshift(G)}var st=0,$=null;function oe(G){st++,c.monitorRunDependencies&&c.monitorRunDependencies(st)}function pe(G){if(st--,c.monitorRunDependencies&&c.monitorRunDependencies(st),st==0&&$){var X=$;$=null,X()}}c.preloadedImages={},c.preloadedAudios={};function Me(G){c.onAbort&&c.onAbort(G),G+="",on(G),qr=!0,G="abort("+G+"). Build with -s ASSERTIONS=1 for more info.";var X=new WebAssembly.RuntimeError(G);throw et(X),X}var Ze="data:application/octet-stream;base64,";function ft(G){return G.startsWith(Ze)}if(c.locateFile){var Sn="mozjpeg_node_enc.wasm";ft(Sn)||(Sn=hn(Sn))}else var Sn=new URL("mozjpeg_node_enc.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function dr(G){try{if(G==Sn&&lr)return new Uint8Array(lr);if(An)return An(G);throw"both async and sync fetching of the wasm failed"}catch(X){Me(X)}}function Wn(){return!lr&&Rt&&typeof fetch=="function"?fetch(Sn,{credentials:"same-origin"}).then(function(G){if(!G.ok)throw"failed to load wasm binary file at '"+Sn+"'";return G.arrayBuffer()}).catch(function(){return dr(Sn)}):Promise.resolve().then(function(){return dr(Sn)})}function ni(){var G={a:O};function X(dt,tt){var mt=dt.exports;c.asm=mt,Tn=c.asm.C,On(Tn.buffer),Fr=c.asm.I,$r(c.asm.D),pe()}oe();function te(dt){X(dt.instance)}function le(dt){return Wn().then(function(tt){var mt=WebAssembly.instantiate(tt,G);return mt}).then(dt,function(tt){on("failed to asynchronously prepare wasm: "+tt),Me(tt)})}function we(){return!lr&&typeof WebAssembly.instantiateStreaming=="function"&&!ft(Sn)&&typeof fetch=="function"?fetch(Sn,{credentials:"same-origin"}).then(function(dt){var tt=WebAssembly.instantiateStreaming(dt,G);return tt.then(te,function(mt){return on("wasm streaming compile failed: "+mt),on("falling back to ArrayBuffer instantiation"),le(te)})}):le(te)}if(c.instantiateWasm)try{var $e=c.instantiateWasm(G,X);return $e}catch(dt){return on("Module.instantiateWasm callback failed with error: "+dt),!1}return we().catch(et),{}}function ur(G){for(;G.length>0;){var X=G.shift();if(typeof X=="function"){X(c);continue}var te=X.func;typeof te=="number"?X.arg===void 0?Fr.get(te)():Fr.get(te)(X.arg):te(X.arg===void 0?null:X.arg)}}var Br=0;function Ir(){return Pr||Br>0}function Er(G,X){}function hr(G,X){return void 0}var cr={};function Vt(G){for(;G.length;){var X=G.pop(),te=G.pop();te(X)}}function ln(G){return this.fromWireType(an[G>>2])}var Nn={},gn={},Ft={},Jn=48,Ar=57;function xn(G){if(G===void 0)return"_unknown";G=G.replace(/[^a-zA-Z0-9_]/g,"$");var X=G.charCodeAt(0);return X>=Jn&&X<=Ar?"_"+G:G}function qn(G,X){return G=xn(G),new Function("body","return function "+G+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(X)}function nr(G,X){var te=qn(X,function(le){this.name=X,this.message=le;var we=new Error(le).stack;we!==void 0&&(this.stack=this.toString()+`
`+we.replace(/^Error(:[^\n]*)?\n/,""))});return te.prototype=Object.create(G.prototype),te.prototype.constructor=te,te.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},te}var Mt=void 0;function Vn(G){throw new Mt(G)}function yn(G,X,te){G.forEach(function(tt){Ft[tt]=X});function le(tt){var mt=te(tt);mt.length!==G.length&&Vn("Mismatched type converter count");for(var Kt=0;Kt<G.length;++Kt)or(G[Kt],mt[Kt])}var we=new Array(X.length),$e=[],dt=0;X.forEach(function(tt,mt){gn.hasOwnProperty(tt)?we[mt]=gn[tt]:($e.push(tt),Nn.hasOwnProperty(tt)||(Nn[tt]=[]),Nn[tt].push(function(){we[mt]=gn[tt],++dt,dt===$e.length&&le(we)}))}),$e.length===0&&le(we)}function In(G){var X=cr[G];delete cr[G];var te=X.rawConstructor,le=X.rawDestructor,we=X.fields,$e=we.map(function(dt){return dt.getterReturnType}).concat(we.map(function(dt){return dt.setterArgumentType}));yn([G],$e,function(dt){var tt={};return we.forEach(function(mt,Kt){var ie=mt.fieldName,F=dt[Kt],W=mt.getter,w=mt.getterContext,M=dt[Kt+we.length],Y=mt.setter,ae=mt.setterContext;tt[ie]={read:function(me){return F.fromWireType(W(w,me))},write:function(me,ge){var Be=[];Y(ae,me,M.toWireType(Be,ge)),Vt(Be)}}}),[{name:X.name,fromWireType:function(mt){var Kt={};for(var ie in tt)Kt[ie]=tt[ie].read(mt);return le(mt),Kt},toWireType:function(mt,Kt){for(var ie in tt)if(!(ie in Kt))throw new TypeError('Missing field:  "'+ie+'"');var F=te();for(ie in tt)tt[ie].write(F,Kt[ie]);return mt!==null&&mt.push(le,F),F},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:le}]})}function Un(G,X,te,le,we){}function ir(G){switch(G){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+G)}}function Mr(){for(var G=new Array(256),X=0;X<256;++X)G[X]=String.fromCharCode(X);fn=G}var fn=void 0;function Xn(G){for(var X="",te=G;gt[te];)X+=fn[gt[te++]];return X}var Gn=void 0;function Lt(G){throw new Gn(G)}function or(G,X,te){if(te=te||{},!("argPackAdvance"in X))throw new TypeError("registerType registeredInstance requires argPackAdvance");var le=X.name;if(G||Lt('type "'+le+'" must have a positive integer typeid pointer'),gn.hasOwnProperty(G)){if(te.ignoreDuplicateRegistrations)return;Lt("Cannot register type '"+le+"' twice")}if(gn[G]=X,delete Ft[G],Nn.hasOwnProperty(G)){var we=Nn[G];delete Nn[G],we.forEach(function($e){$e()})}}function Or(G,X,te,le,we){var $e=ir(te);X=Xn(X),or(G,{name:X,fromWireType:function(dt){return!!dt},toWireType:function(dt,tt){return tt?le:we},argPackAdvance:8,readValueFromPointer:function(dt){var tt;if(te===1)tt=Ke;else if(te===2)tt=$n;else if(te===4)tt=Pt;else throw new TypeError("Unknown boolean type size: "+X);return this.fromWireType(tt[dt>>$e])},destructorFunction:null})}var bn=[],Tr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function jn(G){G>4&&--Tr[G].refcount===0&&(Tr[G]=void 0,bn.push(G))}function Nr(){for(var G=0,X=5;X<Tr.length;++X)Tr[X]!==void 0&&++G;return G}function pi(){for(var G=5;G<Tr.length;++G)if(Tr[G]!==void 0)return Tr[G];return null}function Ur(){c.count_emval_handles=Nr,c.get_first_emval=pi}function Dr(G){switch(G){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var X=bn.length?bn.pop():Tr.length;return Tr[X]={refcount:1,value:G},X}}}function ai(G,X){X=Xn(X),or(G,{name:X,fromWireType:function(te){var le=Tr[te].value;return jn(te),le},toWireType:function(te,le){return Dr(le)},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:null})}function Oi(G){if(G===null)return"null";var X=typeof G;return X==="object"||X==="array"||X==="function"?G.toString():""+G}function ui(G,X){switch(X){case 2:return function(te){return this.fromWireType(Wr[te>>2])};case 3:return function(te){return this.fromWireType(Vr[te>>3])};default:throw new TypeError("Unknown float type: "+G)}}function Pi(G,X,te){var le=ir(te);X=Xn(X),or(G,{name:X,fromWireType:function(we){return we},toWireType:function(we,$e){if(typeof $e!="number"&&typeof $e!="boolean")throw new TypeError('Cannot convert "'+Oi($e)+'" to '+this.name);return $e},argPackAdvance:8,readValueFromPointer:ui(X,le),destructorFunction:null})}function Ci(G,X){if(!(G instanceof Function))throw new TypeError("new_ called with constructor type "+typeof G+" which is not a function");var te=qn(G.name||"unknownFunctionName",function(){});te.prototype=G.prototype;var le=new te,we=G.apply(le,X);return we instanceof Object?we:le}function Ni(G,X,te,le,we){var $e=X.length;$e<2&&Lt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var dt=X[1]!==null&&te!==null,tt=!1,mt=1;mt<X.length;++mt)if(X[mt]!==null&&X[mt].destructorFunction===void 0){tt=!0;break}for(var Kt=X[0].name!=="void",ie="",F="",mt=0;mt<$e-2;++mt)ie+=(mt!==0?", ":"")+"arg"+mt,F+=(mt!==0?", ":"")+"arg"+mt+"Wired";var W="return function "+xn(G)+"("+ie+`) {
if (arguments.length !== `+($e-2)+`) {
throwBindingError('function `+G+" called with ' + arguments.length + ' arguments, expected "+($e-2)+` args!');
}
`;tt&&(W+=`var destructors = [];
`);var w=tt?"destructors":"null",M=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Y=[Lt,le,we,Vt,X[0],X[1]];dt&&(W+="var thisWired = classParam.toWireType("+w+`, this);
`);for(var mt=0;mt<$e-2;++mt)W+="var arg"+mt+"Wired = argType"+mt+".toWireType("+w+", arg"+mt+"); // "+X[mt+2].name+`
`,M.push("argType"+mt),Y.push(X[mt+2]);if(dt&&(F="thisWired"+(F.length>0?", ":"")+F),W+=(Kt?"var rv = ":"")+"invoker(fn"+(F.length>0?", ":"")+F+`);
`,tt)W+=`runDestructors(destructors);
`;else for(var mt=dt?1:2;mt<X.length;++mt){var ae=mt===1?"thisWired":"arg"+(mt-2)+"Wired";X[mt].destructorFunction!==null&&(W+=ae+"_dtor("+ae+"); // "+X[mt].name+`
`,M.push(ae+"_dtor"),Y.push(X[mt].destructorFunction))}Kt&&(W+=`var ret = retType.fromWireType(rv);
return ret;
`),W+=`}
`,M.push(W);var me=Ci(Function,M).apply(null,Y);return me}function Si(G,X,te){if(G[X].overloadTable===void 0){var le=G[X];G[X]=function(){return G[X].overloadTable.hasOwnProperty(arguments.length)||Lt("Function '"+te+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+G[X].overloadTable+")!"),G[X].overloadTable[arguments.length].apply(this,arguments)},G[X].overloadTable=[],G[X].overloadTable[le.argCount]=le}}function b(G,X,te){c.hasOwnProperty(G)?((te===void 0||c[G].overloadTable!==void 0&&c[G].overloadTable[te]!==void 0)&&Lt("Cannot register public name '"+G+"' twice"),Si(c,G,G),c.hasOwnProperty(te)&&Lt("Cannot register multiple overloads of a function with the same number of arguments ("+te+")!"),c[G].overloadTable[te]=X):(c[G]=X,te!==void 0&&(c[G].numArguments=te))}function H(G,X){for(var te=[],le=0;le<G;le++)te.push(Pt[(X>>2)+le]);return te}function se(G,X,te){c.hasOwnProperty(G)||Vn("Replacing nonexistant public symbol"),c[G].overloadTable!==void 0&&te!==void 0?c[G].overloadTable[te]=X:(c[G]=X,c[G].argCount=te)}function be(G,X,te){var le=c["dynCall_"+G];return te&&te.length?le.apply(null,[X].concat(te)):le.call(null,X)}function De(G,X,te){return G.includes("j")?be(G,X,te):Fr.get(X).apply(null,te)}function U(G,X){var te=[];return function(){te.length=arguments.length;for(var le=0;le<arguments.length;le++)te[le]=arguments[le];return De(G,X,te)}}function q(G,X){G=Xn(G);function te(){return G.includes("j")?U(G,X):Fr.get(X)}var le=te();return typeof le!="function"&&Lt("unknown function pointer with signature "+G+": "+X),le}var ue=void 0;function Re(G){var X=V(G),te=Xn(X);return ce(X),te}function pt(G,X){var te=[],le={};function we($e){if(!le[$e]&&!gn[$e]){if(Ft[$e]){Ft[$e].forEach(we);return}te.push($e),le[$e]=!0}}throw X.forEach(we),new ue(G+": "+te.map(Re).join([", "]))}function yt(G,X,te,le,we,$e){var dt=H(X,te);G=Xn(G),we=q(le,we),b(G,function(){pt("Cannot call "+G+" due to unbound types",dt)},X-1),yn([],dt,function(tt){var mt=[tt[0],null].concat(tt.slice(1));return se(G,Ni(G,mt,null,we,$e),X-1),[]})}function jt(G,X,te){switch(X){case 0:return te?function(we){return Ke[we]}:function(we){return gt[we]};case 1:return te?function(we){return $n[we>>1]}:function(we){return vt[we>>1]};case 2:return te?function(we){return Pt[we>>2]}:function(we){return an[we>>2]};default:throw new TypeError("Unknown integer type: "+G)}}function wt(G,X,te,le,we){X=Xn(X),we===-1&&(we=4294967295);var $e=ir(te),dt=function(Kt){return Kt};if(le===0){var tt=32-8*te;dt=function(Kt){return Kt<<tt>>>tt}}var mt=X.includes("unsigned");or(G,{name:X,fromWireType:dt,toWireType:function(Kt,ie){if(typeof ie!="number"&&typeof ie!="boolean")throw new TypeError('Cannot convert "'+Oi(ie)+'" to '+this.name);if(ie<le||ie>we)throw new TypeError('Passing a number "'+Oi(ie)+'" from JS side to C/C++ side to an argument of type "'+X+'", which is outside the valid range ['+le+", "+we+"]!");return mt?ie>>>0:ie|0},argPackAdvance:8,readValueFromPointer:jt(X,$e,le!==0),destructorFunction:null})}function Ht(G,X,te){var le=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],we=le[X];function $e(dt){dt=dt>>2;var tt=an,mt=tt[dt],Kt=tt[dt+1];return new we(Wt,Kt,mt)}te=Xn(te),or(G,{name:te,fromWireType:$e,argPackAdvance:8,readValueFromPointer:$e},{ignoreDuplicateRegistrations:!0})}function Pn(G,X){X=Xn(X);var te=X==="std::string";or(G,{name:X,fromWireType:function(le){var we=an[le>>2],$e;if(te)for(var dt=le+4,tt=0;tt<=we;++tt){var mt=le+4+tt;if(tt==we||gt[mt]==0){var Kt=mt-dt,ie=ti(dt,Kt);$e===void 0?$e=ie:($e+=String.fromCharCode(0),$e+=ie),dt=mt+1}}else{for(var F=new Array(we),tt=0;tt<we;++tt)F[tt]=String.fromCharCode(gt[le+4+tt]);$e=F.join("")}return ce(le),$e},toWireType:function(le,we){we instanceof ArrayBuffer&&(we=new Uint8Array(we));var $e,dt=typeof we=="string";dt||we instanceof Uint8Array||we instanceof Uint8ClampedArray||we instanceof Int8Array||Lt("Cannot pass non-string to std::string"),te&&dt?$e=function(){return Di(we)}:$e=function(){return we.length};var tt=$e(),mt=Z(4+tt+1);if(an[mt>>2]=tt,te&&dt)Ti(we,mt+4,tt+1);else if(dt)for(var Kt=0;Kt<tt;++Kt){var ie=we.charCodeAt(Kt);ie>255&&(ce(mt),Lt("String has UTF-16 code units that do not fit in 8 bits")),gt[mt+4+Kt]=ie}else for(var Kt=0;Kt<tt;++Kt)gt[mt+4+Kt]=we[Kt];return le!==null&&le.push(ce,mt),mt},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:function(le){ce(le)}})}function pr(G,X,te){te=Xn(te);var le,we,$e,dt,tt;X===2?(le=Ii,we=li,dt=fi,$e=function(){return vt},tt=1):X===4&&(le=di,we=mn,dt=Ln,$e=function(){return an},tt=2),or(G,{name:te,fromWireType:function(mt){for(var Kt=an[mt>>2],ie=$e(),F,W=mt+4,w=0;w<=Kt;++w){var M=mt+4+w*X;if(w==Kt||ie[M>>tt]==0){var Y=M-W,ae=le(W,Y);F===void 0?F=ae:(F+=String.fromCharCode(0),F+=ae),W=M+X}}return ce(mt),F},toWireType:function(mt,Kt){typeof Kt!="string"&&Lt("Cannot pass non-string to C++ string type "+te);var ie=dt(Kt),F=Z(4+ie+X);return an[F>>2]=ie>>tt,we(Kt,F+4,ie+X),mt!==null&&mt.push(ce,F),F},argPackAdvance:8,readValueFromPointer:ln,destructorFunction:function(mt){ce(mt)}})}function Gr(G,X,te,le,we,$e){cr[G]={name:Xn(X),rawConstructor:q(te,le),rawDestructor:q(we,$e),fields:[]}}function Zn(G,X,te,le,we,$e,dt,tt,mt,Kt){cr[G].fields.push({fieldName:Xn(X),getterReturnType:te,getter:q(le,we),getterContext:$e,setterArgumentType:dt,setter:q(tt,mt),setterContext:Kt})}function tr(G,X){X=Xn(X),or(G,{isVoid:!0,name:X,argPackAdvance:0,fromWireType:function(){},toWireType:function(te,le){}})}var zn={};function jr(G){var X=zn[G];return X===void 0?Xn(G):X}function br(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Hn(G){return G===0?Dr(br()):(G=jr(G),Dr(br()[G]))}function rn(G){G>4&&(Tr[G].refcount+=1)}function sn(G,X){var te=gn[G];return te===void 0&&Lt(X+" has unknown type "+Re(G)),te}function Kn(G){for(var X="",te=0;te<G;++te)X+=(te!==0?", ":"")+"arg"+te;for(var le="return function emval_allocator_"+G+`(constructor, argTypes, args) {
`,te=0;te<G;++te)le+="var argType"+te+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+te+'], "parameter '+te+`");
var arg`+te+" = argType"+te+`.readValueFromPointer(args);
args += argType`+te+`['argPackAdvance'];
`;return le+="var obj = new constructor("+X+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",le)(sn,c,Dr)}var mr={};function he(G){return G||Lt("Cannot use deleted val. handle = "+G),Tr[G].value}function ve(G,X,te,le){G=he(G);var we=mr[X];return we||(we=Kn(X),mr[X]=we),we(G,te,le)}function xe(){Me()}function Ve(G,X,te){gt.copyWithin(G,X,X+te)}function at(G){try{return Tn.grow(G-Wt.byteLength+65535>>>16),On(Tn.buffer),1}catch{}}function Tt(G){var X=gt.length;G=G>>>0;var te=2147483648;if(G>te)return!1;for(var le=1;le<=4;le*=2){var we=X*(1+.2/le);we=Math.min(we,G+100663296);var $e=Math.min(te,cn(Math.max(G,we),65536)),dt=at($e);if(dt)return!0}return!1}var Ot={};function D(){return qt||"./this.program"}function y(){if(!y.strings){var G=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:G,_:D()};for(var te in Ot)X[te]=Ot[te];var le=[];for(var te in X)le.push(te+"="+X[te]);y.strings=le}return y.strings}var m={mappings:{},buffers:[null,[],[]],printChar:function(G,X){var te=m.buffers[G];X===0||X===10?((G===1?Gt:on)(oi(te,0)),te.length=0):te.push(X)},varargs:void 0,get:function(){m.varargs+=4;var G=Pt[m.varargs-4>>2];return G},getStr:function(G){var X=ti(G);return X},get64:function(G,X){return G}};function C(G,X){var te=0;return y().forEach(function(le,we){var $e=X+te;Pt[G+we*4>>2]=$e,At(le,$e),te+=le.length+1}),0}function h(G,X){var te=y();Pt[G>>2]=te.length;var le=0;return te.forEach(function(we){le+=we.length+1}),Pt[X>>2]=le,0}function g(G){re(G)}function B(G){return 0}function N(G,X,te,le,we){}function z(G,X,te,le){for(var we=0,$e=0;$e<te;$e++){for(var dt=Pt[X+$e*8>>2],tt=Pt[X+($e*8+4)>>2],mt=0;mt<tt;mt++)m.printChar(G,gt[dt+mt]);we+=tt}return Pt[le>>2]=we,0}function x(G){}Mt=c.InternalError=nr(Error,"InternalError"),Mr(),Gn=c.BindingError=nr(Error,"BindingError"),Ur(),ue=c.UnboundTypeError=nr(Error,"UnboundTypeError");var O={B:hr,l:In,p:Un,y:Or,x:ai,i:Pi,f:yt,c:wt,b:Ht,j:Pn,e:pr,m:Gr,a:Zn,z:tr,g:jn,u:Hn,k:rn,n:ve,h:xe,r:Ve,d:Tt,s:C,t:h,A:g,w:B,o:N,v:z,q:x};ni(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.D).apply(null,arguments)};var Z=c._malloc=function(){return(Z=c._malloc=c.asm.E).apply(null,arguments)},ce=c._free=function(){return(ce=c._free=c.asm.F).apply(null,arguments)},V=c.___getTypeName=function(){return(V=c.___getTypeName=c.asm.G).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.H).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.J).apply(null,arguments)};var S;function L(G){this.name="ExitStatus",this.message="Program terminated with exit("+G+")",this.status=G}$=function G(){S||J(),S||($=G)};function J(G){if(st>0||(Lr(),st>0))return;function X(){S||(S=!0,c.calledRun=!0,!qr&&(Yr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Rn()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),X()},1)):X()}c.run=J;function re(G,X){X&&Ir()&&G===0||(Ir()||(c.onExit&&c.onExit(G),qr=!0),It(G,new L(G)))}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return J(),c.ready}}(),l=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/mozjpeg_node_enc-7b3a94eb.wasm").href:new URL("mozjpeg_node_enc-7b3a94eb.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,p=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(S,L){Xe=S,et=L});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt="./this.program",It=function(S,L){throw L},Rt=!1,Xt="";function hn(S){return c.locateFile?c.locateFile(S,Xt):Xt+S}var nn,An,pn,Ut;Xt=__dirname+"/",nn=function(L,J){return pn||(pn=ri),Ut||(Ut=ri),L=Ut.normalize(L),pn.readFileSync(L,J?null:"utf8")},An=function(L){var J=nn(L,!0);return J.buffer||(J=new Uint8Array(J)),xr(J.buffer),J},process.argv.length>1&&(qt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),It=function(S){process.exit(S)},c.inspect=function(){return"[Emscripten Module object]"};var Gt=c.print||console.log.bind(console),on=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&(qt=c.thisProgram),c.quit&&(It=c.quit);var lr;c.wasmBinary&&(lr=c.wasmBinary);var Pr=c.noExitRuntime||!0;typeof WebAssembly!="object"&&Me("no native wasm support detected");var Tn,qr=!1;function xr(S,L){S||Me("Assertion failed: "+L)}var Hr=new TextDecoder("utf8");function oi(S,L,J){for(var re=L+J,G=L;S[G]&&!(G>=re);)++G;return Hr.decode(S.subarray?S.subarray(L,G):new Uint8Array(S.slice(L,G)))}function ti(S,L){if(!S)return"";for(var J=S+L,re=S;!(re>=J)&&gt[re];)++re;return Hr.decode(gt.subarray(S,re))}function Mi(S,L,J,re){if(!(re>0))return 0;for(var G=J,X=J+re-1,te=0;te<S.length;++te){var le=S.charCodeAt(te);if(le>=55296&&le<=57343){var we=S.charCodeAt(++te);le=65536+((le&1023)<<10)|we&1023}if(le<=127){if(J>=X)break;L[J++]=le}else if(le<=2047){if(J+1>=X)break;L[J++]=192|le>>6,L[J++]=128|le&63}else if(le<=65535){if(J+2>=X)break;L[J++]=224|le>>12,L[J++]=128|le>>6&63,L[J++]=128|le&63}else{if(J+3>=X)break;L[J++]=240|le>>18,L[J++]=128|le>>12&63,L[J++]=128|le>>6&63,L[J++]=128|le&63}}return L[J]=0,J-G}function Ti(S,L,J){return Mi(S,gt,L,J)}function Di(S){for(var L=0,J=0;J<S.length;++J){var re=S.charCodeAt(J);re>=55296&&re<=57343&&(re=65536+((re&1023)<<10)|S.charCodeAt(++J)&1023),re<=127?++L:re<=2047?L+=2:re<=65535?L+=3:L+=4}return L}var Ri=new TextDecoder("utf-16le");function Ii(S,L){for(var J=S,re=J>>1,G=re+L/2;!(re>=G)&&vt[re];)++re;return J=re<<1,Ri.decode(gt.subarray(S,J))}function li(S,L,J){if(J===void 0&&(J=2147483647),J<2)return 0;J-=2;for(var re=L,G=J<S.length*2?J/2:S.length,X=0;X<G;++X){var te=S.charCodeAt(X);$n[L>>1]=te,L+=2}return $n[L>>1]=0,L-re}function fi(S){return S.length*2}function di(S,L){for(var J=0,re="";!(J>=L/4);){var G=Pt[S+J*4>>2];if(G==0)break;if(++J,G>=65536){var X=G-65536;re+=String.fromCharCode(55296|X>>10,56320|X&1023)}else re+=String.fromCharCode(G)}return re}function mn(S,L,J){if(J===void 0&&(J=2147483647),J<4)return 0;for(var re=L,G=re+J-4,X=0;X<S.length;++X){var te=S.charCodeAt(X);if(te>=55296&&te<=57343){var le=S.charCodeAt(++X);te=65536+((te&1023)<<10)|le&1023}if(Pt[L>>2]=te,L+=4,L+4>G)break}return Pt[L>>2]=0,L-re}function Ln(S){for(var L=0,J=0;J<S.length;++J){var re=S.charCodeAt(J);re>=55296&&re<=57343&&++J,L+=4}return L}function At(S,L,J){for(var re=0;re<S.length;++re)Ke[L++>>0]=S.charCodeAt(re);J||(Ke[L>>0]=0)}function cn(S,L){return S%L>0&&(S+=L-S%L),S}var Wt,Ke,gt,$n,vt,Pt,an,Wr,Vr;function On(S){Wt=S,c.HEAP8=Ke=new Int8Array(S),c.HEAP16=$n=new Int16Array(S),c.HEAP32=Pt=new Int32Array(S),c.HEAPU8=gt=new Uint8Array(S),c.HEAPU16=vt=new Uint16Array(S),c.HEAPU32=an=new Uint32Array(S),c.HEAPF32=Wr=new Float32Array(S),c.HEAPF64=Vr=new Float64Array(S)}c.INITIAL_MEMORY;var Fr,si=[],hi=[],wi=[];function Lr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)fr(c.preRun.shift());ur(si)}function Yr(){ur(hi)}function Rn(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)er(c.postRun.shift());ur(wi)}function fr(S){si.unshift(S)}function $r(S){hi.unshift(S)}function er(S){wi.unshift(S)}var st=0,$=null;function oe(S){st++,c.monitorRunDependencies&&c.monitorRunDependencies(st)}function pe(S){if(st--,c.monitorRunDependencies&&c.monitorRunDependencies(st),st==0&&$){var L=$;$=null,L()}}c.preloadedImages={},c.preloadedAudios={};function Me(S){c.onAbort&&c.onAbort(S),S+="",on(S),qr=!0,S="abort("+S+"). Build with -s ASSERTIONS=1 for more info.";var L=new WebAssembly.RuntimeError(S);throw et(L),L}var Ze="data:application/octet-stream;base64,";function ft(S){return S.startsWith(Ze)}if(c.locateFile){var Sn="mozjpeg_node_dec.wasm";ft(Sn)||(Sn=hn(Sn))}else var Sn=new URL("mozjpeg_node_dec.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function dr(S){try{if(S==Sn&&lr)return new Uint8Array(lr);if(An)return An(S);throw"both async and sync fetching of the wasm failed"}catch(L){Me(L)}}function Wn(){return!lr&&Rt&&typeof fetch=="function"?fetch(Sn,{credentials:"same-origin"}).then(function(S){if(!S.ok)throw"failed to load wasm binary file at '"+Sn+"'";return S.arrayBuffer()}).catch(function(){return dr(Sn)}):Promise.resolve().then(function(){return dr(Sn)})}function ni(){var S={a:B};function L(te,le){var we=te.exports;c.asm=we,Tn=c.asm.z,On(Tn.buffer),Fr=c.asm.F,$r(c.asm.A),pe()}oe();function J(te){L(te.instance)}function re(te){return Wn().then(function(le){var we=WebAssembly.instantiate(le,S);return we}).then(te,function(le){on("failed to asynchronously prepare wasm: "+le),Me(le)})}function G(){return!lr&&typeof WebAssembly.instantiateStreaming=="function"&&!ft(Sn)&&typeof fetch=="function"?fetch(Sn,{credentials:"same-origin"}).then(function(te){var le=WebAssembly.instantiateStreaming(te,S);return le.then(J,function(we){return on("wasm streaming compile failed: "+we),on("falling back to ArrayBuffer instantiation"),re(J)})}):re(J)}if(c.instantiateWasm)try{var X=c.instantiateWasm(S,L);return X}catch(te){return on("Module.instantiateWasm callback failed with error: "+te),!1}return G().catch(et),{}}function ur(S){for(;S.length>0;){var L=S.shift();if(typeof L=="function"){L(c);continue}var J=L.func;typeof J=="number"?L.arg===void 0?Fr.get(J)():Fr.get(J)(L.arg):J(L.arg===void 0?null:L.arg)}}var Br=0;function Ir(){return Pr||Br>0}function Er(S,L){}function hr(S,L){return void 0}function cr(S,L,J,re,G){}function Vt(S){switch(S){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+S)}}function ln(){for(var S=new Array(256),L=0;L<256;++L)S[L]=String.fromCharCode(L);Nn=S}var Nn=void 0;function gn(S){for(var L="",J=S;gt[J];)L+=Nn[gt[J++]];return L}var Ft={},Jn={},Ar={},xn=48,qn=57;function nr(S){if(S===void 0)return"_unknown";S=S.replace(/[^a-zA-Z0-9_]/g,"$");var L=S.charCodeAt(0);return L>=xn&&L<=qn?"_"+S:S}function Mt(S,L){return S=nr(S),new Function("body","return function "+S+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(L)}function Vn(S,L){var J=Mt(L,function(re){this.name=L,this.message=re;var G=new Error(re).stack;G!==void 0&&(this.stack=this.toString()+`
`+G.replace(/^Error(:[^\n]*)?\n/,""))});return J.prototype=Object.create(S.prototype),J.prototype.constructor=J,J.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},J}var yn=void 0;function In(S){throw new yn(S)}var Un=void 0;function ir(S){throw new Un(S)}function Mr(S,L,J){S.forEach(function(le){Ar[le]=L});function re(le){var we=J(le);we.length!==S.length&&ir("Mismatched type converter count");for(var $e=0;$e<S.length;++$e)fn(S[$e],we[$e])}var G=new Array(L.length),X=[],te=0;L.forEach(function(le,we){Jn.hasOwnProperty(le)?G[we]=Jn[le]:(X.push(le),Ft.hasOwnProperty(le)||(Ft[le]=[]),Ft[le].push(function(){G[we]=Jn[le],++te,te===X.length&&re(G)}))}),X.length===0&&re(G)}function fn(S,L,J){if(J=J||{},!("argPackAdvance"in L))throw new TypeError("registerType registeredInstance requires argPackAdvance");var re=L.name;if(S||In('type "'+re+'" must have a positive integer typeid pointer'),Jn.hasOwnProperty(S)){if(J.ignoreDuplicateRegistrations)return;In("Cannot register type '"+re+"' twice")}if(Jn[S]=L,delete Ar[S],Ft.hasOwnProperty(S)){var G=Ft[S];delete Ft[S],G.forEach(function(X){X()})}}function Xn(S,L,J,re,G){var X=Vt(J);L=gn(L),fn(S,{name:L,fromWireType:function(te){return!!te},toWireType:function(te,le){return le?re:G},argPackAdvance:8,readValueFromPointer:function(te){var le;if(J===1)le=Ke;else if(J===2)le=$n;else if(J===4)le=Pt;else throw new TypeError("Unknown boolean type size: "+L);return this.fromWireType(le[te>>X])},destructorFunction:null})}var Gn=[],Lt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function or(S){S>4&&--Lt[S].refcount===0&&(Lt[S]=void 0,Gn.push(S))}function Or(){for(var S=0,L=5;L<Lt.length;++L)Lt[L]!==void 0&&++S;return S}function bn(){for(var S=5;S<Lt.length;++S)if(Lt[S]!==void 0)return Lt[S];return null}function Tr(){c.count_emval_handles=Or,c.get_first_emval=bn}function jn(S){switch(S){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var L=Gn.length?Gn.pop():Lt.length;return Lt[L]={refcount:1,value:S},L}}}function Nr(S){return this.fromWireType(an[S>>2])}function pi(S,L){L=gn(L),fn(S,{name:L,fromWireType:function(J){var re=Lt[J].value;return or(J),re},toWireType:function(J,re){return jn(re)},argPackAdvance:8,readValueFromPointer:Nr,destructorFunction:null})}function Ur(S){if(S===null)return"null";var L=typeof S;return L==="object"||L==="array"||L==="function"?S.toString():""+S}function Dr(S,L){switch(L){case 2:return function(J){return this.fromWireType(Wr[J>>2])};case 3:return function(J){return this.fromWireType(Vr[J>>3])};default:throw new TypeError("Unknown float type: "+S)}}function ai(S,L,J){var re=Vt(J);L=gn(L),fn(S,{name:L,fromWireType:function(G){return G},toWireType:function(G,X){if(typeof X!="number"&&typeof X!="boolean")throw new TypeError('Cannot convert "'+Ur(X)+'" to '+this.name);return X},argPackAdvance:8,readValueFromPointer:Dr(L,re),destructorFunction:null})}function Oi(S,L){if(!(S instanceof Function))throw new TypeError("new_ called with constructor type "+typeof S+" which is not a function");var J=Mt(S.name||"unknownFunctionName",function(){});J.prototype=S.prototype;var re=new J,G=S.apply(re,L);return G instanceof Object?G:re}function ui(S){for(;S.length;){var L=S.pop(),J=S.pop();J(L)}}function Pi(S,L,J,re,G){var X=L.length;X<2&&In("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var te=L[1]!==null&&J!==null,le=!1,we=1;we<L.length;++we)if(L[we]!==null&&L[we].destructorFunction===void 0){le=!0;break}for(var $e=L[0].name!=="void",dt="",tt="",we=0;we<X-2;++we)dt+=(we!==0?", ":"")+"arg"+we,tt+=(we!==0?", ":"")+"arg"+we+"Wired";var mt="return function "+nr(S)+"("+dt+`) {
if (arguments.length !== `+(X-2)+`) {
throwBindingError('function `+S+" called with ' + arguments.length + ' arguments, expected "+(X-2)+` args!');
}
`;le&&(mt+=`var destructors = [];
`);var Kt=le?"destructors":"null",ie=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],F=[In,re,G,ui,L[0],L[1]];te&&(mt+="var thisWired = classParam.toWireType("+Kt+`, this);
`);for(var we=0;we<X-2;++we)mt+="var arg"+we+"Wired = argType"+we+".toWireType("+Kt+", arg"+we+"); // "+L[we+2].name+`
`,ie.push("argType"+we),F.push(L[we+2]);if(te&&(tt="thisWired"+(tt.length>0?", ":"")+tt),mt+=($e?"var rv = ":"")+"invoker(fn"+(tt.length>0?", ":"")+tt+`);
`,le)mt+=`runDestructors(destructors);
`;else for(var we=te?1:2;we<L.length;++we){var W=we===1?"thisWired":"arg"+(we-2)+"Wired";L[we].destructorFunction!==null&&(mt+=W+"_dtor("+W+"); // "+L[we].name+`
`,ie.push(W+"_dtor"),F.push(L[we].destructorFunction))}$e&&(mt+=`var ret = retType.fromWireType(rv);
return ret;
`),mt+=`}
`,ie.push(mt);var w=Oi(Function,ie).apply(null,F);return w}function Ci(S,L,J){if(S[L].overloadTable===void 0){var re=S[L];S[L]=function(){return S[L].overloadTable.hasOwnProperty(arguments.length)||In("Function '"+J+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+S[L].overloadTable+")!"),S[L].overloadTable[arguments.length].apply(this,arguments)},S[L].overloadTable=[],S[L].overloadTable[re.argCount]=re}}function Ni(S,L,J){c.hasOwnProperty(S)?((J===void 0||c[S].overloadTable!==void 0&&c[S].overloadTable[J]!==void 0)&&In("Cannot register public name '"+S+"' twice"),Ci(c,S,S),c.hasOwnProperty(J)&&In("Cannot register multiple overloads of a function with the same number of arguments ("+J+")!"),c[S].overloadTable[J]=L):(c[S]=L,J!==void 0&&(c[S].numArguments=J))}function Si(S,L){for(var J=[],re=0;re<S;re++)J.push(Pt[(L>>2)+re]);return J}function b(S,L,J){c.hasOwnProperty(S)||ir("Replacing nonexistant public symbol"),c[S].overloadTable!==void 0&&J!==void 0?c[S].overloadTable[J]=L:(c[S]=L,c[S].argCount=J)}function H(S,L,J){var re=c["dynCall_"+S];return J&&J.length?re.apply(null,[L].concat(J)):re.call(null,L)}function se(S,L,J){return S.includes("j")?H(S,L,J):Fr.get(L).apply(null,J)}function be(S,L){var J=[];return function(){J.length=arguments.length;for(var re=0;re<arguments.length;re++)J[re]=arguments[re];return se(S,L,J)}}function De(S,L){S=gn(S);function J(){return S.includes("j")?be(S,L):Fr.get(L)}var re=J();return typeof re!="function"&&In("unknown function pointer with signature "+S+": "+L),re}var U=void 0;function q(S){var L=x(S),J=gn(L);return z(L),J}function ue(S,L){var J=[],re={};function G(X){if(!re[X]&&!Jn[X]){if(Ar[X]){Ar[X].forEach(G);return}J.push(X),re[X]=!0}}throw L.forEach(G),new U(S+": "+J.map(q).join([", "]))}function Re(S,L,J,re,G,X){var te=Si(L,J);S=gn(S),G=De(re,G),Ni(S,function(){ue("Cannot call "+S+" due to unbound types",te)},L-1),Mr([],te,function(le){var we=[le[0],null].concat(le.slice(1));return b(S,Pi(S,we,null,G,X),L-1),[]})}function pt(S,L,J){switch(L){case 0:return J?function(G){return Ke[G]}:function(G){return gt[G]};case 1:return J?function(G){return $n[G>>1]}:function(G){return vt[G>>1]};case 2:return J?function(G){return Pt[G>>2]}:function(G){return an[G>>2]};default:throw new TypeError("Unknown integer type: "+S)}}function yt(S,L,J,re,G){L=gn(L),G===-1&&(G=4294967295);var X=Vt(J),te=function($e){return $e};if(re===0){var le=32-8*J;te=function($e){return $e<<le>>>le}}var we=L.includes("unsigned");fn(S,{name:L,fromWireType:te,toWireType:function($e,dt){if(typeof dt!="number"&&typeof dt!="boolean")throw new TypeError('Cannot convert "'+Ur(dt)+'" to '+this.name);if(dt<re||dt>G)throw new TypeError('Passing a number "'+Ur(dt)+'" from JS side to C/C++ side to an argument of type "'+L+'", which is outside the valid range ['+re+", "+G+"]!");return we?dt>>>0:dt|0},argPackAdvance:8,readValueFromPointer:pt(L,X,re!==0),destructorFunction:null})}function jt(S,L,J){var re=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],G=re[L];function X(te){te=te>>2;var le=an,we=le[te],$e=le[te+1];return new G(Wt,$e,we)}J=gn(J),fn(S,{name:J,fromWireType:X,argPackAdvance:8,readValueFromPointer:X},{ignoreDuplicateRegistrations:!0})}function wt(S,L){L=gn(L);var J=L==="std::string";fn(S,{name:L,fromWireType:function(re){var G=an[re>>2],X;if(J)for(var te=re+4,le=0;le<=G;++le){var we=re+4+le;if(le==G||gt[we]==0){var $e=we-te,dt=ti(te,$e);X===void 0?X=dt:(X+=String.fromCharCode(0),X+=dt),te=we+1}}else{for(var tt=new Array(G),le=0;le<G;++le)tt[le]=String.fromCharCode(gt[re+4+le]);X=tt.join("")}return z(re),X},toWireType:function(re,G){G instanceof ArrayBuffer&&(G=new Uint8Array(G));var X,te=typeof G=="string";te||G instanceof Uint8Array||G instanceof Uint8ClampedArray||G instanceof Int8Array||In("Cannot pass non-string to std::string"),J&&te?X=function(){return Di(G)}:X=function(){return G.length};var le=X(),we=N(4+le+1);if(an[we>>2]=le,J&&te)Ti(G,we+4,le+1);else if(te)for(var $e=0;$e<le;++$e){var dt=G.charCodeAt($e);dt>255&&(z(we),In("String has UTF-16 code units that do not fit in 8 bits")),gt[we+4+$e]=dt}else for(var $e=0;$e<le;++$e)gt[we+4+$e]=G[$e];return re!==null&&re.push(z,we),we},argPackAdvance:8,readValueFromPointer:Nr,destructorFunction:function(re){z(re)}})}function Ht(S,L,J){J=gn(J);var re,G,X,te,le;L===2?(re=Ii,G=li,te=fi,X=function(){return vt},le=1):L===4&&(re=di,G=mn,te=Ln,X=function(){return an},le=2),fn(S,{name:J,fromWireType:function(we){for(var $e=an[we>>2],dt=X(),tt,mt=we+4,Kt=0;Kt<=$e;++Kt){var ie=we+4+Kt*L;if(Kt==$e||dt[ie>>le]==0){var F=ie-mt,W=re(mt,F);tt===void 0?tt=W:(tt+=String.fromCharCode(0),tt+=W),mt=ie+L}}return z(we),tt},toWireType:function(we,$e){typeof $e!="string"&&In("Cannot pass non-string to C++ string type "+J);var dt=te($e),tt=N(4+dt+L);return an[tt>>2]=dt>>le,G($e,tt+4,dt+L),we!==null&&we.push(z,tt),tt},argPackAdvance:8,readValueFromPointer:Nr,destructorFunction:function(we){z(we)}})}function Pn(S,L){L=gn(L),fn(S,{isVoid:!0,name:L,argPackAdvance:0,fromWireType:function(){},toWireType:function(J,re){}})}var pr={};function Gr(S){var L=pr[S];return L===void 0?gn(S):L}function Zn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function tr(S){return S===0?jn(Zn()):(S=Gr(S),jn(Zn()[S]))}function zn(S){S>4&&(Lt[S].refcount+=1)}function jr(S,L){var J=Jn[S];return J===void 0&&In(L+" has unknown type "+q(S)),J}function br(S){for(var L="",J=0;J<S;++J)L+=(J!==0?", ":"")+"arg"+J;for(var re="return function emval_allocator_"+S+`(constructor, argTypes, args) {
`,J=0;J<S;++J)re+="var argType"+J+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+J+'], "parameter '+J+`");
var arg`+J+" = argType"+J+`.readValueFromPointer(args);
args += argType`+J+`['argPackAdvance'];
`;return re+="var obj = new constructor("+L+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",re)(jr,c,jn)}var Hn={};function rn(S){return S||In("Cannot use deleted val. handle = "+S),Lt[S].value}function sn(S,L,J,re){S=rn(S);var G=Hn[L];return G||(G=br(L),Hn[L]=G),G(S,J,re)}function Kn(){Me()}function mr(S,L,J){gt.copyWithin(S,L,L+J)}function he(S){try{return Tn.grow(S-Wt.byteLength+65535>>>16),On(Tn.buffer),1}catch{}}function ve(S){var L=gt.length;S=S>>>0;var J=2147483648;if(S>J)return!1;for(var re=1;re<=4;re*=2){var G=L*(1+.2/re);G=Math.min(G,S+100663296);var X=Math.min(J,cn(Math.max(S,G),65536)),te=he(X);if(te)return!0}return!1}var xe={};function Ve(){return qt||"./this.program"}function at(){if(!at.strings){var S=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",L={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:S,_:Ve()};for(var J in xe)L[J]=xe[J];var re=[];for(var J in L)re.push(J+"="+L[J]);at.strings=re}return at.strings}var Tt={mappings:{},buffers:[null,[],[]],printChar:function(S,L){var J=Tt.buffers[S];L===0||L===10?((S===1?Gt:on)(oi(J,0)),J.length=0):J.push(L)},varargs:void 0,get:function(){Tt.varargs+=4;var S=Pt[Tt.varargs-4>>2];return S},getStr:function(S){var L=ti(S);return L},get64:function(S,L){return S}};function Ot(S,L){var J=0;return at().forEach(function(re,G){var X=L+J;Pt[S+G*4>>2]=X,At(re,X),J+=re.length+1}),0}function D(S,L){var J=at();Pt[S>>2]=J.length;var re=0;return J.forEach(function(G){re+=G.length+1}),Pt[L>>2]=re,0}function y(S){V(S)}function m(S){return 0}function C(S,L,J,re,G){}function h(S,L,J,re){for(var G=0,X=0;X<J;X++){for(var te=Pt[L+X*8>>2],le=Pt[L+(X*8+4)>>2],we=0;we<le;we++)Tt.printChar(S,gt[te+we]);G+=le}return Pt[re>>2]=G,0}function g(S){}ln(),yn=c.BindingError=Vn(Error,"BindingError"),Un=c.InternalError=Vn(Error,"InternalError"),Tr(),U=c.UnboundTypeError=Vn(Error,"UnboundTypeError");var B={e:hr,q:cr,m:Xn,x:pi,l:ai,o:Re,b:yt,a:jt,h:wt,g:Ht,n:Pn,c:or,d:tr,i:zn,j:sn,k:Kn,s:mr,f:ve,t:Ot,u:D,y,w:m,p:C,v:h,r:g};ni(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.A).apply(null,arguments)};var N=c._malloc=function(){return(N=c._malloc=c.asm.B).apply(null,arguments)},z=c._free=function(){return(z=c._free=c.asm.C).apply(null,arguments)},x=c.___getTypeName=function(){return(x=c.___getTypeName=c.asm.D).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.E).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.G).apply(null,arguments)};var O;function Z(S){this.name="ExitStatus",this.message="Program terminated with exit("+S+")",this.status=S}$=function S(){O||ce(),O||($=S)};function ce(S){if(st>0||(Lr(),st>0))return;function L(){O||(O=!0,c.calledRun=!0,!qr&&(Yr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Rn()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),L()},1)):L()}c.run=ce;function V(S,L){L&&Ir()&&S===0||(Ir()||(c.onExit&&c.onExit(S),qr=!0),It(S,new Z(S)))}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return ce(),c.ready}}(),d=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/mozjpeg_node_dec-4fa549e7.wasm").href:new URL("mozjpeg_node_dec-4fa549e7.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,_=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(D,y){Xe=D,et=y});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(D){return c.locateFile?c.locateFile(D,It):It+D}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(y,m){return nn||(nn=ri),An||(An=ri),y=An.normalize(y),nn.readFileSync(y,m?null:"utf8")},hn=function(y){var m=Xt(y,!0);return m.buffer||(m=new Uint8Array(m)),lr(m.buffer),m},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"},c.print||console.log.bind(console);var pn=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Ut;c.wasmBinary&&(Ut=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&$r("no native wasm support detected");var Gt,on=!1;function lr(D,y){D||$r("Assertion failed: "+y)}var Pr=new TextDecoder("utf8");function Tn(D,y){if(!D)return"";for(var m=D+y,C=D;!(C>=m)&&mn[C];)++C;return Pr.decode(mn.subarray(D,C))}function qr(D,y,m,C){if(!(C>0))return 0;for(var h=m,g=m+C-1,B=0;B<D.length;++B){var N=D.charCodeAt(B);if(N>=55296&&N<=57343){var z=D.charCodeAt(++B);N=65536+((N&1023)<<10)|z&1023}if(N<=127){if(m>=g)break;y[m++]=N}else if(N<=2047){if(m+1>=g)break;y[m++]=192|N>>6,y[m++]=128|N&63}else if(N<=65535){if(m+2>=g)break;y[m++]=224|N>>12,y[m++]=128|N>>6&63,y[m++]=128|N&63}else{if(m+3>=g)break;y[m++]=240|N>>18,y[m++]=128|N>>12&63,y[m++]=128|N>>6&63,y[m++]=128|N&63}}return y[m]=0,m-h}function xr(D,y,m){return qr(D,mn,y,m)}function Hr(D){for(var y=0,m=0;m<D.length;++m){var C=D.charCodeAt(m);C>=55296&&C<=57343&&(C=65536+((C&1023)<<10)|D.charCodeAt(++m)&1023),C<=127?++y:C<=2047?y+=2:C<=65535?y+=3:y+=4}return y}var oi=new TextDecoder("utf-16le");function ti(D,y){for(var m=D,C=m>>1,h=C+y/2;!(C>=h)&&At[C];)++C;return m=C<<1,oi.decode(mn.subarray(D,m))}function Mi(D,y,m){if(m===void 0&&(m=2147483647),m<2)return 0;m-=2;for(var C=y,h=m<D.length*2?m/2:D.length,g=0;g<h;++g){var B=D.charCodeAt(g);Ln[y>>1]=B,y+=2}return Ln[y>>1]=0,y-C}function Ti(D){return D.length*2}function Di(D,y){for(var m=0,C="";!(m>=y/4);){var h=cn[D+m*4>>2];if(h==0)break;if(++m,h>=65536){var g=h-65536;C+=String.fromCharCode(55296|g>>10,56320|g&1023)}else C+=String.fromCharCode(h)}return C}function Ri(D,y,m){if(m===void 0&&(m=2147483647),m<4)return 0;for(var C=y,h=C+m-4,g=0;g<D.length;++g){var B=D.charCodeAt(g);if(B>=55296&&B<=57343){var N=D.charCodeAt(++g);B=65536+((B&1023)<<10)|N&1023}if(cn[y>>2]=B,y+=4,y+4>h)break}return cn[y>>2]=0,y-C}function Ii(D){for(var y=0,m=0;m<D.length;++m){var C=D.charCodeAt(m);C>=55296&&C<=57343&&++m,y+=4}return y}function li(D,y){return D%y>0&&(D+=y-D%y),D}var fi,di,mn,Ln,At,cn,Wt,Ke,gt;function $n(D){fi=D,c.HEAP8=di=new Int8Array(D),c.HEAP16=Ln=new Int16Array(D),c.HEAP32=cn=new Int32Array(D),c.HEAPU8=mn=new Uint8Array(D),c.HEAPU16=At=new Uint16Array(D),c.HEAPU32=Wt=new Uint32Array(D),c.HEAPF32=Ke=new Float32Array(D),c.HEAPF64=gt=new Float64Array(D)}c.INITIAL_MEMORY;var vt,Pt=[],an=[],Wr=[];function Vr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)si(c.preRun.shift());Ze(Pt)}function On(){Ze(an)}function Fr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)wi(c.postRun.shift());Ze(Wr)}function si(D){Pt.unshift(D)}function hi(D){an.unshift(D)}function wi(D){Wr.unshift(D)}var Lr=0,Yr=null;function Rn(D){Lr++,c.monitorRunDependencies&&c.monitorRunDependencies(Lr)}function fr(D){if(Lr--,c.monitorRunDependencies&&c.monitorRunDependencies(Lr),Lr==0&&Yr){var y=Yr;Yr=null,y()}}c.preloadedImages={},c.preloadedAudios={};function $r(D){c.onAbort&&c.onAbort(D),D+="",pn(D),on=!0,D="abort("+D+"). Build with -s ASSERTIONS=1 for more info.";var y=new WebAssembly.RuntimeError(D);throw et(y),y}var er="data:application/octet-stream;base64,";function st(D){return D.startsWith(er)}if(c.locateFile){var $="webp_node_enc.wasm";st($)||($=Rt($))}else var $=new URL("webp_node_enc.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function oe(D){try{if(D==$&&Ut)return new Uint8Array(Ut);if(hn)return hn(D);throw"both async and sync fetching of the wasm failed"}catch(y){$r(y)}}function pe(){return!Ut&&qt&&typeof fetch=="function"?fetch($,{credentials:"same-origin"}).then(function(D){if(!D.ok)throw"failed to load wasm binary file at '"+$+"'";return D.arrayBuffer()}).catch(function(){return oe($)}):Promise.resolve().then(function(){return oe($)})}function Me(){var D={a:ve};function y(B,N){var z=B.exports;c.asm=z,Gt=c.asm.x,$n(Gt.buffer),vt=c.asm.D,hi(c.asm.y),fr()}Rn();function m(B){y(B.instance)}function C(B){return pe().then(function(N){var z=WebAssembly.instantiate(N,D);return z}).then(B,function(N){pn("failed to asynchronously prepare wasm: "+N),$r(N)})}function h(){return!Ut&&typeof WebAssembly.instantiateStreaming=="function"&&!st($)&&typeof fetch=="function"?fetch($,{credentials:"same-origin"}).then(function(B){var N=WebAssembly.instantiateStreaming(B,D);return N.then(m,function(z){return pn("wasm streaming compile failed: "+z),pn("falling back to ArrayBuffer instantiation"),C(m)})}):C(m)}if(c.instantiateWasm)try{var g=c.instantiateWasm(D,y);return g}catch(B){return pn("Module.instantiateWasm callback failed with error: "+B),!1}return h().catch(et),{}}function Ze(D){for(;D.length>0;){var y=D.shift();if(typeof y=="function"){y(c);continue}var m=y.func;typeof m=="number"?y.arg===void 0?vt.get(m)():vt.get(m)(y.arg):m(y.arg===void 0?null:y.arg)}}function ft(D,y){}function Sn(D,y){return void 0}var dr={};function Wn(D){for(;D.length;){var y=D.pop(),m=D.pop();m(y)}}function ni(D){return this.fromWireType(Wt[D>>2])}var ur={},Br={},Ir={},Er=48,hr=57;function cr(D){if(D===void 0)return"_unknown";D=D.replace(/[^a-zA-Z0-9_]/g,"$");var y=D.charCodeAt(0);return y>=Er&&y<=hr?"_"+D:D}function Vt(D,y){return D=cr(D),new Function("body","return function "+D+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(y)}function ln(D,y){var m=Vt(y,function(C){this.name=y,this.message=C;var h=new Error(C).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return m.prototype=Object.create(D.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},m}var Nn=void 0;function gn(D){throw new Nn(D)}function Ft(D,y,m){D.forEach(function(N){Ir[N]=y});function C(N){var z=m(N);z.length!==D.length&&gn("Mismatched type converter count");for(var x=0;x<D.length;++x)In(D[x],z[x])}var h=new Array(y.length),g=[],B=0;y.forEach(function(N,z){Br.hasOwnProperty(N)?h[z]=Br[N]:(g.push(N),ur.hasOwnProperty(N)||(ur[N]=[]),ur[N].push(function(){h[z]=Br[N],++B,B===g.length&&C(h)}))}),g.length===0&&C(h)}function Jn(D){var y=dr[D];delete dr[D];var m=y.rawConstructor,C=y.rawDestructor,h=y.fields,g=h.map(function(B){return B.getterReturnType}).concat(h.map(function(B){return B.setterArgumentType}));Ft([D],g,function(B){var N={};return h.forEach(function(z,x){var O=z.fieldName,Z=B[x],ce=z.getter,V=z.getterContext,S=B[x+h.length],L=z.setter,J=z.setterContext;N[O]={read:function(re){return Z.fromWireType(ce(V,re))},write:function(re,G){var X=[];L(J,re,S.toWireType(X,G)),Wn(X)}}}),[{name:y.name,fromWireType:function(z){var x={};for(var O in N)x[O]=N[O].read(z);return C(z),x},toWireType:function(z,x){for(var O in N)if(!(O in x))throw new TypeError('Missing field:  "'+O+'"');var Z=m();for(O in N)N[O].write(Z,x[O]);return z!==null&&z.push(C,Z),Z},argPackAdvance:8,readValueFromPointer:ni,destructorFunction:C}]})}function Ar(D,y,m,C,h){}function xn(D){switch(D){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+D)}}function qn(){for(var D=new Array(256),y=0;y<256;++y)D[y]=String.fromCharCode(y);nr=D}var nr=void 0;function Mt(D){for(var y="",m=D;mn[m];)y+=nr[mn[m++]];return y}var Vn=void 0;function yn(D){throw new Vn(D)}function In(D,y,m){if(m=m||{},!("argPackAdvance"in y))throw new TypeError("registerType registeredInstance requires argPackAdvance");var C=y.name;if(D||yn('type "'+C+'" must have a positive integer typeid pointer'),Br.hasOwnProperty(D)){if(m.ignoreDuplicateRegistrations)return;yn("Cannot register type '"+C+"' twice")}if(Br[D]=y,delete Ir[D],ur.hasOwnProperty(D)){var h=ur[D];delete ur[D],h.forEach(function(g){g()})}}function Un(D,y,m,C,h){var g=xn(m);y=Mt(y),In(D,{name:y,fromWireType:function(B){return!!B},toWireType:function(B,N){return N?C:h},argPackAdvance:8,readValueFromPointer:function(B){var N;if(m===1)N=di;else if(m===2)N=Ln;else if(m===4)N=cn;else throw new TypeError("Unknown boolean type size: "+y);return this.fromWireType(N[B>>g])},destructorFunction:null})}var ir=[],Mr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function fn(D){D>4&&--Mr[D].refcount===0&&(Mr[D]=void 0,ir.push(D))}function Xn(){for(var D=0,y=5;y<Mr.length;++y)Mr[y]!==void 0&&++D;return D}function Gn(){for(var D=5;D<Mr.length;++D)if(Mr[D]!==void 0)return Mr[D];return null}function Lt(){c.count_emval_handles=Xn,c.get_first_emval=Gn}function or(D){switch(D){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var y=ir.length?ir.pop():Mr.length;return Mr[y]={refcount:1,value:D},y}}}function Or(D,y){y=Mt(y),In(D,{name:y,fromWireType:function(m){var C=Mr[m].value;return fn(m),C},toWireType:function(m,C){return or(C)},argPackAdvance:8,readValueFromPointer:ni,destructorFunction:null})}function bn(D,y,m){if(D[y].overloadTable===void 0){var C=D[y];D[y]=function(){return D[y].overloadTable.hasOwnProperty(arguments.length)||yn("Function '"+m+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+D[y].overloadTable+")!"),D[y].overloadTable[arguments.length].apply(this,arguments)},D[y].overloadTable=[],D[y].overloadTable[C.argCount]=C}}function Tr(D,y,m){c.hasOwnProperty(D)?((m===void 0||c[D].overloadTable!==void 0&&c[D].overloadTable[m]!==void 0)&&yn("Cannot register public name '"+D+"' twice"),bn(c,D,D),c.hasOwnProperty(m)&&yn("Cannot register multiple overloads of a function with the same number of arguments ("+m+")!"),c[D].overloadTable[m]=y):(c[D]=y,m!==void 0&&(c[D].numArguments=m))}function jn(D,y,m){switch(y){case 0:return function(C){var h=m?di:mn;return this.fromWireType(h[C])};case 1:return function(C){var h=m?Ln:At;return this.fromWireType(h[C>>1])};case 2:return function(C){var h=m?cn:Wt;return this.fromWireType(h[C>>2])};default:throw new TypeError("Unknown integer type: "+D)}}function Nr(D,y,m,C){var h=xn(m);y=Mt(y);function g(){}g.values={},In(D,{name:y,constructor:g,fromWireType:function(B){return this.constructor.values[B]},toWireType:function(B,N){return N.value},argPackAdvance:8,readValueFromPointer:jn(y,h,C),destructorFunction:null}),Tr(y,g)}function pi(D){var y=at(D),m=Mt(y);return Ve(y),m}function Ur(D,y){var m=Br[D];return m===void 0&&yn(y+" has unknown type "+pi(D)),m}function Dr(D,y,m){var C=Ur(D,"enum");y=Mt(y);var h=C.constructor,g=Object.create(C.constructor.prototype,{value:{value:m},constructor:{value:Vt(C.name+"_"+y,function(){})}});h.values[m]=g,h[y]=g}function ai(D){if(D===null)return"null";var y=typeof D;return y==="object"||y==="array"||y==="function"?D.toString():""+D}function Oi(D,y){switch(y){case 2:return function(m){return this.fromWireType(Ke[m>>2])};case 3:return function(m){return this.fromWireType(gt[m>>3])};default:throw new TypeError("Unknown float type: "+D)}}function ui(D,y,m){var C=xn(m);y=Mt(y),In(D,{name:y,fromWireType:function(h){return h},toWireType:function(h,g){if(typeof g!="number"&&typeof g!="boolean")throw new TypeError('Cannot convert "'+ai(g)+'" to '+this.name);return g},argPackAdvance:8,readValueFromPointer:Oi(y,C),destructorFunction:null})}function Pi(D,y){if(!(D instanceof Function))throw new TypeError("new_ called with constructor type "+typeof D+" which is not a function");var m=Vt(D.name||"unknownFunctionName",function(){});m.prototype=D.prototype;var C=new m,h=D.apply(C,y);return h instanceof Object?h:C}function Ci(D,y,m,C,h){var g=y.length;g<2&&yn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var B=y[1]!==null&&m!==null,N=!1,z=1;z<y.length;++z)if(y[z]!==null&&y[z].destructorFunction===void 0){N=!0;break}for(var x=y[0].name!=="void",O="",Z="",z=0;z<g-2;++z)O+=(z!==0?", ":"")+"arg"+z,Z+=(z!==0?", ":"")+"arg"+z+"Wired";var ce="return function "+cr(D)+"("+O+`) {
if (arguments.length !== `+(g-2)+`) {
throwBindingError('function `+D+" called with ' + arguments.length + ' arguments, expected "+(g-2)+` args!');
}
`;N&&(ce+=`var destructors = [];
`);var V=N?"destructors":"null",S=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],L=[yn,C,h,Wn,y[0],y[1]];B&&(ce+="var thisWired = classParam.toWireType("+V+`, this);
`);for(var z=0;z<g-2;++z)ce+="var arg"+z+"Wired = argType"+z+".toWireType("+V+", arg"+z+"); // "+y[z+2].name+`
`,S.push("argType"+z),L.push(y[z+2]);if(B&&(Z="thisWired"+(Z.length>0?", ":"")+Z),ce+=(x?"var rv = ":"")+"invoker(fn"+(Z.length>0?", ":"")+Z+`);
`,N)ce+=`runDestructors(destructors);
`;else for(var z=B?1:2;z<y.length;++z){var J=z===1?"thisWired":"arg"+(z-2)+"Wired";y[z].destructorFunction!==null&&(ce+=J+"_dtor("+J+"); // "+y[z].name+`
`,S.push(J+"_dtor"),L.push(y[z].destructorFunction))}x&&(ce+=`var ret = retType.fromWireType(rv);
return ret;
`),ce+=`}
`,S.push(ce);var re=Pi(Function,S).apply(null,L);return re}function Ni(D,y){for(var m=[],C=0;C<D;C++)m.push(cn[(y>>2)+C]);return m}function Si(D,y,m){c.hasOwnProperty(D)||gn("Replacing nonexistant public symbol"),c[D].overloadTable!==void 0&&m!==void 0?c[D].overloadTable[m]=y:(c[D]=y,c[D].argCount=m)}function b(D,y,m){var C=c["dynCall_"+D];return m&&m.length?C.apply(null,[y].concat(m)):C.call(null,y)}function H(D,y,m){return D.includes("j")?b(D,y,m):vt.get(y).apply(null,m)}function se(D,y){var m=[];return function(){m.length=arguments.length;for(var C=0;C<arguments.length;C++)m[C]=arguments[C];return H(D,y,m)}}function be(D,y){D=Mt(D);function m(){return D.includes("j")?se(D,y):vt.get(y)}var C=m();return typeof C!="function"&&yn("unknown function pointer with signature "+D+": "+y),C}var De=void 0;function U(D,y){var m=[],C={};function h(g){if(!C[g]&&!Br[g]){if(Ir[g]){Ir[g].forEach(h);return}m.push(g),C[g]=!0}}throw y.forEach(h),new De(D+": "+m.map(pi).join([", "]))}function q(D,y,m,C,h,g){var B=Ni(y,m);D=Mt(D),h=be(C,h),Tr(D,function(){U("Cannot call "+D+" due to unbound types",B)},y-1),Ft([],B,function(N){var z=[N[0],null].concat(N.slice(1));return Si(D,Ci(D,z,null,h,g),y-1),[]})}function ue(D,y,m){switch(y){case 0:return m?function(h){return di[h]}:function(h){return mn[h]};case 1:return m?function(h){return Ln[h>>1]}:function(h){return At[h>>1]};case 2:return m?function(h){return cn[h>>2]}:function(h){return Wt[h>>2]};default:throw new TypeError("Unknown integer type: "+D)}}function Re(D,y,m,C,h){y=Mt(y),h===-1&&(h=4294967295);var g=xn(m),B=function(x){return x};if(C===0){var N=32-8*m;B=function(x){return x<<N>>>N}}var z=y.includes("unsigned");In(D,{name:y,fromWireType:B,toWireType:function(x,O){if(typeof O!="number"&&typeof O!="boolean")throw new TypeError('Cannot convert "'+ai(O)+'" to '+this.name);if(O<C||O>h)throw new TypeError('Passing a number "'+ai(O)+'" from JS side to C/C++ side to an argument of type "'+y+'", which is outside the valid range ['+C+", "+h+"]!");return z?O>>>0:O|0},argPackAdvance:8,readValueFromPointer:ue(y,g,C!==0),destructorFunction:null})}function pt(D,y,m){var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=C[y];function g(B){B=B>>2;var N=Wt,z=N[B],x=N[B+1];return new h(fi,x,z)}m=Mt(m),In(D,{name:m,fromWireType:g,argPackAdvance:8,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})}function yt(D,y){y=Mt(y);var m=y==="std::string";In(D,{name:y,fromWireType:function(C){var h=Wt[C>>2],g;if(m)for(var B=C+4,N=0;N<=h;++N){var z=C+4+N;if(N==h||mn[z]==0){var x=z-B,O=Tn(B,x);g===void 0?g=O:(g+=String.fromCharCode(0),g+=O),B=z+1}}else{for(var Z=new Array(h),N=0;N<h;++N)Z[N]=String.fromCharCode(mn[C+4+N]);g=Z.join("")}return Ve(C),g},toWireType:function(C,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,B=typeof h=="string";B||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||yn("Cannot pass non-string to std::string"),m&&B?g=function(){return Hr(h)}:g=function(){return h.length};var N=g(),z=xe(4+N+1);if(Wt[z>>2]=N,m&&B)xr(h,z+4,N+1);else if(B)for(var x=0;x<N;++x){var O=h.charCodeAt(x);O>255&&(Ve(z),yn("String has UTF-16 code units that do not fit in 8 bits")),mn[z+4+x]=O}else for(var x=0;x<N;++x)mn[z+4+x]=h[x];return C!==null&&C.push(Ve,z),z},argPackAdvance:8,readValueFromPointer:ni,destructorFunction:function(C){Ve(C)}})}function jt(D,y,m){m=Mt(m);var C,h,g,B,N;y===2?(C=ti,h=Mi,B=Ti,g=function(){return At},N=1):y===4&&(C=Di,h=Ri,B=Ii,g=function(){return Wt},N=2),In(D,{name:m,fromWireType:function(z){for(var x=Wt[z>>2],O=g(),Z,ce=z+4,V=0;V<=x;++V){var S=z+4+V*y;if(V==x||O[S>>N]==0){var L=S-ce,J=C(ce,L);Z===void 0?Z=J:(Z+=String.fromCharCode(0),Z+=J),ce=S+y}}return Ve(z),Z},toWireType:function(z,x){typeof x!="string"&&yn("Cannot pass non-string to C++ string type "+m);var O=B(x),Z=xe(4+O+y);return Wt[Z>>2]=O>>N,h(x,Z+4,O+y),z!==null&&z.push(Ve,Z),Z},argPackAdvance:8,readValueFromPointer:ni,destructorFunction:function(z){Ve(z)}})}function wt(D,y,m,C,h,g){dr[D]={name:Mt(y),rawConstructor:be(m,C),rawDestructor:be(h,g),fields:[]}}function Ht(D,y,m,C,h,g,B,N,z,x){dr[D].fields.push({fieldName:Mt(y),getterReturnType:m,getter:be(C,h),getterContext:g,setterArgumentType:B,setter:be(N,z),setterContext:x})}function Pn(D,y){y=Mt(y),In(D,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:function(){},toWireType:function(m,C){}})}var pr={};function Gr(D){var y=pr[D];return y===void 0?Mt(D):y}function Zn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function tr(D){return D===0?or(Zn()):(D=Gr(D),or(Zn()[D]))}function zn(D){D>4&&(Mr[D].refcount+=1)}function jr(D){for(var y="",m=0;m<D;++m)y+=(m!==0?", ":"")+"arg"+m;for(var C="return function emval_allocator_"+D+`(constructor, argTypes, args) {
`,m=0;m<D;++m)C+="var argType"+m+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+m+'], "parameter '+m+`");
var arg`+m+" = argType"+m+`.readValueFromPointer(args);
args += argType`+m+`['argPackAdvance'];
`;return C+="var obj = new constructor("+y+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",C)(Ur,c,or)}var br={};function Hn(D){return D||yn("Cannot use deleted val. handle = "+D),Mr[D].value}function rn(D,y,m,C){D=Hn(D);var h=br[y];return h||(h=jr(y),br[y]=h),h(D,m,C)}function sn(){$r()}function Kn(D,y,m){mn.copyWithin(D,y,y+m)}function mr(D){try{return Gt.grow(D-fi.byteLength+65535>>>16),$n(Gt.buffer),1}catch{}}function he(D){var y=mn.length;D=D>>>0;var m=2147483648;if(D>m)return!1;for(var C=1;C<=4;C*=2){var h=y*(1+.2/C);h=Math.min(h,D+100663296);var g=Math.min(m,li(Math.max(D,h),65536)),B=mr(g);if(B)return!0}return!1}Nn=c.InternalError=ln(Error,"InternalError"),qn(),Vn=c.BindingError=ln(Error,"BindingError"),Lt(),De=c.UnboundTypeError=ln(Error,"UnboundTypeError");var ve={w:Sn,l:Jn,p:Ar,s:Un,r:Or,n:Nr,d:Dr,j:ui,h:q,c:Re,b:pt,k:yt,g:jt,m:wt,a:Ht,t:Pn,f:fn,v:tr,u:zn,o:rn,i:sn,q:Kn,e:he};Me(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.y).apply(null,arguments)};var xe=c._malloc=function(){return(xe=c._malloc=c.asm.z).apply(null,arguments)},Ve=c._free=function(){return(Ve=c._free=c.asm.A).apply(null,arguments)},at=c.___getTypeName=function(){return(at=c.___getTypeName=c.asm.B).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.C).apply(null,arguments)};var Tt;Yr=function D(){Tt||Ot(),Tt||(Yr=D)};function Ot(D){if(Lr>0||(Vr(),Lr>0))return;function y(){Tt||(Tt=!0,c.calledRun=!0,!on&&(On(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Fr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),y()},1)):y()}if(c.run=Ot,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ot(),c.ready}}(),A=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/webp_node_enc-21e7a82d.wasm").href:new URL("webp_node_enc-21e7a82d.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,E=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(he,ve){Xe=he,et=ve});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(he){return c.locateFile?c.locateFile(he,It):It+he}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(ve,xe){return nn||(nn=ri),An||(An=ri),ve=An.normalize(ve),nn.readFileSync(ve,xe?null:"utf8")},hn=function(ve){var xe=Xt(ve,!0);return xe.buffer||(xe=new Uint8Array(xe)),lr(xe.buffer),xe},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"},c.print||console.log.bind(console);var pn=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Ut;c.wasmBinary&&(Ut=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&$r("no native wasm support detected");var Gt,on=!1;function lr(he,ve){he||$r("Assertion failed: "+ve)}var Pr=new TextDecoder("utf8");function Tn(he,ve){if(!he)return"";for(var xe=he+ve,Ve=he;!(Ve>=xe)&&mn[Ve];)++Ve;return Pr.decode(mn.subarray(he,Ve))}function qr(he,ve,xe,Ve){if(!(Ve>0))return 0;for(var at=xe,Tt=xe+Ve-1,Ot=0;Ot<he.length;++Ot){var D=he.charCodeAt(Ot);if(D>=55296&&D<=57343){var y=he.charCodeAt(++Ot);D=65536+((D&1023)<<10)|y&1023}if(D<=127){if(xe>=Tt)break;ve[xe++]=D}else if(D<=2047){if(xe+1>=Tt)break;ve[xe++]=192|D>>6,ve[xe++]=128|D&63}else if(D<=65535){if(xe+2>=Tt)break;ve[xe++]=224|D>>12,ve[xe++]=128|D>>6&63,ve[xe++]=128|D&63}else{if(xe+3>=Tt)break;ve[xe++]=240|D>>18,ve[xe++]=128|D>>12&63,ve[xe++]=128|D>>6&63,ve[xe++]=128|D&63}}return ve[xe]=0,xe-at}function xr(he,ve,xe){return qr(he,mn,ve,xe)}function Hr(he){for(var ve=0,xe=0;xe<he.length;++xe){var Ve=he.charCodeAt(xe);Ve>=55296&&Ve<=57343&&(Ve=65536+((Ve&1023)<<10)|he.charCodeAt(++xe)&1023),Ve<=127?++ve:Ve<=2047?ve+=2:Ve<=65535?ve+=3:ve+=4}return ve}var oi=new TextDecoder("utf-16le");function ti(he,ve){for(var xe=he,Ve=xe>>1,at=Ve+ve/2;!(Ve>=at)&&At[Ve];)++Ve;return xe=Ve<<1,oi.decode(mn.subarray(he,xe))}function Mi(he,ve,xe){if(xe===void 0&&(xe=2147483647),xe<2)return 0;xe-=2;for(var Ve=ve,at=xe<he.length*2?xe/2:he.length,Tt=0;Tt<at;++Tt){var Ot=he.charCodeAt(Tt);Ln[ve>>1]=Ot,ve+=2}return Ln[ve>>1]=0,ve-Ve}function Ti(he){return he.length*2}function Di(he,ve){for(var xe=0,Ve="";!(xe>=ve/4);){var at=cn[he+xe*4>>2];if(at==0)break;if(++xe,at>=65536){var Tt=at-65536;Ve+=String.fromCharCode(55296|Tt>>10,56320|Tt&1023)}else Ve+=String.fromCharCode(at)}return Ve}function Ri(he,ve,xe){if(xe===void 0&&(xe=2147483647),xe<4)return 0;for(var Ve=ve,at=Ve+xe-4,Tt=0;Tt<he.length;++Tt){var Ot=he.charCodeAt(Tt);if(Ot>=55296&&Ot<=57343){var D=he.charCodeAt(++Tt);Ot=65536+((Ot&1023)<<10)|D&1023}if(cn[ve>>2]=Ot,ve+=4,ve+4>at)break}return cn[ve>>2]=0,ve-Ve}function Ii(he){for(var ve=0,xe=0;xe<he.length;++xe){var Ve=he.charCodeAt(xe);Ve>=55296&&Ve<=57343&&++xe,ve+=4}return ve}function li(he,ve){return he%ve>0&&(he+=ve-he%ve),he}var fi,di,mn,Ln,At,cn,Wt,Ke,gt;function $n(he){fi=he,c.HEAP8=di=new Int8Array(he),c.HEAP16=Ln=new Int16Array(he),c.HEAP32=cn=new Int32Array(he),c.HEAPU8=mn=new Uint8Array(he),c.HEAPU16=At=new Uint16Array(he),c.HEAPU32=Wt=new Uint32Array(he),c.HEAPF32=Ke=new Float32Array(he),c.HEAPF64=gt=new Float64Array(he)}c.INITIAL_MEMORY;var vt,Pt=[],an=[],Wr=[];function Vr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)si(c.preRun.shift());Ze(Pt)}function On(){Ze(an)}function Fr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)wi(c.postRun.shift());Ze(Wr)}function si(he){Pt.unshift(he)}function hi(he){an.unshift(he)}function wi(he){Wr.unshift(he)}var Lr=0,Yr=null;function Rn(he){Lr++,c.monitorRunDependencies&&c.monitorRunDependencies(Lr)}function fr(he){if(Lr--,c.monitorRunDependencies&&c.monitorRunDependencies(Lr),Lr==0&&Yr){var ve=Yr;Yr=null,ve()}}c.preloadedImages={},c.preloadedAudios={};function $r(he){c.onAbort&&c.onAbort(he),he+="",pn(he),on=!0,he="abort("+he+"). Build with -s ASSERTIONS=1 for more info.";var ve=new WebAssembly.RuntimeError(he);throw et(ve),ve}var er="data:application/octet-stream;base64,";function st(he){return he.startsWith(er)}if(c.locateFile){var $="webp_node_dec.wasm";st($)||($=Rt($))}else var $=new URL("webp_node_dec.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function oe(he){try{if(he==$&&Ut)return new Uint8Array(Ut);if(hn)return hn(he);throw"both async and sync fetching of the wasm failed"}catch(ve){$r(ve)}}function pe(){return!Ut&&qt&&typeof fetch=="function"?fetch($,{credentials:"same-origin"}).then(function(he){if(!he.ok)throw"failed to load wasm binary file at '"+$+"'";return he.arrayBuffer()}).catch(function(){return oe($)}):Promise.resolve().then(function(){return oe($)})}function Me(){var he={a:br};function ve(Ot,D){var y=Ot.exports;c.asm=y,Gt=c.asm.s,$n(Gt.buffer),vt=c.asm.y,hi(c.asm.t),fr()}Rn();function xe(Ot){ve(Ot.instance)}function Ve(Ot){return pe().then(function(D){var y=WebAssembly.instantiate(D,he);return y}).then(Ot,function(D){pn("failed to asynchronously prepare wasm: "+D),$r(D)})}function at(){return!Ut&&typeof WebAssembly.instantiateStreaming=="function"&&!st($)&&typeof fetch=="function"?fetch($,{credentials:"same-origin"}).then(function(Ot){var D=WebAssembly.instantiateStreaming(Ot,he);return D.then(xe,function(y){return pn("wasm streaming compile failed: "+y),pn("falling back to ArrayBuffer instantiation"),Ve(xe)})}):Ve(xe)}if(c.instantiateWasm)try{var Tt=c.instantiateWasm(he,ve);return Tt}catch(Ot){return pn("Module.instantiateWasm callback failed with error: "+Ot),!1}return at().catch(et),{}}function Ze(he){for(;he.length>0;){var ve=he.shift();if(typeof ve=="function"){ve(c);continue}var xe=ve.func;typeof xe=="number"?ve.arg===void 0?vt.get(xe)():vt.get(xe)(ve.arg):xe(ve.arg===void 0?null:ve.arg)}}function ft(he,ve){}function Sn(he,ve){return void 0}function dr(he,ve,xe,Ve,at){}function Wn(he){switch(he){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+he)}}function ni(){for(var he=new Array(256),ve=0;ve<256;++ve)he[ve]=String.fromCharCode(ve);ur=he}var ur=void 0;function Br(he){for(var ve="",xe=he;mn[xe];)ve+=ur[mn[xe++]];return ve}var Ir={},Er={},hr={},cr=48,Vt=57;function ln(he){if(he===void 0)return"_unknown";he=he.replace(/[^a-zA-Z0-9_]/g,"$");var ve=he.charCodeAt(0);return ve>=cr&&ve<=Vt?"_"+he:he}function Nn(he,ve){return he=ln(he),new Function("body","return function "+he+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(ve)}function gn(he,ve){var xe=Nn(ve,function(Ve){this.name=ve,this.message=Ve;var at=new Error(Ve).stack;at!==void 0&&(this.stack=this.toString()+`
`+at.replace(/^Error(:[^\n]*)?\n/,""))});return xe.prototype=Object.create(he.prototype),xe.prototype.constructor=xe,xe.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},xe}var Ft=void 0;function Jn(he){throw new Ft(he)}var Ar=void 0;function xn(he){throw new Ar(he)}function qn(he,ve,xe){he.forEach(function(D){hr[D]=ve});function Ve(D){var y=xe(D);y.length!==he.length&&xn("Mismatched type converter count");for(var m=0;m<he.length;++m)nr(he[m],y[m])}var at=new Array(ve.length),Tt=[],Ot=0;ve.forEach(function(D,y){Er.hasOwnProperty(D)?at[y]=Er[D]:(Tt.push(D),Ir.hasOwnProperty(D)||(Ir[D]=[]),Ir[D].push(function(){at[y]=Er[D],++Ot,Ot===Tt.length&&Ve(at)}))}),Tt.length===0&&Ve(at)}function nr(he,ve,xe){if(xe=xe||{},!("argPackAdvance"in ve))throw new TypeError("registerType registeredInstance requires argPackAdvance");var Ve=ve.name;if(he||Jn('type "'+Ve+'" must have a positive integer typeid pointer'),Er.hasOwnProperty(he)){if(xe.ignoreDuplicateRegistrations)return;Jn("Cannot register type '"+Ve+"' twice")}if(Er[he]=ve,delete hr[he],Ir.hasOwnProperty(he)){var at=Ir[he];delete Ir[he],at.forEach(function(Tt){Tt()})}}function Mt(he,ve,xe,Ve,at){var Tt=Wn(xe);ve=Br(ve),nr(he,{name:ve,fromWireType:function(Ot){return!!Ot},toWireType:function(Ot,D){return D?Ve:at},argPackAdvance:8,readValueFromPointer:function(Ot){var D;if(xe===1)D=di;else if(xe===2)D=Ln;else if(xe===4)D=cn;else throw new TypeError("Unknown boolean type size: "+ve);return this.fromWireType(D[Ot>>Tt])},destructorFunction:null})}var Vn=[],yn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function In(he){he>4&&--yn[he].refcount===0&&(yn[he]=void 0,Vn.push(he))}function Un(){for(var he=0,ve=5;ve<yn.length;++ve)yn[ve]!==void 0&&++he;return he}function ir(){for(var he=5;he<yn.length;++he)if(yn[he]!==void 0)return yn[he];return null}function Mr(){c.count_emval_handles=Un,c.get_first_emval=ir}function fn(he){switch(he){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var ve=Vn.length?Vn.pop():yn.length;return yn[ve]={refcount:1,value:he},ve}}}function Xn(he){return this.fromWireType(Wt[he>>2])}function Gn(he,ve){ve=Br(ve),nr(he,{name:ve,fromWireType:function(xe){var Ve=yn[xe].value;return In(xe),Ve},toWireType:function(xe,Ve){return fn(Ve)},argPackAdvance:8,readValueFromPointer:Xn,destructorFunction:null})}function Lt(he){if(he===null)return"null";var ve=typeof he;return ve==="object"||ve==="array"||ve==="function"?he.toString():""+he}function or(he,ve){switch(ve){case 2:return function(xe){return this.fromWireType(Ke[xe>>2])};case 3:return function(xe){return this.fromWireType(gt[xe>>3])};default:throw new TypeError("Unknown float type: "+he)}}function Or(he,ve,xe){var Ve=Wn(xe);ve=Br(ve),nr(he,{name:ve,fromWireType:function(at){return at},toWireType:function(at,Tt){if(typeof Tt!="number"&&typeof Tt!="boolean")throw new TypeError('Cannot convert "'+Lt(Tt)+'" to '+this.name);return Tt},argPackAdvance:8,readValueFromPointer:or(ve,Ve),destructorFunction:null})}function bn(he,ve){if(!(he instanceof Function))throw new TypeError("new_ called with constructor type "+typeof he+" which is not a function");var xe=Nn(he.name||"unknownFunctionName",function(){});xe.prototype=he.prototype;var Ve=new xe,at=he.apply(Ve,ve);return at instanceof Object?at:Ve}function Tr(he){for(;he.length;){var ve=he.pop(),xe=he.pop();xe(ve)}}function jn(he,ve,xe,Ve,at){var Tt=ve.length;Tt<2&&Jn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Ot=ve[1]!==null&&xe!==null,D=!1,y=1;y<ve.length;++y)if(ve[y]!==null&&ve[y].destructorFunction===void 0){D=!0;break}for(var m=ve[0].name!=="void",C="",h="",y=0;y<Tt-2;++y)C+=(y!==0?", ":"")+"arg"+y,h+=(y!==0?", ":"")+"arg"+y+"Wired";var g="return function "+ln(he)+"("+C+`) {
if (arguments.length !== `+(Tt-2)+`) {
throwBindingError('function `+he+" called with ' + arguments.length + ' arguments, expected "+(Tt-2)+` args!');
}
`;D&&(g+=`var destructors = [];
`);var B=D?"destructors":"null",N=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],z=[Jn,Ve,at,Tr,ve[0],ve[1]];Ot&&(g+="var thisWired = classParam.toWireType("+B+`, this);
`);for(var y=0;y<Tt-2;++y)g+="var arg"+y+"Wired = argType"+y+".toWireType("+B+", arg"+y+"); // "+ve[y+2].name+`
`,N.push("argType"+y),z.push(ve[y+2]);if(Ot&&(h="thisWired"+(h.length>0?", ":"")+h),g+=(m?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+`);
`,D)g+=`runDestructors(destructors);
`;else for(var y=Ot?1:2;y<ve.length;++y){var x=y===1?"thisWired":"arg"+(y-2)+"Wired";ve[y].destructorFunction!==null&&(g+=x+"_dtor("+x+"); // "+ve[y].name+`
`,N.push(x+"_dtor"),z.push(ve[y].destructorFunction))}m&&(g+=`var ret = retType.fromWireType(rv);
return ret;
`),g+=`}
`,N.push(g);var O=bn(Function,N).apply(null,z);return O}function Nr(he,ve,xe){if(he[ve].overloadTable===void 0){var Ve=he[ve];he[ve]=function(){return he[ve].overloadTable.hasOwnProperty(arguments.length)||Jn("Function '"+xe+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+he[ve].overloadTable+")!"),he[ve].overloadTable[arguments.length].apply(this,arguments)},he[ve].overloadTable=[],he[ve].overloadTable[Ve.argCount]=Ve}}function pi(he,ve,xe){c.hasOwnProperty(he)?((xe===void 0||c[he].overloadTable!==void 0&&c[he].overloadTable[xe]!==void 0)&&Jn("Cannot register public name '"+he+"' twice"),Nr(c,he,he),c.hasOwnProperty(xe)&&Jn("Cannot register multiple overloads of a function with the same number of arguments ("+xe+")!"),c[he].overloadTable[xe]=ve):(c[he]=ve,xe!==void 0&&(c[he].numArguments=xe))}function Ur(he,ve){for(var xe=[],Ve=0;Ve<he;Ve++)xe.push(cn[(ve>>2)+Ve]);return xe}function Dr(he,ve,xe){c.hasOwnProperty(he)||xn("Replacing nonexistant public symbol"),c[he].overloadTable!==void 0&&xe!==void 0?c[he].overloadTable[xe]=ve:(c[he]=ve,c[he].argCount=xe)}function ai(he,ve,xe){var Ve=c["dynCall_"+he];return xe&&xe.length?Ve.apply(null,[ve].concat(xe)):Ve.call(null,ve)}function Oi(he,ve,xe){return he.includes("j")?ai(he,ve,xe):vt.get(ve).apply(null,xe)}function ui(he,ve){var xe=[];return function(){xe.length=arguments.length;for(var Ve=0;Ve<arguments.length;Ve++)xe[Ve]=arguments[Ve];return Oi(he,ve,xe)}}function Pi(he,ve){he=Br(he);function xe(){return he.includes("j")?ui(he,ve):vt.get(ve)}var Ve=xe();return typeof Ve!="function"&&Jn("unknown function pointer with signature "+he+": "+ve),Ve}var Ci=void 0;function Ni(he){var ve=sn(he),xe=Br(ve);return rn(ve),xe}function Si(he,ve){var xe=[],Ve={};function at(Tt){if(!Ve[Tt]&&!Er[Tt]){if(hr[Tt]){hr[Tt].forEach(at);return}xe.push(Tt),Ve[Tt]=!0}}throw ve.forEach(at),new Ci(he+": "+xe.map(Ni).join([", "]))}function b(he,ve,xe,Ve,at,Tt){var Ot=Ur(ve,xe);he=Br(he),at=Pi(Ve,at),pi(he,function(){Si("Cannot call "+he+" due to unbound types",Ot)},ve-1),qn([],Ot,function(D){var y=[D[0],null].concat(D.slice(1));return Dr(he,jn(he,y,null,at,Tt),ve-1),[]})}function H(he,ve,xe){switch(ve){case 0:return xe?function(at){return di[at]}:function(at){return mn[at]};case 1:return xe?function(at){return Ln[at>>1]}:function(at){return At[at>>1]};case 2:return xe?function(at){return cn[at>>2]}:function(at){return Wt[at>>2]};default:throw new TypeError("Unknown integer type: "+he)}}function se(he,ve,xe,Ve,at){ve=Br(ve),at===-1&&(at=4294967295);var Tt=Wn(xe),Ot=function(m){return m};if(Ve===0){var D=32-8*xe;Ot=function(m){return m<<D>>>D}}var y=ve.includes("unsigned");nr(he,{name:ve,fromWireType:Ot,toWireType:function(m,C){if(typeof C!="number"&&typeof C!="boolean")throw new TypeError('Cannot convert "'+Lt(C)+'" to '+this.name);if(C<Ve||C>at)throw new TypeError('Passing a number "'+Lt(C)+'" from JS side to C/C++ side to an argument of type "'+ve+'", which is outside the valid range ['+Ve+", "+at+"]!");return y?C>>>0:C|0},argPackAdvance:8,readValueFromPointer:H(ve,Tt,Ve!==0),destructorFunction:null})}function be(he,ve,xe){var Ve=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],at=Ve[ve];function Tt(Ot){Ot=Ot>>2;var D=Wt,y=D[Ot],m=D[Ot+1];return new at(fi,m,y)}xe=Br(xe),nr(he,{name:xe,fromWireType:Tt,argPackAdvance:8,readValueFromPointer:Tt},{ignoreDuplicateRegistrations:!0})}function De(he,ve){ve=Br(ve);var xe=ve==="std::string";nr(he,{name:ve,fromWireType:function(Ve){var at=Wt[Ve>>2],Tt;if(xe)for(var Ot=Ve+4,D=0;D<=at;++D){var y=Ve+4+D;if(D==at||mn[y]==0){var m=y-Ot,C=Tn(Ot,m);Tt===void 0?Tt=C:(Tt+=String.fromCharCode(0),Tt+=C),Ot=y+1}}else{for(var h=new Array(at),D=0;D<at;++D)h[D]=String.fromCharCode(mn[Ve+4+D]);Tt=h.join("")}return rn(Ve),Tt},toWireType:function(Ve,at){at instanceof ArrayBuffer&&(at=new Uint8Array(at));var Tt,Ot=typeof at=="string";Ot||at instanceof Uint8Array||at instanceof Uint8ClampedArray||at instanceof Int8Array||Jn("Cannot pass non-string to std::string"),xe&&Ot?Tt=function(){return Hr(at)}:Tt=function(){return at.length};var D=Tt(),y=Hn(4+D+1);if(Wt[y>>2]=D,xe&&Ot)xr(at,y+4,D+1);else if(Ot)for(var m=0;m<D;++m){var C=at.charCodeAt(m);C>255&&(rn(y),Jn("String has UTF-16 code units that do not fit in 8 bits")),mn[y+4+m]=C}else for(var m=0;m<D;++m)mn[y+4+m]=at[m];return Ve!==null&&Ve.push(rn,y),y},argPackAdvance:8,readValueFromPointer:Xn,destructorFunction:function(Ve){rn(Ve)}})}function U(he,ve,xe){xe=Br(xe);var Ve,at,Tt,Ot,D;ve===2?(Ve=ti,at=Mi,Ot=Ti,Tt=function(){return At},D=1):ve===4&&(Ve=Di,at=Ri,Ot=Ii,Tt=function(){return Wt},D=2),nr(he,{name:xe,fromWireType:function(y){for(var m=Wt[y>>2],C=Tt(),h,g=y+4,B=0;B<=m;++B){var N=y+4+B*ve;if(B==m||C[N>>D]==0){var z=N-g,x=Ve(g,z);h===void 0?h=x:(h+=String.fromCharCode(0),h+=x),g=N+ve}}return rn(y),h},toWireType:function(y,m){typeof m!="string"&&Jn("Cannot pass non-string to C++ string type "+xe);var C=Ot(m),h=Hn(4+C+ve);return Wt[h>>2]=C>>D,at(m,h+4,C+ve),y!==null&&y.push(rn,h),h},argPackAdvance:8,readValueFromPointer:Xn,destructorFunction:function(y){rn(y)}})}function q(he,ve){ve=Br(ve),nr(he,{isVoid:!0,name:ve,argPackAdvance:0,fromWireType:function(){},toWireType:function(xe,Ve){}})}var ue={};function Re(he){var ve=ue[he];return ve===void 0?Br(he):ve}function pt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function yt(he){return he===0?fn(pt()):(he=Re(he),fn(pt()[he]))}function jt(he){he>4&&(yn[he].refcount+=1)}function wt(he,ve){var xe=Er[he];return xe===void 0&&Jn(ve+" has unknown type "+Ni(he)),xe}function Ht(he){for(var ve="",xe=0;xe<he;++xe)ve+=(xe!==0?", ":"")+"arg"+xe;for(var Ve="return function emval_allocator_"+he+`(constructor, argTypes, args) {
`,xe=0;xe<he;++xe)Ve+="var argType"+xe+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+xe+'], "parameter '+xe+`");
var arg`+xe+" = argType"+xe+`.readValueFromPointer(args);
args += argType`+xe+`['argPackAdvance'];
`;return Ve+="var obj = new constructor("+ve+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",Ve)(wt,c,fn)}var Pn={};function pr(he){return he||Jn("Cannot use deleted val. handle = "+he),yn[he].value}function Gr(he,ve,xe,Ve){he=pr(he);var at=Pn[ve];return at||(at=Ht(ve),Pn[ve]=at),at(he,xe,Ve)}function Zn(){$r()}function tr(he,ve,xe){mn.copyWithin(he,ve,ve+xe)}function zn(he){try{return Gt.grow(he-fi.byteLength+65535>>>16),$n(Gt.buffer),1}catch{}}function jr(he){var ve=mn.length;he=he>>>0;var xe=2147483648;if(he>xe)return!1;for(var Ve=1;Ve<=4;Ve*=2){var at=ve*(1+.2/Ve);at=Math.min(at,he+100663296);var Tt=Math.min(xe,li(Math.max(he,at),65536)),Ot=zn(Tt);if(Ot)return!0}return!1}ni(),Ft=c.BindingError=gn(Error,"BindingError"),Ar=c.InternalError=gn(Error,"InternalError"),Mr(),Ci=c.UnboundTypeError=gn(Error,"UnboundTypeError");var br={e:Sn,p:dr,n:Mt,r:Gn,m:Or,i:b,b:se,a:be,h:De,f:U,o:q,c:In,d:yt,j:jt,k:Gr,l:Zn,q:tr,g:jr};Me(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.t).apply(null,arguments)};var Hn=c._malloc=function(){return(Hn=c._malloc=c.asm.u).apply(null,arguments)},rn=c._free=function(){return(rn=c._free=c.asm.v).apply(null,arguments)},sn=c.___getTypeName=function(){return(sn=c.___getTypeName=c.asm.w).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.x).apply(null,arguments)};var Kn;Yr=function he(){Kn||mr(),Kn||(Yr=he)};function mr(he){if(Lr>0||(Vr(),Lr>0))return;function ve(){Kn||(Kn=!0,c.calledRun=!0,!on&&(On(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Fr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),ve()},1)):ve()}if(c.run=mr,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return mr(),c.ready}}(),v=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/webp_node_dec-dde61ffa.wasm").href:new URL("webp_node_dec-dde61ffa.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,T=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(ie,F){Xe=ie,et=F});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(ie){return c.locateFile?c.locateFile(ie,It):It+ie}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(F,W){return nn||(nn=ri),An||(An=ri),F=An.normalize(F),nn.readFileSync(F,W?null:"utf8")},hn=function(F){var W=Xt(F,!0);return W.buffer||(W=new Uint8Array(W)),xr(W.buffer),W},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt=0,on=function(ie){Gt=ie},lr=function(){return Gt},Pr;c.wasmBinary&&(Pr=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&pe("no native wasm support detected");var Tn,qr=!1;function xr(ie,F){ie||pe("Assertion failed: "+F)}var Hr=new TextDecoder("utf8");function oi(ie,F,W){for(var w=F+W,M=F;ie[M]&&!(M>=w);)++M;return Hr.decode(ie.subarray?ie.subarray(F,M):new Uint8Array(ie.slice(F,M)))}function ti(ie,F){if(!ie)return"";for(var W=ie+F,w=ie;!(w>=W)&&Ke[w];)++w;return Hr.decode(Ke.subarray(ie,w))}function Mi(ie,F,W,w){if(!(w>0))return 0;for(var M=W,Y=W+w-1,ae=0;ae<ie.length;++ae){var me=ie.charCodeAt(ae);if(me>=55296&&me<=57343){var ge=ie.charCodeAt(++ae);me=65536+((me&1023)<<10)|ge&1023}if(me<=127){if(W>=Y)break;F[W++]=me}else if(me<=2047){if(W+1>=Y)break;F[W++]=192|me>>6,F[W++]=128|me&63}else if(me<=65535){if(W+2>=Y)break;F[W++]=224|me>>12,F[W++]=128|me>>6&63,F[W++]=128|me&63}else{if(W+3>=Y)break;F[W++]=240|me>>18,F[W++]=128|me>>12&63,F[W++]=128|me>>6&63,F[W++]=128|me&63}}return F[W]=0,W-M}function Ti(ie,F,W){return Mi(ie,Ke,F,W)}function Di(ie){for(var F=0,W=0;W<ie.length;++W){var w=ie.charCodeAt(W);w>=55296&&w<=57343&&(w=65536+((w&1023)<<10)|ie.charCodeAt(++W)&1023),w<=127?++F:w<=2047?F+=2:w<=65535?F+=3:F+=4}return F}var Ri=new TextDecoder("utf-16le");function Ii(ie,F){for(var W=ie,w=W>>1,M=w+F/2;!(w>=M)&&$n[w];)++w;return W=w<<1,Ri.decode(Ke.subarray(ie,W))}function li(ie,F,W){if(W===void 0&&(W=2147483647),W<2)return 0;W-=2;for(var w=F,M=W<ie.length*2?W/2:ie.length,Y=0;Y<M;++Y){var ae=ie.charCodeAt(Y);gt[F>>1]=ae,F+=2}return gt[F>>1]=0,F-w}function fi(ie){return ie.length*2}function di(ie,F){for(var W=0,w="";!(W>=F/4);){var M=vt[ie+W*4>>2];if(M==0)break;if(++W,M>=65536){var Y=M-65536;w+=String.fromCharCode(55296|Y>>10,56320|Y&1023)}else w+=String.fromCharCode(M)}return w}function mn(ie,F,W){if(W===void 0&&(W=2147483647),W<4)return 0;for(var w=F,M=w+W-4,Y=0;Y<ie.length;++Y){var ae=ie.charCodeAt(Y);if(ae>=55296&&ae<=57343){var me=ie.charCodeAt(++Y);ae=65536+((ae&1023)<<10)|me&1023}if(vt[F>>2]=ae,F+=4,F+4>M)break}return vt[F>>2]=0,F-w}function Ln(ie){for(var F=0,W=0;W<ie.length;++W){var w=ie.charCodeAt(W);w>=55296&&w<=57343&&++W,F+=4}return F}function At(ie,F){return ie%F>0&&(ie+=F-ie%F),ie}var cn,Wt,Ke,gt,$n,vt,Pt,an,Wr;function Vr(ie){cn=ie,c.HEAP8=Wt=new Int8Array(ie),c.HEAP16=gt=new Int16Array(ie),c.HEAP32=vt=new Int32Array(ie),c.HEAPU8=Ke=new Uint8Array(ie),c.HEAPU16=$n=new Uint16Array(ie),c.HEAPU32=Pt=new Uint32Array(ie),c.HEAPF32=an=new Float32Array(ie),c.HEAPF64=Wr=new Float64Array(ie)}c.INITIAL_MEMORY;var On,Fr=[],si=[],hi=[];function wi(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Rn(c.preRun.shift());ni(Fr)}function Lr(){ni(si)}function Yr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());ni(hi)}function Rn(ie){Fr.unshift(ie)}function fr(ie){si.unshift(ie)}function $r(ie){hi.unshift(ie)}var er=0,st=null;function $(ie){er++,c.monitorRunDependencies&&c.monitorRunDependencies(er)}function oe(ie){if(er--,c.monitorRunDependencies&&c.monitorRunDependencies(er),er==0&&st){var F=st;st=null,F()}}c.preloadedImages={},c.preloadedAudios={};function pe(ie){c.onAbort&&c.onAbort(ie),ie+="",Ut(ie),qr=!0,ie="abort("+ie+"). Build with -s ASSERTIONS=1 for more info.";var F=new WebAssembly.RuntimeError(ie);throw et(F),F}var Me="data:application/octet-stream;base64,";function Ze(ie){return ie.startsWith(Me)}if(c.locateFile){var ft="avif_node_enc.wasm";Ze(ft)||(ft=Rt(ft))}else var ft=new URL("avif_node_enc.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Sn(ie){try{if(ie==ft&&Pr)return new Uint8Array(Pr);if(hn)return hn(ie);throw"both async and sync fetching of the wasm failed"}catch(F){pe(F)}}function dr(){return!Pr&&qt&&typeof fetch=="function"?fetch(ft,{credentials:"same-origin"}).then(function(ie){if(!ie.ok)throw"failed to load wasm binary file at '"+ft+"'";return ie.arrayBuffer()}).catch(function(){return Sn(ft)}):Promise.resolve().then(function(){return Sn(ft)})}function Wn(){var ie={a:x};function F(ae,me){var ge=ae.exports;c.asm=ge,Tn=c.asm.P,Vr(Tn.buffer),On=c.asm.Y,fr(c.asm.Q),oe()}$();function W(ae){F(ae.instance)}function w(ae){return dr().then(function(me){var ge=WebAssembly.instantiate(me,ie);return ge}).then(ae,function(me){Ut("failed to asynchronously prepare wasm: "+me),pe(me)})}function M(){return!Pr&&typeof WebAssembly.instantiateStreaming=="function"&&!Ze(ft)&&typeof fetch=="function"?fetch(ft,{credentials:"same-origin"}).then(function(ae){var me=WebAssembly.instantiateStreaming(ae,ie);return me.then(W,function(ge){return Ut("wasm streaming compile failed: "+ge),Ut("falling back to ArrayBuffer instantiation"),w(W)})}):w(W)}if(c.instantiateWasm)try{var Y=c.instantiateWasm(ie,F);return Y}catch(ae){return Ut("Module.instantiateWasm callback failed with error: "+ae),!1}return M().catch(et),{}}function ni(ie){for(;ie.length>0;){var F=ie.shift();if(typeof F=="function"){F(c);continue}var W=F.func;typeof W=="number"?F.arg===void 0?On.get(W)():On.get(W)(F.arg):W(F.arg===void 0?null:F.arg)}}function ur(ie,F){}function Br(ie,F){return void 0}var Ir={mappings:{},buffers:[null,[],[]],printChar:function(ie,F){var W=Ir.buffers[ie];F===0||F===10?((ie===1?pn:Ut)(oi(W,0)),W.length=0):W.push(F)},varargs:void 0,get:function(){Ir.varargs+=4;var ie=vt[Ir.varargs-4>>2];return ie},getStr:function(ie){var F=ti(ie);return F},get64:function(ie,F){return ie}};function Er(ie,F,W){return Ir.varargs=W,0}function hr(ie,F,W){return Ir.varargs=W,0}function cr(ie,F,W){Ir.varargs=W}var Vt={};function ln(ie){for(;ie.length;){var F=ie.pop(),W=ie.pop();W(F)}}function Nn(ie){return this.fromWireType(Pt[ie>>2])}var gn={},Ft={},Jn={},Ar=48,xn=57;function qn(ie){if(ie===void 0)return"_unknown";ie=ie.replace(/[^a-zA-Z0-9_]/g,"$");var F=ie.charCodeAt(0);return F>=Ar&&F<=xn?"_"+ie:ie}function nr(ie,F){return ie=qn(ie),new Function("body","return function "+ie+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(F)}function Mt(ie,F){var W=nr(F,function(w){this.name=F,this.message=w;var M=new Error(w).stack;M!==void 0&&(this.stack=this.toString()+`
`+M.replace(/^Error(:[^\n]*)?\n/,""))});return W.prototype=Object.create(ie.prototype),W.prototype.constructor=W,W.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},W}var Vn=void 0;function yn(ie){throw new Vn(ie)}function In(ie,F,W){ie.forEach(function(me){Jn[me]=F});function w(me){var ge=W(me);ge.length!==ie.length&&yn("Mismatched type converter count");for(var Be=0;Be<ie.length;++Be)Or(ie[Be],ge[Be])}var M=new Array(F.length),Y=[],ae=0;F.forEach(function(me,ge){Ft.hasOwnProperty(me)?M[ge]=Ft[me]:(Y.push(me),gn.hasOwnProperty(me)||(gn[me]=[]),gn[me].push(function(){M[ge]=Ft[me],++ae,ae===Y.length&&w(M)}))}),Y.length===0&&w(M)}function Un(ie){var F=Vt[ie];delete Vt[ie];var W=F.rawConstructor,w=F.rawDestructor,M=F.fields,Y=M.map(function(ae){return ae.getterReturnType}).concat(M.map(function(ae){return ae.setterArgumentType}));In([ie],Y,function(ae){var me={};return M.forEach(function(ge,Be){var Le=ge.fieldName,Ye=ae[Be],bt=ge.getter,kt=ge.getterContext,Yn=ae[Be+M.length],wr=ge.setter,Zr=ge.setterContext;me[Le]={read:function(Fi){return Ye.fromWireType(bt(kt,Fi))},write:function(Fi,eo){var xt=[];wr(Zr,Fi,Yn.toWireType(xt,eo)),ln(xt)}}}),[{name:F.name,fromWireType:function(ge){var Be={};for(var Le in me)Be[Le]=me[Le].read(ge);return w(ge),Be},toWireType:function(ge,Be){for(var Le in me)if(!(Le in Be))throw new TypeError('Missing field:  "'+Le+'"');var Ye=W();for(Le in me)me[Le].write(Ye,Be[Le]);return ge!==null&&ge.push(w,Ye),Ye},argPackAdvance:8,readValueFromPointer:Nn,destructorFunction:w}]})}function ir(ie,F,W,w,M){}function Mr(ie){switch(ie){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+ie)}}function fn(){for(var ie=new Array(256),F=0;F<256;++F)ie[F]=String.fromCharCode(F);Xn=ie}var Xn=void 0;function Gn(ie){for(var F="",W=ie;Ke[W];)F+=Xn[Ke[W++]];return F}var Lt=void 0;function or(ie){throw new Lt(ie)}function Or(ie,F,W){if(W=W||{},!("argPackAdvance"in F))throw new TypeError("registerType registeredInstance requires argPackAdvance");var w=F.name;if(ie||or('type "'+w+'" must have a positive integer typeid pointer'),Ft.hasOwnProperty(ie)){if(W.ignoreDuplicateRegistrations)return;or("Cannot register type '"+w+"' twice")}if(Ft[ie]=F,delete Jn[ie],gn.hasOwnProperty(ie)){var M=gn[ie];delete gn[ie],M.forEach(function(Y){Y()})}}function bn(ie,F,W,w,M){var Y=Mr(W);F=Gn(F),Or(ie,{name:F,fromWireType:function(ae){return!!ae},toWireType:function(ae,me){return me?w:M},argPackAdvance:8,readValueFromPointer:function(ae){var me;if(W===1)me=Wt;else if(W===2)me=gt;else if(W===4)me=vt;else throw new TypeError("Unknown boolean type size: "+F);return this.fromWireType(me[ae>>Y])},destructorFunction:null})}var Tr=[],jn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Nr(ie){ie>4&&--jn[ie].refcount===0&&(jn[ie]=void 0,Tr.push(ie))}function pi(){for(var ie=0,F=5;F<jn.length;++F)jn[F]!==void 0&&++ie;return ie}function Ur(){for(var ie=5;ie<jn.length;++ie)if(jn[ie]!==void 0)return jn[ie];return null}function Dr(){c.count_emval_handles=pi,c.get_first_emval=Ur}function ai(ie){switch(ie){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var F=Tr.length?Tr.pop():jn.length;return jn[F]={refcount:1,value:ie},F}}}function Oi(ie,F){F=Gn(F),Or(ie,{name:F,fromWireType:function(W){var w=jn[W].value;return Nr(W),w},toWireType:function(W,w){return ai(w)},argPackAdvance:8,readValueFromPointer:Nn,destructorFunction:null})}function ui(ie){if(ie===null)return"null";var F=typeof ie;return F==="object"||F==="array"||F==="function"?ie.toString():""+ie}function Pi(ie,F){switch(F){case 2:return function(W){return this.fromWireType(an[W>>2])};case 3:return function(W){return this.fromWireType(Wr[W>>3])};default:throw new TypeError("Unknown float type: "+ie)}}function Ci(ie,F,W){var w=Mr(W);F=Gn(F),Or(ie,{name:F,fromWireType:function(M){return M},toWireType:function(M,Y){if(typeof Y!="number"&&typeof Y!="boolean")throw new TypeError('Cannot convert "'+ui(Y)+'" to '+this.name);return Y},argPackAdvance:8,readValueFromPointer:Pi(F,w),destructorFunction:null})}function Ni(ie,F){if(!(ie instanceof Function))throw new TypeError("new_ called with constructor type "+typeof ie+" which is not a function");var W=nr(ie.name||"unknownFunctionName",function(){});W.prototype=ie.prototype;var w=new W,M=ie.apply(w,F);return M instanceof Object?M:w}function Si(ie,F,W,w,M){var Y=F.length;Y<2&&or("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var ae=F[1]!==null&&W!==null,me=!1,ge=1;ge<F.length;++ge)if(F[ge]!==null&&F[ge].destructorFunction===void 0){me=!0;break}for(var Be=F[0].name!=="void",Le="",Ye="",ge=0;ge<Y-2;++ge)Le+=(ge!==0?", ":"")+"arg"+ge,Ye+=(ge!==0?", ":"")+"arg"+ge+"Wired";var bt="return function "+qn(ie)+"("+Le+`) {
if (arguments.length !== `+(Y-2)+`) {
throwBindingError('function `+ie+" called with ' + arguments.length + ' arguments, expected "+(Y-2)+` args!');
}
`;me&&(bt+=`var destructors = [];
`);var kt=me?"destructors":"null",Yn=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],wr=[or,w,M,ln,F[0],F[1]];ae&&(bt+="var thisWired = classParam.toWireType("+kt+`, this);
`);for(var ge=0;ge<Y-2;++ge)bt+="var arg"+ge+"Wired = argType"+ge+".toWireType("+kt+", arg"+ge+"); // "+F[ge+2].name+`
`,Yn.push("argType"+ge),wr.push(F[ge+2]);if(ae&&(Ye="thisWired"+(Ye.length>0?", ":"")+Ye),bt+=(Be?"var rv = ":"")+"invoker(fn"+(Ye.length>0?", ":"")+Ye+`);
`,me)bt+=`runDestructors(destructors);
`;else for(var ge=ae?1:2;ge<F.length;++ge){var Zr=ge===1?"thisWired":"arg"+(ge-2)+"Wired";F[ge].destructorFunction!==null&&(bt+=Zr+"_dtor("+Zr+"); // "+F[ge].name+`
`,Yn.push(Zr+"_dtor"),wr.push(F[ge].destructorFunction))}Be&&(bt+=`var ret = retType.fromWireType(rv);
return ret;
`),bt+=`}
`,Yn.push(bt);var Fi=Ni(Function,Yn).apply(null,wr);return Fi}function b(ie,F,W){if(ie[F].overloadTable===void 0){var w=ie[F];ie[F]=function(){return ie[F].overloadTable.hasOwnProperty(arguments.length)||or("Function '"+W+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+ie[F].overloadTable+")!"),ie[F].overloadTable[arguments.length].apply(this,arguments)},ie[F].overloadTable=[],ie[F].overloadTable[w.argCount]=w}}function H(ie,F,W){c.hasOwnProperty(ie)?((W===void 0||c[ie].overloadTable!==void 0&&c[ie].overloadTable[W]!==void 0)&&or("Cannot register public name '"+ie+"' twice"),b(c,ie,ie),c.hasOwnProperty(W)&&or("Cannot register multiple overloads of a function with the same number of arguments ("+W+")!"),c[ie].overloadTable[W]=F):(c[ie]=F,W!==void 0&&(c[ie].numArguments=W))}function se(ie,F){for(var W=[],w=0;w<ie;w++)W.push(vt[(F>>2)+w]);return W}function be(ie,F,W){c.hasOwnProperty(ie)||yn("Replacing nonexistant public symbol"),c[ie].overloadTable!==void 0&&W!==void 0?c[ie].overloadTable[W]=F:(c[ie]=F,c[ie].argCount=W)}function De(ie,F,W){var w=c["dynCall_"+ie];return W&&W.length?w.apply(null,[F].concat(W)):w.call(null,F)}function U(ie,F,W){return ie.includes("j")?De(ie,F,W):On.get(F).apply(null,W)}function q(ie,F){var W=[];return function(){W.length=arguments.length;for(var w=0;w<arguments.length;w++)W[w]=arguments[w];return U(ie,F,W)}}function ue(ie,F){ie=Gn(ie);function W(){return ie.includes("j")?q(ie,F):On.get(F)}var w=W();return typeof w!="function"&&or("unknown function pointer with signature "+ie+": "+F),w}var Re=void 0;function pt(ie){var F=ce(ie),W=Gn(F);return Z(F),W}function yt(ie,F){var W=[],w={};function M(Y){if(!w[Y]&&!Ft[Y]){if(Jn[Y]){Jn[Y].forEach(M);return}W.push(Y),w[Y]=!0}}throw F.forEach(M),new Re(ie+": "+W.map(pt).join([", "]))}function jt(ie,F,W,w,M,Y){var ae=se(F,W);ie=Gn(ie),M=ue(w,M),H(ie,function(){yt("Cannot call "+ie+" due to unbound types",ae)},F-1),In([],ae,function(me){var ge=[me[0],null].concat(me.slice(1));return be(ie,Si(ie,ge,null,M,Y),F-1),[]})}function wt(ie,F,W){switch(F){case 0:return W?function(M){return Wt[M]}:function(M){return Ke[M]};case 1:return W?function(M){return gt[M>>1]}:function(M){return $n[M>>1]};case 2:return W?function(M){return vt[M>>2]}:function(M){return Pt[M>>2]};default:throw new TypeError("Unknown integer type: "+ie)}}function Ht(ie,F,W,w,M){F=Gn(F),M===-1&&(M=4294967295);var Y=Mr(W),ae=function(Be){return Be};if(w===0){var me=32-8*W;ae=function(Be){return Be<<me>>>me}}var ge=F.includes("unsigned");Or(ie,{name:F,fromWireType:ae,toWireType:function(Be,Le){if(typeof Le!="number"&&typeof Le!="boolean")throw new TypeError('Cannot convert "'+ui(Le)+'" to '+this.name);if(Le<w||Le>M)throw new TypeError('Passing a number "'+ui(Le)+'" from JS side to C/C++ side to an argument of type "'+F+'", which is outside the valid range ['+w+", "+M+"]!");return ge?Le>>>0:Le|0},argPackAdvance:8,readValueFromPointer:wt(F,Y,w!==0),destructorFunction:null})}function Pn(ie,F,W){var w=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],M=w[F];function Y(ae){ae=ae>>2;var me=Pt,ge=me[ae],Be=me[ae+1];return new M(cn,Be,ge)}W=Gn(W),Or(ie,{name:W,fromWireType:Y,argPackAdvance:8,readValueFromPointer:Y},{ignoreDuplicateRegistrations:!0})}function pr(ie,F){F=Gn(F);var W=F==="std::string";Or(ie,{name:F,fromWireType:function(w){var M=Pt[w>>2],Y;if(W)for(var ae=w+4,me=0;me<=M;++me){var ge=w+4+me;if(me==M||Ke[ge]==0){var Be=ge-ae,Le=ti(ae,Be);Y===void 0?Y=Le:(Y+=String.fromCharCode(0),Y+=Le),ae=ge+1}}else{for(var Ye=new Array(M),me=0;me<M;++me)Ye[me]=String.fromCharCode(Ke[w+4+me]);Y=Ye.join("")}return Z(w),Y},toWireType:function(w,M){M instanceof ArrayBuffer&&(M=new Uint8Array(M));var Y,ae=typeof M=="string";ae||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int8Array||or("Cannot pass non-string to std::string"),W&&ae?Y=function(){return Di(M)}:Y=function(){return M.length};var me=Y(),ge=O(4+me+1);if(Pt[ge>>2]=me,W&&ae)Ti(M,ge+4,me+1);else if(ae)for(var Be=0;Be<me;++Be){var Le=M.charCodeAt(Be);Le>255&&(Z(ge),or("String has UTF-16 code units that do not fit in 8 bits")),Ke[ge+4+Be]=Le}else for(var Be=0;Be<me;++Be)Ke[ge+4+Be]=M[Be];return w!==null&&w.push(Z,ge),ge},argPackAdvance:8,readValueFromPointer:Nn,destructorFunction:function(w){Z(w)}})}function Gr(ie,F,W){W=Gn(W);var w,M,Y,ae,me;F===2?(w=Ii,M=li,ae=fi,Y=function(){return $n},me=1):F===4&&(w=di,M=mn,ae=Ln,Y=function(){return Pt},me=2),Or(ie,{name:W,fromWireType:function(ge){for(var Be=Pt[ge>>2],Le=Y(),Ye,bt=ge+4,kt=0;kt<=Be;++kt){var Yn=ge+4+kt*F;if(kt==Be||Le[Yn>>me]==0){var wr=Yn-bt,Zr=w(bt,wr);Ye===void 0?Ye=Zr:(Ye+=String.fromCharCode(0),Ye+=Zr),bt=Yn+F}}return Z(ge),Ye},toWireType:function(ge,Be){typeof Be!="string"&&or("Cannot pass non-string to C++ string type "+W);var Le=ae(Be),Ye=O(4+Le+F);return Pt[Ye>>2]=Le>>me,M(Be,Ye+4,Le+F),ge!==null&&ge.push(Z,Ye),Ye},argPackAdvance:8,readValueFromPointer:Nn,destructorFunction:function(ge){Z(ge)}})}function Zn(ie,F,W,w,M,Y){Vt[ie]={name:Gn(F),rawConstructor:ue(W,w),rawDestructor:ue(M,Y),fields:[]}}function tr(ie,F,W,w,M,Y,ae,me,ge,Be){Vt[ie].fields.push({fieldName:Gn(F),getterReturnType:W,getter:ue(w,M),getterContext:Y,setterArgumentType:ae,setter:ue(me,ge),setterContext:Be})}function zn(ie,F){F=Gn(F),Or(ie,{isVoid:!0,name:F,argPackAdvance:0,fromWireType:function(){},toWireType:function(W,w){}})}var jr={};function br(ie){var F=jr[ie];return F===void 0?Gn(ie):F}function Hn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function rn(ie){return ie===0?ai(Hn()):(ie=br(ie),ai(Hn()[ie]))}function sn(ie){ie>4&&(jn[ie].refcount+=1)}function Kn(ie,F){var W=Ft[ie];return W===void 0&&or(F+" has unknown type "+pt(ie)),W}function mr(ie){for(var F="",W=0;W<ie;++W)F+=(W!==0?", ":"")+"arg"+W;for(var w="return function emval_allocator_"+ie+`(constructor, argTypes, args) {
`,W=0;W<ie;++W)w+="var argType"+W+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+W+'], "parameter '+W+`");
var arg`+W+" = argType"+W+`.readValueFromPointer(args);
args += argType`+W+`['argPackAdvance'];
`;return w+="var obj = new constructor("+F+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",w)(Kn,c,ai)}var he={};function ve(ie){return ie||or("Cannot use deleted val. handle = "+ie),jn[ie].value}function xe(ie,F,W,w){ie=ve(ie);var M=he[F];return M||(M=mr(F),he[F]=M),M(ie,W,w)}function Ve(){pe()}function at(ie,F){throw L(ie,F||1),"longjmp"}function Tt(ie,F){return at(ie,F)}function Ot(ie,F,W){Ke.copyWithin(ie,F,F+W)}function D(ie){try{return Tn.grow(ie-cn.byteLength+65535>>>16),Vr(Tn.buffer),1}catch{}}function y(ie){var F=Ke.length;ie=ie>>>0;var W=2147483648;if(ie>W)return!1;for(var w=1;w<=4;w*=2){var M=F*(1+.2/w);M=Math.min(M,ie+100663296);var Y=Math.min(W,At(Math.max(ie,M),65536)),ae=D(Y);if(ae)return!0}return!1}function m(ie){return 0}function C(ie,F,W,w){var M=Ir.getStreamFromFD(ie),Y=Ir.doReadv(M,F,W);return vt[w>>2]=Y,0}function h(ie,F,W,w,M){}function g(ie,F,W,w){for(var M=0,Y=0;Y<W;Y++){for(var ae=vt[F+Y*8>>2],me=vt[F+(Y*8+4)>>2],ge=0;ge<me;ge++)Ir.printChar(ie,Ke[ae+ge]);M+=me}return vt[w>>2]=M,0}function B(){return lr()}function N(ie){on(ie)}function z(ie){var F=Date.now()/1e3|0;return ie&&(vt[ie>>2]=F),F}Vn=c.InternalError=Mt(Error,"InternalError"),fn(),Lt=c.BindingError=Mt(Error,"BindingError"),Dr(),Re=c.UnboundTypeError=Mt(Error,"UnboundTypeError");var x={O:Br,r:Er,G:hr,H:cr,x:Un,B:ir,K:bn,J:Oi,t:Ci,w:jt,i:Ht,e:Pn,u:pr,o:Gr,z:Zn,g:tr,L:zn,j:Nr,N:rn,v:sn,D:xe,f:Ve,d:Tt,E:Ot,n:y,s:m,F:C,A:h,I:g,b:B,l:we,p:dt,q:te,C:le,y:tt,m:re,h:X,c:G,k:$e,a:N,M:z};Wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.Q).apply(null,arguments)};var O=c._malloc=function(){return(O=c._malloc=c.asm.R).apply(null,arguments)},Z=c._free=function(){return(Z=c._free=c.asm.S).apply(null,arguments)},ce=c.___getTypeName=function(){return(ce=c.___getTypeName=c.asm.T).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.U).apply(null,arguments)};var V=c.stackSave=function(){return(V=c.stackSave=c.asm.V).apply(null,arguments)},S=c.stackRestore=function(){return(S=c.stackRestore=c.asm.W).apply(null,arguments)},L=c._setThrew=function(){return(L=c._setThrew=c.asm.X).apply(null,arguments)};c.dynCall_jiiiiiiiii=function(){return(c.dynCall_jiiiiiiiii=c.asm.Z).apply(null,arguments)};var J=c.dynCall_ijiii=function(){return(J=c.dynCall_ijiii=c.asm._).apply(null,arguments)};c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.$).apply(null,arguments)},c.dynCall_jiiiiiiii=function(){return(c.dynCall_jiiiiiiii=c.asm.aa).apply(null,arguments)},c.dynCall_jiiiiii=function(){return(c.dynCall_jiiiiii=c.asm.ba).apply(null,arguments)},c.dynCall_jiiiii=function(){return(c.dynCall_jiiiii=c.asm.ca).apply(null,arguments)},c.dynCall_iiijii=function(){return(c.dynCall_iiijii=c.asm.da).apply(null,arguments)};function re(ie,F){var W=V();try{On.get(ie)(F)}catch(w){if(S(W),w!==w+0&&w!=="longjmp")throw w;L(1,0)}}function G(ie,F,W,w,M){var Y=V();try{On.get(ie)(F,W,w,M)}catch(ae){if(S(Y),ae!==ae+0&&ae!=="longjmp")throw ae;L(1,0)}}function X(ie,F,W){var w=V();try{On.get(ie)(F,W)}catch(M){if(S(w),M!==M+0&&M!=="longjmp")throw M;L(1,0)}}function te(ie,F,W,w,M,Y,ae,me,ge,Be){var Le=V();try{return On.get(ie)(F,W,w,M,Y,ae,me,ge,Be)}catch(Ye){if(S(Le),Ye!==Ye+0&&Ye!=="longjmp")throw Ye;L(1,0)}}function le(ie,F,W,w,M,Y,ae,me,ge,Be,Le,Ye){var bt=V();try{return On.get(ie)(F,W,w,M,Y,ae,me,ge,Be,Le,Ye)}catch(kt){if(S(bt),kt!==kt+0&&kt!=="longjmp")throw kt;L(1,0)}}function we(ie,F,W,w,M){var Y=V();try{return On.get(ie)(F,W,w,M)}catch(ae){if(S(Y),ae!==ae+0&&ae!=="longjmp")throw ae;L(1,0)}}function $e(ie,F,W,w,M,Y,ae,me,ge,Be,Le){var Ye=V();try{On.get(ie)(F,W,w,M,Y,ae,me,ge,Be,Le)}catch(bt){if(S(Ye),bt!==bt+0&&bt!=="longjmp")throw bt;L(1,0)}}function dt(ie,F,W,w,M,Y,ae,me,ge){var Be=V();try{return On.get(ie)(F,W,w,M,Y,ae,me,ge)}catch(Le){if(S(Be),Le!==Le+0&&Le!=="longjmp")throw Le;L(1,0)}}function tt(ie,F,W,w,M,Y){var ae=V();try{return J(ie,F,W,w,M,Y)}catch(me){if(S(ae),me!==me+0&&me!=="longjmp")throw me;L(1,0)}}var mt;st=function ie(){mt||Kt(),mt||(st=ie)};function Kt(ie){if(er>0||(wi(),er>0))return;function F(){mt||(mt=!0,c.calledRun=!0,!qr&&(Lr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Yr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),F()},1)):F()}if(c.run=Kt,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Kt(),c.ready}}(),I=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/avif_node_enc-53831d47.wasm").href:new URL("avif_node_enc-53831d47.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,R=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/avif_node_enc_mt.worker-be931951.js").href:new URL("avif_node_enc_mt.worker-be931951.js",document.currentScript&&document.currentScript.src||document.baseURI).href,k=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/avif_node_enc_mt-1018c40e.wasm").href:new URL("avif_node_enc_mt-1018c40e.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,K=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(V,S){Xe=V,et=S});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(V){return c.locateFile?c.locateFile(V,It):It+V}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(S,L){return nn||(nn=ri),An||(An=ri),S=An.normalize(S),nn.readFileSync(S,L?null:"utf8")},hn=function(S){var L=Xt(S,!0);return L.buffer||(L=new Uint8Array(L)),xr(L.buffer),L},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt=0,on=function(V){Gt=V},lr=function(){return Gt},Pr;c.wasmBinary&&(Pr=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&pe("no native wasm support detected");var Tn,qr=!1;function xr(V,S){V||pe("Assertion failed: "+S)}var Hr=new TextDecoder("utf8");function oi(V,S,L){for(var J=S+L,re=S;V[re]&&!(re>=J);)++re;return Hr.decode(V.subarray?V.subarray(S,re):new Uint8Array(V.slice(S,re)))}function ti(V,S){if(!V)return"";for(var L=V+S,J=V;!(J>=L)&&Ke[J];)++J;return Hr.decode(Ke.subarray(V,J))}function Mi(V,S,L,J){if(!(J>0))return 0;for(var re=L,G=L+J-1,X=0;X<V.length;++X){var te=V.charCodeAt(X);if(te>=55296&&te<=57343){var le=V.charCodeAt(++X);te=65536+((te&1023)<<10)|le&1023}if(te<=127){if(L>=G)break;S[L++]=te}else if(te<=2047){if(L+1>=G)break;S[L++]=192|te>>6,S[L++]=128|te&63}else if(te<=65535){if(L+2>=G)break;S[L++]=224|te>>12,S[L++]=128|te>>6&63,S[L++]=128|te&63}else{if(L+3>=G)break;S[L++]=240|te>>18,S[L++]=128|te>>12&63,S[L++]=128|te>>6&63,S[L++]=128|te&63}}return S[L]=0,L-re}function Ti(V,S,L){return Mi(V,Ke,S,L)}function Di(V){for(var S=0,L=0;L<V.length;++L){var J=V.charCodeAt(L);J>=55296&&J<=57343&&(J=65536+((J&1023)<<10)|V.charCodeAt(++L)&1023),J<=127?++S:J<=2047?S+=2:J<=65535?S+=3:S+=4}return S}var Ri=new TextDecoder("utf-16le");function Ii(V,S){for(var L=V,J=L>>1,re=J+S/2;!(J>=re)&&$n[J];)++J;return L=J<<1,Ri.decode(Ke.subarray(V,L))}function li(V,S,L){if(L===void 0&&(L=2147483647),L<2)return 0;L-=2;for(var J=S,re=L<V.length*2?L/2:V.length,G=0;G<re;++G){var X=V.charCodeAt(G);gt[S>>1]=X,S+=2}return gt[S>>1]=0,S-J}function fi(V){return V.length*2}function di(V,S){for(var L=0,J="";!(L>=S/4);){var re=vt[V+L*4>>2];if(re==0)break;if(++L,re>=65536){var G=re-65536;J+=String.fromCharCode(55296|G>>10,56320|G&1023)}else J+=String.fromCharCode(re)}return J}function mn(V,S,L){if(L===void 0&&(L=2147483647),L<4)return 0;for(var J=S,re=J+L-4,G=0;G<V.length;++G){var X=V.charCodeAt(G);if(X>=55296&&X<=57343){var te=V.charCodeAt(++G);X=65536+((X&1023)<<10)|te&1023}if(vt[S>>2]=X,S+=4,S+4>re)break}return vt[S>>2]=0,S-J}function Ln(V){for(var S=0,L=0;L<V.length;++L){var J=V.charCodeAt(L);J>=55296&&J<=57343&&++L,S+=4}return S}function At(V,S){return V%S>0&&(V+=S-V%S),V}var cn,Wt,Ke,gt,$n,vt,Pt,an,Wr;function Vr(V){cn=V,c.HEAP8=Wt=new Int8Array(V),c.HEAP16=gt=new Int16Array(V),c.HEAP32=vt=new Int32Array(V),c.HEAPU8=Ke=new Uint8Array(V),c.HEAPU16=$n=new Uint16Array(V),c.HEAPU32=Pt=new Uint32Array(V),c.HEAPF32=an=new Float32Array(V),c.HEAPF64=Wr=new Float64Array(V)}c.INITIAL_MEMORY;var On,Fr=[],si=[],hi=[];function wi(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Rn(c.preRun.shift());ni(Fr)}function Lr(){ni(si)}function Yr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());ni(hi)}function Rn(V){Fr.unshift(V)}function fr(V){si.unshift(V)}function $r(V){hi.unshift(V)}var er=0,st=null;function $(V){er++,c.monitorRunDependencies&&c.monitorRunDependencies(er)}function oe(V){if(er--,c.monitorRunDependencies&&c.monitorRunDependencies(er),er==0&&st){var S=st;st=null,S()}}c.preloadedImages={},c.preloadedAudios={};function pe(V){c.onAbort&&c.onAbort(V),V+="",Ut(V),qr=!0,V="abort("+V+"). Build with -s ASSERTIONS=1 for more info.";var S=new WebAssembly.RuntimeError(V);throw et(S),S}var Me="data:application/octet-stream;base64,";function Ze(V){return V.startsWith(Me)}if(c.locateFile){var ft="avif_node_dec.wasm";Ze(ft)||(ft=Rt(ft))}else var ft=new URL("avif_node_dec.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Sn(V){try{if(V==ft&&Pr)return new Uint8Array(Pr);if(hn)return hn(V);throw"both async and sync fetching of the wasm failed"}catch(S){pe(S)}}function dr(){return!Pr&&qt&&typeof fetch=="function"?fetch(ft,{credentials:"same-origin"}).then(function(V){if(!V.ok)throw"failed to load wasm binary file at '"+ft+"'";return V.arrayBuffer()}).catch(function(){return Sn(ft)}):Promise.resolve().then(function(){return Sn(ft)})}function Wn(){var V={a:D};function S(X,te){var le=X.exports;c.asm=le,Tn=c.asm.C,Vr(Tn.buffer),On=c.asm.L,fr(c.asm.D),oe()}$();function L(X){S(X.instance)}function J(X){return dr().then(function(te){var le=WebAssembly.instantiate(te,V);return le}).then(X,function(te){Ut("failed to asynchronously prepare wasm: "+te),pe(te)})}function re(){return!Pr&&typeof WebAssembly.instantiateStreaming=="function"&&!Ze(ft)&&typeof fetch=="function"?fetch(ft,{credentials:"same-origin"}).then(function(X){var te=WebAssembly.instantiateStreaming(X,V);return te.then(L,function(le){return Ut("wasm streaming compile failed: "+le),Ut("falling back to ArrayBuffer instantiation"),J(L)})}):J(L)}if(c.instantiateWasm)try{var G=c.instantiateWasm(V,S);return G}catch(X){return Ut("Module.instantiateWasm callback failed with error: "+X),!1}return re().catch(et),{}}function ni(V){for(;V.length>0;){var S=V.shift();if(typeof S=="function"){S(c);continue}var L=S.func;typeof L=="number"?S.arg===void 0?On.get(L)():On.get(L)(S.arg):L(S.arg===void 0?null:S.arg)}}function ur(V,S){}function Br(V,S){return void 0}function Ir(V,S,L,J,re){}function Er(V){switch(V){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+V)}}function hr(){for(var V=new Array(256),S=0;S<256;++S)V[S]=String.fromCharCode(S);cr=V}var cr=void 0;function Vt(V){for(var S="",L=V;Ke[L];)S+=cr[Ke[L++]];return S}var ln={},Nn={},gn={},Ft=48,Jn=57;function Ar(V){if(V===void 0)return"_unknown";V=V.replace(/[^a-zA-Z0-9_]/g,"$");var S=V.charCodeAt(0);return S>=Ft&&S<=Jn?"_"+V:V}function xn(V,S){return V=Ar(V),new Function("body","return function "+V+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(S)}function qn(V,S){var L=xn(S,function(J){this.name=S,this.message=J;var re=new Error(J).stack;re!==void 0&&(this.stack=this.toString()+`
`+re.replace(/^Error(:[^\n]*)?\n/,""))});return L.prototype=Object.create(V.prototype),L.prototype.constructor=L,L.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},L}var nr=void 0;function Mt(V){throw new nr(V)}var Vn=void 0;function yn(V){throw new Vn(V)}function In(V,S,L){V.forEach(function(te){gn[te]=S});function J(te){var le=L(te);le.length!==V.length&&yn("Mismatched type converter count");for(var we=0;we<V.length;++we)Un(V[we],le[we])}var re=new Array(S.length),G=[],X=0;S.forEach(function(te,le){Nn.hasOwnProperty(te)?re[le]=Nn[te]:(G.push(te),ln.hasOwnProperty(te)||(ln[te]=[]),ln[te].push(function(){re[le]=Nn[te],++X,X===G.length&&J(re)}))}),G.length===0&&J(re)}function Un(V,S,L){if(L=L||{},!("argPackAdvance"in S))throw new TypeError("registerType registeredInstance requires argPackAdvance");var J=S.name;if(V||Mt('type "'+J+'" must have a positive integer typeid pointer'),Nn.hasOwnProperty(V)){if(L.ignoreDuplicateRegistrations)return;Mt("Cannot register type '"+J+"' twice")}if(Nn[V]=S,delete gn[V],ln.hasOwnProperty(V)){var re=ln[V];delete ln[V],re.forEach(function(G){G()})}}function ir(V,S,L,J,re){var G=Er(L);S=Vt(S),Un(V,{name:S,fromWireType:function(X){return!!X},toWireType:function(X,te){return te?J:re},argPackAdvance:8,readValueFromPointer:function(X){var te;if(L===1)te=Wt;else if(L===2)te=gt;else if(L===4)te=vt;else throw new TypeError("Unknown boolean type size: "+S);return this.fromWireType(te[X>>G])},destructorFunction:null})}var Mr=[],fn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Xn(V){V>4&&--fn[V].refcount===0&&(fn[V]=void 0,Mr.push(V))}function Gn(){for(var V=0,S=5;S<fn.length;++S)fn[S]!==void 0&&++V;return V}function Lt(){for(var V=5;V<fn.length;++V)if(fn[V]!==void 0)return fn[V];return null}function or(){c.count_emval_handles=Gn,c.get_first_emval=Lt}function Or(V){switch(V){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var S=Mr.length?Mr.pop():fn.length;return fn[S]={refcount:1,value:V},S}}}function bn(V){return this.fromWireType(Pt[V>>2])}function Tr(V,S){S=Vt(S),Un(V,{name:S,fromWireType:function(L){var J=fn[L].value;return Xn(L),J},toWireType:function(L,J){return Or(J)},argPackAdvance:8,readValueFromPointer:bn,destructorFunction:null})}function jn(V){if(V===null)return"null";var S=typeof V;return S==="object"||S==="array"||S==="function"?V.toString():""+V}function Nr(V,S){switch(S){case 2:return function(L){return this.fromWireType(an[L>>2])};case 3:return function(L){return this.fromWireType(Wr[L>>3])};default:throw new TypeError("Unknown float type: "+V)}}function pi(V,S,L){var J=Er(L);S=Vt(S),Un(V,{name:S,fromWireType:function(re){return re},toWireType:function(re,G){if(typeof G!="number"&&typeof G!="boolean")throw new TypeError('Cannot convert "'+jn(G)+'" to '+this.name);return G},argPackAdvance:8,readValueFromPointer:Nr(S,J),destructorFunction:null})}function Ur(V,S){if(!(V instanceof Function))throw new TypeError("new_ called with constructor type "+typeof V+" which is not a function");var L=xn(V.name||"unknownFunctionName",function(){});L.prototype=V.prototype;var J=new L,re=V.apply(J,S);return re instanceof Object?re:J}function Dr(V){for(;V.length;){var S=V.pop(),L=V.pop();L(S)}}function ai(V,S,L,J,re){var G=S.length;G<2&&Mt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var X=S[1]!==null&&L!==null,te=!1,le=1;le<S.length;++le)if(S[le]!==null&&S[le].destructorFunction===void 0){te=!0;break}for(var we=S[0].name!=="void",$e="",dt="",le=0;le<G-2;++le)$e+=(le!==0?", ":"")+"arg"+le,dt+=(le!==0?", ":"")+"arg"+le+"Wired";var tt="return function "+Ar(V)+"("+$e+`) {
if (arguments.length !== `+(G-2)+`) {
throwBindingError('function `+V+" called with ' + arguments.length + ' arguments, expected "+(G-2)+` args!');
}
`;te&&(tt+=`var destructors = [];
`);var mt=te?"destructors":"null",Kt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ie=[Mt,J,re,Dr,S[0],S[1]];X&&(tt+="var thisWired = classParam.toWireType("+mt+`, this);
`);for(var le=0;le<G-2;++le)tt+="var arg"+le+"Wired = argType"+le+".toWireType("+mt+", arg"+le+"); // "+S[le+2].name+`
`,Kt.push("argType"+le),ie.push(S[le+2]);if(X&&(dt="thisWired"+(dt.length>0?", ":"")+dt),tt+=(we?"var rv = ":"")+"invoker(fn"+(dt.length>0?", ":"")+dt+`);
`,te)tt+=`runDestructors(destructors);
`;else for(var le=X?1:2;le<S.length;++le){var F=le===1?"thisWired":"arg"+(le-2)+"Wired";S[le].destructorFunction!==null&&(tt+=F+"_dtor("+F+"); // "+S[le].name+`
`,Kt.push(F+"_dtor"),ie.push(S[le].destructorFunction))}we&&(tt+=`var ret = retType.fromWireType(rv);
return ret;
`),tt+=`}
`,Kt.push(tt);var W=Ur(Function,Kt).apply(null,ie);return W}function Oi(V,S,L){if(V[S].overloadTable===void 0){var J=V[S];V[S]=function(){return V[S].overloadTable.hasOwnProperty(arguments.length)||Mt("Function '"+L+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+V[S].overloadTable+")!"),V[S].overloadTable[arguments.length].apply(this,arguments)},V[S].overloadTable=[],V[S].overloadTable[J.argCount]=J}}function ui(V,S,L){c.hasOwnProperty(V)?((L===void 0||c[V].overloadTable!==void 0&&c[V].overloadTable[L]!==void 0)&&Mt("Cannot register public name '"+V+"' twice"),Oi(c,V,V),c.hasOwnProperty(L)&&Mt("Cannot register multiple overloads of a function with the same number of arguments ("+L+")!"),c[V].overloadTable[L]=S):(c[V]=S,L!==void 0&&(c[V].numArguments=L))}function Pi(V,S){for(var L=[],J=0;J<V;J++)L.push(vt[(S>>2)+J]);return L}function Ci(V,S,L){c.hasOwnProperty(V)||yn("Replacing nonexistant public symbol"),c[V].overloadTable!==void 0&&L!==void 0?c[V].overloadTable[L]=S:(c[V]=S,c[V].argCount=L)}function Ni(V,S,L){var J=c["dynCall_"+V];return L&&L.length?J.apply(null,[S].concat(L)):J.call(null,S)}function Si(V,S,L){return V.includes("j")?Ni(V,S,L):On.get(S).apply(null,L)}function b(V,S){var L=[];return function(){L.length=arguments.length;for(var J=0;J<arguments.length;J++)L[J]=arguments[J];return Si(V,S,L)}}function H(V,S){V=Vt(V);function L(){return V.includes("j")?b(V,S):On.get(S)}var J=L();return typeof J!="function"&&Mt("unknown function pointer with signature "+V+": "+S),J}var se=void 0;function be(V){var S=C(V),L=Vt(S);return m(S),L}function De(V,S){var L=[],J={};function re(G){if(!J[G]&&!Nn[G]){if(gn[G]){gn[G].forEach(re);return}L.push(G),J[G]=!0}}throw S.forEach(re),new se(V+": "+L.map(be).join([", "]))}function U(V,S,L,J,re,G){var X=Pi(S,L);V=Vt(V),re=H(J,re),ui(V,function(){De("Cannot call "+V+" due to unbound types",X)},S-1),In([],X,function(te){var le=[te[0],null].concat(te.slice(1));return Ci(V,ai(V,le,null,re,G),S-1),[]})}function q(V,S,L){switch(S){case 0:return L?function(re){return Wt[re]}:function(re){return Ke[re]};case 1:return L?function(re){return gt[re>>1]}:function(re){return $n[re>>1]};case 2:return L?function(re){return vt[re>>2]}:function(re){return Pt[re>>2]};default:throw new TypeError("Unknown integer type: "+V)}}function ue(V,S,L,J,re){S=Vt(S),re===-1&&(re=4294967295);var G=Er(L),X=function(we){return we};if(J===0){var te=32-8*L;X=function(we){return we<<te>>>te}}var le=S.includes("unsigned");Un(V,{name:S,fromWireType:X,toWireType:function(we,$e){if(typeof $e!="number"&&typeof $e!="boolean")throw new TypeError('Cannot convert "'+jn($e)+'" to '+this.name);if($e<J||$e>re)throw new TypeError('Passing a number "'+jn($e)+'" from JS side to C/C++ side to an argument of type "'+S+'", which is outside the valid range ['+J+", "+re+"]!");return le?$e>>>0:$e|0},argPackAdvance:8,readValueFromPointer:q(S,G,J!==0),destructorFunction:null})}function Re(V,S,L){var J=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],re=J[S];function G(X){X=X>>2;var te=Pt,le=te[X],we=te[X+1];return new re(cn,we,le)}L=Vt(L),Un(V,{name:L,fromWireType:G,argPackAdvance:8,readValueFromPointer:G},{ignoreDuplicateRegistrations:!0})}function pt(V,S){S=Vt(S);var L=S==="std::string";Un(V,{name:S,fromWireType:function(J){var re=Pt[J>>2],G;if(L)for(var X=J+4,te=0;te<=re;++te){var le=J+4+te;if(te==re||Ke[le]==0){var we=le-X,$e=ti(X,we);G===void 0?G=$e:(G+=String.fromCharCode(0),G+=$e),X=le+1}}else{for(var dt=new Array(re),te=0;te<re;++te)dt[te]=String.fromCharCode(Ke[J+4+te]);G=dt.join("")}return m(J),G},toWireType:function(J,re){re instanceof ArrayBuffer&&(re=new Uint8Array(re));var G,X=typeof re=="string";X||re instanceof Uint8Array||re instanceof Uint8ClampedArray||re instanceof Int8Array||Mt("Cannot pass non-string to std::string"),L&&X?G=function(){return Di(re)}:G=function(){return re.length};var te=G(),le=y(4+te+1);if(Pt[le>>2]=te,L&&X)Ti(re,le+4,te+1);else if(X)for(var we=0;we<te;++we){var $e=re.charCodeAt(we);$e>255&&(m(le),Mt("String has UTF-16 code units that do not fit in 8 bits")),Ke[le+4+we]=$e}else for(var we=0;we<te;++we)Ke[le+4+we]=re[we];return J!==null&&J.push(m,le),le},argPackAdvance:8,readValueFromPointer:bn,destructorFunction:function(J){m(J)}})}function yt(V,S,L){L=Vt(L);var J,re,G,X,te;S===2?(J=Ii,re=li,X=fi,G=function(){return $n},te=1):S===4&&(J=di,re=mn,X=Ln,G=function(){return Pt},te=2),Un(V,{name:L,fromWireType:function(le){for(var we=Pt[le>>2],$e=G(),dt,tt=le+4,mt=0;mt<=we;++mt){var Kt=le+4+mt*S;if(mt==we||$e[Kt>>te]==0){var ie=Kt-tt,F=J(tt,ie);dt===void 0?dt=F:(dt+=String.fromCharCode(0),dt+=F),tt=Kt+S}}return m(le),dt},toWireType:function(le,we){typeof we!="string"&&Mt("Cannot pass non-string to C++ string type "+L);var $e=X(we),dt=y(4+$e+S);return Pt[dt>>2]=$e>>te,re(we,dt+4,$e+S),le!==null&&le.push(m,dt),dt},argPackAdvance:8,readValueFromPointer:bn,destructorFunction:function(le){m(le)}})}function jt(V,S){S=Vt(S),Un(V,{isVoid:!0,name:S,argPackAdvance:0,fromWireType:function(){},toWireType:function(L,J){}})}var wt={};function Ht(V){var S=wt[V];return S===void 0?Vt(V):S}function Pn(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function pr(V){return V===0?Or(Pn()):(V=Ht(V),Or(Pn()[V]))}function Gr(V){V>4&&(fn[V].refcount+=1)}function Zn(V,S){var L=Nn[V];return L===void 0&&Mt(S+" has unknown type "+be(V)),L}function tr(V){for(var S="",L=0;L<V;++L)S+=(L!==0?", ":"")+"arg"+L;for(var J="return function emval_allocator_"+V+`(constructor, argTypes, args) {
`,L=0;L<V;++L)J+="var argType"+L+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+L+'], "parameter '+L+`");
var arg`+L+" = argType"+L+`.readValueFromPointer(args);
args += argType`+L+`['argPackAdvance'];
`;return J+="var obj = new constructor("+S+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",J)(Zn,c,Or)}var zn={};function jr(V){return V||Mt("Cannot use deleted val. handle = "+V),fn[V].value}function br(V,S,L,J){V=jr(V);var re=zn[S];return re||(re=tr(S),zn[S]=re),re(V,L,J)}function Hn(){pe()}function rn(V,S){throw B(V,S||1),"longjmp"}function sn(V,S){return rn(V,S)}function Kn(V,S,L){Ke.copyWithin(V,S,S+L)}function mr(V){try{return Tn.grow(V-cn.byteLength+65535>>>16),Vr(Tn.buffer),1}catch{}}function he(V){var S=Ke.length;V=V>>>0;var L=2147483648;if(V>L)return!1;for(var J=1;J<=4;J*=2){var re=S*(1+.2/J);re=Math.min(re,V+100663296);var G=Math.min(L,At(Math.max(V,re),65536)),X=mr(G);if(X)return!0}return!1}var ve={mappings:{},buffers:[null,[],[]],printChar:function(V,S){var L=ve.buffers[V];S===0||S===10?((V===1?pn:Ut)(oi(L,0)),L.length=0):L.push(S)},varargs:void 0,get:function(){ve.varargs+=4;var V=vt[ve.varargs-4>>2];return V},getStr:function(V){var S=ti(V);return S},get64:function(V,S){return V}};function xe(V){return 0}function Ve(V,S,L,J,re){}function at(V,S,L,J){for(var re=0,G=0;G<L;G++){for(var X=vt[S+G*8>>2],te=vt[S+(G*8+4)>>2],le=0;le<te;le++)ve.printChar(V,Ke[X+le]);re+=te}return vt[J>>2]=re,0}function Tt(){return lr()}function Ot(V){on(V)}hr(),nr=c.BindingError=qn(Error,"BindingError"),Vn=c.InternalError=qn(Error,"InternalError"),or(),se=c.UnboundTypeError=qn(Error,"UnboundTypeError");var D={j:Br,v:Ir,r:ir,B:Tr,q:pi,t:U,e:ue,d:Re,m:pt,l:yt,s:jt,h:Xn,i:pr,n:Gr,o:br,a:Hn,g:sn,y:Kn,k:he,A:xe,u:Ve,z:at,b:Tt,f:x,w:O,p:z,x:N,c:Ot};Wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.D).apply(null,arguments)};var y=c._malloc=function(){return(y=c._malloc=c.asm.E).apply(null,arguments)},m=c._free=function(){return(m=c._free=c.asm.F).apply(null,arguments)},C=c.___getTypeName=function(){return(C=c.___getTypeName=c.asm.G).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.H).apply(null,arguments)};var h=c.stackSave=function(){return(h=c.stackSave=c.asm.I).apply(null,arguments)},g=c.stackRestore=function(){return(g=c.stackRestore=c.asm.J).apply(null,arguments)},B=c._setThrew=function(){return(B=c._setThrew=c.asm.K).apply(null,arguments)};c.dynCall_iiijii=function(){return(c.dynCall_iiijii=c.asm.M).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.N).apply(null,arguments)};function N(V,S,L,J,re,G,X,te){var le=h();try{On.get(V)(S,L,J,re,G,X,te)}catch(we){if(g(le),we!==we+0&&we!=="longjmp")throw we;B(1,0)}}function z(V,S,L,J,re){var G=h();try{On.get(V)(S,L,J,re)}catch(X){if(g(G),X!==X+0&&X!=="longjmp")throw X;B(1,0)}}function x(V,S,L){var J=h();try{return On.get(V)(S,L)}catch(re){if(g(J),re!==re+0&&re!=="longjmp")throw re;B(1,0)}}function O(V,S,L,J,re){var G=h();try{return On.get(V)(S,L,J,re)}catch(X){if(g(G),X!==X+0&&X!=="longjmp")throw X;B(1,0)}}var Z;st=function V(){Z||ce(),Z||(st=V)};function ce(V){if(er>0||(wi(),er>0))return;function S(){Z||(Z=!0,c.calledRun=!0,!qr&&(Lr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Yr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),S()},1)):S()}if(c.run=ce,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return ce(),c.ready}}(),ee=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/avif_node_dec-94f55a8c.wasm").href:new URL("avif_node_dec-94f55a8c.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,_e=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(F,W){Xe=F,et=W});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt="./this.program",It=!1,Rt="";function Xt(F){return c.locateFile?c.locateFile(F,Rt):Rt+F}var hn,nn,An,pn;Rt=__dirname+"/",hn=function(W,w){return An||(An=ri),pn||(pn=ri),W=pn.normalize(W),An.readFileSync(W,w?null:"utf8")},nn=function(W){var w=hn(W,!0);return w.buffer||(w=new Uint8Array(w)),Tn(w.buffer),w},process.argv.length>1&&(qt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var Ut=c.print||console.log.bind(console),Gt=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&(qt=c.thisProgram),c.quit&&c.quit;var on;c.wasmBinary&&(on=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&pe("no native wasm support detected");var lr,Pr=!1;function Tn(F,W){F||pe("Assertion failed: "+W)}var qr=new TextDecoder("utf8");function xr(F,W,w){for(var M=W+w,Y=W;F[Y]&&!(Y>=M);)++Y;return qr.decode(F.subarray?F.subarray(W,Y):new Uint8Array(F.slice(W,Y)))}function Hr(F,W){if(!F)return"";for(var w=F+W,M=F;!(M>=w)&&Ke[M];)++M;return qr.decode(Ke.subarray(F,M))}function oi(F,W,w,M){if(!(M>0))return 0;for(var Y=w,ae=w+M-1,me=0;me<F.length;++me){var ge=F.charCodeAt(me);if(ge>=55296&&ge<=57343){var Be=F.charCodeAt(++me);ge=65536+((ge&1023)<<10)|Be&1023}if(ge<=127){if(w>=ae)break;W[w++]=ge}else if(ge<=2047){if(w+1>=ae)break;W[w++]=192|ge>>6,W[w++]=128|ge&63}else if(ge<=65535){if(w+2>=ae)break;W[w++]=224|ge>>12,W[w++]=128|ge>>6&63,W[w++]=128|ge&63}else{if(w+3>=ae)break;W[w++]=240|ge>>18,W[w++]=128|ge>>12&63,W[w++]=128|ge>>6&63,W[w++]=128|ge&63}}return W[w]=0,w-Y}function ti(F,W,w){return oi(F,Ke,W,w)}function Mi(F){for(var W=0,w=0;w<F.length;++w){var M=F.charCodeAt(w);M>=55296&&M<=57343&&(M=65536+((M&1023)<<10)|F.charCodeAt(++w)&1023),M<=127?++W:M<=2047?W+=2:M<=65535?W+=3:W+=4}return W}var Ti=new TextDecoder("utf-16le");function Di(F,W){for(var w=F,M=w>>1,Y=M+W/2;!(M>=Y)&&$n[M];)++M;return w=M<<1,Ti.decode(Ke.subarray(F,w))}function Ri(F,W,w){if(w===void 0&&(w=2147483647),w<2)return 0;w-=2;for(var M=W,Y=w<F.length*2?w/2:F.length,ae=0;ae<Y;++ae){var me=F.charCodeAt(ae);gt[W>>1]=me,W+=2}return gt[W>>1]=0,W-M}function Ii(F){return F.length*2}function li(F,W){for(var w=0,M="";!(w>=W/4);){var Y=vt[F+w*4>>2];if(Y==0)break;if(++w,Y>=65536){var ae=Y-65536;M+=String.fromCharCode(55296|ae>>10,56320|ae&1023)}else M+=String.fromCharCode(Y)}return M}function fi(F,W,w){if(w===void 0&&(w=2147483647),w<4)return 0;for(var M=W,Y=M+w-4,ae=0;ae<F.length;++ae){var me=F.charCodeAt(ae);if(me>=55296&&me<=57343){var ge=F.charCodeAt(++ae);me=65536+((me&1023)<<10)|ge&1023}if(vt[W>>2]=me,W+=4,W+4>Y)break}return vt[W>>2]=0,W-M}function di(F){for(var W=0,w=0;w<F.length;++w){var M=F.charCodeAt(w);M>=55296&&M<=57343&&++w,W+=4}return W}function mn(F,W){Wt.set(F,W)}function Ln(F,W,w){for(var M=0;M<F.length;++M)Wt[W++>>0]=F.charCodeAt(M);w||(Wt[W>>0]=0)}function At(F,W){return F%W>0&&(F+=W-F%W),F}var cn,Wt,Ke,gt,$n,vt,Pt,an,Wr;function Vr(F){cn=F,c.HEAP8=Wt=new Int8Array(F),c.HEAP16=gt=new Int16Array(F),c.HEAP32=vt=new Int32Array(F),c.HEAPU8=Ke=new Uint8Array(F),c.HEAPU16=$n=new Uint16Array(F),c.HEAPU32=Pt=new Uint32Array(F),c.HEAPF32=an=new Float32Array(F),c.HEAPF64=Wr=new Float64Array(F)}c.INITIAL_MEMORY;var On,Fr=[],si=[],hi=[];function wi(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Rn(c.preRun.shift());ni(Fr)}function Lr(){ni(si)}function Yr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)$r(c.postRun.shift());ni(hi)}function Rn(F){Fr.unshift(F)}function fr(F){si.unshift(F)}function $r(F){hi.unshift(F)}var er=0,st=null;function $(F){er++,c.monitorRunDependencies&&c.monitorRunDependencies(er)}function oe(F){if(er--,c.monitorRunDependencies&&c.monitorRunDependencies(er),er==0&&st){var W=st;st=null,W()}}c.preloadedImages={},c.preloadedAudios={};function pe(F){c.onAbort&&c.onAbort(F),F+="",Gt(F),Pr=!0,F="abort("+F+"). Build with -s ASSERTIONS=1 for more info.";var W=new WebAssembly.RuntimeError(F);throw et(W),W}var Me="data:application/octet-stream;base64,";function Ze(F){return F.startsWith(Me)}if(c.locateFile){var ft="jxl_node_enc.wasm";Ze(ft)||(ft=Xt(ft))}else var ft=new URL("jxl_node_enc.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Sn(F){try{if(F==ft&&on)return new Uint8Array(on);if(nn)return nn(F);throw"both async and sync fetching of the wasm failed"}catch(W){pe(W)}}function dr(){return!on&&It&&typeof fetch=="function"?fetch(ft,{credentials:"same-origin"}).then(function(F){if(!F.ok)throw"failed to load wasm binary file at '"+ft+"'";return F.arrayBuffer()}).catch(function(){return Sn(ft)}):Promise.resolve().then(function(){return Sn(ft)})}function Wn(){var F={a:$e};function W(me,ge){var Be=me.exports;c.asm=Be,lr=c.asm.J,Vr(lr.buffer),On=c.asm.Q,fr(c.asm.K),oe()}$();function w(me){W(me.instance)}function M(me){return dr().then(function(ge){var Be=WebAssembly.instantiate(ge,F);return Be}).then(me,function(ge){Gt("failed to asynchronously prepare wasm: "+ge),pe(ge)})}function Y(){return!on&&typeof WebAssembly.instantiateStreaming=="function"&&!Ze(ft)&&typeof fetch=="function"?fetch(ft,{credentials:"same-origin"}).then(function(me){var ge=WebAssembly.instantiateStreaming(me,F);return ge.then(w,function(Be){return Gt("wasm streaming compile failed: "+Be),Gt("falling back to ArrayBuffer instantiation"),M(w)})}):M(w)}if(c.instantiateWasm)try{var ae=c.instantiateWasm(F,W);return ae}catch(me){return Gt("Module.instantiateWasm callback failed with error: "+me),!1}return Y().catch(et),{}}function ni(F){for(;F.length>0;){var W=F.shift();if(typeof W=="function"){W(c);continue}var w=W.func;typeof w=="number"?W.arg===void 0?On.get(w)():On.get(w)(W.arg):w(W.arg===void 0?null:W.arg)}}var ur={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Br(F){return dt(F+ur.SIZE)+ur.SIZE}function Ir(F,W){}function Er(F,W){return void 0}function hr(F){this.excPtr=F,this.ptr=F-ur.SIZE,this.set_type=function(W){vt[this.ptr+ur.TYPE_OFFSET>>2]=W},this.get_type=function(){return vt[this.ptr+ur.TYPE_OFFSET>>2]},this.set_destructor=function(W){vt[this.ptr+ur.DESTRUCTOR_OFFSET>>2]=W},this.get_destructor=function(){return vt[this.ptr+ur.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(W){vt[this.ptr+ur.REFCOUNT_OFFSET>>2]=W},this.set_caught=function(W){W=W?1:0,Wt[this.ptr+ur.CAUGHT_OFFSET>>0]=W},this.get_caught=function(){return Wt[this.ptr+ur.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(W){W=W?1:0,Wt[this.ptr+ur.RETHROWN_OFFSET>>0]=W},this.get_rethrown=function(){return Wt[this.ptr+ur.RETHROWN_OFFSET>>0]!=0},this.init=function(W,w){this.set_type(W),this.set_destructor(w),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var W=vt[this.ptr+ur.REFCOUNT_OFFSET>>2];vt[this.ptr+ur.REFCOUNT_OFFSET>>2]=W+1},this.release_ref=function(){var W=vt[this.ptr+ur.REFCOUNT_OFFSET>>2];return vt[this.ptr+ur.REFCOUNT_OFFSET>>2]=W-1,W===1}}function cr(F,W,w){var M=new hr(F);throw M.init(W,w),F}var Vt={mappings:{},buffers:[null,[],[]],printChar:function(F,W){var w=Vt.buffers[F];W===0||W===10?((F===1?Ut:Gt)(xr(w,0)),w.length=0):w.push(W)},varargs:void 0,get:function(){Vt.varargs+=4;var F=vt[Vt.varargs-4>>2];return F},getStr:function(F){var W=Hr(F);return W},get64:function(F,W){return F}};function ln(F,W,w){return Vt.varargs=w,0}function Nn(F,W,w){return Vt.varargs=w,0}function gn(F,W,w){Vt.varargs=w}var Ft={};function Jn(F){for(;F.length;){var W=F.pop(),w=F.pop();w(W)}}function Ar(F){return this.fromWireType(Pt[F>>2])}var xn={},qn={},nr={},Mt=48,Vn=57;function yn(F){if(F===void 0)return"_unknown";F=F.replace(/[^a-zA-Z0-9_]/g,"$");var W=F.charCodeAt(0);return W>=Mt&&W<=Vn?"_"+F:F}function In(F,W){return F=yn(F),new Function("body","return function "+F+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(W)}function Un(F,W){var w=In(W,function(M){this.name=W,this.message=M;var Y=new Error(M).stack;Y!==void 0&&(this.stack=this.toString()+`
`+Y.replace(/^Error(:[^\n]*)?\n/,""))});return w.prototype=Object.create(F.prototype),w.prototype.constructor=w,w.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},w}var ir=void 0;function Mr(F){throw new ir(F)}function fn(F,W,w){F.forEach(function(ge){nr[ge]=W});function M(ge){var Be=w(ge);Be.length!==F.length&&Mr("Mismatched type converter count");for(var Le=0;Le<F.length;++Le)Nr(F[Le],Be[Le])}var Y=new Array(W.length),ae=[],me=0;W.forEach(function(ge,Be){qn.hasOwnProperty(ge)?Y[Be]=qn[ge]:(ae.push(ge),xn.hasOwnProperty(ge)||(xn[ge]=[]),xn[ge].push(function(){Y[Be]=qn[ge],++me,me===ae.length&&M(Y)}))}),ae.length===0&&M(Y)}function Xn(F){var W=Ft[F];delete Ft[F];var w=W.rawConstructor,M=W.rawDestructor,Y=W.fields,ae=Y.map(function(me){return me.getterReturnType}).concat(Y.map(function(me){return me.setterArgumentType}));fn([F],ae,function(me){var ge={};return Y.forEach(function(Be,Le){var Ye=Be.fieldName,bt=me[Le],kt=Be.getter,Yn=Be.getterContext,wr=me[Le+Y.length],Zr=Be.setter,Fi=Be.setterContext;ge[Ye]={read:function(eo){return bt.fromWireType(kt(Yn,eo))},write:function(eo,xt){var sr=[];Zr(Fi,eo,wr.toWireType(sr,xt)),Jn(sr)}}}),[{name:W.name,fromWireType:function(Be){var Le={};for(var Ye in ge)Le[Ye]=ge[Ye].read(Be);return M(Be),Le},toWireType:function(Be,Le){for(var Ye in ge)if(!(Ye in Le))throw new TypeError('Missing field:  "'+Ye+'"');var bt=w();for(Ye in ge)ge[Ye].write(bt,Le[Ye]);return Be!==null&&Be.push(M,bt),bt},argPackAdvance:8,readValueFromPointer:Ar,destructorFunction:M}]})}function Gn(F,W,w,M,Y){}function Lt(F){switch(F){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+F)}}function or(){for(var F=new Array(256),W=0;W<256;++W)F[W]=String.fromCharCode(W);Or=F}var Or=void 0;function bn(F){for(var W="",w=F;Ke[w];)W+=Or[Ke[w++]];return W}var Tr=void 0;function jn(F){throw new Tr(F)}function Nr(F,W,w){if(w=w||{},!("argPackAdvance"in W))throw new TypeError("registerType registeredInstance requires argPackAdvance");var M=W.name;if(F||jn('type "'+M+'" must have a positive integer typeid pointer'),qn.hasOwnProperty(F)){if(w.ignoreDuplicateRegistrations)return;jn("Cannot register type '"+M+"' twice")}if(qn[F]=W,delete nr[F],xn.hasOwnProperty(F)){var Y=xn[F];delete xn[F],Y.forEach(function(ae){ae()})}}function pi(F,W,w,M,Y){var ae=Lt(w);W=bn(W),Nr(F,{name:W,fromWireType:function(me){return!!me},toWireType:function(me,ge){return ge?M:Y},argPackAdvance:8,readValueFromPointer:function(me){var ge;if(w===1)ge=Wt;else if(w===2)ge=gt;else if(w===4)ge=vt;else throw new TypeError("Unknown boolean type size: "+W);return this.fromWireType(ge[me>>ae])},destructorFunction:null})}var Ur=[],Dr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ai(F){F>4&&--Dr[F].refcount===0&&(Dr[F]=void 0,Ur.push(F))}function Oi(){for(var F=0,W=5;W<Dr.length;++W)Dr[W]!==void 0&&++F;return F}function ui(){for(var F=5;F<Dr.length;++F)if(Dr[F]!==void 0)return Dr[F];return null}function Pi(){c.count_emval_handles=Oi,c.get_first_emval=ui}function Ci(F){switch(F){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var W=Ur.length?Ur.pop():Dr.length;return Dr[W]={refcount:1,value:F},W}}}function Ni(F,W){W=bn(W),Nr(F,{name:W,fromWireType:function(w){var M=Dr[w].value;return ai(w),M},toWireType:function(w,M){return Ci(M)},argPackAdvance:8,readValueFromPointer:Ar,destructorFunction:null})}function Si(F){if(F===null)return"null";var W=typeof F;return W==="object"||W==="array"||W==="function"?F.toString():""+F}function b(F,W){switch(W){case 2:return function(w){return this.fromWireType(an[w>>2])};case 3:return function(w){return this.fromWireType(Wr[w>>3])};default:throw new TypeError("Unknown float type: "+F)}}function H(F,W,w){var M=Lt(w);W=bn(W),Nr(F,{name:W,fromWireType:function(Y){return Y},toWireType:function(Y,ae){if(typeof ae!="number"&&typeof ae!="boolean")throw new TypeError('Cannot convert "'+Si(ae)+'" to '+this.name);return ae},argPackAdvance:8,readValueFromPointer:b(W,M),destructorFunction:null})}function se(F,W){if(!(F instanceof Function))throw new TypeError("new_ called with constructor type "+typeof F+" which is not a function");var w=In(F.name||"unknownFunctionName",function(){});w.prototype=F.prototype;var M=new w,Y=F.apply(M,W);return Y instanceof Object?Y:M}function be(F,W,w,M,Y){var ae=W.length;ae<2&&jn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var me=W[1]!==null&&w!==null,ge=!1,Be=1;Be<W.length;++Be)if(W[Be]!==null&&W[Be].destructorFunction===void 0){ge=!0;break}for(var Le=W[0].name!=="void",Ye="",bt="",Be=0;Be<ae-2;++Be)Ye+=(Be!==0?", ":"")+"arg"+Be,bt+=(Be!==0?", ":"")+"arg"+Be+"Wired";var kt="return function "+yn(F)+"("+Ye+`) {
if (arguments.length !== `+(ae-2)+`) {
throwBindingError('function `+F+" called with ' + arguments.length + ' arguments, expected "+(ae-2)+` args!');
}
`;ge&&(kt+=`var destructors = [];
`);var Yn=ge?"destructors":"null",wr=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Zr=[jn,M,Y,Jn,W[0],W[1]];me&&(kt+="var thisWired = classParam.toWireType("+Yn+`, this);
`);for(var Be=0;Be<ae-2;++Be)kt+="var arg"+Be+"Wired = argType"+Be+".toWireType("+Yn+", arg"+Be+"); // "+W[Be+2].name+`
`,wr.push("argType"+Be),Zr.push(W[Be+2]);if(me&&(bt="thisWired"+(bt.length>0?", ":"")+bt),kt+=(Le?"var rv = ":"")+"invoker(fn"+(bt.length>0?", ":"")+bt+`);
`,ge)kt+=`runDestructors(destructors);
`;else for(var Be=me?1:2;Be<W.length;++Be){var Fi=Be===1?"thisWired":"arg"+(Be-2)+"Wired";W[Be].destructorFunction!==null&&(kt+=Fi+"_dtor("+Fi+"); // "+W[Be].name+`
`,wr.push(Fi+"_dtor"),Zr.push(W[Be].destructorFunction))}Le&&(kt+=`var ret = retType.fromWireType(rv);
return ret;
`),kt+=`}
`,wr.push(kt);var eo=se(Function,wr).apply(null,Zr);return eo}function De(F,W,w){if(F[W].overloadTable===void 0){var M=F[W];F[W]=function(){return F[W].overloadTable.hasOwnProperty(arguments.length)||jn("Function '"+w+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+F[W].overloadTable+")!"),F[W].overloadTable[arguments.length].apply(this,arguments)},F[W].overloadTable=[],F[W].overloadTable[M.argCount]=M}}function U(F,W,w){c.hasOwnProperty(F)?((w===void 0||c[F].overloadTable!==void 0&&c[F].overloadTable[w]!==void 0)&&jn("Cannot register public name '"+F+"' twice"),De(c,F,F),c.hasOwnProperty(w)&&jn("Cannot register multiple overloads of a function with the same number of arguments ("+w+")!"),c[F].overloadTable[w]=W):(c[F]=W,w!==void 0&&(c[F].numArguments=w))}function q(F,W){for(var w=[],M=0;M<F;M++)w.push(vt[(W>>2)+M]);return w}function ue(F,W,w){c.hasOwnProperty(F)||Mr("Replacing nonexistant public symbol"),c[F].overloadTable!==void 0&&w!==void 0?c[F].overloadTable[w]=W:(c[F]=W,c[F].argCount=w)}function Re(F,W,w){var M=c["dynCall_"+F];return w&&w.length?M.apply(null,[W].concat(w)):M.call(null,W)}function pt(F,W,w){return F.includes("j")?Re(F,W,w):On.get(W).apply(null,w)}function yt(F,W){var w=[];return function(){w.length=arguments.length;for(var M=0;M<arguments.length;M++)w[M]=arguments[M];return pt(F,W,w)}}function jt(F,W){F=bn(F);function w(){return F.includes("j")?yt(F,W):On.get(W)}var M=w();return typeof M!="function"&&jn("unknown function pointer with signature "+F+": "+W),M}var wt=void 0;function Ht(F){var W=mt(F),w=bn(W);return tt(W),w}function Pn(F,W){var w=[],M={};function Y(ae){if(!M[ae]&&!qn[ae]){if(nr[ae]){nr[ae].forEach(Y);return}w.push(ae),M[ae]=!0}}throw W.forEach(Y),new wt(F+": "+w.map(Ht).join([", "]))}function pr(F,W,w,M,Y,ae){var me=q(W,w);F=bn(F),Y=jt(M,Y),U(F,function(){Pn("Cannot call "+F+" due to unbound types",me)},W-1),fn([],me,function(ge){var Be=[ge[0],null].concat(ge.slice(1));return ue(F,be(F,Be,null,Y,ae),W-1),[]})}function Gr(F,W,w){switch(W){case 0:return w?function(Y){return Wt[Y]}:function(Y){return Ke[Y]};case 1:return w?function(Y){return gt[Y>>1]}:function(Y){return $n[Y>>1]};case 2:return w?function(Y){return vt[Y>>2]}:function(Y){return Pt[Y>>2]};default:throw new TypeError("Unknown integer type: "+F)}}function Zn(F,W,w,M,Y){W=bn(W),Y===-1&&(Y=4294967295);var ae=Lt(w),me=function(Le){return Le};if(M===0){var ge=32-8*w;me=function(Le){return Le<<ge>>>ge}}var Be=W.includes("unsigned");Nr(F,{name:W,fromWireType:me,toWireType:function(Le,Ye){if(typeof Ye!="number"&&typeof Ye!="boolean")throw new TypeError('Cannot convert "'+Si(Ye)+'" to '+this.name);if(Ye<M||Ye>Y)throw new TypeError('Passing a number "'+Si(Ye)+'" from JS side to C/C++ side to an argument of type "'+W+'", which is outside the valid range ['+M+", "+Y+"]!");return Be?Ye>>>0:Ye|0},argPackAdvance:8,readValueFromPointer:Gr(W,ae,M!==0),destructorFunction:null})}function tr(F,W,w){var M=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Y=M[W];function ae(me){me=me>>2;var ge=Pt,Be=ge[me],Le=ge[me+1];return new Y(cn,Le,Be)}w=bn(w),Nr(F,{name:w,fromWireType:ae,argPackAdvance:8,readValueFromPointer:ae},{ignoreDuplicateRegistrations:!0})}function zn(F,W){W=bn(W);var w=W==="std::string";Nr(F,{name:W,fromWireType:function(M){var Y=Pt[M>>2],ae;if(w)for(var me=M+4,ge=0;ge<=Y;++ge){var Be=M+4+ge;if(ge==Y||Ke[Be]==0){var Le=Be-me,Ye=Hr(me,Le);ae===void 0?ae=Ye:(ae+=String.fromCharCode(0),ae+=Ye),me=Be+1}}else{for(var bt=new Array(Y),ge=0;ge<Y;++ge)bt[ge]=String.fromCharCode(Ke[M+4+ge]);ae=bt.join("")}return tt(M),ae},toWireType:function(M,Y){Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y));var ae,me=typeof Y=="string";me||Y instanceof Uint8Array||Y instanceof Uint8ClampedArray||Y instanceof Int8Array||jn("Cannot pass non-string to std::string"),w&&me?ae=function(){return Mi(Y)}:ae=function(){return Y.length};var ge=ae(),Be=dt(4+ge+1);if(Pt[Be>>2]=ge,w&&me)ti(Y,Be+4,ge+1);else if(me)for(var Le=0;Le<ge;++Le){var Ye=Y.charCodeAt(Le);Ye>255&&(tt(Be),jn("String has UTF-16 code units that do not fit in 8 bits")),Ke[Be+4+Le]=Ye}else for(var Le=0;Le<ge;++Le)Ke[Be+4+Le]=Y[Le];return M!==null&&M.push(tt,Be),Be},argPackAdvance:8,readValueFromPointer:Ar,destructorFunction:function(M){tt(M)}})}function jr(F,W,w){w=bn(w);var M,Y,ae,me,ge;W===2?(M=Di,Y=Ri,me=Ii,ae=function(){return $n},ge=1):W===4&&(M=li,Y=fi,me=di,ae=function(){return Pt},ge=2),Nr(F,{name:w,fromWireType:function(Be){for(var Le=Pt[Be>>2],Ye=ae(),bt,kt=Be+4,Yn=0;Yn<=Le;++Yn){var wr=Be+4+Yn*W;if(Yn==Le||Ye[wr>>ge]==0){var Zr=wr-kt,Fi=M(kt,Zr);bt===void 0?bt=Fi:(bt+=String.fromCharCode(0),bt+=Fi),kt=wr+W}}return tt(Be),bt},toWireType:function(Be,Le){typeof Le!="string"&&jn("Cannot pass non-string to C++ string type "+w);var Ye=me(Le),bt=dt(4+Ye+W);return Pt[bt>>2]=Ye>>ge,Y(Le,bt+4,Ye+W),Be!==null&&Be.push(tt,bt),bt},argPackAdvance:8,readValueFromPointer:Ar,destructorFunction:function(Be){tt(Be)}})}function br(F,W,w,M,Y,ae){Ft[F]={name:bn(W),rawConstructor:jt(w,M),rawDestructor:jt(Y,ae),fields:[]}}function Hn(F,W,w,M,Y,ae,me,ge,Be,Le){Ft[F].fields.push({fieldName:bn(W),getterReturnType:w,getter:jt(M,Y),getterContext:ae,setterArgumentType:me,setter:jt(ge,Be),setterContext:Le})}function rn(F,W){W=bn(W),Nr(F,{isVoid:!0,name:W,argPackAdvance:0,fromWireType:function(){},toWireType:function(w,M){}})}var sn={};function Kn(F){var W=sn[F];return W===void 0?bn(F):W}function mr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function he(F){return F===0?Ci(mr()):(F=Kn(F),Ci(mr()[F]))}function ve(F){F>4&&(Dr[F].refcount+=1)}function xe(F,W){var w=qn[F];return w===void 0&&jn(W+" has unknown type "+Ht(F)),w}function Ve(F){for(var W="",w=0;w<F;++w)W+=(w!==0?", ":"")+"arg"+w;for(var M="return function emval_allocator_"+F+`(constructor, argTypes, args) {
`,w=0;w<F;++w)M+="var argType"+w+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+w+'], "parameter '+w+`");
var arg`+w+" = argType"+w+`.readValueFromPointer(args);
args += argType`+w+`['argPackAdvance'];
`;return M+="var obj = new constructor("+W+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",M)(xe,c,Ci)}var at={};function Tt(F){return F||jn("Cannot use deleted val. handle = "+F),Dr[F].value}function Ot(F,W,w,M){F=Tt(F);var Y=at[W];return Y||(Y=Ve(W),at[W]=Y),Y(F,w,M)}function D(){pe()}function y(F,W,w){Ke.copyWithin(F,W,W+w)}function m(F){try{return lr.grow(F-cn.byteLength+65535>>>16),Vr(lr.buffer),1}catch{}}function C(F){var W=Ke.length;F=F>>>0;var w=2147483648;if(F>w)return!1;for(var M=1;M<=4;M*=2){var Y=W*(1+.2/M);Y=Math.min(Y,F+100663296);var ae=Math.min(w,At(Math.max(F,Y),65536)),me=m(ae);if(me)return!0}return!1}var h={};function g(){return qt||"./this.program"}function B(){if(!B.strings){var F=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",W={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:F,_:g()};for(var w in h)W[w]=h[w];var M=[];for(var w in W)M.push(w+"="+W[w]);B.strings=M}return B.strings}function N(F,W){var w=0;return B().forEach(function(M,Y){var ae=W+w;vt[F+Y*4>>2]=ae,Ln(M,ae),w+=M.length+1}),0}function z(F,W){var w=B();vt[F>>2]=w.length;var M=0;return w.forEach(function(Y){M+=Y.length+1}),vt[W>>2]=M,0}function x(F){return 0}function O(F,W,w,M){var Y=Vt.getStreamFromFD(F),ae=Vt.doReadv(Y,W,w);return vt[M>>2]=ae,0}function Z(F,W,w,M,Y){}function ce(F,W,w,M){for(var Y=0,ae=0;ae<w;ae++){for(var me=vt[W+ae*8>>2],ge=vt[W+(ae*8+4)>>2],Be=0;Be<ge;Be++)Vt.printChar(F,Ke[me+Be]);Y+=ge}return vt[M>>2]=Y,0}function V(F){}function S(F){return F%4===0&&(F%100!==0||F%400===0)}function L(F,W){for(var w=0,M=0;M<=W;w+=F[M++]);return w}var J=[31,29,31,30,31,30,31,31,30,31,30,31],re=[31,28,31,30,31,30,31,31,30,31,30,31];function G(F,W){for(var w=new Date(F.getTime());W>0;){var M=S(w.getFullYear()),Y=w.getMonth(),ae=(M?J:re)[Y];if(W>ae-w.getDate())W-=ae-w.getDate()+1,w.setDate(1),Y<11?w.setMonth(Y+1):(w.setMonth(0),w.setFullYear(w.getFullYear()+1));else return w.setDate(w.getDate()+W),w}return w}function X(F,W,w,M){var Y=vt[M+40>>2],ae={tm_sec:vt[M>>2],tm_min:vt[M+4>>2],tm_hour:vt[M+8>>2],tm_mday:vt[M+12>>2],tm_mon:vt[M+16>>2],tm_year:vt[M+20>>2],tm_wday:vt[M+24>>2],tm_yday:vt[M+28>>2],tm_isdst:vt[M+32>>2],tm_gmtoff:vt[M+36>>2],tm_zone:Y?Hr(Y):""},me=Hr(w),ge={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Be in ge)me=me.replace(new RegExp(Be,"g"),ge[Be]);var Le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ye=["January","February","March","April","May","June","July","August","September","October","November","December"];function bt(xt,sr,ro){for(var Ui=typeof xt=="number"?xt.toString():xt||"";Ui.length<sr;)Ui=ro[0]+Ui;return Ui}function kt(xt,sr){return bt(xt,sr,"0")}function Yn(xt,sr){function ro(Qo){return Qo<0?-1:Qo>0?1:0}var Ui;return(Ui=ro(xt.getFullYear()-sr.getFullYear()))===0&&(Ui=ro(xt.getMonth()-sr.getMonth()))===0&&(Ui=ro(xt.getDate()-sr.getDate())),Ui}function wr(xt){switch(xt.getDay()){case 0:return new Date(xt.getFullYear()-1,11,29);case 1:return xt;case 2:return new Date(xt.getFullYear(),0,3);case 3:return new Date(xt.getFullYear(),0,2);case 4:return new Date(xt.getFullYear(),0,1);case 5:return new Date(xt.getFullYear()-1,11,31);case 6:return new Date(xt.getFullYear()-1,11,30)}}function Zr(xt){var sr=G(new Date(xt.tm_year+1900,0,1),xt.tm_yday),ro=new Date(sr.getFullYear(),0,4),Ui=new Date(sr.getFullYear()+1,0,4),Qo=wr(ro),ls=wr(Ui);return Yn(Qo,sr)<=0?Yn(ls,sr)<=0?sr.getFullYear()+1:sr.getFullYear():sr.getFullYear()-1}var Fi={"%a":function(xt){return Le[xt.tm_wday].substring(0,3)},"%A":function(xt){return Le[xt.tm_wday]},"%b":function(xt){return Ye[xt.tm_mon].substring(0,3)},"%B":function(xt){return Ye[xt.tm_mon]},"%C":function(xt){var sr=xt.tm_year+1900;return kt(sr/100|0,2)},"%d":function(xt){return kt(xt.tm_mday,2)},"%e":function(xt){return bt(xt.tm_mday,2," ")},"%g":function(xt){return Zr(xt).toString().substring(2)},"%G":function(xt){return Zr(xt)},"%H":function(xt){return kt(xt.tm_hour,2)},"%I":function(xt){var sr=xt.tm_hour;return sr==0?sr=12:sr>12&&(sr-=12),kt(sr,2)},"%j":function(xt){return kt(xt.tm_mday+L(S(xt.tm_year+1900)?J:re,xt.tm_mon-1),3)},"%m":function(xt){return kt(xt.tm_mon+1,2)},"%M":function(xt){return kt(xt.tm_min,2)},"%n":function(){return`
`},"%p":function(xt){return xt.tm_hour>=0&&xt.tm_hour<12?"AM":"PM"},"%S":function(xt){return kt(xt.tm_sec,2)},"%t":function(){return"	"},"%u":function(xt){return xt.tm_wday||7},"%U":function(xt){var sr=new Date(xt.tm_year+1900,0,1),ro=sr.getDay()===0?sr:G(sr,7-sr.getDay()),Ui=new Date(xt.tm_year+1900,xt.tm_mon,xt.tm_mday);if(Yn(ro,Ui)<0){var Qo=L(S(Ui.getFullYear())?J:re,Ui.getMonth()-1)-31,ls=31-ro.getDate(),ys=ls+Qo+Ui.getDate();return kt(Math.ceil(ys/7),2)}return Yn(ro,sr)===0?"01":"00"},"%V":function(xt){var sr=new Date(xt.tm_year+1900,0,4),ro=new Date(xt.tm_year+1901,0,4),Ui=wr(sr),Qo=wr(ro),ls=G(new Date(xt.tm_year+1900,0,1),xt.tm_yday);if(Yn(ls,Ui)<0)return"53";if(Yn(Qo,ls)<=0)return"01";var ys;return Ui.getFullYear()<xt.tm_year+1900?ys=xt.tm_yday+32-Ui.getDate():ys=xt.tm_yday+1-Ui.getDate(),kt(Math.ceil(ys/7),2)},"%w":function(xt){return xt.tm_wday},"%W":function(xt){var sr=new Date(xt.tm_year,0,1),ro=sr.getDay()===1?sr:G(sr,sr.getDay()===0?1:7-sr.getDay()+1),Ui=new Date(xt.tm_year+1900,xt.tm_mon,xt.tm_mday);if(Yn(ro,Ui)<0){var Qo=L(S(Ui.getFullYear())?J:re,Ui.getMonth()-1)-31,ls=31-ro.getDate(),ys=ls+Qo+Ui.getDate();return kt(Math.ceil(ys/7),2)}return Yn(ro,sr)===0?"01":"00"},"%y":function(xt){return(xt.tm_year+1900).toString().substring(2)},"%Y":function(xt){return xt.tm_year+1900},"%z":function(xt){var sr=xt.tm_gmtoff,ro=sr>=0;return sr=Math.abs(sr)/60,sr=sr/60*100+sr%60,(ro?"+":"-")+String("0000"+sr).slice(-4)},"%Z":function(xt){return xt.tm_zone},"%%":function(){return"%"}};for(var Be in Fi)me.includes(Be)&&(me=me.replace(new RegExp(Be,"g"),Fi[Be](ae)));var eo=we(me,!1);return eo.length>W?0:(mn(eo,F),eo.length-1)}function te(F,W,w,M){return X(F,W,w,M)}function le(F){{if(!F)return 1;var W=Hr(F);if(!W.length)return 0;var w=ri,M=w.spawnSync(W,[],{shell:!0,stdio:"inherit"}),Y=function(me,ge){return me<<8|ge};if(M.status===null){var ae=function(me){switch(me){case"SIGHUP":return 1;case"SIGINT":return 2;case"SIGQUIT":return 3;case"SIGFPE":return 8;case"SIGKILL":return 9;case"SIGALRM":return 14;case"SIGTERM":return 15}return 2};return Y(0,ae(M.signal))}return Y(M.status,0)}}ir=c.InternalError=Un(Error,"InternalError"),or(),Tr=c.BindingError=Un(Error,"BindingError"),Pi(),wt=c.UnboundTypeError=Un(Error,"UnboundTypeError");function we(F,W,w){var M=w>0?w:Mi(F)+1,Y=new Array(M),ae=oi(F,Y,0,Y.length);return W&&(Y.length=ae),Y}var $e={u:Br,I:Er,p:cr,h:ln,A:Nn,B:gn,m:Xn,r:Gn,D:pi,C:Ni,j:H,l:pr,c:Zn,b:tr,k:zn,g:jr,n:br,d:Hn,E:rn,e:ai,H:he,G:ve,o:Ot,a:D,t:y,f:C,w:N,x:z,i:x,z:O,q:Z,y:ce,s:V,v:te,F:le};Wn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.K).apply(null,arguments)};var dt=c._malloc=function(){return(dt=c._malloc=c.asm.L).apply(null,arguments)},tt=c._free=function(){return(tt=c._free=c.asm.M).apply(null,arguments)},mt=c.___getTypeName=function(){return(mt=c.___getTypeName=c.asm.N).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.O).apply(null,arguments)},c.___errno_location=function(){return(c.___errno_location=c.asm.P).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.R).apply(null,arguments)},c.dynCall_iiji=function(){return(c.dynCall_iiji=c.asm.S).apply(null,arguments)},c.dynCall_iiiiij=function(){return(c.dynCall_iiiiij=c.asm.T).apply(null,arguments)},c.dynCall_iiiiijj=function(){return(c.dynCall_iiiiijj=c.asm.U).apply(null,arguments)},c.dynCall_iiiiiijj=function(){return(c.dynCall_iiiiiijj=c.asm.V).apply(null,arguments)},c.dynCall_viijii=function(){return(c.dynCall_viijii=c.asm.W).apply(null,arguments)};var Kt;st=function F(){Kt||ie(),Kt||(st=F)};function ie(F){if(er>0||(wi(),er>0))return;function W(){Kt||(Kt=!0,c.calledRun=!0,!Pr&&(Lr(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Yr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),W()},1)):W()}if(c.run=ie,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return ie(),c.ready}}(),Q=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/jxl_node_enc-b8ea914c.wasm").href:new URL("jxl_node_enc-b8ea914c.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,ne=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(y,m){Xe=y,et=m});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(y){return c.locateFile?c.locateFile(y,It):It+y}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(m,C){return nn||(nn=ri),An||(An=ri),m=An.normalize(m),nn.readFileSync(m,C?null:"utf8")},hn=function(m){var C=Xt(m,!0);return C.buffer||(C=new Uint8Array(C)),Pr(C.buffer),C},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&st("no native wasm support detected");var on,lr=!1;function Pr(y,m){y||st("Assertion failed: "+m)}var Tn=new TextDecoder("utf8");function qr(y,m,C){for(var h=m+C,g=m;y[g]&&!(g>=h);)++g;return Tn.decode(y.subarray?y.subarray(m,g):new Uint8Array(y.slice(m,g)))}function xr(y,m){if(!y)return"";for(var C=y+m,h=y;!(h>=C)&&At[h];)++h;return Tn.decode(At.subarray(y,h))}function Hr(y,m,C,h){if(!(h>0))return 0;for(var g=C,B=C+h-1,N=0;N<y.length;++N){var z=y.charCodeAt(N);if(z>=55296&&z<=57343){var x=y.charCodeAt(++N);z=65536+((z&1023)<<10)|x&1023}if(z<=127){if(C>=B)break;m[C++]=z}else if(z<=2047){if(C+1>=B)break;m[C++]=192|z>>6,m[C++]=128|z&63}else if(z<=65535){if(C+2>=B)break;m[C++]=224|z>>12,m[C++]=128|z>>6&63,m[C++]=128|z&63}else{if(C+3>=B)break;m[C++]=240|z>>18,m[C++]=128|z>>12&63,m[C++]=128|z>>6&63,m[C++]=128|z&63}}return m[C]=0,C-g}function oi(y,m,C){return Hr(y,At,m,C)}function ti(y){for(var m=0,C=0;C<y.length;++C){var h=y.charCodeAt(C);h>=55296&&h<=57343&&(h=65536+((h&1023)<<10)|y.charCodeAt(++C)&1023),h<=127?++m:h<=2047?m+=2:h<=65535?m+=3:m+=4}return m}var Mi=new TextDecoder("utf-16le");function Ti(y,m){for(var C=y,h=C>>1,g=h+m/2;!(h>=g)&&Wt[h];)++h;return C=h<<1,Mi.decode(At.subarray(y,C))}function Di(y,m,C){if(C===void 0&&(C=2147483647),C<2)return 0;C-=2;for(var h=m,g=C<y.length*2?C/2:y.length,B=0;B<g;++B){var N=y.charCodeAt(B);cn[m>>1]=N,m+=2}return cn[m>>1]=0,m-h}function Ri(y){return y.length*2}function Ii(y,m){for(var C=0,h="";!(C>=m/4);){var g=Ke[y+C*4>>2];if(g==0)break;if(++C,g>=65536){var B=g-65536;h+=String.fromCharCode(55296|B>>10,56320|B&1023)}else h+=String.fromCharCode(g)}return h}function li(y,m,C){if(C===void 0&&(C=2147483647),C<4)return 0;for(var h=m,g=h+C-4,B=0;B<y.length;++B){var N=y.charCodeAt(B);if(N>=55296&&N<=57343){var z=y.charCodeAt(++B);N=65536+((N&1023)<<10)|z&1023}if(Ke[m>>2]=N,m+=4,m+4>g)break}return Ke[m>>2]=0,m-h}function fi(y){for(var m=0,C=0;C<y.length;++C){var h=y.charCodeAt(C);h>=55296&&h<=57343&&++C,m+=4}return m}function di(y,m){return y%m>0&&(y+=m-y%m),y}var mn,Ln,At,cn,Wt,Ke,gt,$n,vt;function Pt(y){mn=y,c.HEAP8=Ln=new Int8Array(y),c.HEAP16=cn=new Int16Array(y),c.HEAP32=Ke=new Int32Array(y),c.HEAPU8=At=new Uint8Array(y),c.HEAPU16=Wt=new Uint16Array(y),c.HEAPU32=gt=new Uint32Array(y),c.HEAPF32=$n=new Float32Array(y),c.HEAPF64=vt=new Float64Array(y)}c.INITIAL_MEMORY;var an,Wr=[],Vr=[],On=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Sn(Wr)}function si(){Sn(Vr)}function hi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Yr(c.postRun.shift());Sn(On)}function wi(y){Wr.unshift(y)}function Lr(y){Vr.unshift(y)}function Yr(y){On.unshift(y)}var Rn=0,fr=null;function $r(y){Rn++,c.monitorRunDependencies&&c.monitorRunDependencies(Rn)}function er(y){if(Rn--,c.monitorRunDependencies&&c.monitorRunDependencies(Rn),Rn==0&&fr){var m=fr;fr=null,m()}}c.preloadedImages={},c.preloadedAudios={};function st(y){c.onAbort&&c.onAbort(y),y+="",Ut(y),lr=!0,y="abort("+y+"). Build with -s ASSERTIONS=1 for more info.";var m=new WebAssembly.RuntimeError(y);throw et(m),m}var $="data:application/octet-stream;base64,";function oe(y){return y.startsWith($)}if(c.locateFile){var pe="jxl_node_dec.wasm";oe(pe)||(pe=Rt(pe))}else var pe=new URL("jxl_node_dec.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(y){try{if(y==pe&&Gt)return new Uint8Array(Gt);if(hn)return hn(y);throw"both async and sync fetching of the wasm failed"}catch(m){st(m)}}function Ze(){return!Gt&&qt&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+pe+"'";return y.arrayBuffer()}).catch(function(){return Me(pe)}):Promise.resolve().then(function(){return Me(pe)})}function ft(){var y={a:xe};function m(N,z){var x=N.exports;c.asm=x,on=c.asm.x,Pt(on.buffer),an=c.asm.D,Lr(c.asm.y),er()}$r();function C(N){m(N.instance)}function h(N){return Ze().then(function(z){var x=WebAssembly.instantiate(z,y);return x}).then(N,function(z){Ut("failed to asynchronously prepare wasm: "+z),st(z)})}function g(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!oe(pe)&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(N){var z=WebAssembly.instantiateStreaming(N,y);return z.then(C,function(x){return Ut("wasm streaming compile failed: "+x),Ut("falling back to ArrayBuffer instantiation"),h(C)})}):h(C)}if(c.instantiateWasm)try{var B=c.instantiateWasm(y,m);return B}catch(N){return Ut("Module.instantiateWasm callback failed with error: "+N),!1}return g().catch(et),{}}function Sn(y){for(;y.length>0;){var m=y.shift();if(typeof m=="function"){m(c);continue}var C=m.func;typeof C=="number"?m.arg===void 0?an.get(C)():an.get(C)(m.arg):C(m.arg===void 0?null:m.arg)}}function dr(y,m,C,h){st("Assertion failed: "+xr(y)+", at: "+[m?xr(m):"unknown filename",C,h?xr(h):"unknown function"])}function Wn(y,m){}function ni(y,m){return void 0}function ur(y,m,C,h,g){}function Br(y){switch(y){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+y)}}function Ir(){for(var y=new Array(256),m=0;m<256;++m)y[m]=String.fromCharCode(m);Er=y}var Er=void 0;function hr(y){for(var m="",C=y;At[C];)m+=Er[At[C++]];return m}var cr={},Vt={},ln={},Nn=48,gn=57;function Ft(y){if(y===void 0)return"_unknown";y=y.replace(/[^a-zA-Z0-9_]/g,"$");var m=y.charCodeAt(0);return m>=Nn&&m<=gn?"_"+y:y}function Jn(y,m){return y=Ft(y),new Function("body","return function "+y+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(m)}function Ar(y,m){var C=Jn(m,function(h){this.name=m,this.message=h;var g=new Error(h).stack;g!==void 0&&(this.stack=this.toString()+`
`+g.replace(/^Error(:[^\n]*)?\n/,""))});return C.prototype=Object.create(y.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},C}var xn=void 0;function qn(y){throw new xn(y)}var nr=void 0;function Mt(y){throw new nr(y)}function Vn(y,m,C){y.forEach(function(z){ln[z]=m});function h(z){var x=C(z);x.length!==y.length&&Mt("Mismatched type converter count");for(var O=0;O<y.length;++O)yn(y[O],x[O])}var g=new Array(m.length),B=[],N=0;m.forEach(function(z,x){Vt.hasOwnProperty(z)?g[x]=Vt[z]:(B.push(z),cr.hasOwnProperty(z)||(cr[z]=[]),cr[z].push(function(){g[x]=Vt[z],++N,N===B.length&&h(g)}))}),B.length===0&&h(g)}function yn(y,m,C){if(C=C||{},!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");var h=m.name;if(y||qn('type "'+h+'" must have a positive integer typeid pointer'),Vt.hasOwnProperty(y)){if(C.ignoreDuplicateRegistrations)return;qn("Cannot register type '"+h+"' twice")}if(Vt[y]=m,delete ln[y],cr.hasOwnProperty(y)){var g=cr[y];delete cr[y],g.forEach(function(B){B()})}}function In(y,m,C,h,g){var B=Br(C);m=hr(m),yn(y,{name:m,fromWireType:function(N){return!!N},toWireType:function(N,z){return z?h:g},argPackAdvance:8,readValueFromPointer:function(N){var z;if(C===1)z=Ln;else if(C===2)z=cn;else if(C===4)z=Ke;else throw new TypeError("Unknown boolean type size: "+m);return this.fromWireType(z[N>>B])},destructorFunction:null})}var Un=[],ir=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Mr(y){y>4&&--ir[y].refcount===0&&(ir[y]=void 0,Un.push(y))}function fn(){for(var y=0,m=5;m<ir.length;++m)ir[m]!==void 0&&++y;return y}function Xn(){for(var y=5;y<ir.length;++y)if(ir[y]!==void 0)return ir[y];return null}function Gn(){c.count_emval_handles=fn,c.get_first_emval=Xn}function Lt(y){switch(y){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var m=Un.length?Un.pop():ir.length;return ir[m]={refcount:1,value:y},m}}}function or(y){return this.fromWireType(gt[y>>2])}function Or(y,m){m=hr(m),yn(y,{name:m,fromWireType:function(C){var h=ir[C].value;return Mr(C),h},toWireType:function(C,h){return Lt(h)},argPackAdvance:8,readValueFromPointer:or,destructorFunction:null})}function bn(y){if(y===null)return"null";var m=typeof y;return m==="object"||m==="array"||m==="function"?y.toString():""+y}function Tr(y,m){switch(m){case 2:return function(C){return this.fromWireType($n[C>>2])};case 3:return function(C){return this.fromWireType(vt[C>>3])};default:throw new TypeError("Unknown float type: "+y)}}function jn(y,m,C){var h=Br(C);m=hr(m),yn(y,{name:m,fromWireType:function(g){return g},toWireType:function(g,B){if(typeof B!="number"&&typeof B!="boolean")throw new TypeError('Cannot convert "'+bn(B)+'" to '+this.name);return B},argPackAdvance:8,readValueFromPointer:Tr(m,h),destructorFunction:null})}function Nr(y,m){if(!(y instanceof Function))throw new TypeError("new_ called with constructor type "+typeof y+" which is not a function");var C=Jn(y.name||"unknownFunctionName",function(){});C.prototype=y.prototype;var h=new C,g=y.apply(h,m);return g instanceof Object?g:h}function pi(y){for(;y.length;){var m=y.pop(),C=y.pop();C(m)}}function Ur(y,m,C,h,g){var B=m.length;B<2&&qn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var N=m[1]!==null&&C!==null,z=!1,x=1;x<m.length;++x)if(m[x]!==null&&m[x].destructorFunction===void 0){z=!0;break}for(var O=m[0].name!=="void",Z="",ce="",x=0;x<B-2;++x)Z+=(x!==0?", ":"")+"arg"+x,ce+=(x!==0?", ":"")+"arg"+x+"Wired";var V="return function "+Ft(y)+"("+Z+`) {
if (arguments.length !== `+(B-2)+`) {
throwBindingError('function `+y+" called with ' + arguments.length + ' arguments, expected "+(B-2)+` args!');
}
`;z&&(V+=`var destructors = [];
`);var S=z?"destructors":"null",L=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],J=[qn,h,g,pi,m[0],m[1]];N&&(V+="var thisWired = classParam.toWireType("+S+`, this);
`);for(var x=0;x<B-2;++x)V+="var arg"+x+"Wired = argType"+x+".toWireType("+S+", arg"+x+"); // "+m[x+2].name+`
`,L.push("argType"+x),J.push(m[x+2]);if(N&&(ce="thisWired"+(ce.length>0?", ":"")+ce),V+=(O?"var rv = ":"")+"invoker(fn"+(ce.length>0?", ":"")+ce+`);
`,z)V+=`runDestructors(destructors);
`;else for(var x=N?1:2;x<m.length;++x){var re=x===1?"thisWired":"arg"+(x-2)+"Wired";m[x].destructorFunction!==null&&(V+=re+"_dtor("+re+"); // "+m[x].name+`
`,L.push(re+"_dtor"),J.push(m[x].destructorFunction))}O&&(V+=`var ret = retType.fromWireType(rv);
return ret;
`),V+=`}
`,L.push(V);var G=Nr(Function,L).apply(null,J);return G}function Dr(y,m,C){if(y[m].overloadTable===void 0){var h=y[m];y[m]=function(){return y[m].overloadTable.hasOwnProperty(arguments.length)||qn("Function '"+C+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+y[m].overloadTable+")!"),y[m].overloadTable[arguments.length].apply(this,arguments)},y[m].overloadTable=[],y[m].overloadTable[h.argCount]=h}}function ai(y,m,C){c.hasOwnProperty(y)?((C===void 0||c[y].overloadTable!==void 0&&c[y].overloadTable[C]!==void 0)&&qn("Cannot register public name '"+y+"' twice"),Dr(c,y,y),c.hasOwnProperty(C)&&qn("Cannot register multiple overloads of a function with the same number of arguments ("+C+")!"),c[y].overloadTable[C]=m):(c[y]=m,C!==void 0&&(c[y].numArguments=C))}function Oi(y,m){for(var C=[],h=0;h<y;h++)C.push(Ke[(m>>2)+h]);return C}function ui(y,m,C){c.hasOwnProperty(y)||Mt("Replacing nonexistant public symbol"),c[y].overloadTable!==void 0&&C!==void 0?c[y].overloadTable[C]=m:(c[y]=m,c[y].argCount=C)}function Pi(y,m,C){var h=c["dynCall_"+y];return C&&C.length?h.apply(null,[m].concat(C)):h.call(null,m)}function Ci(y,m,C){return y.includes("j")?Pi(y,m,C):an.get(m).apply(null,C)}function Ni(y,m){var C=[];return function(){C.length=arguments.length;for(var h=0;h<arguments.length;h++)C[h]=arguments[h];return Ci(y,m,C)}}function Si(y,m){y=hr(y);function C(){return y.includes("j")?Ni(y,m):an.get(m)}var h=C();return typeof h!="function"&&qn("unknown function pointer with signature "+y+": "+m),h}var b=void 0;function H(y){var m=Tt(y),C=hr(m);return at(m),C}function se(y,m){var C=[],h={};function g(B){if(!h[B]&&!Vt[B]){if(ln[B]){ln[B].forEach(g);return}C.push(B),h[B]=!0}}throw m.forEach(g),new b(y+": "+C.map(H).join([", "]))}function be(y,m,C,h,g,B){var N=Oi(m,C);y=hr(y),g=Si(h,g),ai(y,function(){se("Cannot call "+y+" due to unbound types",N)},m-1),Vn([],N,function(z){var x=[z[0],null].concat(z.slice(1));return ui(y,Ur(y,x,null,g,B),m-1),[]})}function De(y,m,C){switch(m){case 0:return C?function(g){return Ln[g]}:function(g){return At[g]};case 1:return C?function(g){return cn[g>>1]}:function(g){return Wt[g>>1]};case 2:return C?function(g){return Ke[g>>2]}:function(g){return gt[g>>2]};default:throw new TypeError("Unknown integer type: "+y)}}function U(y,m,C,h,g){m=hr(m),g===-1&&(g=4294967295);var B=Br(C),N=function(O){return O};if(h===0){var z=32-8*C;N=function(O){return O<<z>>>z}}var x=m.includes("unsigned");yn(y,{name:m,fromWireType:N,toWireType:function(O,Z){if(typeof Z!="number"&&typeof Z!="boolean")throw new TypeError('Cannot convert "'+bn(Z)+'" to '+this.name);if(Z<h||Z>g)throw new TypeError('Passing a number "'+bn(Z)+'" from JS side to C/C++ side to an argument of type "'+m+'", which is outside the valid range ['+h+", "+g+"]!");return x?Z>>>0:Z|0},argPackAdvance:8,readValueFromPointer:De(m,B,h!==0),destructorFunction:null})}function q(y,m,C){var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],g=h[m];function B(N){N=N>>2;var z=gt,x=z[N],O=z[N+1];return new g(mn,O,x)}C=hr(C),yn(y,{name:C,fromWireType:B,argPackAdvance:8,readValueFromPointer:B},{ignoreDuplicateRegistrations:!0})}function ue(y,m){m=hr(m);var C=m==="std::string";yn(y,{name:m,fromWireType:function(h){var g=gt[h>>2],B;if(C)for(var N=h+4,z=0;z<=g;++z){var x=h+4+z;if(z==g||At[x]==0){var O=x-N,Z=xr(N,O);B===void 0?B=Z:(B+=String.fromCharCode(0),B+=Z),N=x+1}}else{for(var ce=new Array(g),z=0;z<g;++z)ce[z]=String.fromCharCode(At[h+4+z]);B=ce.join("")}return at(h),B},toWireType:function(h,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var B,N=typeof g=="string";N||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array||qn("Cannot pass non-string to std::string"),C&&N?B=function(){return ti(g)}:B=function(){return g.length};var z=B(),x=Ve(4+z+1);if(gt[x>>2]=z,C&&N)oi(g,x+4,z+1);else if(N)for(var O=0;O<z;++O){var Z=g.charCodeAt(O);Z>255&&(at(x),qn("String has UTF-16 code units that do not fit in 8 bits")),At[x+4+O]=Z}else for(var O=0;O<z;++O)At[x+4+O]=g[O];return h!==null&&h.push(at,x),x},argPackAdvance:8,readValueFromPointer:or,destructorFunction:function(h){at(h)}})}function Re(y,m,C){C=hr(C);var h,g,B,N,z;m===2?(h=Ti,g=Di,N=Ri,B=function(){return Wt},z=1):m===4&&(h=Ii,g=li,N=fi,B=function(){return gt},z=2),yn(y,{name:C,fromWireType:function(x){for(var O=gt[x>>2],Z=B(),ce,V=x+4,S=0;S<=O;++S){var L=x+4+S*m;if(S==O||Z[L>>z]==0){var J=L-V,re=h(V,J);ce===void 0?ce=re:(ce+=String.fromCharCode(0),ce+=re),V=L+m}}return at(x),ce},toWireType:function(x,O){typeof O!="string"&&qn("Cannot pass non-string to C++ string type "+C);var Z=N(O),ce=Ve(4+Z+m);return gt[ce>>2]=Z>>z,g(O,ce+4,Z+m),x!==null&&x.push(at,ce),ce},argPackAdvance:8,readValueFromPointer:or,destructorFunction:function(x){at(x)}})}function pt(y,m){m=hr(m),yn(y,{isVoid:!0,name:m,argPackAdvance:0,fromWireType:function(){},toWireType:function(C,h){}})}var yt={};function jt(y){var m=yt[y];return m===void 0?hr(y):m}function wt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Ht(y){return y===0?Lt(wt()):(y=jt(y),Lt(wt()[y]))}function Pn(y){y>4&&(ir[y].refcount+=1)}function pr(y,m){var C=Vt[y];return C===void 0&&qn(m+" has unknown type "+H(y)),C}function Gr(y){for(var m="",C=0;C<y;++C)m+=(C!==0?", ":"")+"arg"+C;for(var h="return function emval_allocator_"+y+`(constructor, argTypes, args) {
`,C=0;C<y;++C)h+="var argType"+C+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+C+'], "parameter '+C+`");
var arg`+C+" = argType"+C+`.readValueFromPointer(args);
args += argType`+C+`['argPackAdvance'];
`;return h+="var obj = new constructor("+m+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",h)(pr,c,Lt)}var Zn={};function tr(y){return y||qn("Cannot use deleted val. handle = "+y),ir[y].value}function zn(y,m,C,h){y=tr(y);var g=Zn[m];return g||(g=Gr(m),Zn[m]=g),g(y,C,h)}function jr(){st()}function br(y,m,C){At.copyWithin(y,m,m+C)}function Hn(y){try{return on.grow(y-mn.byteLength+65535>>>16),Pt(on.buffer),1}catch{}}function rn(y){var m=At.length;y=y>>>0;var C=2147483648;if(y>C)return!1;for(var h=1;h<=4;h*=2){var g=m*(1+.2/h);g=Math.min(g,y+100663296);var B=Math.min(C,di(Math.max(y,g),65536)),N=Hn(B);if(N)return!0}return!1}var sn={mappings:{},buffers:[null,[],[]],printChar:function(y,m){var C=sn.buffers[y];m===0||m===10?((y===1?pn:Ut)(qr(C,0)),C.length=0):C.push(m)},varargs:void 0,get:function(){sn.varargs+=4;var y=Ke[sn.varargs-4>>2];return y},getStr:function(y){var m=xr(y);return m},get64:function(y,m){return y}};function Kn(y){return 0}function mr(y,m,C,h,g){}function he(y,m,C,h){for(var g=0,B=0;B<C;B++){for(var N=Ke[m+B*8>>2],z=Ke[m+(B*8+4)>>2],x=0;x<z;x++)sn.printChar(y,At[N+x]);g+=z}return Ke[h>>2]=g,0}function ve(y){}Ir(),xn=c.BindingError=Ar(Error,"BindingError"),nr=c.InternalError=Ar(Error,"InternalError"),Gn(),b=c.UnboundTypeError=Ar(Error,"UnboundTypeError");var xe={b:dr,m:ni,r:ur,n:In,w:Or,j:jn,p:be,d:U,c:q,k:ue,g:Re,o:pt,e:Mr,l:Ht,h:Pn,i:zn,a:jr,t:br,f:rn,u:Kn,q:mr,v:he,s:ve};ft(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.y).apply(null,arguments)};var Ve=c._malloc=function(){return(Ve=c._malloc=c.asm.z).apply(null,arguments)},at=c._free=function(){return(at=c._free=c.asm.A).apply(null,arguments)},Tt=c.___getTypeName=function(){return(Tt=c.___getTypeName=c.asm.B).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.C).apply(null,arguments)},c.dynCall_iiji=function(){return(c.dynCall_iiji=c.asm.E).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.F).apply(null,arguments)};var Ot;fr=function y(){Ot||D(),Ot||(fr=y)};function D(y){if(Rn>0||(Fr(),Rn>0))return;function m(){Ot||(Ot=!0,c.calledRun=!0,!lr&&(si(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),hi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),m()},1)):m()}if(c.run=D,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return D(),c.ready}}(),de=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/jxl_node_dec-c51936e8.wasm").href:new URL("jxl_node_dec-c51936e8.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,Ie=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(x,O){Xe=x,et=O});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(x){return c.locateFile?c.locateFile(x,It):It+x}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(O,Z){return nn||(nn=ri),An||(An=ri),O=An.normalize(O),nn.readFileSync(O,Z?null:"utf8")},hn=function(O){var Z=Xt(O,!0);return Z.buffer||(Z=new Uint8Array(Z)),Pr(Z.buffer),Z},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&st("no native wasm support detected");var on,lr=!1;function Pr(x,O){x||st("Assertion failed: "+O)}var Tn=new TextDecoder("utf8");function qr(x,O,Z){for(var ce=O+Z,V=O;x[V]&&!(V>=ce);)++V;return Tn.decode(x.subarray?x.subarray(O,V):new Uint8Array(x.slice(O,V)))}function xr(x,O){if(!x)return"";for(var Z=x+O,ce=x;!(ce>=Z)&&At[ce];)++ce;return Tn.decode(At.subarray(x,ce))}function Hr(x,O,Z,ce){if(!(ce>0))return 0;for(var V=Z,S=Z+ce-1,L=0;L<x.length;++L){var J=x.charCodeAt(L);if(J>=55296&&J<=57343){var re=x.charCodeAt(++L);J=65536+((J&1023)<<10)|re&1023}if(J<=127){if(Z>=S)break;O[Z++]=J}else if(J<=2047){if(Z+1>=S)break;O[Z++]=192|J>>6,O[Z++]=128|J&63}else if(J<=65535){if(Z+2>=S)break;O[Z++]=224|J>>12,O[Z++]=128|J>>6&63,O[Z++]=128|J&63}else{if(Z+3>=S)break;O[Z++]=240|J>>18,O[Z++]=128|J>>12&63,O[Z++]=128|J>>6&63,O[Z++]=128|J&63}}return O[Z]=0,Z-V}function oi(x,O,Z){return Hr(x,At,O,Z)}function ti(x){for(var O=0,Z=0;Z<x.length;++Z){var ce=x.charCodeAt(Z);ce>=55296&&ce<=57343&&(ce=65536+((ce&1023)<<10)|x.charCodeAt(++Z)&1023),ce<=127?++O:ce<=2047?O+=2:ce<=65535?O+=3:O+=4}return O}var Mi=new TextDecoder("utf-16le");function Ti(x,O){for(var Z=x,ce=Z>>1,V=ce+O/2;!(ce>=V)&&Wt[ce];)++ce;return Z=ce<<1,Mi.decode(At.subarray(x,Z))}function Di(x,O,Z){if(Z===void 0&&(Z=2147483647),Z<2)return 0;Z-=2;for(var ce=O,V=Z<x.length*2?Z/2:x.length,S=0;S<V;++S){var L=x.charCodeAt(S);cn[O>>1]=L,O+=2}return cn[O>>1]=0,O-ce}function Ri(x){return x.length*2}function Ii(x,O){for(var Z=0,ce="";!(Z>=O/4);){var V=Ke[x+Z*4>>2];if(V==0)break;if(++Z,V>=65536){var S=V-65536;ce+=String.fromCharCode(55296|S>>10,56320|S&1023)}else ce+=String.fromCharCode(V)}return ce}function li(x,O,Z){if(Z===void 0&&(Z=2147483647),Z<4)return 0;for(var ce=O,V=ce+Z-4,S=0;S<x.length;++S){var L=x.charCodeAt(S);if(L>=55296&&L<=57343){var J=x.charCodeAt(++S);L=65536+((L&1023)<<10)|J&1023}if(Ke[O>>2]=L,O+=4,O+4>V)break}return Ke[O>>2]=0,O-ce}function fi(x){for(var O=0,Z=0;Z<x.length;++Z){var ce=x.charCodeAt(Z);ce>=55296&&ce<=57343&&++Z,O+=4}return O}function di(x,O){return x%O>0&&(x+=O-x%O),x}var mn,Ln,At,cn,Wt,Ke,gt,$n,vt;function Pt(x){mn=x,c.HEAP8=Ln=new Int8Array(x),c.HEAP16=cn=new Int16Array(x),c.HEAP32=Ke=new Int32Array(x),c.HEAPU8=At=new Uint8Array(x),c.HEAPU16=Wt=new Uint16Array(x),c.HEAPU32=gt=new Uint32Array(x),c.HEAPF32=$n=new Float32Array(x),c.HEAPF64=vt=new Float64Array(x)}c.INITIAL_MEMORY;var an,Wr=[],Vr=[],On=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Sn(Wr)}function si(){Sn(Vr)}function hi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Yr(c.postRun.shift());Sn(On)}function wi(x){Wr.unshift(x)}function Lr(x){Vr.unshift(x)}function Yr(x){On.unshift(x)}var Rn=0,fr=null;function $r(x){Rn++,c.monitorRunDependencies&&c.monitorRunDependencies(Rn)}function er(x){if(Rn--,c.monitorRunDependencies&&c.monitorRunDependencies(Rn),Rn==0&&fr){var O=fr;fr=null,O()}}c.preloadedImages={},c.preloadedAudios={};function st(x){c.onAbort&&c.onAbort(x),x+="",Ut(x),lr=!0,x="abort("+x+"). Build with -s ASSERTIONS=1 for more info.";var O=new WebAssembly.RuntimeError(x);throw et(O),O}var $="data:application/octet-stream;base64,";function oe(x){return x.startsWith($)}if(c.locateFile){var pe="wp2_node_enc.wasm";oe(pe)||(pe=Rt(pe))}else var pe=new URL("wp2_node_enc.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(x){try{if(x==pe&&Gt)return new Uint8Array(Gt);if(hn)return hn(x);throw"both async and sync fetching of the wasm failed"}catch(O){st(O)}}function Ze(){return!Gt&&qt&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(x){if(!x.ok)throw"failed to load wasm binary file at '"+pe+"'";return x.arrayBuffer()}).catch(function(){return Me(pe)}):Promise.resolve().then(function(){return Me(pe)})}function ft(){var x={a:C};function O(L,J){var re=L.exports;c.asm=re,on=c.asm.C,Pt(on.buffer),an=c.asm.I,Lr(c.asm.D),er()}$r();function Z(L){O(L.instance)}function ce(L){return Ze().then(function(J){var re=WebAssembly.instantiate(J,x);return re}).then(L,function(J){Ut("failed to asynchronously prepare wasm: "+J),st(J)})}function V(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!oe(pe)&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(L){var J=WebAssembly.instantiateStreaming(L,x);return J.then(Z,function(re){return Ut("wasm streaming compile failed: "+re),Ut("falling back to ArrayBuffer instantiation"),ce(Z)})}):ce(Z)}if(c.instantiateWasm)try{var S=c.instantiateWasm(x,O);return S}catch(L){return Ut("Module.instantiateWasm callback failed with error: "+L),!1}return V().catch(et),{}}function Sn(x){for(;x.length>0;){var O=x.shift();if(typeof O=="function"){O(c);continue}var Z=O.func;typeof Z=="number"?O.arg===void 0?an.get(Z)():an.get(Z)(O.arg):Z(O.arg===void 0?null:O.arg)}}function dr(x,O,Z,ce){st("Assertion failed: "+xr(x)+", at: "+[O?xr(O):"unknown filename",Z,ce?xr(ce):"unknown function"])}var Wn={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ni(x){return g(x+Wn.SIZE)+Wn.SIZE}function ur(x,O){}function Br(x,O){return void 0}function Ir(x){this.excPtr=x,this.ptr=x-Wn.SIZE,this.set_type=function(O){Ke[this.ptr+Wn.TYPE_OFFSET>>2]=O},this.get_type=function(){return Ke[this.ptr+Wn.TYPE_OFFSET>>2]},this.set_destructor=function(O){Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]=O},this.get_destructor=function(){return Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(O){Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=O},this.set_caught=function(O){O=O?1:0,Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]=O},this.get_caught=function(){return Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(O){O=O?1:0,Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]=O},this.get_rethrown=function(){return Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]!=0},this.init=function(O,Z){this.set_type(O),this.set_destructor(Z),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var O=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=O+1},this.release_ref=function(){var O=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];return Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=O-1,O===1}}function Er(x,O,Z){var ce=new Ir(x);throw ce.init(O,Z),x}var hr={};function cr(x){for(;x.length;){var O=x.pop(),Z=x.pop();Z(O)}}function Vt(x){return this.fromWireType(gt[x>>2])}var ln={},Nn={},gn={},Ft=48,Jn=57;function Ar(x){if(x===void 0)return"_unknown";x=x.replace(/[^a-zA-Z0-9_]/g,"$");var O=x.charCodeAt(0);return O>=Ft&&O<=Jn?"_"+x:x}function xn(x,O){return x=Ar(x),new Function("body","return function "+x+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(O)}function qn(x,O){var Z=xn(O,function(ce){this.name=O,this.message=ce;var V=new Error(ce).stack;V!==void 0&&(this.stack=this.toString()+`
`+V.replace(/^Error(:[^\n]*)?\n/,""))});return Z.prototype=Object.create(x.prototype),Z.prototype.constructor=Z,Z.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Z}var nr=void 0;function Mt(x){throw new nr(x)}function Vn(x,O,Z){x.forEach(function(J){gn[J]=O});function ce(J){var re=Z(J);re.length!==x.length&&Mt("Mismatched type converter count");for(var G=0;G<x.length;++G)Lt(x[G],re[G])}var V=new Array(O.length),S=[],L=0;O.forEach(function(J,re){Nn.hasOwnProperty(J)?V[re]=Nn[J]:(S.push(J),ln.hasOwnProperty(J)||(ln[J]=[]),ln[J].push(function(){V[re]=Nn[J],++L,L===S.length&&ce(V)}))}),S.length===0&&ce(V)}function yn(x){var O=hr[x];delete hr[x];var Z=O.rawConstructor,ce=O.rawDestructor,V=O.fields,S=V.map(function(L){return L.getterReturnType}).concat(V.map(function(L){return L.setterArgumentType}));Vn([x],S,function(L){var J={};return V.forEach(function(re,G){var X=re.fieldName,te=L[G],le=re.getter,we=re.getterContext,$e=L[G+V.length],dt=re.setter,tt=re.setterContext;J[X]={read:function(mt){return te.fromWireType(le(we,mt))},write:function(mt,Kt){var ie=[];dt(tt,mt,$e.toWireType(ie,Kt)),cr(ie)}}}),[{name:O.name,fromWireType:function(re){var G={};for(var X in J)G[X]=J[X].read(re);return ce(re),G},toWireType:function(re,G){for(var X in J)if(!(X in G))throw new TypeError('Missing field:  "'+X+'"');var te=Z();for(X in J)J[X].write(te,G[X]);return re!==null&&re.push(ce,te),te},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:ce}]})}function In(x,O,Z,ce,V){}function Un(x){switch(x){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+x)}}function ir(){for(var x=new Array(256),O=0;O<256;++O)x[O]=String.fromCharCode(O);Mr=x}var Mr=void 0;function fn(x){for(var O="",Z=x;At[Z];)O+=Mr[At[Z++]];return O}var Xn=void 0;function Gn(x){throw new Xn(x)}function Lt(x,O,Z){if(Z=Z||{},!("argPackAdvance"in O))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ce=O.name;if(x||Gn('type "'+ce+'" must have a positive integer typeid pointer'),Nn.hasOwnProperty(x)){if(Z.ignoreDuplicateRegistrations)return;Gn("Cannot register type '"+ce+"' twice")}if(Nn[x]=O,delete gn[x],ln.hasOwnProperty(x)){var V=ln[x];delete ln[x],V.forEach(function(S){S()})}}function or(x,O,Z,ce,V){var S=Un(Z);O=fn(O),Lt(x,{name:O,fromWireType:function(L){return!!L},toWireType:function(L,J){return J?ce:V},argPackAdvance:8,readValueFromPointer:function(L){var J;if(Z===1)J=Ln;else if(Z===2)J=cn;else if(Z===4)J=Ke;else throw new TypeError("Unknown boolean type size: "+O);return this.fromWireType(J[L>>S])},destructorFunction:null})}var Or=[],bn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tr(x){x>4&&--bn[x].refcount===0&&(bn[x]=void 0,Or.push(x))}function jn(){for(var x=0,O=5;O<bn.length;++O)bn[O]!==void 0&&++x;return x}function Nr(){for(var x=5;x<bn.length;++x)if(bn[x]!==void 0)return bn[x];return null}function pi(){c.count_emval_handles=jn,c.get_first_emval=Nr}function Ur(x){switch(x){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var O=Or.length?Or.pop():bn.length;return bn[O]={refcount:1,value:x},O}}}function Dr(x,O){O=fn(O),Lt(x,{name:O,fromWireType:function(Z){var ce=bn[Z].value;return Tr(Z),ce},toWireType:function(Z,ce){return Ur(ce)},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:null})}function ai(x){if(x===null)return"null";var O=typeof x;return O==="object"||O==="array"||O==="function"?x.toString():""+x}function Oi(x,O){switch(O){case 2:return function(Z){return this.fromWireType($n[Z>>2])};case 3:return function(Z){return this.fromWireType(vt[Z>>3])};default:throw new TypeError("Unknown float type: "+x)}}function ui(x,O,Z){var ce=Un(Z);O=fn(O),Lt(x,{name:O,fromWireType:function(V){return V},toWireType:function(V,S){if(typeof S!="number"&&typeof S!="boolean")throw new TypeError('Cannot convert "'+ai(S)+'" to '+this.name);return S},argPackAdvance:8,readValueFromPointer:Oi(O,ce),destructorFunction:null})}function Pi(x,O){if(!(x instanceof Function))throw new TypeError("new_ called with constructor type "+typeof x+" which is not a function");var Z=xn(x.name||"unknownFunctionName",function(){});Z.prototype=x.prototype;var ce=new Z,V=x.apply(ce,O);return V instanceof Object?V:ce}function Ci(x,O,Z,ce,V){var S=O.length;S<2&&Gn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var L=O[1]!==null&&Z!==null,J=!1,re=1;re<O.length;++re)if(O[re]!==null&&O[re].destructorFunction===void 0){J=!0;break}for(var G=O[0].name!=="void",X="",te="",re=0;re<S-2;++re)X+=(re!==0?", ":"")+"arg"+re,te+=(re!==0?", ":"")+"arg"+re+"Wired";var le="return function "+Ar(x)+"("+X+`) {
if (arguments.length !== `+(S-2)+`) {
throwBindingError('function `+x+" called with ' + arguments.length + ' arguments, expected "+(S-2)+` args!');
}
`;J&&(le+=`var destructors = [];
`);var we=J?"destructors":"null",$e=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],dt=[Gn,ce,V,cr,O[0],O[1]];L&&(le+="var thisWired = classParam.toWireType("+we+`, this);
`);for(var re=0;re<S-2;++re)le+="var arg"+re+"Wired = argType"+re+".toWireType("+we+", arg"+re+"); // "+O[re+2].name+`
`,$e.push("argType"+re),dt.push(O[re+2]);if(L&&(te="thisWired"+(te.length>0?", ":"")+te),le+=(G?"var rv = ":"")+"invoker(fn"+(te.length>0?", ":"")+te+`);
`,J)le+=`runDestructors(destructors);
`;else for(var re=L?1:2;re<O.length;++re){var tt=re===1?"thisWired":"arg"+(re-2)+"Wired";O[re].destructorFunction!==null&&(le+=tt+"_dtor("+tt+"); // "+O[re].name+`
`,$e.push(tt+"_dtor"),dt.push(O[re].destructorFunction))}G&&(le+=`var ret = retType.fromWireType(rv);
return ret;
`),le+=`}
`,$e.push(le);var mt=Pi(Function,$e).apply(null,dt);return mt}function Ni(x,O,Z){if(x[O].overloadTable===void 0){var ce=x[O];x[O]=function(){return x[O].overloadTable.hasOwnProperty(arguments.length)||Gn("Function '"+Z+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+x[O].overloadTable+")!"),x[O].overloadTable[arguments.length].apply(this,arguments)},x[O].overloadTable=[],x[O].overloadTable[ce.argCount]=ce}}function Si(x,O,Z){c.hasOwnProperty(x)?((Z===void 0||c[x].overloadTable!==void 0&&c[x].overloadTable[Z]!==void 0)&&Gn("Cannot register public name '"+x+"' twice"),Ni(c,x,x),c.hasOwnProperty(Z)&&Gn("Cannot register multiple overloads of a function with the same number of arguments ("+Z+")!"),c[x].overloadTable[Z]=O):(c[x]=O,Z!==void 0&&(c[x].numArguments=Z))}function b(x,O){for(var Z=[],ce=0;ce<x;ce++)Z.push(Ke[(O>>2)+ce]);return Z}function H(x,O,Z){c.hasOwnProperty(x)||Mt("Replacing nonexistant public symbol"),c[x].overloadTable!==void 0&&Z!==void 0?c[x].overloadTable[Z]=O:(c[x]=O,c[x].argCount=Z)}function se(x,O,Z){var ce=c["dynCall_"+x];return Z&&Z.length?ce.apply(null,[O].concat(Z)):ce.call(null,O)}function be(x,O,Z){return x.includes("j")?se(x,O,Z):an.get(O).apply(null,Z)}function De(x,O){var Z=[];return function(){Z.length=arguments.length;for(var ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];return be(x,O,Z)}}function U(x,O){x=fn(x);function Z(){return x.includes("j")?De(x,O):an.get(O)}var ce=Z();return typeof ce!="function"&&Gn("unknown function pointer with signature "+x+": "+O),ce}var q=void 0;function ue(x){var O=B(x),Z=fn(O);return h(O),Z}function Re(x,O){var Z=[],ce={};function V(S){if(!ce[S]&&!Nn[S]){if(gn[S]){gn[S].forEach(V);return}Z.push(S),ce[S]=!0}}throw O.forEach(V),new q(x+": "+Z.map(ue).join([", "]))}function pt(x,O,Z,ce,V,S){var L=b(O,Z);x=fn(x),V=U(ce,V),Si(x,function(){Re("Cannot call "+x+" due to unbound types",L)},O-1),Vn([],L,function(J){var re=[J[0],null].concat(J.slice(1));return H(x,Ci(x,re,null,V,S),O-1),[]})}function yt(x,O,Z){switch(O){case 0:return Z?function(V){return Ln[V]}:function(V){return At[V]};case 1:return Z?function(V){return cn[V>>1]}:function(V){return Wt[V>>1]};case 2:return Z?function(V){return Ke[V>>2]}:function(V){return gt[V>>2]};default:throw new TypeError("Unknown integer type: "+x)}}function jt(x,O,Z,ce,V){O=fn(O),V===-1&&(V=4294967295);var S=Un(Z),L=function(G){return G};if(ce===0){var J=32-8*Z;L=function(G){return G<<J>>>J}}var re=O.includes("unsigned");Lt(x,{name:O,fromWireType:L,toWireType:function(G,X){if(typeof X!="number"&&typeof X!="boolean")throw new TypeError('Cannot convert "'+ai(X)+'" to '+this.name);if(X<ce||X>V)throw new TypeError('Passing a number "'+ai(X)+'" from JS side to C/C++ side to an argument of type "'+O+'", which is outside the valid range ['+ce+", "+V+"]!");return re?X>>>0:X|0},argPackAdvance:8,readValueFromPointer:yt(O,S,ce!==0),destructorFunction:null})}function wt(x,O,Z){var ce=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],V=ce[O];function S(L){L=L>>2;var J=gt,re=J[L],G=J[L+1];return new V(mn,G,re)}Z=fn(Z),Lt(x,{name:Z,fromWireType:S,argPackAdvance:8,readValueFromPointer:S},{ignoreDuplicateRegistrations:!0})}function Ht(x,O){O=fn(O);var Z=O==="std::string";Lt(x,{name:O,fromWireType:function(ce){var V=gt[ce>>2],S;if(Z)for(var L=ce+4,J=0;J<=V;++J){var re=ce+4+J;if(J==V||At[re]==0){var G=re-L,X=xr(L,G);S===void 0?S=X:(S+=String.fromCharCode(0),S+=X),L=re+1}}else{for(var te=new Array(V),J=0;J<V;++J)te[J]=String.fromCharCode(At[ce+4+J]);S=te.join("")}return h(ce),S},toWireType:function(ce,V){V instanceof ArrayBuffer&&(V=new Uint8Array(V));var S,L=typeof V=="string";L||V instanceof Uint8Array||V instanceof Uint8ClampedArray||V instanceof Int8Array||Gn("Cannot pass non-string to std::string"),Z&&L?S=function(){return ti(V)}:S=function(){return V.length};var J=S(),re=g(4+J+1);if(gt[re>>2]=J,Z&&L)oi(V,re+4,J+1);else if(L)for(var G=0;G<J;++G){var X=V.charCodeAt(G);X>255&&(h(re),Gn("String has UTF-16 code units that do not fit in 8 bits")),At[re+4+G]=X}else for(var G=0;G<J;++G)At[re+4+G]=V[G];return ce!==null&&ce.push(h,re),re},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:function(ce){h(ce)}})}function Pn(x,O,Z){Z=fn(Z);var ce,V,S,L,J;O===2?(ce=Ti,V=Di,L=Ri,S=function(){return Wt},J=1):O===4&&(ce=Ii,V=li,L=fi,S=function(){return gt},J=2),Lt(x,{name:Z,fromWireType:function(re){for(var G=gt[re>>2],X=S(),te,le=re+4,we=0;we<=G;++we){var $e=re+4+we*O;if(we==G||X[$e>>J]==0){var dt=$e-le,tt=ce(le,dt);te===void 0?te=tt:(te+=String.fromCharCode(0),te+=tt),le=$e+O}}return h(re),te},toWireType:function(re,G){typeof G!="string"&&Gn("Cannot pass non-string to C++ string type "+Z);var X=L(G),te=g(4+X+O);return gt[te>>2]=X>>J,V(G,te+4,X+O),re!==null&&re.push(h,te),te},argPackAdvance:8,readValueFromPointer:Vt,destructorFunction:function(re){h(re)}})}function pr(x,O,Z,ce,V,S){hr[x]={name:fn(O),rawConstructor:U(Z,ce),rawDestructor:U(V,S),fields:[]}}function Gr(x,O,Z,ce,V,S,L,J,re,G){hr[x].fields.push({fieldName:fn(O),getterReturnType:Z,getter:U(ce,V),getterContext:S,setterArgumentType:L,setter:U(J,re),setterContext:G})}function Zn(x,O){O=fn(O),Lt(x,{isVoid:!0,name:O,argPackAdvance:0,fromWireType:function(){},toWireType:function(Z,ce){}})}var tr={};function zn(x){var O=tr[x];return O===void 0?fn(x):O}function jr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function br(x){return x===0?Ur(jr()):(x=zn(x),Ur(jr()[x]))}function Hn(x){x>4&&(bn[x].refcount+=1)}function rn(x,O){var Z=Nn[x];return Z===void 0&&Gn(O+" has unknown type "+ue(x)),Z}function sn(x){for(var O="",Z=0;Z<x;++Z)O+=(Z!==0?", ":"")+"arg"+Z;for(var ce="return function emval_allocator_"+x+`(constructor, argTypes, args) {
`,Z=0;Z<x;++Z)ce+="var argType"+Z+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+Z+'], "parameter '+Z+`");
var arg`+Z+" = argType"+Z+`.readValueFromPointer(args);
args += argType`+Z+`['argPackAdvance'];
`;return ce+="var obj = new constructor("+O+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",ce)(rn,c,Ur)}var Kn={};function mr(x){return x||Gn("Cannot use deleted val. handle = "+x),bn[x].value}function he(x,O,Z,ce){x=mr(x);var V=Kn[O];return V||(V=sn(O),Kn[O]=V),V(x,Z,ce)}function ve(){st()}function xe(x,O,Z){At.copyWithin(x,O,O+Z)}function Ve(x){try{return on.grow(x-mn.byteLength+65535>>>16),Pt(on.buffer),1}catch{}}function at(x){var O=At.length;x=x>>>0;var Z=2147483648;if(x>Z)return!1;for(var ce=1;ce<=4;ce*=2){var V=O*(1+.2/ce);V=Math.min(V,x+100663296);var S=Math.min(Z,di(Math.max(x,V),65536)),L=Ve(S);if(L)return!0}return!1}var Tt={mappings:{},buffers:[null,[],[]],printChar:function(x,O){var Z=Tt.buffers[x];O===0||O===10?((x===1?pn:Ut)(qr(Z,0)),Z.length=0):Z.push(O)},varargs:void 0,get:function(){Tt.varargs+=4;var x=Ke[Tt.varargs-4>>2];return x},getStr:function(x){var O=xr(x);return O},get64:function(x,O){return x}};function Ot(x){return 0}function D(x,O,Z,ce,V){}function y(x,O,Z,ce){for(var V=0,S=0;S<Z;S++){for(var L=Ke[O+S*8>>2],J=Ke[O+(S*8+4)>>2],re=0;re<J;re++)Tt.printChar(x,At[L+re]);V+=J}return Ke[ce>>2]=V,0}function m(x){}nr=c.InternalError=qn(Error,"InternalError"),ir(),Xn=c.BindingError=qn(Error,"BindingError"),pi(),q=c.UnboundTypeError=qn(Error,"UnboundTypeError");var C={o:dr,z:ni,B:Br,y:Er,l:yn,q:In,w:or,v:Dr,h:ui,k:pt,c:jt,a:wt,i:Ht,e:Pn,m:pr,b:Gr,x:Zn,g:Tr,A:br,j:Hn,n:he,f:ve,s:xe,d:at,u:Ot,p:D,t:y,r:m};ft(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.D).apply(null,arguments)};var h=c._free=function(){return(h=c._free=c.asm.E).apply(null,arguments)},g=c._malloc=function(){return(g=c._malloc=c.asm.F).apply(null,arguments)},B=c.___getTypeName=function(){return(B=c.___getTypeName=c.asm.G).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.H).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.J).apply(null,arguments)};var N;fr=function x(){N||z(),N||(fr=x)};function z(x){if(Rn>0||(Fr(),Rn>0))return;function O(){N||(N=!0,c.calledRun=!0,!lr&&(si(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),hi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),O()},1)):O()}if(c.run=z,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return z(),c.ready}}(),Pe=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/wp2_node_enc-683ca61a.wasm").href:new URL("wp2_node_enc-683ca61a.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,Te=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(m,C){Xe=m,et=C});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(m){return c.locateFile?c.locateFile(m,It):It+m}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(C,h){return nn||(nn=ri),An||(An=ri),C=An.normalize(C),nn.readFileSync(C,h?null:"utf8")},hn=function(C){var h=Xt(C,!0);return h.buffer||(h=new Uint8Array(h)),Pr(h.buffer),h},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&st("no native wasm support detected");var on,lr=!1;function Pr(m,C){m||st("Assertion failed: "+C)}var Tn=new TextDecoder("utf8");function qr(m,C,h){for(var g=C+h,B=C;m[B]&&!(B>=g);)++B;return Tn.decode(m.subarray?m.subarray(C,B):new Uint8Array(m.slice(C,B)))}function xr(m,C){if(!m)return"";for(var h=m+C,g=m;!(g>=h)&&At[g];)++g;return Tn.decode(At.subarray(m,g))}function Hr(m,C,h,g){if(!(g>0))return 0;for(var B=h,N=h+g-1,z=0;z<m.length;++z){var x=m.charCodeAt(z);if(x>=55296&&x<=57343){var O=m.charCodeAt(++z);x=65536+((x&1023)<<10)|O&1023}if(x<=127){if(h>=N)break;C[h++]=x}else if(x<=2047){if(h+1>=N)break;C[h++]=192|x>>6,C[h++]=128|x&63}else if(x<=65535){if(h+2>=N)break;C[h++]=224|x>>12,C[h++]=128|x>>6&63,C[h++]=128|x&63}else{if(h+3>=N)break;C[h++]=240|x>>18,C[h++]=128|x>>12&63,C[h++]=128|x>>6&63,C[h++]=128|x&63}}return C[h]=0,h-B}function oi(m,C,h){return Hr(m,At,C,h)}function ti(m){for(var C=0,h=0;h<m.length;++h){var g=m.charCodeAt(h);g>=55296&&g<=57343&&(g=65536+((g&1023)<<10)|m.charCodeAt(++h)&1023),g<=127?++C:g<=2047?C+=2:g<=65535?C+=3:C+=4}return C}var Mi=new TextDecoder("utf-16le");function Ti(m,C){for(var h=m,g=h>>1,B=g+C/2;!(g>=B)&&Wt[g];)++g;return h=g<<1,Mi.decode(At.subarray(m,h))}function Di(m,C,h){if(h===void 0&&(h=2147483647),h<2)return 0;h-=2;for(var g=C,B=h<m.length*2?h/2:m.length,N=0;N<B;++N){var z=m.charCodeAt(N);cn[C>>1]=z,C+=2}return cn[C>>1]=0,C-g}function Ri(m){return m.length*2}function Ii(m,C){for(var h=0,g="";!(h>=C/4);){var B=Ke[m+h*4>>2];if(B==0)break;if(++h,B>=65536){var N=B-65536;g+=String.fromCharCode(55296|N>>10,56320|N&1023)}else g+=String.fromCharCode(B)}return g}function li(m,C,h){if(h===void 0&&(h=2147483647),h<4)return 0;for(var g=C,B=g+h-4,N=0;N<m.length;++N){var z=m.charCodeAt(N);if(z>=55296&&z<=57343){var x=m.charCodeAt(++N);z=65536+((z&1023)<<10)|x&1023}if(Ke[C>>2]=z,C+=4,C+4>B)break}return Ke[C>>2]=0,C-g}function fi(m){for(var C=0,h=0;h<m.length;++h){var g=m.charCodeAt(h);g>=55296&&g<=57343&&++h,C+=4}return C}function di(m,C){return m%C>0&&(m+=C-m%C),m}var mn,Ln,At,cn,Wt,Ke,gt,$n,vt;function Pt(m){mn=m,c.HEAP8=Ln=new Int8Array(m),c.HEAP16=cn=new Int16Array(m),c.HEAP32=Ke=new Int32Array(m),c.HEAPU8=At=new Uint8Array(m),c.HEAPU16=Wt=new Uint16Array(m),c.HEAPU32=gt=new Uint32Array(m),c.HEAPF32=$n=new Float32Array(m),c.HEAPF64=vt=new Float64Array(m)}c.INITIAL_MEMORY;var an,Wr=[],Vr=[],On=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Sn(Wr)}function si(){Sn(Vr)}function hi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Yr(c.postRun.shift());Sn(On)}function wi(m){Wr.unshift(m)}function Lr(m){Vr.unshift(m)}function Yr(m){On.unshift(m)}var Rn=0,fr=null;function $r(m){Rn++,c.monitorRunDependencies&&c.monitorRunDependencies(Rn)}function er(m){if(Rn--,c.monitorRunDependencies&&c.monitorRunDependencies(Rn),Rn==0&&fr){var C=fr;fr=null,C()}}c.preloadedImages={},c.preloadedAudios={};function st(m){c.onAbort&&c.onAbort(m),m+="",Ut(m),lr=!0,m="abort("+m+"). Build with -s ASSERTIONS=1 for more info.";var C=new WebAssembly.RuntimeError(m);throw et(C),C}var $="data:application/octet-stream;base64,";function oe(m){return m.startsWith($)}if(c.locateFile){var pe="wp2_node_dec.wasm";oe(pe)||(pe=Rt(pe))}else var pe=new URL("wp2_node_dec.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(m){try{if(m==pe&&Gt)return new Uint8Array(Gt);if(hn)return hn(m);throw"both async and sync fetching of the wasm failed"}catch(C){st(C)}}function Ze(){return!Gt&&qt&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(m){if(!m.ok)throw"failed to load wasm binary file at '"+pe+"'";return m.arrayBuffer()}).catch(function(){return Me(pe)}):Promise.resolve().then(function(){return Me(pe)})}function ft(){var m={a:Ve};function C(z,x){var O=z.exports;c.asm=O,on=c.asm.w,Pt(on.buffer),an=c.asm.C,Lr(c.asm.x),er()}$r();function h(z){C(z.instance)}function g(z){return Ze().then(function(x){var O=WebAssembly.instantiate(x,m);return O}).then(z,function(x){Ut("failed to asynchronously prepare wasm: "+x),st(x)})}function B(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!oe(pe)&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(z){var x=WebAssembly.instantiateStreaming(z,m);return x.then(h,function(O){return Ut("wasm streaming compile failed: "+O),Ut("falling back to ArrayBuffer instantiation"),g(h)})}):g(h)}if(c.instantiateWasm)try{var N=c.instantiateWasm(m,C);return N}catch(z){return Ut("Module.instantiateWasm callback failed with error: "+z),!1}return B().catch(et),{}}function Sn(m){for(;m.length>0;){var C=m.shift();if(typeof C=="function"){C(c);continue}var h=C.func;typeof h=="number"?C.arg===void 0?an.get(h)():an.get(h)(C.arg):h(C.arg===void 0?null:C.arg)}}var dr={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Wn(m){return Tt(m+dr.SIZE)+dr.SIZE}function ni(m,C){}function ur(m,C){return void 0}function Br(m){this.excPtr=m,this.ptr=m-dr.SIZE,this.set_type=function(C){Ke[this.ptr+dr.TYPE_OFFSET>>2]=C},this.get_type=function(){return Ke[this.ptr+dr.TYPE_OFFSET>>2]},this.set_destructor=function(C){Ke[this.ptr+dr.DESTRUCTOR_OFFSET>>2]=C},this.get_destructor=function(){return Ke[this.ptr+dr.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(C){Ke[this.ptr+dr.REFCOUNT_OFFSET>>2]=C},this.set_caught=function(C){C=C?1:0,Ln[this.ptr+dr.CAUGHT_OFFSET>>0]=C},this.get_caught=function(){return Ln[this.ptr+dr.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(C){C=C?1:0,Ln[this.ptr+dr.RETHROWN_OFFSET>>0]=C},this.get_rethrown=function(){return Ln[this.ptr+dr.RETHROWN_OFFSET>>0]!=0},this.init=function(C,h){this.set_type(C),this.set_destructor(h),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var C=Ke[this.ptr+dr.REFCOUNT_OFFSET>>2];Ke[this.ptr+dr.REFCOUNT_OFFSET>>2]=C+1},this.release_ref=function(){var C=Ke[this.ptr+dr.REFCOUNT_OFFSET>>2];return Ke[this.ptr+dr.REFCOUNT_OFFSET>>2]=C-1,C===1}}function Ir(m,C,h){var g=new Br(m);throw g.init(C,h),m}function Er(m,C,h,g,B){}function hr(m){switch(m){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+m)}}function cr(){for(var m=new Array(256),C=0;C<256;++C)m[C]=String.fromCharCode(C);Vt=m}var Vt=void 0;function ln(m){for(var C="",h=m;At[h];)C+=Vt[At[h++]];return C}var Nn={},gn={},Ft={},Jn=48,Ar=57;function xn(m){if(m===void 0)return"_unknown";m=m.replace(/[^a-zA-Z0-9_]/g,"$");var C=m.charCodeAt(0);return C>=Jn&&C<=Ar?"_"+m:m}function qn(m,C){return m=xn(m),new Function("body","return function "+m+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(C)}function nr(m,C){var h=qn(C,function(g){this.name=C,this.message=g;var B=new Error(g).stack;B!==void 0&&(this.stack=this.toString()+`
`+B.replace(/^Error(:[^\n]*)?\n/,""))});return h.prototype=Object.create(m.prototype),h.prototype.constructor=h,h.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},h}var Mt=void 0;function Vn(m){throw new Mt(m)}var yn=void 0;function In(m){throw new yn(m)}function Un(m,C,h){m.forEach(function(x){Ft[x]=C});function g(x){var O=h(x);O.length!==m.length&&In("Mismatched type converter count");for(var Z=0;Z<m.length;++Z)ir(m[Z],O[Z])}var B=new Array(C.length),N=[],z=0;C.forEach(function(x,O){gn.hasOwnProperty(x)?B[O]=gn[x]:(N.push(x),Nn.hasOwnProperty(x)||(Nn[x]=[]),Nn[x].push(function(){B[O]=gn[x],++z,z===N.length&&g(B)}))}),N.length===0&&g(B)}function ir(m,C,h){if(h=h||{},!("argPackAdvance"in C))throw new TypeError("registerType registeredInstance requires argPackAdvance");var g=C.name;if(m||Vn('type "'+g+'" must have a positive integer typeid pointer'),gn.hasOwnProperty(m)){if(h.ignoreDuplicateRegistrations)return;Vn("Cannot register type '"+g+"' twice")}if(gn[m]=C,delete Ft[m],Nn.hasOwnProperty(m)){var B=Nn[m];delete Nn[m],B.forEach(function(N){N()})}}function Mr(m,C,h,g,B){var N=hr(h);C=ln(C),ir(m,{name:C,fromWireType:function(z){return!!z},toWireType:function(z,x){return x?g:B},argPackAdvance:8,readValueFromPointer:function(z){var x;if(h===1)x=Ln;else if(h===2)x=cn;else if(h===4)x=Ke;else throw new TypeError("Unknown boolean type size: "+C);return this.fromWireType(x[z>>N])},destructorFunction:null})}var fn=[],Xn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Gn(m){m>4&&--Xn[m].refcount===0&&(Xn[m]=void 0,fn.push(m))}function Lt(){for(var m=0,C=5;C<Xn.length;++C)Xn[C]!==void 0&&++m;return m}function or(){for(var m=5;m<Xn.length;++m)if(Xn[m]!==void 0)return Xn[m];return null}function Or(){c.count_emval_handles=Lt,c.get_first_emval=or}function bn(m){switch(m){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var C=fn.length?fn.pop():Xn.length;return Xn[C]={refcount:1,value:m},C}}}function Tr(m){return this.fromWireType(gt[m>>2])}function jn(m,C){C=ln(C),ir(m,{name:C,fromWireType:function(h){var g=Xn[h].value;return Gn(h),g},toWireType:function(h,g){return bn(g)},argPackAdvance:8,readValueFromPointer:Tr,destructorFunction:null})}function Nr(m){if(m===null)return"null";var C=typeof m;return C==="object"||C==="array"||C==="function"?m.toString():""+m}function pi(m,C){switch(C){case 2:return function(h){return this.fromWireType($n[h>>2])};case 3:return function(h){return this.fromWireType(vt[h>>3])};default:throw new TypeError("Unknown float type: "+m)}}function Ur(m,C,h){var g=hr(h);C=ln(C),ir(m,{name:C,fromWireType:function(B){return B},toWireType:function(B,N){if(typeof N!="number"&&typeof N!="boolean")throw new TypeError('Cannot convert "'+Nr(N)+'" to '+this.name);return N},argPackAdvance:8,readValueFromPointer:pi(C,g),destructorFunction:null})}function Dr(m,C){if(!(m instanceof Function))throw new TypeError("new_ called with constructor type "+typeof m+" which is not a function");var h=qn(m.name||"unknownFunctionName",function(){});h.prototype=m.prototype;var g=new h,B=m.apply(g,C);return B instanceof Object?B:g}function ai(m){for(;m.length;){var C=m.pop(),h=m.pop();h(C)}}function Oi(m,C,h,g,B){var N=C.length;N<2&&Vn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var z=C[1]!==null&&h!==null,x=!1,O=1;O<C.length;++O)if(C[O]!==null&&C[O].destructorFunction===void 0){x=!0;break}for(var Z=C[0].name!=="void",ce="",V="",O=0;O<N-2;++O)ce+=(O!==0?", ":"")+"arg"+O,V+=(O!==0?", ":"")+"arg"+O+"Wired";var S="return function "+xn(m)+"("+ce+`) {
if (arguments.length !== `+(N-2)+`) {
throwBindingError('function `+m+" called with ' + arguments.length + ' arguments, expected "+(N-2)+` args!');
}
`;x&&(S+=`var destructors = [];
`);var L=x?"destructors":"null",J=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],re=[Vn,g,B,ai,C[0],C[1]];z&&(S+="var thisWired = classParam.toWireType("+L+`, this);
`);for(var O=0;O<N-2;++O)S+="var arg"+O+"Wired = argType"+O+".toWireType("+L+", arg"+O+"); // "+C[O+2].name+`
`,J.push("argType"+O),re.push(C[O+2]);if(z&&(V="thisWired"+(V.length>0?", ":"")+V),S+=(Z?"var rv = ":"")+"invoker(fn"+(V.length>0?", ":"")+V+`);
`,x)S+=`runDestructors(destructors);
`;else for(var O=z?1:2;O<C.length;++O){var G=O===1?"thisWired":"arg"+(O-2)+"Wired";C[O].destructorFunction!==null&&(S+=G+"_dtor("+G+"); // "+C[O].name+`
`,J.push(G+"_dtor"),re.push(C[O].destructorFunction))}Z&&(S+=`var ret = retType.fromWireType(rv);
return ret;
`),S+=`}
`,J.push(S);var X=Dr(Function,J).apply(null,re);return X}function ui(m,C,h){if(m[C].overloadTable===void 0){var g=m[C];m[C]=function(){return m[C].overloadTable.hasOwnProperty(arguments.length)||Vn("Function '"+h+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+m[C].overloadTable+")!"),m[C].overloadTable[arguments.length].apply(this,arguments)},m[C].overloadTable=[],m[C].overloadTable[g.argCount]=g}}function Pi(m,C,h){c.hasOwnProperty(m)?((h===void 0||c[m].overloadTable!==void 0&&c[m].overloadTable[h]!==void 0)&&Vn("Cannot register public name '"+m+"' twice"),ui(c,m,m),c.hasOwnProperty(h)&&Vn("Cannot register multiple overloads of a function with the same number of arguments ("+h+")!"),c[m].overloadTable[h]=C):(c[m]=C,h!==void 0&&(c[m].numArguments=h))}function Ci(m,C){for(var h=[],g=0;g<m;g++)h.push(Ke[(C>>2)+g]);return h}function Ni(m,C,h){c.hasOwnProperty(m)||In("Replacing nonexistant public symbol"),c[m].overloadTable!==void 0&&h!==void 0?c[m].overloadTable[h]=C:(c[m]=C,c[m].argCount=h)}function Si(m,C,h){var g=c["dynCall_"+m];return h&&h.length?g.apply(null,[C].concat(h)):g.call(null,C)}function b(m,C,h){return m.includes("j")?Si(m,C,h):an.get(C).apply(null,h)}function H(m,C){var h=[];return function(){h.length=arguments.length;for(var g=0;g<arguments.length;g++)h[g]=arguments[g];return b(m,C,h)}}function se(m,C){m=ln(m);function h(){return m.includes("j")?H(m,C):an.get(C)}var g=h();return typeof g!="function"&&Vn("unknown function pointer with signature "+m+": "+C),g}var be=void 0;function De(m){var C=Ot(m),h=ln(C);return at(C),h}function U(m,C){var h=[],g={};function B(N){if(!g[N]&&!gn[N]){if(Ft[N]){Ft[N].forEach(B);return}h.push(N),g[N]=!0}}throw C.forEach(B),new be(m+": "+h.map(De).join([", "]))}function q(m,C,h,g,B,N){var z=Ci(C,h);m=ln(m),B=se(g,B),Pi(m,function(){U("Cannot call "+m+" due to unbound types",z)},C-1),Un([],z,function(x){var O=[x[0],null].concat(x.slice(1));return Ni(m,Oi(m,O,null,B,N),C-1),[]})}function ue(m,C,h){switch(C){case 0:return h?function(B){return Ln[B]}:function(B){return At[B]};case 1:return h?function(B){return cn[B>>1]}:function(B){return Wt[B>>1]};case 2:return h?function(B){return Ke[B>>2]}:function(B){return gt[B>>2]};default:throw new TypeError("Unknown integer type: "+m)}}function Re(m,C,h,g,B){C=ln(C),B===-1&&(B=4294967295);var N=hr(h),z=function(Z){return Z};if(g===0){var x=32-8*h;z=function(Z){return Z<<x>>>x}}var O=C.includes("unsigned");ir(m,{name:C,fromWireType:z,toWireType:function(Z,ce){if(typeof ce!="number"&&typeof ce!="boolean")throw new TypeError('Cannot convert "'+Nr(ce)+'" to '+this.name);if(ce<g||ce>B)throw new TypeError('Passing a number "'+Nr(ce)+'" from JS side to C/C++ side to an argument of type "'+C+'", which is outside the valid range ['+g+", "+B+"]!");return O?ce>>>0:ce|0},argPackAdvance:8,readValueFromPointer:ue(C,N,g!==0),destructorFunction:null})}function pt(m,C,h){var g=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],B=g[C];function N(z){z=z>>2;var x=gt,O=x[z],Z=x[z+1];return new B(mn,Z,O)}h=ln(h),ir(m,{name:h,fromWireType:N,argPackAdvance:8,readValueFromPointer:N},{ignoreDuplicateRegistrations:!0})}function yt(m,C){C=ln(C);var h=C==="std::string";ir(m,{name:C,fromWireType:function(g){var B=gt[g>>2],N;if(h)for(var z=g+4,x=0;x<=B;++x){var O=g+4+x;if(x==B||At[O]==0){var Z=O-z,ce=xr(z,Z);N===void 0?N=ce:(N+=String.fromCharCode(0),N+=ce),z=O+1}}else{for(var V=new Array(B),x=0;x<B;++x)V[x]=String.fromCharCode(At[g+4+x]);N=V.join("")}return at(g),N},toWireType:function(g,B){B instanceof ArrayBuffer&&(B=new Uint8Array(B));var N,z=typeof B=="string";z||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int8Array||Vn("Cannot pass non-string to std::string"),h&&z?N=function(){return ti(B)}:N=function(){return B.length};var x=N(),O=Tt(4+x+1);if(gt[O>>2]=x,h&&z)oi(B,O+4,x+1);else if(z)for(var Z=0;Z<x;++Z){var ce=B.charCodeAt(Z);ce>255&&(at(O),Vn("String has UTF-16 code units that do not fit in 8 bits")),At[O+4+Z]=ce}else for(var Z=0;Z<x;++Z)At[O+4+Z]=B[Z];return g!==null&&g.push(at,O),O},argPackAdvance:8,readValueFromPointer:Tr,destructorFunction:function(g){at(g)}})}function jt(m,C,h){h=ln(h);var g,B,N,z,x;C===2?(g=Ti,B=Di,z=Ri,N=function(){return Wt},x=1):C===4&&(g=Ii,B=li,z=fi,N=function(){return gt},x=2),ir(m,{name:h,fromWireType:function(O){for(var Z=gt[O>>2],ce=N(),V,S=O+4,L=0;L<=Z;++L){var J=O+4+L*C;if(L==Z||ce[J>>x]==0){var re=J-S,G=g(S,re);V===void 0?V=G:(V+=String.fromCharCode(0),V+=G),S=J+C}}return at(O),V},toWireType:function(O,Z){typeof Z!="string"&&Vn("Cannot pass non-string to C++ string type "+h);var ce=z(Z),V=Tt(4+ce+C);return gt[V>>2]=ce>>x,B(Z,V+4,ce+C),O!==null&&O.push(at,V),V},argPackAdvance:8,readValueFromPointer:Tr,destructorFunction:function(O){at(O)}})}function wt(m,C){C=ln(C),ir(m,{isVoid:!0,name:C,argPackAdvance:0,fromWireType:function(){},toWireType:function(h,g){}})}var Ht={};function Pn(m){var C=Ht[m];return C===void 0?ln(m):C}function pr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Gr(m){return m===0?bn(pr()):(m=Pn(m),bn(pr()[m]))}function Zn(m){m>4&&(Xn[m].refcount+=1)}function tr(m,C){var h=gn[m];return h===void 0&&Vn(C+" has unknown type "+De(m)),h}function zn(m){for(var C="",h=0;h<m;++h)C+=(h!==0?", ":"")+"arg"+h;for(var g="return function emval_allocator_"+m+`(constructor, argTypes, args) {
`,h=0;h<m;++h)g+="var argType"+h+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+h+'], "parameter '+h+`");
var arg`+h+" = argType"+h+`.readValueFromPointer(args);
args += argType`+h+`['argPackAdvance'];
`;return g+="var obj = new constructor("+C+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",g)(tr,c,bn)}var jr={};function br(m){return m||Vn("Cannot use deleted val. handle = "+m),Xn[m].value}function Hn(m,C,h,g){m=br(m);var B=jr[C];return B||(B=zn(C),jr[C]=B),B(m,h,g)}function rn(){st()}function sn(m,C,h){At.copyWithin(m,C,C+h)}function Kn(m){try{return on.grow(m-mn.byteLength+65535>>>16),Pt(on.buffer),1}catch{}}function mr(m){var C=At.length;m=m>>>0;var h=2147483648;if(m>h)return!1;for(var g=1;g<=4;g*=2){var B=C*(1+.2/g);B=Math.min(B,m+100663296);var N=Math.min(h,di(Math.max(m,B),65536)),z=Kn(N);if(z)return!0}return!1}var he={mappings:{},buffers:[null,[],[]],printChar:function(m,C){var h=he.buffers[m];C===0||C===10?((m===1?pn:Ut)(qr(h,0)),h.length=0):h.push(C)},varargs:void 0,get:function(){he.varargs+=4;var m=Ke[he.varargs-4>>2];return m},getStr:function(m){var C=xr(m);return C},get64:function(m,C){return m}};function ve(m,C,h,g){for(var B=0,N=0;N<h;N++){for(var z=Ke[C+N*8>>2],x=Ke[C+(N*8+4)>>2],O=0;O<x;O++)he.printChar(m,At[z+O]);B+=x}return Ke[g>>2]=B,0}function xe(m){}cr(),Mt=c.BindingError=nr(Error,"BindingError"),yn=c.InternalError=nr(Error,"InternalError"),Or(),be=c.UnboundTypeError=nr(Error,"UnboundTypeError");var Ve={p:Wn,e:ur,o:Ir,r:Er,m:Mr,v:jn,k:Ur,q,b:Re,a:pt,l:yt,g:jt,n:wt,c:Gn,d:Gr,h:Zn,i:Hn,j:rn,t:sn,f:mr,u:ve,s:xe};ft(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.x).apply(null,arguments)};var at=c._free=function(){return(at=c._free=c.asm.y).apply(null,arguments)},Tt=c._malloc=function(){return(Tt=c._malloc=c.asm.z).apply(null,arguments)},Ot=c.___getTypeName=function(){return(Ot=c.___getTypeName=c.asm.A).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.B).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.D).apply(null,arguments)};var D;fr=function m(){D||y(),D||(fr=m)};function y(m){if(Rn>0||(Fr(),Rn>0))return;function C(){D||(D=!0,c.calledRun=!0,!lr&&(si(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),hi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),C()},1)):C()}if(c.run=y,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return y(),c.ready}}(),Ee=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/wp2_node_dec-87bef8e5.wasm").href:new URL("wp2_node_dec-87bef8e5.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;let Se,Oe=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Oe.decode();let We=null;function j(){return(We===null||We.buffer!==Se.memory.buffer)&&(We=new Uint8Array(Se.memory.buffer)),We}function _t(Ge,c){return Oe.decode(j().subarray(Ge,Ge+c))}let Qe=null;function Je(){return(Qe===null||Qe.buffer!==Se.memory.buffer)&&(Qe=new Uint8ClampedArray(Se.memory.buffer)),Qe}function ze(Ge,c){return Je().subarray(Ge/1,Ge/1+c)}const ct=new Array(32).fill(void 0);ct.push(void 0,null,!0,!1);let He=ct.length;function P(Ge){He===ct.length&&ct.push(ct.length+1);const c=He;return He=ct[c],ct[c]=Ge,c}let nt=0;function Fn(Ge,c){const Xe=c(Ge.length*1);return j().set(Ge,Xe/1),nt=Ge.length,Xe}let Yt=null;function kn(){return(Yt===null||Yt.buffer!==Se.memory.buffer)&&(Yt=new Int32Array(Se.memory.buffer)),Yt}function Et(Ge,c){return j().subarray(Ge/1,Ge/1+c)}function dn(Ge,c,Xe){try{const Rt=Se.__wbindgen_add_to_stack_pointer(-16);var et=Fn(Ge,Se.__wbindgen_malloc),it=nt;Se.encode(Rt,et,it,c,Xe);var je=kn()[Rt/4+0],qt=kn()[Rt/4+1],It=Et(je,qt).slice();return Se.__wbindgen_free(je,qt*1),It}finally{Se.__wbindgen_add_to_stack_pointer(16)}}function $t(Ge){return ct[Ge]}function vn(Ge){Ge<36||(ct[Ge]=He,He=Ge)}function Cr(Ge){const c=$t(Ge);return vn(Ge),c}function Qr(Ge){var c=Fn(Ge,Se.__wbindgen_malloc),Xe=nt,et=Se.decode(c,Xe);return Cr(et)}async function yi(Ge,c){if(typeof Response=="function"&&Ge instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(Ge,c)}catch(et){if(Ge.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",et);else throw et}const Xe=await Ge.arrayBuffer();return await WebAssembly.instantiate(Xe,c)}else{const Xe=await WebAssembly.instantiate(Ge,c);return Xe instanceof WebAssembly.Instance?{instance:Xe,module:Ge}:Xe}}async function Li(Ge){typeof Ge>"u"&&(Ge=new URL("squoosh_png_bg.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href));const c={};c.wbg={},c.wbg.__wbg_newwithownedu8clampedarrayandsh_787b2db8ea6bfd62=function(it,je,qt,It){var Rt=ze(it,je).slice();Se.__wbindgen_free(it,je*1);var Xt=new ImageData(Rt,qt>>>0,It>>>0);return P(Xt)},c.wbg.__wbindgen_throw=function(it,je){throw new Error(_t(it,je))},(typeof Ge=="string"||typeof Request=="function"&&Ge instanceof Request||typeof URL=="function"&&Ge instanceof URL)&&(Ge=fetch(Ge));const{instance:Xe,module:et}=await yi(await Ge,c);return Se=Xe.exports,Li.__wbindgen_wasm_module=et,Se}var Sr=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/squoosh_png_bg-afa2f8d4.wasm").href:new URL("squoosh_png_bg-afa2f8d4.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;let Mn,vi=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});vi.decode();let ar=null;function Ae(){return(ar===null||ar.buffer!==Mn.memory.buffer)&&(ar=new Uint8Array(Mn.memory.buffer)),ar}function fe(Ge,c){return vi.decode(Ae().subarray(Ge,Ge+c))}let ot=0;function St(Ge,c){const Xe=c(Ge.length*1);return Ae().set(Ge,Xe/1),ot=Ge.length,Xe}let Dt=null;function Nt(){return(Dt===null||Dt.buffer!==Mn.memory.buffer)&&(Dt=new Int32Array(Mn.memory.buffer)),Dt}function _n(Ge,c){return Ae().subarray(Ge/1,Ge/1+c)}function Ce(Ge,c,Xe){try{const Rt=Mn.__wbindgen_add_to_stack_pointer(-16);var et=St(Ge,Mn.__wbindgen_malloc),it=ot;Mn.optimise(Rt,et,it,c,Xe);var je=Nt()[Rt/4+0],qt=Nt()[Rt/4+1],It=_n(je,qt).slice();return Mn.__wbindgen_free(je,qt*1),It}finally{Mn.__wbindgen_add_to_stack_pointer(16)}}async function Ne(Ge,c){if(typeof Response=="function"&&Ge instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(Ge,c)}catch(et){if(Ge.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",et);else throw et}const Xe=await Ge.arrayBuffer();return await WebAssembly.instantiate(Xe,c)}else{const Xe=await WebAssembly.instantiate(Ge,c);return Xe instanceof WebAssembly.Instance?{instance:Xe,module:Ge}:Xe}}async function Jt(Ge){typeof Ge>"u"&&(Ge=new URL("squoosh_oxipng_bg.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href));const c={};c.wbg={},c.wbg.__wbindgen_throw=function(it,je){throw new Error(fe(it,je))},(typeof Ge=="string"||typeof Request=="function"&&Ge instanceof Request||typeof URL=="function"&&Ge instanceof URL)&&(Ge=fetch(Ge));const{instance:Xe,module:et}=await Ne(await Ge,c);return Mn=Xe.exports,Jt.__wbindgen_wasm_module=et,Mn}var Zt=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/squoosh_oxipng_bg-bb6b7672.wasm").href:new URL("squoosh_oxipng_bg-bb6b7672.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;let Bt,zt=null;function Qt(){return(zt===null||zt.buffer!==Bt.memory.buffer)&&(zt=new Uint8Array(Bt.memory.buffer)),zt}let rr=0;function Cn(Ge,c){const Xe=c(Ge.length*1);return Qt().set(Ge,Xe/1),rr=Ge.length,Xe}let Kr=null;function Fe(){return(Kr===null||Kr.buffer!==Bt.memory.buffer)&&(Kr=new Int32Array(Bt.memory.buffer)),Kr}let rt=null;function Ct(){return(rt===null||rt.buffer!==Bt.memory.buffer)&&(rt=new Uint8ClampedArray(Bt.memory.buffer)),rt}function en(Ge,c){return Ct().subarray(Ge/1,Ge/1+c)}function En(Ge,c,Xe,et,it,je,qt,It){try{const pn=Bt.__wbindgen_add_to_stack_pointer(-16);var Rt=Cn(Ge,Bt.__wbindgen_malloc),Xt=rr;Bt.resize(pn,Rt,Xt,c,Xe,et,it,je,qt,It);var hn=Fe()[pn/4+0],nn=Fe()[pn/4+1],An=en(hn,nn).slice();return Bt.__wbindgen_free(hn,nn*1),An}finally{Bt.__wbindgen_add_to_stack_pointer(16)}}async function Jr(Ge,c){if(typeof Response=="function"&&Ge instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(Ge,c)}catch(et){if(Ge.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",et);else throw et}const Xe=await Ge.arrayBuffer();return await WebAssembly.instantiate(Xe,c)}else{const Xe=await WebAssembly.instantiate(Ge,c);return Xe instanceof WebAssembly.Instance?{instance:Xe,module:Ge}:Xe}}async function ki(Ge){typeof Ge>"u"&&(Ge=new URL("squoosh_resize_bg.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href));const c={};(typeof Ge=="string"||typeof Request=="function"&&Ge instanceof Request||typeof URL=="function"&&Ge instanceof URL)&&(Ge=fetch(Ge));const{instance:Xe,module:et}=await Jr(await Ge,c);return Bt=Xe.exports,ki.__wbindgen_wasm_module=et,Bt}var Hi=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/squoosh_resize_bg-3d426466.wasm").href:new URL("squoosh_resize_bg-3d426466.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,$i=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/rotate-e8fb6784.wasm").href:new URL("rotate-e8fb6784.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href,ci=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(D,y){Xe=D,et=y});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(D){return c.locateFile?c.locateFile(D,It):It+D}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(y,m){return nn||(nn=ri),An||(An=ri),y=An.normalize(y),nn.readFileSync(y,m?null:"utf8")},hn=function(y){var m=Xt(y,!0);return m.buffer||(m=new Uint8Array(m)),Pr(m.buffer),m},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&st("no native wasm support detected");var on,lr=!1;function Pr(D,y){D||st("Assertion failed: "+y)}var Tn=new TextDecoder("utf8");function qr(D,y,m){for(var C=y+m,h=y;D[h]&&!(h>=C);)++h;return Tn.decode(D.subarray?D.subarray(y,h):new Uint8Array(D.slice(y,h)))}function xr(D,y){if(!D)return"";for(var m=D+y,C=D;!(C>=m)&&At[C];)++C;return Tn.decode(At.subarray(D,C))}function Hr(D,y,m,C){if(!(C>0))return 0;for(var h=m,g=m+C-1,B=0;B<D.length;++B){var N=D.charCodeAt(B);if(N>=55296&&N<=57343){var z=D.charCodeAt(++B);N=65536+((N&1023)<<10)|z&1023}if(N<=127){if(m>=g)break;y[m++]=N}else if(N<=2047){if(m+1>=g)break;y[m++]=192|N>>6,y[m++]=128|N&63}else if(N<=65535){if(m+2>=g)break;y[m++]=224|N>>12,y[m++]=128|N>>6&63,y[m++]=128|N&63}else{if(m+3>=g)break;y[m++]=240|N>>18,y[m++]=128|N>>12&63,y[m++]=128|N>>6&63,y[m++]=128|N&63}}return y[m]=0,m-h}function oi(D,y,m){return Hr(D,At,y,m)}function ti(D){for(var y=0,m=0;m<D.length;++m){var C=D.charCodeAt(m);C>=55296&&C<=57343&&(C=65536+((C&1023)<<10)|D.charCodeAt(++m)&1023),C<=127?++y:C<=2047?y+=2:C<=65535?y+=3:y+=4}return y}var Mi=new TextDecoder("utf-16le");function Ti(D,y){for(var m=D,C=m>>1,h=C+y/2;!(C>=h)&&Wt[C];)++C;return m=C<<1,Mi.decode(At.subarray(D,m))}function Di(D,y,m){if(m===void 0&&(m=2147483647),m<2)return 0;m-=2;for(var C=y,h=m<D.length*2?m/2:D.length,g=0;g<h;++g){var B=D.charCodeAt(g);cn[y>>1]=B,y+=2}return cn[y>>1]=0,y-C}function Ri(D){return D.length*2}function Ii(D,y){for(var m=0,C="";!(m>=y/4);){var h=Ke[D+m*4>>2];if(h==0)break;if(++m,h>=65536){var g=h-65536;C+=String.fromCharCode(55296|g>>10,56320|g&1023)}else C+=String.fromCharCode(h)}return C}function li(D,y,m){if(m===void 0&&(m=2147483647),m<4)return 0;for(var C=y,h=C+m-4,g=0;g<D.length;++g){var B=D.charCodeAt(g);if(B>=55296&&B<=57343){var N=D.charCodeAt(++g);B=65536+((B&1023)<<10)|N&1023}if(Ke[y>>2]=B,y+=4,y+4>h)break}return Ke[y>>2]=0,y-C}function fi(D){for(var y=0,m=0;m<D.length;++m){var C=D.charCodeAt(m);C>=55296&&C<=57343&&++m,y+=4}return y}function di(D,y){return D%y>0&&(D+=y-D%y),D}var mn,Ln,At,cn,Wt,Ke,gt,$n,vt;function Pt(D){mn=D,c.HEAP8=Ln=new Int8Array(D),c.HEAP16=cn=new Int16Array(D),c.HEAP32=Ke=new Int32Array(D),c.HEAPU8=At=new Uint8Array(D),c.HEAPU16=Wt=new Uint16Array(D),c.HEAPU32=gt=new Uint32Array(D),c.HEAPF32=$n=new Float32Array(D),c.HEAPF64=vt=new Float64Array(D)}c.INITIAL_MEMORY;var an,Wr=[],Vr=[],On=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Sn(Wr)}function si(){Sn(Vr)}function hi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Yr(c.postRun.shift());Sn(On)}function wi(D){Wr.unshift(D)}function Lr(D){Vr.unshift(D)}function Yr(D){On.unshift(D)}var Rn=0,fr=null;function $r(D){Rn++,c.monitorRunDependencies&&c.monitorRunDependencies(Rn)}function er(D){if(Rn--,c.monitorRunDependencies&&c.monitorRunDependencies(Rn),Rn==0&&fr){var y=fr;fr=null,y()}}c.preloadedImages={},c.preloadedAudios={};function st(D){c.onAbort&&c.onAbort(D),D+="",Ut(D),lr=!0,D="abort("+D+"). Build with -s ASSERTIONS=1 for more info.";var y=new WebAssembly.RuntimeError(D);throw et(y),y}var $="data:application/octet-stream;base64,";function oe(D){return D.startsWith($)}if(c.locateFile){var pe="imagequant_node.wasm";oe(pe)||(pe=Rt(pe))}else var pe=new URL("imagequant_node.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(D){try{if(D==pe&&Gt)return new Uint8Array(Gt);if(hn)return hn(D);throw"both async and sync fetching of the wasm failed"}catch(y){st(y)}}function Ze(){return!Gt&&qt&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(D){if(!D.ok)throw"failed to load wasm binary file at '"+pe+"'";return D.arrayBuffer()}).catch(function(){return Me(pe)}):Promise.resolve().then(function(){return Me(pe)})}function ft(){var D={a:ve};function y(B,N){var z=B.exports;c.asm=z,on=c.asm.w,Pt(on.buffer),an=c.asm.C,Lr(c.asm.x),er()}$r();function m(B){y(B.instance)}function C(B){return Ze().then(function(N){var z=WebAssembly.instantiate(N,D);return z}).then(B,function(N){Ut("failed to asynchronously prepare wasm: "+N),st(N)})}function h(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!oe(pe)&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(B){var N=WebAssembly.instantiateStreaming(B,D);return N.then(m,function(z){return Ut("wasm streaming compile failed: "+z),Ut("falling back to ArrayBuffer instantiation"),C(m)})}):C(m)}if(c.instantiateWasm)try{var g=c.instantiateWasm(D,y);return g}catch(B){return Ut("Module.instantiateWasm callback failed with error: "+B),!1}return h().catch(et),{}}function Sn(D){for(;D.length>0;){var y=D.shift();if(typeof y=="function"){y(c);continue}var m=y.func;typeof m=="number"?y.arg===void 0?an.get(m)():an.get(m)(y.arg):m(y.arg===void 0?null:y.arg)}}function dr(D,y){}function Wn(D,y){return void 0}function ni(D,y,m,C,h){}function ur(D){switch(D){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+D)}}function Br(){for(var D=new Array(256),y=0;y<256;++y)D[y]=String.fromCharCode(y);Ir=D}var Ir=void 0;function Er(D){for(var y="",m=D;At[m];)y+=Ir[At[m++]];return y}var hr={},cr={},Vt={},ln=48,Nn=57;function gn(D){if(D===void 0)return"_unknown";D=D.replace(/[^a-zA-Z0-9_]/g,"$");var y=D.charCodeAt(0);return y>=ln&&y<=Nn?"_"+D:D}function Ft(D,y){return D=gn(D),new Function("body","return function "+D+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(y)}function Jn(D,y){var m=Ft(y,function(C){this.name=y,this.message=C;var h=new Error(C).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return m.prototype=Object.create(D.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},m}var Ar=void 0;function xn(D){throw new Ar(D)}var qn=void 0;function nr(D){throw new qn(D)}function Mt(D,y,m){D.forEach(function(N){Vt[N]=y});function C(N){var z=m(N);z.length!==D.length&&nr("Mismatched type converter count");for(var x=0;x<D.length;++x)Vn(D[x],z[x])}var h=new Array(y.length),g=[],B=0;y.forEach(function(N,z){cr.hasOwnProperty(N)?h[z]=cr[N]:(g.push(N),hr.hasOwnProperty(N)||(hr[N]=[]),hr[N].push(function(){h[z]=cr[N],++B,B===g.length&&C(h)}))}),g.length===0&&C(h)}function Vn(D,y,m){if(m=m||{},!("argPackAdvance"in y))throw new TypeError("registerType registeredInstance requires argPackAdvance");var C=y.name;if(D||xn('type "'+C+'" must have a positive integer typeid pointer'),cr.hasOwnProperty(D)){if(m.ignoreDuplicateRegistrations)return;xn("Cannot register type '"+C+"' twice")}if(cr[D]=y,delete Vt[D],hr.hasOwnProperty(D)){var h=hr[D];delete hr[D],h.forEach(function(g){g()})}}function yn(D,y,m,C,h){var g=ur(m);y=Er(y),Vn(D,{name:y,fromWireType:function(B){return!!B},toWireType:function(B,N){return N?C:h},argPackAdvance:8,readValueFromPointer:function(B){var N;if(m===1)N=Ln;else if(m===2)N=cn;else if(m===4)N=Ke;else throw new TypeError("Unknown boolean type size: "+y);return this.fromWireType(N[B>>g])},destructorFunction:null})}var In=[],Un=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ir(D){D>4&&--Un[D].refcount===0&&(Un[D]=void 0,In.push(D))}function Mr(){for(var D=0,y=5;y<Un.length;++y)Un[y]!==void 0&&++D;return D}function fn(){for(var D=5;D<Un.length;++D)if(Un[D]!==void 0)return Un[D];return null}function Xn(){c.count_emval_handles=Mr,c.get_first_emval=fn}function Gn(D){switch(D){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var y=In.length?In.pop():Un.length;return Un[y]={refcount:1,value:D},y}}}function Lt(D){return this.fromWireType(gt[D>>2])}function or(D,y){y=Er(y),Vn(D,{name:y,fromWireType:function(m){var C=Un[m].value;return ir(m),C},toWireType:function(m,C){return Gn(C)},argPackAdvance:8,readValueFromPointer:Lt,destructorFunction:null})}function Or(D){if(D===null)return"null";var y=typeof D;return y==="object"||y==="array"||y==="function"?D.toString():""+D}function bn(D,y){switch(y){case 2:return function(m){return this.fromWireType($n[m>>2])};case 3:return function(m){return this.fromWireType(vt[m>>3])};default:throw new TypeError("Unknown float type: "+D)}}function Tr(D,y,m){var C=ur(m);y=Er(y),Vn(D,{name:y,fromWireType:function(h){return h},toWireType:function(h,g){if(typeof g!="number"&&typeof g!="boolean")throw new TypeError('Cannot convert "'+Or(g)+'" to '+this.name);return g},argPackAdvance:8,readValueFromPointer:bn(y,C),destructorFunction:null})}function jn(D,y){if(!(D instanceof Function))throw new TypeError("new_ called with constructor type "+typeof D+" which is not a function");var m=Ft(D.name||"unknownFunctionName",function(){});m.prototype=D.prototype;var C=new m,h=D.apply(C,y);return h instanceof Object?h:C}function Nr(D){for(;D.length;){var y=D.pop(),m=D.pop();m(y)}}function pi(D,y,m,C,h){var g=y.length;g<2&&xn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var B=y[1]!==null&&m!==null,N=!1,z=1;z<y.length;++z)if(y[z]!==null&&y[z].destructorFunction===void 0){N=!0;break}for(var x=y[0].name!=="void",O="",Z="",z=0;z<g-2;++z)O+=(z!==0?", ":"")+"arg"+z,Z+=(z!==0?", ":"")+"arg"+z+"Wired";var ce="return function "+gn(D)+"("+O+`) {
if (arguments.length !== `+(g-2)+`) {
throwBindingError('function `+D+" called with ' + arguments.length + ' arguments, expected "+(g-2)+` args!');
}
`;N&&(ce+=`var destructors = [];
`);var V=N?"destructors":"null",S=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],L=[xn,C,h,Nr,y[0],y[1]];B&&(ce+="var thisWired = classParam.toWireType("+V+`, this);
`);for(var z=0;z<g-2;++z)ce+="var arg"+z+"Wired = argType"+z+".toWireType("+V+", arg"+z+"); // "+y[z+2].name+`
`,S.push("argType"+z),L.push(y[z+2]);if(B&&(Z="thisWired"+(Z.length>0?", ":"")+Z),ce+=(x?"var rv = ":"")+"invoker(fn"+(Z.length>0?", ":"")+Z+`);
`,N)ce+=`runDestructors(destructors);
`;else for(var z=B?1:2;z<y.length;++z){var J=z===1?"thisWired":"arg"+(z-2)+"Wired";y[z].destructorFunction!==null&&(ce+=J+"_dtor("+J+"); // "+y[z].name+`
`,S.push(J+"_dtor"),L.push(y[z].destructorFunction))}x&&(ce+=`var ret = retType.fromWireType(rv);
return ret;
`),ce+=`}
`,S.push(ce);var re=jn(Function,S).apply(null,L);return re}function Ur(D,y,m){if(D[y].overloadTable===void 0){var C=D[y];D[y]=function(){return D[y].overloadTable.hasOwnProperty(arguments.length)||xn("Function '"+m+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+D[y].overloadTable+")!"),D[y].overloadTable[arguments.length].apply(this,arguments)},D[y].overloadTable=[],D[y].overloadTable[C.argCount]=C}}function Dr(D,y,m){c.hasOwnProperty(D)?((m===void 0||c[D].overloadTable!==void 0&&c[D].overloadTable[m]!==void 0)&&xn("Cannot register public name '"+D+"' twice"),Ur(c,D,D),c.hasOwnProperty(m)&&xn("Cannot register multiple overloads of a function with the same number of arguments ("+m+")!"),c[D].overloadTable[m]=y):(c[D]=y,m!==void 0&&(c[D].numArguments=m))}function ai(D,y){for(var m=[],C=0;C<D;C++)m.push(Ke[(y>>2)+C]);return m}function Oi(D,y,m){c.hasOwnProperty(D)||nr("Replacing nonexistant public symbol"),c[D].overloadTable!==void 0&&m!==void 0?c[D].overloadTable[m]=y:(c[D]=y,c[D].argCount=m)}function ui(D,y,m){var C=c["dynCall_"+D];return m&&m.length?C.apply(null,[y].concat(m)):C.call(null,y)}function Pi(D,y,m){return D.includes("j")?ui(D,y,m):an.get(y).apply(null,m)}function Ci(D,y){var m=[];return function(){m.length=arguments.length;for(var C=0;C<arguments.length;C++)m[C]=arguments[C];return Pi(D,y,m)}}function Ni(D,y){D=Er(D);function m(){return D.includes("j")?Ci(D,y):an.get(y)}var C=m();return typeof C!="function"&&xn("unknown function pointer with signature "+D+": "+y),C}var Si=void 0;function b(D){var y=at(D),m=Er(y);return Ve(y),m}function H(D,y){var m=[],C={};function h(g){if(!C[g]&&!cr[g]){if(Vt[g]){Vt[g].forEach(h);return}m.push(g),C[g]=!0}}throw y.forEach(h),new Si(D+": "+m.map(b).join([", "]))}function se(D,y,m,C,h,g){var B=ai(y,m);D=Er(D),h=Ni(C,h),Dr(D,function(){H("Cannot call "+D+" due to unbound types",B)},y-1),Mt([],B,function(N){var z=[N[0],null].concat(N.slice(1));return Oi(D,pi(D,z,null,h,g),y-1),[]})}function be(D,y,m){switch(y){case 0:return m?function(h){return Ln[h]}:function(h){return At[h]};case 1:return m?function(h){return cn[h>>1]}:function(h){return Wt[h>>1]};case 2:return m?function(h){return Ke[h>>2]}:function(h){return gt[h>>2]};default:throw new TypeError("Unknown integer type: "+D)}}function De(D,y,m,C,h){y=Er(y),h===-1&&(h=4294967295);var g=ur(m),B=function(x){return x};if(C===0){var N=32-8*m;B=function(x){return x<<N>>>N}}var z=y.includes("unsigned");Vn(D,{name:y,fromWireType:B,toWireType:function(x,O){if(typeof O!="number"&&typeof O!="boolean")throw new TypeError('Cannot convert "'+Or(O)+'" to '+this.name);if(O<C||O>h)throw new TypeError('Passing a number "'+Or(O)+'" from JS side to C/C++ side to an argument of type "'+y+'", which is outside the valid range ['+C+", "+h+"]!");return z?O>>>0:O|0},argPackAdvance:8,readValueFromPointer:be(y,g,C!==0),destructorFunction:null})}function U(D,y,m){var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=C[y];function g(B){B=B>>2;var N=gt,z=N[B],x=N[B+1];return new h(mn,x,z)}m=Er(m),Vn(D,{name:m,fromWireType:g,argPackAdvance:8,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})}function q(D,y){y=Er(y);var m=y==="std::string";Vn(D,{name:y,fromWireType:function(C){var h=gt[C>>2],g;if(m)for(var B=C+4,N=0;N<=h;++N){var z=C+4+N;if(N==h||At[z]==0){var x=z-B,O=xr(B,x);g===void 0?g=O:(g+=String.fromCharCode(0),g+=O),B=z+1}}else{for(var Z=new Array(h),N=0;N<h;++N)Z[N]=String.fromCharCode(At[C+4+N]);g=Z.join("")}return Ve(C),g},toWireType:function(C,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,B=typeof h=="string";B||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||xn("Cannot pass non-string to std::string"),m&&B?g=function(){return ti(h)}:g=function(){return h.length};var N=g(),z=xe(4+N+1);if(gt[z>>2]=N,m&&B)oi(h,z+4,N+1);else if(B)for(var x=0;x<N;++x){var O=h.charCodeAt(x);O>255&&(Ve(z),xn("String has UTF-16 code units that do not fit in 8 bits")),At[z+4+x]=O}else for(var x=0;x<N;++x)At[z+4+x]=h[x];return C!==null&&C.push(Ve,z),z},argPackAdvance:8,readValueFromPointer:Lt,destructorFunction:function(C){Ve(C)}})}function ue(D,y,m){m=Er(m);var C,h,g,B,N;y===2?(C=Ti,h=Di,B=Ri,g=function(){return Wt},N=1):y===4&&(C=Ii,h=li,B=fi,g=function(){return gt},N=2),Vn(D,{name:m,fromWireType:function(z){for(var x=gt[z>>2],O=g(),Z,ce=z+4,V=0;V<=x;++V){var S=z+4+V*y;if(V==x||O[S>>N]==0){var L=S-ce,J=C(ce,L);Z===void 0?Z=J:(Z+=String.fromCharCode(0),Z+=J),ce=S+y}}return Ve(z),Z},toWireType:function(z,x){typeof x!="string"&&xn("Cannot pass non-string to C++ string type "+m);var O=B(x),Z=xe(4+O+y);return gt[Z>>2]=O>>N,h(x,Z+4,O+y),z!==null&&z.push(Ve,Z),Z},argPackAdvance:8,readValueFromPointer:Lt,destructorFunction:function(z){Ve(z)}})}function Re(D,y){y=Er(y),Vn(D,{isVoid:!0,name:y,argPackAdvance:0,fromWireType:function(){},toWireType:function(m,C){}})}var pt={};function yt(D){var y=pt[D];return y===void 0?Er(D):y}function jt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function wt(D){return D===0?Gn(jt()):(D=yt(D),Gn(jt()[D]))}function Ht(D){D>4&&(Un[D].refcount+=1)}function Pn(D,y){var m=cr[D];return m===void 0&&xn(y+" has unknown type "+b(D)),m}function pr(D){for(var y="",m=0;m<D;++m)y+=(m!==0?", ":"")+"arg"+m;for(var C="return function emval_allocator_"+D+`(constructor, argTypes, args) {
`,m=0;m<D;++m)C+="var argType"+m+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+m+'], "parameter '+m+`");
var arg`+m+" = argType"+m+`.readValueFromPointer(args);
args += argType`+m+`['argPackAdvance'];
`;return C+="var obj = new constructor("+y+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",C)(Pn,c,Gn)}var Gr={};function Zn(D){return D||xn("Cannot use deleted val. handle = "+D),Un[D].value}function tr(D,y,m,C){D=Zn(D);var h=Gr[y];return h||(h=pr(y),Gr[y]=h),h(D,m,C)}function zn(){st()}function jr(D,y,m){At.copyWithin(D,y,y+m)}function br(D){try{return on.grow(D-mn.byteLength+65535>>>16),Pt(on.buffer),1}catch{}}function Hn(D){var y=At.length;D=D>>>0;var m=2147483648;if(D>m)return!1;for(var C=1;C<=4;C*=2){var h=y*(1+.2/C);h=Math.min(h,D+100663296);var g=Math.min(m,di(Math.max(D,h),65536)),B=br(g);if(B)return!0}return!1}var rn={mappings:{},buffers:[null,[],[]],printChar:function(D,y){var m=rn.buffers[D];y===0||y===10?((D===1?pn:Ut)(qr(m,0)),m.length=0):m.push(y)},varargs:void 0,get:function(){rn.varargs+=4;var D=Ke[rn.varargs-4>>2];return D},getStr:function(D){var y=xr(D);return y},get64:function(D,y){return D}};function sn(D){return 0}function Kn(D,y,m,C,h){}function mr(D,y,m,C){for(var h=0,g=0;g<m;g++){for(var B=Ke[y+g*8>>2],N=Ke[y+(g*8+4)>>2],z=0;z<N;z++)rn.printChar(D,At[B+z]);h+=N}return Ke[C>>2]=h,0}function he(D){}Br(),Ar=c.BindingError=Jn(Error,"BindingError"),qn=c.InternalError=Jn(Error,"InternalError"),Xn(),Si=c.UnboundTypeError=Jn(Error,"UnboundTypeError");var ve={m:Wn,q:ni,n:yn,v:or,l:Tr,c:se,b:De,a:U,h:q,f:ue,o:Re,d:ir,k:wt,i:Ht,j:tr,g:zn,s:jr,e:Hn,u:sn,p:Kn,t:mr,r:he};ft(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.x).apply(null,arguments)};var xe=c._malloc=function(){return(xe=c._malloc=c.asm.y).apply(null,arguments)},Ve=c._free=function(){return(Ve=c._free=c.asm.z).apply(null,arguments)},at=c.___getTypeName=function(){return(at=c.___getTypeName=c.asm.A).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.B).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.D).apply(null,arguments)};var Tt;fr=function D(){Tt||Ot(),Tt||(fr=D)};function Ot(D){if(Rn>0||(Fr(),Rn>0))return;function y(){Tt||(Tt=!0,c.calledRun=!0,!lr&&(si(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),hi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),y()},1)):y()}if(c.run=Ot,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ot(),c.ready}}(),so=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/imagequant_node-a4aafbae.wasm").href:new URL("imagequant_node-a4aafbae.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;class ji{constructor(c,Xe,et){this.data=c,this.width=Xe,this.height=et}}globalThis.navigator={hardwareConcurrency:n.cpus().length};const mo=Li(e.promises.readFile(s(Sr))),tn=Jt(e.promises.readFile(s(Zt))),Mo=ki(e.promises.readFile(s(Hi))),no=a(ci,so);globalThis.ImageData=ji;function ye(Ge){switch(Ge){case"triangle":return 0;case"catrom":return 1;case"mitchell":return 2;case"lanczos3":return 3;default:throw Error(`Unknown resize algorithm "${Ge}"`)}}function qe({input_width:Ge,input_height:c,target_width:Xe,target_height:et}){if(!Xe&&!et)throw Error("Need to specify at least width or height when resizing");return Xe&&et?{width:Xe,height:et}:Xe?{width:Xe,height:Math.round(c/Ge*Xe)}:{width:Math.round(Ge/c*et),height:et}}const ut={resize:{name:"Resize",description:"Resize the image before compressing",instantiate:async()=>(await Mo,(Ge,c,Xe,{width:et,height:it,method:je,premultiply:qt,linearRGB:It})=>({width:et,height:it}=qe({input_width:c,input_height:Xe,target_width:et,target_height:it}),new ji(En(Ge,c,Xe,et,it,ye(je),qt,It),et,it))),defaultOptions:{method:"lanczos3",fitMethod:"stretch",premultiply:!0,linearRGB:!0}},quant:{name:"ImageQuant",description:"Reduce the number of colors used (aka. paletting)",instantiate:async()=>{const Ge=await no;return(c,Xe,et,{numColors:it,dither:je})=>new ji(Ge.quantize(c,Xe,et,it,je),Xe,et)},defaultOptions:{numColors:255,dither:1}},rotate:{name:"Rotate",description:"Rotate image",instantiate:async()=>async(Ge,c,Xe,{numRotations:et})=>{const it=et*90%360,je=it==0||it==180,qt=c*Xe*4,It=(await WebAssembly.instantiate(await e.promises.readFile(s($i)))).instance,{memory:Rt}=It.exports,Xt=Math.ceil((qt*2-Rt.buffer.byteLength+8)/(64*1024));Xt>0&&Rt.grow(Xt);const hn=new Uint8ClampedArray(Rt.buffer);return hn.set(Ge,8),It.exports.rotate(c,Xe,it),new ji(hn.slice(qt+8,qt*2+8),je?c:Xe,je?Xe:c)},defaultOptions:{numRotations:0}}},Ue={mozjpeg:{name:"MozJPEG",extension:"jpg",detectors:[/^\xFF\xD8\xFF/],dec:()=>a(p,d),enc:()=>a(f,l),defaultEncoderOptions:{quality:75,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:3,quant_table:3,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75},autoOptimize:{option:"quality",min:0,max:100}},webp:{name:"WebP",extension:"webp",detectors:[/^RIFF....WEBPVP8[LX ]/s],dec:()=>a(E,v),enc:()=>a(_,A),defaultEncoderOptions:{quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0},autoOptimize:{option:"quality",min:0,max:100}},avif:{name:"AVIF",extension:"avif",detectors:[/^\x00\x00\x00 ftypavif\x00\x00\x00\x00/],dec:()=>a(K,ee),enc:async()=>await u()?a(r.default,k,R):a(T,I),defaultEncoderOptions:{cqLevel:33,cqAlphaLevel:-1,denoiseLevel:0,tileColsLog2:0,tileRowsLog2:0,speed:6,subsample:1,chromaDeltaQ:!1,sharpness:0,tune:0},autoOptimize:{option:"cqLevel",min:62,max:0}},jxl:{name:"JPEG-XL",extension:"jxl",detectors:[/^\xff\x0a/],dec:()=>a(ne,de),enc:()=>a(_e,Q),defaultEncoderOptions:{effort:1,quality:75,progressive:!1,epf:-1,lossyPalette:!1,decodingSpeedTier:0,photonNoiseIso:0,lossyModular:!1},autoOptimize:{option:"quality",min:0,max:100}},wp2:{name:"WebP2",extension:"wp2",detectors:[/^\xF4\xFF\x6F/],dec:()=>a(Te,Ee),enc:()=>a(Ie,Pe),defaultEncoderOptions:{quality:75,alpha_quality:75,effort:5,pass:1,sns:50,uv_mode:0,csp_type:0,error_diffusion:0,use_random_matrix:!1},autoOptimize:{option:"quality",min:0,max:100}},oxipng:{name:"OxiPNG",extension:"png",detectors:[/^\x89PNG\x0D\x0A\x1A\x0A/],dec:async()=>(await mo,{decode:Qr}),enc:async()=>(await mo,await tn,{encode:(Ge,c,Xe,et)=>{const it=dn(new Uint8Array(Ge),c,Xe);return Ce(it,et.level,!1)}}),defaultEncoderOptions:{level:2},autoOptimize:{option:"level",min:6,max:1}}};function ht(){return Array.from({length:16},()=>Math.floor(Math.random()*256).toString(16)).join("")}class Dn{constructor(c,Xe){this.numWorkers=c,this.jobQueue=new i.TransformStream,this.workerQueue=new i.TransformStream;const et=this.workerQueue.writable.getWriter();for(let it=0;it<c;it++)et.write(new o.Worker(Xe));et.releaseLock(),this.done=this._readLoop()}async _readLoop(){const c=this.jobQueue.readable.getReader();for(;;){const{value:Xe,done:et}=await c.read();if(et){await this._terminateAll();return}if(!Xe)throw new Error("Reader did not return any value");const{msg:it,resolve:je,reject:qt}=Xe,It=await this._nextWorker();this.jobPromise(It,it).then(Rt=>je(Rt)).catch(Rt=>qt(Rt)).finally(()=>{const Rt=this.workerQueue.writable.getWriter();Rt.write(It),Rt.releaseLock()})}}async _nextWorker(){const c=this.workerQueue.readable.getReader(),{value:Xe}=await c.read();if(c.releaseLock(),!Xe)throw new Error("No worker left");return Xe}async _terminateAll(){for(let c=0;c<this.numWorkers;c++)(await this._nextWorker()).terminate();this.workerQueue.writable.close()}async join(){this.jobQueue.writable.getWriter().close(),await this.done}dispatchJob(c){return new Promise((Xe,et)=>{const it=this.jobQueue.writable.getWriter();it.write({msg:c,resolve:Xe,reject:et}),it.releaseLock()})}jobPromise(c,Xe){return new Promise((et,it)=>{const je=ht();c.postMessage({msg:Xe,id:je}),c.on("message",function qt({error:It,result:Rt,id:Xt}){if(Xt===je){if(It){it(It);return}c.off("message",qt),et(Rt)}})})}static useThisThreadAsWorker(c){o.parentPort.on("message",async Xe=>{const{msg:et,id:it}=Xe;try{const je=await c(et);o.parentPort.postMessage({result:je,id:it})}catch(je){o.parentPort.postMessage({error:je.message,id:it})}})}}var Bn=function(){return function(c){c=c||{};var c=typeof c<"u"?c:{},Xe,et;c.ready=new Promise(function(w,M){Xe=w,et=M});var it={},je;for(je in c)c.hasOwnProperty(je)&&(it[je]=c[je]);var qt=!1,It="";function Rt(w){return c.locateFile?c.locateFile(w,It):It+w}var Xt,hn,nn,An;It=__dirname+"/",Xt=function(M,Y){return nn||(nn=ri),An||(An=ri),M=An.normalize(M),nn.readFileSync(M,Y?null:"utf8")},hn=function(M){var Y=Xt(M,!0);return Y.buffer||(Y=new Uint8Array(Y)),Pr(Y.buffer),Y},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),c.inspect=function(){return"[Emscripten Module object]"};var pn=c.print||console.log.bind(console),Ut=c.printErr||console.warn.bind(console);for(je in it)it.hasOwnProperty(je)&&(c[je]=it[je]);it=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit;var Gt;c.wasmBinary&&(Gt=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&st("no native wasm support detected");var on,lr=!1;function Pr(w,M){w||st("Assertion failed: "+M)}var Tn=new TextDecoder("utf8");function qr(w,M,Y){for(var ae=M+Y,me=M;w[me]&&!(me>=ae);)++me;return Tn.decode(w.subarray?w.subarray(M,me):new Uint8Array(w.slice(M,me)))}function xr(w,M){if(!w)return"";for(var Y=w+M,ae=w;!(ae>=Y)&&At[ae];)++ae;return Tn.decode(At.subarray(w,ae))}function Hr(w,M,Y,ae){if(!(ae>0))return 0;for(var me=Y,ge=Y+ae-1,Be=0;Be<w.length;++Be){var Le=w.charCodeAt(Be);if(Le>=55296&&Le<=57343){var Ye=w.charCodeAt(++Be);Le=65536+((Le&1023)<<10)|Ye&1023}if(Le<=127){if(Y>=ge)break;M[Y++]=Le}else if(Le<=2047){if(Y+1>=ge)break;M[Y++]=192|Le>>6,M[Y++]=128|Le&63}else if(Le<=65535){if(Y+2>=ge)break;M[Y++]=224|Le>>12,M[Y++]=128|Le>>6&63,M[Y++]=128|Le&63}else{if(Y+3>=ge)break;M[Y++]=240|Le>>18,M[Y++]=128|Le>>12&63,M[Y++]=128|Le>>6&63,M[Y++]=128|Le&63}}return M[Y]=0,Y-me}function oi(w,M,Y){return Hr(w,At,M,Y)}function ti(w){for(var M=0,Y=0;Y<w.length;++Y){var ae=w.charCodeAt(Y);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|w.charCodeAt(++Y)&1023),ae<=127?++M:ae<=2047?M+=2:ae<=65535?M+=3:M+=4}return M}var Mi=new TextDecoder("utf-16le");function Ti(w,M){for(var Y=w,ae=Y>>1,me=ae+M/2;!(ae>=me)&&Wt[ae];)++ae;return Y=ae<<1,Mi.decode(At.subarray(w,Y))}function Di(w,M,Y){if(Y===void 0&&(Y=2147483647),Y<2)return 0;Y-=2;for(var ae=M,me=Y<w.length*2?Y/2:w.length,ge=0;ge<me;++ge){var Be=w.charCodeAt(ge);cn[M>>1]=Be,M+=2}return cn[M>>1]=0,M-ae}function Ri(w){return w.length*2}function Ii(w,M){for(var Y=0,ae="";!(Y>=M/4);){var me=Ke[w+Y*4>>2];if(me==0)break;if(++Y,me>=65536){var ge=me-65536;ae+=String.fromCharCode(55296|ge>>10,56320|ge&1023)}else ae+=String.fromCharCode(me)}return ae}function li(w,M,Y){if(Y===void 0&&(Y=2147483647),Y<4)return 0;for(var ae=M,me=ae+Y-4,ge=0;ge<w.length;++ge){var Be=w.charCodeAt(ge);if(Be>=55296&&Be<=57343){var Le=w.charCodeAt(++ge);Be=65536+((Be&1023)<<10)|Le&1023}if(Ke[M>>2]=Be,M+=4,M+4>me)break}return Ke[M>>2]=0,M-ae}function fi(w){for(var M=0,Y=0;Y<w.length;++Y){var ae=w.charCodeAt(Y);ae>=55296&&ae<=57343&&++Y,M+=4}return M}function di(w,M){return w%M>0&&(w+=M-w%M),w}var mn,Ln,At,cn,Wt,Ke,gt,$n,vt;function Pt(w){mn=w,c.HEAP8=Ln=new Int8Array(w),c.HEAP16=cn=new Int16Array(w),c.HEAP32=Ke=new Int32Array(w),c.HEAPU8=At=new Uint8Array(w),c.HEAPU16=Wt=new Uint16Array(w),c.HEAPU32=gt=new Uint32Array(w),c.HEAPF32=$n=new Float32Array(w),c.HEAPF64=vt=new Float64Array(w)}c.INITIAL_MEMORY;var an,Wr=[],Vr=[],On=[];function Fr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)wi(c.preRun.shift());Sn(Wr)}function si(){Sn(Vr)}function hi(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Yr(c.postRun.shift());Sn(On)}function wi(w){Wr.unshift(w)}function Lr(w){Vr.unshift(w)}function Yr(w){On.unshift(w)}var Rn=0,fr=null;function $r(w){Rn++,c.monitorRunDependencies&&c.monitorRunDependencies(Rn)}function er(w){if(Rn--,c.monitorRunDependencies&&c.monitorRunDependencies(Rn),Rn==0&&fr){var M=fr;fr=null,M()}}c.preloadedImages={},c.preloadedAudios={};function st(w){c.onAbort&&c.onAbort(w),w+="",Ut(w),lr=!0,w="abort("+w+"). Build with -s ASSERTIONS=1 for more info.";var M=new WebAssembly.RuntimeError(w);throw et(M),M}var $="data:application/octet-stream;base64,";function oe(w){return w.startsWith($)}if(c.locateFile){var pe="visdif.wasm";oe(pe)||(pe=Rt(pe))}else var pe=new URL("visdif.wasm",typeof document>"u"?new(Ai("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).toString();function Me(w){try{if(w==pe&&Gt)return new Uint8Array(Gt);if(hn)return hn(w);throw"both async and sync fetching of the wasm failed"}catch(M){st(M)}}function Ze(){return!Gt&&qt&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(w){if(!w.ok)throw"failed to load wasm binary file at '"+pe+"'";return w.arrayBuffer()}).catch(function(){return Me(pe)}):Promise.resolve().then(function(){return Me(pe)})}function ft(){var w={a:tt};function M(Be,Le){var Ye=Be.exports;c.asm=Ye,on=c.asm.u,Pt(on.buffer),an=c.asm.A,Lr(c.asm.v),er()}$r();function Y(Be){M(Be.instance)}function ae(Be){return Ze().then(function(Le){var Ye=WebAssembly.instantiate(Le,w);return Ye}).then(Be,function(Le){Ut("failed to asynchronously prepare wasm: "+Le),st(Le)})}function me(){return!Gt&&typeof WebAssembly.instantiateStreaming=="function"&&!oe(pe)&&typeof fetch=="function"?fetch(pe,{credentials:"same-origin"}).then(function(Be){var Le=WebAssembly.instantiateStreaming(Be,w);return Le.then(Y,function(Ye){return Ut("wasm streaming compile failed: "+Ye),Ut("falling back to ArrayBuffer instantiation"),ae(Y)})}):ae(Y)}if(c.instantiateWasm)try{var ge=c.instantiateWasm(w,M);return ge}catch(Be){return Ut("Module.instantiateWasm callback failed with error: "+Be),!1}return me().catch(et),{}}function Sn(w){for(;w.length>0;){var M=w.shift();if(typeof M=="function"){M(c);continue}var Y=M.func;typeof Y=="number"?M.arg===void 0?an.get(Y)():an.get(Y)(M.arg):Y(M.arg===void 0?null:M.arg)}}function dr(w,M,Y,ae){st("Assertion failed: "+xr(w)+", at: "+[M?xr(M):"unknown filename",Y,ae?xr(ae):"unknown function"])}var Wn={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ni(w){return mt(w+Wn.SIZE)+Wn.SIZE}function ur(w){this.excPtr=w,this.ptr=w-Wn.SIZE,this.set_type=function(M){Ke[this.ptr+Wn.TYPE_OFFSET>>2]=M},this.get_type=function(){return Ke[this.ptr+Wn.TYPE_OFFSET>>2]},this.set_destructor=function(M){Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]=M},this.get_destructor=function(){return Ke[this.ptr+Wn.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(M){Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=M},this.set_caught=function(M){M=M?1:0,Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]=M},this.get_caught=function(){return Ln[this.ptr+Wn.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(M){M=M?1:0,Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]=M},this.get_rethrown=function(){return Ln[this.ptr+Wn.RETHROWN_OFFSET>>0]!=0},this.init=function(M,Y){this.set_type(M),this.set_destructor(Y),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var M=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=M+1},this.release_ref=function(){var M=Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2];return Ke[this.ptr+Wn.REFCOUNT_OFFSET>>2]=M-1,M===1}}function Br(w,M,Y){var ae=new ur(w);throw ae.init(M,Y),w}function Ir(w,M,Y,ae,me){}function Er(w){switch(w){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+w)}}function hr(){for(var w=new Array(256),M=0;M<256;++M)w[M]=String.fromCharCode(M);cr=w}var cr=void 0;function Vt(w){for(var M="",Y=w;At[Y];)M+=cr[At[Y++]];return M}var ln={},Nn={},gn={},Ft=48,Jn=57;function Ar(w){if(w===void 0)return"_unknown";w=w.replace(/[^a-zA-Z0-9_]/g,"$");var M=w.charCodeAt(0);return M>=Ft&&M<=Jn?"_"+w:w}function xn(w,M){return w=Ar(w),new Function("body","return function "+w+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(M)}function qn(w,M){var Y=xn(M,function(ae){this.name=M,this.message=ae;var me=new Error(ae).stack;me!==void 0&&(this.stack=this.toString()+`
`+me.replace(/^Error(:[^\n]*)?\n/,""))});return Y.prototype=Object.create(w.prototype),Y.prototype.constructor=Y,Y.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Y}var nr=void 0;function Mt(w){throw new nr(w)}var Vn=void 0;function yn(w){throw new Vn(w)}function In(w,M,Y){w.forEach(function(Le){gn[Le]=M});function ae(Le){var Ye=Y(Le);Ye.length!==w.length&&yn("Mismatched type converter count");for(var bt=0;bt<w.length;++bt)Un(w[bt],Ye[bt])}var me=new Array(M.length),ge=[],Be=0;M.forEach(function(Le,Ye){Nn.hasOwnProperty(Le)?me[Ye]=Nn[Le]:(ge.push(Le),ln.hasOwnProperty(Le)||(ln[Le]=[]),ln[Le].push(function(){me[Ye]=Nn[Le],++Be,Be===ge.length&&ae(me)}))}),ge.length===0&&ae(me)}function Un(w,M,Y){if(Y=Y||{},!("argPackAdvance"in M))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ae=M.name;if(w||Mt('type "'+ae+'" must have a positive integer typeid pointer'),Nn.hasOwnProperty(w)){if(Y.ignoreDuplicateRegistrations)return;Mt("Cannot register type '"+ae+"' twice")}if(Nn[w]=M,delete gn[w],ln.hasOwnProperty(w)){var me=ln[w];delete ln[w],me.forEach(function(ge){ge()})}}function ir(w,M,Y,ae,me){var ge=Er(Y);M=Vt(M),Un(w,{name:M,fromWireType:function(Be){return!!Be},toWireType:function(Be,Le){return Le?ae:me},argPackAdvance:8,readValueFromPointer:function(Be){var Le;if(Y===1)Le=Ln;else if(Y===2)Le=cn;else if(Y===4)Le=Ke;else throw new TypeError("Unknown boolean type size: "+M);return this.fromWireType(Le[Be>>ge])},destructorFunction:null})}function Mr(w){if(!(this instanceof ui)||!(w instanceof ui))return!1;for(var M=this.$$.ptrType.registeredClass,Y=this.$$.ptr,ae=w.$$.ptrType.registeredClass,me=w.$$.ptr;M.baseClass;)Y=M.upcast(Y),M=M.baseClass;for(;ae.baseClass;)me=ae.upcast(me),ae=ae.baseClass;return M===ae&&Y===me}function fn(w){return{count:w.count,deleteScheduled:w.deleteScheduled,preservePointerOnDelete:w.preservePointerOnDelete,ptr:w.ptr,ptrType:w.ptrType,smartPtr:w.smartPtr,smartPtrType:w.smartPtrType}}function Xn(w){function M(Y){return Y.$$.ptrType.registeredClass.name}Mt(M(w)+" instance already deleted")}var Gn=!1;function Lt(w){}function or(w){w.smartPtr?w.smartPtrType.rawDestructor(w.smartPtr):w.ptrType.registeredClass.rawDestructor(w.ptr)}function Or(w){w.count.value-=1;var M=w.count.value===0;M&&or(w)}function bn(w){return typeof FinalizationGroup>"u"?(bn=function(M){return M},w):(Gn=new FinalizationGroup(function(M){for(var Y=M.next();!Y.done;Y=M.next()){var ae=Y.value;ae.ptr?Or(ae):console.warn("object already deleted: "+ae.ptr)}}),bn=function(M){return Gn.register(M,M.$$,M.$$),M},Lt=function(M){Gn.unregister(M.$$)},bn(w))}function Tr(){if(this.$$.ptr||Xn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var w=bn(Object.create(Object.getPrototypeOf(this),{$$:{value:fn(this.$$)}}));return w.$$.count.value+=1,w.$$.deleteScheduled=!1,w}function jn(){this.$$.ptr||Xn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Mt("Object already scheduled for deletion"),Lt(this),Or(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Nr(){return!this.$$.ptr}var pi=void 0,Ur=[];function Dr(){for(;Ur.length;){var w=Ur.pop();w.$$.deleteScheduled=!1,w.delete()}}function ai(){return this.$$.ptr||Xn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Mt("Object already scheduled for deletion"),Ur.push(this),Ur.length===1&&pi&&pi(Dr),this.$$.deleteScheduled=!0,this}function Oi(){ui.prototype.isAliasOf=Mr,ui.prototype.clone=Tr,ui.prototype.delete=jn,ui.prototype.isDeleted=Nr,ui.prototype.deleteLater=ai}function ui(){}var Pi={};function Ci(w,M,Y){if(w[M].overloadTable===void 0){var ae=w[M];w[M]=function(){return w[M].overloadTable.hasOwnProperty(arguments.length)||Mt("Function '"+Y+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+w[M].overloadTable+")!"),w[M].overloadTable[arguments.length].apply(this,arguments)},w[M].overloadTable=[],w[M].overloadTable[ae.argCount]=ae}}function Ni(w,M,Y){c.hasOwnProperty(w)?((Y===void 0||c[w].overloadTable!==void 0&&c[w].overloadTable[Y]!==void 0)&&Mt("Cannot register public name '"+w+"' twice"),Ci(c,w,w),c.hasOwnProperty(Y)&&Mt("Cannot register multiple overloads of a function with the same number of arguments ("+Y+")!"),c[w].overloadTable[Y]=M):(c[w]=M,Y!==void 0&&(c[w].numArguments=Y))}function Si(w,M,Y,ae,me,ge,Be,Le){this.name=w,this.constructor=M,this.instancePrototype=Y,this.rawDestructor=ae,this.baseClass=me,this.getActualType=ge,this.upcast=Be,this.downcast=Le,this.pureVirtualFunctions=[]}function b(w,M,Y){for(;M!==Y;)M.upcast||Mt("Expected null or instance of "+Y.name+", got an instance of "+M.name),w=M.upcast(w),M=M.baseClass;return w}function H(w,M){if(M===null)return this.isReference&&Mt("null is not a valid "+this.name),0;M.$$||Mt('Cannot pass "'+x(M)+'" as a '+this.name),M.$$.ptr||Mt("Cannot pass deleted object as a pointer of type "+this.name);var Y=M.$$.ptrType.registeredClass,ae=b(M.$$.ptr,Y,this.registeredClass);return ae}function se(w,M){var Y;if(M===null)return this.isReference&&Mt("null is not a valid "+this.name),this.isSmartPointer?(Y=this.rawConstructor(),w!==null&&w.push(this.rawDestructor,Y),Y):0;M.$$||Mt('Cannot pass "'+x(M)+'" as a '+this.name),M.$$.ptr||Mt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&M.$$.ptrType.isConst&&Mt("Cannot convert argument of type "+(M.$$.smartPtrType?M.$$.smartPtrType.name:M.$$.ptrType.name)+" to parameter type "+this.name);var ae=M.$$.ptrType.registeredClass;if(Y=b(M.$$.ptr,ae,this.registeredClass),this.isSmartPointer)switch(M.$$.smartPtr===void 0&&Mt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:M.$$.smartPtrType===this?Y=M.$$.smartPtr:Mt("Cannot convert argument of type "+(M.$$.smartPtrType?M.$$.smartPtrType.name:M.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:Y=M.$$.smartPtr;break;case 2:if(M.$$.smartPtrType===this)Y=M.$$.smartPtr;else{var me=M.clone();Y=this.rawShare(Y,N(function(){me.delete()})),w!==null&&w.push(this.rawDestructor,Y)}break;default:Mt("Unsupporting sharing policy")}return Y}function be(w,M){if(M===null)return this.isReference&&Mt("null is not a valid "+this.name),0;M.$$||Mt('Cannot pass "'+x(M)+'" as a '+this.name),M.$$.ptr||Mt("Cannot pass deleted object as a pointer of type "+this.name),M.$$.ptrType.isConst&&Mt("Cannot convert argument of type "+M.$$.ptrType.name+" to parameter type "+this.name);var Y=M.$$.ptrType.registeredClass,ae=b(M.$$.ptr,Y,this.registeredClass);return ae}function De(w){return this.fromWireType(gt[w>>2])}function U(w){return this.rawGetPointee&&(w=this.rawGetPointee(w)),w}function q(w){this.rawDestructor&&this.rawDestructor(w)}function ue(w){w!==null&&w.delete()}function Re(w,M,Y){if(M===Y)return w;if(Y.baseClass===void 0)return null;var ae=Re(w,M,Y.baseClass);return ae===null?null:Y.downcast(ae)}function pt(){return Object.keys(Ht).length}function yt(){var w=[];for(var M in Ht)Ht.hasOwnProperty(M)&&w.push(Ht[M]);return w}function jt(w){pi=w,Ur.length&&pi&&pi(Dr)}function wt(){c.getInheritedInstanceCount=pt,c.getLiveInheritedInstances=yt,c.flushPendingDeletes=Dr,c.setDelayFunction=jt}var Ht={};function Pn(w,M){for(M===void 0&&Mt("ptr should not be undefined");w.baseClass;)M=w.upcast(M),w=w.baseClass;return M}function pr(w,M){return M=Pn(w,M),Ht[M]}function Gr(w,M){(!M.ptrType||!M.ptr)&&yn("makeClassHandle requires ptr and ptrType");var Y=!!M.smartPtrType,ae=!!M.smartPtr;return Y!==ae&&yn("Both smartPtrType and smartPtr must be specified"),M.count={value:1},bn(Object.create(w,{$$:{value:M}}))}function Zn(w){var M=this.getPointee(w);if(!M)return this.destructor(w),null;var Y=pr(this.registeredClass,M);if(Y!==void 0){if(Y.$$.count.value===0)return Y.$$.ptr=M,Y.$$.smartPtr=w,Y.clone();var ae=Y.clone();return this.destructor(w),ae}function me(){return this.isSmartPointer?Gr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:M,smartPtrType:this,smartPtr:w}):Gr(this.registeredClass.instancePrototype,{ptrType:this,ptr:w})}var ge=this.registeredClass.getActualType(M),Be=Pi[ge];if(!Be)return me.call(this);var Le;this.isConst?Le=Be.constPointerType:Le=Be.pointerType;var Ye=Re(M,this.registeredClass,Le.registeredClass);return Ye===null?me.call(this):this.isSmartPointer?Gr(Le.registeredClass.instancePrototype,{ptrType:Le,ptr:Ye,smartPtrType:this,smartPtr:w}):Gr(Le.registeredClass.instancePrototype,{ptrType:Le,ptr:Ye})}function tr(){zn.prototype.getPointee=U,zn.prototype.destructor=q,zn.prototype.argPackAdvance=8,zn.prototype.readValueFromPointer=De,zn.prototype.deleteObject=ue,zn.prototype.fromWireType=Zn}function zn(w,M,Y,ae,me,ge,Be,Le,Ye,bt,kt){this.name=w,this.registeredClass=M,this.isReference=Y,this.isConst=ae,this.isSmartPointer=me,this.pointeeType=ge,this.sharingPolicy=Be,this.rawGetPointee=Le,this.rawConstructor=Ye,this.rawShare=bt,this.rawDestructor=kt,!me&&M.baseClass===void 0?ae?(this.toWireType=H,this.destructorFunction=null):(this.toWireType=be,this.destructorFunction=null):this.toWireType=se}function jr(w,M,Y){c.hasOwnProperty(w)||yn("Replacing nonexistant public symbol"),c[w].overloadTable!==void 0&&Y!==void 0?c[w].overloadTable[Y]=M:(c[w]=M,c[w].argCount=Y)}function br(w,M,Y){var ae=c["dynCall_"+w];return Y&&Y.length?ae.apply(null,[M].concat(Y)):ae.call(null,M)}function Hn(w,M,Y){return w.includes("j")?br(w,M,Y):an.get(M).apply(null,Y)}function rn(w,M){var Y=[];return function(){Y.length=arguments.length;for(var ae=0;ae<arguments.length;ae++)Y[ae]=arguments[ae];return Hn(w,M,Y)}}function sn(w,M){w=Vt(w);function Y(){return w.includes("j")?rn(w,M):an.get(M)}var ae=Y();return typeof ae!="function"&&Mt("unknown function pointer with signature "+w+": "+M),ae}var Kn=void 0;function mr(w){var M=ie(w),Y=Vt(M);return Kt(M),Y}function he(w,M){var Y=[],ae={};function me(ge){if(!ae[ge]&&!Nn[ge]){if(gn[ge]){gn[ge].forEach(me);return}Y.push(ge),ae[ge]=!0}}throw M.forEach(me),new Kn(w+": "+Y.map(mr).join([", "]))}function ve(w,M,Y,ae,me,ge,Be,Le,Ye,bt,kt,Yn,wr){kt=Vt(kt),ge=sn(me,ge),Le&&(Le=sn(Be,Le)),bt&&(bt=sn(Ye,bt)),wr=sn(Yn,wr);var Zr=Ar(kt);Ni(Zr,function(){he("Cannot construct "+kt+" due to unbound types",[ae])}),In([w,M,Y],ae?[ae]:[],function(Fi){Fi=Fi[0];var eo,xt;ae?(eo=Fi.registeredClass,xt=eo.instancePrototype):xt=ui.prototype;var sr=xn(Zr,function(){if(Object.getPrototypeOf(this)!==ro)throw new nr("Use 'new' to construct "+kt);if(Ui.constructor_body===void 0)throw new nr(kt+" has no accessible constructor");var Lh=Ui.constructor_body[arguments.length];if(Lh===void 0)throw new nr("Tried to invoke ctor of "+kt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ui.constructor_body).toString()+") parameters instead!");return Lh.apply(this,arguments)}),ro=Object.create(xt,{constructor:{value:sr}});sr.prototype=ro;var Ui=new Si(kt,sr,ro,wr,eo,ge,Le,bt),Qo=new zn(kt,Ui,!0,!1,!1),ls=new zn(kt+"*",Ui,!1,!1,!1),ys=new zn(kt+" const*",Ui,!1,!0,!1);return Pi[w]={pointerType:ls,constPointerType:ys},jr(Zr,sr),[Qo,ls,ys]})}function xe(w,M){for(var Y=[],ae=0;ae<w;ae++)Y.push(Ke[(M>>2)+ae]);return Y}function Ve(w){for(;w.length;){var M=w.pop(),Y=w.pop();Y(M)}}function at(w,M,Y,ae,me,ge){Pr(M>0);var Be=xe(M,Y);me=sn(ae,me);var Le=[ge],Ye=[];In([],[w],function(bt){bt=bt[0];var kt="constructor "+bt.name;if(bt.registeredClass.constructor_body===void 0&&(bt.registeredClass.constructor_body=[]),bt.registeredClass.constructor_body[M-1]!==void 0)throw new nr("Cannot register multiple constructors with identical number of parameters ("+(M-1)+") for class '"+bt.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return bt.registeredClass.constructor_body[M-1]=function(){he("Cannot construct "+bt.name+" due to unbound types",Be)},In([],Be,function(Yn){return bt.registeredClass.constructor_body[M-1]=function(){arguments.length!==M-1&&Mt(kt+" called with "+arguments.length+" arguments, expected "+(M-1)),Ye.length=0,Le.length=M;for(var Zr=1;Zr<M;++Zr)Le[Zr]=Yn[Zr].toWireType(Ye,arguments[Zr-1]);var Fi=me.apply(null,Le);return Ve(Ye),Yn[0].fromWireType(Fi)},[]}),[]})}function Tt(w,M){if(!(w instanceof Function))throw new TypeError("new_ called with constructor type "+typeof w+" which is not a function");var Y=xn(w.name||"unknownFunctionName",function(){});Y.prototype=w.prototype;var ae=new Y,me=w.apply(ae,M);return me instanceof Object?me:ae}function Ot(w,M,Y,ae,me){var ge=M.length;ge<2&&Mt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Be=M[1]!==null&&Y!==null,Le=!1,Ye=1;Ye<M.length;++Ye)if(M[Ye]!==null&&M[Ye].destructorFunction===void 0){Le=!0;break}for(var bt=M[0].name!=="void",kt="",Yn="",Ye=0;Ye<ge-2;++Ye)kt+=(Ye!==0?", ":"")+"arg"+Ye,Yn+=(Ye!==0?", ":"")+"arg"+Ye+"Wired";var wr="return function "+Ar(w)+"("+kt+`) {
if (arguments.length !== `+(ge-2)+`) {
throwBindingError('function `+w+" called with ' + arguments.length + ' arguments, expected "+(ge-2)+` args!');
}
`;Le&&(wr+=`var destructors = [];
`);var Zr=Le?"destructors":"null",Fi=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],eo=[Mt,ae,me,Ve,M[0],M[1]];Be&&(wr+="var thisWired = classParam.toWireType("+Zr+`, this);
`);for(var Ye=0;Ye<ge-2;++Ye)wr+="var arg"+Ye+"Wired = argType"+Ye+".toWireType("+Zr+", arg"+Ye+"); // "+M[Ye+2].name+`
`,Fi.push("argType"+Ye),eo.push(M[Ye+2]);if(Be&&(Yn="thisWired"+(Yn.length>0?", ":"")+Yn),wr+=(bt?"var rv = ":"")+"invoker(fn"+(Yn.length>0?", ":"")+Yn+`);
`,Le)wr+=`runDestructors(destructors);
`;else for(var Ye=Be?1:2;Ye<M.length;++Ye){var xt=Ye===1?"thisWired":"arg"+(Ye-2)+"Wired";M[Ye].destructorFunction!==null&&(wr+=xt+"_dtor("+xt+"); // "+M[Ye].name+`
`,Fi.push(xt+"_dtor"),eo.push(M[Ye].destructorFunction))}bt&&(wr+=`var ret = retType.fromWireType(rv);
return ret;
`),wr+=`}
`,Fi.push(wr);var sr=Tt(Function,Fi).apply(null,eo);return sr}function D(w,M,Y,ae,me,ge,Be,Le){var Ye=xe(Y,ae);M=Vt(M),ge=sn(me,ge),In([],[w],function(bt){bt=bt[0];var kt=bt.name+"."+M;M.startsWith("@@")&&(M=Symbol[M.substring(2)]),Le&&bt.registeredClass.pureVirtualFunctions.push(M);function Yn(){he("Cannot call "+kt+" due to unbound types",Ye)}var wr=bt.registeredClass.instancePrototype,Zr=wr[M];return Zr===void 0||Zr.overloadTable===void 0&&Zr.className!==bt.name&&Zr.argCount===Y-2?(Yn.argCount=Y-2,Yn.className=bt.name,wr[M]=Yn):(Ci(wr,M,kt),wr[M].overloadTable[Y-2]=Yn),In([],Ye,function(Fi){var eo=Ot(kt,Fi,bt,ge,Be);return wr[M].overloadTable===void 0?(eo.argCount=Y-2,wr[M]=eo):wr[M].overloadTable[Y-2]=eo,[]}),[]})}var y=[],m=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function C(w){w>4&&--m[w].refcount===0&&(m[w]=void 0,y.push(w))}function h(){for(var w=0,M=5;M<m.length;++M)m[M]!==void 0&&++w;return w}function g(){for(var w=5;w<m.length;++w)if(m[w]!==void 0)return m[w];return null}function B(){c.count_emval_handles=h,c.get_first_emval=g}function N(w){switch(w){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var M=y.length?y.pop():m.length;return m[M]={refcount:1,value:w},M}}}function z(w,M){M=Vt(M),Un(w,{name:M,fromWireType:function(Y){var ae=m[Y].value;return C(Y),ae},toWireType:function(Y,ae){return N(ae)},argPackAdvance:8,readValueFromPointer:De,destructorFunction:null})}function x(w){if(w===null)return"null";var M=typeof w;return M==="object"||M==="array"||M==="function"?w.toString():""+w}function O(w,M){switch(M){case 2:return function(Y){return this.fromWireType($n[Y>>2])};case 3:return function(Y){return this.fromWireType(vt[Y>>3])};default:throw new TypeError("Unknown float type: "+w)}}function Z(w,M,Y){var ae=Er(Y);M=Vt(M),Un(w,{name:M,fromWireType:function(me){return me},toWireType:function(me,ge){if(typeof ge!="number"&&typeof ge!="boolean")throw new TypeError('Cannot convert "'+x(ge)+'" to '+this.name);return ge},argPackAdvance:8,readValueFromPointer:O(M,ae),destructorFunction:null})}function ce(w,M,Y){switch(M){case 0:return Y?function(me){return Ln[me]}:function(me){return At[me]};case 1:return Y?function(me){return cn[me>>1]}:function(me){return Wt[me>>1]};case 2:return Y?function(me){return Ke[me>>2]}:function(me){return gt[me>>2]};default:throw new TypeError("Unknown integer type: "+w)}}function V(w,M,Y,ae,me){M=Vt(M),me===-1&&(me=4294967295);var ge=Er(Y),Be=function(bt){return bt};if(ae===0){var Le=32-8*Y;Be=function(bt){return bt<<Le>>>Le}}var Ye=M.includes("unsigned");Un(w,{name:M,fromWireType:Be,toWireType:function(bt,kt){if(typeof kt!="number"&&typeof kt!="boolean")throw new TypeError('Cannot convert "'+x(kt)+'" to '+this.name);if(kt<ae||kt>me)throw new TypeError('Passing a number "'+x(kt)+'" from JS side to C/C++ side to an argument of type "'+M+'", which is outside the valid range ['+ae+", "+me+"]!");return Ye?kt>>>0:kt|0},argPackAdvance:8,readValueFromPointer:ce(M,ge,ae!==0),destructorFunction:null})}function S(w,M,Y){var ae=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],me=ae[M];function ge(Be){Be=Be>>2;var Le=gt,Ye=Le[Be],bt=Le[Be+1];return new me(mn,bt,Ye)}Y=Vt(Y),Un(w,{name:Y,fromWireType:ge,argPackAdvance:8,readValueFromPointer:ge},{ignoreDuplicateRegistrations:!0})}function L(w,M){M=Vt(M);var Y=M==="std::string";Un(w,{name:M,fromWireType:function(ae){var me=gt[ae>>2],ge;if(Y)for(var Be=ae+4,Le=0;Le<=me;++Le){var Ye=ae+4+Le;if(Le==me||At[Ye]==0){var bt=Ye-Be,kt=xr(Be,bt);ge===void 0?ge=kt:(ge+=String.fromCharCode(0),ge+=kt),Be=Ye+1}}else{for(var Yn=new Array(me),Le=0;Le<me;++Le)Yn[Le]=String.fromCharCode(At[ae+4+Le]);ge=Yn.join("")}return Kt(ae),ge},toWireType:function(ae,me){me instanceof ArrayBuffer&&(me=new Uint8Array(me));var ge,Be=typeof me=="string";Be||me instanceof Uint8Array||me instanceof Uint8ClampedArray||me instanceof Int8Array||Mt("Cannot pass non-string to std::string"),Y&&Be?ge=function(){return ti(me)}:ge=function(){return me.length};var Le=ge(),Ye=mt(4+Le+1);if(gt[Ye>>2]=Le,Y&&Be)oi(me,Ye+4,Le+1);else if(Be)for(var bt=0;bt<Le;++bt){var kt=me.charCodeAt(bt);kt>255&&(Kt(Ye),Mt("String has UTF-16 code units that do not fit in 8 bits")),At[Ye+4+bt]=kt}else for(var bt=0;bt<Le;++bt)At[Ye+4+bt]=me[bt];return ae!==null&&ae.push(Kt,Ye),Ye},argPackAdvance:8,readValueFromPointer:De,destructorFunction:function(ae){Kt(ae)}})}function J(w,M,Y){Y=Vt(Y);var ae,me,ge,Be,Le;M===2?(ae=Ti,me=Di,Be=Ri,ge=function(){return Wt},Le=1):M===4&&(ae=Ii,me=li,Be=fi,ge=function(){return gt},Le=2),Un(w,{name:Y,fromWireType:function(Ye){for(var bt=gt[Ye>>2],kt=ge(),Yn,wr=Ye+4,Zr=0;Zr<=bt;++Zr){var Fi=Ye+4+Zr*M;if(Zr==bt||kt[Fi>>Le]==0){var eo=Fi-wr,xt=ae(wr,eo);Yn===void 0?Yn=xt:(Yn+=String.fromCharCode(0),Yn+=xt),wr=Fi+M}}return Kt(Ye),Yn},toWireType:function(Ye,bt){typeof bt!="string"&&Mt("Cannot pass non-string to C++ string type "+Y);var kt=Be(bt),Yn=mt(4+kt+M);return gt[Yn>>2]=kt>>Le,me(bt,Yn+4,kt+M),Ye!==null&&Ye.push(Kt,Yn),Yn},argPackAdvance:8,readValueFromPointer:De,destructorFunction:function(Ye){Kt(Ye)}})}function re(w,M){M=Vt(M),Un(w,{isVoid:!0,name:M,argPackAdvance:0,fromWireType:function(){},toWireType:function(Y,ae){}})}function G(){st()}function X(w,M,Y){At.copyWithin(w,M,M+Y)}function te(w){try{return on.grow(w-mn.byteLength+65535>>>16),Pt(on.buffer),1}catch{}}function le(w){var M=At.length;w=w>>>0;var Y=2147483648;if(w>Y)return!1;for(var ae=1;ae<=4;ae*=2){var me=M*(1+.2/ae);me=Math.min(me,w+100663296);var ge=Math.min(Y,di(Math.max(w,me),65536)),Be=te(ge);if(Be)return!0}return!1}var we={mappings:{},buffers:[null,[],[]],printChar:function(w,M){var Y=we.buffers[w];M===0||M===10?((w===1?pn:Ut)(qr(Y,0)),Y.length=0):Y.push(M)},varargs:void 0,get:function(){we.varargs+=4;var w=Ke[we.varargs-4>>2];return w},getStr:function(w){var M=xr(w);return M},get64:function(w,M){return w}};function $e(w,M,Y,ae){for(var me=0,ge=0;ge<Y;ge++){for(var Be=Ke[M+ge*8>>2],Le=Ke[M+(ge*8+4)>>2],Ye=0;Ye<Le;Ye++)we.printChar(w,At[Be+Ye]);me+=Le}return Ke[ae>>2]=me,0}function dt(w){}hr(),nr=c.BindingError=qn(Error,"BindingError"),Vn=c.InternalError=qn(Error,"InternalError"),Oi(),tr(),wt(),Kn=c.UnboundTypeError=qn(Error,"UnboundTypeError"),B();var tt={d:dr,t:ni,n:Br,o:Ir,i:ir,m:ve,l:at,k:D,s:z,h:Z,c:V,b:S,g:L,f:J,j:re,a:G,q:X,e:le,r:$e,p:dt};ft(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.v).apply(null,arguments)};var mt=c._malloc=function(){return(mt=c._malloc=c.asm.w).apply(null,arguments)},Kt=c._free=function(){return(Kt=c._free=c.asm.x).apply(null,arguments)},ie=c.___getTypeName=function(){return(ie=c.___getTypeName=c.asm.y).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.z).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.B).apply(null,arguments)};var F;fr=function w(){F||W(),F||(fr=w)};function W(w){if(Rn>0||(Fr(),Rn>0))return;function M(){F||(F=!0,c.calledRun=!0,!lr&&(si(),Xe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),hi()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),M()},1)):M()}if(c.run=W,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return W(),c.ready}}(),_r=typeof document>"u"?new(Ai("url")).URL("file:"+__dirname+"/visdif-f4d1bd06.wasm").href:new URL("visdif-f4d1bd06.wasm",document.currentScript&&document.currentScript.src||document.baseURI).href;async function yr(Ge,c,{min:Xe=0,max:et=100,epsilon:it=.1,maxRounds:je=6}={}){let qt=(et-Xe)/2+Xe,It=(et-Xe)/4,Rt,Xt=1;for(;;){if(Rt=await c(qt),Math.abs(Rt-Ge)<it||Xt>=je)return{parameter:qt,round:Xt,value:Rt};Rt>Ge?qt-=It:Rt<Ge&&(qt+=It),It/=2,Xt++}}async function kr(Ge,c,Xe,{butteraugliDistanceGoal:et=1.4,...it}={}){const{VisDiff:je}=await a(Bn,_r),qt=new je(Ge.data,Ge.width,Ge.height);let It,Rt;const{parameter:Xt}=await yr(-1*et,async hn=>(Rt=await c(Ge,hn),It=await Xe(Rt),-1*qt.distance(It.data)),it);return qt.delete(),{bitmap:It,binary:Rt,quality:Xt}}async function vr({file:Ge}){var c;const Xe=new Uint8Array(Ge),et=Xe.slice(0,16),it=Array.from(et).map(Xt=>String.fromCodePoint(Xt)).join(""),je=(c=Object.entries(Ue).find(([Xt,{detectors:hn}])=>hn.some(nn=>nn.exec(it))))===null||c===void 0?void 0:c[0];if(!je)throw Error("File has an unsupported format");return{bitmap:(await Ue[je].dec()).decode(Xe),size:Xe.length}}async function gr({preprocessorName:Ge,options:c,image:Xe}){const et=await ut[Ge].instantiate();return Xe.bitmap=await et(Uint8Array.from(Xe.bitmap.data),Xe.bitmap.width,Xe.bitmap.height,c),Xe}async function ei({bitmap:Ge,encName:c,encConfig:Xe,optimizerButteraugliTarget:et,maxOptimizerRounds:it}){let je,qt=Xe;const It=await Ue[c].enc();if(Xe==="auto"){const Rt=Ue[c].autoOptimize.option,Xt=await Ue[c].dec(),hn=(Gt,on)=>It.encode(Gt.data,Gt.width,Gt.height,Object.assign({},Ue[c].defaultEncoderOptions,{[Rt]:on})),nn=Gt=>Xt.decode(Gt),An=(Gt,on)=>{const lr=hn(Gt,on);if(!lr)throw new Error("There was an error while encoding");return lr},{binary:pn,quality:Ut}=await kr(Ge,An,nn,{min:Ue[c].autoOptimize.min,max:Ue[c].autoOptimize.max,butteraugliDistanceGoal:et,maxRounds:it});je=pn,qt={[Rt]:Math.round(Ut*1e4)/1e4}}else{const Rt=It.encode(Ge.data.buffer,Ge.width,Ge.height,Xe);if(!Rt)throw new Error("There was an error while encoding");je=Rt}return{optionsUsed:qt,binary:je,extension:Ue[c].extension,size:je.length}}function Wi(Ge){switch(Ge.operation){case"encode":return ei(Ge);case"decode":return vr(Ge);case"preprocess":return gr(Ge);default:throw Error(`Invalid job "${Ge.operation}"`)}}class zi{constructor(c,Xe){this.file=Xe,this.workerPool=c,this.decoded=c.dispatchJob({operation:"decode",file:Xe}),this.encodedWith={}}async preprocess(c={}){for(const[Xe,et]of Object.entries(c)){if(!Object.keys(ut).includes(Xe))throw Error(`Invalid preprocessor "${Xe}"`);const it=Xe,je=Object.assign({},ut[it].defaultOptions,et);this.decoded=this.workerPool.dispatchJob({operation:"preprocess",preprocessorName:it,image:await this.decoded,options:je}),await this.decoded}}async encode(c){var Xe,et;const{bitmap:it}=await this.decoded,je=[];for(const[qt,It]of Object.entries(c)){if(!Object.keys(Ue).includes(qt))continue;const Rt=qt,Xt=Ue[Rt],hn=typeof It=="string"?It:Object.assign({},Xt.defaultEncoderOptions,It);je.push(this.workerPool.dispatchJob({operation:"encode",bitmap:it,encName:Rt,encConfig:hn,optimizerButteraugliTarget:Number((Xe=c.optimizerButteraugliTarget)!==null&&Xe!==void 0?Xe:1.4),maxOptimizerRounds:Number((et=c.maxOptimizerRounds)!==null&&et!==void 0?et:6)}).then(nn=>{this.encodedWith[Rt]=nn}))}return await Promise.all(je),this.encodedWith}}class Zi{constructor(c){this.workerPool=new Dn(c,__filename)}ingestImage(c){return new zi(this.workerPool,c)}async close(){await this.workerPool.join()}}return o.isMainThread||Dn.useThisThreadAsWorker(Wi),Qa.ImagePool=Zi,Qa.encoders=Ue,Qa.preprocessors=ut,Qa}var Vb=gi&&gi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},jb=gi&&gi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.transform=void 0;var zb=fh,pf=dh,fs=Ub,jo=go;function Kb(o,e,t){var n,r,i,s,a,u,f,l,p,d,_,A=t===void 0?{draco:{method:jo.DRACO_METHOD},weld:{tolerance:jo.WELD_TOLERANCE},simplify:{enabled:jo.SIMPLIFY,ratio:jo.SIMPLIFY_RATIO,error:jo.SIMPLIFY_ERROR},texture:{resize:{resolution:jo.TEXTURE_RESIZE_RESOLUTION,filter:jo.TEXTURE_RESIZE_FILTER}}}:t,E=A.draco,v=A.weld,T=A.simplify,I=A.texture;return Vb(this,void 0,void 0,function(){var R;return jb(this,function(k){switch(k.label){case 0:return[4,pf.MeshoptEncoder.ready];case 1:return k.sent(),R=new Set([(0,fs.resample)(),(0,fs.draco)({method:(n=E==null?void 0:E.method)!==null&&n!==void 0?n:jo.DRACO_METHOD}),(0,fs.reorder)({encoder:pf.MeshoptEncoder}),(0,fs.prune)(),(0,fs.dedup)({propertyTypes:[zb.PropertyType.MESH]})]),((r=T==null?void 0:T.enabled)!==null&&r!==void 0?r:jo.SIMPLIFY)&&R.add((0,fs.weld)({tolerance:(i=v==null?void 0:v.tolerance)!==null&&i!==void 0?i:jo.WELD_TOLERANCE})).add((0,fs.simplify)({simplifier:pf.MeshoptSimplifier,ratio:(s=T==null?void 0:T.ratio)!==null&&s!==void 0?s:jo.SIMPLIFY_RATIO,error:(a=T==null?void 0:T.error)!==null&&a!==void 0?a:jo.SIMPLIFY_ERROR})),e&&R.add((0,fs.textureResize)({size:[(f=(u=I==null?void 0:I.resize)===null||u===void 0?void 0:u.resolution)!==null&&f!==void 0?f:jo.TEXTURE_RESIZE_RESOLUTION,(p=(l=I==null?void 0:I.resize)===null||l===void 0?void 0:l.resolution)!==null&&p!==void 0?p:jo.TEXTURE_RESIZE_RESOLUTION],filter:["LANCZOS2","lanczos2"].includes((_=(d=I==null?void 0:I.resize)===null||d===void 0?void 0:d.filter)!==null&&_!==void 0?_:"")?fs.TextureResizeFilter.LANCZOS2:fs.TextureResizeFilter.LANCZOS3})).add((0,fs.webp)({squoosh:Wb()})),[4,o.transform.apply(o,Array.from(R))];case 2:return[2,k.sent()]}})})}Pc.transform=Kb;var Jb=gi&&gi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},qb=gi&&gi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.node=void 0;var Xb=Mc,Yb=Xl,$b=Pc;function Zb(o,e){return Jb(this,void 0,void 0,function(){var t,n;return qb(this,function(r){switch(r.label){case 0:return[4,(0,Yb.nodeIO)()];case 1:return t=r.sent(),[4,t.readBinary(o)];case 2:return n=r.sent(),(0,Xb.setEmissiveStrength)(n,e==null?void 0:e.emissiveStrength),[4,(0,$b.transform)(n,!0,e==null?void 0:e.transform)];case 3:return r.sent(),[4,t.writeBinary(n)];case 4:return[2,r.sent()]}})})}Ul.node=Zb;var Ql={},ef={},Qb=75;function xg(o,{quality:e,width:t,height:n}={}){return new Promise(function(r,i){var s=document.createElement("canvas"),a=s.getContext("2d"),u=new Image;u.src=o,u.crossOrigin="anonymous",u.onload=function(f){s.width=t||u.width,s.height=n||u.height,URL.revokeObjectURL(f.target.src),a.drawImage(f.target,0,0,s.width,s.height),s.toBlob(function(l){r(l)},"image/webp",e||Qb)},u.onerror=function(f){return i(f)}})}function Bg(o,{quality:e,width:t,height:n}={}){return xg(URL.createObjectURL(o),{quality:e,width:t,height:n})}function e0(o,{quality:e,width:t,height:n}={}){return Bg(new Blob([o]),{quality:e,width:t,height:n})}const t0=Object.freeze(Object.defineProperty({__proto__:null,arrayBufferToWebP:e0,blobToWebP:Bg,srcToWebP:xg},Symbol.toStringTag,{value:"Module"})),n0=Ou(t0);var r0=gi&&gi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},i0=gi&&gi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(ef,"__esModule",{value:!0});ef.convertTextureWebP=void 0;var o0=n0;function s0(o,e){return e===void 0&&(e=1024),r0(this,void 0,void 0,function(){return i0(this,function(t){switch(t.label){case 0:return[4,Promise.all(o.getRoot().listTextures().map(function(n){var r,i=(r=n.getSize())!==null&&r!==void 0?r:[1024,1024],s=i[0],a=i[1],u=e/a0(s,a);return(0,o0.arrayBufferToWebP)(n.getImage(),{width:s*u,height:a*u}).then(function(f){return f.arrayBuffer()}).then(function(f){return new Uint8Array(f)}).then(function(f){n.copy(o.createTexture().setMimeType("image/webp").setImage(f))})}))];case 1:return t.sent(),[2]}})})}ef.convertTextureWebP=s0;function a0(o,e){return o>=e?o:e}var tf={},u0=gi&&gi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},c0=gi&&gi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},l0=gi&&gi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(tf,"__esModule",{value:!0});tf.webIO=void 0;var qp=l0(ng),f0=fh,Xp=dh,zu=lh;function d0(){return u0(this,void 0,void 0,function(){var o,e,t,n,r;return c0(this,function(i){switch(i.label){case 0:return e=(o=new f0.WebIO().registerExtensions([zu.DracoMeshCompression,zu.MaterialsSpecular,zu.MaterialsEmissiveStrength,zu.TextureWebP,zu.TextureTransform])).registerDependencies,r={},t="draco3d.decoder",[4,qp.default.createDecoderModule()];case 1:return r[t]=i.sent(),n="draco3d.encoder",[4,qp.default.createEncoderModule()];case 2:return[2,e.apply(o,[(r[n]=i.sent(),r["meshopt.decoder"]=Xp.MeshoptDecoder,r["meshopt.encoder"]=Xp.MeshoptEncoder,r)])]}})})}tf.webIO=d0;var h0=gi&&gi.__awaiter||function(o,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(l){try{f(n.next(l))}catch(p){s(p)}}function u(l){try{f(n.throw(l))}catch(p){s(p)}}function f(l){l.done?i(l.value):r(l.value).then(a,u)}f((n=n.apply(o,e||[])).next())})},p0=gi&&gi.__generator||function(o,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(o,t)}catch(l){f=[6,l],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.web=void 0;var m0=Mc,_0=ef,g0=tf,y0=Pc;function v0(o,e){var t,n,r;return h0(this,void 0,void 0,function(){var i,s;return p0(this,function(a){switch(a.label){case 0:return[4,(0,g0.webIO)()];case 1:return i=a.sent(),[4,i.readBinary(o)];case 2:return s=a.sent(),(0,m0.setEmissiveStrength)(s,e==null?void 0:e.emissiveStrength),[4,(0,_0.convertTextureWebP)(s,(r=(n=(t=e==null?void 0:e.transform)===null||t===void 0?void 0:t.texture)===null||n===void 0?void 0:n.resize)===null||r===void 0?void 0:r.resolution)];case 3:return a.sent(),[4,(0,y0.transform)(s,!1,e==null?void 0:e.transform)];case 4:return a.sent(),[4,i.writeBinary(s)];case 5:return[2,a.sent()]}})})}Ql.web=v0;Object.defineProperty(Sd,"__esModule",{value:!0});var dd=Sd.optimizer=void 0,A0=Ul,b0=Ql;dd=Sd.optimizer={node:A0.node,web:b0.web};/**
 * filesize
 *
 * @copyright 2022 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.0.6
 */const E0="array",T0="bit",Yp="bits",w0="byte",$p="bytes",eu="",C0="exponent",S0="function",Yc="iec",x0="Invalid number",B0="Invalid rounding method",Ku="jedec",M0="object",Zp=".",D0="round",R0="s",I0="kbit",P0="kB",F0=" ",L0="string",O0="0",mf={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function _f(o,{bits:e=!1,pad:t=!1,base:n=-1,round:r=2,locale:i=eu,localeOptions:s={},separator:a=eu,spacer:u=F0,symbols:f={},standard:l=eu,output:p=L0,fullform:d=!1,fullforms:_=[],exponent:A=-1,roundingMethod:E=D0,precision:v=0}={}){let T=A,I=Number(o),R=[],k=0,K=eu;n===-1&&l.length===0?(n=10,l=Ku):n===-1&&l.length>0?(l=l===Yc?Yc:Ku,n=l===Yc?2:10):(n=n===2?2:10,l=n===10||l===Ku?Ku:Yc);const ee=n===10?1e3:1024,_e=d===!0,Q=I<0,ne=Math[E];if(typeof o!="bigint"&&isNaN(o))throw new TypeError(x0);if(typeof ne!==S0)throw new TypeError(B0);if(Q&&(I=-I),(T===-1||isNaN(T))&&(T=Math.floor(Math.log(I)/Math.log(ee)),T<0&&(T=0)),T>8&&(v>0&&(v+=8-T),T=8),p===C0)return T;if(I===0)R[0]=0,K=R[1]=mf.symbol[l][e?Yp:$p][T];else{k=I/(n===2?Math.pow(2,T*10):Math.pow(1e3,T)),e&&(k=k*8,k>=ee&&T<8&&(k=k/ee,T++));const de=Math.pow(10,T>0?r:0);R[0]=ne(k*de)/de,R[0]===ee&&T<8&&A===-1&&(R[0]=1,T++),K=R[1]=n===10&&T===1?e?I0:P0:mf.symbol[l][e?Yp:$p][T]}if(Q&&(R[0]=-R[0]),v>0&&(R[0]=R[0].toPrecision(v)),R[1]=f[R[1]]||R[1],i===!0?R[0]=R[0].toLocaleString():i.length>0?R[0]=R[0].toLocaleString(i,s):a.length>0&&(R[0]=R[0].toString().replace(Zp,a)),t&&Number.isInteger(R[0])===!1&&r>0){const de=a||Zp,Ie=R[0].toString().split(de),Pe=Ie[1]||eu,Te=Pe.length,Ee=r-Te;R[0]=`${Ie[0]}${de}${Pe.padEnd(Te+Ee,O0)}`}return _e&&(R[1]=_[T]?_[T]:mf.fullform[l][T]+(e?T0:w0)+(R[0]===1?eu:R0)),p===E0?R:p===M0?{value:R[0],symbol:R[1],exponent:T,unit:K}:R.join(u)}var Mg={};Object.defineProperty(Mg,"__esModule",{value:!0});function N0(o){var e=o.fileName,t=o.arrayBuffer,n=o.blob,r=o.mimeType,i=r===void 0?"application/octet-stream":r;if(n!=null){Qp(e,n);return}if(t!=null){var s=new Blob([t],{type:i});Qp(e,s);return}throw new Error("Either arrayBuffer or blob must be provided")}var U0=Mg.default=N0;function Qp(o,e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=o,n.click()}function G0(o){let e,t,n,r,i,s,a,u;return{c(){e=xi("div"),t=wo("Drag and drop your "),n=xi("code"),r=wo(".glb"),i=wo(` file here

	`),s=xi("input"),this.h()},l(f){e=Bi(f,"DIV",{id:!0,class:!0});var l=to(e);t=Co(l,"Drag and drop your "),n=Bi(l,"CODE",{class:!0});var p=to(n);r=Co(p,".glb"),p.forEach(Rr),i=Co(l,` file here

	`),s=Bi(l,"INPUT",{type:!0,accept:!0,id:!0,class:!0}),l.forEach(Rr),this.h()},h(){Qn(n,"class","svelte-tnc7wr"),Qn(s,"type","file"),Qn(s,"accept",".glb"),Qn(s,"id","dropzoneInput"),Qn(s,"class","svelte-tnc7wr"),Qn(e,"id","dropzone"),Qn(e,"class","svelte-tnc7wr")},m(f,l){io(f,e,l),zr(e,t),zr(e,n),zr(n,r),zr(e,i),zr(e,s),a||(u=[ko(s,"change",o[2]),ko(e,"dragover",Oh(o[4])),ko(e,"drop",Oh(o[5])),ko(e,"drop",o[1]),ko(e,"click",o[6])],a=!0)},p:Vo,i:Vo,o:Vo,d(f){f&&Rr(e),a=!1,H_(u)}}}function k0(o,e,t){let{onChangeFile:n}=e,r;Cd(()=>{t(0,r=document.getElementById("dropzoneInput"))});function i(l){t(0,r.files=l.dataTransfer.files,r),n(r.files)}const s=()=>n(r.files);function a(l){Nh.call(this,o,l)}function u(l){Nh.call(this,o,l)}const f=()=>r.click();return o.$$set=l=>{"onChangeFile"in l&&t(3,n=l.onChangeFile)},[r,i,s,n,a,u,f]}class H0 extends ca{constructor(e){super(),la(this,e,k0,G0,fa,{onChangeFile:3})}}const W0=""+new URL("../../assets/github-mark-26d56f27.png",import.meta.url).href;function V0(o){let e,t,n,r;return{c(){e=xi("a"),t=wo("Link to "),n=xi("img"),this.h()},l(i){e=Bi(i,"A",{href:!0,target:!0,id:!0,class:!0});var s=to(e);t=Co(s,"Link to "),n=Bi(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(Rr),this.h()},h(){fy(n.src,r=W0)||Qn(n,"src",r),Qn(n,"alt","GitHub"),Qn(n,"class","svelte-8avlu"),Qn(e,"href","https://github.com/juunini/gltf-optimizer"),Qn(e,"target","_new"),Qn(e,"id","githubLink"),Qn(e,"class","svelte-8avlu")},m(i,s){io(i,e,s),zr(e,t),zr(e,n)},p:Vo,i:Vo,o:Vo,d(i){i&&Rr(e)}}}class j0 extends ca{constructor(e){super(),la(this,e,null,V0,fa,{})}}function z0(o){let e,t;return{c(){e=xi("h1"),t=wo("glTF Optimizer"),this.h()},l(n){e=Bi(n,"H1",{class:!0});var r=to(e);t=Co(r,"glTF Optimizer"),r.forEach(Rr),this.h()},h(){Qn(e,"class","svelte-gsi8vg")},m(n,r){io(n,e,r),zr(e,t)},p:Vo,i:Vo,o:Vo,d(n){n&&Rr(e)}}}class K0 extends ca{constructor(e){super(),la(this,e,null,z0,fa,{})}}function J0(o){let e,t;const n=o[1].default,r=dy(n,o,o[0],null);return{c(){e=xi("section"),r&&r.c(),this.h()},l(i){e=Bi(i,"SECTION",{class:!0});var s=to(e);r&&r.l(s),s.forEach(Rr),this.h()},h(){Qn(e,"class","display-section svelte-1n4yfso")},m(i,s){io(i,e,s),r&&r.m(e,null),t=!0},p(i,[s]){r&&r.p&&(!t||s&1)&&hy(r,n,i,i[0],t?my(n,i[0],s,null):py(i[0]),null)},i(i){t||(Gs(r,i),t=!0)},o(i){ks(r,i),t=!1},d(i){i&&Rr(e),r&&r.d(i)}}}function q0(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=i=>{"$$scope"in i&&t(0,r=i.$$scope)},[r,n]}class X0 extends ca{constructor(e){super(),la(this,e,q0,J0,fa,{})}}function Y0(o){let e,t,n,r,i,s;return{c(){e=xi("article"),t=xi("p"),n=wo(o[1]),r=Ro(),i=xi("p"),s=wo(o[2]),this.h()},l(a){e=Bi(a,"ARTICLE",{class:!0,id:!0});var u=to(e);t=Bi(u,"P",{class:!0});var f=to(t);n=Co(f,o[1]),f.forEach(Rr),r=Io(u),i=Bi(u,"P",{class:!0});var l=to(i);s=Co(l,o[2]),l.forEach(Rr),u.forEach(Rr),this.h()},h(){Qn(t,"class","svelte-1x1q1f0"),Qn(i,"class","svelte-1x1q1f0"),Qn(e,"class","display-article svelte-1x1q1f0"),Qn(e,"id",o[0])},m(a,u){io(a,e,u),zr(e,t),zr(t,n),zr(e,r),zr(e,i),zr(i,s)},p(a,[u]){u&2&&Uh(n,a[1]),u&4&&Uh(s,a[2]),u&1&&Qn(e,"id",a[0])},i:Vo,o:Vo,d(a){a&&Rr(e)}}}function $0(o,e,t){let{id:n}=e,{fileName:r}=e,{size:i}=e,{scene:s}=e;return Cd(()=>{setTimeout(()=>document.getElementById(n).appendChild(s),100)}),o.$$set=a=>{"id"in a&&t(0,n=a.id),"fileName"in a&&t(1,r=a.fileName),"size"in a&&t(2,i=a.size),"scene"in a&&t(3,s=a.scene)},[n,r,i,s]}class em extends ca{constructor(e){super(),la(this,e,$0,Y0,fa,{id:0,fileName:1,size:2,scene:3})}}function Z0(o){let e,t,n,r;return{c(){e=xi("button"),t=wo("Download"),this.h()},l(i){e=Bi(i,"BUTTON",{class:!0,type:!0});var s=to(e);t=Co(s,"Download"),s.forEach(Rr),this.h()},h(){Qn(e,"class","download-button svelte-1yp52zu"),Qn(e,"type","button"),e.disabled=o[0]},m(i,s){io(i,e,s),zr(e,t),n||(r=ko(e,"click",function(){W_(o[1])&&o[1].apply(this,arguments)}),n=!0)},p(i,[s]){o=i,s&1&&(e.disabled=o[0])},i:Vo,o:Vo,d(i){i&&Rr(e),n=!1,r()}}}function Q0(o,e,t){let{disabled:n}=e,{onClick:r}=e;return o.$$set=i=>{"disabled"in i&&t(0,n=i.disabled),"onClick"in i&&t(1,r=i.onClick)},[n,r]}class eE extends ca{constructor(e){super(),la(this,e,Q0,Z0,fa,{disabled:0,onClick:1})}}function tE(o){let e,t,n,r,i,s,a,u,f,l,p,d,_,A,E,v,T,I,R,k,K,ee,_e,Q,ne,de,Ie,Pe,Te,Ee,Se,Oe,We,j,_t,Qe,Je,ze,ct,He,P,nt,Fn,Yt,kn;return{c(){e=xi("div"),t=xi("label"),n=wo(`Emissive Strength
    `),r=xi("input"),i=Ro(),s=xi("div"),a=xi("label"),u=wo(`Simplify
    `),f=xi("input"),l=Ro(),p=xi("label"),d=wo(`Simplify Ratio
    `),_=xi("input"),E=Ro(),v=xi("label"),T=wo(`Simplify Error
    `),I=xi("input"),k=Ro(),K=xi("div"),ee=xi("label"),_e=wo(`Weld Tolerance
    `),Q=xi("input"),ne=Ro(),de=xi("div"),Ie=xi("label"),Pe=wo(`Texture Resolution
    `),Te=xi("input"),Ee=Ro(),Se=xi("label"),Oe=wo(`LANCZOS2
    `),We=xi("input"),_t=Ro(),Qe=xi("label"),Je=wo(`LANCZOS3
    `),ze=xi("input"),He=Ro(),P=xi("div"),nt=xi("button"),Fn=wo("Re Compress"),this.h()},l(Et){e=Bi(Et,"DIV",{class:!0});var dn=to(e);t=Bi(dn,"LABEL",{});var $t=to(t);n=Co($t,`Emissive Strength
    `),r=Bi($t,"INPUT",{type:!0,min:!0,step:!0,class:!0}),$t.forEach(Rr),dn.forEach(Rr),i=Io(Et),s=Bi(Et,"DIV",{class:!0});var vn=to(s);a=Bi(vn,"LABEL",{});var Cr=to(a);u=Co(Cr,`Simplify
    `),f=Bi(Cr,"INPUT",{type:!0}),Cr.forEach(Rr),l=Io(vn),p=Bi(vn,"LABEL",{});var Qr=to(p);d=Co(Qr,`Simplify Ratio
    `),_=Bi(Qr,"INPUT",{type:!0,max:!0,min:!0,step:!0,class:!0}),Qr.forEach(Rr),E=Io(vn),v=Bi(vn,"LABEL",{});var yi=to(v);T=Co(yi,`Simplify Error
    `),I=Bi(yi,"INPUT",{type:!0,max:!0,min:!0,step:!0,class:!0}),yi.forEach(Rr),vn.forEach(Rr),k=Io(Et),K=Bi(Et,"DIV",{class:!0});var Li=to(K);ee=Bi(Li,"LABEL",{});var Sr=to(ee);_e=Co(Sr,`Weld Tolerance
    `),Q=Bi(Sr,"INPUT",{type:!0,max:!0,min:!0,step:!0,class:!0}),Sr.forEach(Rr),Li.forEach(Rr),ne=Io(Et),de=Bi(Et,"DIV",{class:!0});var Mn=to(de);Ie=Bi(Mn,"LABEL",{});var vi=to(Ie);Pe=Co(vi,`Texture Resolution
    `),Te=Bi(vi,"INPUT",{type:!0,class:!0}),vi.forEach(Rr),Ee=Io(Mn),Se=Bi(Mn,"LABEL",{});var ar=to(Se);Oe=Co(ar,`LANCZOS2
    `),We=Bi(ar,"INPUT",{type:!0,name:!0}),ar.forEach(Rr),_t=Io(Mn),Qe=Bi(Mn,"LABEL",{});var Ae=to(Qe);Je=Co(Ae,`LANCZOS3
    `),ze=Bi(Ae,"INPUT",{type:!0,name:!0}),Ae.forEach(Rr),Mn.forEach(Rr),He=Io(Et),P=Bi(Et,"DIV",{class:!0});var fe=to(P);nt=Bi(fe,"BUTTON",{type:!0,class:!0});var ot=to(nt);Fn=Co(ot,"Re Compress"),ot.forEach(Rr),fe.forEach(Rr),this.h()},h(){Qn(r,"type","number"),Qn(r,"min","0"),Qn(r,"step","0.1"),Qn(r,"class","svelte-hjvgo6"),Qn(e,"class","box svelte-hjvgo6"),Qn(f,"type","checkbox"),Qn(_,"type","number"),_.disabled=A=!o[2].enabled,Qn(_,"max","1"),Qn(_,"min","0"),Qn(_,"step","0.01"),Qn(_,"class","svelte-hjvgo6"),Qn(I,"type","number"),I.disabled=R=!o[2].enabled,Qn(I,"max","1"),Qn(I,"min","0"),Qn(I,"step","0.01"),Qn(I,"class","svelte-hjvgo6"),Qn(s,"class","box svelte-hjvgo6"),Qn(Q,"type","number"),Qn(Q,"max","1"),Qn(Q,"min","0"),Qn(Q,"step","0.0001"),Qn(Q,"class","svelte-hjvgo6"),Qn(K,"class","box svelte-hjvgo6"),Qn(Te,"type","number"),Qn(Te,"class","svelte-hjvgo6"),Qn(We,"type","radio"),Qn(We,"name","texture-resize-filter"),We.__value="LANCZOS2",We.value=We.__value,We.checked=j=o[3].resize.filter==="LANCZOS2",o[13][0].push(We),Qn(ze,"type","radio"),Qn(ze,"name","texture-resize-filter"),ze.__value="LANCZOS3",ze.value=ze.__value,ze.checked=ct=o[3].resize.filter==="LANCZOS3",o[13][0].push(ze),Qn(de,"class","box svelte-hjvgo6"),Qn(nt,"type","button"),nt.disabled=o[5],Qn(nt,"class","svelte-hjvgo6"),Qn(P,"class","box svelte-hjvgo6")},m(Et,dn){io(Et,e,dn),zr(e,t),zr(t,n),zr(t,r),vs(r,o[0]),io(Et,i,dn),io(Et,s,dn),zr(s,a),zr(a,u),zr(a,f),f.checked=o[2].enabled,zr(s,l),zr(s,p),zr(p,d),zr(p,_),vs(_,o[2].ratio),zr(s,E),zr(s,v),zr(v,T),zr(v,I),vs(I,o[2].error),io(Et,k,dn),io(Et,K,dn),zr(K,ee),zr(ee,_e),zr(ee,Q),vs(Q,o[1].tolerance),io(Et,ne,dn),io(Et,de,dn),zr(de,Ie),zr(Ie,Pe),zr(Ie,Te),vs(Te,o[3].resize.resolution),zr(de,Ee),zr(de,Se),zr(Se,Oe),zr(Se,We),We.checked=We.__value===o[3].resize.filter,zr(de,_t),zr(de,Qe),zr(Qe,Je),zr(Qe,ze),ze.checked=ze.__value===o[3].resize.filter,io(Et,He,dn),io(Et,P,dn),zr(P,nt),zr(nt,Fn),Yt||(kn=[ko(r,"input",o[6]),ko(f,"change",o[7]),ko(_,"input",o[8]),ko(I,"input",o[9]),ko(Q,"input",o[10]),ko(Te,"input",o[11]),ko(We,"change",o[12]),ko(ze,"change",o[14]),ko(nt,"click",function(){W_(o[4])&&o[4].apply(this,arguments)})],Yt=!0)},p(Et,[dn]){o=Et,dn&1&&ws(r.value)!==o[0]&&vs(r,o[0]),dn&4&&(f.checked=o[2].enabled),dn&4&&A!==(A=!o[2].enabled)&&(_.disabled=A),dn&4&&ws(_.value)!==o[2].ratio&&vs(_,o[2].ratio),dn&4&&R!==(R=!o[2].enabled)&&(I.disabled=R),dn&4&&ws(I.value)!==o[2].error&&vs(I,o[2].error),dn&2&&ws(Q.value)!==o[1].tolerance&&vs(Q,o[1].tolerance),dn&8&&ws(Te.value)!==o[3].resize.resolution&&vs(Te,o[3].resize.resolution),dn&8&&j!==(j=o[3].resize.filter==="LANCZOS2")&&(We.checked=j),dn&8&&(We.checked=We.__value===o[3].resize.filter),dn&8&&ct!==(ct=o[3].resize.filter==="LANCZOS3")&&(ze.checked=ct),dn&8&&(ze.checked=ze.__value===o[3].resize.filter),dn&32&&(nt.disabled=o[5])},i:Vo,o:Vo,d(Et){Et&&Rr(e),Et&&Rr(i),Et&&Rr(s),Et&&Rr(k),Et&&Rr(K),Et&&Rr(ne),Et&&Rr(de),o[13][0].splice(o[13][0].indexOf(We),1),o[13][0].splice(o[13][0].indexOf(ze),1),Et&&Rr(He),Et&&Rr(P),Yt=!1,H_(kn)}}}function nE(o,e,t){let{emissiveStrength:n}=e,{weld:r}=e,{simplify:i}=e,{texture:s}=e,{reCompress:a}=e,{disabledReCompress:u}=e;const f=[[]];function l(){n=ws(this.value),t(0,n)}function p(){i.enabled=this.checked,t(2,i)}function d(){i.ratio=ws(this.value),t(2,i)}function _(){i.error=ws(this.value),t(2,i)}function A(){r.tolerance=ws(this.value),t(1,r)}function E(){s.resize.resolution=ws(this.value),t(3,s)}function v(){s.resize.filter=this.__value,t(3,s)}function T(){s.resize.filter=this.__value,t(3,s)}return o.$$set=I=>{"emissiveStrength"in I&&t(0,n=I.emissiveStrength),"weld"in I&&t(1,r=I.weld),"simplify"in I&&t(2,i=I.simplify),"texture"in I&&t(3,s=I.texture),"reCompress"in I&&t(4,a=I.reCompress),"disabledReCompress"in I&&t(5,u=I.disabledReCompress)},[n,r,i,s,a,u,l,p,d,_,A,E,v,f,T]}class rE extends ca{constructor(e){super(),la(this,e,nE,tE,fa,{emissiveStrength:0,weld:1,simplify:2,texture:3,reCompress:4,disabledReCompress:5})}}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const bh="148",tu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},iE=0,tm=1,oE=2,Dg=1,sE=2,uc=3,ua=0,cs=1,nf=2,$c=3,aa=0,wu=1,nm=2,rm=3,im=4,aE=5,vu=100,uE=101,cE=102,om=103,sm=104,lE=200,fE=201,dE=202,hE=203,Rg=204,Ig=205,pE=206,mE=207,_E=208,gE=209,yE=210,vE=0,AE=1,bE=2,hd=3,EE=4,TE=5,wE=6,CE=7,Pg=0,SE=1,xE=2,js=0,BE=1,ME=2,DE=3,RE=4,IE=5,Fg=300,Mu=301,Du=302,pd=303,md=304,rf=306,Ru=1e3,is=1001,Ll=1002,To=1003,_d=1004,Cl=1005,qo=1006,Lg=1007,Va=1008,ja=1009,PE=1010,FE=1011,Og=1012,LE=1013,Ra=1014,oa=1015,Ec=1016,OE=1017,NE=1018,Cu=1020,UE=1021,GE=1022,os=1023,kE=1024,HE=1025,Oa=1026,Iu=1027,WE=1028,VE=1029,jE=1030,zE=1031,KE=1033,gf=33776,yf=33777,vf=33778,Af=33779,am=35840,um=35841,cm=35842,lm=35843,JE=36196,fm=37492,dm=37496,hm=37808,pm=37809,mm=37810,_m=37811,gm=37812,ym=37813,vm=37814,Am=37815,bm=37816,Em=37817,Tm=37818,wm=37819,Cm=37820,Sm=37821,xm=36492,Tc=2300,Pu=2301,bf=2302,Bm=2400,Mm=2401,Dm=2402,qE=2500,XE=1,Ng=2,za=3e3,Vi=3001,YE=3200,$E=3201,Ug=0,ZE=1,Es="srgb",wc="srgb-linear",Ef=7680,QE=519,gd=35044,Rm="300 es",yd=1035;class Ya{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,e);e.target=null}}}const Do=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Im=1234567;const _c=Math.PI/180,Cc=180/Math.PI;function _s(){const o=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Do[o&255]+Do[o>>8&255]+Do[o>>16&255]+Do[o>>24&255]+"-"+Do[e&255]+Do[e>>8&255]+"-"+Do[e>>16&15|64]+Do[e>>24&255]+"-"+Do[t&63|128]+Do[t>>8&255]+"-"+Do[t>>16&255]+Do[t>>24&255]+Do[n&255]+Do[n>>8&255]+Do[n>>16&255]+Do[n>>24&255]).toLowerCase()}function Po(o,e,t){return Math.max(e,Math.min(t,o))}function Eh(o,e){return(o%e+e)%e}function eT(o,e,t,n,r){return n+(o-e)*(r-n)/(t-e)}function tT(o,e,t){return o!==e?(t-o)/(e-o):0}function gc(o,e,t){return(1-t)*o+t*e}function nT(o,e,t,n){return gc(o,e,1-Math.exp(-t*n))}function rT(o,e=1){return e-Math.abs(Eh(o,e*2)-e)}function iT(o,e,t){return o<=e?0:o>=t?1:(o=(o-e)/(t-e),o*o*(3-2*o))}function oT(o,e,t){return o<=e?0:o>=t?1:(o=(o-e)/(t-e),o*o*o*(o*(o*6-15)+10))}function sT(o,e){return o+Math.floor(Math.random()*(e-o+1))}function aT(o,e){return o+Math.random()*(e-o)}function uT(o){return o*(.5-Math.random())}function cT(o){o!==void 0&&(Im=o);let e=Im+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lT(o){return o*_c}function fT(o){return o*Cc}function vd(o){return(o&o-1)===0&&o!==0}function Gg(o){return Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function Ol(o){return Math.pow(2,Math.floor(Math.log(o)/Math.LN2))}function dT(o,e,t,n,r){const i=Math.cos,s=Math.sin,a=i(t/2),u=s(t/2),f=i((e+n)/2),l=s((e+n)/2),p=i((e-n)/2),d=s((e-n)/2),_=i((n-e)/2),A=s((n-e)/2);switch(r){case"XYX":o.set(a*l,u*p,u*d,a*f);break;case"YZY":o.set(u*d,a*l,u*p,a*f);break;case"ZXZ":o.set(u*p,u*d,a*l,a*f);break;case"XZX":o.set(a*l,u*A,u*_,a*f);break;case"YXY":o.set(u*_,a*l,u*A,a*f);break;case"ZYZ":o.set(u*A,u*_,a*l,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ws(o,e){switch(e.constructor){case Float32Array:return o;case Uint16Array:return o/65535;case Uint8Array:return o/255;case Int16Array:return Math.max(o/32767,-1);case Int8Array:return Math.max(o/127,-1);default:throw new Error("Invalid component type.")}}function Xi(o,e){switch(e.constructor){case Float32Array:return o;case Uint16Array:return Math.round(o*65535);case Uint8Array:return Math.round(o*255);case Int16Array:return Math.round(o*32767);case Int8Array:return Math.round(o*127);default:throw new Error("Invalid component type.")}}var hT=Object.freeze({__proto__:null,DEG2RAD:_c,RAD2DEG:Cc,generateUUID:_s,clamp:Po,euclideanModulo:Eh,mapLinear:eT,inverseLerp:tT,lerp:gc,damp:nT,pingpong:rT,smoothstep:iT,smootherstep:oT,randInt:sT,randFloat:aT,randFloatSpread:uT,seededRandom:cT,degToRad:lT,radToDeg:fT,isPowerOfTwo:vd,ceilPowerOfTwo:Gg,floorPowerOfTwo:Ol,setQuaternionFromProperEuler:dT,normalize:Xi,denormalize:Ws});class Xr{constructor(e=0,t=0){Xr.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zo{constructor(){Zo.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,s,a,u,f){const l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=u,l[6]=n,l[7]=s,l[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],u=n[6],f=n[1],l=n[4],p=n[7],d=n[2],_=n[5],A=n[8],E=r[0],v=r[3],T=r[6],I=r[1],R=r[4],k=r[7],K=r[2],ee=r[5],_e=r[8];return i[0]=s*E+a*I+u*K,i[3]=s*v+a*R+u*ee,i[6]=s*T+a*k+u*_e,i[1]=f*E+l*I+p*K,i[4]=f*v+l*R+p*ee,i[7]=f*T+l*k+p*_e,i[2]=d*E+_*I+A*K,i[5]=d*v+_*R+A*ee,i[8]=d*T+_*k+A*_e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8];return t*s*l-t*a*f-n*i*l+n*a*u+r*i*f-r*s*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=l*s-a*f,d=a*u-l*i,_=f*i-s*u,A=t*p+n*d+r*_;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=p*E,e[1]=(r*f-l*n)*E,e[2]=(a*n-r*s)*E,e[3]=d*E,e[4]=(l*t-r*u)*E,e[5]=(r*i-a*t)*E,e[6]=_*E,e[7]=(n*u-f*t)*E,e[8]=(s*t-n*i)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const u=Math.cos(i),f=Math.sin(i);return this.set(n*u,n*f,-n*(u*s+f*a)+s+e,-r*f,r*u,-r*(-f*s+u*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Tf.makeScale(e,t)),this}rotate(e){return this.premultiply(Tf.makeRotation(-e)),this}translate(e,t){return this.premultiply(Tf.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Tf=new Zo;function kg(o){for(let e=o.length-1;e>=0;--e)if(o[e]>=65535)return!0;return!1}function Sc(o){return document.createElementNS("http://www.w3.org/1999/xhtml",o)}function Na(o){return o<.04045?o*.0773993808:Math.pow(o*.9478672986+.0521327014,2.4)}function Sl(o){return o<.0031308?o*12.92:1.055*Math.pow(o,.41666)-.055}const wf={[Es]:{[wc]:Na},[wc]:{[Es]:Sl}},Oo={legacyMode:!0,get workingColorSpace(){return wc},set workingColorSpace(o){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(o,e,t){if(this.legacyMode||e===t||!e||!t)return o;if(wf[e]&&wf[e][t]!==void 0){const n=wf[e][t];return o.r=n(o.r),o.g=n(o.g),o.b=n(o.b),o}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(o,e){return this.convert(o,this.workingColorSpace,e)},toWorkingColorSpace:function(o,e){return this.convert(o,e,this.workingColorSpace)}},Hg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_o={r:0,g:0,b:0},ds={h:0,s:0,l:0},Zc={h:0,s:0,l:0};function Cf(o,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+(e-o)*6*t:t<1/2?e:t<2/3?o+(e-o)*6*(2/3-t):o}function Qc(o,e){return e.r=o.r,e.g=o.g,e.b=o.b,e}class _i{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Es){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Oo.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Oo.workingColorSpace){return this.r=e,this.g=t,this.b=n,Oo.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Oo.workingColorSpace){if(e=Eh(e,1),t=Po(t,0,1),n=Po(n,0,1),t===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,s=2*n-i;this.r=Cf(s,i,e+1/3),this.g=Cf(s,i,e),this.b=Cf(s,i,e-1/3)}return Oo.toWorkingColorSpace(this,r),this}setStyle(e,t=Es){function n(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,Oo.toWorkingColorSpace(this,t),n(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,Oo.toWorkingColorSpace(this,t),n(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const u=parseFloat(i[1])/360,f=parseFloat(i[2])/100,l=parseFloat(i[3])/100;return n(i[4]),this.setHSL(u,f,l,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,Oo.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,Oo.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Es){const n=Hg[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Na(e.r),this.g=Na(e.g),this.b=Na(e.b),this}copyLinearToSRGB(e){return this.r=Sl(e.r),this.g=Sl(e.g),this.b=Sl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Es){return Oo.fromWorkingColorSpace(Qc(this,_o),e),Po(_o.r*255,0,255)<<16^Po(_o.g*255,0,255)<<8^Po(_o.b*255,0,255)<<0}getHexString(e=Es){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Oo.workingColorSpace){Oo.fromWorkingColorSpace(Qc(this,_o),t);const n=_o.r,r=_o.g,i=_o.b,s=Math.max(n,r,i),a=Math.min(n,r,i);let u,f;const l=(a+s)/2;if(a===s)u=0,f=0;else{const p=s-a;switch(f=l<=.5?p/(s+a):p/(2-s-a),s){case n:u=(r-i)/p+(r<i?6:0);break;case r:u=(i-n)/p+2;break;case i:u=(n-r)/p+4;break}u/=6}return e.h=u,e.s=f,e.l=l,e}getRGB(e,t=Oo.workingColorSpace){return Oo.fromWorkingColorSpace(Qc(this,_o),t),e.r=_o.r,e.g=_o.g,e.b=_o.b,e}getStyle(e=Es){return Oo.fromWorkingColorSpace(Qc(this,_o),e),e!==Es?`color(${e} ${_o.r} ${_o.g} ${_o.b})`:`rgb(${_o.r*255|0},${_o.g*255|0},${_o.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(ds),ds.h+=e,ds.s+=t,ds.l+=n,this.setHSL(ds.h,ds.s,ds.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ds),e.getHSL(Zc);const n=gc(ds.h,Zc.h,t),r=gc(ds.s,Zc.s,t),i=gc(ds.l,Zc.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}_i.NAMES=Hg;let ru;class Wg{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ru===void 0&&(ru=Sc("canvas")),ru.width=e.width,ru.height=e.height;const n=ru.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ru}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Sc("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let s=0;s<i.length;s++)i[s]=Na(i[s]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Na(t[n]/255)*255):t[n]=Na(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Vg{constructor(e=null){this.isSource=!0,this.uuid=_s(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let i;if(Array.isArray(r)){i=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?i.push(Sf(r[s].image)):i.push(Sf(r[s]))}else i=Sf(r);n.url=i}return t||(e.images[this.uuid]=n),n}}function Sf(o){return typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap?Wg.getDataURL(o):o.data?{data:Array.from(o.data),width:o.width,height:o.height,type:o.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pT=0;class xo extends Ya{constructor(e=xo.DEFAULT_IMAGE,t=xo.DEFAULT_MAPPING,n=is,r=is,i=qo,s=Va,a=os,u=ja,f=xo.DEFAULT_ANISOTROPY,l=za){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pT++}),this.uuid=_s(),this.name="",this.source=new Vg(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=u,this.offset=new Xr(0,0),this.repeat=new Xr(1,1),this.center=new Xr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ru:e.x=e.x-Math.floor(e.x);break;case is:e.x=e.x<0?0:1;break;case Ll:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ru:e.y=e.y-Math.floor(e.y);break;case is:e.y=e.y<0?0:1;break;case Ll:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}xo.DEFAULT_IMAGE=null;xo.DEFAULT_MAPPING=Fg;xo.DEFAULT_ANISOTROPY=1;class Yi{constructor(e=0,t=0,n=0,r=1){Yi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const u=e.elements,f=u[0],l=u[4],p=u[8],d=u[1],_=u[5],A=u[9],E=u[2],v=u[6],T=u[10];if(Math.abs(l-d)<.01&&Math.abs(p-E)<.01&&Math.abs(A-v)<.01){if(Math.abs(l+d)<.1&&Math.abs(p+E)<.1&&Math.abs(A+v)<.1&&Math.abs(f+_+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(f+1)/2,k=(_+1)/2,K=(T+1)/2,ee=(l+d)/4,_e=(p+E)/4,Q=(A+v)/4;return R>k&&R>K?R<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(R),r=ee/n,i=_e/n):k>K?k<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(k),n=ee/r,i=Q/r):K<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(K),n=_e/i,r=Q/i),this.set(n,r,i,t),this}let I=Math.sqrt((v-A)*(v-A)+(p-E)*(p-E)+(d-l)*(d-l));return Math.abs(I)<.001&&(I=1),this.x=(v-A)/I,this.y=(p-E)/I,this.z=(d-l)/I,this.w=Math.acos((f+_+T-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ka extends Ya{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yi(0,0,e,t),this.scissorTest=!1,this.viewport=new Yi(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new xo(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:qo,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Vg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jg extends xo{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=To,this.minFilter=To,this.wrapR=is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mT extends xo{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=To,this.minFilter=To,this.wrapR=is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ms{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,a){let u=n[r+0],f=n[r+1],l=n[r+2],p=n[r+3];const d=i[s+0],_=i[s+1],A=i[s+2],E=i[s+3];if(a===0){e[t+0]=u,e[t+1]=f,e[t+2]=l,e[t+3]=p;return}if(a===1){e[t+0]=d,e[t+1]=_,e[t+2]=A,e[t+3]=E;return}if(p!==E||u!==d||f!==_||l!==A){let v=1-a;const T=u*d+f*_+l*A+p*E,I=T>=0?1:-1,R=1-T*T;if(R>Number.EPSILON){const K=Math.sqrt(R),ee=Math.atan2(K,T*I);v=Math.sin(v*ee)/K,a=Math.sin(a*ee)/K}const k=a*I;if(u=u*v+d*k,f=f*v+_*k,l=l*v+A*k,p=p*v+E*k,v===1-a){const K=1/Math.sqrt(u*u+f*f+l*l+p*p);u*=K,f*=K,l*=K,p*=K}}e[t]=u,e[t+1]=f,e[t+2]=l,e[t+3]=p}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],u=n[r+1],f=n[r+2],l=n[r+3],p=i[s],d=i[s+1],_=i[s+2],A=i[s+3];return e[t]=a*A+l*p+u*_-f*d,e[t+1]=u*A+l*d+f*p-a*_,e[t+2]=f*A+l*_+a*d-u*p,e[t+3]=l*A-a*p-u*d-f*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,u=Math.sin,f=a(n/2),l=a(r/2),p=a(i/2),d=u(n/2),_=u(r/2),A=u(i/2);switch(s){case"XYZ":this._x=d*l*p+f*_*A,this._y=f*_*p-d*l*A,this._z=f*l*A+d*_*p,this._w=f*l*p-d*_*A;break;case"YXZ":this._x=d*l*p+f*_*A,this._y=f*_*p-d*l*A,this._z=f*l*A-d*_*p,this._w=f*l*p+d*_*A;break;case"ZXY":this._x=d*l*p-f*_*A,this._y=f*_*p+d*l*A,this._z=f*l*A+d*_*p,this._w=f*l*p-d*_*A;break;case"ZYX":this._x=d*l*p-f*_*A,this._y=f*_*p+d*l*A,this._z=f*l*A-d*_*p,this._w=f*l*p+d*_*A;break;case"YZX":this._x=d*l*p+f*_*A,this._y=f*_*p+d*l*A,this._z=f*l*A-d*_*p,this._w=f*l*p-d*_*A;break;case"XZY":this._x=d*l*p-f*_*A,this._y=f*_*p-d*l*A,this._z=f*l*A+d*_*p,this._w=f*l*p+d*_*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],u=t[9],f=t[2],l=t[6],p=t[10],d=n+a+p;if(d>0){const _=.5/Math.sqrt(d+1);this._w=.25/_,this._x=(l-u)*_,this._y=(i-f)*_,this._z=(s-r)*_}else if(n>a&&n>p){const _=2*Math.sqrt(1+n-a-p);this._w=(l-u)/_,this._x=.25*_,this._y=(r+s)/_,this._z=(i+f)/_}else if(a>p){const _=2*Math.sqrt(1+a-n-p);this._w=(i-f)/_,this._x=(r+s)/_,this._y=.25*_,this._z=(u+l)/_}else{const _=2*Math.sqrt(1+p-n-a);this._w=(s-r)/_,this._x=(i+f)/_,this._y=(u+l)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Po(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,u=t._y,f=t._z,l=t._w;return this._x=n*l+s*a+r*f-i*u,this._y=r*l+s*u+i*a-n*f,this._z=i*l+s*f+n*u-r*a,this._w=s*l-n*a-r*u-i*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const u=1-a*a;if(u<=Number.EPSILON){const _=1-t;return this._w=_*s+t*this._w,this._x=_*n+t*this._x,this._y=_*r+t*this._y,this._z=_*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),l=Math.atan2(f,a),p=Math.sin((1-t)*l)/f,d=Math.sin(t*l)/f;return this._w=s*p+this._w*d,this._x=n*p+this._x*d,this._y=r*p+this._y*d,this._z=i*p+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ke{constructor(e=0,t=0,n=0){ke.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Pm.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Pm.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,u=e.w,f=u*t+s*r-a*n,l=u*n+a*t-i*r,p=u*r+i*n-s*t,d=-i*t-s*n-a*r;return this.x=f*u+d*-i+l*-a-p*-s,this.y=l*u+d*-s+p*-i-f*-a,this.z=p*u+d*-a+f*-s-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,u=t.z;return this.x=r*u-i*a,this.y=i*s-n*u,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return xf.copy(this).projectOnVector(e),this.sub(xf)}reflect(e){return this.sub(xf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Po(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xf=new ke,Pm=new Ms;class $a{constructor(e=new ke(1/0,1/0,1/0),t=new ke(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let u=0,f=e.length;u<f;u+=3){const l=e[u],p=e[u+1],d=e[u+2];l<t&&(t=l),p<n&&(n=p),d<r&&(r=d),l>i&&(i=l),p>s&&(s=p),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let u=0,f=e.count;u<f;u++){const l=e.getX(u),p=e.getY(u),d=e.getZ(u);l<t&&(t=l),p<n&&(n=p),d<r&&(r=d),l>i&&(i=l),p>s&&(s=p),d>a&&(a=d)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ha.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const i=n.attributes.position;for(let s=0,a=i.count;s<a;s++)ha.fromBufferAttribute(i,s).applyMatrix4(e.matrixWorld),this.expandByPoint(ha)}else n.boundingBox===null&&n.computeBoundingBox(),Bf.copy(n.boundingBox),Bf.applyMatrix4(e.matrixWorld),this.union(Bf);const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ha),ha.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ju),el.subVectors(this.max,Ju),iu.subVectors(e.a,Ju),ou.subVectors(e.b,Ju),su.subVectors(e.c,Ju),Js.subVectors(ou,iu),qs.subVectors(su,ou),pa.subVectors(iu,su);let t=[0,-Js.z,Js.y,0,-qs.z,qs.y,0,-pa.z,pa.y,Js.z,0,-Js.x,qs.z,0,-qs.x,pa.z,0,-pa.x,-Js.y,Js.x,0,-qs.y,qs.x,0,-pa.y,pa.x,0];return!Mf(t,iu,ou,su,el)||(t=[1,0,0,0,1,0,0,0,1],!Mf(t,iu,ou,su,el))?!1:(tl.crossVectors(Js,qs),t=[tl.x,tl.y,tl.z],Mf(t,iu,ou,su,el))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ha.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ha).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Is[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Is[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Is[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Is[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Is[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Is[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Is[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Is[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Is),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Is=[new ke,new ke,new ke,new ke,new ke,new ke,new ke,new ke],ha=new ke,Bf=new $a,iu=new ke,ou=new ke,su=new ke,Js=new ke,qs=new ke,pa=new ke,Ju=new ke,el=new ke,tl=new ke,ma=new ke;function Mf(o,e,t,n,r){for(let i=0,s=o.length-3;i<=s;i+=3){ma.fromArray(o,i);const a=r.x*Math.abs(ma.x)+r.y*Math.abs(ma.y)+r.z*Math.abs(ma.z),u=e.dot(ma),f=t.dot(ma),l=n.dot(ma);if(Math.max(-Math.max(u,f,l),Math.min(u,f,l))>a)return!1}return!0}const _T=new $a,qu=new ke,Df=new ke;class Uu{constructor(e=new ke,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_T.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qu.subVectors(e,this.center);const t=qu.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(qu,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Df.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qu.copy(e.center).add(Df)),this.expandByPoint(qu.copy(e.center).sub(Df))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ps=new ke,Rf=new ke,nl=new ke,Xs=new ke,If=new ke,rl=new ke,Pf=new ke;class Th{constructor(e=new ke,t=new ke(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ps)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ps.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ps.copy(this.direction).multiplyScalar(t).add(this.origin),Ps.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Rf.copy(e).add(t).multiplyScalar(.5),nl.copy(t).sub(e).normalize(),Xs.copy(this.origin).sub(Rf);const i=e.distanceTo(t)*.5,s=-this.direction.dot(nl),a=Xs.dot(this.direction),u=-Xs.dot(nl),f=Xs.lengthSq(),l=Math.abs(1-s*s);let p,d,_,A;if(l>0)if(p=s*u-a,d=s*a-u,A=i*l,p>=0)if(d>=-A)if(d<=A){const E=1/l;p*=E,d*=E,_=p*(p+s*d+2*a)+d*(s*p+d+2*u)+f}else d=i,p=Math.max(0,-(s*d+a)),_=-p*p+d*(d+2*u)+f;else d=-i,p=Math.max(0,-(s*d+a)),_=-p*p+d*(d+2*u)+f;else d<=-A?(p=Math.max(0,-(-s*i+a)),d=p>0?-i:Math.min(Math.max(-i,-u),i),_=-p*p+d*(d+2*u)+f):d<=A?(p=0,d=Math.min(Math.max(-i,-u),i),_=d*(d+2*u)+f):(p=Math.max(0,-(s*i+a)),d=p>0?i:Math.min(Math.max(-i,-u),i),_=-p*p+d*(d+2*u)+f);else d=s>0?-i:i,p=Math.max(0,-(s*d+a)),_=-p*p+d*(d+2*u)+f;return n&&n.copy(this.direction).multiplyScalar(p).add(this.origin),r&&r.copy(nl).multiplyScalar(d).add(Rf),_}intersectSphere(e,t){Ps.subVectors(e.center,this.origin);const n=Ps.dot(this.direction),r=Ps.dot(Ps)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,u=n+s;return a<0&&u<0?null:a<0?this.at(u,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,u;const f=1/this.direction.x,l=1/this.direction.y,p=1/this.direction.z,d=this.origin;return f>=0?(n=(e.min.x-d.x)*f,r=(e.max.x-d.x)*f):(n=(e.max.x-d.x)*f,r=(e.min.x-d.x)*f),l>=0?(i=(e.min.y-d.y)*l,s=(e.max.y-d.y)*l):(i=(e.max.y-d.y)*l,s=(e.min.y-d.y)*l),n>s||i>r||((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),p>=0?(a=(e.min.z-d.z)*p,u=(e.max.z-d.z)*p):(a=(e.max.z-d.z)*p,u=(e.min.z-d.z)*p),n>u||a>r)||((a>n||n!==n)&&(n=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ps)!==null}intersectTriangle(e,t,n,r,i){If.subVectors(t,e),rl.subVectors(n,e),Pf.crossVectors(If,rl);let s=this.direction.dot(Pf),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Xs.subVectors(this.origin,e);const u=a*this.direction.dot(rl.crossVectors(Xs,rl));if(u<0)return null;const f=a*this.direction.dot(If.cross(Xs));if(f<0||u+f>s)return null;const l=-a*Xs.dot(Pf);return l<0?null:this.at(l/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ei{constructor(){Ei.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,s,a,u,f,l,p,d,_,A,E,v){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=i,T[5]=s,T[9]=a,T[13]=u,T[2]=f,T[6]=l,T[10]=p,T[14]=d,T[3]=_,T[7]=A,T[11]=E,T[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ei().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/au.setFromMatrixColumn(e,0).length(),i=1/au.setFromMatrixColumn(e,1).length(),s=1/au.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),u=Math.cos(r),f=Math.sin(r),l=Math.cos(i),p=Math.sin(i);if(e.order==="XYZ"){const d=s*l,_=s*p,A=a*l,E=a*p;t[0]=u*l,t[4]=-u*p,t[8]=f,t[1]=_+A*f,t[5]=d-E*f,t[9]=-a*u,t[2]=E-d*f,t[6]=A+_*f,t[10]=s*u}else if(e.order==="YXZ"){const d=u*l,_=u*p,A=f*l,E=f*p;t[0]=d+E*a,t[4]=A*a-_,t[8]=s*f,t[1]=s*p,t[5]=s*l,t[9]=-a,t[2]=_*a-A,t[6]=E+d*a,t[10]=s*u}else if(e.order==="ZXY"){const d=u*l,_=u*p,A=f*l,E=f*p;t[0]=d-E*a,t[4]=-s*p,t[8]=A+_*a,t[1]=_+A*a,t[5]=s*l,t[9]=E-d*a,t[2]=-s*f,t[6]=a,t[10]=s*u}else if(e.order==="ZYX"){const d=s*l,_=s*p,A=a*l,E=a*p;t[0]=u*l,t[4]=A*f-_,t[8]=d*f+E,t[1]=u*p,t[5]=E*f+d,t[9]=_*f-A,t[2]=-f,t[6]=a*u,t[10]=s*u}else if(e.order==="YZX"){const d=s*u,_=s*f,A=a*u,E=a*f;t[0]=u*l,t[4]=E-d*p,t[8]=A*p+_,t[1]=p,t[5]=s*l,t[9]=-a*l,t[2]=-f*l,t[6]=_*p+A,t[10]=d-E*p}else if(e.order==="XZY"){const d=s*u,_=s*f,A=a*u,E=a*f;t[0]=u*l,t[4]=-p,t[8]=f*l,t[1]=d*p+E,t[5]=s*l,t[9]=_*p-A,t[2]=A*p-_,t[6]=a*l,t[10]=E*p+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gT,e,yT)}lookAt(e,t,n){const r=this.elements;return Xo.subVectors(e,t),Xo.lengthSq()===0&&(Xo.z=1),Xo.normalize(),Ys.crossVectors(n,Xo),Ys.lengthSq()===0&&(Math.abs(n.z)===1?Xo.x+=1e-4:Xo.z+=1e-4,Xo.normalize(),Ys.crossVectors(n,Xo)),Ys.normalize(),il.crossVectors(Xo,Ys),r[0]=Ys.x,r[4]=il.x,r[8]=Xo.x,r[1]=Ys.y,r[5]=il.y,r[9]=Xo.y,r[2]=Ys.z,r[6]=il.z,r[10]=Xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],u=n[8],f=n[12],l=n[1],p=n[5],d=n[9],_=n[13],A=n[2],E=n[6],v=n[10],T=n[14],I=n[3],R=n[7],k=n[11],K=n[15],ee=r[0],_e=r[4],Q=r[8],ne=r[12],de=r[1],Ie=r[5],Pe=r[9],Te=r[13],Ee=r[2],Se=r[6],Oe=r[10],We=r[14],j=r[3],_t=r[7],Qe=r[11],Je=r[15];return i[0]=s*ee+a*de+u*Ee+f*j,i[4]=s*_e+a*Ie+u*Se+f*_t,i[8]=s*Q+a*Pe+u*Oe+f*Qe,i[12]=s*ne+a*Te+u*We+f*Je,i[1]=l*ee+p*de+d*Ee+_*j,i[5]=l*_e+p*Ie+d*Se+_*_t,i[9]=l*Q+p*Pe+d*Oe+_*Qe,i[13]=l*ne+p*Te+d*We+_*Je,i[2]=A*ee+E*de+v*Ee+T*j,i[6]=A*_e+E*Ie+v*Se+T*_t,i[10]=A*Q+E*Pe+v*Oe+T*Qe,i[14]=A*ne+E*Te+v*We+T*Je,i[3]=I*ee+R*de+k*Ee+K*j,i[7]=I*_e+R*Ie+k*Se+K*_t,i[11]=I*Q+R*Pe+k*Oe+K*Qe,i[15]=I*ne+R*Te+k*We+K*Je,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],u=e[9],f=e[13],l=e[2],p=e[6],d=e[10],_=e[14],A=e[3],E=e[7],v=e[11],T=e[15];return A*(+i*u*p-r*f*p-i*a*d+n*f*d+r*a*_-n*u*_)+E*(+t*u*_-t*f*d+i*s*d-r*s*_+r*f*l-i*u*l)+v*(+t*f*p-t*a*_-i*s*p+n*s*_+i*a*l-n*f*l)+T*(-r*a*l-t*u*p+t*a*d+r*s*p-n*s*d+n*u*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],u=e[6],f=e[7],l=e[8],p=e[9],d=e[10],_=e[11],A=e[12],E=e[13],v=e[14],T=e[15],I=p*v*f-E*d*f+E*u*_-a*v*_-p*u*T+a*d*T,R=A*d*f-l*v*f-A*u*_+s*v*_+l*u*T-s*d*T,k=l*E*f-A*p*f+A*a*_-s*E*_-l*a*T+s*p*T,K=A*p*u-l*E*u-A*a*d+s*E*d+l*a*v-s*p*v,ee=t*I+n*R+r*k+i*K;if(ee===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _e=1/ee;return e[0]=I*_e,e[1]=(E*d*i-p*v*i-E*r*_+n*v*_+p*r*T-n*d*T)*_e,e[2]=(a*v*i-E*u*i+E*r*f-n*v*f-a*r*T+n*u*T)*_e,e[3]=(p*u*i-a*d*i-p*r*f+n*d*f+a*r*_-n*u*_)*_e,e[4]=R*_e,e[5]=(l*v*i-A*d*i+A*r*_-t*v*_-l*r*T+t*d*T)*_e,e[6]=(A*u*i-s*v*i-A*r*f+t*v*f+s*r*T-t*u*T)*_e,e[7]=(s*d*i-l*u*i+l*r*f-t*d*f-s*r*_+t*u*_)*_e,e[8]=k*_e,e[9]=(A*p*i-l*E*i-A*n*_+t*E*_+l*n*T-t*p*T)*_e,e[10]=(s*E*i-A*a*i+A*n*f-t*E*f-s*n*T+t*a*T)*_e,e[11]=(l*a*i-s*p*i-l*n*f+t*p*f+s*n*_-t*a*_)*_e,e[12]=K*_e,e[13]=(l*E*r-A*p*r+A*n*d-t*E*d-l*n*v+t*p*v)*_e,e[14]=(A*a*r-s*E*r-A*n*u+t*E*u+s*n*v-t*a*v)*_e,e[15]=(s*p*r-l*a*r+l*n*u-t*p*u-s*n*d+t*a*d)*_e,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,u=e.z,f=i*s,l=i*a;return this.set(f*s+n,f*a-r*u,f*u+r*a,0,f*a+r*u,l*a+n,l*u-r*s,0,f*u-r*a,l*u+r*s,i*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,u=t._w,f=i+i,l=s+s,p=a+a,d=i*f,_=i*l,A=i*p,E=s*l,v=s*p,T=a*p,I=u*f,R=u*l,k=u*p,K=n.x,ee=n.y,_e=n.z;return r[0]=(1-(E+T))*K,r[1]=(_+k)*K,r[2]=(A-R)*K,r[3]=0,r[4]=(_-k)*ee,r[5]=(1-(d+T))*ee,r[6]=(v+I)*ee,r[7]=0,r[8]=(A+R)*_e,r[9]=(v-I)*_e,r[10]=(1-(d+E))*_e,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=au.set(r[0],r[1],r[2]).length();const s=au.set(r[4],r[5],r[6]).length(),a=au.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],hs.copy(this);const f=1/i,l=1/s,p=1/a;return hs.elements[0]*=f,hs.elements[1]*=f,hs.elements[2]*=f,hs.elements[4]*=l,hs.elements[5]*=l,hs.elements[6]*=l,hs.elements[8]*=p,hs.elements[9]*=p,hs.elements[10]*=p,t.setFromRotationMatrix(hs),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s){const a=this.elements,u=2*i/(t-e),f=2*i/(n-r),l=(t+e)/(t-e),p=(n+r)/(n-r),d=-(s+i)/(s-i),_=-2*s*i/(s-i);return a[0]=u,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=f,a[9]=p,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=_,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s){const a=this.elements,u=1/(t-e),f=1/(n-r),l=1/(s-i),p=(t+e)*u,d=(n+r)*f,_=(s+i)*l;return a[0]=2*u,a[4]=0,a[8]=0,a[12]=-p,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-_,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const au=new ke,hs=new Ei,gT=new ke(0,0,0),yT=new ke(1,1,1),Ys=new ke,il=new ke,Xo=new ke,Fm=new Ei,Lm=new Ms;class Lc{constructor(e=0,t=0,n=0,r=Lc.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],u=r[1],f=r[5],l=r[9],p=r[2],d=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(Po(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,_),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(d,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Po(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,_),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,i),this._z=0);break;case"ZXY":this._x=Math.asin(Po(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(u,i));break;case"ZYX":this._y=Math.asin(-Po(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,_),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(Po(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,f),this._y=Math.atan2(-p,i)):(this._x=0,this._y=Math.atan2(a,_));break;case"XZY":this._z=Math.asin(-Po(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,f),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Fm.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Fm,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Lm.setFromEuler(this),this.setFromQuaternion(Lm,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Lc.DefaultOrder="XYZ";Lc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class zg{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vT=0;const Om=new ke,uu=new Ms,Fs=new Ei,ol=new ke,Xu=new ke,AT=new ke,bT=new Ms,Nm=new ke(1,0,0),Um=new ke(0,1,0),Gm=new ke(0,0,1),ET={type:"added"},km={type:"removed"};class oo extends Ya{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vT++}),this.uuid=_s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=oo.DefaultUp.clone();const e=new ke,t=new Lc,n=new Ms,r=new ke(1,1,1);function i(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ei},normalMatrix:{value:new Zo}}),this.matrix=new Ei,this.matrixWorld=new Ei,this.matrixAutoUpdate=oo.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=oo.DefaultMatrixWorldAutoUpdate,this.layers=new zg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uu.setFromAxisAngle(e,t),this.quaternion.multiply(uu),this}rotateOnWorldAxis(e,t){return uu.setFromAxisAngle(e,t),this.quaternion.premultiply(uu),this}rotateX(e){return this.rotateOnAxis(Nm,e)}rotateY(e){return this.rotateOnAxis(Um,e)}rotateZ(e){return this.rotateOnAxis(Gm,e)}translateOnAxis(e,t){return Om.copy(e).applyQuaternion(this.quaternion),this.position.add(Om.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Nm,e)}translateY(e){return this.translateOnAxis(Um,e)}translateZ(e){return this.translateOnAxis(Gm,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fs.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ol.copy(e):ol.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Xu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fs.lookAt(Xu,ol,this.up):Fs.lookAt(ol,Xu,this.up),this.quaternion.setFromRotationMatrix(Fs),r&&(Fs.extractRotation(r.matrixWorld),uu.setFromRotationMatrix(Fs),this.quaternion.premultiply(uu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ET)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(km)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(km)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectsByProperty(e,t);s.length>0&&(n=n.concat(s))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xu,e,AT),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xu,bT,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const i=t[n];(i.matrixWorldAutoUpdate===!0||e===!0)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let i=0,s=r.length;i<s;i++){const a=r[i];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function i(a,u){return a[u.uuid]===void 0&&(a[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const u=a.shapes;if(Array.isArray(u))for(let f=0,l=u.length;f<l;f++){const p=u[f];i(e.shapes,p)}else i(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let u=0,f=this.material.length;u<f;u++)a.push(i(e.materials,this.material[u]));r.material=a}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const u=this.animations[a];r.animations.push(i(e.animations,u))}}if(t){const a=s(e.geometries),u=s(e.materials),f=s(e.textures),l=s(e.images),p=s(e.shapes),d=s(e.skeletons),_=s(e.animations),A=s(e.nodes);a.length>0&&(n.geometries=a),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),l.length>0&&(n.images=l),p.length>0&&(n.shapes=p),d.length>0&&(n.skeletons=d),_.length>0&&(n.animations=_),A.length>0&&(n.nodes=A)}return n.object=r,n;function s(a){const u=[];for(const f in a){const l=a[f];delete l.metadata,u.push(l)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}oo.DefaultUp=new ke(0,1,0);oo.DefaultMatrixAutoUpdate=!0;oo.DefaultMatrixWorldAutoUpdate=!0;const ps=new ke,Ls=new ke,Ff=new ke,Os=new ke,cu=new ke,lu=new ke,Hm=new ke,Lf=new ke,Of=new ke,Nf=new ke;class Hs{constructor(e=new ke,t=new ke,n=new ke){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ps.subVectors(e,t),r.cross(ps);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ps.subVectors(r,t),Ls.subVectors(n,t),Ff.subVectors(e,t);const s=ps.dot(ps),a=ps.dot(Ls),u=ps.dot(Ff),f=Ls.dot(Ls),l=Ls.dot(Ff),p=s*f-a*a;if(p===0)return i.set(-2,-1,-1);const d=1/p,_=(f*u-a*l)*d,A=(s*l-a*u)*d;return i.set(1-_-A,A,_)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Os),Os.x>=0&&Os.y>=0&&Os.x+Os.y<=1}static getUV(e,t,n,r,i,s,a,u){return this.getBarycoord(e,t,n,r,Os),u.set(0,0),u.addScaledVector(i,Os.x),u.addScaledVector(s,Os.y),u.addScaledVector(a,Os.z),u}static isFrontFacing(e,t,n,r){return ps.subVectors(n,t),Ls.subVectors(e,t),ps.cross(Ls).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ps.subVectors(this.c,this.b),Ls.subVectors(this.a,this.b),ps.cross(Ls).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Hs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Hs.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Hs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;cu.subVectors(r,n),lu.subVectors(i,n),Lf.subVectors(e,n);const u=cu.dot(Lf),f=lu.dot(Lf);if(u<=0&&f<=0)return t.copy(n);Of.subVectors(e,r);const l=cu.dot(Of),p=lu.dot(Of);if(l>=0&&p<=l)return t.copy(r);const d=u*p-l*f;if(d<=0&&u>=0&&l<=0)return s=u/(u-l),t.copy(n).addScaledVector(cu,s);Nf.subVectors(e,i);const _=cu.dot(Nf),A=lu.dot(Nf);if(A>=0&&_<=A)return t.copy(i);const E=_*f-u*A;if(E<=0&&f>=0&&A<=0)return a=f/(f-A),t.copy(n).addScaledVector(lu,a);const v=l*A-_*p;if(v<=0&&p-l>=0&&_-A>=0)return Hm.subVectors(i,r),a=(p-l)/(p-l+(_-A)),t.copy(r).addScaledVector(Hm,a);const T=1/(v+E+d);return s=E*T,a=d*T,t.copy(n).addScaledVector(cu,s).addScaledVector(lu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let TT=0;class Ss extends Ya{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TT++}),this.uuid=_s(),this.name="",this.type="Material",this.blending=wu,this.side=ua,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Rg,this.blendDst=Ig,this.blendEquation=vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=QE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ef,this.stencilZFail=Ef,this.stencilZPass=Ef,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==wu&&(n.blending=this.blending),this.side!==ua&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(i){const s=[];for(const a in i){const u=i[a];delete u.metadata,s.push(u)}return s}if(t){const i=r(e.textures),s=r(e.images);i.length>0&&(n.textures=i),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ia extends Ss{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const po=new ke,sl=new Xr;class Bo{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=gd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.applyMatrix3(e),this.setXY(t,sl.x,sl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.applyMatrix3(e),this.setXYZ(t,po.x,po.y,po.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.applyMatrix4(e),this.setXYZ(t,po.x,po.y,po.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.applyNormalMatrix(e),this.setXYZ(t,po.x,po.y,po.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)po.fromBufferAttribute(this,t),po.transformDirection(e),this.setXYZ(t,po.x,po.y,po.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ws(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ws(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ws(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ws(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array),i=Xi(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==gd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Kg extends Bo{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Jg extends Bo{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class zs extends Bo{constructor(e,t,n){super(new Float32Array(e),t,n)}}let wT=0;const es=new Ei,Uf=new oo,fu=new ke,Yo=new $a,Yu=new $a,Eo=new ke;class gs extends Ya{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wT++}),this.uuid=_s(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(kg(e)?Jg:Kg)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const i=new Zo().getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return es.makeRotationFromQuaternion(e),this.applyMatrix4(es),this}rotateX(e){return es.makeRotationX(e),this.applyMatrix4(es),this}rotateY(e){return es.makeRotationY(e),this.applyMatrix4(es),this}rotateZ(e){return es.makeRotationZ(e),this.applyMatrix4(es),this}translate(e,t,n){return es.makeTranslation(e,t,n),this.applyMatrix4(es),this}scale(e,t,n){return es.makeScale(e,t,n),this.applyMatrix4(es),this}lookAt(e){return Uf.lookAt(e),Uf.updateMatrix(),this.applyMatrix4(Uf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fu).negate(),this.translate(fu.x,fu.y,fu.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new zs(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ke(-1/0,-1/0,-1/0),new ke(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const i=t[n];Yo.setFromBufferAttribute(i),this.morphTargetsRelative?(Eo.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(Eo),Eo.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(Eo)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Uu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ke,1/0);return}if(e){const n=this.boundingSphere.center;if(Yo.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const a=t[i];Yu.setFromBufferAttribute(a),this.morphTargetsRelative?(Eo.addVectors(Yo.min,Yu.min),Yo.expandByPoint(Eo),Eo.addVectors(Yo.max,Yu.max),Yo.expandByPoint(Eo)):(Yo.expandByPoint(Yu.min),Yo.expandByPoint(Yu.max))}Yo.getCenter(n);let r=0;for(let i=0,s=e.count;i<s;i++)Eo.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Eo));if(t)for(let i=0,s=t.length;i<s;i++){const a=t[i],u=this.morphTargetsRelative;for(let f=0,l=a.count;f<l;f++)Eo.fromBufferAttribute(a,f),u&&(fu.fromBufferAttribute(e,f),Eo.add(fu)),r=Math.max(r,n.distanceToSquared(Eo))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bo(new Float32Array(4*a),4));const u=this.getAttribute("tangent").array,f=[],l=[];for(let de=0;de<a;de++)f[de]=new ke,l[de]=new ke;const p=new ke,d=new ke,_=new ke,A=new Xr,E=new Xr,v=new Xr,T=new ke,I=new ke;function R(de,Ie,Pe){p.fromArray(r,de*3),d.fromArray(r,Ie*3),_.fromArray(r,Pe*3),A.fromArray(s,de*2),E.fromArray(s,Ie*2),v.fromArray(s,Pe*2),d.sub(p),_.sub(p),E.sub(A),v.sub(A);const Te=1/(E.x*v.y-v.x*E.y);isFinite(Te)&&(T.copy(d).multiplyScalar(v.y).addScaledVector(_,-E.y).multiplyScalar(Te),I.copy(_).multiplyScalar(E.x).addScaledVector(d,-v.x).multiplyScalar(Te),f[de].add(T),f[Ie].add(T),f[Pe].add(T),l[de].add(I),l[Ie].add(I),l[Pe].add(I))}let k=this.groups;k.length===0&&(k=[{start:0,count:n.length}]);for(let de=0,Ie=k.length;de<Ie;++de){const Pe=k[de],Te=Pe.start,Ee=Pe.count;for(let Se=Te,Oe=Te+Ee;Se<Oe;Se+=3)R(n[Se+0],n[Se+1],n[Se+2])}const K=new ke,ee=new ke,_e=new ke,Q=new ke;function ne(de){_e.fromArray(i,de*3),Q.copy(_e);const Ie=f[de];K.copy(Ie),K.sub(_e.multiplyScalar(_e.dot(Ie))).normalize(),ee.crossVectors(Q,Ie);const Te=ee.dot(l[de])<0?-1:1;u[de*4]=K.x,u[de*4+1]=K.y,u[de*4+2]=K.z,u[de*4+3]=Te}for(let de=0,Ie=k.length;de<Ie;++de){const Pe=k[de],Te=Pe.start,Ee=Pe.count;for(let Se=Te,Oe=Te+Ee;Se<Oe;Se+=3)ne(n[Se+0]),ne(n[Se+1]),ne(n[Se+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Bo(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,_=n.count;d<_;d++)n.setXYZ(d,0,0,0);const r=new ke,i=new ke,s=new ke,a=new ke,u=new ke,f=new ke,l=new ke,p=new ke;if(e)for(let d=0,_=e.count;d<_;d+=3){const A=e.getX(d+0),E=e.getX(d+1),v=e.getX(d+2);r.fromBufferAttribute(t,A),i.fromBufferAttribute(t,E),s.fromBufferAttribute(t,v),l.subVectors(s,i),p.subVectors(r,i),l.cross(p),a.fromBufferAttribute(n,A),u.fromBufferAttribute(n,E),f.fromBufferAttribute(n,v),a.add(l),u.add(l),f.add(l),n.setXYZ(A,a.x,a.y,a.z),n.setXYZ(E,u.x,u.y,u.z),n.setXYZ(v,f.x,f.y,f.z)}else for(let d=0,_=t.count;d<_;d+=3)r.fromBufferAttribute(t,d+0),i.fromBufferAttribute(t,d+1),s.fromBufferAttribute(t,d+2),l.subVectors(s,i),p.subVectors(r,i),l.cross(p),n.setXYZ(d+0,l.x,l.y,l.z),n.setXYZ(d+1,l.x,l.y,l.z),n.setXYZ(d+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Eo.fromBufferAttribute(e,t),Eo.normalize(),e.setXYZ(t,Eo.x,Eo.y,Eo.z)}toNonIndexed(){function e(a,u){const f=a.array,l=a.itemSize,p=a.normalized,d=new f.constructor(u.length*l);let _=0,A=0;for(let E=0,v=u.length;E<v;E++){a.isInterleavedBufferAttribute?_=u[E]*a.data.stride+a.offset:_=u[E]*l;for(let T=0;T<l;T++)d[A++]=f[_++]}return new Bo(d,l,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gs,n=this.index.array,r=this.attributes;for(const a in r){const u=r[a],f=e(u,n);t.setAttribute(a,f)}const i=this.morphAttributes;for(const a in i){const u=[],f=i[a];for(let l=0,p=f.length;l<p;l++){const d=f[l],_=e(d,n);u.push(_)}t.morphAttributes[a]=u}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,u=s.length;a<u;a++){const f=s[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const f=n[u];e.data.attributes[u]=f.toJSON(e.data)}const r={};let i=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],l=[];for(let p=0,d=f.length;p<d;p++){const _=f[p];l.push(_.toJSON(e.data))}l.length>0&&(r[u]=l,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const f in r){const l=r[f];this.setAttribute(f,l.clone(t))}const i=e.morphAttributes;for(const f in i){const l=[],p=i[f];for(let d=0,_=p.length;d<_;d++)l.push(p[d].clone(t));this.morphAttributes[f]=l}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,l=s.length;f<l;f++){const p=s[f];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Wm=new Ei,du=new Th,Gf=new Uu,$u=new ke,Zu=new ke,Qu=new ke,kf=new ke,al=new ke,ul=new Xr,cl=new Xr,ll=new Xr,Hf=new ke,fl=new ke;class ss extends oo{constructor(e=new gs,t=new Ia){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){al.set(0,0,0);for(let u=0,f=i.length;u<f;u++){const l=a[u],p=i[u];l!==0&&(kf.fromBufferAttribute(p,e),s?al.addScaledVector(kf,l):al.addScaledVector(kf.sub(t),l))}t.add(al)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Gf.copy(n.boundingSphere),Gf.applyMatrix4(i),e.ray.intersectsSphere(Gf)===!1)||(Wm.copy(i).invert(),du.copy(e.ray).applyMatrix4(Wm),n.boundingBox!==null&&du.intersectsBox(n.boundingBox)===!1))return;let s;const a=n.index,u=n.attributes.position,f=n.attributes.uv,l=n.attributes.uv2,p=n.groups,d=n.drawRange;if(a!==null)if(Array.isArray(r))for(let _=0,A=p.length;_<A;_++){const E=p[_],v=r[E.materialIndex],T=Math.max(E.start,d.start),I=Math.min(a.count,Math.min(E.start+E.count,d.start+d.count));for(let R=T,k=I;R<k;R+=3){const K=a.getX(R),ee=a.getX(R+1),_e=a.getX(R+2);s=dl(this,v,e,du,f,l,K,ee,_e),s&&(s.faceIndex=Math.floor(R/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const _=Math.max(0,d.start),A=Math.min(a.count,d.start+d.count);for(let E=_,v=A;E<v;E+=3){const T=a.getX(E),I=a.getX(E+1),R=a.getX(E+2);s=dl(this,r,e,du,f,l,T,I,R),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}else if(u!==void 0)if(Array.isArray(r))for(let _=0,A=p.length;_<A;_++){const E=p[_],v=r[E.materialIndex],T=Math.max(E.start,d.start),I=Math.min(u.count,Math.min(E.start+E.count,d.start+d.count));for(let R=T,k=I;R<k;R+=3){const K=R,ee=R+1,_e=R+2;s=dl(this,v,e,du,f,l,K,ee,_e),s&&(s.faceIndex=Math.floor(R/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const _=Math.max(0,d.start),A=Math.min(u.count,d.start+d.count);for(let E=_,v=A;E<v;E+=3){const T=E,I=E+1,R=E+2;s=dl(this,r,e,du,f,l,T,I,R),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}}}function CT(o,e,t,n,r,i,s,a){let u;if(e.side===cs?u=n.intersectTriangle(s,i,r,!0,a):u=n.intersectTriangle(r,i,s,e.side===ua,a),u===null)return null;fl.copy(a),fl.applyMatrix4(o.matrixWorld);const f=t.ray.origin.distanceTo(fl);return f<t.near||f>t.far?null:{distance:f,point:fl.clone(),object:o}}function dl(o,e,t,n,r,i,s,a,u){o.getVertexPosition(s,$u),o.getVertexPosition(a,Zu),o.getVertexPosition(u,Qu);const f=CT(o,e,t,n,$u,Zu,Qu,Hf);if(f){r&&(ul.fromBufferAttribute(r,s),cl.fromBufferAttribute(r,a),ll.fromBufferAttribute(r,u),f.uv=Hs.getUV(Hf,$u,Zu,Qu,ul,cl,ll,new Xr)),i&&(ul.fromBufferAttribute(i,s),cl.fromBufferAttribute(i,a),ll.fromBufferAttribute(i,u),f.uv2=Hs.getUV(Hf,$u,Zu,Qu,ul,cl,ll,new Xr));const l={a:s,b:a,c:u,normal:new ke,materialIndex:0};Hs.getNormal($u,Zu,Qu,l.normal),f.face=l}return f}class Oc extends gs{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const u=[],f=[],l=[],p=[];let d=0,_=0;A("z","y","x",-1,-1,n,t,e,s,i,0),A("z","y","x",1,-1,n,t,-e,s,i,1),A("x","z","y",1,1,e,n,t,r,s,2),A("x","z","y",1,-1,e,n,-t,r,s,3),A("x","y","z",1,-1,e,t,n,r,i,4),A("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(u),this.setAttribute("position",new zs(f,3)),this.setAttribute("normal",new zs(l,3)),this.setAttribute("uv",new zs(p,2));function A(E,v,T,I,R,k,K,ee,_e,Q,ne){const de=k/_e,Ie=K/Q,Pe=k/2,Te=K/2,Ee=ee/2,Se=_e+1,Oe=Q+1;let We=0,j=0;const _t=new ke;for(let Qe=0;Qe<Oe;Qe++){const Je=Qe*Ie-Te;for(let ze=0;ze<Se;ze++){const ct=ze*de-Pe;_t[E]=ct*I,_t[v]=Je*R,_t[T]=Ee,f.push(_t.x,_t.y,_t.z),_t[E]=0,_t[v]=0,_t[T]=ee>0?1:-1,l.push(_t.x,_t.y,_t.z),p.push(ze/_e),p.push(1-Qe/Q),We+=1}}for(let Qe=0;Qe<Q;Qe++)for(let Je=0;Je<_e;Je++){const ze=d+Je+Se*Qe,ct=d+Je+Se*(Qe+1),He=d+(Je+1)+Se*(Qe+1),P=d+(Je+1)+Se*Qe;u.push(ze,ct,P),u.push(ct,He,P),j+=6}a.addGroup(_,j,ne),_+=j,d+=We}}static fromJSON(e){return new Oc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fu(o){const e={};for(const t in o){e[t]={};for(const n in o[t]){const r=o[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Go(o){const e={};for(let t=0;t<o.length;t++){const n=Fu(o[t]);for(const r in n)e[r]=n[r]}return e}function ST(o){const e=[];for(let t=0;t<o.length;t++)e.push(o[t].clone());return e}function qg(o){return o.getRenderTarget()===null&&o.outputEncoding===Vi?Es:wc}const xT={clone:Fu,merge:Go};var BT=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,MT=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ja extends Ss{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=BT,this.fragmentShader=MT,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fu(e.uniforms),this.uniformsGroups=ST(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Xg extends oo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ei,this.projectionMatrix=new Ei,this.projectionMatrixInverse=new Ei}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ho extends Xg{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Cc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(_c*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cc*2*Math.atan(Math.tan(_c*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(_c*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const u=s.fullWidth,f=s.fullHeight;i+=s.offsetX*r/u,t-=s.offsetY*n/f,r*=s.width/u,n*=s.height/f}const a=this.filmOffset;a!==0&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const hu=-90,pu=1;class DT extends oo{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Ho(hu,pu,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new Ho(hu,pu,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const s=new Ho(hu,pu,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new Ho(hu,pu,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const u=new Ho(hu,pu,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const f=new Ho(hu,pu,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,a,u,f]=this.children,l=e.getRenderTarget(),p=e.toneMapping,d=e.xr.enabled;e.toneMapping=js,e.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=_,e.setRenderTarget(n,5),e.render(t,f),e.setRenderTarget(l),e.toneMapping=p,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class Yg extends xo{constructor(e,t,n,r,i,s,a,u,f,l){e=e!==void 0?e:[],t=t!==void 0?t:Mu,super(e,t,n,r,i,s,a,u,f,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class RT extends Ka{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Yg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qo}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Oc(5,5,5),i=new Ja({name:"CubemapFromEquirect",uniforms:Fu(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:cs,blending:aa});i.uniforms.tEquirect.value=t;const s=new ss(r,i),a=t.minFilter;return t.minFilter===Va&&(t.minFilter=qo),new DT(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}}const Wf=new ke,IT=new ke,PT=new Zo;class xa{constructor(e=new ke(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Wf.subVectors(n,t).cross(IT.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Wf),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||PT.getNormalMatrix(e),r=this.coplanarPoint(Wf).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const mu=new Uu,hl=new ke;class wh{constructor(e=new xa,t=new xa,n=new xa,r=new xa,i=new xa,s=new xa){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],f=n[5],l=n[6],p=n[7],d=n[8],_=n[9],A=n[10],E=n[11],v=n[12],T=n[13],I=n[14],R=n[15];return t[0].setComponents(a-r,p-u,E-d,R-v).normalize(),t[1].setComponents(a+r,p+u,E+d,R+v).normalize(),t[2].setComponents(a+i,p+f,E+_,R+T).normalize(),t[3].setComponents(a-i,p-f,E-_,R-T).normalize(),t[4].setComponents(a-s,p-l,E-A,R-I).normalize(),t[5].setComponents(a+s,p+l,E+A,R+I).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),mu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(mu)}intersectsSprite(e){return mu.center.set(0,0,0),mu.radius=.7071067811865476,mu.applyMatrix4(e.matrixWorld),this.intersectsSphere(mu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(hl.x=r.normal.x>0?e.max.x:e.min.x,hl.y=r.normal.y>0?e.max.y:e.min.y,hl.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(hl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $g(){let o=null,e=!1,t=null,n=null;function r(i,s){t(i,s),n=o.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=o.requestAnimationFrame(r),e=!0)},stop:function(){o.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(i){t=i},setContext:function(i){o=i}}}function FT(o,e){const t=e.isWebGL2,n=new WeakMap;function r(f,l){const p=f.array,d=f.usage,_=o.createBuffer();o.bindBuffer(l,_),o.bufferData(l,p,d),f.onUploadCallback();let A;if(p instanceof Float32Array)A=5126;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)A=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else A=5123;else if(p instanceof Int16Array)A=5122;else if(p instanceof Uint32Array)A=5125;else if(p instanceof Int32Array)A=5124;else if(p instanceof Int8Array)A=5120;else if(p instanceof Uint8Array)A=5121;else if(p instanceof Uint8ClampedArray)A=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:A,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function i(f,l,p){const d=l.array,_=l.updateRange;o.bindBuffer(p,f),_.count===-1?o.bufferSubData(p,0,d):(t?o.bufferSubData(p,_.offset*d.BYTES_PER_ELEMENT,d,_.offset,_.count):o.bufferSubData(p,_.offset*d.BYTES_PER_ELEMENT,d.subarray(_.offset,_.offset+_.count)),_.count=-1),l.onUploadCallback()}function s(f){return f.isInterleavedBufferAttribute&&(f=f.data),n.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const l=n.get(f);l&&(o.deleteBuffer(l.buffer),n.delete(f))}function u(f,l){if(f.isGLBufferAttribute){const d=n.get(f);(!d||d.version<f.version)&&n.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const p=n.get(f);p===void 0?n.set(f,r(f,l)):p.version<f.version&&(i(p.buffer,f,l),p.version=f.version)}return{get:s,remove:a,update:u}}class Ch extends gs{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),u=Math.floor(r),f=a+1,l=u+1,p=e/a,d=t/u,_=[],A=[],E=[],v=[];for(let T=0;T<l;T++){const I=T*d-s;for(let R=0;R<f;R++){const k=R*p-i;A.push(k,-I,0),E.push(0,0,1),v.push(R/a),v.push(1-T/u)}}for(let T=0;T<u;T++)for(let I=0;I<a;I++){const R=I+f*T,k=I+f*(T+1),K=I+1+f*(T+1),ee=I+1+f*T;_.push(R,k,ee),_.push(k,K,ee)}this.setIndex(_),this.setAttribute("position",new zs(A,3)),this.setAttribute("normal",new zs(E,3)),this.setAttribute("uv",new zs(v,2))}static fromJSON(e){return new Ch(e.width,e.height,e.widthSegments,e.heightSegments)}}var LT=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,OT=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NT=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,UT=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,GT=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kT=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,HT="vec3 transformed = vec3( position );",WT=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,VT=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,jT=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zT=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,KT=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,JT=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qT=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,XT=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,YT=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$T=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ZT=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,QT=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ew=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,tw=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nw=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,rw=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,iw=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ow=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sw=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,aw="gl_FragColor = linearToOutputTexel( gl_FragColor );",uw=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,cw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lw=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fw=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dw=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pw=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mw=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_w=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,gw=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yw=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,vw=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Aw=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bw=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ew=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Tw=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ww=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Cw=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Sw=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xw=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Bw=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Mw=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Dw=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Rw=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Iw=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pw=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Fw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ow=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Nw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Uw=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Gw=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,kw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Hw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ww=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Vw=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jw=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,zw=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Kw=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Jw=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,qw=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Xw=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yw=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$w=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zw=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Qw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,eC=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,tC=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,nC=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,rC=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,iC=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,oC=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,sC=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,aC=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uC=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,cC=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lC=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fC=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dC=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,hC=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pC=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,mC=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_C=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gC=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,yC=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vC=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,AC=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,bC=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EC=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TC=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wC=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,CC=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,SC=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,xC=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,BC=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,MC=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,DC=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,RC=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,IC=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const PC=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,FC=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,LC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OC=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,NC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UC=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GC=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kC=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,HC=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,WC=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,VC=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jC=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zC=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,KC=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JC=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qC=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XC=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YC=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$C=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ZC=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QC=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,eS=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,tS=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nS=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rS=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,iS=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oS=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sS=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aS=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,uS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cS=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lS=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,fS=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,mi={alphamap_fragment:LT,alphamap_pars_fragment:OT,alphatest_fragment:NT,alphatest_pars_fragment:UT,aomap_fragment:GT,aomap_pars_fragment:kT,begin_vertex:HT,beginnormal_vertex:WT,bsdfs:VT,iridescence_fragment:jT,bumpmap_pars_fragment:zT,clipping_planes_fragment:KT,clipping_planes_pars_fragment:JT,clipping_planes_pars_vertex:qT,clipping_planes_vertex:XT,color_fragment:YT,color_pars_fragment:$T,color_pars_vertex:ZT,color_vertex:QT,common:ew,cube_uv_reflection_fragment:tw,defaultnormal_vertex:nw,displacementmap_pars_vertex:rw,displacementmap_vertex:iw,emissivemap_fragment:ow,emissivemap_pars_fragment:sw,encodings_fragment:aw,encodings_pars_fragment:uw,envmap_fragment:cw,envmap_common_pars_fragment:lw,envmap_pars_fragment:fw,envmap_pars_vertex:dw,envmap_physical_pars_fragment:ww,envmap_vertex:hw,fog_vertex:pw,fog_pars_vertex:mw,fog_fragment:_w,fog_pars_fragment:gw,gradientmap_pars_fragment:yw,lightmap_fragment:vw,lightmap_pars_fragment:Aw,lights_lambert_fragment:bw,lights_lambert_pars_fragment:Ew,lights_pars_begin:Tw,lights_toon_fragment:Cw,lights_toon_pars_fragment:Sw,lights_phong_fragment:xw,lights_phong_pars_fragment:Bw,lights_physical_fragment:Mw,lights_physical_pars_fragment:Dw,lights_fragment_begin:Rw,lights_fragment_maps:Iw,lights_fragment_end:Pw,logdepthbuf_fragment:Fw,logdepthbuf_pars_fragment:Lw,logdepthbuf_pars_vertex:Ow,logdepthbuf_vertex:Nw,map_fragment:Uw,map_pars_fragment:Gw,map_particle_fragment:kw,map_particle_pars_fragment:Hw,metalnessmap_fragment:Ww,metalnessmap_pars_fragment:Vw,morphcolor_vertex:jw,morphnormal_vertex:zw,morphtarget_pars_vertex:Kw,morphtarget_vertex:Jw,normal_fragment_begin:qw,normal_fragment_maps:Xw,normal_pars_fragment:Yw,normal_pars_vertex:$w,normal_vertex:Zw,normalmap_pars_fragment:Qw,clearcoat_normal_fragment_begin:eC,clearcoat_normal_fragment_maps:tC,clearcoat_pars_fragment:nC,iridescence_pars_fragment:rC,output_fragment:iC,packing:oC,premultiplied_alpha_fragment:sC,project_vertex:aC,dithering_fragment:uC,dithering_pars_fragment:cC,roughnessmap_fragment:lC,roughnessmap_pars_fragment:fC,shadowmap_pars_fragment:dC,shadowmap_pars_vertex:hC,shadowmap_vertex:pC,shadowmask_pars_fragment:mC,skinbase_vertex:_C,skinning_pars_vertex:gC,skinning_vertex:yC,skinnormal_vertex:vC,specularmap_fragment:AC,specularmap_pars_fragment:bC,tonemapping_fragment:EC,tonemapping_pars_fragment:TC,transmission_fragment:wC,transmission_pars_fragment:CC,uv_pars_fragment:SC,uv_pars_vertex:xC,uv_vertex:BC,uv2_pars_fragment:MC,uv2_pars_vertex:DC,uv2_vertex:RC,worldpos_vertex:IC,background_vert:PC,background_frag:FC,backgroundCube_vert:LC,backgroundCube_frag:OC,cube_vert:NC,cube_frag:UC,depth_vert:GC,depth_frag:kC,distanceRGBA_vert:HC,distanceRGBA_frag:WC,equirect_vert:VC,equirect_frag:jC,linedashed_vert:zC,linedashed_frag:KC,meshbasic_vert:JC,meshbasic_frag:qC,meshlambert_vert:XC,meshlambert_frag:YC,meshmatcap_vert:$C,meshmatcap_frag:ZC,meshnormal_vert:QC,meshnormal_frag:eS,meshphong_vert:tS,meshphong_frag:nS,meshphysical_vert:rS,meshphysical_frag:iS,meshtoon_vert:oS,meshtoon_frag:sS,points_vert:aS,points_frag:uS,shadow_vert:cS,shadow_frag:lS,sprite_vert:fS,sprite_frag:dS},un={common:{diffuse:{value:new _i(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Zo},uv2Transform:{value:new Zo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _i(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _i(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zo}},sprite:{diffuse:{value:new _i(16777215)},opacity:{value:1},center:{value:new Xr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zo}}},Ts={basic:{uniforms:Go([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.fog]),vertexShader:mi.meshbasic_vert,fragmentShader:mi.meshbasic_frag},lambert:{uniforms:Go([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new _i(0)}}]),vertexShader:mi.meshlambert_vert,fragmentShader:mi.meshlambert_frag},phong:{uniforms:Go([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new _i(0)},specular:{value:new _i(1118481)},shininess:{value:30}}]),vertexShader:mi.meshphong_vert,fragmentShader:mi.meshphong_frag},standard:{uniforms:Go([un.common,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.roughnessmap,un.metalnessmap,un.fog,un.lights,{emissive:{value:new _i(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag},toon:{uniforms:Go([un.common,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.gradientmap,un.fog,un.lights,{emissive:{value:new _i(0)}}]),vertexShader:mi.meshtoon_vert,fragmentShader:mi.meshtoon_frag},matcap:{uniforms:Go([un.common,un.bumpmap,un.normalmap,un.displacementmap,un.fog,{matcap:{value:null}}]),vertexShader:mi.meshmatcap_vert,fragmentShader:mi.meshmatcap_frag},points:{uniforms:Go([un.points,un.fog]),vertexShader:mi.points_vert,fragmentShader:mi.points_frag},dashed:{uniforms:Go([un.common,un.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mi.linedashed_vert,fragmentShader:mi.linedashed_frag},depth:{uniforms:Go([un.common,un.displacementmap]),vertexShader:mi.depth_vert,fragmentShader:mi.depth_frag},normal:{uniforms:Go([un.common,un.bumpmap,un.normalmap,un.displacementmap,{opacity:{value:1}}]),vertexShader:mi.meshnormal_vert,fragmentShader:mi.meshnormal_frag},sprite:{uniforms:Go([un.sprite,un.fog]),vertexShader:mi.sprite_vert,fragmentShader:mi.sprite_frag},background:{uniforms:{uvTransform:{value:new Zo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mi.background_vert,fragmentShader:mi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:mi.backgroundCube_vert,fragmentShader:mi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mi.cube_vert,fragmentShader:mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mi.equirect_vert,fragmentShader:mi.equirect_frag},distanceRGBA:{uniforms:Go([un.common,un.displacementmap,{referencePosition:{value:new ke},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mi.distanceRGBA_vert,fragmentShader:mi.distanceRGBA_frag},shadow:{uniforms:Go([un.lights,un.fog,{color:{value:new _i(0)},opacity:{value:1}}]),vertexShader:mi.shadow_vert,fragmentShader:mi.shadow_frag}};Ts.physical={uniforms:Go([Ts.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xr(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new _i(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Xr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _i(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _i(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag};const pl={r:0,b:0,g:0};function hS(o,e,t,n,r,i,s){const a=new _i(0);let u=i===!0?0:1,f,l,p=null,d=0,_=null;function A(v,T){let I=!1,R=T.isScene===!0?T.background:null;R&&R.isTexture&&(R=(T.backgroundBlurriness>0?t:e).get(R));const k=o.xr,K=k.getSession&&k.getSession();K&&K.environmentBlendMode==="additive"&&(R=null),R===null?E(a,u):R&&R.isColor&&(E(R,1),I=!0),(o.autoClear||I)&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),R&&(R.isCubeTexture||R.mapping===rf)?(l===void 0&&(l=new ss(new Oc(1,1,1),new Ja({name:"BackgroundCubeMaterial",uniforms:Fu(Ts.backgroundCube.uniforms),vertexShader:Ts.backgroundCube.vertexShader,fragmentShader:Ts.backgroundCube.fragmentShader,side:cs,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(ee,_e,Q){this.matrixWorld.copyPosition(Q.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=R,l.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,l.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,l.material.toneMapped=R.encoding!==Vi,(p!==R||d!==R.version||_!==o.toneMapping)&&(l.material.needsUpdate=!0,p=R,d=R.version,_=o.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null)):R&&R.isTexture&&(f===void 0&&(f=new ss(new Ch(2,2),new Ja({name:"BackgroundMaterial",uniforms:Fu(Ts.background.uniforms),vertexShader:Ts.background.vertexShader,fragmentShader:Ts.background.fragmentShader,side:ua,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=R,f.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,f.material.toneMapped=R.encoding!==Vi,R.matrixAutoUpdate===!0&&R.updateMatrix(),f.material.uniforms.uvTransform.value.copy(R.matrix),(p!==R||d!==R.version||_!==o.toneMapping)&&(f.material.needsUpdate=!0,p=R,d=R.version,_=o.toneMapping),f.layers.enableAll(),v.unshift(f,f.geometry,f.material,0,0,null))}function E(v,T){v.getRGB(pl,qg(o)),n.buffers.color.setClear(pl.r,pl.g,pl.b,T,s)}return{getClearColor:function(){return a},setClearColor:function(v,T=1){a.set(v),u=T,E(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(v){u=v,E(a,u)},render:A}}function pS(o,e,t,n){const r=o.getParameter(34921),i=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||i!==null,a={},u=v(null);let f=u,l=!1;function p(Ee,Se,Oe,We,j){let _t=!1;if(s){const Qe=E(We,Oe,Se);f!==Qe&&(f=Qe,_(f.object)),_t=T(Ee,We,Oe,j),_t&&I(Ee,We,Oe,j)}else{const Qe=Se.wireframe===!0;(f.geometry!==We.id||f.program!==Oe.id||f.wireframe!==Qe)&&(f.geometry=We.id,f.program=Oe.id,f.wireframe=Qe,_t=!0)}j!==null&&t.update(j,34963),(_t||l)&&(l=!1,Q(Ee,Se,Oe,We),j!==null&&o.bindBuffer(34963,t.get(j).buffer))}function d(){return n.isWebGL2?o.createVertexArray():i.createVertexArrayOES()}function _(Ee){return n.isWebGL2?o.bindVertexArray(Ee):i.bindVertexArrayOES(Ee)}function A(Ee){return n.isWebGL2?o.deleteVertexArray(Ee):i.deleteVertexArrayOES(Ee)}function E(Ee,Se,Oe){const We=Oe.wireframe===!0;let j=a[Ee.id];j===void 0&&(j={},a[Ee.id]=j);let _t=j[Se.id];_t===void 0&&(_t={},j[Se.id]=_t);let Qe=_t[We];return Qe===void 0&&(Qe=v(d()),_t[We]=Qe),Qe}function v(Ee){const Se=[],Oe=[],We=[];for(let j=0;j<r;j++)Se[j]=0,Oe[j]=0,We[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Se,enabledAttributes:Oe,attributeDivisors:We,object:Ee,attributes:{},index:null}}function T(Ee,Se,Oe,We){const j=f.attributes,_t=Se.attributes;let Qe=0;const Je=Oe.getAttributes();for(const ze in Je)if(Je[ze].location>=0){const He=j[ze];let P=_t[ze];if(P===void 0&&(ze==="instanceMatrix"&&Ee.instanceMatrix&&(P=Ee.instanceMatrix),ze==="instanceColor"&&Ee.instanceColor&&(P=Ee.instanceColor)),He===void 0||He.attribute!==P||P&&He.data!==P.data)return!0;Qe++}return f.attributesNum!==Qe||f.index!==We}function I(Ee,Se,Oe,We){const j={},_t=Se.attributes;let Qe=0;const Je=Oe.getAttributes();for(const ze in Je)if(Je[ze].location>=0){let He=_t[ze];He===void 0&&(ze==="instanceMatrix"&&Ee.instanceMatrix&&(He=Ee.instanceMatrix),ze==="instanceColor"&&Ee.instanceColor&&(He=Ee.instanceColor));const P={};P.attribute=He,He&&He.data&&(P.data=He.data),j[ze]=P,Qe++}f.attributes=j,f.attributesNum=Qe,f.index=We}function R(){const Ee=f.newAttributes;for(let Se=0,Oe=Ee.length;Se<Oe;Se++)Ee[Se]=0}function k(Ee){K(Ee,0)}function K(Ee,Se){const Oe=f.newAttributes,We=f.enabledAttributes,j=f.attributeDivisors;Oe[Ee]=1,We[Ee]===0&&(o.enableVertexAttribArray(Ee),We[Ee]=1),j[Ee]!==Se&&((n.isWebGL2?o:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ee,Se),j[Ee]=Se)}function ee(){const Ee=f.newAttributes,Se=f.enabledAttributes;for(let Oe=0,We=Se.length;Oe<We;Oe++)Se[Oe]!==Ee[Oe]&&(o.disableVertexAttribArray(Oe),Se[Oe]=0)}function _e(Ee,Se,Oe,We,j,_t){n.isWebGL2===!0&&(Oe===5124||Oe===5125)?o.vertexAttribIPointer(Ee,Se,Oe,j,_t):o.vertexAttribPointer(Ee,Se,Oe,We,j,_t)}function Q(Ee,Se,Oe,We){if(n.isWebGL2===!1&&(Ee.isInstancedMesh||We.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;R();const j=We.attributes,_t=Oe.getAttributes(),Qe=Se.defaultAttributeValues;for(const Je in _t){const ze=_t[Je];if(ze.location>=0){let ct=j[Je];if(ct===void 0&&(Je==="instanceMatrix"&&Ee.instanceMatrix&&(ct=Ee.instanceMatrix),Je==="instanceColor"&&Ee.instanceColor&&(ct=Ee.instanceColor)),ct!==void 0){const He=ct.normalized,P=ct.itemSize,nt=t.get(ct);if(nt===void 0)continue;const Fn=nt.buffer,Yt=nt.type,kn=nt.bytesPerElement;if(ct.isInterleavedBufferAttribute){const Et=ct.data,dn=Et.stride,$t=ct.offset;if(Et.isInstancedInterleavedBuffer){for(let vn=0;vn<ze.locationSize;vn++)K(ze.location+vn,Et.meshPerAttribute);Ee.isInstancedMesh!==!0&&We._maxInstanceCount===void 0&&(We._maxInstanceCount=Et.meshPerAttribute*Et.count)}else for(let vn=0;vn<ze.locationSize;vn++)k(ze.location+vn);o.bindBuffer(34962,Fn);for(let vn=0;vn<ze.locationSize;vn++)_e(ze.location+vn,P/ze.locationSize,Yt,He,dn*kn,($t+P/ze.locationSize*vn)*kn)}else{if(ct.isInstancedBufferAttribute){for(let Et=0;Et<ze.locationSize;Et++)K(ze.location+Et,ct.meshPerAttribute);Ee.isInstancedMesh!==!0&&We._maxInstanceCount===void 0&&(We._maxInstanceCount=ct.meshPerAttribute*ct.count)}else for(let Et=0;Et<ze.locationSize;Et++)k(ze.location+Et);o.bindBuffer(34962,Fn);for(let Et=0;Et<ze.locationSize;Et++)_e(ze.location+Et,P/ze.locationSize,Yt,He,P*kn,P/ze.locationSize*Et*kn)}}else if(Qe!==void 0){const He=Qe[Je];if(He!==void 0)switch(He.length){case 2:o.vertexAttrib2fv(ze.location,He);break;case 3:o.vertexAttrib3fv(ze.location,He);break;case 4:o.vertexAttrib4fv(ze.location,He);break;default:o.vertexAttrib1fv(ze.location,He)}}}}ee()}function ne(){Pe();for(const Ee in a){const Se=a[Ee];for(const Oe in Se){const We=Se[Oe];for(const j in We)A(We[j].object),delete We[j];delete Se[Oe]}delete a[Ee]}}function de(Ee){if(a[Ee.id]===void 0)return;const Se=a[Ee.id];for(const Oe in Se){const We=Se[Oe];for(const j in We)A(We[j].object),delete We[j];delete Se[Oe]}delete a[Ee.id]}function Ie(Ee){for(const Se in a){const Oe=a[Se];if(Oe[Ee.id]===void 0)continue;const We=Oe[Ee.id];for(const j in We)A(We[j].object),delete We[j];delete Oe[Ee.id]}}function Pe(){Te(),l=!0,f!==u&&(f=u,_(f.object))}function Te(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:p,reset:Pe,resetDefaultState:Te,dispose:ne,releaseStatesOfGeometry:de,releaseStatesOfProgram:Ie,initAttributes:R,enableAttribute:k,disableUnusedAttributes:ee}}function mS(o,e,t,n){const r=n.isWebGL2;let i;function s(f){i=f}function a(f,l){o.drawArrays(i,f,l),t.update(l,i,1)}function u(f,l,p){if(p===0)return;let d,_;if(r)d=o,_="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[_](i,f,l,p),t.update(l,i,p)}this.setMode=s,this.render=a,this.renderInstances=u}function _S(o,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");n=o.getParameter(_e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function i(_e){if(_e==="highp"){if(o.getShaderPrecisionFormat(35633,36338).precision>0&&o.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_e="mediump"}return _e==="mediump"&&o.getShaderPrecisionFormat(35633,36337).precision>0&&o.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&o instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&o instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const u=i(a);u!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",u,"instead."),a=u);const f=s||e.has("WEBGL_draw_buffers"),l=t.logarithmicDepthBuffer===!0,p=o.getParameter(34930),d=o.getParameter(35660),_=o.getParameter(3379),A=o.getParameter(34076),E=o.getParameter(34921),v=o.getParameter(36347),T=o.getParameter(36348),I=o.getParameter(36349),R=d>0,k=s||e.has("OES_texture_float"),K=R&&k,ee=s?o.getParameter(36183):0;return{isWebGL2:s,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:p,maxVertexTextures:d,maxTextureSize:_,maxCubemapSize:A,maxAttributes:E,maxVertexUniforms:v,maxVaryings:T,maxFragmentUniforms:I,vertexTextures:R,floatFragmentTextures:k,floatVertexTextures:K,maxSamples:ee}}function gS(o){const e=this;let t=null,n=0,r=!1,i=!1;const s=new xa,a=new Zo,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,d,_){const A=p.length!==0||d||n!==0||r;return r=d,t=l(p,_,0),n=p.length,A},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,f()},this.setState=function(p,d,_){const A=p.clippingPlanes,E=p.clipIntersection,v=p.clipShadows,T=o.get(p);if(!r||A===null||A.length===0||i&&!v)i?l(null):f();else{const I=i?0:n,R=I*4;let k=T.clippingState||null;u.value=k,k=l(A,d,R,_);for(let K=0;K!==R;++K)k[K]=t[K];T.clippingState=k,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=I}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(p,d,_,A){const E=p!==null?p.length:0;let v=null;if(E!==0){if(v=u.value,A!==!0||v===null){const T=_+E*4,I=d.matrixWorldInverse;a.getNormalMatrix(I),(v===null||v.length<T)&&(v=new Float32Array(T));for(let R=0,k=_;R!==E;++R,k+=4)s.copy(p[R]).applyMatrix4(I,a),s.normal.toArray(v,k),v[k+3]=s.constant}u.value=v,u.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,v}}function yS(o){let e=new WeakMap;function t(s,a){return a===pd?s.mapping=Mu:a===md&&(s.mapping=Du),s}function n(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===pd||a===md)if(e.has(s)){const u=e.get(s).texture;return t(u,s.mapping)}else{const u=s.image;if(u&&u.height>0){const f=new RT(u.height/2);return f.fromEquirectangularTexture(o,s),e.set(s,f),s.addEventListener("dispose",r),t(f.texture,s.mapping)}else return null}}return s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function i(){e=new WeakMap}return{get:n,dispose:i}}class Sh extends Xg{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=f*this.view.offsetX,s=i+f*this.view.width,a-=l*this.view.offsetY,u=a-l*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const bu=4,Vm=[.125,.215,.35,.446,.526,.582],Ma=20,Vf=new Sh,jm=new _i;let jf=null;const Ba=(1+Math.sqrt(5))/2,_u=1/Ba,zm=[new ke(1,1,1),new ke(-1,1,1),new ke(1,1,-1),new ke(-1,1,-1),new ke(0,Ba,_u),new ke(0,Ba,-_u),new ke(_u,0,Ba),new ke(-_u,0,Ba),new ke(Ba,_u,0),new ke(-Ba,_u,0)];class Km{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){jf=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Xm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jf),e.scissorTest=!1,ml(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Mu||e.mapping===Du?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jf=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:qo,minFilter:qo,generateMipmaps:!1,type:Ec,format:os,encoding:za,depthBuffer:!1},r=Jm(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Jm(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=vS(i)),this._blurMaterial=AS(i,e,t)}return r}_compileMaterial(e){const t=new ss(this._lodPlanes[0],e);this._renderer.compile(t,Vf)}_sceneToCubeUV(e,t,n,r){const a=new Ho(90,1,t,n),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],l=this._renderer,p=l.autoClear,d=l.toneMapping;l.getClearColor(jm),l.toneMapping=js,l.autoClear=!1;const _=new Ia({name:"PMREM.Background",side:cs,depthWrite:!1,depthTest:!1}),A=new ss(new Oc,_);let E=!1;const v=e.background;v?v.isColor&&(_.color.copy(v),e.background=null,E=!0):(_.color.copy(jm),E=!0);for(let T=0;T<6;T++){const I=T%3;I===0?(a.up.set(0,u[T],0),a.lookAt(f[T],0,0)):I===1?(a.up.set(0,0,u[T]),a.lookAt(0,f[T],0)):(a.up.set(0,u[T],0),a.lookAt(0,0,f[T]));const R=this._cubeSize;ml(r,I*R,T>2?R:0,R,R),l.setRenderTarget(r),E&&l.render(A,a),l.render(e,a)}A.geometry.dispose(),A.material.dispose(),l.toneMapping=d,l.autoClear=p,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Mu||e.mapping===Du;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Xm()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qm());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new ss(this._lodPlanes[0],i),a=i.uniforms;a.envMap.value=e;const u=this._cubeSize;ml(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(s,Vf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),s=zm[(r-1)%zm.length];this._blur(e,r-1,r,i,s)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const u=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const l=3,p=new ss(this._lodPlanes[r],f),d=f.uniforms,_=this._sizeLods[n]-1,A=isFinite(i)?Math.PI/(2*_):2*Math.PI/(2*Ma-1),E=i/A,v=isFinite(i)?1+Math.floor(l*E):Ma;v>Ma&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Ma}`);const T=[];let I=0;for(let _e=0;_e<Ma;++_e){const Q=_e/E,ne=Math.exp(-Q*Q/2);T.push(ne),_e===0?I+=ne:_e<v&&(I+=2*ne)}for(let _e=0;_e<T.length;_e++)T[_e]=T[_e]/I;d.envMap.value=e.texture,d.samples.value=v,d.weights.value=T,d.latitudinal.value=s==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:R}=this;d.dTheta.value=A,d.mipInt.value=R-n;const k=this._sizeLods[r],K=3*k*(r>R-bu?r-R+bu:0),ee=4*(this._cubeSize-k);ml(t,K,ee,3*k,2*k),u.setRenderTarget(t),u.render(p,Vf)}}function vS(o){const e=[],t=[],n=[];let r=o;const i=o-bu+1+Vm.length;for(let s=0;s<i;s++){const a=Math.pow(2,r);t.push(a);let u=1/a;s>o-bu?u=Vm[s-o+bu-1]:s===0&&(u=0),n.push(u);const f=1/(a-2),l=-f,p=1+f,d=[l,l,p,l,p,p,l,l,p,p,l,p],_=6,A=6,E=3,v=2,T=1,I=new Float32Array(E*A*_),R=new Float32Array(v*A*_),k=new Float32Array(T*A*_);for(let ee=0;ee<_;ee++){const _e=ee%3*2/3-1,Q=ee>2?0:-1,ne=[_e,Q,0,_e+2/3,Q,0,_e+2/3,Q+1,0,_e,Q,0,_e+2/3,Q+1,0,_e,Q+1,0];I.set(ne,E*A*ee),R.set(d,v*A*ee);const de=[ee,ee,ee,ee,ee,ee];k.set(de,T*A*ee)}const K=new gs;K.setAttribute("position",new Bo(I,E)),K.setAttribute("uv",new Bo(R,v)),K.setAttribute("faceIndex",new Bo(k,T)),e.push(K),r>bu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Jm(o,e,t){const n=new Ka(o,e,t);return n.texture.mapping=rf,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ml(o,e,t,n,r){o.viewport.set(e,t,n,r),o.scissor.set(e,t,n,r)}function AS(o,e,t){const n=new Float32Array(Ma),r=new ke(0,1,0);return new Ja({name:"SphericalGaussianBlur",defines:{n:Ma,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${o}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:xh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function qm(){return new Ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function Xm(){return new Ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:aa,depthTest:!1,depthWrite:!1})}function xh(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bS(o){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const u=a.mapping,f=u===pd||u===md,l=u===Mu||u===Du;if(f||l)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new Km(o)),p=f?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(f&&p&&p.height>0||l&&p&&r(p)){t===null&&(t=new Km(o));const d=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",i),d.texture}else return null}}}return a}function r(a){let u=0;const f=6;for(let l=0;l<f;l++)a[l]!==void 0&&u++;return u===f}function i(a){const u=a.target;u.removeEventListener("dispose",i);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function ES(o){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=o.getExtension("WEBGL_depth_texture")||o.getExtension("MOZ_WEBGL_depth_texture")||o.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=o.getExtension("WEBGL_compressed_texture_s3tc")||o.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=o.getExtension("WEBGL_compressed_texture_pvrtc")||o.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=o.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function TS(o,e,t,n){const r={},i=new WeakMap;function s(p){const d=p.target;d.index!==null&&e.remove(d.index);for(const A in d.attributes)e.remove(d.attributes[A]);d.removeEventListener("dispose",s),delete r[d.id];const _=i.get(d);_&&(e.remove(_),i.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(p,d){return r[d.id]===!0||(d.addEventListener("dispose",s),r[d.id]=!0,t.memory.geometries++),d}function u(p){const d=p.attributes;for(const A in d)e.update(d[A],34962);const _=p.morphAttributes;for(const A in _){const E=_[A];for(let v=0,T=E.length;v<T;v++)e.update(E[v],34962)}}function f(p){const d=[],_=p.index,A=p.attributes.position;let E=0;if(_!==null){const I=_.array;E=_.version;for(let R=0,k=I.length;R<k;R+=3){const K=I[R+0],ee=I[R+1],_e=I[R+2];d.push(K,ee,ee,_e,_e,K)}}else{const I=A.array;E=A.version;for(let R=0,k=I.length/3-1;R<k;R+=3){const K=R+0,ee=R+1,_e=R+2;d.push(K,ee,ee,_e,_e,K)}}const v=new(kg(d)?Jg:Kg)(d,1);v.version=E;const T=i.get(p);T&&e.remove(T),i.set(p,v)}function l(p){const d=i.get(p);if(d){const _=p.index;_!==null&&d.version<_.version&&f(p)}else f(p);return i.get(p)}return{get:a,update:u,getWireframeAttribute:l}}function wS(o,e,t,n){const r=n.isWebGL2;let i;function s(d){i=d}let a,u;function f(d){a=d.type,u=d.bytesPerElement}function l(d,_){o.drawElements(i,_,a,d*u),t.update(_,i,1)}function p(d,_,A){if(A===0)return;let E,v;if(r)E=o,v="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[v](i,_,a,d*u,A),t.update(_,i,A)}this.setMode=s,this.setIndex=f,this.render=l,this.renderInstances=p}function CS(o){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(i,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(i/3);break;case 1:t.lines+=a*(i/2);break;case 3:t.lines+=a*(i-1);break;case 2:t.lines+=a*i;break;case 0:t.points+=a*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function SS(o,e){return o[0]-e[0]}function xS(o,e){return Math.abs(e[1])-Math.abs(o[1])}function BS(o,e,t){const n={},r=new Float32Array(8),i=new WeakMap,s=new Yi,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function u(f,l,p,d){const _=f.morphTargetInfluences;if(e.isWebGL2===!0){const A=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,E=A!==void 0?A.length:0;let v=i.get(l);if(v===void 0||v.count!==E){let Se=function(){Te.dispose(),i.delete(l),l.removeEventListener("dispose",Se)};v!==void 0&&v.texture.dispose();const R=l.morphAttributes.position!==void 0,k=l.morphAttributes.normal!==void 0,K=l.morphAttributes.color!==void 0,ee=l.morphAttributes.position||[],_e=l.morphAttributes.normal||[],Q=l.morphAttributes.color||[];let ne=0;R===!0&&(ne=1),k===!0&&(ne=2),K===!0&&(ne=3);let de=l.attributes.position.count*ne,Ie=1;de>e.maxTextureSize&&(Ie=Math.ceil(de/e.maxTextureSize),de=e.maxTextureSize);const Pe=new Float32Array(de*Ie*4*E),Te=new jg(Pe,de,Ie,E);Te.type=oa,Te.needsUpdate=!0;const Ee=ne*4;for(let Oe=0;Oe<E;Oe++){const We=ee[Oe],j=_e[Oe],_t=Q[Oe],Qe=de*Ie*4*Oe;for(let Je=0;Je<We.count;Je++){const ze=Je*Ee;R===!0&&(s.fromBufferAttribute(We,Je),Pe[Qe+ze+0]=s.x,Pe[Qe+ze+1]=s.y,Pe[Qe+ze+2]=s.z,Pe[Qe+ze+3]=0),k===!0&&(s.fromBufferAttribute(j,Je),Pe[Qe+ze+4]=s.x,Pe[Qe+ze+5]=s.y,Pe[Qe+ze+6]=s.z,Pe[Qe+ze+7]=0),K===!0&&(s.fromBufferAttribute(_t,Je),Pe[Qe+ze+8]=s.x,Pe[Qe+ze+9]=s.y,Pe[Qe+ze+10]=s.z,Pe[Qe+ze+11]=_t.itemSize===4?s.w:1)}}v={count:E,texture:Te,size:new Xr(de,Ie)},i.set(l,v),l.addEventListener("dispose",Se)}let T=0;for(let R=0;R<_.length;R++)T+=_[R];const I=l.morphTargetsRelative?1:1-T;d.getUniforms().setValue(o,"morphTargetBaseInfluence",I),d.getUniforms().setValue(o,"morphTargetInfluences",_),d.getUniforms().setValue(o,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(o,"morphTargetsTextureSize",v.size)}else{const A=_===void 0?0:_.length;let E=n[l.id];if(E===void 0||E.length!==A){E=[];for(let k=0;k<A;k++)E[k]=[k,0];n[l.id]=E}for(let k=0;k<A;k++){const K=E[k];K[0]=k,K[1]=_[k]}E.sort(xS);for(let k=0;k<8;k++)k<A&&E[k][1]?(a[k][0]=E[k][0],a[k][1]=E[k][1]):(a[k][0]=Number.MAX_SAFE_INTEGER,a[k][1]=0);a.sort(SS);const v=l.morphAttributes.position,T=l.morphAttributes.normal;let I=0;for(let k=0;k<8;k++){const K=a[k],ee=K[0],_e=K[1];ee!==Number.MAX_SAFE_INTEGER&&_e?(v&&l.getAttribute("morphTarget"+k)!==v[ee]&&l.setAttribute("morphTarget"+k,v[ee]),T&&l.getAttribute("morphNormal"+k)!==T[ee]&&l.setAttribute("morphNormal"+k,T[ee]),r[k]=_e,I+=_e):(v&&l.hasAttribute("morphTarget"+k)===!0&&l.deleteAttribute("morphTarget"+k),T&&l.hasAttribute("morphNormal"+k)===!0&&l.deleteAttribute("morphNormal"+k),r[k]=0)}const R=l.morphTargetsRelative?1:1-I;d.getUniforms().setValue(o,"morphTargetBaseInfluence",R),d.getUniforms().setValue(o,"morphTargetInfluences",r)}}return{update:u}}function MS(o,e,t,n){let r=new WeakMap;function i(u){const f=n.render.frame,l=u.geometry,p=e.get(u,l);return r.get(p)!==f&&(e.update(p),r.set(p,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),p}function s(){r=new WeakMap}function a(u){const f=u.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:i,dispose:s}}const Zg=new xo,Qg=new jg,ey=new mT,ty=new Yg,Ym=[],$m=[],Zm=new Float32Array(16),Qm=new Float32Array(9),e_=new Float32Array(4);function Gu(o,e,t){const n=o[0];if(n<=0||n>0)return o;const r=e*t;let i=Ym[r];if(i===void 0&&(i=new Float32Array(r),Ym[r]=i),e!==0){n.toArray(i,0);for(let s=1,a=0;s!==e;++s)a+=t,o[s].toArray(i,a)}return i}function vo(o,e){if(o.length!==e.length)return!1;for(let t=0,n=o.length;t<n;t++)if(o[t]!==e[t])return!1;return!0}function Ao(o,e){for(let t=0,n=e.length;t<n;t++)o[t]=e[t]}function of(o,e){let t=$m[e];t===void 0&&(t=new Int32Array(e),$m[e]=t);for(let n=0;n!==e;++n)t[n]=o.allocateTextureUnit();return t}function DS(o,e){const t=this.cache;t[0]!==e&&(o.uniform1f(this.addr,e),t[0]=e)}function RS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;o.uniform2fv(this.addr,e),Ao(t,e)}}function IS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(o.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vo(t,e))return;o.uniform3fv(this.addr,e),Ao(t,e)}}function PS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;o.uniform4fv(this.addr,e),Ao(t,e)}}function FS(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(vo(t,e))return;o.uniformMatrix2fv(this.addr,!1,e),Ao(t,e)}else{if(vo(t,n))return;e_.set(n),o.uniformMatrix2fv(this.addr,!1,e_),Ao(t,n)}}function LS(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(vo(t,e))return;o.uniformMatrix3fv(this.addr,!1,e),Ao(t,e)}else{if(vo(t,n))return;Qm.set(n),o.uniformMatrix3fv(this.addr,!1,Qm),Ao(t,n)}}function OS(o,e){const t=this.cache,n=e.elements;if(n===void 0){if(vo(t,e))return;o.uniformMatrix4fv(this.addr,!1,e),Ao(t,e)}else{if(vo(t,n))return;Zm.set(n),o.uniformMatrix4fv(this.addr,!1,Zm),Ao(t,n)}}function NS(o,e){const t=this.cache;t[0]!==e&&(o.uniform1i(this.addr,e),t[0]=e)}function US(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;o.uniform2iv(this.addr,e),Ao(t,e)}}function GS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vo(t,e))return;o.uniform3iv(this.addr,e),Ao(t,e)}}function kS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;o.uniform4iv(this.addr,e),Ao(t,e)}}function HS(o,e){const t=this.cache;t[0]!==e&&(o.uniform1ui(this.addr,e),t[0]=e)}function WS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(o.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;o.uniform2uiv(this.addr,e),Ao(t,e)}}function VS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(o.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vo(t,e))return;o.uniform3uiv(this.addr,e),Ao(t,e)}}function jS(o,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(o.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;o.uniform4uiv(this.addr,e),Ao(t,e)}}function zS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||Zg,r)}function KS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||ey,r)}function JS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||ty,r)}function qS(o,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(o.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||Qg,r)}function XS(o){switch(o){case 5126:return DS;case 35664:return RS;case 35665:return IS;case 35666:return PS;case 35674:return FS;case 35675:return LS;case 35676:return OS;case 5124:case 35670:return NS;case 35667:case 35671:return US;case 35668:case 35672:return GS;case 35669:case 35673:return kS;case 5125:return HS;case 36294:return WS;case 36295:return VS;case 36296:return jS;case 35678:case 36198:case 36298:case 36306:case 35682:return zS;case 35679:case 36299:case 36307:return KS;case 35680:case 36300:case 36308:case 36293:return JS;case 36289:case 36303:case 36311:case 36292:return qS}}function YS(o,e){o.uniform1fv(this.addr,e)}function $S(o,e){const t=Gu(e,this.size,2);o.uniform2fv(this.addr,t)}function ZS(o,e){const t=Gu(e,this.size,3);o.uniform3fv(this.addr,t)}function QS(o,e){const t=Gu(e,this.size,4);o.uniform4fv(this.addr,t)}function e1(o,e){const t=Gu(e,this.size,4);o.uniformMatrix2fv(this.addr,!1,t)}function t1(o,e){const t=Gu(e,this.size,9);o.uniformMatrix3fv(this.addr,!1,t)}function n1(o,e){const t=Gu(e,this.size,16);o.uniformMatrix4fv(this.addr,!1,t)}function r1(o,e){o.uniform1iv(this.addr,e)}function i1(o,e){o.uniform2iv(this.addr,e)}function o1(o,e){o.uniform3iv(this.addr,e)}function s1(o,e){o.uniform4iv(this.addr,e)}function a1(o,e){o.uniform1uiv(this.addr,e)}function u1(o,e){o.uniform2uiv(this.addr,e)}function c1(o,e){o.uniform3uiv(this.addr,e)}function l1(o,e){o.uniform4uiv(this.addr,e)}function f1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||Zg,i[s])}function d1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||ey,i[s])}function h1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||ty,i[s])}function p1(o,e,t){const n=this.cache,r=e.length,i=of(t,r);vo(n,i)||(o.uniform1iv(this.addr,i),Ao(n,i));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Qg,i[s])}function m1(o){switch(o){case 5126:return YS;case 35664:return $S;case 35665:return ZS;case 35666:return QS;case 35674:return e1;case 35675:return t1;case 35676:return n1;case 5124:case 35670:return r1;case 35667:case 35671:return i1;case 35668:case 35672:return o1;case 35669:case 35673:return s1;case 5125:return a1;case 36294:return u1;case 36295:return c1;case 36296:return l1;case 35678:case 36198:case 36298:case 36306:case 35682:return f1;case 35679:case 36299:case 36307:return d1;case 35680:case 36300:case 36308:case 36293:return h1;case 36289:case 36303:case 36311:case 36292:return p1}}class _1{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=XS(t.type)}}class g1{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=m1(t.type)}}class y1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const zf=/(\w+)(\])?(\[|\.)?/g;function t_(o,e){o.seq.push(e),o.map[e.id]=e}function v1(o,e,t){const n=o.name,r=n.length;for(zf.lastIndex=0;;){const i=zf.exec(n),s=zf.lastIndex;let a=i[1];const u=i[2]==="]",f=i[3];if(u&&(a=a|0),f===void 0||f==="["&&s+2===r){t_(t,f===void 0?new _1(a,o,e):new g1(a,o,e));break}else{let p=t.map[a];p===void 0&&(p=new y1(a),t_(t,p)),t=p}}}class xl{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const i=e.getActiveUniform(t,r),s=e.getUniformLocation(t,i.name);v1(i,s,this)}}setValue(e,t,n,r){const i=this.map[t];i!==void 0&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const a=t[i],u=n[a.id];u.needsUpdate!==!1&&a.setValue(e,u.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const s=e[r];s.id in t&&n.push(s)}return n}}function n_(o,e,t){const n=o.createShader(e);return o.shaderSource(n,t),o.compileShader(n),n}let A1=0;function b1(o,e){const t=o.split(`
`),n=[],r=Math.max(e-6,0),i=Math.min(e+6,t.length);for(let s=r;s<i;s++){const a=s+1;n.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return n.join(`
`)}function E1(o){switch(o){case za:return["Linear","( value )"];case Vi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",o),["Linear","( value )"]}}function r_(o,e,t){const n=o.getShaderParameter(e,35713),r=o.getShaderInfoLog(e).trim();if(n&&r==="")return"";const i=/ERROR: 0:(\d+)/.exec(r);if(i){const s=parseInt(i[1]);return t.toUpperCase()+`

`+r+`

`+b1(o.getShaderSource(e),s)}else return r}function T1(o,e){const t=E1(e);return"vec4 "+o+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function w1(o,e){let t;switch(e){case BE:t="Linear";break;case ME:t="Reinhard";break;case DE:t="OptimizedCineon";break;case RE:t="ACESFilmic";break;case IE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+o+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function C1(o){return[o.extensionDerivatives||o.envMapCubeUVHeight||o.bumpMap||o.tangentSpaceNormalMap||o.clearcoatNormalMap||o.flatShading||o.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(o.extensionFragDepth||o.logarithmicDepthBuffer)&&o.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",o.extensionDrawBuffers&&o.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(o.extensionShaderTextureLOD||o.envMap||o.transmission)&&o.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cc).join(`
`)}function S1(o){const e=[];for(const t in o){const n=o[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function x1(o,e){const t={},n=o.getProgramParameter(e,35721);for(let r=0;r<n;r++){const i=o.getActiveAttrib(e,r),s=i.name;let a=1;i.type===35674&&(a=2),i.type===35675&&(a=3),i.type===35676&&(a=4),t[s]={type:i.type,location:o.getAttribLocation(e,s),locationSize:a}}return t}function cc(o){return o!==""}function i_(o,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return o.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function o_(o,e){return o.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const B1=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ad(o){return o.replace(B1,M1)}function M1(o,e){const t=mi[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Ad(t)}const D1=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s_(o){return o.replace(D1,R1)}function R1(o,e,t,n){let r="";for(let i=parseInt(e);i<parseInt(t);i++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return r}function a_(o){let e="precision "+o.precision+` float;
precision `+o.precision+" int;";return o.precision==="highp"?e+=`
#define HIGH_PRECISION`:o.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:o.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function I1(o){let e="SHADOWMAP_TYPE_BASIC";return o.shadowMapType===Dg?e="SHADOWMAP_TYPE_PCF":o.shadowMapType===sE?e="SHADOWMAP_TYPE_PCF_SOFT":o.shadowMapType===uc&&(e="SHADOWMAP_TYPE_VSM"),e}function P1(o){let e="ENVMAP_TYPE_CUBE";if(o.envMap)switch(o.envMapMode){case Mu:case Du:e="ENVMAP_TYPE_CUBE";break;case rf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function F1(o){let e="ENVMAP_MODE_REFLECTION";if(o.envMap)switch(o.envMapMode){case Du:e="ENVMAP_MODE_REFRACTION";break}return e}function L1(o){let e="ENVMAP_BLENDING_NONE";if(o.envMap)switch(o.combine){case Pg:e="ENVMAP_BLENDING_MULTIPLY";break;case SE:e="ENVMAP_BLENDING_MIX";break;case xE:e="ENVMAP_BLENDING_ADD";break}return e}function O1(o){const e=o.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function N1(o,e,t,n){const r=o.getContext(),i=t.defines;let s=t.vertexShader,a=t.fragmentShader;const u=I1(t),f=P1(t),l=F1(t),p=L1(t),d=O1(t),_=t.isWebGL2?"":C1(t),A=S1(i),E=r.createProgram();let v,T,I=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[A].filter(cc).join(`
`),v.length>0&&(v+=`
`),T=[_,A].filter(cc).join(`
`),T.length>0&&(T+=`
`)):(v=[a_(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cc).join(`
`),T=[_,a_(t),"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+l:"",t.envMap?"#define "+p:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==js?"#define TONE_MAPPING":"",t.toneMapping!==js?mi.tonemapping_pars_fragment:"",t.toneMapping!==js?w1("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",mi.encodings_pars_fragment,T1("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cc).join(`
`)),s=Ad(s),s=i_(s,t),s=o_(s,t),a=Ad(a),a=i_(a,t),a=o_(a,t),s=s_(s),a=s_(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(I=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,T=["#define varying in",t.glslVersion===Rm?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Rm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const R=I+v+s,k=I+T+a,K=n_(r,35633,R),ee=n_(r,35632,k);if(r.attachShader(E,K),r.attachShader(E,ee),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E),o.debug.checkShaderErrors){const ne=r.getProgramInfoLog(E).trim(),de=r.getShaderInfoLog(K).trim(),Ie=r.getShaderInfoLog(ee).trim();let Pe=!0,Te=!0;if(r.getProgramParameter(E,35714)===!1){Pe=!1;const Ee=r_(r,K,"vertex"),Se=r_(r,ee,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,35715)+`

Program Info Log: `+ne+`
`+Ee+`
`+Se)}else ne!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ne):(de===""||Ie==="")&&(Te=!1);Te&&(this.diagnostics={runnable:Pe,programLog:ne,vertexShader:{log:de,prefix:v},fragmentShader:{log:Ie,prefix:T}})}r.deleteShader(K),r.deleteShader(ee);let _e;this.getUniforms=function(){return _e===void 0&&(_e=new xl(r,E)),_e};let Q;return this.getAttributes=function(){return Q===void 0&&(Q=x1(r,E)),Q},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.name=t.shaderName,this.id=A1++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=K,this.fragmentShader=ee,this}let U1=0;class G1{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(i)===!1&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new k1(e),t.set(e,n)),n}}class k1{constructor(e){this.id=U1++,this.code=e,this.usedTimes=0}}function H1(o,e,t,n,r,i,s){const a=new zg,u=new G1,f=[],l=r.isWebGL2,p=r.logarithmicDepthBuffer,d=r.vertexTextures;let _=r.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(Q,ne,de,Ie,Pe){const Te=Ie.fog,Ee=Pe.geometry,Se=Q.isMeshStandardMaterial?Ie.environment:null,Oe=(Q.isMeshStandardMaterial?t:e).get(Q.envMap||Se),We=Oe&&Oe.mapping===rf?Oe.image.height:null,j=A[Q.type];Q.precision!==null&&(_=r.getMaxPrecision(Q.precision),_!==Q.precision&&console.warn("THREE.WebGLProgram.getParameters:",Q.precision,"not supported, using",_,"instead."));const _t=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,Qe=_t!==void 0?_t.length:0;let Je=0;Ee.morphAttributes.position!==void 0&&(Je=1),Ee.morphAttributes.normal!==void 0&&(Je=2),Ee.morphAttributes.color!==void 0&&(Je=3);let ze,ct,He,P;if(j){const dn=Ts[j];ze=dn.vertexShader,ct=dn.fragmentShader}else ze=Q.vertexShader,ct=Q.fragmentShader,u.update(Q),He=u.getVertexShaderID(Q),P=u.getFragmentShaderID(Q);const nt=o.getRenderTarget(),Fn=Q.alphaTest>0,Yt=Q.clearcoat>0,kn=Q.iridescence>0;return{isWebGL2:l,shaderID:j,shaderName:Q.type,vertexShader:ze,fragmentShader:ct,defines:Q.defines,customVertexShaderID:He,customFragmentShaderID:P,isRawShaderMaterial:Q.isRawShaderMaterial===!0,glslVersion:Q.glslVersion,precision:_,instancing:Pe.isInstancedMesh===!0,instancingColor:Pe.isInstancedMesh===!0&&Pe.instanceColor!==null,supportsVertexTextures:d,outputEncoding:nt===null?o.outputEncoding:nt.isXRRenderTarget===!0?nt.texture.encoding:za,map:!!Q.map,matcap:!!Q.matcap,envMap:!!Oe,envMapMode:Oe&&Oe.mapping,envMapCubeUVHeight:We,lightMap:!!Q.lightMap,aoMap:!!Q.aoMap,emissiveMap:!!Q.emissiveMap,bumpMap:!!Q.bumpMap,normalMap:!!Q.normalMap,objectSpaceNormalMap:Q.normalMapType===ZE,tangentSpaceNormalMap:Q.normalMapType===Ug,decodeVideoTexture:!!Q.map&&Q.map.isVideoTexture===!0&&Q.map.encoding===Vi,clearcoat:Yt,clearcoatMap:Yt&&!!Q.clearcoatMap,clearcoatRoughnessMap:Yt&&!!Q.clearcoatRoughnessMap,clearcoatNormalMap:Yt&&!!Q.clearcoatNormalMap,iridescence:kn,iridescenceMap:kn&&!!Q.iridescenceMap,iridescenceThicknessMap:kn&&!!Q.iridescenceThicknessMap,displacementMap:!!Q.displacementMap,roughnessMap:!!Q.roughnessMap,metalnessMap:!!Q.metalnessMap,specularMap:!!Q.specularMap,specularIntensityMap:!!Q.specularIntensityMap,specularColorMap:!!Q.specularColorMap,opaque:Q.transparent===!1&&Q.blending===wu,alphaMap:!!Q.alphaMap,alphaTest:Fn,gradientMap:!!Q.gradientMap,sheen:Q.sheen>0,sheenColorMap:!!Q.sheenColorMap,sheenRoughnessMap:!!Q.sheenRoughnessMap,transmission:Q.transmission>0,transmissionMap:!!Q.transmissionMap,thicknessMap:!!Q.thicknessMap,combine:Q.combine,vertexTangents:!!Q.normalMap&&!!Ee.attributes.tangent,vertexColors:Q.vertexColors,vertexAlphas:Q.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,vertexUvs:!!Q.map||!!Q.bumpMap||!!Q.normalMap||!!Q.specularMap||!!Q.alphaMap||!!Q.emissiveMap||!!Q.roughnessMap||!!Q.metalnessMap||!!Q.clearcoatMap||!!Q.clearcoatRoughnessMap||!!Q.clearcoatNormalMap||!!Q.iridescenceMap||!!Q.iridescenceThicknessMap||!!Q.displacementMap||!!Q.transmissionMap||!!Q.thicknessMap||!!Q.specularIntensityMap||!!Q.specularColorMap||!!Q.sheenColorMap||!!Q.sheenRoughnessMap,uvsVertexOnly:!(Q.map||Q.bumpMap||Q.normalMap||Q.specularMap||Q.alphaMap||Q.emissiveMap||Q.roughnessMap||Q.metalnessMap||Q.clearcoatNormalMap||Q.iridescenceMap||Q.iridescenceThicknessMap||Q.transmission>0||Q.transmissionMap||Q.thicknessMap||Q.specularIntensityMap||Q.specularColorMap||Q.sheen>0||Q.sheenColorMap||Q.sheenRoughnessMap)&&!!Q.displacementMap,fog:!!Te,useFog:Q.fog===!0,fogExp2:Te&&Te.isFogExp2,flatShading:!!Q.flatShading,sizeAttenuation:Q.sizeAttenuation,logarithmicDepthBuffer:p,skinning:Pe.isSkinnedMesh===!0,morphTargets:Ee.morphAttributes.position!==void 0,morphNormals:Ee.morphAttributes.normal!==void 0,morphColors:Ee.morphAttributes.color!==void 0,morphTargetsCount:Qe,morphTextureStride:Je,numDirLights:ne.directional.length,numPointLights:ne.point.length,numSpotLights:ne.spot.length,numSpotLightMaps:ne.spotLightMap.length,numRectAreaLights:ne.rectArea.length,numHemiLights:ne.hemi.length,numDirLightShadows:ne.directionalShadowMap.length,numPointLightShadows:ne.pointShadowMap.length,numSpotLightShadows:ne.spotShadowMap.length,numSpotLightShadowsWithMaps:ne.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:Q.dithering,shadowMapEnabled:o.shadowMap.enabled&&de.length>0,shadowMapType:o.shadowMap.type,toneMapping:Q.toneMapped?o.toneMapping:js,physicallyCorrectLights:o.physicallyCorrectLights,premultipliedAlpha:Q.premultipliedAlpha,doubleSided:Q.side===nf,flipSided:Q.side===cs,useDepthPacking:!!Q.depthPacking,depthPacking:Q.depthPacking||0,index0AttributeName:Q.index0AttributeName,extensionDerivatives:Q.extensions&&Q.extensions.derivatives,extensionFragDepth:Q.extensions&&Q.extensions.fragDepth,extensionDrawBuffers:Q.extensions&&Q.extensions.drawBuffers,extensionShaderTextureLOD:Q.extensions&&Q.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||n.has("EXT_shader_texture_lod"),customProgramCacheKey:Q.customProgramCacheKey()}}function v(Q){const ne=[];if(Q.shaderID?ne.push(Q.shaderID):(ne.push(Q.customVertexShaderID),ne.push(Q.customFragmentShaderID)),Q.defines!==void 0)for(const de in Q.defines)ne.push(de),ne.push(Q.defines[de]);return Q.isRawShaderMaterial===!1&&(T(ne,Q),I(ne,Q),ne.push(o.outputEncoding)),ne.push(Q.customProgramCacheKey),ne.join()}function T(Q,ne){Q.push(ne.precision),Q.push(ne.outputEncoding),Q.push(ne.envMapMode),Q.push(ne.envMapCubeUVHeight),Q.push(ne.combine),Q.push(ne.vertexUvs),Q.push(ne.fogExp2),Q.push(ne.sizeAttenuation),Q.push(ne.morphTargetsCount),Q.push(ne.morphAttributeCount),Q.push(ne.numDirLights),Q.push(ne.numPointLights),Q.push(ne.numSpotLights),Q.push(ne.numSpotLightMaps),Q.push(ne.numHemiLights),Q.push(ne.numRectAreaLights),Q.push(ne.numDirLightShadows),Q.push(ne.numPointLightShadows),Q.push(ne.numSpotLightShadows),Q.push(ne.numSpotLightShadowsWithMaps),Q.push(ne.shadowMapType),Q.push(ne.toneMapping),Q.push(ne.numClippingPlanes),Q.push(ne.numClipIntersection),Q.push(ne.depthPacking)}function I(Q,ne){a.disableAll(),ne.isWebGL2&&a.enable(0),ne.supportsVertexTextures&&a.enable(1),ne.instancing&&a.enable(2),ne.instancingColor&&a.enable(3),ne.map&&a.enable(4),ne.matcap&&a.enable(5),ne.envMap&&a.enable(6),ne.lightMap&&a.enable(7),ne.aoMap&&a.enable(8),ne.emissiveMap&&a.enable(9),ne.bumpMap&&a.enable(10),ne.normalMap&&a.enable(11),ne.objectSpaceNormalMap&&a.enable(12),ne.tangentSpaceNormalMap&&a.enable(13),ne.clearcoat&&a.enable(14),ne.clearcoatMap&&a.enable(15),ne.clearcoatRoughnessMap&&a.enable(16),ne.clearcoatNormalMap&&a.enable(17),ne.iridescence&&a.enable(18),ne.iridescenceMap&&a.enable(19),ne.iridescenceThicknessMap&&a.enable(20),ne.displacementMap&&a.enable(21),ne.specularMap&&a.enable(22),ne.roughnessMap&&a.enable(23),ne.metalnessMap&&a.enable(24),ne.gradientMap&&a.enable(25),ne.alphaMap&&a.enable(26),ne.alphaTest&&a.enable(27),ne.vertexColors&&a.enable(28),ne.vertexAlphas&&a.enable(29),ne.vertexUvs&&a.enable(30),ne.vertexTangents&&a.enable(31),ne.uvsVertexOnly&&a.enable(32),Q.push(a.mask),a.disableAll(),ne.fog&&a.enable(0),ne.useFog&&a.enable(1),ne.flatShading&&a.enable(2),ne.logarithmicDepthBuffer&&a.enable(3),ne.skinning&&a.enable(4),ne.morphTargets&&a.enable(5),ne.morphNormals&&a.enable(6),ne.morphColors&&a.enable(7),ne.premultipliedAlpha&&a.enable(8),ne.shadowMapEnabled&&a.enable(9),ne.physicallyCorrectLights&&a.enable(10),ne.doubleSided&&a.enable(11),ne.flipSided&&a.enable(12),ne.useDepthPacking&&a.enable(13),ne.dithering&&a.enable(14),ne.specularIntensityMap&&a.enable(15),ne.specularColorMap&&a.enable(16),ne.transmission&&a.enable(17),ne.transmissionMap&&a.enable(18),ne.thicknessMap&&a.enable(19),ne.sheen&&a.enable(20),ne.sheenColorMap&&a.enable(21),ne.sheenRoughnessMap&&a.enable(22),ne.decodeVideoTexture&&a.enable(23),ne.opaque&&a.enable(24),Q.push(a.mask)}function R(Q){const ne=A[Q.type];let de;if(ne){const Ie=Ts[ne];de=xT.clone(Ie.uniforms)}else de=Q.uniforms;return de}function k(Q,ne){let de;for(let Ie=0,Pe=f.length;Ie<Pe;Ie++){const Te=f[Ie];if(Te.cacheKey===ne){de=Te,++de.usedTimes;break}}return de===void 0&&(de=new N1(o,ne,Q,i),f.push(de)),de}function K(Q){if(--Q.usedTimes===0){const ne=f.indexOf(Q);f[ne]=f[f.length-1],f.pop(),Q.destroy()}}function ee(Q){u.remove(Q)}function _e(){u.dispose()}return{getParameters:E,getProgramCacheKey:v,getUniforms:R,acquireProgram:k,releaseProgram:K,releaseShaderCache:ee,programs:f,dispose:_e}}function W1(){let o=new WeakMap;function e(i){let s=o.get(i);return s===void 0&&(s={},o.set(i,s)),s}function t(i){o.delete(i)}function n(i,s,a){o.get(i)[s]=a}function r(){o=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function V1(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.material.id!==e.material.id?o.material.id-e.material.id:o.z!==e.z?o.z-e.z:o.id-e.id}function u_(o,e){return o.groupOrder!==e.groupOrder?o.groupOrder-e.groupOrder:o.renderOrder!==e.renderOrder?o.renderOrder-e.renderOrder:o.z!==e.z?e.z-o.z:o.id-e.id}function c_(){const o=[];let e=0;const t=[],n=[],r=[];function i(){e=0,t.length=0,n.length=0,r.length=0}function s(p,d,_,A,E,v){let T=o[e];return T===void 0?(T={id:p.id,object:p,geometry:d,material:_,groupOrder:A,renderOrder:p.renderOrder,z:E,group:v},o[e]=T):(T.id=p.id,T.object=p,T.geometry=d,T.material=_,T.groupOrder=A,T.renderOrder=p.renderOrder,T.z=E,T.group=v),e++,T}function a(p,d,_,A,E,v){const T=s(p,d,_,A,E,v);_.transmission>0?n.push(T):_.transparent===!0?r.push(T):t.push(T)}function u(p,d,_,A,E,v){const T=s(p,d,_,A,E,v);_.transmission>0?n.unshift(T):_.transparent===!0?r.unshift(T):t.unshift(T)}function f(p,d){t.length>1&&t.sort(p||V1),n.length>1&&n.sort(d||u_),r.length>1&&r.sort(d||u_)}function l(){for(let p=e,d=o.length;p<d;p++){const _=o[p];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:r,init:i,push:a,unshift:u,finish:l,sort:f}}function j1(){let o=new WeakMap;function e(n,r){const i=o.get(n);let s;return i===void 0?(s=new c_,o.set(n,[s])):r>=i.length?(s=new c_,i.push(s)):s=i[r],s}function t(){o=new WeakMap}return{get:e,dispose:t}}function z1(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ke,color:new _i};break;case"SpotLight":t={position:new ke,direction:new ke,color:new _i,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ke,color:new _i,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ke,skyColor:new _i,groundColor:new _i};break;case"RectAreaLight":t={color:new _i,position:new ke,halfWidth:new ke,halfHeight:new ke};break}return o[e.id]=t,t}}}function K1(){const o={};return{get:function(e){if(o[e.id]!==void 0)return o[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xr};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xr};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xr,shadowCameraNear:1,shadowCameraFar:1e3};break}return o[e.id]=t,t}}}let J1=0;function q1(o,e){return(e.castShadow?2:0)-(o.castShadow?2:0)+(e.map?1:0)-(o.map?1:0)}function X1(o,e){const t=new z1,n=K1(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)r.probe.push(new ke);const i=new ke,s=new Ei,a=new Ei;function u(l,p){let d=0,_=0,A=0;for(let Ie=0;Ie<9;Ie++)r.probe[Ie].set(0,0,0);let E=0,v=0,T=0,I=0,R=0,k=0,K=0,ee=0,_e=0,Q=0;l.sort(q1);const ne=p!==!0?Math.PI:1;for(let Ie=0,Pe=l.length;Ie<Pe;Ie++){const Te=l[Ie],Ee=Te.color,Se=Te.intensity,Oe=Te.distance,We=Te.shadow&&Te.shadow.map?Te.shadow.map.texture:null;if(Te.isAmbientLight)d+=Ee.r*Se*ne,_+=Ee.g*Se*ne,A+=Ee.b*Se*ne;else if(Te.isLightProbe)for(let j=0;j<9;j++)r.probe[j].addScaledVector(Te.sh.coefficients[j],Se);else if(Te.isDirectionalLight){const j=t.get(Te);if(j.color.copy(Te.color).multiplyScalar(Te.intensity*ne),Te.castShadow){const _t=Te.shadow,Qe=n.get(Te);Qe.shadowBias=_t.bias,Qe.shadowNormalBias=_t.normalBias,Qe.shadowRadius=_t.radius,Qe.shadowMapSize=_t.mapSize,r.directionalShadow[E]=Qe,r.directionalShadowMap[E]=We,r.directionalShadowMatrix[E]=Te.shadow.matrix,k++}r.directional[E]=j,E++}else if(Te.isSpotLight){const j=t.get(Te);j.position.setFromMatrixPosition(Te.matrixWorld),j.color.copy(Ee).multiplyScalar(Se*ne),j.distance=Oe,j.coneCos=Math.cos(Te.angle),j.penumbraCos=Math.cos(Te.angle*(1-Te.penumbra)),j.decay=Te.decay,r.spot[T]=j;const _t=Te.shadow;if(Te.map&&(r.spotLightMap[_e]=Te.map,_e++,_t.updateMatrices(Te),Te.castShadow&&Q++),r.spotLightMatrix[T]=_t.matrix,Te.castShadow){const Qe=n.get(Te);Qe.shadowBias=_t.bias,Qe.shadowNormalBias=_t.normalBias,Qe.shadowRadius=_t.radius,Qe.shadowMapSize=_t.mapSize,r.spotShadow[T]=Qe,r.spotShadowMap[T]=We,ee++}T++}else if(Te.isRectAreaLight){const j=t.get(Te);j.color.copy(Ee).multiplyScalar(Se),j.halfWidth.set(Te.width*.5,0,0),j.halfHeight.set(0,Te.height*.5,0),r.rectArea[I]=j,I++}else if(Te.isPointLight){const j=t.get(Te);if(j.color.copy(Te.color).multiplyScalar(Te.intensity*ne),j.distance=Te.distance,j.decay=Te.decay,Te.castShadow){const _t=Te.shadow,Qe=n.get(Te);Qe.shadowBias=_t.bias,Qe.shadowNormalBias=_t.normalBias,Qe.shadowRadius=_t.radius,Qe.shadowMapSize=_t.mapSize,Qe.shadowCameraNear=_t.camera.near,Qe.shadowCameraFar=_t.camera.far,r.pointShadow[v]=Qe,r.pointShadowMap[v]=We,r.pointShadowMatrix[v]=Te.shadow.matrix,K++}r.point[v]=j,v++}else if(Te.isHemisphereLight){const j=t.get(Te);j.skyColor.copy(Te.color).multiplyScalar(Se*ne),j.groundColor.copy(Te.groundColor).multiplyScalar(Se*ne),r.hemi[R]=j,R++}}I>0&&(e.isWebGL2||o.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=un.LTC_FLOAT_1,r.rectAreaLTC2=un.LTC_FLOAT_2):o.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=un.LTC_HALF_1,r.rectAreaLTC2=un.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=_,r.ambient[2]=A;const de=r.hash;(de.directionalLength!==E||de.pointLength!==v||de.spotLength!==T||de.rectAreaLength!==I||de.hemiLength!==R||de.numDirectionalShadows!==k||de.numPointShadows!==K||de.numSpotShadows!==ee||de.numSpotMaps!==_e)&&(r.directional.length=E,r.spot.length=T,r.rectArea.length=I,r.point.length=v,r.hemi.length=R,r.directionalShadow.length=k,r.directionalShadowMap.length=k,r.pointShadow.length=K,r.pointShadowMap.length=K,r.spotShadow.length=ee,r.spotShadowMap.length=ee,r.directionalShadowMatrix.length=k,r.pointShadowMatrix.length=K,r.spotLightMatrix.length=ee+_e-Q,r.spotLightMap.length=_e,r.numSpotLightShadowsWithMaps=Q,de.directionalLength=E,de.pointLength=v,de.spotLength=T,de.rectAreaLength=I,de.hemiLength=R,de.numDirectionalShadows=k,de.numPointShadows=K,de.numSpotShadows=ee,de.numSpotMaps=_e,r.version=J1++)}function f(l,p){let d=0,_=0,A=0,E=0,v=0;const T=p.matrixWorldInverse;for(let I=0,R=l.length;I<R;I++){const k=l[I];if(k.isDirectionalLight){const K=r.directional[d];K.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),K.direction.sub(i),K.direction.transformDirection(T),d++}else if(k.isSpotLight){const K=r.spot[A];K.position.setFromMatrixPosition(k.matrixWorld),K.position.applyMatrix4(T),K.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),K.direction.sub(i),K.direction.transformDirection(T),A++}else if(k.isRectAreaLight){const K=r.rectArea[E];K.position.setFromMatrixPosition(k.matrixWorld),K.position.applyMatrix4(T),a.identity(),s.copy(k.matrixWorld),s.premultiply(T),a.extractRotation(s),K.halfWidth.set(k.width*.5,0,0),K.halfHeight.set(0,k.height*.5,0),K.halfWidth.applyMatrix4(a),K.halfHeight.applyMatrix4(a),E++}else if(k.isPointLight){const K=r.point[_];K.position.setFromMatrixPosition(k.matrixWorld),K.position.applyMatrix4(T),_++}else if(k.isHemisphereLight){const K=r.hemi[v];K.direction.setFromMatrixPosition(k.matrixWorld),K.direction.transformDirection(T),v++}}}return{setup:u,setupView:f,state:r}}function l_(o,e){const t=new X1(o,e),n=[],r=[];function i(){n.length=0,r.length=0}function s(p){n.push(p)}function a(p){r.push(p)}function u(p){t.setup(n,p)}function f(p){t.setupView(n,p)}return{init:i,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:u,setupLightsView:f,pushLight:s,pushShadow:a}}function Y1(o,e){let t=new WeakMap;function n(i,s=0){const a=t.get(i);let u;return a===void 0?(u=new l_(o,e),t.set(i,[u])):s>=a.length?(u=new l_(o,e),a.push(u)):u=a[s],u}function r(){t=new WeakMap}return{get:n,dispose:r}}class $1 extends Ss{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=YE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Z1 extends Ss{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ke,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Q1=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ex=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tx(o,e,t){let n=new wh;const r=new Xr,i=new Xr,s=new Yi,a=new $1({depthPacking:$E}),u=new Z1,f={},l=t.maxTextureSize,p={0:cs,1:ua,2:nf},d=new Ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xr},radius:{value:4}},vertexShader:Q1,fragmentShader:ex}),_=d.clone();_.defines.HORIZONTAL_PASS=1;const A=new gs;A.setAttribute("position",new Bo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ss(A,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dg,this.render=function(k,K,ee){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||k.length===0)return;const _e=o.getRenderTarget(),Q=o.getActiveCubeFace(),ne=o.getActiveMipmapLevel(),de=o.state;de.setBlending(aa),de.buffers.color.setClear(1,1,1,1),de.buffers.depth.setTest(!0),de.setScissorTest(!1);for(let Ie=0,Pe=k.length;Ie<Pe;Ie++){const Te=k[Ie],Ee=Te.shadow;if(Ee===void 0){console.warn("THREE.WebGLShadowMap:",Te,"has no shadow.");continue}if(Ee.autoUpdate===!1&&Ee.needsUpdate===!1)continue;r.copy(Ee.mapSize);const Se=Ee.getFrameExtents();if(r.multiply(Se),i.copy(Ee.mapSize),(r.x>l||r.y>l)&&(r.x>l&&(i.x=Math.floor(l/Se.x),r.x=i.x*Se.x,Ee.mapSize.x=i.x),r.y>l&&(i.y=Math.floor(l/Se.y),r.y=i.y*Se.y,Ee.mapSize.y=i.y)),Ee.map===null){const We=this.type!==uc?{minFilter:To,magFilter:To}:{};Ee.map=new Ka(r.x,r.y,We),Ee.map.texture.name=Te.name+".shadowMap",Ee.camera.updateProjectionMatrix()}o.setRenderTarget(Ee.map),o.clear();const Oe=Ee.getViewportCount();for(let We=0;We<Oe;We++){const j=Ee.getViewport(We);s.set(i.x*j.x,i.y*j.y,i.x*j.z,i.y*j.w),de.viewport(s),Ee.updateMatrices(Te,We),n=Ee.getFrustum(),R(K,ee,Ee.camera,Te,this.type)}Ee.isPointLightShadow!==!0&&this.type===uc&&T(Ee,ee),Ee.needsUpdate=!1}v.needsUpdate=!1,o.setRenderTarget(_e,Q,ne)};function T(k,K){const ee=e.update(E);d.defines.VSM_SAMPLES!==k.blurSamples&&(d.defines.VSM_SAMPLES=k.blurSamples,_.defines.VSM_SAMPLES=k.blurSamples,d.needsUpdate=!0,_.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new Ka(r.x,r.y)),d.uniforms.shadow_pass.value=k.map.texture,d.uniforms.resolution.value=k.mapSize,d.uniforms.radius.value=k.radius,o.setRenderTarget(k.mapPass),o.clear(),o.renderBufferDirect(K,null,ee,d,E,null),_.uniforms.shadow_pass.value=k.mapPass.texture,_.uniforms.resolution.value=k.mapSize,_.uniforms.radius.value=k.radius,o.setRenderTarget(k.map),o.clear(),o.renderBufferDirect(K,null,ee,_,E,null)}function I(k,K,ee,_e,Q,ne){let de=null;const Ie=ee.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(Ie!==void 0)de=Ie;else if(de=ee.isPointLight===!0?u:a,o.localClippingEnabled&&K.clipShadows===!0&&Array.isArray(K.clippingPlanes)&&K.clippingPlanes.length!==0||K.displacementMap&&K.displacementScale!==0||K.alphaMap&&K.alphaTest>0||K.map&&K.alphaTest>0){const Pe=de.uuid,Te=K.uuid;let Ee=f[Pe];Ee===void 0&&(Ee={},f[Pe]=Ee);let Se=Ee[Te];Se===void 0&&(Se=de.clone(),Ee[Te]=Se),de=Se}return de.visible=K.visible,de.wireframe=K.wireframe,ne===uc?de.side=K.shadowSide!==null?K.shadowSide:K.side:de.side=K.shadowSide!==null?K.shadowSide:p[K.side],de.alphaMap=K.alphaMap,de.alphaTest=K.alphaTest,de.map=K.map,de.clipShadows=K.clipShadows,de.clippingPlanes=K.clippingPlanes,de.clipIntersection=K.clipIntersection,de.displacementMap=K.displacementMap,de.displacementScale=K.displacementScale,de.displacementBias=K.displacementBias,de.wireframeLinewidth=K.wireframeLinewidth,de.linewidth=K.linewidth,ee.isPointLight===!0&&de.isMeshDistanceMaterial===!0&&(de.referencePosition.setFromMatrixPosition(ee.matrixWorld),de.nearDistance=_e,de.farDistance=Q),de}function R(k,K,ee,_e,Q){if(k.visible===!1)return;if(k.layers.test(K.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&Q===uc)&&(!k.frustumCulled||n.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,k.matrixWorld);const Ie=e.update(k),Pe=k.material;if(Array.isArray(Pe)){const Te=Ie.groups;for(let Ee=0,Se=Te.length;Ee<Se;Ee++){const Oe=Te[Ee],We=Pe[Oe.materialIndex];if(We&&We.visible){const j=I(k,We,_e,ee.near,ee.far,Q);o.renderBufferDirect(ee,null,Ie,j,k,Oe)}}}else if(Pe.visible){const Te=I(k,Pe,_e,ee.near,ee.far,Q);o.renderBufferDirect(ee,null,Ie,Te,k,null)}}const de=k.children;for(let Ie=0,Pe=de.length;Ie<Pe;Ie++)R(de[Ie],K,ee,_e,Q)}}function nx(o,e,t){const n=t.isWebGL2;function r(){let Fe=!1;const rt=new Yi;let Ct=null;const en=new Yi(0,0,0,0);return{setMask:function(En){Ct!==En&&!Fe&&(o.colorMask(En,En,En,En),Ct=En)},setLocked:function(En){Fe=En},setClear:function(En,Jr,ki,Hi,$i){$i===!0&&(En*=Hi,Jr*=Hi,ki*=Hi),rt.set(En,Jr,ki,Hi),en.equals(rt)===!1&&(o.clearColor(En,Jr,ki,Hi),en.copy(rt))},reset:function(){Fe=!1,Ct=null,en.set(-1,0,0,0)}}}function i(){let Fe=!1,rt=null,Ct=null,en=null;return{setTest:function(En){En?Fn(2929):Yt(2929)},setMask:function(En){rt!==En&&!Fe&&(o.depthMask(En),rt=En)},setFunc:function(En){if(Ct!==En){switch(En){case vE:o.depthFunc(512);break;case AE:o.depthFunc(519);break;case bE:o.depthFunc(513);break;case hd:o.depthFunc(515);break;case EE:o.depthFunc(514);break;case TE:o.depthFunc(518);break;case wE:o.depthFunc(516);break;case CE:o.depthFunc(517);break;default:o.depthFunc(515)}Ct=En}},setLocked:function(En){Fe=En},setClear:function(En){en!==En&&(o.clearDepth(En),en=En)},reset:function(){Fe=!1,rt=null,Ct=null,en=null}}}function s(){let Fe=!1,rt=null,Ct=null,en=null,En=null,Jr=null,ki=null,Hi=null,$i=null;return{setTest:function(ci){Fe||(ci?Fn(2960):Yt(2960))},setMask:function(ci){rt!==ci&&!Fe&&(o.stencilMask(ci),rt=ci)},setFunc:function(ci,so,ji){(Ct!==ci||en!==so||En!==ji)&&(o.stencilFunc(ci,so,ji),Ct=ci,en=so,En=ji)},setOp:function(ci,so,ji){(Jr!==ci||ki!==so||Hi!==ji)&&(o.stencilOp(ci,so,ji),Jr=ci,ki=so,Hi=ji)},setLocked:function(ci){Fe=ci},setClear:function(ci){$i!==ci&&(o.clearStencil(ci),$i=ci)},reset:function(){Fe=!1,rt=null,Ct=null,en=null,En=null,Jr=null,ki=null,Hi=null,$i=null}}}const a=new r,u=new i,f=new s,l=new WeakMap,p=new WeakMap;let d={},_={},A=new WeakMap,E=[],v=null,T=!1,I=null,R=null,k=null,K=null,ee=null,_e=null,Q=null,ne=!1,de=null,Ie=null,Pe=null,Te=null,Ee=null;const Se=o.getParameter(35661);let Oe=!1,We=0;const j=o.getParameter(7938);j.indexOf("WebGL")!==-1?(We=parseFloat(/^WebGL (\d)/.exec(j)[1]),Oe=We>=1):j.indexOf("OpenGL ES")!==-1&&(We=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),Oe=We>=2);let _t=null,Qe={};const Je=o.getParameter(3088),ze=o.getParameter(2978),ct=new Yi().fromArray(Je),He=new Yi().fromArray(ze);function P(Fe,rt,Ct){const en=new Uint8Array(4),En=o.createTexture();o.bindTexture(Fe,En),o.texParameteri(Fe,10241,9728),o.texParameteri(Fe,10240,9728);for(let Jr=0;Jr<Ct;Jr++)o.texImage2D(rt+Jr,0,6408,1,1,0,6408,5121,en);return En}const nt={};nt[3553]=P(3553,3553,1),nt[34067]=P(34067,34069,6),a.setClear(0,0,0,1),u.setClear(1),f.setClear(0),Fn(2929),u.setFunc(hd),yi(!1),Li(tm),Fn(2884),Cr(aa);function Fn(Fe){d[Fe]!==!0&&(o.enable(Fe),d[Fe]=!0)}function Yt(Fe){d[Fe]!==!1&&(o.disable(Fe),d[Fe]=!1)}function kn(Fe,rt){return _[Fe]!==rt?(o.bindFramebuffer(Fe,rt),_[Fe]=rt,n&&(Fe===36009&&(_[36160]=rt),Fe===36160&&(_[36009]=rt)),!0):!1}function Et(Fe,rt){let Ct=E,en=!1;if(Fe)if(Ct=A.get(rt),Ct===void 0&&(Ct=[],A.set(rt,Ct)),Fe.isWebGLMultipleRenderTargets){const En=Fe.texture;if(Ct.length!==En.length||Ct[0]!==36064){for(let Jr=0,ki=En.length;Jr<ki;Jr++)Ct[Jr]=36064+Jr;Ct.length=En.length,en=!0}}else Ct[0]!==36064&&(Ct[0]=36064,en=!0);else Ct[0]!==1029&&(Ct[0]=1029,en=!0);en&&(t.isWebGL2?o.drawBuffers(Ct):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ct))}function dn(Fe){return v!==Fe?(o.useProgram(Fe),v=Fe,!0):!1}const $t={[vu]:32774,[uE]:32778,[cE]:32779};if(n)$t[om]=32775,$t[sm]=32776;else{const Fe=e.get("EXT_blend_minmax");Fe!==null&&($t[om]=Fe.MIN_EXT,$t[sm]=Fe.MAX_EXT)}const vn={[lE]:0,[fE]:1,[dE]:768,[Rg]:770,[yE]:776,[_E]:774,[pE]:772,[hE]:769,[Ig]:771,[gE]:775,[mE]:773};function Cr(Fe,rt,Ct,en,En,Jr,ki,Hi){if(Fe===aa){T===!0&&(Yt(3042),T=!1);return}if(T===!1&&(Fn(3042),T=!0),Fe!==aE){if(Fe!==I||Hi!==ne){if((R!==vu||ee!==vu)&&(o.blendEquation(32774),R=vu,ee=vu),Hi)switch(Fe){case wu:o.blendFuncSeparate(1,771,1,771);break;case nm:o.blendFunc(1,1);break;case rm:o.blendFuncSeparate(0,769,0,1);break;case im:o.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}else switch(Fe){case wu:o.blendFuncSeparate(770,771,1,771);break;case nm:o.blendFunc(770,1);break;case rm:o.blendFuncSeparate(0,769,0,1);break;case im:o.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}k=null,K=null,_e=null,Q=null,I=Fe,ne=Hi}return}En=En||rt,Jr=Jr||Ct,ki=ki||en,(rt!==R||En!==ee)&&(o.blendEquationSeparate($t[rt],$t[En]),R=rt,ee=En),(Ct!==k||en!==K||Jr!==_e||ki!==Q)&&(o.blendFuncSeparate(vn[Ct],vn[en],vn[Jr],vn[ki]),k=Ct,K=en,_e=Jr,Q=ki),I=Fe,ne=!1}function Qr(Fe,rt){Fe.side===nf?Yt(2884):Fn(2884);let Ct=Fe.side===cs;rt&&(Ct=!Ct),yi(Ct),Fe.blending===wu&&Fe.transparent===!1?Cr(aa):Cr(Fe.blending,Fe.blendEquation,Fe.blendSrc,Fe.blendDst,Fe.blendEquationAlpha,Fe.blendSrcAlpha,Fe.blendDstAlpha,Fe.premultipliedAlpha),u.setFunc(Fe.depthFunc),u.setTest(Fe.depthTest),u.setMask(Fe.depthWrite),a.setMask(Fe.colorWrite);const en=Fe.stencilWrite;f.setTest(en),en&&(f.setMask(Fe.stencilWriteMask),f.setFunc(Fe.stencilFunc,Fe.stencilRef,Fe.stencilFuncMask),f.setOp(Fe.stencilFail,Fe.stencilZFail,Fe.stencilZPass)),Mn(Fe.polygonOffset,Fe.polygonOffsetFactor,Fe.polygonOffsetUnits),Fe.alphaToCoverage===!0?Fn(32926):Yt(32926)}function yi(Fe){de!==Fe&&(Fe?o.frontFace(2304):o.frontFace(2305),de=Fe)}function Li(Fe){Fe!==iE?(Fn(2884),Fe!==Ie&&(Fe===tm?o.cullFace(1029):Fe===oE?o.cullFace(1028):o.cullFace(1032))):Yt(2884),Ie=Fe}function Sr(Fe){Fe!==Pe&&(Oe&&o.lineWidth(Fe),Pe=Fe)}function Mn(Fe,rt,Ct){Fe?(Fn(32823),(Te!==rt||Ee!==Ct)&&(o.polygonOffset(rt,Ct),Te=rt,Ee=Ct)):Yt(32823)}function vi(Fe){Fe?Fn(3089):Yt(3089)}function ar(Fe){Fe===void 0&&(Fe=33984+Se-1),_t!==Fe&&(o.activeTexture(Fe),_t=Fe)}function Ae(Fe,rt,Ct){Ct===void 0&&(_t===null?Ct=33984+Se-1:Ct=_t);let en=Qe[Ct];en===void 0&&(en={type:void 0,texture:void 0},Qe[Ct]=en),(en.type!==Fe||en.texture!==rt)&&(_t!==Ct&&(o.activeTexture(Ct),_t=Ct),o.bindTexture(Fe,rt||nt[Fe]),en.type=Fe,en.texture=rt)}function fe(){const Fe=Qe[_t];Fe!==void 0&&Fe.type!==void 0&&(o.bindTexture(Fe.type,null),Fe.type=void 0,Fe.texture=void 0)}function ot(){try{o.compressedTexImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function St(){try{o.compressedTexImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Dt(){try{o.texSubImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Nt(){try{o.texSubImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function _n(){try{o.compressedTexSubImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ce(){try{o.compressedTexSubImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ne(){try{o.texStorage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Jt(){try{o.texStorage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Zt(){try{o.texImage2D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Bt(){try{o.texImage3D.apply(o,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function zt(Fe){ct.equals(Fe)===!1&&(o.scissor(Fe.x,Fe.y,Fe.z,Fe.w),ct.copy(Fe))}function Qt(Fe){He.equals(Fe)===!1&&(o.viewport(Fe.x,Fe.y,Fe.z,Fe.w),He.copy(Fe))}function rr(Fe,rt){let Ct=p.get(rt);Ct===void 0&&(Ct=new WeakMap,p.set(rt,Ct));let en=Ct.get(Fe);en===void 0&&(en=o.getUniformBlockIndex(rt,Fe.name),Ct.set(Fe,en))}function Cn(Fe,rt){const en=p.get(rt).get(Fe);l.get(rt)!==en&&(o.uniformBlockBinding(rt,en,Fe.__bindingPointIndex),l.set(rt,en))}function Kr(){o.disable(3042),o.disable(2884),o.disable(2929),o.disable(32823),o.disable(3089),o.disable(2960),o.disable(32926),o.blendEquation(32774),o.blendFunc(1,0),o.blendFuncSeparate(1,0,1,0),o.colorMask(!0,!0,!0,!0),o.clearColor(0,0,0,0),o.depthMask(!0),o.depthFunc(513),o.clearDepth(1),o.stencilMask(4294967295),o.stencilFunc(519,0,4294967295),o.stencilOp(7680,7680,7680),o.clearStencil(0),o.cullFace(1029),o.frontFace(2305),o.polygonOffset(0,0),o.activeTexture(33984),o.bindFramebuffer(36160,null),n===!0&&(o.bindFramebuffer(36009,null),o.bindFramebuffer(36008,null)),o.useProgram(null),o.lineWidth(1),o.scissor(0,0,o.canvas.width,o.canvas.height),o.viewport(0,0,o.canvas.width,o.canvas.height),d={},_t=null,Qe={},_={},A=new WeakMap,E=[],v=null,T=!1,I=null,R=null,k=null,K=null,ee=null,_e=null,Q=null,ne=!1,de=null,Ie=null,Pe=null,Te=null,Ee=null,ct.set(0,0,o.canvas.width,o.canvas.height),He.set(0,0,o.canvas.width,o.canvas.height),a.reset(),u.reset(),f.reset()}return{buffers:{color:a,depth:u,stencil:f},enable:Fn,disable:Yt,bindFramebuffer:kn,drawBuffers:Et,useProgram:dn,setBlending:Cr,setMaterial:Qr,setFlipSided:yi,setCullFace:Li,setLineWidth:Sr,setPolygonOffset:Mn,setScissorTest:vi,activeTexture:ar,bindTexture:Ae,unbindTexture:fe,compressedTexImage2D:ot,compressedTexImage3D:St,texImage2D:Zt,texImage3D:Bt,updateUBOMapping:rr,uniformBlockBinding:Cn,texStorage2D:Ne,texStorage3D:Jt,texSubImage2D:Dt,texSubImage3D:Nt,compressedTexSubImage2D:_n,compressedTexSubImage3D:Ce,scissor:zt,viewport:Qt,reset:Kr}}function rx(o,e,t,n,r,i,s){const a=r.isWebGL2,u=r.maxTextures,f=r.maxCubemapSize,l=r.maxTextureSize,p=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,_=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),A=new WeakMap;let E;const v=new WeakMap;let T=!1;try{T=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function I(Ae,fe){return T?new OffscreenCanvas(Ae,fe):Sc("canvas")}function R(Ae,fe,ot,St){let Dt=1;if((Ae.width>St||Ae.height>St)&&(Dt=St/Math.max(Ae.width,Ae.height)),Dt<1||fe===!0)if(typeof HTMLImageElement<"u"&&Ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ae instanceof ImageBitmap){const Nt=fe?Ol:Math.floor,_n=Nt(Dt*Ae.width),Ce=Nt(Dt*Ae.height);E===void 0&&(E=I(_n,Ce));const Ne=ot?I(_n,Ce):E;return Ne.width=_n,Ne.height=Ce,Ne.getContext("2d").drawImage(Ae,0,0,_n,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+_n+"x"+Ce+")."),Ne}else return"data"in Ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),Ae;return Ae}function k(Ae){return vd(Ae.width)&&vd(Ae.height)}function K(Ae){return a?!1:Ae.wrapS!==is||Ae.wrapT!==is||Ae.minFilter!==To&&Ae.minFilter!==qo}function ee(Ae,fe){return Ae.generateMipmaps&&fe&&Ae.minFilter!==To&&Ae.minFilter!==qo}function _e(Ae){o.generateMipmap(Ae)}function Q(Ae,fe,ot,St,Dt=!1){if(a===!1)return fe;if(Ae!==null){if(o[Ae]!==void 0)return o[Ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ae+"'")}let Nt=fe;return fe===6403&&(ot===5126&&(Nt=33326),ot===5131&&(Nt=33325),ot===5121&&(Nt=33321)),fe===33319&&(ot===5126&&(Nt=33328),ot===5131&&(Nt=33327),ot===5121&&(Nt=33323)),fe===6408&&(ot===5126&&(Nt=34836),ot===5131&&(Nt=34842),ot===5121&&(Nt=St===Vi&&Dt===!1?35907:32856),ot===32819&&(Nt=32854),ot===32820&&(Nt=32855)),(Nt===33325||Nt===33326||Nt===33327||Nt===33328||Nt===34842||Nt===34836)&&e.get("EXT_color_buffer_float"),Nt}function ne(Ae,fe,ot){return ee(Ae,ot)===!0||Ae.isFramebufferTexture&&Ae.minFilter!==To&&Ae.minFilter!==qo?Math.log2(Math.max(fe.width,fe.height))+1:Ae.mipmaps!==void 0&&Ae.mipmaps.length>0?Ae.mipmaps.length:Ae.isCompressedTexture&&Array.isArray(Ae.image)?fe.mipmaps.length:1}function de(Ae){return Ae===To||Ae===_d||Ae===Cl?9728:9729}function Ie(Ae){const fe=Ae.target;fe.removeEventListener("dispose",Ie),Te(fe),fe.isVideoTexture&&A.delete(fe)}function Pe(Ae){const fe=Ae.target;fe.removeEventListener("dispose",Pe),Se(fe)}function Te(Ae){const fe=n.get(Ae);if(fe.__webglInit===void 0)return;const ot=Ae.source,St=v.get(ot);if(St){const Dt=St[fe.__cacheKey];Dt.usedTimes--,Dt.usedTimes===0&&Ee(Ae),Object.keys(St).length===0&&v.delete(ot)}n.remove(Ae)}function Ee(Ae){const fe=n.get(Ae);o.deleteTexture(fe.__webglTexture);const ot=Ae.source,St=v.get(ot);delete St[fe.__cacheKey],s.memory.textures--}function Se(Ae){const fe=Ae.texture,ot=n.get(Ae),St=n.get(fe);if(St.__webglTexture!==void 0&&(o.deleteTexture(St.__webglTexture),s.memory.textures--),Ae.depthTexture&&Ae.depthTexture.dispose(),Ae.isWebGLCubeRenderTarget)for(let Dt=0;Dt<6;Dt++)o.deleteFramebuffer(ot.__webglFramebuffer[Dt]),ot.__webglDepthbuffer&&o.deleteRenderbuffer(ot.__webglDepthbuffer[Dt]);else{if(o.deleteFramebuffer(ot.__webglFramebuffer),ot.__webglDepthbuffer&&o.deleteRenderbuffer(ot.__webglDepthbuffer),ot.__webglMultisampledFramebuffer&&o.deleteFramebuffer(ot.__webglMultisampledFramebuffer),ot.__webglColorRenderbuffer)for(let Dt=0;Dt<ot.__webglColorRenderbuffer.length;Dt++)ot.__webglColorRenderbuffer[Dt]&&o.deleteRenderbuffer(ot.__webglColorRenderbuffer[Dt]);ot.__webglDepthRenderbuffer&&o.deleteRenderbuffer(ot.__webglDepthRenderbuffer)}if(Ae.isWebGLMultipleRenderTargets)for(let Dt=0,Nt=fe.length;Dt<Nt;Dt++){const _n=n.get(fe[Dt]);_n.__webglTexture&&(o.deleteTexture(_n.__webglTexture),s.memory.textures--),n.remove(fe[Dt])}n.remove(fe),n.remove(Ae)}let Oe=0;function We(){Oe=0}function j(){const Ae=Oe;return Ae>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Ae+" texture units while this GPU supports only "+u),Oe+=1,Ae}function _t(Ae){const fe=[];return fe.push(Ae.wrapS),fe.push(Ae.wrapT),fe.push(Ae.wrapR||0),fe.push(Ae.magFilter),fe.push(Ae.minFilter),fe.push(Ae.anisotropy),fe.push(Ae.internalFormat),fe.push(Ae.format),fe.push(Ae.type),fe.push(Ae.generateMipmaps),fe.push(Ae.premultiplyAlpha),fe.push(Ae.flipY),fe.push(Ae.unpackAlignment),fe.push(Ae.encoding),fe.join()}function Qe(Ae,fe){const ot=n.get(Ae);if(Ae.isVideoTexture&&vi(Ae),Ae.isRenderTargetTexture===!1&&Ae.version>0&&ot.__version!==Ae.version){const St=Ae.image;if(St===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(St.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Yt(ot,Ae,fe);return}}t.bindTexture(3553,ot.__webglTexture,33984+fe)}function Je(Ae,fe){const ot=n.get(Ae);if(Ae.version>0&&ot.__version!==Ae.version){Yt(ot,Ae,fe);return}t.bindTexture(35866,ot.__webglTexture,33984+fe)}function ze(Ae,fe){const ot=n.get(Ae);if(Ae.version>0&&ot.__version!==Ae.version){Yt(ot,Ae,fe);return}t.bindTexture(32879,ot.__webglTexture,33984+fe)}function ct(Ae,fe){const ot=n.get(Ae);if(Ae.version>0&&ot.__version!==Ae.version){kn(ot,Ae,fe);return}t.bindTexture(34067,ot.__webglTexture,33984+fe)}const He={[Ru]:10497,[is]:33071,[Ll]:33648},P={[To]:9728,[_d]:9984,[Cl]:9986,[qo]:9729,[Lg]:9985,[Va]:9987};function nt(Ae,fe,ot){if(ot?(o.texParameteri(Ae,10242,He[fe.wrapS]),o.texParameteri(Ae,10243,He[fe.wrapT]),(Ae===32879||Ae===35866)&&o.texParameteri(Ae,32882,He[fe.wrapR]),o.texParameteri(Ae,10240,P[fe.magFilter]),o.texParameteri(Ae,10241,P[fe.minFilter])):(o.texParameteri(Ae,10242,33071),o.texParameteri(Ae,10243,33071),(Ae===32879||Ae===35866)&&o.texParameteri(Ae,32882,33071),(fe.wrapS!==is||fe.wrapT!==is)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),o.texParameteri(Ae,10240,de(fe.magFilter)),o.texParameteri(Ae,10241,de(fe.minFilter)),fe.minFilter!==To&&fe.minFilter!==qo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const St=e.get("EXT_texture_filter_anisotropic");if(fe.magFilter===To||fe.minFilter!==Cl&&fe.minFilter!==Va||fe.type===oa&&e.has("OES_texture_float_linear")===!1||a===!1&&fe.type===Ec&&e.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||n.get(fe).__currentAnisotropy)&&(o.texParameterf(Ae,St.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,r.getMaxAnisotropy())),n.get(fe).__currentAnisotropy=fe.anisotropy)}}function Fn(Ae,fe){let ot=!1;Ae.__webglInit===void 0&&(Ae.__webglInit=!0,fe.addEventListener("dispose",Ie));const St=fe.source;let Dt=v.get(St);Dt===void 0&&(Dt={},v.set(St,Dt));const Nt=_t(fe);if(Nt!==Ae.__cacheKey){Dt[Nt]===void 0&&(Dt[Nt]={texture:o.createTexture(),usedTimes:0},s.memory.textures++,ot=!0),Dt[Nt].usedTimes++;const _n=Dt[Ae.__cacheKey];_n!==void 0&&(Dt[Ae.__cacheKey].usedTimes--,_n.usedTimes===0&&Ee(fe)),Ae.__cacheKey=Nt,Ae.__webglTexture=Dt[Nt].texture}return ot}function Yt(Ae,fe,ot){let St=3553;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(St=35866),fe.isData3DTexture&&(St=32879);const Dt=Fn(Ae,fe),Nt=fe.source;t.bindTexture(St,Ae.__webglTexture,33984+ot);const _n=n.get(Nt);if(Nt.version!==_n.__version||Dt===!0){t.activeTexture(33984+ot),o.pixelStorei(37440,fe.flipY),o.pixelStorei(37441,fe.premultiplyAlpha),o.pixelStorei(3317,fe.unpackAlignment),o.pixelStorei(37443,0);const Ce=K(fe)&&k(fe.image)===!1;let Ne=R(fe.image,Ce,!1,l);Ne=ar(fe,Ne);const Jt=k(Ne)||a,Zt=i.convert(fe.format,fe.encoding);let Bt=i.convert(fe.type),zt=Q(fe.internalFormat,Zt,Bt,fe.encoding,fe.isVideoTexture);nt(St,fe,Jt);let Qt;const rr=fe.mipmaps,Cn=a&&fe.isVideoTexture!==!0,Kr=_n.__version===void 0||Dt===!0,Fe=ne(fe,Ne,Jt);if(fe.isDepthTexture)zt=6402,a?fe.type===oa?zt=36012:fe.type===Ra?zt=33190:fe.type===Cu?zt=35056:zt=33189:fe.type===oa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===Oa&&zt===6402&&fe.type!==Og&&fe.type!==Ra&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=Ra,Bt=i.convert(fe.type)),fe.format===Iu&&zt===6402&&(zt=34041,fe.type!==Cu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=Cu,Bt=i.convert(fe.type))),Kr&&(Cn?t.texStorage2D(3553,1,zt,Ne.width,Ne.height):t.texImage2D(3553,0,zt,Ne.width,Ne.height,0,Zt,Bt,null));else if(fe.isDataTexture)if(rr.length>0&&Jt){Cn&&Kr&&t.texStorage2D(3553,Fe,zt,rr[0].width,rr[0].height);for(let rt=0,Ct=rr.length;rt<Ct;rt++)Qt=rr[rt],Cn?t.texSubImage2D(3553,rt,0,0,Qt.width,Qt.height,Zt,Bt,Qt.data):t.texImage2D(3553,rt,zt,Qt.width,Qt.height,0,Zt,Bt,Qt.data);fe.generateMipmaps=!1}else Cn?(Kr&&t.texStorage2D(3553,Fe,zt,Ne.width,Ne.height),t.texSubImage2D(3553,0,0,0,Ne.width,Ne.height,Zt,Bt,Ne.data)):t.texImage2D(3553,0,zt,Ne.width,Ne.height,0,Zt,Bt,Ne.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){Cn&&Kr&&t.texStorage3D(35866,Fe,zt,rr[0].width,rr[0].height,Ne.depth);for(let rt=0,Ct=rr.length;rt<Ct;rt++)Qt=rr[rt],fe.format!==os?Zt!==null?Cn?t.compressedTexSubImage3D(35866,rt,0,0,0,Qt.width,Qt.height,Ne.depth,Zt,Qt.data,0,0):t.compressedTexImage3D(35866,rt,zt,Qt.width,Qt.height,Ne.depth,0,Qt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cn?t.texSubImage3D(35866,rt,0,0,0,Qt.width,Qt.height,Ne.depth,Zt,Bt,Qt.data):t.texImage3D(35866,rt,zt,Qt.width,Qt.height,Ne.depth,0,Zt,Bt,Qt.data)}else{Cn&&Kr&&t.texStorage2D(3553,Fe,zt,rr[0].width,rr[0].height);for(let rt=0,Ct=rr.length;rt<Ct;rt++)Qt=rr[rt],fe.format!==os?Zt!==null?Cn?t.compressedTexSubImage2D(3553,rt,0,0,Qt.width,Qt.height,Zt,Qt.data):t.compressedTexImage2D(3553,rt,zt,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cn?t.texSubImage2D(3553,rt,0,0,Qt.width,Qt.height,Zt,Bt,Qt.data):t.texImage2D(3553,rt,zt,Qt.width,Qt.height,0,Zt,Bt,Qt.data)}else if(fe.isDataArrayTexture)Cn?(Kr&&t.texStorage3D(35866,Fe,zt,Ne.width,Ne.height,Ne.depth),t.texSubImage3D(35866,0,0,0,0,Ne.width,Ne.height,Ne.depth,Zt,Bt,Ne.data)):t.texImage3D(35866,0,zt,Ne.width,Ne.height,Ne.depth,0,Zt,Bt,Ne.data);else if(fe.isData3DTexture)Cn?(Kr&&t.texStorage3D(32879,Fe,zt,Ne.width,Ne.height,Ne.depth),t.texSubImage3D(32879,0,0,0,0,Ne.width,Ne.height,Ne.depth,Zt,Bt,Ne.data)):t.texImage3D(32879,0,zt,Ne.width,Ne.height,Ne.depth,0,Zt,Bt,Ne.data);else if(fe.isFramebufferTexture){if(Kr)if(Cn)t.texStorage2D(3553,Fe,zt,Ne.width,Ne.height);else{let rt=Ne.width,Ct=Ne.height;for(let en=0;en<Fe;en++)t.texImage2D(3553,en,zt,rt,Ct,0,Zt,Bt,null),rt>>=1,Ct>>=1}}else if(rr.length>0&&Jt){Cn&&Kr&&t.texStorage2D(3553,Fe,zt,rr[0].width,rr[0].height);for(let rt=0,Ct=rr.length;rt<Ct;rt++)Qt=rr[rt],Cn?t.texSubImage2D(3553,rt,0,0,Zt,Bt,Qt):t.texImage2D(3553,rt,zt,Zt,Bt,Qt);fe.generateMipmaps=!1}else Cn?(Kr&&t.texStorage2D(3553,Fe,zt,Ne.width,Ne.height),t.texSubImage2D(3553,0,0,0,Zt,Bt,Ne)):t.texImage2D(3553,0,zt,Zt,Bt,Ne);ee(fe,Jt)&&_e(St),_n.__version=Nt.version,fe.onUpdate&&fe.onUpdate(fe)}Ae.__version=fe.version}function kn(Ae,fe,ot){if(fe.image.length!==6)return;const St=Fn(Ae,fe),Dt=fe.source;t.bindTexture(34067,Ae.__webglTexture,33984+ot);const Nt=n.get(Dt);if(Dt.version!==Nt.__version||St===!0){t.activeTexture(33984+ot),o.pixelStorei(37440,fe.flipY),o.pixelStorei(37441,fe.premultiplyAlpha),o.pixelStorei(3317,fe.unpackAlignment),o.pixelStorei(37443,0);const _n=fe.isCompressedTexture||fe.image[0].isCompressedTexture,Ce=fe.image[0]&&fe.image[0].isDataTexture,Ne=[];for(let rt=0;rt<6;rt++)!_n&&!Ce?Ne[rt]=R(fe.image[rt],!1,!0,f):Ne[rt]=Ce?fe.image[rt].image:fe.image[rt],Ne[rt]=ar(fe,Ne[rt]);const Jt=Ne[0],Zt=k(Jt)||a,Bt=i.convert(fe.format,fe.encoding),zt=i.convert(fe.type),Qt=Q(fe.internalFormat,Bt,zt,fe.encoding),rr=a&&fe.isVideoTexture!==!0,Cn=Nt.__version===void 0||St===!0;let Kr=ne(fe,Jt,Zt);nt(34067,fe,Zt);let Fe;if(_n){rr&&Cn&&t.texStorage2D(34067,Kr,Qt,Jt.width,Jt.height);for(let rt=0;rt<6;rt++){Fe=Ne[rt].mipmaps;for(let Ct=0;Ct<Fe.length;Ct++){const en=Fe[Ct];fe.format!==os?Bt!==null?rr?t.compressedTexSubImage2D(34069+rt,Ct,0,0,en.width,en.height,Bt,en.data):t.compressedTexImage2D(34069+rt,Ct,Qt,en.width,en.height,0,en.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rr?t.texSubImage2D(34069+rt,Ct,0,0,en.width,en.height,Bt,zt,en.data):t.texImage2D(34069+rt,Ct,Qt,en.width,en.height,0,Bt,zt,en.data)}}}else{Fe=fe.mipmaps,rr&&Cn&&(Fe.length>0&&Kr++,t.texStorage2D(34067,Kr,Qt,Ne[0].width,Ne[0].height));for(let rt=0;rt<6;rt++)if(Ce){rr?t.texSubImage2D(34069+rt,0,0,0,Ne[rt].width,Ne[rt].height,Bt,zt,Ne[rt].data):t.texImage2D(34069+rt,0,Qt,Ne[rt].width,Ne[rt].height,0,Bt,zt,Ne[rt].data);for(let Ct=0;Ct<Fe.length;Ct++){const En=Fe[Ct].image[rt].image;rr?t.texSubImage2D(34069+rt,Ct+1,0,0,En.width,En.height,Bt,zt,En.data):t.texImage2D(34069+rt,Ct+1,Qt,En.width,En.height,0,Bt,zt,En.data)}}else{rr?t.texSubImage2D(34069+rt,0,0,0,Bt,zt,Ne[rt]):t.texImage2D(34069+rt,0,Qt,Bt,zt,Ne[rt]);for(let Ct=0;Ct<Fe.length;Ct++){const en=Fe[Ct];rr?t.texSubImage2D(34069+rt,Ct+1,0,0,Bt,zt,en.image[rt]):t.texImage2D(34069+rt,Ct+1,Qt,Bt,zt,en.image[rt])}}}ee(fe,Zt)&&_e(34067),Nt.__version=Dt.version,fe.onUpdate&&fe.onUpdate(fe)}Ae.__version=fe.version}function Et(Ae,fe,ot,St,Dt){const Nt=i.convert(ot.format,ot.encoding),_n=i.convert(ot.type),Ce=Q(ot.internalFormat,Nt,_n,ot.encoding);n.get(fe).__hasExternalTextures||(Dt===32879||Dt===35866?t.texImage3D(Dt,0,Ce,fe.width,fe.height,fe.depth,0,Nt,_n,null):t.texImage2D(Dt,0,Ce,fe.width,fe.height,0,Nt,_n,null)),t.bindFramebuffer(36160,Ae),Mn(fe)?d.framebufferTexture2DMultisampleEXT(36160,St,Dt,n.get(ot).__webglTexture,0,Sr(fe)):(Dt===3553||Dt>=34069&&Dt<=34074)&&o.framebufferTexture2D(36160,St,Dt,n.get(ot).__webglTexture,0),t.bindFramebuffer(36160,null)}function dn(Ae,fe,ot){if(o.bindRenderbuffer(36161,Ae),fe.depthBuffer&&!fe.stencilBuffer){let St=33189;if(ot||Mn(fe)){const Dt=fe.depthTexture;Dt&&Dt.isDepthTexture&&(Dt.type===oa?St=36012:Dt.type===Ra&&(St=33190));const Nt=Sr(fe);Mn(fe)?d.renderbufferStorageMultisampleEXT(36161,Nt,St,fe.width,fe.height):o.renderbufferStorageMultisample(36161,Nt,St,fe.width,fe.height)}else o.renderbufferStorage(36161,St,fe.width,fe.height);o.framebufferRenderbuffer(36160,36096,36161,Ae)}else if(fe.depthBuffer&&fe.stencilBuffer){const St=Sr(fe);ot&&Mn(fe)===!1?o.renderbufferStorageMultisample(36161,St,35056,fe.width,fe.height):Mn(fe)?d.renderbufferStorageMultisampleEXT(36161,St,35056,fe.width,fe.height):o.renderbufferStorage(36161,34041,fe.width,fe.height),o.framebufferRenderbuffer(36160,33306,36161,Ae)}else{const St=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Dt=0;Dt<St.length;Dt++){const Nt=St[Dt],_n=i.convert(Nt.format,Nt.encoding),Ce=i.convert(Nt.type),Ne=Q(Nt.internalFormat,_n,Ce,Nt.encoding),Jt=Sr(fe);ot&&Mn(fe)===!1?o.renderbufferStorageMultisample(36161,Jt,Ne,fe.width,fe.height):Mn(fe)?d.renderbufferStorageMultisampleEXT(36161,Jt,Ne,fe.width,fe.height):o.renderbufferStorage(36161,Ne,fe.width,fe.height)}}o.bindRenderbuffer(36161,null)}function $t(Ae,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Ae),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),Qe(fe.depthTexture,0);const St=n.get(fe.depthTexture).__webglTexture,Dt=Sr(fe);if(fe.depthTexture.format===Oa)Mn(fe)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,St,0,Dt):o.framebufferTexture2D(36160,36096,3553,St,0);else if(fe.depthTexture.format===Iu)Mn(fe)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,St,0,Dt):o.framebufferTexture2D(36160,33306,3553,St,0);else throw new Error("Unknown depthTexture format")}function vn(Ae){const fe=n.get(Ae),ot=Ae.isWebGLCubeRenderTarget===!0;if(Ae.depthTexture&&!fe.__autoAllocateDepthBuffer){if(ot)throw new Error("target.depthTexture not supported in Cube render targets");$t(fe.__webglFramebuffer,Ae)}else if(ot){fe.__webglDepthbuffer=[];for(let St=0;St<6;St++)t.bindFramebuffer(36160,fe.__webglFramebuffer[St]),fe.__webglDepthbuffer[St]=o.createRenderbuffer(),dn(fe.__webglDepthbuffer[St],Ae,!1)}else t.bindFramebuffer(36160,fe.__webglFramebuffer),fe.__webglDepthbuffer=o.createRenderbuffer(),dn(fe.__webglDepthbuffer,Ae,!1);t.bindFramebuffer(36160,null)}function Cr(Ae,fe,ot){const St=n.get(Ae);fe!==void 0&&Et(St.__webglFramebuffer,Ae,Ae.texture,36064,3553),ot!==void 0&&vn(Ae)}function Qr(Ae){const fe=Ae.texture,ot=n.get(Ae),St=n.get(fe);Ae.addEventListener("dispose",Pe),Ae.isWebGLMultipleRenderTargets!==!0&&(St.__webglTexture===void 0&&(St.__webglTexture=o.createTexture()),St.__version=fe.version,s.memory.textures++);const Dt=Ae.isWebGLCubeRenderTarget===!0,Nt=Ae.isWebGLMultipleRenderTargets===!0,_n=k(Ae)||a;if(Dt){ot.__webglFramebuffer=[];for(let Ce=0;Ce<6;Ce++)ot.__webglFramebuffer[Ce]=o.createFramebuffer()}else{if(ot.__webglFramebuffer=o.createFramebuffer(),Nt)if(r.drawBuffers){const Ce=Ae.texture;for(let Ne=0,Jt=Ce.length;Ne<Jt;Ne++){const Zt=n.get(Ce[Ne]);Zt.__webglTexture===void 0&&(Zt.__webglTexture=o.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Ae.samples>0&&Mn(Ae)===!1){const Ce=Nt?fe:[fe];ot.__webglMultisampledFramebuffer=o.createFramebuffer(),ot.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ot.__webglMultisampledFramebuffer);for(let Ne=0;Ne<Ce.length;Ne++){const Jt=Ce[Ne];ot.__webglColorRenderbuffer[Ne]=o.createRenderbuffer(),o.bindRenderbuffer(36161,ot.__webglColorRenderbuffer[Ne]);const Zt=i.convert(Jt.format,Jt.encoding),Bt=i.convert(Jt.type),zt=Q(Jt.internalFormat,Zt,Bt,Jt.encoding,Ae.isXRRenderTarget===!0),Qt=Sr(Ae);o.renderbufferStorageMultisample(36161,Qt,zt,Ae.width,Ae.height),o.framebufferRenderbuffer(36160,36064+Ne,36161,ot.__webglColorRenderbuffer[Ne])}o.bindRenderbuffer(36161,null),Ae.depthBuffer&&(ot.__webglDepthRenderbuffer=o.createRenderbuffer(),dn(ot.__webglDepthRenderbuffer,Ae,!0)),t.bindFramebuffer(36160,null)}}if(Dt){t.bindTexture(34067,St.__webglTexture),nt(34067,fe,_n);for(let Ce=0;Ce<6;Ce++)Et(ot.__webglFramebuffer[Ce],Ae,fe,36064,34069+Ce);ee(fe,_n)&&_e(34067),t.unbindTexture()}else if(Nt){const Ce=Ae.texture;for(let Ne=0,Jt=Ce.length;Ne<Jt;Ne++){const Zt=Ce[Ne],Bt=n.get(Zt);t.bindTexture(3553,Bt.__webglTexture),nt(3553,Zt,_n),Et(ot.__webglFramebuffer,Ae,Zt,36064+Ne,3553),ee(Zt,_n)&&_e(3553)}t.unbindTexture()}else{let Ce=3553;(Ae.isWebGL3DRenderTarget||Ae.isWebGLArrayRenderTarget)&&(a?Ce=Ae.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ce,St.__webglTexture),nt(Ce,fe,_n),Et(ot.__webglFramebuffer,Ae,fe,36064,Ce),ee(fe,_n)&&_e(Ce),t.unbindTexture()}Ae.depthBuffer&&vn(Ae)}function yi(Ae){const fe=k(Ae)||a,ot=Ae.isWebGLMultipleRenderTargets===!0?Ae.texture:[Ae.texture];for(let St=0,Dt=ot.length;St<Dt;St++){const Nt=ot[St];if(ee(Nt,fe)){const _n=Ae.isWebGLCubeRenderTarget?34067:3553,Ce=n.get(Nt).__webglTexture;t.bindTexture(_n,Ce),_e(_n),t.unbindTexture()}}}function Li(Ae){if(a&&Ae.samples>0&&Mn(Ae)===!1){const fe=Ae.isWebGLMultipleRenderTargets?Ae.texture:[Ae.texture],ot=Ae.width,St=Ae.height;let Dt=16384;const Nt=[],_n=Ae.stencilBuffer?33306:36096,Ce=n.get(Ae),Ne=Ae.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Jt=0;Jt<fe.length;Jt++)t.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064+Jt,36161,null),t.bindFramebuffer(36160,Ce.__webglFramebuffer),o.framebufferTexture2D(36009,36064+Jt,3553,null,0);t.bindFramebuffer(36008,Ce.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ce.__webglFramebuffer);for(let Jt=0;Jt<fe.length;Jt++){Nt.push(36064+Jt),Ae.depthBuffer&&Nt.push(_n);const Zt=Ce.__ignoreDepthValues!==void 0?Ce.__ignoreDepthValues:!1;if(Zt===!1&&(Ae.depthBuffer&&(Dt|=256),Ae.stencilBuffer&&(Dt|=1024)),Ne&&o.framebufferRenderbuffer(36008,36064,36161,Ce.__webglColorRenderbuffer[Jt]),Zt===!0&&(o.invalidateFramebuffer(36008,[_n]),o.invalidateFramebuffer(36009,[_n])),Ne){const Bt=n.get(fe[Jt]).__webglTexture;o.framebufferTexture2D(36009,36064,3553,Bt,0)}o.blitFramebuffer(0,0,ot,St,0,0,ot,St,Dt,9728),_&&o.invalidateFramebuffer(36008,Nt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ne)for(let Jt=0;Jt<fe.length;Jt++){t.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer),o.framebufferRenderbuffer(36160,36064+Jt,36161,Ce.__webglColorRenderbuffer[Jt]);const Zt=n.get(fe[Jt]).__webglTexture;t.bindFramebuffer(36160,Ce.__webglFramebuffer),o.framebufferTexture2D(36009,36064+Jt,3553,Zt,0)}t.bindFramebuffer(36009,Ce.__webglMultisampledFramebuffer)}}function Sr(Ae){return Math.min(p,Ae.samples)}function Mn(Ae){const fe=n.get(Ae);return a&&Ae.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function vi(Ae){const fe=s.render.frame;A.get(Ae)!==fe&&(A.set(Ae,fe),Ae.update())}function ar(Ae,fe){const ot=Ae.encoding,St=Ae.format,Dt=Ae.type;return Ae.isCompressedTexture===!0||Ae.isVideoTexture===!0||Ae.format===yd||ot!==za&&(ot===Vi?a===!1?e.has("EXT_sRGB")===!0&&St===os?(Ae.format=yd,Ae.minFilter=qo,Ae.generateMipmaps=!1):fe=Wg.sRGBToLinear(fe):(St!==os||Dt!==ja)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ot)),fe}this.allocateTextureUnit=j,this.resetTextureUnits=We,this.setTexture2D=Qe,this.setTexture2DArray=Je,this.setTexture3D=ze,this.setTextureCube=ct,this.rebindTextures=Cr,this.setupRenderTarget=Qr,this.updateRenderTargetMipmap=yi,this.updateMultisampleRenderTarget=Li,this.setupDepthRenderbuffer=vn,this.setupFrameBufferTexture=Et,this.useMultisampledRTT=Mn}function ix(o,e,t){const n=t.isWebGL2;function r(i,s=null){let a;if(i===ja)return 5121;if(i===OE)return 32819;if(i===NE)return 32820;if(i===PE)return 5120;if(i===FE)return 5122;if(i===Og)return 5123;if(i===LE)return 5124;if(i===Ra)return 5125;if(i===oa)return 5126;if(i===Ec)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(i===UE)return 6406;if(i===os)return 6408;if(i===kE)return 6409;if(i===HE)return 6410;if(i===Oa)return 6402;if(i===Iu)return 34041;if(i===GE)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(i===yd)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(i===WE)return 6403;if(i===VE)return 36244;if(i===jE)return 33319;if(i===zE)return 33320;if(i===KE)return 36249;if(i===gf||i===yf||i===vf||i===Af)if(s===Vi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===gf)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===yf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===vf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Af)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===gf)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===yf)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===vf)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Af)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===am||i===um||i===cm||i===lm)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===am)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===um)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===cm)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===lm)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===JE)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===fm||i===dm)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===fm)return s===Vi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===dm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===hm||i===pm||i===mm||i===_m||i===gm||i===ym||i===vm||i===Am||i===bm||i===Em||i===Tm||i===wm||i===Cm||i===Sm)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===hm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===pm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===mm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===_m)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===gm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ym)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===vm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Am)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===bm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Em)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Tm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===wm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Cm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Sm)return s===Vi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===xm)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===xm)return s===Vi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return i===Cu?n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):o[i]!==void 0?o[i]:null}return{convert:r}}class ox extends Ho{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Pa extends oo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sx={type:"move"};class Kf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Pa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Pa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ke,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ke),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Pa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ke,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ke),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const E of e.hand.values()){const v=t.getJointPose(E,n),T=this._getHandJoint(f,E);v!==null&&(T.matrix.fromArray(v.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=v.radius),T.visible=v!==null}const l=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],d=l.position.distanceTo(p.position),_=.02,A=.005;f.inputState.pinching&&d>_+A?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&d<=_-A&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),i!==null&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&i!==null&&(r=i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(sx)))}return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=i!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Pa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ax extends xo{constructor(e,t,n,r,i,s,a,u,f,l){if(l=l!==void 0?l:Oa,l!==Oa&&l!==Iu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&l===Oa&&(n=Ra),n===void 0&&l===Iu&&(n=Cu),super(null,r,i,s,a,u,l,n,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:To,this.minFilter=u!==void 0?u:To,this.flipY=!1,this.generateMipmaps=!1}}class ux extends Ya{constructor(e,t){super();const n=this;let r=null,i=1,s=null,a="local-floor",u=null,f=null,l=null,p=null,d=null,_=null;const A=t.getContextAttributes();let E=null,v=null;const T=[],I=[],R=new Set,k=new Map,K=new Ho;K.layers.enable(1),K.viewport=new Yi;const ee=new Ho;ee.layers.enable(2),ee.viewport=new Yi;const _e=[K,ee],Q=new ox;Q.layers.enable(1),Q.layers.enable(2);let ne=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Je){let ze=T[Je];return ze===void 0&&(ze=new Kf,T[Je]=ze),ze.getTargetRaySpace()},this.getControllerGrip=function(Je){let ze=T[Je];return ze===void 0&&(ze=new Kf,T[Je]=ze),ze.getGripSpace()},this.getHand=function(Je){let ze=T[Je];return ze===void 0&&(ze=new Kf,T[Je]=ze),ze.getHandSpace()};function Ie(Je){const ze=I.indexOf(Je.inputSource);if(ze===-1)return;const ct=T[ze];ct!==void 0&&ct.dispatchEvent({type:Je.type,data:Je.inputSource})}function Pe(){r.removeEventListener("select",Ie),r.removeEventListener("selectstart",Ie),r.removeEventListener("selectend",Ie),r.removeEventListener("squeeze",Ie),r.removeEventListener("squeezestart",Ie),r.removeEventListener("squeezeend",Ie),r.removeEventListener("end",Pe),r.removeEventListener("inputsourceschange",Te);for(let Je=0;Je<T.length;Je++){const ze=I[Je];ze!==null&&(I[Je]=null,T[Je].disconnect(ze))}ne=null,de=null,e.setRenderTarget(E),d=null,p=null,l=null,r=null,v=null,Qe.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Je){i=Je,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Je){a=Je,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Je){u=Je},this.getBaseLayer=function(){return p!==null?p:d},this.getBinding=function(){return l},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(Je){if(r=Je,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",Ie),r.addEventListener("selectstart",Ie),r.addEventListener("selectend",Ie),r.addEventListener("squeeze",Ie),r.addEventListener("squeezestart",Ie),r.addEventListener("squeezeend",Ie),r.addEventListener("end",Pe),r.addEventListener("inputsourceschange",Te),A.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ze={antialias:r.renderState.layers===void 0?A.antialias:!0,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,ze),r.updateRenderState({baseLayer:d}),v=new Ka(d.framebufferWidth,d.framebufferHeight,{format:os,type:ja,encoding:e.outputEncoding,stencilBuffer:A.stencil})}else{let ze=null,ct=null,He=null;A.depth&&(He=A.stencil?35056:33190,ze=A.stencil?Iu:Oa,ct=A.stencil?Cu:Ra);const P={colorFormat:32856,depthFormat:He,scaleFactor:i};l=new XRWebGLBinding(r,t),p=l.createProjectionLayer(P),r.updateRenderState({layers:[p]}),v=new Ka(p.textureWidth,p.textureHeight,{format:os,type:ja,depthTexture:new ax(p.textureWidth,p.textureHeight,ct,void 0,void 0,void 0,void 0,void 0,void 0,ze),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0});const nt=e.properties.get(v);nt.__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),u=null,s=await r.requestReferenceSpace(a),Qe.setContext(r),Qe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function Te(Je){for(let ze=0;ze<Je.removed.length;ze++){const ct=Je.removed[ze],He=I.indexOf(ct);He>=0&&(I[He]=null,T[He].disconnect(ct))}for(let ze=0;ze<Je.added.length;ze++){const ct=Je.added[ze];let He=I.indexOf(ct);if(He===-1){for(let nt=0;nt<T.length;nt++)if(nt>=I.length){I.push(ct),He=nt;break}else if(I[nt]===null){I[nt]=ct,He=nt;break}if(He===-1)break}const P=T[He];P&&P.connect(ct)}}const Ee=new ke,Se=new ke;function Oe(Je,ze,ct){Ee.setFromMatrixPosition(ze.matrixWorld),Se.setFromMatrixPosition(ct.matrixWorld);const He=Ee.distanceTo(Se),P=ze.projectionMatrix.elements,nt=ct.projectionMatrix.elements,Fn=P[14]/(P[10]-1),Yt=P[14]/(P[10]+1),kn=(P[9]+1)/P[5],Et=(P[9]-1)/P[5],dn=(P[8]-1)/P[0],$t=(nt[8]+1)/nt[0],vn=Fn*dn,Cr=Fn*$t,Qr=He/(-dn+$t),yi=Qr*-dn;ze.matrixWorld.decompose(Je.position,Je.quaternion,Je.scale),Je.translateX(yi),Je.translateZ(Qr),Je.matrixWorld.compose(Je.position,Je.quaternion,Je.scale),Je.matrixWorldInverse.copy(Je.matrixWorld).invert();const Li=Fn+Qr,Sr=Yt+Qr,Mn=vn-yi,vi=Cr+(He-yi),ar=kn*Yt/Sr*Li,Ae=Et*Yt/Sr*Li;Je.projectionMatrix.makePerspective(Mn,vi,ar,Ae,Li,Sr)}function We(Je,ze){ze===null?Je.matrixWorld.copy(Je.matrix):Je.matrixWorld.multiplyMatrices(ze.matrixWorld,Je.matrix),Je.matrixWorldInverse.copy(Je.matrixWorld).invert()}this.updateCamera=function(Je){if(r===null)return;Q.near=ee.near=K.near=Je.near,Q.far=ee.far=K.far=Je.far,(ne!==Q.near||de!==Q.far)&&(r.updateRenderState({depthNear:Q.near,depthFar:Q.far}),ne=Q.near,de=Q.far);const ze=Je.parent,ct=Q.cameras;We(Q,ze);for(let P=0;P<ct.length;P++)We(ct[P],ze);Q.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Je.matrix.copy(Q.matrix),Je.matrix.decompose(Je.position,Je.quaternion,Je.scale);const He=Je.children;for(let P=0,nt=He.length;P<nt;P++)He[P].updateMatrixWorld(!0);ct.length===2?Oe(Q,K,ee):Q.projectionMatrix.copy(K.projectionMatrix)},this.getCamera=function(){return Q},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(Je){p!==null&&(p.fixedFoveation=Je),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Je)},this.getPlanes=function(){return R};let j=null;function _t(Je,ze){if(f=ze.getViewerPose(u||s),_=ze,f!==null){const ct=f.views;d!==null&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let He=!1;ct.length!==Q.cameras.length&&(Q.cameras.length=0,He=!0);for(let P=0;P<ct.length;P++){const nt=ct[P];let Fn=null;if(d!==null)Fn=d.getViewport(nt);else{const kn=l.getViewSubImage(p,nt);Fn=kn.viewport,P===0&&(e.setRenderTargetTextures(v,kn.colorTexture,p.ignoreDepthValues?void 0:kn.depthStencilTexture),e.setRenderTarget(v))}let Yt=_e[P];Yt===void 0&&(Yt=new Ho,Yt.layers.enable(P),Yt.viewport=new Yi,_e[P]=Yt),Yt.matrix.fromArray(nt.transform.matrix),Yt.projectionMatrix.fromArray(nt.projectionMatrix),Yt.viewport.set(Fn.x,Fn.y,Fn.width,Fn.height),P===0&&Q.matrix.copy(Yt.matrix),He===!0&&Q.cameras.push(Yt)}}for(let ct=0;ct<T.length;ct++){const He=I[ct],P=T[ct];He!==null&&P!==void 0&&P.update(He,ze,u||s)}if(j&&j(Je,ze),ze.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:ze.detectedPlanes});let ct=null;for(const He of R)ze.detectedPlanes.has(He)||(ct===null&&(ct=[]),ct.push(He));if(ct!==null)for(const He of ct)R.delete(He),k.delete(He),n.dispatchEvent({type:"planeremoved",data:He});for(const He of ze.detectedPlanes)if(!R.has(He))R.add(He),k.set(He,ze.lastChangedTime),n.dispatchEvent({type:"planeadded",data:He});else{const P=k.get(He);He.lastChangedTime>P&&(k.set(He,He.lastChangedTime),n.dispatchEvent({type:"planechanged",data:He}))}}_=null}const Qe=new $g;Qe.setAnimationLoop(_t),this.setAnimationLoop=function(Je){j=Je},this.dispose=function(){}}}function cx(o,e){function t(E,v){v.color.getRGB(E.fogColor.value,qg(o)),v.isFog?(E.fogNear.value=v.near,E.fogFar.value=v.far):v.isFogExp2&&(E.fogDensity.value=v.density)}function n(E,v,T,I,R){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(E,v):v.isMeshToonMaterial?(r(E,v),l(E,v)):v.isMeshPhongMaterial?(r(E,v),f(E,v)):v.isMeshStandardMaterial?(r(E,v),p(E,v),v.isMeshPhysicalMaterial&&d(E,v,R)):v.isMeshMatcapMaterial?(r(E,v),_(E,v)):v.isMeshDepthMaterial?r(E,v):v.isMeshDistanceMaterial?(r(E,v),A(E,v)):v.isMeshNormalMaterial?r(E,v):v.isLineBasicMaterial?(i(E,v),v.isLineDashedMaterial&&s(E,v)):v.isPointsMaterial?a(E,v,T,I):v.isSpriteMaterial?u(E,v):v.isShadowMaterial?(E.color.value.copy(v.color),E.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(E,v){E.opacity.value=v.opacity,v.color&&E.diffuse.value.copy(v.color),v.emissive&&E.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(E.map.value=v.map),v.alphaMap&&(E.alphaMap.value=v.alphaMap),v.bumpMap&&(E.bumpMap.value=v.bumpMap,E.bumpScale.value=v.bumpScale,v.side===cs&&(E.bumpScale.value*=-1)),v.displacementMap&&(E.displacementMap.value=v.displacementMap,E.displacementScale.value=v.displacementScale,E.displacementBias.value=v.displacementBias),v.emissiveMap&&(E.emissiveMap.value=v.emissiveMap),v.normalMap&&(E.normalMap.value=v.normalMap,E.normalScale.value.copy(v.normalScale),v.side===cs&&E.normalScale.value.negate()),v.specularMap&&(E.specularMap.value=v.specularMap),v.alphaTest>0&&(E.alphaTest.value=v.alphaTest);const T=e.get(v).envMap;if(T&&(E.envMap.value=T,E.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=v.reflectivity,E.ior.value=v.ior,E.refractionRatio.value=v.refractionRatio),v.lightMap){E.lightMap.value=v.lightMap;const k=o.physicallyCorrectLights!==!0?Math.PI:1;E.lightMapIntensity.value=v.lightMapIntensity*k}v.aoMap&&(E.aoMap.value=v.aoMap,E.aoMapIntensity.value=v.aoMapIntensity);let I;v.map?I=v.map:v.specularMap?I=v.specularMap:v.displacementMap?I=v.displacementMap:v.normalMap?I=v.normalMap:v.bumpMap?I=v.bumpMap:v.roughnessMap?I=v.roughnessMap:v.metalnessMap?I=v.metalnessMap:v.alphaMap?I=v.alphaMap:v.emissiveMap?I=v.emissiveMap:v.clearcoatMap?I=v.clearcoatMap:v.clearcoatNormalMap?I=v.clearcoatNormalMap:v.clearcoatRoughnessMap?I=v.clearcoatRoughnessMap:v.iridescenceMap?I=v.iridescenceMap:v.iridescenceThicknessMap?I=v.iridescenceThicknessMap:v.specularIntensityMap?I=v.specularIntensityMap:v.specularColorMap?I=v.specularColorMap:v.transmissionMap?I=v.transmissionMap:v.thicknessMap?I=v.thicknessMap:v.sheenColorMap?I=v.sheenColorMap:v.sheenRoughnessMap&&(I=v.sheenRoughnessMap),I!==void 0&&(I.isWebGLRenderTarget&&(I=I.texture),I.matrixAutoUpdate===!0&&I.updateMatrix(),E.uvTransform.value.copy(I.matrix));let R;v.aoMap?R=v.aoMap:v.lightMap&&(R=v.lightMap),R!==void 0&&(R.isWebGLRenderTarget&&(R=R.texture),R.matrixAutoUpdate===!0&&R.updateMatrix(),E.uv2Transform.value.copy(R.matrix))}function i(E,v){E.diffuse.value.copy(v.color),E.opacity.value=v.opacity}function s(E,v){E.dashSize.value=v.dashSize,E.totalSize.value=v.dashSize+v.gapSize,E.scale.value=v.scale}function a(E,v,T,I){E.diffuse.value.copy(v.color),E.opacity.value=v.opacity,E.size.value=v.size*T,E.scale.value=I*.5,v.map&&(E.map.value=v.map),v.alphaMap&&(E.alphaMap.value=v.alphaMap),v.alphaTest>0&&(E.alphaTest.value=v.alphaTest);let R;v.map?R=v.map:v.alphaMap&&(R=v.alphaMap),R!==void 0&&(R.matrixAutoUpdate===!0&&R.updateMatrix(),E.uvTransform.value.copy(R.matrix))}function u(E,v){E.diffuse.value.copy(v.color),E.opacity.value=v.opacity,E.rotation.value=v.rotation,v.map&&(E.map.value=v.map),v.alphaMap&&(E.alphaMap.value=v.alphaMap),v.alphaTest>0&&(E.alphaTest.value=v.alphaTest);let T;v.map?T=v.map:v.alphaMap&&(T=v.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),E.uvTransform.value.copy(T.matrix))}function f(E,v){E.specular.value.copy(v.specular),E.shininess.value=Math.max(v.shininess,1e-4)}function l(E,v){v.gradientMap&&(E.gradientMap.value=v.gradientMap)}function p(E,v){E.roughness.value=v.roughness,E.metalness.value=v.metalness,v.roughnessMap&&(E.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(E.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(E.envMapIntensity.value=v.envMapIntensity)}function d(E,v,T){E.ior.value=v.ior,v.sheen>0&&(E.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),E.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(E.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(E.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(E.clearcoat.value=v.clearcoat,E.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(E.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(E.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),E.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===cs&&E.clearcoatNormalScale.value.negate())),v.iridescence>0&&(E.iridescence.value=v.iridescence,E.iridescenceIOR.value=v.iridescenceIOR,E.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(E.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(E.transmission.value=v.transmission,E.transmissionSamplerMap.value=T.texture,E.transmissionSamplerSize.value.set(T.width,T.height),v.transmissionMap&&(E.transmissionMap.value=v.transmissionMap),E.thickness.value=v.thickness,v.thicknessMap&&(E.thicknessMap.value=v.thicknessMap),E.attenuationDistance.value=v.attenuationDistance,E.attenuationColor.value.copy(v.attenuationColor)),E.specularIntensity.value=v.specularIntensity,E.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(E.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(E.specularColorMap.value=v.specularColorMap)}function _(E,v){v.matcap&&(E.matcap.value=v.matcap)}function A(E,v){E.referencePosition.value.copy(v.referencePosition),E.nearDistance.value=v.nearDistance,E.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function lx(o,e,t,n){let r={},i={},s=[];const a=t.isWebGL2?o.getParameter(35375):0;function u(I,R){const k=R.program;n.uniformBlockBinding(I,k)}function f(I,R){let k=r[I.id];k===void 0&&(A(I),k=l(I),r[I.id]=k,I.addEventListener("dispose",v));const K=R.program;n.updateUBOMapping(I,K);const ee=e.render.frame;i[I.id]!==ee&&(d(I),i[I.id]=ee)}function l(I){const R=p();I.__bindingPointIndex=R;const k=o.createBuffer(),K=I.__size,ee=I.usage;return o.bindBuffer(35345,k),o.bufferData(35345,K,ee),o.bindBuffer(35345,null),o.bindBufferBase(35345,R,k),k}function p(){for(let I=0;I<a;I++)if(s.indexOf(I)===-1)return s.push(I),I;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(I){const R=r[I.id],k=I.uniforms,K=I.__cache;o.bindBuffer(35345,R);for(let ee=0,_e=k.length;ee<_e;ee++){const Q=k[ee];if(_(Q,ee,K)===!0){const ne=Q.__offset,de=Array.isArray(Q.value)?Q.value:[Q.value];let Ie=0;for(let Pe=0;Pe<de.length;Pe++){const Te=de[Pe],Ee=E(Te);typeof Te=="number"?(Q.__data[0]=Te,o.bufferSubData(35345,ne+Ie,Q.__data)):Te.isMatrix3?(Q.__data[0]=Te.elements[0],Q.__data[1]=Te.elements[1],Q.__data[2]=Te.elements[2],Q.__data[3]=Te.elements[0],Q.__data[4]=Te.elements[3],Q.__data[5]=Te.elements[4],Q.__data[6]=Te.elements[5],Q.__data[7]=Te.elements[0],Q.__data[8]=Te.elements[6],Q.__data[9]=Te.elements[7],Q.__data[10]=Te.elements[8],Q.__data[11]=Te.elements[0]):(Te.toArray(Q.__data,Ie),Ie+=Ee.storage/Float32Array.BYTES_PER_ELEMENT)}o.bufferSubData(35345,ne,Q.__data)}}o.bindBuffer(35345,null)}function _(I,R,k){const K=I.value;if(k[R]===void 0){if(typeof K=="number")k[R]=K;else{const ee=Array.isArray(K)?K:[K],_e=[];for(let Q=0;Q<ee.length;Q++)_e.push(ee[Q].clone());k[R]=_e}return!0}else if(typeof K=="number"){if(k[R]!==K)return k[R]=K,!0}else{const ee=Array.isArray(k[R])?k[R]:[k[R]],_e=Array.isArray(K)?K:[K];for(let Q=0;Q<ee.length;Q++){const ne=ee[Q];if(ne.equals(_e[Q])===!1)return ne.copy(_e[Q]),!0}}return!1}function A(I){const R=I.uniforms;let k=0;const K=16;let ee=0;for(let _e=0,Q=R.length;_e<Q;_e++){const ne=R[_e],de={boundary:0,storage:0},Ie=Array.isArray(ne.value)?ne.value:[ne.value];for(let Pe=0,Te=Ie.length;Pe<Te;Pe++){const Ee=Ie[Pe],Se=E(Ee);de.boundary+=Se.boundary,de.storage+=Se.storage}if(ne.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),ne.__offset=k,_e>0){ee=k%K;const Pe=K-ee;ee!==0&&Pe-de.boundary<0&&(k+=K-ee,ne.__offset=k)}k+=de.storage}return ee=k%K,ee>0&&(k+=K-ee),I.__size=k,I.__cache={},this}function E(I){const R={boundary:0,storage:0};return typeof I=="number"?(R.boundary=4,R.storage=4):I.isVector2?(R.boundary=8,R.storage=8):I.isVector3||I.isColor?(R.boundary=16,R.storage=12):I.isVector4?(R.boundary=16,R.storage=16):I.isMatrix3?(R.boundary=48,R.storage=48):I.isMatrix4?(R.boundary=64,R.storage=64):I.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",I),R}function v(I){const R=I.target;R.removeEventListener("dispose",v);const k=s.indexOf(R.__bindingPointIndex);s.splice(k,1),o.deleteBuffer(r[R.id]),delete r[R.id],delete i[R.id]}function T(){for(const I in r)o.deleteBuffer(r[I]);s=[],r={},i={}}return{bind:u,update:f,dispose:T}}function fx(){const o=Sc("canvas");return o.style.display="block",o}function ny(o={}){this.isWebGLRenderer=!0;const e=o.canvas!==void 0?o.canvas:fx(),t=o.context!==void 0?o.context:null,n=o.depth!==void 0?o.depth:!0,r=o.stencil!==void 0?o.stencil:!0,i=o.antialias!==void 0?o.antialias:!1,s=o.premultipliedAlpha!==void 0?o.premultipliedAlpha:!0,a=o.preserveDrawingBuffer!==void 0?o.preserveDrawingBuffer:!1,u=o.powerPreference!==void 0?o.powerPreference:"default",f=o.failIfMajorPerformanceCaveat!==void 0?o.failIfMajorPerformanceCaveat:!1;let l;t!==null?l=t.getContextAttributes().alpha:l=o.alpha!==void 0?o.alpha:!1;let p=null,d=null;const _=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=za,this.physicallyCorrectLights=!1,this.toneMapping=js,this.toneMappingExposure=1;const E=this;let v=!1,T=0,I=0,R=null,k=-1,K=null;const ee=new Yi,_e=new Yi;let Q=null,ne=e.width,de=e.height,Ie=1,Pe=null,Te=null;const Ee=new Yi(0,0,ne,de),Se=new Yi(0,0,ne,de);let Oe=!1;const We=new wh;let j=!1,_t=!1,Qe=null;const Je=new Ei,ze=new Xr,ct=new ke,He={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function P(){return R===null?Ie:1}let nt=t;function Fn(ye,qe){for(let ut=0;ut<ye.length;ut++){const Ue=ye[ut],ht=e.getContext(Ue,qe);if(ht!==null)return ht}return null}try{const ye={alpha:!0,depth:n,stencil:r,antialias:i,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${bh}`),e.addEventListener("webglcontextlost",zt,!1),e.addEventListener("webglcontextrestored",Qt,!1),e.addEventListener("webglcontextcreationerror",rr,!1),nt===null){const qe=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&qe.shift(),nt=Fn(qe,ye),nt===null)throw Fn(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}nt.getShaderPrecisionFormat===void 0&&(nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ye){throw console.error("THREE.WebGLRenderer: "+ye.message),ye}let Yt,kn,Et,dn,$t,vn,Cr,Qr,yi,Li,Sr,Mn,vi,ar,Ae,fe,ot,St,Dt,Nt,_n,Ce,Ne,Jt;function Zt(){Yt=new ES(nt),kn=new _S(nt,Yt,o),Yt.init(kn),Ce=new ix(nt,Yt,kn),Et=new nx(nt,Yt,kn),dn=new CS,$t=new W1,vn=new rx(nt,Yt,Et,$t,kn,Ce,dn),Cr=new yS(E),Qr=new bS(E),yi=new FT(nt,kn),Ne=new pS(nt,Yt,yi,kn),Li=new TS(nt,yi,dn,Ne),Sr=new MS(nt,Li,yi,dn),Dt=new BS(nt,kn,vn),fe=new gS($t),Mn=new H1(E,Cr,Qr,Yt,kn,Ne,fe),vi=new cx(E,$t),ar=new j1,Ae=new Y1(Yt,kn),St=new hS(E,Cr,Qr,Et,Sr,l,s),ot=new tx(E,Sr,kn),Jt=new lx(nt,dn,kn,Et),Nt=new mS(nt,Yt,dn,kn),_n=new wS(nt,Yt,dn,kn),dn.programs=Mn.programs,E.capabilities=kn,E.extensions=Yt,E.properties=$t,E.renderLists=ar,E.shadowMap=ot,E.state=Et,E.info=dn}Zt();const Bt=new ux(E,nt);this.xr=Bt,this.getContext=function(){return nt},this.getContextAttributes=function(){return nt.getContextAttributes()},this.forceContextLoss=function(){const ye=Yt.get("WEBGL_lose_context");ye&&ye.loseContext()},this.forceContextRestore=function(){const ye=Yt.get("WEBGL_lose_context");ye&&ye.restoreContext()},this.getPixelRatio=function(){return Ie},this.setPixelRatio=function(ye){ye!==void 0&&(Ie=ye,this.setSize(ne,de,!1))},this.getSize=function(ye){return ye.set(ne,de)},this.setSize=function(ye,qe,ut){if(Bt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=ye,de=qe,e.width=Math.floor(ye*Ie),e.height=Math.floor(qe*Ie),ut!==!1&&(e.style.width=ye+"px",e.style.height=qe+"px"),this.setViewport(0,0,ye,qe)},this.getDrawingBufferSize=function(ye){return ye.set(ne*Ie,de*Ie).floor()},this.setDrawingBufferSize=function(ye,qe,ut){ne=ye,de=qe,Ie=ut,e.width=Math.floor(ye*ut),e.height=Math.floor(qe*ut),this.setViewport(0,0,ye,qe)},this.getCurrentViewport=function(ye){return ye.copy(ee)},this.getViewport=function(ye){return ye.copy(Ee)},this.setViewport=function(ye,qe,ut,Ue){ye.isVector4?Ee.set(ye.x,ye.y,ye.z,ye.w):Ee.set(ye,qe,ut,Ue),Et.viewport(ee.copy(Ee).multiplyScalar(Ie).floor())},this.getScissor=function(ye){return ye.copy(Se)},this.setScissor=function(ye,qe,ut,Ue){ye.isVector4?Se.set(ye.x,ye.y,ye.z,ye.w):Se.set(ye,qe,ut,Ue),Et.scissor(_e.copy(Se).multiplyScalar(Ie).floor())},this.getScissorTest=function(){return Oe},this.setScissorTest=function(ye){Et.setScissorTest(Oe=ye)},this.setOpaqueSort=function(ye){Pe=ye},this.setTransparentSort=function(ye){Te=ye},this.getClearColor=function(ye){return ye.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor.apply(St,arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha.apply(St,arguments)},this.clear=function(ye=!0,qe=!0,ut=!0){let Ue=0;ye&&(Ue|=16384),qe&&(Ue|=256),ut&&(Ue|=1024),nt.clear(Ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",zt,!1),e.removeEventListener("webglcontextrestored",Qt,!1),e.removeEventListener("webglcontextcreationerror",rr,!1),ar.dispose(),Ae.dispose(),$t.dispose(),Cr.dispose(),Qr.dispose(),Sr.dispose(),Ne.dispose(),Jt.dispose(),Mn.dispose(),Bt.dispose(),Bt.removeEventListener("sessionstart",en),Bt.removeEventListener("sessionend",En),Qe&&(Qe.dispose(),Qe=null),Jr.stop()};function zt(ye){ye.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Qt(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const ye=dn.autoReset,qe=ot.enabled,ut=ot.autoUpdate,Ue=ot.needsUpdate,ht=ot.type;Zt(),dn.autoReset=ye,ot.enabled=qe,ot.autoUpdate=ut,ot.needsUpdate=Ue,ot.type=ht}function rr(ye){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ye.statusMessage)}function Cn(ye){const qe=ye.target;qe.removeEventListener("dispose",Cn),Kr(qe)}function Kr(ye){Fe(ye),$t.remove(ye)}function Fe(ye){const qe=$t.get(ye).programs;qe!==void 0&&(qe.forEach(function(ut){Mn.releaseProgram(ut)}),ye.isShaderMaterial&&Mn.releaseShaderCache(ye))}this.renderBufferDirect=function(ye,qe,ut,Ue,ht,Dn){qe===null&&(qe=He);const Bn=ht.isMesh&&ht.matrixWorld.determinant()<0,_r=tn(ye,qe,ut,Ue,ht);Et.setMaterial(Ue,Bn);let yr=ut.index,kr=1;Ue.wireframe===!0&&(yr=Li.getWireframeAttribute(ut),kr=2);const vr=ut.drawRange,gr=ut.attributes.position;let ei=vr.start*kr,Wi=(vr.start+vr.count)*kr;Dn!==null&&(ei=Math.max(ei,Dn.start*kr),Wi=Math.min(Wi,(Dn.start+Dn.count)*kr)),yr!==null?(ei=Math.max(ei,0),Wi=Math.min(Wi,yr.count)):gr!=null&&(ei=Math.max(ei,0),Wi=Math.min(Wi,gr.count));const zi=Wi-ei;if(zi<0||zi===1/0)return;Ne.setup(ht,Ue,_r,ut,yr);let Zi,Ge=Nt;if(yr!==null&&(Zi=yi.get(yr),Ge=_n,Ge.setIndex(Zi)),ht.isMesh)Ue.wireframe===!0?(Et.setLineWidth(Ue.wireframeLinewidth*P()),Ge.setMode(1)):Ge.setMode(4);else if(ht.isLine){let c=Ue.linewidth;c===void 0&&(c=1),Et.setLineWidth(c*P()),ht.isLineSegments?Ge.setMode(1):ht.isLineLoop?Ge.setMode(2):Ge.setMode(3)}else ht.isPoints?Ge.setMode(0):ht.isSprite&&Ge.setMode(4);if(ht.isInstancedMesh)Ge.renderInstances(ei,zi,ht.count);else if(ut.isInstancedBufferGeometry){const c=ut._maxInstanceCount!==void 0?ut._maxInstanceCount:1/0,Xe=Math.min(ut.instanceCount,c);Ge.renderInstances(ei,zi,Xe)}else Ge.render(ei,zi)},this.compile=function(ye,qe){function ut(Ue,ht,Dn){Ue.transparent===!0&&Ue.side===$c?(Ue.side=cs,Ue.needsUpdate=!0,ji(Ue,ht,Dn),Ue.side=ua,Ue.needsUpdate=!0,ji(Ue,ht,Dn),Ue.side=$c):ji(Ue,ht,Dn)}d=Ae.get(ye),d.init(),A.push(d),ye.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(qe.layers)&&(d.pushLight(Ue),Ue.castShadow&&d.pushShadow(Ue))}),d.setupLights(E.physicallyCorrectLights),ye.traverse(function(Ue){const ht=Ue.material;if(ht)if(Array.isArray(ht))for(let Dn=0;Dn<ht.length;Dn++){const Bn=ht[Dn];ut(Bn,ye,Ue)}else ut(ht,ye,Ue)}),A.pop(),d=null};let rt=null;function Ct(ye){rt&&rt(ye)}function en(){Jr.stop()}function En(){Jr.start()}const Jr=new $g;Jr.setAnimationLoop(Ct),typeof self<"u"&&Jr.setContext(self),this.setAnimationLoop=function(ye){rt=ye,Bt.setAnimationLoop(ye),ye===null?Jr.stop():Jr.start()},Bt.addEventListener("sessionstart",en),Bt.addEventListener("sessionend",En),this.render=function(ye,qe){if(qe!==void 0&&qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),qe.parent===null&&qe.matrixWorldAutoUpdate===!0&&qe.updateMatrixWorld(),Bt.enabled===!0&&Bt.isPresenting===!0&&(Bt.cameraAutoUpdate===!0&&Bt.updateCamera(qe),qe=Bt.getCamera()),ye.isScene===!0&&ye.onBeforeRender(E,ye,qe,R),d=Ae.get(ye,A.length),d.init(),A.push(d),Je.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),We.setFromProjectionMatrix(Je),_t=this.localClippingEnabled,j=fe.init(this.clippingPlanes,_t,qe),p=ar.get(ye,_.length),p.init(),_.push(p),ki(ye,qe,0,E.sortObjects),p.finish(),E.sortObjects===!0&&p.sort(Pe,Te),j===!0&&fe.beginShadows();const ut=d.state.shadowsArray;if(ot.render(ut,ye,qe),j===!0&&fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),St.render(p,ye),d.setupLights(E.physicallyCorrectLights),qe.isArrayCamera){const Ue=qe.cameras;for(let ht=0,Dn=Ue.length;ht<Dn;ht++){const Bn=Ue[ht];Hi(p,ye,Bn,Bn.viewport)}}else Hi(p,ye,qe);R!==null&&(vn.updateMultisampleRenderTarget(R),vn.updateRenderTargetMipmap(R)),ye.isScene===!0&&ye.onAfterRender(E,ye,qe),Ne.resetDefaultState(),k=-1,K=null,A.pop(),A.length>0?d=A[A.length-1]:d=null,_.pop(),_.length>0?p=_[_.length-1]:p=null};function ki(ye,qe,ut,Ue){if(ye.visible===!1)return;if(ye.layers.test(qe.layers)){if(ye.isGroup)ut=ye.renderOrder;else if(ye.isLOD)ye.autoUpdate===!0&&ye.update(qe);else if(ye.isLight)d.pushLight(ye),ye.castShadow&&d.pushShadow(ye);else if(ye.isSprite){if(!ye.frustumCulled||We.intersectsSprite(ye)){Ue&&ct.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(Je);const Bn=Sr.update(ye),_r=ye.material;_r.visible&&p.push(ye,Bn,_r,ut,ct.z,null)}}else if((ye.isMesh||ye.isLine||ye.isPoints)&&(ye.isSkinnedMesh&&ye.skeleton.frame!==dn.render.frame&&(ye.skeleton.update(),ye.skeleton.frame=dn.render.frame),!ye.frustumCulled||We.intersectsObject(ye))){Ue&&ct.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(Je);const Bn=Sr.update(ye),_r=ye.material;if(Array.isArray(_r)){const yr=Bn.groups;for(let kr=0,vr=yr.length;kr<vr;kr++){const gr=yr[kr],ei=_r[gr.materialIndex];ei&&ei.visible&&p.push(ye,Bn,ei,ut,ct.z,gr)}}else _r.visible&&p.push(ye,Bn,_r,ut,ct.z,null)}}const Dn=ye.children;for(let Bn=0,_r=Dn.length;Bn<_r;Bn++)ki(Dn[Bn],qe,ut,Ue)}function Hi(ye,qe,ut,Ue){const ht=ye.opaque,Dn=ye.transmissive,Bn=ye.transparent;d.setupLightsView(ut),Dn.length>0&&$i(ht,qe,ut),Ue&&Et.viewport(ee.copy(Ue)),ht.length>0&&ci(ht,qe,ut),Dn.length>0&&ci(Dn,qe,ut),Bn.length>0&&ci(Bn,qe,ut),Et.buffers.depth.setTest(!0),Et.buffers.depth.setMask(!0),Et.buffers.color.setMask(!0),Et.setPolygonOffset(!1)}function $i(ye,qe,ut){const Ue=kn.isWebGL2;Qe===null&&(Qe=new Ka(1,1,{generateMipmaps:!0,type:Yt.has("EXT_color_buffer_half_float")?Ec:ja,minFilter:Va,samples:Ue&&i===!0?4:0})),E.getDrawingBufferSize(ze),Ue?Qe.setSize(ze.x,ze.y):Qe.setSize(Ol(ze.x),Ol(ze.y));const ht=E.getRenderTarget();E.setRenderTarget(Qe),E.clear();const Dn=E.toneMapping;E.toneMapping=js,ci(ye,qe,ut),E.toneMapping=Dn,vn.updateMultisampleRenderTarget(Qe),vn.updateRenderTargetMipmap(Qe),E.setRenderTarget(ht)}function ci(ye,qe,ut){const Ue=qe.isScene===!0?qe.overrideMaterial:null;for(let ht=0,Dn=ye.length;ht<Dn;ht++){const Bn=ye[ht],_r=Bn.object,yr=Bn.geometry,kr=Ue===null?Bn.material:Ue,vr=Bn.group;_r.layers.test(ut.layers)&&so(_r,qe,ut,yr,kr,vr)}}function so(ye,qe,ut,Ue,ht,Dn){ye.onBeforeRender(E,qe,ut,Ue,ht,Dn),ye.modelViewMatrix.multiplyMatrices(ut.matrixWorldInverse,ye.matrixWorld),ye.normalMatrix.getNormalMatrix(ye.modelViewMatrix),ht.onBeforeRender(E,qe,ut,Ue,ye,Dn),ht.transparent===!0&&ht.side===$c?(ht.side=cs,ht.needsUpdate=!0,E.renderBufferDirect(ut,qe,Ue,ht,ye,Dn),ht.side=ua,ht.needsUpdate=!0,E.renderBufferDirect(ut,qe,Ue,ht,ye,Dn),ht.side=$c):E.renderBufferDirect(ut,qe,Ue,ht,ye,Dn),ye.onAfterRender(E,qe,ut,Ue,ht,Dn)}function ji(ye,qe,ut){qe.isScene!==!0&&(qe=He);const Ue=$t.get(ye),ht=d.state.lights,Dn=d.state.shadowsArray,Bn=ht.state.version,_r=Mn.getParameters(ye,ht.state,Dn,qe,ut),yr=Mn.getProgramCacheKey(_r);let kr=Ue.programs;Ue.environment=ye.isMeshStandardMaterial?qe.environment:null,Ue.fog=qe.fog,Ue.envMap=(ye.isMeshStandardMaterial?Qr:Cr).get(ye.envMap||Ue.environment),kr===void 0&&(ye.addEventListener("dispose",Cn),kr=new Map,Ue.programs=kr);let vr=kr.get(yr);if(vr!==void 0){if(Ue.currentProgram===vr&&Ue.lightsStateVersion===Bn)return mo(ye,_r),vr}else _r.uniforms=Mn.getUniforms(ye),ye.onBuild(ut,_r,E),ye.onBeforeCompile(_r,E),vr=Mn.acquireProgram(_r,yr),kr.set(yr,vr),Ue.uniforms=_r.uniforms;const gr=Ue.uniforms;(!ye.isShaderMaterial&&!ye.isRawShaderMaterial||ye.clipping===!0)&&(gr.clippingPlanes=fe.uniform),mo(ye,_r),Ue.needsLights=no(ye),Ue.lightsStateVersion=Bn,Ue.needsLights&&(gr.ambientLightColor.value=ht.state.ambient,gr.lightProbe.value=ht.state.probe,gr.directionalLights.value=ht.state.directional,gr.directionalLightShadows.value=ht.state.directionalShadow,gr.spotLights.value=ht.state.spot,gr.spotLightShadows.value=ht.state.spotShadow,gr.rectAreaLights.value=ht.state.rectArea,gr.ltc_1.value=ht.state.rectAreaLTC1,gr.ltc_2.value=ht.state.rectAreaLTC2,gr.pointLights.value=ht.state.point,gr.pointLightShadows.value=ht.state.pointShadow,gr.hemisphereLights.value=ht.state.hemi,gr.directionalShadowMap.value=ht.state.directionalShadowMap,gr.directionalShadowMatrix.value=ht.state.directionalShadowMatrix,gr.spotShadowMap.value=ht.state.spotShadowMap,gr.spotLightMatrix.value=ht.state.spotLightMatrix,gr.spotLightMap.value=ht.state.spotLightMap,gr.pointShadowMap.value=ht.state.pointShadowMap,gr.pointShadowMatrix.value=ht.state.pointShadowMatrix);const ei=vr.getUniforms(),Wi=xl.seqWithValue(ei.seq,gr);return Ue.currentProgram=vr,Ue.uniformsList=Wi,vr}function mo(ye,qe){const ut=$t.get(ye);ut.outputEncoding=qe.outputEncoding,ut.instancing=qe.instancing,ut.skinning=qe.skinning,ut.morphTargets=qe.morphTargets,ut.morphNormals=qe.morphNormals,ut.morphColors=qe.morphColors,ut.morphTargetsCount=qe.morphTargetsCount,ut.numClippingPlanes=qe.numClippingPlanes,ut.numIntersection=qe.numClipIntersection,ut.vertexAlphas=qe.vertexAlphas,ut.vertexTangents=qe.vertexTangents,ut.toneMapping=qe.toneMapping}function tn(ye,qe,ut,Ue,ht){qe.isScene!==!0&&(qe=He),vn.resetTextureUnits();const Dn=qe.fog,Bn=Ue.isMeshStandardMaterial?qe.environment:null,_r=R===null?E.outputEncoding:R.isXRRenderTarget===!0?R.texture.encoding:za,yr=(Ue.isMeshStandardMaterial?Qr:Cr).get(Ue.envMap||Bn),kr=Ue.vertexColors===!0&&!!ut.attributes.color&&ut.attributes.color.itemSize===4,vr=!!Ue.normalMap&&!!ut.attributes.tangent,gr=!!ut.morphAttributes.position,ei=!!ut.morphAttributes.normal,Wi=!!ut.morphAttributes.color,zi=Ue.toneMapped?E.toneMapping:js,Zi=ut.morphAttributes.position||ut.morphAttributes.normal||ut.morphAttributes.color,Ge=Zi!==void 0?Zi.length:0,c=$t.get(Ue),Xe=d.state.lights;if(j===!0&&(_t===!0||ye!==K)){const nn=ye===K&&Ue.id===k;fe.setState(Ue,ye,nn)}let et=!1;Ue.version===c.__version?(c.needsLights&&c.lightsStateVersion!==Xe.state.version||c.outputEncoding!==_r||ht.isInstancedMesh&&c.instancing===!1||!ht.isInstancedMesh&&c.instancing===!0||ht.isSkinnedMesh&&c.skinning===!1||!ht.isSkinnedMesh&&c.skinning===!0||c.envMap!==yr||Ue.fog===!0&&c.fog!==Dn||c.numClippingPlanes!==void 0&&(c.numClippingPlanes!==fe.numPlanes||c.numIntersection!==fe.numIntersection)||c.vertexAlphas!==kr||c.vertexTangents!==vr||c.morphTargets!==gr||c.morphNormals!==ei||c.morphColors!==Wi||c.toneMapping!==zi||kn.isWebGL2===!0&&c.morphTargetsCount!==Ge)&&(et=!0):(et=!0,c.__version=Ue.version);let it=c.currentProgram;et===!0&&(it=ji(Ue,qe,ht));let je=!1,qt=!1,It=!1;const Rt=it.getUniforms(),Xt=c.uniforms;if(Et.useProgram(it.program)&&(je=!0,qt=!0,It=!0),Ue.id!==k&&(k=Ue.id,qt=!0),je||K!==ye){if(Rt.setValue(nt,"projectionMatrix",ye.projectionMatrix),kn.logarithmicDepthBuffer&&Rt.setValue(nt,"logDepthBufFC",2/(Math.log(ye.far+1)/Math.LN2)),K!==ye&&(K=ye,qt=!0,It=!0),Ue.isShaderMaterial||Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshStandardMaterial||Ue.envMap){const nn=Rt.map.cameraPosition;nn!==void 0&&nn.setValue(nt,ct.setFromMatrixPosition(ye.matrixWorld))}(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&Rt.setValue(nt,"isOrthographic",ye.isOrthographicCamera===!0),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial||Ue.isShadowMaterial||ht.isSkinnedMesh)&&Rt.setValue(nt,"viewMatrix",ye.matrixWorldInverse)}if(ht.isSkinnedMesh){Rt.setOptional(nt,ht,"bindMatrix"),Rt.setOptional(nt,ht,"bindMatrixInverse");const nn=ht.skeleton;nn&&(kn.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),Rt.setValue(nt,"boneTexture",nn.boneTexture,vn),Rt.setValue(nt,"boneTextureSize",nn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const hn=ut.morphAttributes;if((hn.position!==void 0||hn.normal!==void 0||hn.color!==void 0&&kn.isWebGL2===!0)&&Dt.update(ht,ut,Ue,it),(qt||c.receiveShadow!==ht.receiveShadow)&&(c.receiveShadow=ht.receiveShadow,Rt.setValue(nt,"receiveShadow",ht.receiveShadow)),Ue.isMeshGouraudMaterial&&Ue.envMap!==null&&(Xt.envMap.value=yr,Xt.flipEnvMap.value=yr.isCubeTexture&&yr.isRenderTargetTexture===!1?-1:1),qt&&(Rt.setValue(nt,"toneMappingExposure",E.toneMappingExposure),c.needsLights&&Mo(Xt,It),Dn&&Ue.fog===!0&&vi.refreshFogUniforms(Xt,Dn),vi.refreshMaterialUniforms(Xt,Ue,Ie,de,Qe),xl.upload(nt,c.uniformsList,Xt,vn)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(xl.upload(nt,c.uniformsList,Xt,vn),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&Rt.setValue(nt,"center",ht.center),Rt.setValue(nt,"modelViewMatrix",ht.modelViewMatrix),Rt.setValue(nt,"normalMatrix",ht.normalMatrix),Rt.setValue(nt,"modelMatrix",ht.matrixWorld),Ue.isShaderMaterial||Ue.isRawShaderMaterial){const nn=Ue.uniformsGroups;for(let An=0,pn=nn.length;An<pn;An++)if(kn.isWebGL2){const Ut=nn[An];Jt.update(Ut,it),Jt.bind(Ut,it)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return it}function Mo(ye,qe){ye.ambientLightColor.needsUpdate=qe,ye.lightProbe.needsUpdate=qe,ye.directionalLights.needsUpdate=qe,ye.directionalLightShadows.needsUpdate=qe,ye.pointLights.needsUpdate=qe,ye.pointLightShadows.needsUpdate=qe,ye.spotLights.needsUpdate=qe,ye.spotLightShadows.needsUpdate=qe,ye.rectAreaLights.needsUpdate=qe,ye.hemisphereLights.needsUpdate=qe}function no(ye){return ye.isMeshLambertMaterial||ye.isMeshToonMaterial||ye.isMeshPhongMaterial||ye.isMeshStandardMaterial||ye.isShadowMaterial||ye.isShaderMaterial&&ye.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(ye,qe,ut){$t.get(ye.texture).__webglTexture=qe,$t.get(ye.depthTexture).__webglTexture=ut;const Ue=$t.get(ye);Ue.__hasExternalTextures=!0,Ue.__hasExternalTextures&&(Ue.__autoAllocateDepthBuffer=ut===void 0,Ue.__autoAllocateDepthBuffer||Yt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ye,qe){const ut=$t.get(ye);ut.__webglFramebuffer=qe,ut.__useDefaultFramebuffer=qe===void 0},this.setRenderTarget=function(ye,qe=0,ut=0){R=ye,T=qe,I=ut;let Ue=!0,ht=null,Dn=!1,Bn=!1;if(ye){const yr=$t.get(ye);yr.__useDefaultFramebuffer!==void 0?(Et.bindFramebuffer(36160,null),Ue=!1):yr.__webglFramebuffer===void 0?vn.setupRenderTarget(ye):yr.__hasExternalTextures&&vn.rebindTextures(ye,$t.get(ye.texture).__webglTexture,$t.get(ye.depthTexture).__webglTexture);const kr=ye.texture;(kr.isData3DTexture||kr.isDataArrayTexture||kr.isCompressedArrayTexture)&&(Bn=!0);const vr=$t.get(ye).__webglFramebuffer;ye.isWebGLCubeRenderTarget?(ht=vr[qe],Dn=!0):kn.isWebGL2&&ye.samples>0&&vn.useMultisampledRTT(ye)===!1?ht=$t.get(ye).__webglMultisampledFramebuffer:ht=vr,ee.copy(ye.viewport),_e.copy(ye.scissor),Q=ye.scissorTest}else ee.copy(Ee).multiplyScalar(Ie).floor(),_e.copy(Se).multiplyScalar(Ie).floor(),Q=Oe;if(Et.bindFramebuffer(36160,ht)&&kn.drawBuffers&&Ue&&Et.drawBuffers(ye,ht),Et.viewport(ee),Et.scissor(_e),Et.setScissorTest(Q),Dn){const yr=$t.get(ye.texture);nt.framebufferTexture2D(36160,36064,34069+qe,yr.__webglTexture,ut)}else if(Bn){const yr=$t.get(ye.texture),kr=qe||0;nt.framebufferTextureLayer(36160,36064,yr.__webglTexture,ut||0,kr)}k=-1},this.readRenderTargetPixels=function(ye,qe,ut,Ue,ht,Dn,Bn){if(!(ye&&ye.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _r=$t.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&Bn!==void 0&&(_r=_r[Bn]),_r){Et.bindFramebuffer(36160,_r);try{const yr=ye.texture,kr=yr.format,vr=yr.type;if(kr!==os&&Ce.convert(kr)!==nt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gr=vr===Ec&&(Yt.has("EXT_color_buffer_half_float")||kn.isWebGL2&&Yt.has("EXT_color_buffer_float"));if(vr!==ja&&Ce.convert(vr)!==nt.getParameter(35738)&&!(vr===oa&&(kn.isWebGL2||Yt.has("OES_texture_float")||Yt.has("WEBGL_color_buffer_float")))&&!gr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}qe>=0&&qe<=ye.width-Ue&&ut>=0&&ut<=ye.height-ht&&nt.readPixels(qe,ut,Ue,ht,Ce.convert(kr),Ce.convert(vr),Dn)}finally{const yr=R!==null?$t.get(R).__webglFramebuffer:null;Et.bindFramebuffer(36160,yr)}}},this.copyFramebufferToTexture=function(ye,qe,ut=0){const Ue=Math.pow(2,-ut),ht=Math.floor(qe.image.width*Ue),Dn=Math.floor(qe.image.height*Ue);vn.setTexture2D(qe,0),nt.copyTexSubImage2D(3553,ut,0,0,ye.x,ye.y,ht,Dn),Et.unbindTexture()},this.copyTextureToTexture=function(ye,qe,ut,Ue=0){const ht=qe.image.width,Dn=qe.image.height,Bn=Ce.convert(ut.format),_r=Ce.convert(ut.type);vn.setTexture2D(ut,0),nt.pixelStorei(37440,ut.flipY),nt.pixelStorei(37441,ut.premultiplyAlpha),nt.pixelStorei(3317,ut.unpackAlignment),qe.isDataTexture?nt.texSubImage2D(3553,Ue,ye.x,ye.y,ht,Dn,Bn,_r,qe.image.data):qe.isCompressedTexture?nt.compressedTexSubImage2D(3553,Ue,ye.x,ye.y,qe.mipmaps[0].width,qe.mipmaps[0].height,Bn,qe.mipmaps[0].data):nt.texSubImage2D(3553,Ue,ye.x,ye.y,Bn,_r,qe.image),Ue===0&&ut.generateMipmaps&&nt.generateMipmap(3553),Et.unbindTexture()},this.copyTextureToTexture3D=function(ye,qe,ut,Ue,ht=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Dn=ye.max.x-ye.min.x+1,Bn=ye.max.y-ye.min.y+1,_r=ye.max.z-ye.min.z+1,yr=Ce.convert(Ue.format),kr=Ce.convert(Ue.type);let vr;if(Ue.isData3DTexture)vn.setTexture3D(Ue,0),vr=32879;else if(Ue.isDataArrayTexture)vn.setTexture2DArray(Ue,0),vr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}nt.pixelStorei(37440,Ue.flipY),nt.pixelStorei(37441,Ue.premultiplyAlpha),nt.pixelStorei(3317,Ue.unpackAlignment);const gr=nt.getParameter(3314),ei=nt.getParameter(32878),Wi=nt.getParameter(3316),zi=nt.getParameter(3315),Zi=nt.getParameter(32877),Ge=ut.isCompressedTexture?ut.mipmaps[0]:ut.image;nt.pixelStorei(3314,Ge.width),nt.pixelStorei(32878,Ge.height),nt.pixelStorei(3316,ye.min.x),nt.pixelStorei(3315,ye.min.y),nt.pixelStorei(32877,ye.min.z),ut.isDataTexture||ut.isData3DTexture?nt.texSubImage3D(vr,ht,qe.x,qe.y,qe.z,Dn,Bn,_r,yr,kr,Ge.data):ut.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),nt.compressedTexSubImage3D(vr,ht,qe.x,qe.y,qe.z,Dn,Bn,_r,yr,Ge.data)):nt.texSubImage3D(vr,ht,qe.x,qe.y,qe.z,Dn,Bn,_r,yr,kr,Ge),nt.pixelStorei(3314,gr),nt.pixelStorei(32878,ei),nt.pixelStorei(3316,Wi),nt.pixelStorei(3315,zi),nt.pixelStorei(32877,Zi),ht===0&&Ue.generateMipmaps&&nt.generateMipmap(vr),Et.unbindTexture()},this.initTexture=function(ye){ye.isCubeTexture?vn.setTextureCube(ye,0):ye.isData3DTexture?vn.setTexture3D(ye,0):ye.isDataArrayTexture||ye.isCompressedArrayTexture?vn.setTexture2DArray(ye,0):vn.setTexture2D(ye,0),Et.unbindTexture()},this.resetState=function(){T=0,I=0,R=null,Et.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class dx extends ny{}dx.prototype.isWebGL1Renderer=!0;class hx extends oo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class px{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=gd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=_s()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const No=new ke;class Bh{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)No.fromBufferAttribute(this,t),No.applyMatrix4(e),this.setXYZ(t,No.x,No.y,No.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)No.fromBufferAttribute(this,t),No.applyNormalMatrix(e),this.setXYZ(t,No.x,No.y,No.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)No.fromBufferAttribute(this,t),No.transformDirection(e),this.setXYZ(t,No.x,No.y,No.z);return this}setX(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Xi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ws(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ws(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ws(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ws(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xi(t,this.array),n=Xi(n,this.array),r=Xi(r,this.array),i=Xi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return new Bo(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const f_=new ke,d_=new Yi,h_=new Yi,mx=new ke,p_=new Ei;class _x extends ss{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ei,this.bindMatrixInverse=new Ei}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yi,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;d_.fromBufferAttribute(r.attributes.skinIndex,e),h_.fromBufferAttribute(r.attributes.skinWeight,e),f_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const s=h_.getComponent(i);if(s!==0){const a=d_.getComponent(i);p_.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(mx.copy(f_).applyMatrix4(p_),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ry extends oo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gx extends xo{constructor(e=null,t=1,n=1,r,i,s,a,u,f=To,l=To,p,d){super(null,s,a,u,f,l,r,i,p,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const m_=new Ei,yx=new Ei;class Mh{constructor(e=[],t=[]){this.uuid=_s(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ei)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ei;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=e.length;i<s;i++){const a=e[i]?e[i].matrixWorld:yx;m_.multiplyMatrices(a,t[i]),m_.toArray(n,i*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Mh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Gg(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new gx(t,e,e,os,oa);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const i=e.bones[n];let s=t[i];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),s=new ry),this.bones.push(s),this.boneInverses.push(new Ei().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const s=t[r];e.bones.push(s.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class __ extends Bo{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const g_=new Ei,y_=new Ei,_l=[],vx=new Ei,ec=new ss;class Ax extends ss{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new __(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let r=0;r<n;r++)this.setMatrixAt(r,vx)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ec.geometry=this.geometry,ec.material=this.material,ec.material!==void 0)for(let i=0;i<r;i++){this.getMatrixAt(i,g_),y_.multiplyMatrices(n,g_),ec.matrixWorld=y_,ec.raycast(e,_l);for(let s=0,a=_l.length;s<a;s++){const u=_l[s];u.instanceId=i,u.object=this,t.push(u)}_l.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new __(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class iy extends Ss{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _i(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const v_=new ke,A_=new ke,b_=new Ei,Jf=new Th,gl=new Uu;class Dh extends oo{constructor(e=new gs,t=new iy){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,i=t.count;r<i;r++)v_.fromBufferAttribute(t,r-1),A_.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=v_.distanceTo(A_);e.setAttribute("lineDistance",new zs(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),gl.copy(n.boundingSphere),gl.applyMatrix4(r),gl.radius+=i,e.ray.intersectsSphere(gl)===!1)return;b_.copy(r).invert(),Jf.copy(e.ray).applyMatrix4(b_);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=new ke,l=new ke,p=new ke,d=new ke,_=this.isLineSegments?2:1,A=n.index,v=n.attributes.position;if(A!==null){const T=Math.max(0,s.start),I=Math.min(A.count,s.start+s.count);for(let R=T,k=I-1;R<k;R+=_){const K=A.getX(R),ee=A.getX(R+1);if(f.fromBufferAttribute(v,K),l.fromBufferAttribute(v,ee),Jf.distanceSqToSegment(f,l,d,p)>u)continue;d.applyMatrix4(this.matrixWorld);const Q=e.ray.origin.distanceTo(d);Q<e.near||Q>e.far||t.push({distance:Q,point:p.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}else{const T=Math.max(0,s.start),I=Math.min(v.count,s.start+s.count);for(let R=T,k=I-1;R<k;R+=_){if(f.fromBufferAttribute(v,R),l.fromBufferAttribute(v,R+1),Jf.distanceSqToSegment(f,l,d,p)>u)continue;d.applyMatrix4(this.matrixWorld);const ee=e.ray.origin.distanceTo(d);ee<e.near||ee>e.far||t.push({distance:ee,point:p.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}const E_=new ke,T_=new ke;class bx extends Dh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,i=t.count;r<i;r+=2)E_.fromBufferAttribute(t,r),T_.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+E_.distanceTo(T_);e.setAttribute("lineDistance",new zs(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ex extends Dh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oy extends Ss{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _i(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const w_=new Ei,bd=new Th,yl=new Uu,vl=new ke;class Tx extends oo{constructor(e=new gs,t=new oy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),yl.copy(n.boundingSphere),yl.applyMatrix4(r),yl.radius+=i,e.ray.intersectsSphere(yl)===!1)return;w_.copy(r).invert(),bd.copy(e.ray).applyMatrix4(w_);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=n.index,p=n.attributes.position;if(f!==null){const d=Math.max(0,s.start),_=Math.min(f.count,s.start+s.count);for(let A=d,E=_;A<E;A++){const v=f.getX(A);vl.fromBufferAttribute(p,v),C_(vl,v,u,r,e,t,this)}}else{const d=Math.max(0,s.start),_=Math.min(p.count,s.start+s.count);for(let A=d,E=_;A<E;A++)vl.fromBufferAttribute(p,A),C_(vl,A,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}function C_(o,e,t,n,r,i,s){const a=bd.distanceSqToPoint(o);if(a<t){const u=new ke;bd.closestPointToPoint(o,u),u.applyMatrix4(n);const f=r.ray.origin.distanceTo(u);if(f<r.near||f>r.far)return;i.push({distance:f,distanceToRay:Math.sqrt(a),point:u,index:e,face:null,object:s})}}class Rh extends Ss{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _i(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ug,this.normalScale=new Xr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Za extends Rh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Po(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _i(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new _i(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _i(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function $s(o,e,t){return sy(o)?new o.constructor(o.subarray(e,t!==void 0?t:o.length)):o.slice(e,t)}function Al(o,e,t){return!o||!t&&o.constructor===e?o:typeof e.BYTES_PER_ELEMENT=="number"?new e(o):Array.prototype.slice.call(o)}function sy(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)}function wx(o){function e(r,i){return o[r]-o[i]}const t=o.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function S_(o,e,t){const n=o.length,r=new o.constructor(n);for(let i=0,s=0;s!==n;++i){const a=t[i]*e;for(let u=0;u!==e;++u)r[s++]=o[a+u]}return r}function ay(o,e,t,n){let r=1,i=o[0];for(;i!==void 0&&i[n]===void 0;)i=o[r++];if(i===void 0)return;let s=i[n];if(s!==void 0)if(Array.isArray(s))do s=i[n],s!==void 0&&(e.push(i.time),t.push.apply(t,s)),i=o[r++];while(i!==void 0);else if(s.toArray!==void 0)do s=i[n],s!==void 0&&(e.push(i.time),s.toArray(t,t.length)),i=o[r++];while(i!==void 0);else do s=i[n],s!==void 0&&(e.push(i.time),t.push(s)),i=o[r++];while(i!==void 0)}class Nc{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=i)){const a=t[1];e<a&&(n=2,i=a);for(let u=n-2;;){if(i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0;break n}break e}for(;n<s;){const a=n+s>>>1;e<t[a]?s=a:n=a+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Cx extends Nc{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bm,endingEnd:Bm}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],u=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Mm:i=e,a=2*t-n;break;case Dm:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Mm:s=e,u=2*n-t;break;case Dm:s=1,u=n+r[1]-r[0];break;default:s=e-1,u=t}const f=(n-t)*.5,l=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(u-n),this._offsetPrev=i*l,this._offsetNext=s*l}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,l=this._offsetPrev,p=this._offsetNext,d=this._weightPrev,_=this._weightNext,A=(n-t)/(r-t),E=A*A,v=E*A,T=-d*v+2*d*E-d*A,I=(1+d)*v+(-1.5-2*d)*E+(-.5+d)*A+1,R=(-1-_)*v+(1.5+_)*E+.5*A,k=_*v-_*E;for(let K=0;K!==a;++K)i[K]=T*s[l+K]+I*s[f+K]+R*s[u+K]+k*s[p+K];return i}}class Sx extends Nc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,l=(n-t)/(r-t),p=1-l;for(let d=0;d!==a;++d)i[d]=s[f+d]*p+s[u+d]*l;return i}}class xx extends Nc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ds{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Al(t,this.TimeBufferType),this.values=Al(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Al(e.times,Array),values:Al(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new xx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Sx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Cx(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Tc:t=this.InterpolantFactoryMethodDiscrete;break;case Pu:t=this.InterpolantFactoryMethodLinear;break;case bf:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tc;case this.InterpolantFactoryMethodLinear:return Pu;case this.InterpolantFactoryMethodSmooth:return bf}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;s!==-1&&n[s]>t;)--s;if(++s,i!==0||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const a=this.getValueSize();this.times=$s(n,i,s),this.values=$s(this.values,i*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==i;a++){const u=n[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),e=!1;break}if(s!==null&&s>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,s),e=!1;break}s=u}if(r!==void 0&&sy(r))for(let a=0,u=r.length;a!==u;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=$s(this.times),t=$s(this.values),n=this.getValueSize(),r=this.getInterpolation()===bf,i=e.length-1;let s=1;for(let a=1;a<i;++a){let u=!1;const f=e[a],l=e[a+1];if(f!==l&&(a!==1||f!==e[0]))if(r)u=!0;else{const p=a*n,d=p-n,_=p+n;for(let A=0;A!==n;++A){const E=t[p+A];if(E!==t[d+A]||E!==t[_+A]){u=!0;break}}}if(u){if(a!==s){e[s]=e[a];const p=a*n,d=s*n;for(let _=0;_!==n;++_)t[d+_]=t[p+_]}++s}}if(i>0){e[s]=e[i];for(let a=i*n,u=s*n,f=0;f!==n;++f)t[u+f]=t[a+f];++s}return s!==e.length?(this.times=$s(e,0,s),this.values=$s(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=$s(this.times,0),t=$s(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ds.prototype.TimeBufferType=Float32Array;Ds.prototype.ValueBufferType=Float32Array;Ds.prototype.DefaultInterpolation=Pu;class ku extends Ds{}ku.prototype.ValueTypeName="bool";ku.prototype.ValueBufferType=Array;ku.prototype.DefaultInterpolation=Tc;ku.prototype.InterpolantFactoryMethodLinear=void 0;ku.prototype.InterpolantFactoryMethodSmooth=void 0;class uy extends Ds{}uy.prototype.ValueTypeName="color";class xc extends Ds{}xc.prototype.ValueTypeName="number";class Bx extends Nc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=(n-t)/(r-t);let f=e*a;for(let l=f+a;f!==l;f+=4)Ms.slerpFlat(i,0,s,f-a,s,f,u);return i}}class qa extends Ds{InterpolantFactoryMethodLinear(e){return new Bx(this.times,this.values,this.getValueSize(),e)}}qa.prototype.ValueTypeName="quaternion";qa.prototype.DefaultInterpolation=Pu;qa.prototype.InterpolantFactoryMethodSmooth=void 0;class Hu extends Ds{}Hu.prototype.ValueTypeName="string";Hu.prototype.ValueBufferType=Array;Hu.prototype.DefaultInterpolation=Tc;Hu.prototype.InterpolantFactoryMethodLinear=void 0;Hu.prototype.InterpolantFactoryMethodSmooth=void 0;class Bc extends Ds{}Bc.prototype.ValueTypeName="vector";class Mx{constructor(e,t=-1,n,r=qE){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=_s(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(Rx(n[s]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,s=n.length;i!==s;++i)t.push(Ds.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let a=0;a<i;a++){let u=[],f=[];u.push((a+i-1)%i,a,(a+1)%i),f.push(0,1,0);const l=wx(u);u=S_(u,1,l),f=S_(f,1,l),!r&&u[0]===0&&(u.push(i),f.push(f[0])),s.push(new xc(".morphTargetInfluences["+t[a].name+"]",u,f).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,u=e.length;a<u;a++){const f=e[a],l=f.name.match(i);if(l&&l.length>1){const p=l[1];let d=r[p];d||(r[p]=d=[]),d.push(f)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(p,d,_,A,E){if(_.length!==0){const v=[],T=[];ay(_,v,T,A),v.length!==0&&E.push(new p(d,v,T))}},r=[],i=e.name||"default",s=e.fps||30,a=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const d=f[p].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const _={};let A;for(A=0;A<d.length;A++)if(d[A].morphTargets)for(let E=0;E<d[A].morphTargets.length;E++)_[d[A].morphTargets[E]]=-1;for(const E in _){const v=[],T=[];for(let I=0;I!==d[A].morphTargets.length;++I){const R=d[A];v.push(R.time),T.push(R.morphTarget===E?1:0)}r.push(new xc(".morphTargetInfluence["+E+"]",v,T))}u=_.length*s}else{const _=".bones["+t[p].name+"]";n(Bc,_+".position",d,"pos",r),n(qa,_+".quaternion",d,"rot",r),n(Bc,_+".scale",d,"scl",r)}}return r.length===0?null:new this(i,u,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Dx(o){switch(o.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xc;case"vector":case"vector2":case"vector3":case"vector4":return Bc;case"color":return uy;case"quaternion":return qa;case"bool":case"boolean":return ku;case"string":return Hu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+o)}function Rx(o){if(o.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Dx(o.type);if(o.times===void 0){const t=[],n=[];ay(o.keys,t,n,"value"),o.times=t,o.values=n}return e.parse!==void 0?e.parse(o):new e(o.name,o.times,o.values,o.interpolation)}const Lu={enabled:!1,files:{},add:function(o,e){this.enabled!==!1&&(this.files[o]=e)},get:function(o){if(this.enabled!==!1)return this.files[o]},remove:function(o){delete this.files[o]},clear:function(){this.files={}}};class Ix{constructor(e,t,n){const r=this;let i=!1,s=0,a=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(l){a++,i===!1&&r.onStart!==void 0&&r.onStart(l,s,a),i=!0},this.itemEnd=function(l){s++,r.onProgress!==void 0&&r.onProgress(l,s,a),s===a&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(l){r.onError!==void 0&&r.onError(l)},this.resolveURL=function(l){return u?u(l):l},this.setURLModifier=function(l){return u=l,this},this.addHandler=function(l,p){return f.push(l,p),this},this.removeHandler=function(l){const p=f.indexOf(l);return p!==-1&&f.splice(p,2),this},this.getHandler=function(l){for(let p=0,d=f.length;p<d;p+=2){const _=f[p],A=f[p+1];if(_.global&&(_.lastIndex=0),_.test(l))return A}return null}}}const Px=new Ix;class Wu{constructor(e){this.manager=e!==void 0?e:Px,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ns={};class Fx extends Error{constructor(e,t){super(e),this.response=t}}class Nl extends Wu{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Lu.get(e);if(i!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(Ns[e]!==void 0){Ns[e].push({onLoad:t,onProgress:n,onError:r});return}Ns[e]=[],Ns[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const l=Ns[e],p=f.body.getReader(),d=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),_=d?parseInt(d):0,A=_!==0;let E=0;const v=new ReadableStream({start(T){I();function I(){p.read().then(({done:R,value:k})=>{if(R)T.close();else{E+=k.byteLength;const K=new ProgressEvent("progress",{lengthComputable:A,loaded:E,total:_});for(let ee=0,_e=l.length;ee<_e;ee++){const Q=l[ee];Q.onProgress&&Q.onProgress(K)}T.enqueue(k),I()}})}}});return new Response(v)}else throw new Fx(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(l=>new DOMParser().parseFromString(l,a));case"json":return f.json();default:if(a===void 0)return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),d=p&&p[1]?p[1].toLowerCase():void 0,_=new TextDecoder(d);return f.arrayBuffer().then(A=>_.decode(A))}}}).then(f=>{Lu.add(e,f);const l=Ns[e];delete Ns[e];for(let p=0,d=l.length;p<d;p++){const _=l[p];_.onLoad&&_.onLoad(f)}}).catch(f=>{const l=Ns[e];if(l===void 0)throw this.manager.itemError(e),f;delete Ns[e];for(let p=0,d=l.length;p<d;p++){const _=l[p];_.onError&&_.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Lx extends Wu{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Lu.get(e);if(s!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(s),i.manager.itemEnd(e)},0),s;const a=Sc("img");function u(){l(),Lu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function f(p){l(),r&&r(p),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",u,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Ox extends Wu{constructor(e){super(e)}load(e,t,n,r){const i=new xo,s=new Lx(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){i.image=a,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i}}class sf extends oo{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new _i(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const qf=new Ei,x_=new ke,B_=new ke;class Ih{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xr(512,512),this.map=null,this.mapPass=null,this.matrix=new Ei,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wh,this._frameExtents=new Xr(1,1),this._viewportCount=1,this._viewports=[new Yi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;x_.setFromMatrixPosition(e.matrixWorld),t.position.copy(x_),B_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(B_),t.updateMatrixWorld(),qf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qf),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qf)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Nx extends Ih{constructor(){super(new Ho(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Cc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ux extends sf{constructor(e,t,n=0,r=Math.PI/3,i=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.target=new oo,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new Nx}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const M_=new Ei,tc=new ke,Xf=new ke;class Gx extends Ih{constructor(){super(new Ho(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xr(4,2),this._viewportCount=6,this._viewports=[new Yi(2,1,1,1),new Yi(0,1,1,1),new Yi(3,1,1,1),new Yi(1,1,1,1),new Yi(3,0,1,1),new Yi(1,0,1,1)],this._cubeDirections=[new ke(1,0,0),new ke(-1,0,0),new ke(0,0,1),new ke(0,0,-1),new ke(0,1,0),new ke(0,-1,0)],this._cubeUps=[new ke(0,1,0),new ke(0,1,0),new ke(0,1,0),new ke(0,1,0),new ke(0,0,1),new ke(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),tc.setFromMatrixPosition(e.matrixWorld),n.position.copy(tc),Xf.copy(n.position),Xf.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Xf),n.updateMatrixWorld(),r.makeTranslation(-tc.x,-tc.y,-tc.z),M_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(M_)}}class kx extends sf{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Gx}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Hx extends Ih{constructor(){super(new Sh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ed extends sf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.target=new oo,this.shadow=new Hx}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Wx extends sf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ua{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Vx extends Wu{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Lu.get(e);if(s!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(s),i.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(u){Lu.add(e,u),t&&t(u),i.manager.itemEnd(e)}).catch(function(u){r&&r(u),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}}const Ph="\\[\\]\\.:\\/",jx=new RegExp("["+Ph+"]","g"),Fh="[^"+Ph+"]",zx="[^"+Ph.replace("\\.","")+"]",Kx=/((?:WC+[\/:])*)/.source.replace("WC",Fh),Jx=/(WCOD+)?/.source.replace("WCOD",zx),qx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fh),Xx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fh),Yx=new RegExp("^"+Kx+Jx+qx+Xx+"$"),$x=["material","materials","bones","map"];class Zx{constructor(e,t,n){const r=n||Ji.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Ji{constructor(e,t,n){this.path=t,this.parsedPath=n||Ji.parseTrackName(t),this.node=Ji.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ji.Composite(e,t,n):new Ji(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jx,"")}static parseTrackName(e){const t=Yx.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const i=n.nodeName.substring(r+1);$x.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(i){for(let s=0;s<i.length;s++){const a=i[s];if(a.name===t||a.uuid===t)return a;const u=n(a.children);if(u)return u}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Ji.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let f=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let l=0;l<e.length;l++)if(e[l].name===f){f=l;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else s.fromArray!==void 0&&s.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ji.Composite=Zx;Ji.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ji.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ji.prototype.GetterByBindingType=[Ji.prototype._getValue_direct,Ji.prototype._getValue_array,Ji.prototype._getValue_arrayElement,Ji.prototype._getValue_toArray];Ji.prototype.SetterByBindingTypeAndVersioning=[[Ji.prototype._setValue_direct,Ji.prototype._setValue_direct_setNeedsUpdate,Ji.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_array,Ji.prototype._setValue_array_setNeedsUpdate,Ji.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_arrayElement,Ji.prototype._setValue_arrayElement_setNeedsUpdate,Ji.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ji.prototype._setValue_fromArray,Ji.prototype._setValue_fromArray_setNeedsUpdate,Ji.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class D_{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Po(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bh);const R_={type:"change"},Yf={type:"start"},I_={type:"end"};class Qx extends Ya{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ke,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:tu.ROTATE,MIDDLE:tu.DOLLY,RIGHT:tu.PAN},this.touches={ONE:nu.ROTATE,TWO:nu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ce){Ce.addEventListener("keydown",ar),this._domElementKeyEvents=Ce},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(R_),n.update(),i=r.NONE},this.update=function(){const Ce=new ke,Ne=new Ms().setFromUnitVectors(e.up,new ke(0,1,0)),Jt=Ne.clone().invert(),Zt=new ke,Bt=new Ms,zt=2*Math.PI;return function(){const rr=n.object.position;Ce.copy(rr).sub(n.target),Ce.applyQuaternion(Ne),a.setFromVector3(Ce),n.autoRotate&&i===r.NONE&&ne(_e()),n.enableDamping?(a.theta+=u.theta*n.dampingFactor,a.phi+=u.phi*n.dampingFactor):(a.theta+=u.theta,a.phi+=u.phi);let Cn=n.minAzimuthAngle,Kr=n.maxAzimuthAngle;return isFinite(Cn)&&isFinite(Kr)&&(Cn<-Math.PI?Cn+=zt:Cn>Math.PI&&(Cn-=zt),Kr<-Math.PI?Kr+=zt:Kr>Math.PI&&(Kr-=zt),Cn<=Kr?a.theta=Math.max(Cn,Math.min(Kr,a.theta)):a.theta=a.theta>(Cn+Kr)/2?Math.max(Cn,a.theta):Math.min(Kr,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=f,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(l,n.dampingFactor):n.target.add(l),Ce.setFromSpherical(a),Ce.applyQuaternion(Jt),rr.copy(n.target).add(Ce),n.object.lookAt(n.target),n.enableDamping===!0?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,l.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),l.set(0,0,0)),f=1,p||Zt.distanceToSquared(n.object.position)>s||8*(1-Bt.dot(n.object.quaternion))>s?(n.dispatchEvent(R_),Zt.copy(n.object.position),Bt.copy(n.object.quaternion),p=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ot),n.domElement.removeEventListener("pointerdown",Cr),n.domElement.removeEventListener("pointercancel",Li),n.domElement.removeEventListener("wheel",vi),n.domElement.removeEventListener("pointermove",Qr),n.domElement.removeEventListener("pointerup",yi),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ar)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const s=1e-6,a=new D_,u=new D_;let f=1;const l=new ke;let p=!1;const d=new Xr,_=new Xr,A=new Xr,E=new Xr,v=new Xr,T=new Xr,I=new Xr,R=new Xr,k=new Xr,K=[],ee={};function _e(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Q(){return Math.pow(.95,n.zoomSpeed)}function ne(Ce){u.theta-=Ce}function de(Ce){u.phi-=Ce}const Ie=function(){const Ce=new ke;return function(Jt,Zt){Ce.setFromMatrixColumn(Zt,0),Ce.multiplyScalar(-Jt),l.add(Ce)}}(),Pe=function(){const Ce=new ke;return function(Jt,Zt){n.screenSpacePanning===!0?Ce.setFromMatrixColumn(Zt,1):(Ce.setFromMatrixColumn(Zt,0),Ce.crossVectors(n.object.up,Ce)),Ce.multiplyScalar(Jt),l.add(Ce)}}(),Te=function(){const Ce=new ke;return function(Jt,Zt){const Bt=n.domElement;if(n.object.isPerspectiveCamera){const zt=n.object.position;Ce.copy(zt).sub(n.target);let Qt=Ce.length();Qt*=Math.tan(n.object.fov/2*Math.PI/180),Ie(2*Jt*Qt/Bt.clientHeight,n.object.matrix),Pe(2*Zt*Qt/Bt.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(Ie(Jt*(n.object.right-n.object.left)/n.object.zoom/Bt.clientWidth,n.object.matrix),Pe(Zt*(n.object.top-n.object.bottom)/n.object.zoom/Bt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function Ee(Ce){n.object.isPerspectiveCamera?f/=Ce:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*Ce)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Se(Ce){n.object.isPerspectiveCamera?f*=Ce:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/Ce)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Oe(Ce){d.set(Ce.clientX,Ce.clientY)}function We(Ce){I.set(Ce.clientX,Ce.clientY)}function j(Ce){E.set(Ce.clientX,Ce.clientY)}function _t(Ce){_.set(Ce.clientX,Ce.clientY),A.subVectors(_,d).multiplyScalar(n.rotateSpeed);const Ne=n.domElement;ne(2*Math.PI*A.x/Ne.clientHeight),de(2*Math.PI*A.y/Ne.clientHeight),d.copy(_),n.update()}function Qe(Ce){R.set(Ce.clientX,Ce.clientY),k.subVectors(R,I),k.y>0?Ee(Q()):k.y<0&&Se(Q()),I.copy(R),n.update()}function Je(Ce){v.set(Ce.clientX,Ce.clientY),T.subVectors(v,E).multiplyScalar(n.panSpeed),Te(T.x,T.y),E.copy(v),n.update()}function ze(Ce){Ce.deltaY<0?Se(Q()):Ce.deltaY>0&&Ee(Q()),n.update()}function ct(Ce){let Ne=!1;switch(Ce.code){case n.keys.UP:Ce.ctrlKey||Ce.metaKey||Ce.shiftKey?de(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Te(0,n.keyPanSpeed),Ne=!0;break;case n.keys.BOTTOM:Ce.ctrlKey||Ce.metaKey||Ce.shiftKey?de(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Te(0,-n.keyPanSpeed),Ne=!0;break;case n.keys.LEFT:Ce.ctrlKey||Ce.metaKey||Ce.shiftKey?ne(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Te(n.keyPanSpeed,0),Ne=!0;break;case n.keys.RIGHT:Ce.ctrlKey||Ce.metaKey||Ce.shiftKey?ne(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Te(-n.keyPanSpeed,0),Ne=!0;break}Ne&&(Ce.preventDefault(),n.update())}function He(){if(K.length===1)d.set(K[0].pageX,K[0].pageY);else{const Ce=.5*(K[0].pageX+K[1].pageX),Ne=.5*(K[0].pageY+K[1].pageY);d.set(Ce,Ne)}}function P(){if(K.length===1)E.set(K[0].pageX,K[0].pageY);else{const Ce=.5*(K[0].pageX+K[1].pageX),Ne=.5*(K[0].pageY+K[1].pageY);E.set(Ce,Ne)}}function nt(){const Ce=K[0].pageX-K[1].pageX,Ne=K[0].pageY-K[1].pageY,Jt=Math.sqrt(Ce*Ce+Ne*Ne);I.set(0,Jt)}function Fn(){n.enableZoom&&nt(),n.enablePan&&P()}function Yt(){n.enableZoom&&nt(),n.enableRotate&&He()}function kn(Ce){if(K.length==1)_.set(Ce.pageX,Ce.pageY);else{const Jt=_n(Ce),Zt=.5*(Ce.pageX+Jt.x),Bt=.5*(Ce.pageY+Jt.y);_.set(Zt,Bt)}A.subVectors(_,d).multiplyScalar(n.rotateSpeed);const Ne=n.domElement;ne(2*Math.PI*A.x/Ne.clientHeight),de(2*Math.PI*A.y/Ne.clientHeight),d.copy(_)}function Et(Ce){if(K.length===1)v.set(Ce.pageX,Ce.pageY);else{const Ne=_n(Ce),Jt=.5*(Ce.pageX+Ne.x),Zt=.5*(Ce.pageY+Ne.y);v.set(Jt,Zt)}T.subVectors(v,E).multiplyScalar(n.panSpeed),Te(T.x,T.y),E.copy(v)}function dn(Ce){const Ne=_n(Ce),Jt=Ce.pageX-Ne.x,Zt=Ce.pageY-Ne.y,Bt=Math.sqrt(Jt*Jt+Zt*Zt);R.set(0,Bt),k.set(0,Math.pow(R.y/I.y,n.zoomSpeed)),Ee(k.y),I.copy(R)}function $t(Ce){n.enableZoom&&dn(Ce),n.enablePan&&Et(Ce)}function vn(Ce){n.enableZoom&&dn(Ce),n.enableRotate&&kn(Ce)}function Cr(Ce){n.enabled!==!1&&(K.length===0&&(n.domElement.setPointerCapture(Ce.pointerId),n.domElement.addEventListener("pointermove",Qr),n.domElement.addEventListener("pointerup",yi)),St(Ce),Ce.pointerType==="touch"?Ae(Ce):Sr(Ce))}function Qr(Ce){n.enabled!==!1&&(Ce.pointerType==="touch"?fe(Ce):Mn(Ce))}function yi(Ce){Dt(Ce),K.length===0&&(n.domElement.releasePointerCapture(Ce.pointerId),n.domElement.removeEventListener("pointermove",Qr),n.domElement.removeEventListener("pointerup",yi)),n.dispatchEvent(I_),i=r.NONE}function Li(Ce){Dt(Ce)}function Sr(Ce){let Ne;switch(Ce.button){case 0:Ne=n.mouseButtons.LEFT;break;case 1:Ne=n.mouseButtons.MIDDLE;break;case 2:Ne=n.mouseButtons.RIGHT;break;default:Ne=-1}switch(Ne){case tu.DOLLY:if(n.enableZoom===!1)return;We(Ce),i=r.DOLLY;break;case tu.ROTATE:if(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey){if(n.enablePan===!1)return;j(Ce),i=r.PAN}else{if(n.enableRotate===!1)return;Oe(Ce),i=r.ROTATE}break;case tu.PAN:if(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey){if(n.enableRotate===!1)return;Oe(Ce),i=r.ROTATE}else{if(n.enablePan===!1)return;j(Ce),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(Yf)}function Mn(Ce){switch(i){case r.ROTATE:if(n.enableRotate===!1)return;_t(Ce);break;case r.DOLLY:if(n.enableZoom===!1)return;Qe(Ce);break;case r.PAN:if(n.enablePan===!1)return;Je(Ce);break}}function vi(Ce){n.enabled===!1||n.enableZoom===!1||i!==r.NONE||(Ce.preventDefault(),n.dispatchEvent(Yf),ze(Ce),n.dispatchEvent(I_))}function ar(Ce){n.enabled===!1||n.enablePan===!1||ct(Ce)}function Ae(Ce){switch(Nt(Ce),K.length){case 1:switch(n.touches.ONE){case nu.ROTATE:if(n.enableRotate===!1)return;He(),i=r.TOUCH_ROTATE;break;case nu.PAN:if(n.enablePan===!1)return;P(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case nu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Fn(),i=r.TOUCH_DOLLY_PAN;break;case nu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Yt(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(Yf)}function fe(Ce){switch(Nt(Ce),i){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;kn(Ce),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;Et(Ce),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;$t(Ce),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;vn(Ce),n.update();break;default:i=r.NONE}}function ot(Ce){n.enabled!==!1&&Ce.preventDefault()}function St(Ce){K.push(Ce)}function Dt(Ce){delete ee[Ce.pointerId];for(let Ne=0;Ne<K.length;Ne++)if(K[Ne].pointerId==Ce.pointerId){K.splice(Ne,1);return}}function Nt(Ce){let Ne=ee[Ce.pointerId];Ne===void 0&&(Ne=new Xr,ee[Ce.pointerId]=Ne),Ne.set(Ce.pageX,Ce.pageY)}function _n(Ce){const Ne=Ce.pointerId===K[0].pointerId?K[1]:K[0];return ee[Ne.pointerId]}n.domElement.addEventListener("contextmenu",ot),n.domElement.addEventListener("pointerdown",Cr),n.domElement.addEventListener("pointercancel",Li),n.domElement.addEventListener("wheel",vi,{passive:!1}),this.update()}}class eB extends Wu{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new oB(t)}),this.register(function(t){return new dB(t)}),this.register(function(t){return new hB(t)}),this.register(function(t){return new aB(t)}),this.register(function(t){return new uB(t)}),this.register(function(t){return new cB(t)}),this.register(function(t){return new lB(t)}),this.register(function(t){return new iB(t)}),this.register(function(t){return new fB(t)}),this.register(function(t){return new sB(t)}),this.register(function(t){return new nB(t)}),this.register(function(t){return new pB(t)}),this.register(function(t){return new mB(t)})}load(e,t,n,r){const i=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=Ua.extractUrlBase(e),this.manager.itemStart(e);const a=function(f){r?r(f):console.error(f),i.manager.itemError(e),i.manager.itemEnd(e)},u=new Nl(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{i.parse(f,s,function(l){t(l),i.manager.itemEnd(e)},a)}catch(l){a(l)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},a={};if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ua.decodeText(new Uint8Array(e,0,4))===cy){try{s[Gi.KHR_BINARY_GLTF]=new _B(e)}catch(l){r&&r(l);return}i=JSON.parse(s[Gi.KHR_BINARY_GLTF].content)}else i=JSON.parse(Ua.decodeText(new Uint8Array(e)));else i=e;if(i.asset===void 0||i.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new MB(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const l=this.pluginCallbacks[f](u);a[l.name]=l,s[l.name]=!0}if(i.extensionsUsed)for(let f=0;f<i.extensionsUsed.length;++f){const l=i.extensionsUsed[f],p=i.extensionsRequired||[];switch(l){case Gi.KHR_MATERIALS_UNLIT:s[l]=new rB;break;case Gi.KHR_DRACO_MESH_COMPRESSION:s[l]=new gB(i,this.dracoLoader);break;case Gi.KHR_TEXTURE_TRANSFORM:s[l]=new yB;break;case Gi.KHR_MESH_QUANTIZATION:s[l]=new vB;break;default:p.indexOf(l)>=0&&a[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function tB(){let o={};return{get:function(e){return o[e]},add:function(e,t){o[e]=t},remove:function(e){delete o[e]},removeAll:function(){o={}}}}const Gi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class nB{constructor(e){this.parser=e,this.name=Gi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,u=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let f;const l=new _i(16777215);u.color!==void 0&&l.fromArray(u.color);const p=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new Ed(l),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new kx(l),f.distance=p;break;case"spot":f=new Ux(l),f.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,ia(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(f),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(u){return n._getNodeRef(t.cache,a,u)})}}class rB{constructor(){this.name=Gi.KHR_MATERIALS_UNLIT}getMaterialType(){return Ia}extendParams(e,t,n){const r=[];e.color=new _i(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const s=i.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}i.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",i.baseColorTexture,Vi))}return Promise.all(r)}}class iB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class oB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Xr(a,a)}return Promise.all(i)}}class sB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class aB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new _i(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];return s.sheenColorFactor!==void 0&&t.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Vi)),s.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class uB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class cB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new _i(a[0],a[1],a[2]),Promise.all(i)}}class lB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class fB{constructor(e){this.parser=e,this.name=Gi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Za}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new _i(a[0],a[1],a[2]),s.specularColorTexture!==void 0&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,Vi)),Promise.all(i)}}class dB{constructor(e){this.parser=e,this.name=Gi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class hB{constructor(e){this.parser=e,this.name=Gi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],a=r.images[s.source];let u=n.textureLoader;if(a.uri){const f=n.options.manager.getHandler(a.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,s.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class pB{constructor(e){this.name=Gi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const u=r.byteOffset||0,f=r.byteLength||0,l=r.count,p=r.byteStride,d=new Uint8Array(a,u,f);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(l,p,d,r.mode,r.filter).then(function(_){return _.buffer}):s.ready.then(function(){const _=new ArrayBuffer(l*p);return s.decodeGltfBuffer(new Uint8Array(_),l,p,d,r.mode,r.filter),_})})}else return null}}class mB{constructor(e){this.name=Gi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const f of r.primitives)if(f.mode!==ns.TRIANGLES&&f.mode!==ns.TRIANGLE_STRIP&&f.mode!==ns.TRIANGLE_FAN&&f.mode!==void 0)return null;const s=n.extensions[this.name].attributes,a=[],u={};for(const f in s)a.push(this.parser.getDependency("accessor",s[f]).then(l=>(u[f]=l,u[f])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(f=>{const l=f.pop(),p=l.isGroup?l.children:[l],d=f[0].count,_=[];for(const A of p){const E=new Ei,v=new ke,T=new Ms,I=new ke(1,1,1),R=new Ax(A.geometry,A.material,d);for(let k=0;k<d;k++)u.TRANSLATION&&v.fromBufferAttribute(u.TRANSLATION,k),u.ROTATION&&T.fromBufferAttribute(u.ROTATION,k),u.SCALE&&I.fromBufferAttribute(u.SCALE,k),R.setMatrixAt(k,E.compose(v,T,I));for(const k in u)k!=="TRANSLATION"&&k!=="ROTATION"&&k!=="SCALE"&&A.geometry.setAttribute(k,u[k]);oo.prototype.copy.call(R,A),R.frustumCulled=!1,this.parser.assignFinalMaterial(R),_.push(R)}return l.isGroup?(l.clear(),l.add(..._),l):_[0]}))}}const cy="glTF",nc=12,P_={JSON:1313821514,BIN:5130562};class _B{constructor(e){this.name=Gi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,nc);if(this.header={magic:Ua.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cy)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-nc,r=new DataView(e,nc);let i=0;for(;i<n;){const s=r.getUint32(i,!0);i+=4;const a=r.getUint32(i,!0);if(i+=4,a===P_.JSON){const u=new Uint8Array(e,nc+i,s);this.content=Ua.decodeText(u)}else if(a===P_.BIN){const u=nc+i;this.body=e.slice(u,u+s)}i+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gB{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},u={},f={};for(const l in s){const p=Td[l]||l.toLowerCase();a[p]=s[l]}for(const l in e.attributes){const p=Td[l]||l.toLowerCase();if(s[l]!==void 0){const d=n.accessors[e.attributes[l]],_=Su[d.componentType];f[p]=_.name,u[p]=d.normalized===!0}}return t.getDependency("bufferView",i).then(function(l){return new Promise(function(p){r.decodeDracoFile(l,function(d){for(const _ in d.attributes){const A=d.attributes[_],E=u[_];E!==void 0&&(A.normalized=E)}p(d)},a,f)})})}}class yB{constructor(){this.name=Gi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class vB{constructor(){this.name=Gi.KHR_MESH_QUANTIZATION}}class ly extends Nc{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[i+s];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=a*2,f=a*3,l=r-t,p=(n-t)/l,d=p*p,_=d*p,A=e*f,E=A-f,v=-2*_+3*d,T=_-d,I=1-v,R=T-d+p;for(let k=0;k!==a;k++){const K=s[E+k+a],ee=s[E+k+u]*l,_e=s[A+k+a],Q=s[A+k]*l;i[k]=I*K+R*ee+v*_e+T*Q}return i}}const AB=new Ms;class bB extends ly{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return AB.fromArray(i).normalize().toArray(i),i}}const ns={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Su={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},F_={9728:To,9729:qo,9984:_d,9985:Lg,9986:Cl,9987:Va},L_={33071:is,33648:Ll,10497:Ru},$f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Td={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zs={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},EB={CUBICSPLINE:void 0,LINEAR:Pu,STEP:Tc},Zf={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function TB(o){return o.DefaultMaterial===void 0&&(o.DefaultMaterial=new Rh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ua})),o.DefaultMaterial}function rc(o,e,t){for(const n in t.extensions)o[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ia(o,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(o.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function wB(o,e,t){let n=!1,r=!1,i=!1;for(let f=0,l=e.length;f<l;f++){const p=e[f];if(p.POSITION!==void 0&&(n=!0),p.NORMAL!==void 0&&(r=!0),p.COLOR_0!==void 0&&(i=!0),n&&r&&i)break}if(!n&&!r&&!i)return Promise.resolve(o);const s=[],a=[],u=[];for(let f=0,l=e.length;f<l;f++){const p=e[f];if(n){const d=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):o.attributes.position;s.push(d)}if(r){const d=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):o.attributes.normal;a.push(d)}if(i){const d=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):o.attributes.color;u.push(d)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(u)]).then(function(f){const l=f[0],p=f[1],d=f[2];return n&&(o.morphAttributes.position=l),r&&(o.morphAttributes.normal=p),i&&(o.morphAttributes.color=d),o.morphTargetsRelative=!0,o})}function CB(o,e){if(o.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)o.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(o.morphTargetInfluences.length===t.length){o.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)o.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function SB(o){const e=o.extensions&&o.extensions[Gi.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+O_(e.attributes):t=o.indices+":"+O_(o.attributes)+":"+o.mode,t}function O_(o){let e="";const t=Object.keys(o).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+o[t[n]]+";";return e}function wd(o){switch(o){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function xB(o){return o.search(/\.jpe?g($|\?)/i)>0||o.search(/^data\:image\/jpeg/)===0?"image/jpeg":o.search(/\.webp($|\?)/i)>0||o.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const BB=new Ei;class MB{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tB,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&i<98?this.textureLoader=new Ox(this.options.manager):this.textureLoader=new Vx(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Nl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){const a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:n,userData:{}};rc(i,a,r),ia(a,r),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r].joints;for(let a=0,u=s.length;a<u;a++)e[s[a]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(s,a)=>{const u=this.associations.get(s);u!=null&&this.associations.set(a,u);for(const[f,l]of s.children.entries())i(l,a.children[f])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":r=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(i,s){return n.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(i,s){n.load(Ua.resolveURL(t.uri,r.path),i,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,i=t.byteOffset||0;return n.slice(i,i+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const s=$f[r.type],a=Su[r.componentType],u=r.normalized===!0,f=new a(r.count*s);return Promise.resolve(new Bo(f,s,u))}const i=[];return r.bufferView!==void 0?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),r.sparse!==void 0&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(s){const a=s[0],u=$f[r.type],f=Su[r.componentType],l=f.BYTES_PER_ELEMENT,p=l*u,d=r.byteOffset||0,_=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,A=r.normalized===!0;let E,v;if(_&&_!==p){const T=Math.floor(d/_),I="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count;let R=t.cache.get(I);R||(E=new f(a,T*_,r.count*_/l),R=new px(E,_/l),t.cache.add(I,R)),v=new Bh(R,u,d%_/l,A)}else a===null?E=new f(r.count*u):E=new f(a,d,r.count*u),v=new Bo(E,u,A);if(r.sparse!==void 0){const T=$f.SCALAR,I=Su[r.sparse.indices.componentType],R=r.sparse.indices.byteOffset||0,k=r.sparse.values.byteOffset||0,K=new I(s[1],R,r.sparse.count*T),ee=new f(s[2],k,r.sparse.count*u);a!==null&&(v=new Bo(v.array.slice(),v.itemSize,v.normalized));for(let _e=0,Q=K.length;_e<Q;_e++){const ne=K[_e];if(v.setX(ne,ee[_e*u]),u>=2&&v.setY(ne,ee[_e*u+1]),u>=3&&v.setZ(ne,ee[_e*u+2]),u>=4&&v.setW(ne,ee[_e*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,s=t.images[i];let a=this.textureLoader;if(s.uri){const u=n.manager.getHandler(s.uri);u!==null&&(a=u)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],a=i.images[t],u=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(t,n).then(function(l){l.flipY=!1,l.name=s.name||a.name||"";const d=(i.samplers||{})[s.sampler]||{};return l.magFilter=F_[d.magFilter]||qo,l.minFilter=F_[d.minFilter]||Va,l.wrapS=L_[d.wrapS]||Ru,l.wrapT=L_[d.wrapT]||Ru,r.associations.set(l,{textures:e}),l}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const s=r.images[e],a=self.URL||self.webkitURL;let u=s.uri||"",f=!1;if(s.bufferView!==void 0)u=n.getDependency("bufferView",s.bufferView).then(function(p){f=!0;const d=new Blob([p],{type:s.mimeType});return u=a.createObjectURL(d),u});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(u).then(function(p){return new Promise(function(d,_){let A=d;t.isImageBitmapLoader===!0&&(A=function(E){const v=new xo(E);v.needsUpdate=!0,d(v)}),t.load(Ua.resolveURL(p,i.path),A,void 0,_)})}).then(function(p){return f===!0&&a.revokeObjectURL(u),p.userData.mimeType=s.mimeType||xB(s.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),p});return this.sourceCache[e]=l,l}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[Gi.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[Gi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const u=i.associations.get(s);s=i.extensions[Gi.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),i.associations.set(s,u)}}return r!==void 0&&(s.encoding=r),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let u=this.cache.get(a);u||(u=new oy,Ss.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(a,u)),n=u}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let u=this.cache.get(a);u||(u=new iy,Ss.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(a,u)),n=u}if(r||i||s){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let u=this.cache.get(a);u||(u=n.clone(),i&&(u.vertexColors=!0),s&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(a,u),this.associations.set(u,this.associations.get(n))),n=u}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return Rh}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let s;const a={},u=i.extensions||{},f=[];if(u[Gi.KHR_MATERIALS_UNLIT]){const p=r[Gi.KHR_MATERIALS_UNLIT];s=p.getMaterialType(),f.push(p.extendParams(a,i,t))}else{const p=i.pbrMetallicRoughness||{};if(a.color=new _i(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const d=p.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}p.baseColorTexture!==void 0&&f.push(t.assignTexture(a,"map",p.baseColorTexture,Vi)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),f.push(t.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),s=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}i.doubleSided===!0&&(a.side=nf);const l=i.alphaMode||Zf.OPAQUE;if(l===Zf.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===Zf.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&s!==Ia&&(f.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new Xr(1,1),i.normalTexture.scale!==void 0)){const p=i.normalTexture.scale;a.normalScale.set(p,p)}return i.occlusionTexture!==void 0&&s!==Ia&&(f.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&s!==Ia&&(a.emissive=new _i().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&s!==Ia&&f.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,Vi)),Promise.all(f).then(function(){const p=new s(a);return i.name&&(p.name=i.name),ia(p,i),t.associations.set(p,{materials:e}),i.extensions&&rc(r,p,i),p})}createUniqueName(e){const t=Ji.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(a){return n[Gi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(u){return N_(u,a,t)})}const s=[];for(let a=0,u=e.length;a<u;a++){const f=e[a],l=SB(f),p=r[l];if(p)s.push(p.promise);else{let d;f.extensions&&f.extensions[Gi.KHR_DRACO_MESH_COMPRESSION]?d=i(f):d=N_(new gs,f,t),r[l]={primitive:f,promise:d},s.push(d)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],s=i.primitives,a=[];for(let u=0,f=s.length;u<f;u++){const l=s[u].material===void 0?TB(this.cache):this.getDependency("material",s[u].material);a.push(l)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(u){const f=u.slice(0,u.length-1),l=u[u.length-1],p=[];for(let _=0,A=l.length;_<A;_++){const E=l[_],v=s[_];let T;const I=f[_];if(v.mode===ns.TRIANGLES||v.mode===ns.TRIANGLE_STRIP||v.mode===ns.TRIANGLE_FAN||v.mode===void 0)T=i.isSkinnedMesh===!0?new _x(E,I):new ss(E,I),T.isSkinnedMesh===!0&&!T.geometry.attributes.skinWeight.normalized&&T.normalizeSkinWeights(),v.mode===ns.TRIANGLE_STRIP?T.geometry=U_(T.geometry,XE):v.mode===ns.TRIANGLE_FAN&&(T.geometry=U_(T.geometry,Ng));else if(v.mode===ns.LINES)T=new bx(E,I);else if(v.mode===ns.LINE_STRIP)T=new Dh(E,I);else if(v.mode===ns.LINE_LOOP)T=new Ex(E,I);else if(v.mode===ns.POINTS)T=new Tx(E,I);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(T.geometry.morphAttributes).length>0&&CB(T,i),T.name=t.createUniqueName(i.name||"mesh_"+e),ia(T,i),v.extensions&&rc(r,T,v),t.assignFinalMaterial(T),p.push(T)}for(let _=0,A=p.length;_<A;_++)t.associations.set(p[_],{meshes:e,primitives:_});if(p.length===1)return p[0];const d=new Pa;t.associations.set(d,{meshes:e});for(let _=0,A=p.length;_<A;_++)d.add(p[_]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ho(hT.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Sh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ia(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this.getDependency("node",t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const i=r.pop(),s=r,a=[],u=[];for(let f=0,l=s.length;f<l;f++){const p=s[f];if(p){a.push(p);const d=new Ei;i!==null&&d.fromArray(i.array,f*16),u.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new Mh(a,u)})}loadAnimation(e){const n=this.json.animations[e],r=[],i=[],s=[],a=[],u=[];for(let f=0,l=n.channels.length;f<l;f++){const p=n.channels[f],d=n.samplers[p.sampler],_=p.target,A=_.node,E=n.parameters!==void 0?n.parameters[d.input]:d.input,v=n.parameters!==void 0?n.parameters[d.output]:d.output;r.push(this.getDependency("node",A)),i.push(this.getDependency("accessor",E)),s.push(this.getDependency("accessor",v)),a.push(d),u.push(_)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(s),Promise.all(a),Promise.all(u)]).then(function(f){const l=f[0],p=f[1],d=f[2],_=f[3],A=f[4],E=[];for(let T=0,I=l.length;T<I;T++){const R=l[T],k=p[T],K=d[T],ee=_[T],_e=A[T];if(R===void 0)continue;R.updateMatrix();let Q;switch(Zs[_e.path]){case Zs.weights:Q=xc;break;case Zs.rotation:Q=qa;break;case Zs.position:case Zs.scale:default:Q=Bc;break}const ne=R.name?R.name:R.uuid,de=ee.interpolation!==void 0?EB[ee.interpolation]:Pu,Ie=[];Zs[_e.path]===Zs.weights?R.traverse(function(Te){Te.morphTargetInfluences&&Ie.push(Te.name?Te.name:Te.uuid)}):Ie.push(ne);let Pe=K.array;if(K.normalized){const Te=wd(Pe.constructor),Ee=new Float32Array(Pe.length);for(let Se=0,Oe=Pe.length;Se<Oe;Se++)Ee[Se]=Pe[Se]*Te;Pe=Ee}for(let Te=0,Ee=Ie.length;Te<Ee;Te++){const Se=new Q(Ie[Te]+"."+Zs[_e.path],k.array,Pe,de);ee.interpolation==="CUBICSPLINE"&&(Se.createInterpolant=function(We){const j=this instanceof qa?bB:ly;return new j(this.times,this.values,this.getValueSize()/3,We)},Se.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push(Se)}}const v=n.name?n.name:"animation_"+e;return new Mx(v,void 0,E)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(i){const s=n._getNodeRef(n.meshCache,r.mesh,i);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let u=0,f=r.weights.length;u<f;u++)a.morphTargetInfluences[u]=r.weights[u]}),s})}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],s=i.name?r.createUniqueName(i.name):"";return function(){const a=[],u=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});u&&a.push(u),i.camera!==void 0&&a.push(r.getDependency("camera",i.camera).then(function(d){return r._getNodeRef(r.cameraCache,i.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){a.push(d)});const f=[],l=i.children||[];for(let d=0,_=l.length;d<_;d++)f.push(r.getDependency("node",l[d]));const p=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([Promise.all(a),Promise.all(f),p])}().then(function(a){const u=a[0],f=a[1],l=a[2];let p;if(i.isBone===!0?p=new ry:u.length>1?p=new Pa:u.length===1?p=u[0]:p=new oo,p!==u[0])for(let d=0,_=u.length;d<_;d++)p.add(u[d]);if(i.name&&(p.userData.name=i.name,p.name=s),ia(p,i),i.extensions&&rc(n,p,i),i.matrix!==void 0){const d=new Ei;d.fromArray(i.matrix),p.applyMatrix4(d)}else i.translation!==void 0&&p.position.fromArray(i.translation),i.rotation!==void 0&&p.quaternion.fromArray(i.rotation),i.scale!==void 0&&p.scale.fromArray(i.scale);r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,l!==null&&p.traverse(function(d){d.isSkinnedMesh&&d.bind(l,BB)});for(let d=0,_=f.length;d<_;d++)p.add(f[d]);return p})}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new Pa;n.name&&(i.name=r.createUniqueName(n.name)),ia(i,n),n.extensions&&rc(t,i,n);const s=n.nodes||[],a=[];for(let u=0,f=s.length;u<f;u++)a.push(r.getDependency("node",s[u]));return Promise.all(a).then(function(u){for(let l=0,p=u.length;l<p;l++)i.add(u[l]);const f=l=>{const p=new Map;for(const[d,_]of r.associations)(d instanceof Ss||d instanceof xo)&&p.set(d,_);return l.traverse(d=>{const _=r.associations.get(d);_!=null&&p.set(d,_)}),p};return r.associations=f(i),i})}}function DB(o,e,t){const n=e.attributes,r=new $a;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],u=a.min,f=a.max;if(u!==void 0&&f!==void 0){if(r.set(new ke(u[0],u[1],u[2]),new ke(f[0],f[1],f[2])),a.normalized){const l=wd(Su[a.componentType]);r.min.multiplyScalar(l),r.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const a=new ke,u=new ke;for(let f=0,l=i.length;f<l;f++){const p=i[f];if(p.POSITION!==void 0){const d=t.json.accessors[p.POSITION],_=d.min,A=d.max;if(_!==void 0&&A!==void 0){if(u.setX(Math.max(Math.abs(_[0]),Math.abs(A[0]))),u.setY(Math.max(Math.abs(_[1]),Math.abs(A[1]))),u.setZ(Math.max(Math.abs(_[2]),Math.abs(A[2]))),d.normalized){const E=wd(Su[d.componentType]);u.multiplyScalar(E)}a.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}o.boundingBox=r;const s=new Uu;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,o.boundingSphere=s}function N_(o,e,t){const n=e.attributes,r=[];function i(s,a){return t.getDependency("accessor",s).then(function(u){o.setAttribute(a,u)})}for(const s in n){const a=Td[s]||s.toLowerCase();a in o.attributes||r.push(i(n[s],a))}if(e.indices!==void 0&&!o.index){const s=t.getDependency("accessor",e.indices).then(function(a){o.setIndex(a)});r.push(s)}return ia(o,e),DB(o,e,t),Promise.all(r).then(function(){return e.targets!==void 0?wB(o,e.targets,t):o})}function U_(o,e){let t=o.getIndex();if(t===null){const s=[],a=o.getAttribute("position");if(a!==void 0){for(let u=0;u<a.count;u++)s.push(u);o.setIndex(s),t=o.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),o}const n=t.count-2,r=[];if(e===Ng)for(let s=1;s<=n;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<n;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=o.clone();return i.setIndex(r),i}const Qf=new WeakMap;class RB extends Wu{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new Nl(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,s=>{this.decodeDracoFile(s,t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(Qf.has(e)){const u=Qf.get(e);if(u.key===n)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(i,s).then(u=>(r=u,new Promise((f,l)=>{r._callbacks[i]={resolve:f,reject:l},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return a.catch(()=>!0).then(()=>{r&&i&&this._releaseTask(r,i)}),Qf.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new gs;e.index&&t.setIndex(new Bo(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,s=r.array,a=r.itemSize;t.setAttribute(i,new Bo(s,a))}return t}_loadLibrary(e,t){const n=new Nl(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,i)=>{n.load(e,r,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const i=IB.toString(),s=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(i){const s=i.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,i){return r._taskLoad>i._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function IB(){let o,e;onmessage=function(s){const a=s.data;switch(a.type){case"init":o=a.decoderConfig,e=new Promise(function(l){o.onModuleLoaded=function(p){l({draco:p})},DracoDecoderModule(o)});break;case"decode":const u=a.buffer,f=a.taskConfig;e.then(l=>{const p=l.draco,d=new p.Decoder,_=new p.DecoderBuffer;_.Init(new Int8Array(u),u.byteLength);try{const A=t(p,d,_,f),E=A.attributes.map(v=>v.array.buffer);A.index&&E.push(A.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:A},E)}catch(A){console.error(A),self.postMessage({type:"error",id:a.id,error:A.message})}finally{p.destroy(_),p.destroy(d)}});break}};function t(s,a,u,f){const l=f.attributeIDs,p=f.attributeTypes;let d,_;const A=a.GetEncodedGeometryType(u);if(A===s.TRIANGULAR_MESH)d=new s.Mesh,_=a.DecodeBufferToMesh(u,d);else if(A===s.POINT_CLOUD)d=new s.PointCloud,_=a.DecodeBufferToPointCloud(u,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const E={index:null,attributes:[]};for(const v in l){const T=self[p[v]];let I,R;if(f.useUniqueIDs)R=l[v],I=a.GetAttributeByUniqueId(d,R);else{if(R=a.GetAttributeId(d,s[l[v]]),R===-1)continue;I=a.GetAttribute(d,R)}E.attributes.push(r(s,a,d,v,T,I))}return A===s.TRIANGULAR_MESH&&(E.index=n(s,a,d)),s.destroy(d),E}function n(s,a,u){const l=u.num_faces()*3,p=l*4,d=s._malloc(p);a.GetTrianglesUInt32Array(u,p,d);const _=new Uint32Array(s.HEAPF32.buffer,d,l).slice();return s._free(d),{array:_,itemSize:1}}function r(s,a,u,f,l,p){const d=p.num_components(),A=u.num_points()*d,E=A*l.BYTES_PER_ELEMENT,v=i(s,l),T=s._malloc(E);a.GetAttributeDataArrayForAllPoints(u,p,v,E,T);const I=new l(s.HEAPF32.buffer,T,A).slice();return s._free(T),{name:f,array:I,itemSize:d}}function i(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}const Bl=400,Ml=400;function PB(o,e){const t=new Qx(o,e.domElement);return t.listenToKeyEvents(window),t.enableDamping=!0,t.dampingFactor=.05,t.screenSpacePanning=!0,t.minDistance=1,t.maxDistance=500,t.maxPolarAngle=Math.PI,t.autoRotate=!0,t}function FB(){const o=new Ed(16777215,.8*Math.PI);o.position.set(.5,0,.866);const e=new Ed(16777215,.8*Math.PI);e.position.set(-.5,0,-.866);const t=new Wx(16777215,.3);return[o,e,t]}function LB(){const o=new ny({antialias:!0});return o.outputEncoding=Vi,o.physicallyCorrectLights=!0,o.setPixelRatio(window.devicePixelRatio),o.setSize(Bl,Ml),o.setClearColor(13421772),o}function G_(){const o=new hx;o.background=new _i(1644825);const e=LB(),t=new Ho(60,Bl/Ml,1,1e3),n=PB(t,e);FB().forEach(a=>o.add(a)),window.addEventListener("resize",r);function r(){t.aspect=Bl/Ml,t.updateProjectionMatrix(),e.setSize(Bl,Ml)}function i(){requestAnimationFrame(i),n.update(),s()}const s=()=>e.render(o,t);return{scene:o,camera:t,renderer:e,animate:i}}function OB(){const o=new eB,e=new RB;return e.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/"),o.setDRACOLoader(e),o}async function ed(o,e){const n=await OB().loadAsync(o),r=new $a().setFromObject(n.scene),i=r.getSize(new ke).length(),s=r.getCenter(new ke);return n.scene.position.x=-s.x,n.scene.position.y=-s.y,n.scene.position.z=-s.z,e.near=i/100,e.far=i*100,e.updateProjectionMatrix(),e.position.copy(s),e.position.x+=i/2,e.position.y+=i/5,e.position.z+=i/2,e.lookAt(s),n}function NB(o){let e,t,n,r;return e=new em({props:{id:"article1",fileName:o[2],size:o[4],scene:o[0]}}),n=new em({props:{id:"article2",fileName:o[3],size:o[5],scene:o[1]}}),{c(){ea(e.$$.fragment),t=Ro(),ea(n.$$.fragment)},l(i){ta(e.$$.fragment,i),t=Io(i),ta(n.$$.fragment,i)},m(i,s){na(e,i,s),io(i,t,s),na(n,i,s),r=!0},p(i,s){const a={};s&4&&(a.fileName=i[2]),s&16&&(a.size=i[4]),s&1&&(a.scene=i[0]),e.$set(a);const u={};s&8&&(u.fileName=i[3]),s&32&&(u.size=i[5]),s&2&&(u.scene=i[1]),n.$set(u)},i(i){r||(Gs(e.$$.fragment,i),Gs(n.$$.fragment,i),r=!0)},o(i){ks(e.$$.fragment,i),ks(n.$$.fragment,i),r=!1},d(i){ra(e,i),i&&Rr(t),ra(n,i)}}}function UB(o){let e,t,n,r,i,s,a,u,f,l,p,d,_,A,E,v,T,I,R;n=new K0({}),i=new j0({}),a=new H0({props:{onChangeFile:o[11]}}),l=new eE({props:{disabled:o[6],onClick:o[12]}});function k(ne){o[14](ne)}function K(ne){o[15](ne)}function ee(ne){o[16](ne)}function _e(ne){o[17](ne)}let Q={reCompress:o[13],disabledReCompress:o[6]};return o[7]!==void 0&&(Q.emissiveStrength=o[7]),o[8]!==void 0&&(Q.weld=o[8]),o[9]!==void 0&&(Q.simplify=o[9]),o[10]!==void 0&&(Q.texture=o[10]),d=new rE({props:Q}),Uc.push(()=>Gc(d,"emissiveStrength",k,o[7])),Uc.push(()=>Gc(d,"weld",K,o[8])),Uc.push(()=>Gc(d,"simplify",ee,o[9])),Uc.push(()=>Gc(d,"texture",_e,o[10])),I=new X0({props:{$$slots:{default:[NB]},$$scope:{ctx:o}}}),{c(){e=xi("meta"),t=Ro(),ea(n.$$.fragment),r=Ro(),ea(i.$$.fragment),s=Ro(),ea(a.$$.fragment),u=Ro(),f=xi("div"),ea(l.$$.fragment),p=Ro(),ea(d.$$.fragment),T=Ro(),ea(I.$$.fragment),this.h()},l(ne){const de=_y("svelte-17er649",document.head);e=Bi(de,"META",{name:!0,content:!0,class:!0}),de.forEach(Rr),t=Io(ne),ta(n.$$.fragment,ne),r=Io(ne),ta(i.$$.fragment,ne),s=Io(ne),ta(a.$$.fragment,ne),u=Io(ne),f=Bi(ne,"DIV",{style:!0,class:!0});var Ie=to(f);ta(l.$$.fragment,Ie),Ie.forEach(Rr),p=Io(ne),ta(d.$$.fragment,ne),T=Io(ne),ta(I.$$.fragment,ne),this.h()},h(){document.title="Online glTF optimizer",Qn(e,"name","description"),Qn(e,"content","Optimize your glTF. Compress to Draco and convert texture to WebP"),Qn(e,"class","svelte-sdhtho"),kc(f,"display","flex"),kc(f,"justify-content","center"),kc(f,"align-items","center"),kc(f,"margin","20px"),Qn(f,"class","svelte-sdhtho")},m(ne,de){zr(document.head,e),io(ne,t,de),na(n,ne,de),io(ne,r,de),na(i,ne,de),io(ne,s,de),na(a,ne,de),io(ne,u,de),io(ne,f,de),na(l,f,null),io(ne,p,de),na(d,ne,de),io(ne,T,de),na(I,ne,de),R=!0},p(ne,[de]){const Ie={};de&64&&(Ie.disabled=ne[6]),l.$set(Ie);const Pe={};de&64&&(Pe.disabledReCompress=ne[6]),!_&&de&128&&(_=!0,Pe.emissiveStrength=ne[7],Hc(()=>_=!1)),!A&&de&256&&(A=!0,Pe.weld=ne[8],Hc(()=>A=!1)),!E&&de&512&&(E=!0,Pe.simplify=ne[9],Hc(()=>E=!1)),!v&&de&1024&&(v=!0,Pe.texture=ne[10],Hc(()=>v=!1)),d.$set(Pe);const Te={};de&67108927&&(Te.$$scope={dirty:de,ctx:ne}),I.$set(Te)},i(ne){R||(Gs(n.$$.fragment,ne),Gs(i.$$.fragment,ne),Gs(a.$$.fragment,ne),Gs(l.$$.fragment,ne),Gs(d.$$.fragment,ne),Gs(I.$$.fragment,ne),R=!0)},o(ne){ks(n.$$.fragment,ne),ks(i.$$.fragment,ne),ks(a.$$.fragment,ne),ks(l.$$.fragment,ne),ks(d.$$.fragment,ne),ks(I.$$.fragment,ne),R=!1},d(ne){Rr(e),ne&&Rr(t),ra(n,ne),ne&&Rr(r),ra(i,ne),ne&&Rr(s),ra(a,ne),ne&&Rr(u),ne&&Rr(f),ra(l),ne&&Rr(p),ra(d,ne),ne&&Rr(T),ra(I,ne)}}}const k_="compressed.glb";function GB(o,e,t){let n,r,i,s,a,u,f,l="",p="",d="",_="",A,E,v=!0,T,I=1,R={tolerance:1e-4},k={enabled:!1,ratio:.75,error:.01},K={resize:{resolution:1024,filter:"LANCZOS3"}};Cd(()=>{const{scene:Te,camera:Ee,renderer:Se,animate:Oe}=G_(),{scene:We,camera:j,renderer:_t,animate:Qe}=G_();r=Te,i=We,s=Ee,a=j,t(0,u=Se.domElement),t(1,f=_t.domElement),Oe(),Qe()});async function ee(Te){n=Te[0],t(2,l=n.name),t(3,p=k_),t(4,d=_f(n.size,{base:2,standard:"jedec"}));const Ee=URL.createObjectURL(n);A=await ed(Ee,s),r.add(A.scene),T=await dd.web(new Uint8Array(await n.arrayBuffer()),{emissiveStrength:I,transform:{simplify:k,weld:R,texture:K}});const Se=URL.createObjectURL(new Blob([T]));t(5,_=_f(T.byteLength,{base:2,standard:"jedec"})),E=await ed(Se,a),i.add(E.scene),t(6,v=!1)}function _e(){U0({fileName:k_,arrayBuffer:T})}async function Q(){i.remove(E.scene),T=await dd.web(new Uint8Array(await n.arrayBuffer()),{emissiveStrength:I,transform:{simplify:k,weld:R,texture:K}});const Te=URL.createObjectURL(new Blob([T]));t(5,_=_f(T.byteLength,{base:2,standard:"jedec"})),E=await ed(Te,a),i.add(E.scene)}function ne(Te){I=Te,t(7,I)}function de(Te){R=Te,t(8,R)}function Ie(Te){k=Te,t(9,k)}function Pe(Te){K=Te,t(10,K)}return[u,f,l,p,d,_,v,I,R,k,K,ee,_e,Q,ne,de,Ie,Pe]}class aD extends ca{constructor(e){super(),la(this,e,GB,UB,fa,{})}}export{aD as default};
